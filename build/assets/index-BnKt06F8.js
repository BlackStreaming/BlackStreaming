(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function $1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Oy={exports:{}},p0={},Ly={exports:{}},Gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RE;function cj(){if(RE)return Gt;RE=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function x(ae){return ae===null||typeof ae!="object"?null:(ae=m&&ae[m]||ae["@@iterator"],typeof ae=="function"?ae:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,w={};function E(ae,W,ee){this.props=ae,this.context=W,this.refs=w,this.updater=ee||v}E.prototype.isReactComponent={},E.prototype.setState=function(ae,W){if(typeof ae!="object"&&typeof ae!="function"&&ae!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ae,W,"setState")},E.prototype.forceUpdate=function(ae){this.updater.enqueueForceUpdate(this,ae,"forceUpdate")};function j(){}j.prototype=E.prototype;function P(ae,W,ee){this.props=ae,this.context=W,this.refs=w,this.updater=ee||v}var V=P.prototype=new j;V.constructor=P,_(V,E.prototype),V.isPureReactComponent=!0;var L=Array.isArray,K=Object.prototype.hasOwnProperty,H={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function N(ae,W,ee){var te,ie={},U=null,be=null;if(W!=null)for(te in W.ref!==void 0&&(be=W.ref),W.key!==void 0&&(U=""+W.key),W)K.call(W,te)&&!S.hasOwnProperty(te)&&(ie[te]=W[te]);var Ce=arguments.length-2;if(Ce===1)ie.children=ee;else if(1<Ce){for(var ke=Array(Ce),Ee=0;Ee<Ce;Ee++)ke[Ee]=arguments[Ee+2];ie.children=ke}if(ae&&ae.defaultProps)for(te in Ce=ae.defaultProps,Ce)ie[te]===void 0&&(ie[te]=Ce[te]);return{$$typeof:r,type:ae,key:U,ref:be,props:ie,_owner:H.current}}function I(ae,W){return{$$typeof:r,type:ae.type,key:W,ref:ae.ref,props:ae.props,_owner:ae._owner}}function R(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===r}function M(ae){var W={"=":"=0",":":"=2"};return"$"+ae.replace(/[=:]/g,function(ee){return W[ee]})}var D=/\/+/g;function F(ae,W){return typeof ae=="object"&&ae!==null&&ae.key!=null?M(""+ae.key):W.toString(36)}function he(ae,W,ee,te,ie){var U=typeof ae;(U==="undefined"||U==="boolean")&&(ae=null);var be=!1;if(ae===null)be=!0;else switch(U){case"string":case"number":be=!0;break;case"object":switch(ae.$$typeof){case r:case e:be=!0}}if(be)return be=ae,ie=ie(be),ae=te===""?"."+F(be,0):te,L(ie)?(ee="",ae!=null&&(ee=ae.replace(D,"$&/")+"/"),he(ie,W,ee,"",function(Ee){return Ee})):ie!=null&&(R(ie)&&(ie=I(ie,ee+(!ie.key||be&&be.key===ie.key?"":(""+ie.key).replace(D,"$&/")+"/")+ae)),W.push(ie)),1;if(be=0,te=te===""?".":te+":",L(ae))for(var Ce=0;Ce<ae.length;Ce++){U=ae[Ce];var ke=te+F(U,Ce);be+=he(U,W,ee,ke,ie)}else if(ke=x(ae),typeof ke=="function")for(ae=ke.call(ae),Ce=0;!(U=ae.next()).done;)U=U.value,ke=te+F(U,Ce++),be+=he(U,W,ee,ke,ie);else if(U==="object")throw W=String(ae),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(ae).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return be}function Ae(ae,W,ee){if(ae==null)return ae;var te=[],ie=0;return he(ae,te,"","",function(U){return W.call(ee,U,ie++)}),te}function Oe(ae){if(ae._status===-1){var W=ae._result;W=W(),W.then(function(ee){(ae._status===0||ae._status===-1)&&(ae._status=1,ae._result=ee)},function(ee){(ae._status===0||ae._status===-1)&&(ae._status=2,ae._result=ee)}),ae._status===-1&&(ae._status=0,ae._result=W)}if(ae._status===1)return ae._result.default;throw ae._result}var De={current:null},we={transition:null},_e={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:we,ReactCurrentOwner:H};function Ne(){throw Error("act(...) is not supported in production builds of React.")}return Gt.Children={map:Ae,forEach:function(ae,W,ee){Ae(ae,function(){W.apply(this,arguments)},ee)},count:function(ae){var W=0;return Ae(ae,function(){W++}),W},toArray:function(ae){return Ae(ae,function(W){return W})||[]},only:function(ae){if(!R(ae))throw Error("React.Children.only expected to receive a single React element child.");return ae}},Gt.Component=E,Gt.Fragment=t,Gt.Profiler=i,Gt.PureComponent=P,Gt.StrictMode=n,Gt.Suspense=d,Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,Gt.act=Ne,Gt.cloneElement=function(ae,W,ee){if(ae==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ae+".");var te=_({},ae.props),ie=ae.key,U=ae.ref,be=ae._owner;if(W!=null){if(W.ref!==void 0&&(U=W.ref,be=H.current),W.key!==void 0&&(ie=""+W.key),ae.type&&ae.type.defaultProps)var Ce=ae.type.defaultProps;for(ke in W)K.call(W,ke)&&!S.hasOwnProperty(ke)&&(te[ke]=W[ke]===void 0&&Ce!==void 0?Ce[ke]:W[ke])}var ke=arguments.length-2;if(ke===1)te.children=ee;else if(1<ke){Ce=Array(ke);for(var Ee=0;Ee<ke;Ee++)Ce[Ee]=arguments[Ee+2];te.children=Ce}return{$$typeof:r,type:ae.type,key:ie,ref:U,props:te,_owner:be}},Gt.createContext=function(ae){return ae={$$typeof:a,_currentValue:ae,_currentValue2:ae,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ae.Provider={$$typeof:s,_context:ae},ae.Consumer=ae},Gt.createElement=N,Gt.createFactory=function(ae){var W=N.bind(null,ae);return W.type=ae,W},Gt.createRef=function(){return{current:null}},Gt.forwardRef=function(ae){return{$$typeof:c,render:ae}},Gt.isValidElement=R,Gt.lazy=function(ae){return{$$typeof:p,_payload:{_status:-1,_result:ae},_init:Oe}},Gt.memo=function(ae,W){return{$$typeof:h,type:ae,compare:W===void 0?null:W}},Gt.startTransition=function(ae){var W=we.transition;we.transition={};try{ae()}finally{we.transition=W}},Gt.unstable_act=Ne,Gt.useCallback=function(ae,W){return De.current.useCallback(ae,W)},Gt.useContext=function(ae){return De.current.useContext(ae)},Gt.useDebugValue=function(){},Gt.useDeferredValue=function(ae){return De.current.useDeferredValue(ae)},Gt.useEffect=function(ae,W){return De.current.useEffect(ae,W)},Gt.useId=function(){return De.current.useId()},Gt.useImperativeHandle=function(ae,W,ee){return De.current.useImperativeHandle(ae,W,ee)},Gt.useInsertionEffect=function(ae,W){return De.current.useInsertionEffect(ae,W)},Gt.useLayoutEffect=function(ae,W){return De.current.useLayoutEffect(ae,W)},Gt.useMemo=function(ae,W){return De.current.useMemo(ae,W)},Gt.useReducer=function(ae,W,ee){return De.current.useReducer(ae,W,ee)},Gt.useRef=function(ae){return De.current.useRef(ae)},Gt.useState=function(ae){return De.current.useState(ae)},Gt.useSyncExternalStore=function(ae,W,ee){return De.current.useSyncExternalStore(ae,W,ee)},Gt.useTransition=function(){return De.current.useTransition()},Gt.version="18.3.1",Gt}var jE;function B1(){return jE||(jE=1,Ly.exports=cj()),Ly.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE;function uj(){if(DE)return p0;DE=1;var r=B1(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(c,d,h){var p,m={},x=null,v=null;h!==void 0&&(x=""+h),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(v=d.ref);for(p in d)n.call(d,p)&&!s.hasOwnProperty(p)&&(m[p]=d[p]);if(c&&c.defaultProps)for(p in d=c.defaultProps,d)m[p]===void 0&&(m[p]=d[p]);return{$$typeof:e,type:c,key:x,ref:v,props:m,_owner:i.current}}return p0.Fragment=t,p0.jsx=a,p0.jsxs=a,p0}var FE;function dj(){return FE||(FE=1,Oy.exports=uj()),Oy.exports}var o=dj(),k=B1();const $s=$1(k);var _p={},My={exports:{}},bi={},Vy={exports:{}},$y={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE;function hj(){return OE||(OE=1,(function(r){function e(we,_e){var Ne=we.length;we.push(_e);e:for(;0<Ne;){var ae=Ne-1>>>1,W=we[ae];if(0<i(W,_e))we[ae]=_e,we[Ne]=W,Ne=ae;else break e}}function t(we){return we.length===0?null:we[0]}function n(we){if(we.length===0)return null;var _e=we[0],Ne=we.pop();if(Ne!==_e){we[0]=Ne;e:for(var ae=0,W=we.length,ee=W>>>1;ae<ee;){var te=2*(ae+1)-1,ie=we[te],U=te+1,be=we[U];if(0>i(ie,Ne))U<W&&0>i(be,ie)?(we[ae]=be,we[U]=Ne,ae=U):(we[ae]=ie,we[te]=Ne,ae=te);else if(U<W&&0>i(be,Ne))we[ae]=be,we[U]=Ne,ae=U;else break e}}return _e}function i(we,_e){var Ne=we.sortIndex-_e.sortIndex;return Ne!==0?Ne:we.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();r.unstable_now=function(){return a.now()-c}}var d=[],h=[],p=1,m=null,x=3,v=!1,_=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(we){for(var _e=t(h);_e!==null;){if(_e.callback===null)n(h);else if(_e.startTime<=we)n(h),_e.sortIndex=_e.expirationTime,e(d,_e);else break;_e=t(h)}}function L(we){if(w=!1,V(we),!_)if(t(d)!==null)_=!0,Oe(K);else{var _e=t(h);_e!==null&&De(L,_e.startTime-we)}}function K(we,_e){_=!1,w&&(w=!1,j(N),N=-1),v=!0;var Ne=x;try{for(V(_e),m=t(d);m!==null&&(!(m.expirationTime>_e)||we&&!M());){var ae=m.callback;if(typeof ae=="function"){m.callback=null,x=m.priorityLevel;var W=ae(m.expirationTime<=_e);_e=r.unstable_now(),typeof W=="function"?m.callback=W:m===t(d)&&n(d),V(_e)}else n(d);m=t(d)}if(m!==null)var ee=!0;else{var te=t(h);te!==null&&De(L,te.startTime-_e),ee=!1}return ee}finally{m=null,x=Ne,v=!1}}var H=!1,S=null,N=-1,I=5,R=-1;function M(){return!(r.unstable_now()-R<I)}function D(){if(S!==null){var we=r.unstable_now();R=we;var _e=!0;try{_e=S(!0,we)}finally{_e?F():(H=!1,S=null)}}else H=!1}var F;if(typeof P=="function")F=function(){P(D)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,Ae=he.port2;he.port1.onmessage=D,F=function(){Ae.postMessage(null)}}else F=function(){E(D,0)};function Oe(we){S=we,H||(H=!0,F())}function De(we,_e){N=E(function(){we(r.unstable_now())},_e)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(we){we.callback=null},r.unstable_continueExecution=function(){_||v||(_=!0,Oe(K))},r.unstable_forceFrameRate=function(we){0>we||125<we?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<we?Math.floor(1e3/we):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(d)},r.unstable_next=function(we){switch(x){case 1:case 2:case 3:var _e=3;break;default:_e=x}var Ne=x;x=_e;try{return we()}finally{x=Ne}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(we,_e){switch(we){case 1:case 2:case 3:case 4:case 5:break;default:we=3}var Ne=x;x=we;try{return _e()}finally{x=Ne}},r.unstable_scheduleCallback=function(we,_e,Ne){var ae=r.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?ae+Ne:ae):Ne=ae,we){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Ne+W,we={id:p++,callback:_e,priorityLevel:we,startTime:Ne,expirationTime:W,sortIndex:-1},Ne>ae?(we.sortIndex=Ne,e(h,we),t(d)===null&&we===t(h)&&(w?(j(N),N=-1):w=!0,De(L,Ne-ae))):(we.sortIndex=W,e(d,we),_||v||(_=!0,Oe(K))),we},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(we){var _e=x;return function(){var Ne=x;x=_e;try{return we.apply(this,arguments)}finally{x=Ne}}}})($y)),$y}var LE;function fj(){return LE||(LE=1,Vy.exports=hj()),Vy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ME;function pj(){if(ME)return bi;ME=1;var r=B1(),e=fj();function t(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,f=1;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(l,u){a(l,u),a(l+"Capture",u)}function a(l,u){for(i[l]=u,l=0;l<u.length;l++)n.add(u[l])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function x(l){return d.call(m,l)?!0:d.call(p,l)?!1:h.test(l)?m[l]=!0:(p[l]=!0,!1)}function v(l,u,f,y){if(f!==null&&f.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return y?!1:f!==null?!f.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function _(l,u,f,y){if(u===null||typeof u>"u"||v(l,u,f,y))return!0;if(y)return!1;if(f!==null)switch(f.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function w(l,u,f,y,b,A,B){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=y,this.attributeNamespace=b,this.mustUseProperty=f,this.propertyName=l,this.type=u,this.sanitizeURL=A,this.removeEmptyString=B}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){E[l]=new w(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var u=l[0];E[u]=new w(u,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){E[l]=new w(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){E[l]=new w(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){E[l]=new w(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){E[l]=new w(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){E[l]=new w(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){E[l]=new w(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){E[l]=new w(l,5,!1,l.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function P(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var u=l.replace(j,P);E[u]=new w(u,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var u=l.replace(j,P);E[u]=new w(u,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var u=l.replace(j,P);E[u]=new w(u,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){E[l]=new w(l,1,!1,l.toLowerCase(),null,!1,!1)}),E.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){E[l]=new w(l,1,!1,l.toLowerCase(),null,!0,!0)});function V(l,u,f,y){var b=E.hasOwnProperty(u)?E[u]:null;(b!==null?b.type!==0:y||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(_(u,f,b,y)&&(f=null),y||b===null?x(u)&&(f===null?l.removeAttribute(u):l.setAttribute(u,""+f)):b.mustUseProperty?l[b.propertyName]=f===null?b.type===3?!1:"":f:(u=b.attributeName,y=b.attributeNamespace,f===null?l.removeAttribute(u):(b=b.type,f=b===3||b===4&&f===!0?"":""+f,y?l.setAttributeNS(y,u,f):l.setAttribute(u,f))))}var L=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),H=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),M=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),Ae=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),we=Symbol.iterator;function _e(l){return l===null||typeof l!="object"?null:(l=we&&l[we]||l["@@iterator"],typeof l=="function"?l:null)}var Ne=Object.assign,ae;function W(l){if(ae===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);ae=u&&u[1]||""}return`
`+ae+l}var ee=!1;function te(l,u){if(!l||ee)return"";ee=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(ve){var y=ve}Reflect.construct(l,[],u)}else{try{u.call()}catch(ve){y=ve}l.call(u.prototype)}else{try{throw Error()}catch(ve){y=ve}l()}}catch(ve){if(ve&&y&&typeof ve.stack=="string"){for(var b=ve.stack.split(`
`),A=y.stack.split(`
`),B=b.length-1,ne=A.length-1;1<=B&&0<=ne&&b[B]!==A[ne];)ne--;for(;1<=B&&0<=ne;B--,ne--)if(b[B]!==A[ne]){if(B!==1||ne!==1)do if(B--,ne--,0>ne||b[B]!==A[ne]){var le=`
`+b[B].replace(" at new "," at ");return l.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",l.displayName)),le}while(1<=B&&0<=ne);break}}}finally{ee=!1,Error.prepareStackTrace=f}return(l=l?l.displayName||l.name:"")?W(l):""}function ie(l){switch(l.tag){case 5:return W(l.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return l=te(l.type,!1),l;case 11:return l=te(l.type.render,!1),l;case 1:return l=te(l.type,!0),l;default:return""}}function U(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case S:return"Fragment";case H:return"Portal";case I:return"Profiler";case N:return"StrictMode";case F:return"Suspense";case he:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case M:return(l.displayName||"Context")+".Consumer";case R:return(l._context.displayName||"Context")+".Provider";case D:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Ae:return u=l.displayName||null,u!==null?u:U(l.type)||"Memo";case Oe:u=l._payload,l=l._init;try{return U(l(u))}catch{}}return null}function be(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=u.render,l=l.displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(u);case 8:return u===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function Ce(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function ke(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Ee(l){var u=ke(l)?"checked":"value",f=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),y=""+l[u];if(!l.hasOwnProperty(u)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var b=f.get,A=f.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function(B){y=""+B,A.call(this,B)}}),Object.defineProperty(l,u,{enumerable:f.enumerable}),{getValue:function(){return y},setValue:function(B){y=""+B},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Ke(l){l._valueTracker||(l._valueTracker=Ee(l))}function dt(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),y="";return l&&(y=ke(l)?l.checked?"true":"false":l.value),l=y,l!==f?(u.setValue(l),!0):!1}function zt(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function bt(l,u){var f=u.checked;return Ne({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??l._wrapperState.initialChecked})}function tr(l,u){var f=u.defaultValue==null?"":u.defaultValue,y=u.checked!=null?u.checked:u.defaultChecked;f=Ce(u.value!=null?u.value:f),l._wrapperState={initialChecked:y,initialValue:f,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function Et(l,u){u=u.checked,u!=null&&V(l,"checked",u,!1)}function Pe(l,u){Et(l,u);var f=Ce(u.value),y=u.type;if(f!=null)y==="number"?(f===0&&l.value===""||l.value!=f)&&(l.value=""+f):l.value!==""+f&&(l.value=""+f);else if(y==="submit"||y==="reset"){l.removeAttribute("value");return}u.hasOwnProperty("value")?St(l,u.type,f):u.hasOwnProperty("defaultValue")&&St(l,u.type,Ce(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(l.defaultChecked=!!u.defaultChecked)}function Qt(l,u,f){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var y=u.type;if(!(y!=="submit"&&y!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+l._wrapperState.initialValue,f||u===l.value||(l.value=u),l.defaultValue=u}f=l.name,f!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,f!==""&&(l.name=f)}function St(l,u,f){(u!=="number"||zt(l.ownerDocument)!==l)&&(f==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+f&&(l.defaultValue=""+f))}var Be=Array.isArray;function ue(l,u,f,y){if(l=l.options,u){u={};for(var b=0;b<f.length;b++)u["$"+f[b]]=!0;for(f=0;f<l.length;f++)b=u.hasOwnProperty("$"+l[f].value),l[f].selected!==b&&(l[f].selected=b),b&&y&&(l[f].defaultSelected=!0)}else{for(f=""+Ce(f),u=null,b=0;b<l.length;b++){if(l[b].value===f){l[b].selected=!0,y&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function rt(l,u){if(u.dangerouslySetInnerHTML!=null)throw Error(t(91));return Ne({},u,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function st(l,u){var f=u.value;if(f==null){if(f=u.children,u=u.defaultValue,f!=null){if(u!=null)throw Error(t(92));if(Be(f)){if(1<f.length)throw Error(t(93));f=f[0]}u=f}u==null&&(u=""),f=u}l._wrapperState={initialValue:Ce(f)}}function ht(l,u){var f=Ce(u.value),y=Ce(u.defaultValue);f!=null&&(f=""+f,f!==l.value&&(l.value=f),u.defaultValue==null&&l.defaultValue!==f&&(l.defaultValue=f)),y!=null&&(l.defaultValue=""+y)}function Tt(l){var u=l.textContent;u===l._wrapperState.initialValue&&u!==""&&u!==null&&(l.value=u)}function lt(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ct(l,u){return l==null||l==="http://www.w3.org/1999/xhtml"?lt(u):l==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var ct,kr=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,f,y,b){MSApp.execUnsafeLocalFunction(function(){return l(u,f,y,b)})}:l})(function(l,u){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=u;else{for(ct=ct||document.createElement("div"),ct.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=ct.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;u.firstChild;)l.appendChild(u.firstChild)}});function ze(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var at={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mt=["Webkit","ms","Moz","O"];Object.keys(at).forEach(function(l){Mt.forEach(function(u){u=u+l.charAt(0).toUpperCase()+l.substring(1),at[u]=at[l]})});function xe(l,u,f){return u==null||typeof u=="boolean"||u===""?"":f||typeof u!="number"||u===0||at.hasOwnProperty(l)&&at[l]?(""+u).trim():u+"px"}function Xe(l,u){l=l.style;for(var f in u)if(u.hasOwnProperty(f)){var y=f.indexOf("--")===0,b=xe(f,u[f],y);f==="float"&&(f="cssFloat"),y?l.setProperty(f,b):l[f]=b}}var et=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ut(l,u){if(u){if(et[l]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(t(137,l));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(t(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(t(61))}if(u.style!=null&&typeof u.style!="object")throw Error(t(62))}}function Ot(l,u){if(l.indexOf("-")===-1)return typeof u.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ht=null;function Kt(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var pt=null,nt=null,Lt=null;function qt(l){if(l=Zd(l)){if(typeof pt!="function")throw Error(t(280));var u=l.stateNode;u&&(u=Lf(u),pt(l.stateNode,l.type,u))}}function hr(l){nt?Lt?Lt.push(l):Lt=[l]:nt=l}function xn(){if(nt){var l=nt,u=Lt;if(Lt=nt=null,qt(l),u)for(l=0;l<u.length;l++)qt(u[l])}}function yn(l,u){return l(u)}function Pi(){}var tn=!1;function Zi(l,u,f){if(tn)return l(u,f);tn=!0;try{return yn(l,u,f)}finally{tn=!1,(nt!==null||Lt!==null)&&(Pi(),xn())}}function wr(l,u){var f=l.stateNode;if(f===null)return null;var y=Lf(f);if(y===null)return null;f=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(t(231,u,typeof f));return f}var es=!1;if(c)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){es=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{es=!1}function Ri(l,u,f,y,b,A,B,ne,le){var ve=Array.prototype.slice.call(arguments,3);try{u.apply(f,ve)}catch(Ue){this.onError(Ue)}}var hi=!1,ji=null,z=!1,J=null,Y={onError:function(l){hi=!0,ji=l}};function X(l,u,f,y,b,A,B,ne,le){hi=!1,ji=null,Ri.apply(Y,arguments)}function Z(l,u,f,y,b,A,B,ne,le){if(X.apply(this,arguments),hi){if(hi){var ve=ji;hi=!1,ji=null}else throw Error(t(198));z||(z=!0,J=ve)}}function O(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function Q(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function oe(l){if(O(l)!==l)throw Error(t(188))}function se(l){var u=l.alternate;if(!u){if(u=O(l),u===null)throw Error(t(188));return u!==l?null:l}for(var f=l,y=u;;){var b=f.return;if(b===null)break;var A=b.alternate;if(A===null){if(y=b.return,y!==null){f=y;continue}break}if(b.child===A.child){for(A=b.child;A;){if(A===f)return oe(b),l;if(A===y)return oe(b),u;A=A.sibling}throw Error(t(188))}if(f.return!==y.return)f=b,y=A;else{for(var B=!1,ne=b.child;ne;){if(ne===f){B=!0,f=b,y=A;break}if(ne===y){B=!0,y=b,f=A;break}ne=ne.sibling}if(!B){for(ne=A.child;ne;){if(ne===f){B=!0,f=A,y=b;break}if(ne===y){B=!0,y=A,f=b;break}ne=ne.sibling}if(!B)throw Error(t(189))}}if(f.alternate!==y)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?l:u}function ce(l){return l=se(l),l!==null?fe(l):null}function fe(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=fe(l);if(u!==null)return u;l=l.sibling}return null}var je=e.unstable_scheduleCallback,Ve=e.unstable_cancelCallback,qe=e.unstable_shouldYield,Re=e.unstable_requestPaint,Le=e.unstable_now,At=e.unstable_getCurrentPriorityLevel,Bt=e.unstable_ImmediatePriority,$t=e.unstable_UserBlockingPriority,nr=e.unstable_NormalPriority,ri=e.unstable_LowPriority,Un=e.unstable_IdlePriority,zn=null,Vr=null;function Ys(l){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(zn,l,void 0,(l.current.flags&128)===128)}catch{}}var Tr=Math.clz32?Math.clz32:Bc,Aa=Math.log,$c=Math.LN2;function Bc(l){return l>>>=0,l===0?32:31-(Aa(l)/$c|0)|0}var ho=64,fo=4194304;function po(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function bl(l,u){var f=l.pendingLanes;if(f===0)return 0;var y=0,b=l.suspendedLanes,A=l.pingedLanes,B=f&268435455;if(B!==0){var ne=B&~b;ne!==0?y=po(ne):(A&=B,A!==0&&(y=po(A)))}else B=f&~b,B!==0?y=po(B):A!==0&&(y=po(A));if(y===0)return 0;if(u!==0&&u!==y&&(u&b)===0&&(b=y&-y,A=u&-u,b>=A||b===16&&(A&4194240)!==0))return u;if((y&4)!==0&&(y|=f&16),u=l.entangledLanes,u!==0)for(l=l.entanglements,u&=y;0<u;)f=31-Tr(u),b=1<<f,y|=l[f],u&=~b;return y}function hx(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Na(l,u){for(var f=l.suspendedLanes,y=l.pingedLanes,b=l.expirationTimes,A=l.pendingLanes;0<A;){var B=31-Tr(A),ne=1<<B,le=b[B];le===-1?((ne&f)===0||(ne&y)!==0)&&(b[B]=hx(ne,u)):le<=u&&(l.expiredLanes|=ne),A&=~ne}}function Di(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function wl(){var l=ho;return ho<<=1,(ho&4194240)===0&&(ho=64),l}function mo(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function go(l,u,f){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,u=31-Tr(u),l[u]=f}function Ar(l,u){var f=l.pendingLanes&~u;l.pendingLanes=u,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=u,l.mutableReadLanes&=u,l.entangledLanes&=u,u=l.entanglements;var y=l.eventTimes;for(l=l.expirationTimes;0<f;){var b=31-Tr(f),A=1<<b;u[b]=0,y[b]=-1,l[b]=-1,f&=~A}}function xo(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var y=31-Tr(f),b=1<<y;b&u|l[y]&u&&(l[y]|=u),f&=~b}}var Jt=0;function yo(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var gf,Uc,xf,yf,vf,Md=!1,Xs=[],Sn=null,bs=null,ws=null,vo=new Map,ts=new Map,Qs=[],fx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bf(l,u){switch(l){case"focusin":case"focusout":Sn=null;break;case"dragenter":case"dragleave":bs=null;break;case"mouseover":case"mouseout":ws=null;break;case"pointerover":case"pointerout":vo.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":ts.delete(u.pointerId)}}function fi(l,u,f,y,b,A){return l===null||l.nativeEvent!==A?(l={blockedOn:u,domEventName:f,eventSystemFlags:y,nativeEvent:A,targetContainers:[b]},u!==null&&(u=Zd(u),u!==null&&Uc(u)),l):(l.eventSystemFlags|=y,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function px(l,u,f,y,b){switch(u){case"focusin":return Sn=fi(Sn,l,u,f,y,b),!0;case"dragenter":return bs=fi(bs,l,u,f,y,b),!0;case"mouseover":return ws=fi(ws,l,u,f,y,b),!0;case"pointerover":var A=b.pointerId;return vo.set(A,fi(vo.get(A)||null,l,u,f,y,b)),!0;case"gotpointercapture":return A=b.pointerId,ts.set(A,fi(ts.get(A)||null,l,u,f,y,b)),!0}return!1}function wf(l){var u=Nl(l.target);if(u!==null){var f=O(u);if(f!==null){if(u=f.tag,u===13){if(u=Q(f),u!==null){l.blockedOn=u,vf(l.priority,function(){xf(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function ka(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=zc(l.domEventName,l.eventSystemFlags,u[0],l.nativeEvent);if(f===null){f=l.nativeEvent;var y=new f.constructor(f.type,f);Ht=y,f.target.dispatchEvent(y),Ht=null}else return u=Zd(f),u!==null&&Uc(u),l.blockedOn=f,!1;u.shift()}return!0}function _l(l,u,f){ka(l)&&f.delete(u)}function _f(){Md=!1,Sn!==null&&ka(Sn)&&(Sn=null),bs!==null&&ka(bs)&&(bs=null),ws!==null&&ka(ws)&&(ws=null),vo.forEach(_l),ts.forEach(_l)}function _s(l,u){l.blockedOn===u&&(l.blockedOn=null,Md||(Md=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_f)))}function Es(l){function u(b){return _s(b,l)}if(0<Xs.length){_s(Xs[0],l);for(var f=1;f<Xs.length;f++){var y=Xs[f];y.blockedOn===l&&(y.blockedOn=null)}}for(Sn!==null&&_s(Sn,l),bs!==null&&_s(bs,l),ws!==null&&_s(ws,l),vo.forEach(u),ts.forEach(u),f=0;f<Qs.length;f++)y=Qs[f],y.blockedOn===l&&(y.blockedOn=null);for(;0<Qs.length&&(f=Qs[0],f.blockedOn===null);)wf(f),f.blockedOn===null&&Qs.shift()}var Sa=L.ReactCurrentBatchConfig,bo=!0;function jr(l,u,f,y){var b=Jt,A=Sa.transition;Sa.transition=null;try{Jt=1,Vd(l,u,f,y)}finally{Jt=b,Sa.transition=A}}function mx(l,u,f,y){var b=Jt,A=Sa.transition;Sa.transition=null;try{Jt=4,Vd(l,u,f,y)}finally{Jt=b,Sa.transition=A}}function Vd(l,u,f,y){if(bo){var b=zc(l,u,f,y);if(b===null)Nx(l,u,y,El,f),bf(l,y);else if(px(b,l,u,f,y))y.stopPropagation();else if(bf(l,y),u&4&&-1<fx.indexOf(l)){for(;b!==null;){var A=Zd(b);if(A!==null&&gf(A),A=zc(l,u,f,y),A===null&&Nx(l,u,y,El,f),A===b)break;b=A}b!==null&&y.stopPropagation()}else Nx(l,u,y,null,f)}}var El=null;function zc(l,u,f,y){if(El=null,l=Kt(y),l=Nl(l),l!==null)if(u=O(l),u===null)l=null;else if(f=u.tag,f===13){if(l=Q(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null);return El=l,null}function $d(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(At()){case Bt:return 1;case $t:return 4;case nr:case ri:return 16;case Un:return 536870912;default:return 16}default:return 16}}var Fi=null,Hc=null,pi=null;function Bd(){if(pi)return pi;var l,u=Hc,f=u.length,y,b="value"in Fi?Fi.value:Fi.textContent,A=b.length;for(l=0;l<f&&u[l]===b[l];l++);var B=f-l;for(y=1;y<=B&&u[f-y]===b[A-y];y++);return pi=b.slice(l,1<y?1-y:void 0)}function Wc(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Js(){return!0}function Ud(){return!1}function Cn(l){function u(f,y,b,A,B){this._reactName=f,this._targetInst=b,this.type=y,this.nativeEvent=A,this.target=B,this.currentTarget=null;for(var ne in l)l.hasOwnProperty(ne)&&(f=l[ne],this[ne]=f?f(A):A[ne]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Js:Ud,this.isPropagationStopped=Ud,this}return Ne(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),u}var Ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qc=Cn(Ts),Zs=Ne({},Ts,{view:0,detail:0}),gx=Cn(Zs),Gc,Ca,wo,Tl=Ne({},Zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ea,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==wo&&(wo&&l.type==="mousemove"?(Gc=l.screenX-wo.screenX,Ca=l.screenY-wo.screenY):Ca=Gc=0,wo=l),Gc)},movementY:function(l){return"movementY"in l?l.movementY:Ca}}),Kc=Cn(Tl),zd=Ne({},Tl,{dataTransfer:0}),Ef=Cn(zd),Yc=Ne({},Zs,{relatedTarget:0}),Xc=Cn(Yc),Tf=Ne({},Ts,{animationName:0,elapsedTime:0,pseudoElement:0}),Ia=Cn(Tf),Af=Ne({},Ts,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Nf=Cn(Af),kf=Ne({},Ts,{data:0}),Hd=Cn(kf),Qc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ni={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cf(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=Sf[l])?!!u[l]:!1}function ea(){return Cf}var g=Ne({},Zs,{key:function(l){if(l.key){var u=Qc[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Wc(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?ni[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ea,charCode:function(l){return l.type==="keypress"?Wc(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Wc(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),T=Cn(g),C=Ne({},Tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G=Cn(C),pe=Ne({},Zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ea}),Te=Cn(pe),tt=Ne({},Ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),fr=Cn(tt),un=Ne({},Tl,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Zt=Cn(un),vn=[9,13,27,32],rn=c&&"CompositionEvent"in window,rs=null;c&&"documentMode"in document&&(rs=document.documentMode);var Oi=c&&"TextEvent"in window&&!rs,Al=c&&(!rn||rs&&8<rs&&11>=rs),Jc=" ",Nw=!1;function kw(l,u){switch(l){case"keyup":return vn.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sw(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Zc=!1;function aR(l,u){switch(l){case"compositionend":return Sw(u);case"keypress":return u.which!==32?null:(Nw=!0,Jc);case"textInput":return l=u.data,l===Jc&&Nw?null:l;default:return null}}function oR(l,u){if(Zc)return l==="compositionend"||!rn&&kw(l,u)?(l=Bd(),pi=Hc=Fi=null,Zc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Al&&u.locale!=="ko"?null:u.data;default:return null}}var lR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cw(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!lR[l.type]:u==="textarea"}function Iw(l,u,f,y){hr(y),u=Df(u,"onChange"),0<u.length&&(f=new qc("onChange","change",null,f,y),l.push({event:f,listeners:u}))}var Wd=null,qd=null;function cR(l){Kw(l,0)}function If(l){var u=iu(l);if(dt(u))return l}function uR(l,u){if(l==="change")return u}var Pw=!1;if(c){var xx;if(c){var yx="oninput"in document;if(!yx){var Rw=document.createElement("div");Rw.setAttribute("oninput","return;"),yx=typeof Rw.oninput=="function"}xx=yx}else xx=!1;Pw=xx&&(!document.documentMode||9<document.documentMode)}function jw(){Wd&&(Wd.detachEvent("onpropertychange",Dw),qd=Wd=null)}function Dw(l){if(l.propertyName==="value"&&If(qd)){var u=[];Iw(u,qd,l,Kt(l)),Zi(cR,u)}}function dR(l,u,f){l==="focusin"?(jw(),Wd=u,qd=f,Wd.attachEvent("onpropertychange",Dw)):l==="focusout"&&jw()}function hR(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return If(qd)}function fR(l,u){if(l==="click")return If(u)}function pR(l,u){if(l==="input"||l==="change")return If(u)}function mR(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var As=typeof Object.is=="function"?Object.is:mR;function Gd(l,u){if(As(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),y=Object.keys(u);if(f.length!==y.length)return!1;for(y=0;y<f.length;y++){var b=f[y];if(!d.call(u,b)||!As(l[b],u[b]))return!1}return!0}function Fw(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Ow(l,u){var f=Fw(l);l=0;for(var y;f;){if(f.nodeType===3){if(y=l+f.textContent.length,l<=u&&y>=u)return{node:f,offset:u-l};l=y}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Fw(f)}}function Lw(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?Lw(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function Mw(){for(var l=window,u=zt();u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=zt(l.document)}return u}function vx(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}function gR(l){var u=Mw(),f=l.focusedElem,y=l.selectionRange;if(u!==f&&f&&f.ownerDocument&&Lw(f.ownerDocument.documentElement,f)){if(y!==null&&vx(f)){if(u=y.start,l=y.end,l===void 0&&(l=u),"selectionStart"in f)f.selectionStart=u,f.selectionEnd=Math.min(l,f.value.length);else if(l=(u=f.ownerDocument||document)&&u.defaultView||window,l.getSelection){l=l.getSelection();var b=f.textContent.length,A=Math.min(y.start,b);y=y.end===void 0?A:Math.min(y.end,b),!l.extend&&A>y&&(b=y,y=A,A=b),b=Ow(f,A);var B=Ow(f,y);b&&B&&(l.rangeCount!==1||l.anchorNode!==b.node||l.anchorOffset!==b.offset||l.focusNode!==B.node||l.focusOffset!==B.offset)&&(u=u.createRange(),u.setStart(b.node,b.offset),l.removeAllRanges(),A>y?(l.addRange(u),l.extend(B.node,B.offset)):(u.setEnd(B.node,B.offset),l.addRange(u)))}}for(u=[],l=f;l=l.parentNode;)l.nodeType===1&&u.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<u.length;f++)l=u[f],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var xR=c&&"documentMode"in document&&11>=document.documentMode,eu=null,bx=null,Kd=null,wx=!1;function Vw(l,u,f){var y=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;wx||eu==null||eu!==zt(y)||(y=eu,"selectionStart"in y&&vx(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Kd&&Gd(Kd,y)||(Kd=y,y=Df(bx,"onSelect"),0<y.length&&(u=new qc("onSelect","select",null,u,f),l.push({event:u,listeners:y}),u.target=eu)))}function Pf(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var tu={animationend:Pf("Animation","AnimationEnd"),animationiteration:Pf("Animation","AnimationIteration"),animationstart:Pf("Animation","AnimationStart"),transitionend:Pf("Transition","TransitionEnd")},_x={},$w={};c&&($w=document.createElement("div").style,"AnimationEvent"in window||(delete tu.animationend.animation,delete tu.animationiteration.animation,delete tu.animationstart.animation),"TransitionEvent"in window||delete tu.transitionend.transition);function Rf(l){if(_x[l])return _x[l];if(!tu[l])return l;var u=tu[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in $w)return _x[l]=u[f];return l}var Bw=Rf("animationend"),Uw=Rf("animationiteration"),zw=Rf("animationstart"),Hw=Rf("transitionend"),Ww=new Map,qw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _o(l,u){Ww.set(l,u),s(u,[l])}for(var Ex=0;Ex<qw.length;Ex++){var Tx=qw[Ex],yR=Tx.toLowerCase(),vR=Tx[0].toUpperCase()+Tx.slice(1);_o(yR,"on"+vR)}_o(Bw,"onAnimationEnd"),_o(Uw,"onAnimationIteration"),_o(zw,"onAnimationStart"),_o("dblclick","onDoubleClick"),_o("focusin","onFocus"),_o("focusout","onBlur"),_o(Hw,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yd));function Gw(l,u,f){var y=l.type||"unknown-event";l.currentTarget=f,Z(y,u,void 0,l),l.currentTarget=null}function Kw(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var y=l[f],b=y.event;y=y.listeners;e:{var A=void 0;if(u)for(var B=y.length-1;0<=B;B--){var ne=y[B],le=ne.instance,ve=ne.currentTarget;if(ne=ne.listener,le!==A&&b.isPropagationStopped())break e;Gw(b,ne,ve),A=le}else for(B=0;B<y.length;B++){if(ne=y[B],le=ne.instance,ve=ne.currentTarget,ne=ne.listener,le!==A&&b.isPropagationStopped())break e;Gw(b,ne,ve),A=le}}}if(z)throw l=J,z=!1,J=null,l}function Cr(l,u){var f=u[Rx];f===void 0&&(f=u[Rx]=new Set);var y=l+"__bubble";f.has(y)||(Yw(u,l,2,!1),f.add(y))}function Ax(l,u,f){var y=0;u&&(y|=4),Yw(f,l,y,u)}var jf="_reactListening"+Math.random().toString(36).slice(2);function Xd(l){if(!l[jf]){l[jf]=!0,n.forEach(function(f){f!=="selectionchange"&&(bR.has(f)||Ax(f,!1,l),Ax(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[jf]||(u[jf]=!0,Ax("selectionchange",!1,u))}}function Yw(l,u,f,y){switch($d(u)){case 1:var b=jr;break;case 4:b=mx;break;default:b=Vd}f=b.bind(null,u,f,l),b=void 0,!es||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),y?b!==void 0?l.addEventListener(u,f,{capture:!0,passive:b}):l.addEventListener(u,f,!0):b!==void 0?l.addEventListener(u,f,{passive:b}):l.addEventListener(u,f,!1)}function Nx(l,u,f,y,b){var A=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var B=y.tag;if(B===3||B===4){var ne=y.stateNode.containerInfo;if(ne===b||ne.nodeType===8&&ne.parentNode===b)break;if(B===4)for(B=y.return;B!==null;){var le=B.tag;if((le===3||le===4)&&(le=B.stateNode.containerInfo,le===b||le.nodeType===8&&le.parentNode===b))return;B=B.return}for(;ne!==null;){if(B=Nl(ne),B===null)return;if(le=B.tag,le===5||le===6){y=A=B;continue e}ne=ne.parentNode}}y=y.return}Zi(function(){var ve=A,Ue=Kt(f),We=[];e:{var $e=Ww.get(l);if($e!==void 0){var ot=qc,gt=l;switch(l){case"keypress":if(Wc(f)===0)break e;case"keydown":case"keyup":ot=T;break;case"focusin":gt="focus",ot=Xc;break;case"focusout":gt="blur",ot=Xc;break;case"beforeblur":case"afterblur":ot=Xc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=Kc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=Ef;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=Te;break;case Bw:case Uw:case zw:ot=Ia;break;case Hw:ot=fr;break;case"scroll":ot=gx;break;case"wheel":ot=Zt;break;case"copy":case"cut":case"paste":ot=Nf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=G}var xt=(u&4)!==0,Jr=!xt&&l==="scroll",ge=xt?$e!==null?$e+"Capture":null:$e;xt=[];for(var de=ve,ye;de!==null;){ye=de;var Ye=ye.stateNode;if(ye.tag===5&&Ye!==null&&(ye=Ye,ge!==null&&(Ye=wr(de,ge),Ye!=null&&xt.push(Qd(de,Ye,ye)))),Jr)break;de=de.return}0<xt.length&&($e=new ot($e,gt,null,f,Ue),We.push({event:$e,listeners:xt}))}}if((u&7)===0){e:{if($e=l==="mouseover"||l==="pointerover",ot=l==="mouseout"||l==="pointerout",$e&&f!==Ht&&(gt=f.relatedTarget||f.fromElement)&&(Nl(gt)||gt[Pa]))break e;if((ot||$e)&&($e=Ue.window===Ue?Ue:($e=Ue.ownerDocument)?$e.defaultView||$e.parentWindow:window,ot?(gt=f.relatedTarget||f.toElement,ot=ve,gt=gt?Nl(gt):null,gt!==null&&(Jr=O(gt),gt!==Jr||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(ot=null,gt=ve),ot!==gt)){if(xt=Kc,Ye="onMouseLeave",ge="onMouseEnter",de="mouse",(l==="pointerout"||l==="pointerover")&&(xt=G,Ye="onPointerLeave",ge="onPointerEnter",de="pointer"),Jr=ot==null?$e:iu(ot),ye=gt==null?$e:iu(gt),$e=new xt(Ye,de+"leave",ot,f,Ue),$e.target=Jr,$e.relatedTarget=ye,Ye=null,Nl(Ue)===ve&&(xt=new xt(ge,de+"enter",gt,f,Ue),xt.target=ye,xt.relatedTarget=Jr,Ye=xt),Jr=Ye,ot&&gt)t:{for(xt=ot,ge=gt,de=0,ye=xt;ye;ye=ru(ye))de++;for(ye=0,Ye=ge;Ye;Ye=ru(Ye))ye++;for(;0<de-ye;)xt=ru(xt),de--;for(;0<ye-de;)ge=ru(ge),ye--;for(;de--;){if(xt===ge||ge!==null&&xt===ge.alternate)break t;xt=ru(xt),ge=ru(ge)}xt=null}else xt=null;ot!==null&&Xw(We,$e,ot,xt,!1),gt!==null&&Jr!==null&&Xw(We,Jr,gt,xt,!0)}}e:{if($e=ve?iu(ve):window,ot=$e.nodeName&&$e.nodeName.toLowerCase(),ot==="select"||ot==="input"&&$e.type==="file")var wt=uR;else if(Cw($e))if(Pw)wt=pR;else{wt=hR;var Nt=dR}else(ot=$e.nodeName)&&ot.toLowerCase()==="input"&&($e.type==="checkbox"||$e.type==="radio")&&(wt=fR);if(wt&&(wt=wt(l,ve))){Iw(We,wt,f,Ue);break e}Nt&&Nt(l,$e,ve),l==="focusout"&&(Nt=$e._wrapperState)&&Nt.controlled&&$e.type==="number"&&St($e,"number",$e.value)}switch(Nt=ve?iu(ve):window,l){case"focusin":(Cw(Nt)||Nt.contentEditable==="true")&&(eu=Nt,bx=ve,Kd=null);break;case"focusout":Kd=bx=eu=null;break;case"mousedown":wx=!0;break;case"contextmenu":case"mouseup":case"dragend":wx=!1,Vw(We,f,Ue);break;case"selectionchange":if(xR)break;case"keydown":case"keyup":Vw(We,f,Ue)}var kt;if(rn)e:{switch(l){case"compositionstart":var Dt="onCompositionStart";break e;case"compositionend":Dt="onCompositionEnd";break e;case"compositionupdate":Dt="onCompositionUpdate";break e}Dt=void 0}else Zc?kw(l,f)&&(Dt="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(Dt="onCompositionStart");Dt&&(Al&&f.locale!=="ko"&&(Zc||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&Zc&&(kt=Bd()):(Fi=Ue,Hc="value"in Fi?Fi.value:Fi.textContent,Zc=!0)),Nt=Df(ve,Dt),0<Nt.length&&(Dt=new Hd(Dt,l,null,f,Ue),We.push({event:Dt,listeners:Nt}),kt?Dt.data=kt:(kt=Sw(f),kt!==null&&(Dt.data=kt)))),(kt=Oi?aR(l,f):oR(l,f))&&(ve=Df(ve,"onBeforeInput"),0<ve.length&&(Ue=new Hd("onBeforeInput","beforeinput",null,f,Ue),We.push({event:Ue,listeners:ve}),Ue.data=kt))}Kw(We,u)})}function Qd(l,u,f){return{instance:l,listener:u,currentTarget:f}}function Df(l,u){for(var f=u+"Capture",y=[];l!==null;){var b=l,A=b.stateNode;b.tag===5&&A!==null&&(b=A,A=wr(l,f),A!=null&&y.unshift(Qd(l,A,b)),A=wr(l,u),A!=null&&y.push(Qd(l,A,b))),l=l.return}return y}function ru(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function Xw(l,u,f,y,b){for(var A=u._reactName,B=[];f!==null&&f!==y;){var ne=f,le=ne.alternate,ve=ne.stateNode;if(le!==null&&le===y)break;ne.tag===5&&ve!==null&&(ne=ve,b?(le=wr(f,A),le!=null&&B.unshift(Qd(f,le,ne))):b||(le=wr(f,A),le!=null&&B.push(Qd(f,le,ne)))),f=f.return}B.length!==0&&l.push({event:u,listeners:B})}var wR=/\r\n?/g,_R=/\u0000|\uFFFD/g;function Qw(l){return(typeof l=="string"?l:""+l).replace(wR,`
`).replace(_R,"")}function Ff(l,u,f){if(u=Qw(u),Qw(l)!==u&&f)throw Error(t(425))}function Of(){}var kx=null,Sx=null;function Cx(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Ix=typeof setTimeout=="function"?setTimeout:void 0,ER=typeof clearTimeout=="function"?clearTimeout:void 0,Jw=typeof Promise=="function"?Promise:void 0,TR=typeof queueMicrotask=="function"?queueMicrotask:typeof Jw<"u"?function(l){return Jw.resolve(null).then(l).catch(AR)}:Ix;function AR(l){setTimeout(function(){throw l})}function Px(l,u){var f=u,y=0;do{var b=f.nextSibling;if(l.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"){if(y===0){l.removeChild(b),Es(u);return}y--}else f!=="$"&&f!=="$?"&&f!=="$!"||y++;f=b}while(f);Es(u)}function Eo(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return l}function Zw(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"){if(u===0)return l;u--}else f==="/$"&&u++}l=l.previousSibling}return null}var nu=Math.random().toString(36).slice(2),ta="__reactFiber$"+nu,Jd="__reactProps$"+nu,Pa="__reactContainer$"+nu,Rx="__reactEvents$"+nu,NR="__reactListeners$"+nu,kR="__reactHandles$"+nu;function Nl(l){var u=l[ta];if(u)return u;for(var f=l.parentNode;f;){if(u=f[Pa]||f[ta]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=Zw(l);l!==null;){if(f=l[ta])return f;l=Zw(l)}return u}l=f,f=l.parentNode}return null}function Zd(l){return l=l[ta]||l[Pa],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function iu(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(t(33))}function Lf(l){return l[Jd]||null}var jx=[],su=-1;function To(l){return{current:l}}function Ir(l){0>su||(l.current=jx[su],jx[su]=null,su--)}function Sr(l,u){su++,jx[su]=l.current,l.current=u}var Ao={},Hn=To(Ao),mi=To(!1),kl=Ao;function au(l,u){var f=l.type.contextTypes;if(!f)return Ao;var y=l.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===u)return y.__reactInternalMemoizedMaskedChildContext;var b={},A;for(A in f)b[A]=u[A];return y&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=b),b}function gi(l){return l=l.childContextTypes,l!=null}function Mf(){Ir(mi),Ir(Hn)}function e_(l,u,f){if(Hn.current!==Ao)throw Error(t(168));Sr(Hn,u),Sr(mi,f)}function t_(l,u,f){var y=l.stateNode;if(u=u.childContextTypes,typeof y.getChildContext!="function")return f;y=y.getChildContext();for(var b in y)if(!(b in u))throw Error(t(108,be(l)||"Unknown",b));return Ne({},f,y)}function Vf(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Ao,kl=Hn.current,Sr(Hn,l),Sr(mi,mi.current),!0}function r_(l,u,f){var y=l.stateNode;if(!y)throw Error(t(169));f?(l=t_(l,u,kl),y.__reactInternalMemoizedMergedChildContext=l,Ir(mi),Ir(Hn),Sr(Hn,l)):Ir(mi),Sr(mi,f)}var Ra=null,$f=!1,Dx=!1;function n_(l){Ra===null?Ra=[l]:Ra.push(l)}function SR(l){$f=!0,n_(l)}function No(){if(!Dx&&Ra!==null){Dx=!0;var l=0,u=Jt;try{var f=Ra;for(Jt=1;l<f.length;l++){var y=f[l];do y=y(!0);while(y!==null)}Ra=null,$f=!1}catch(b){throw Ra!==null&&(Ra=Ra.slice(l+1)),je(Bt,No),b}finally{Jt=u,Dx=!1}}return null}var ou=[],lu=0,Bf=null,Uf=0,ns=[],is=0,Sl=null,ja=1,Da="";function Cl(l,u){ou[lu++]=Uf,ou[lu++]=Bf,Bf=l,Uf=u}function i_(l,u,f){ns[is++]=ja,ns[is++]=Da,ns[is++]=Sl,Sl=l;var y=ja;l=Da;var b=32-Tr(y)-1;y&=~(1<<b),f+=1;var A=32-Tr(u)+b;if(30<A){var B=b-b%5;A=(y&(1<<B)-1).toString(32),y>>=B,b-=B,ja=1<<32-Tr(u)+b|f<<b|y,Da=A+l}else ja=1<<A|f<<b|y,Da=l}function Fx(l){l.return!==null&&(Cl(l,1),i_(l,1,0))}function Ox(l){for(;l===Bf;)Bf=ou[--lu],ou[lu]=null,Uf=ou[--lu],ou[lu]=null;for(;l===Sl;)Sl=ns[--is],ns[is]=null,Da=ns[--is],ns[is]=null,ja=ns[--is],ns[is]=null}var Li=null,Mi=null,Dr=!1,Ns=null;function s_(l,u){var f=ls(5,null,null,0);f.elementType="DELETED",f.stateNode=u,f.return=l,u=l.deletions,u===null?(l.deletions=[f],l.flags|=16):u.push(f)}function a_(l,u){switch(l.tag){case 5:var f=l.type;return u=u.nodeType!==1||f.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(l.stateNode=u,Li=l,Mi=Eo(u.firstChild),!0):!1;case 6:return u=l.pendingProps===""||u.nodeType!==3?null:u,u!==null?(l.stateNode=u,Li=l,Mi=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(f=Sl!==null?{id:ja,overflow:Da}:null,l.memoizedState={dehydrated:u,treeContext:f,retryLane:1073741824},f=ls(18,null,null,0),f.stateNode=u,f.return=l,l.child=f,Li=l,Mi=null,!0):!1;default:return!1}}function Lx(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Mx(l){if(Dr){var u=Mi;if(u){var f=u;if(!a_(l,u)){if(Lx(l))throw Error(t(418));u=Eo(f.nextSibling);var y=Li;u&&a_(l,u)?s_(y,f):(l.flags=l.flags&-4097|2,Dr=!1,Li=l)}}else{if(Lx(l))throw Error(t(418));l.flags=l.flags&-4097|2,Dr=!1,Li=l}}}function o_(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Li=l}function zf(l){if(l!==Li)return!1;if(!Dr)return o_(l),Dr=!0,!1;var u;if((u=l.tag!==3)&&!(u=l.tag!==5)&&(u=l.type,u=u!=="head"&&u!=="body"&&!Cx(l.type,l.memoizedProps)),u&&(u=Mi)){if(Lx(l))throw l_(),Error(t(418));for(;u;)s_(l,u),u=Eo(u.nextSibling)}if(o_(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(t(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"){if(u===0){Mi=Eo(l.nextSibling);break e}u--}else f!=="$"&&f!=="$!"&&f!=="$?"||u++}l=l.nextSibling}Mi=null}}else Mi=Li?Eo(l.stateNode.nextSibling):null;return!0}function l_(){for(var l=Mi;l;)l=Eo(l.nextSibling)}function cu(){Mi=Li=null,Dr=!1}function Vx(l){Ns===null?Ns=[l]:Ns.push(l)}var CR=L.ReactCurrentBatchConfig;function e0(l,u,f){if(l=f.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var y=f.stateNode}if(!y)throw Error(t(147,l));var b=y,A=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===A?u.ref:(u=function(B){var ne=b.refs;B===null?delete ne[A]:ne[A]=B},u._stringRef=A,u)}if(typeof l!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,l))}return l}function Hf(l,u){throw l=Object.prototype.toString.call(u),Error(t(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function c_(l){var u=l._init;return u(l._payload)}function u_(l){function u(ge,de){if(l){var ye=ge.deletions;ye===null?(ge.deletions=[de],ge.flags|=16):ye.push(de)}}function f(ge,de){if(!l)return null;for(;de!==null;)u(ge,de),de=de.sibling;return null}function y(ge,de){for(ge=new Map;de!==null;)de.key!==null?ge.set(de.key,de):ge.set(de.index,de),de=de.sibling;return ge}function b(ge,de){return ge=Do(ge,de),ge.index=0,ge.sibling=null,ge}function A(ge,de,ye){return ge.index=ye,l?(ye=ge.alternate,ye!==null?(ye=ye.index,ye<de?(ge.flags|=2,de):ye):(ge.flags|=2,de)):(ge.flags|=1048576,de)}function B(ge){return l&&ge.alternate===null&&(ge.flags|=2),ge}function ne(ge,de,ye,Ye){return de===null||de.tag!==6?(de=Iy(ye,ge.mode,Ye),de.return=ge,de):(de=b(de,ye),de.return=ge,de)}function le(ge,de,ye,Ye){var wt=ye.type;return wt===S?Ue(ge,de,ye.props.children,Ye,ye.key):de!==null&&(de.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===Oe&&c_(wt)===de.type)?(Ye=b(de,ye.props),Ye.ref=e0(ge,de,ye),Ye.return=ge,Ye):(Ye=pp(ye.type,ye.key,ye.props,null,ge.mode,Ye),Ye.ref=e0(ge,de,ye),Ye.return=ge,Ye)}function ve(ge,de,ye,Ye){return de===null||de.tag!==4||de.stateNode.containerInfo!==ye.containerInfo||de.stateNode.implementation!==ye.implementation?(de=Py(ye,ge.mode,Ye),de.return=ge,de):(de=b(de,ye.children||[]),de.return=ge,de)}function Ue(ge,de,ye,Ye,wt){return de===null||de.tag!==7?(de=Ll(ye,ge.mode,Ye,wt),de.return=ge,de):(de=b(de,ye),de.return=ge,de)}function We(ge,de,ye){if(typeof de=="string"&&de!==""||typeof de=="number")return de=Iy(""+de,ge.mode,ye),de.return=ge,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case K:return ye=pp(de.type,de.key,de.props,null,ge.mode,ye),ye.ref=e0(ge,null,de),ye.return=ge,ye;case H:return de=Py(de,ge.mode,ye),de.return=ge,de;case Oe:var Ye=de._init;return We(ge,Ye(de._payload),ye)}if(Be(de)||_e(de))return de=Ll(de,ge.mode,ye,null),de.return=ge,de;Hf(ge,de)}return null}function $e(ge,de,ye,Ye){var wt=de!==null?de.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return wt!==null?null:ne(ge,de,""+ye,Ye);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case K:return ye.key===wt?le(ge,de,ye,Ye):null;case H:return ye.key===wt?ve(ge,de,ye,Ye):null;case Oe:return wt=ye._init,$e(ge,de,wt(ye._payload),Ye)}if(Be(ye)||_e(ye))return wt!==null?null:Ue(ge,de,ye,Ye,null);Hf(ge,ye)}return null}function ot(ge,de,ye,Ye,wt){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return ge=ge.get(ye)||null,ne(de,ge,""+Ye,wt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case K:return ge=ge.get(Ye.key===null?ye:Ye.key)||null,le(de,ge,Ye,wt);case H:return ge=ge.get(Ye.key===null?ye:Ye.key)||null,ve(de,ge,Ye,wt);case Oe:var Nt=Ye._init;return ot(ge,de,ye,Nt(Ye._payload),wt)}if(Be(Ye)||_e(Ye))return ge=ge.get(ye)||null,Ue(de,ge,Ye,wt,null);Hf(de,Ye)}return null}function gt(ge,de,ye,Ye){for(var wt=null,Nt=null,kt=de,Dt=de=0,_n=null;kt!==null&&Dt<ye.length;Dt++){kt.index>Dt?(_n=kt,kt=null):_n=kt.sibling;var ir=$e(ge,kt,ye[Dt],Ye);if(ir===null){kt===null&&(kt=_n);break}l&&kt&&ir.alternate===null&&u(ge,kt),de=A(ir,de,Dt),Nt===null?wt=ir:Nt.sibling=ir,Nt=ir,kt=_n}if(Dt===ye.length)return f(ge,kt),Dr&&Cl(ge,Dt),wt;if(kt===null){for(;Dt<ye.length;Dt++)kt=We(ge,ye[Dt],Ye),kt!==null&&(de=A(kt,de,Dt),Nt===null?wt=kt:Nt.sibling=kt,Nt=kt);return Dr&&Cl(ge,Dt),wt}for(kt=y(ge,kt);Dt<ye.length;Dt++)_n=ot(kt,ge,Dt,ye[Dt],Ye),_n!==null&&(l&&_n.alternate!==null&&kt.delete(_n.key===null?Dt:_n.key),de=A(_n,de,Dt),Nt===null?wt=_n:Nt.sibling=_n,Nt=_n);return l&&kt.forEach(function(Fo){return u(ge,Fo)}),Dr&&Cl(ge,Dt),wt}function xt(ge,de,ye,Ye){var wt=_e(ye);if(typeof wt!="function")throw Error(t(150));if(ye=wt.call(ye),ye==null)throw Error(t(151));for(var Nt=wt=null,kt=de,Dt=de=0,_n=null,ir=ye.next();kt!==null&&!ir.done;Dt++,ir=ye.next()){kt.index>Dt?(_n=kt,kt=null):_n=kt.sibling;var Fo=$e(ge,kt,ir.value,Ye);if(Fo===null){kt===null&&(kt=_n);break}l&&kt&&Fo.alternate===null&&u(ge,kt),de=A(Fo,de,Dt),Nt===null?wt=Fo:Nt.sibling=Fo,Nt=Fo,kt=_n}if(ir.done)return f(ge,kt),Dr&&Cl(ge,Dt),wt;if(kt===null){for(;!ir.done;Dt++,ir=ye.next())ir=We(ge,ir.value,Ye),ir!==null&&(de=A(ir,de,Dt),Nt===null?wt=ir:Nt.sibling=ir,Nt=ir);return Dr&&Cl(ge,Dt),wt}for(kt=y(ge,kt);!ir.done;Dt++,ir=ye.next())ir=ot(kt,ge,Dt,ir.value,Ye),ir!==null&&(l&&ir.alternate!==null&&kt.delete(ir.key===null?Dt:ir.key),de=A(ir,de,Dt),Nt===null?wt=ir:Nt.sibling=ir,Nt=ir);return l&&kt.forEach(function(lj){return u(ge,lj)}),Dr&&Cl(ge,Dt),wt}function Jr(ge,de,ye,Ye){if(typeof ye=="object"&&ye!==null&&ye.type===S&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case K:e:{for(var wt=ye.key,Nt=de;Nt!==null;){if(Nt.key===wt){if(wt=ye.type,wt===S){if(Nt.tag===7){f(ge,Nt.sibling),de=b(Nt,ye.props.children),de.return=ge,ge=de;break e}}else if(Nt.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===Oe&&c_(wt)===Nt.type){f(ge,Nt.sibling),de=b(Nt,ye.props),de.ref=e0(ge,Nt,ye),de.return=ge,ge=de;break e}f(ge,Nt);break}else u(ge,Nt);Nt=Nt.sibling}ye.type===S?(de=Ll(ye.props.children,ge.mode,Ye,ye.key),de.return=ge,ge=de):(Ye=pp(ye.type,ye.key,ye.props,null,ge.mode,Ye),Ye.ref=e0(ge,de,ye),Ye.return=ge,ge=Ye)}return B(ge);case H:e:{for(Nt=ye.key;de!==null;){if(de.key===Nt)if(de.tag===4&&de.stateNode.containerInfo===ye.containerInfo&&de.stateNode.implementation===ye.implementation){f(ge,de.sibling),de=b(de,ye.children||[]),de.return=ge,ge=de;break e}else{f(ge,de);break}else u(ge,de);de=de.sibling}de=Py(ye,ge.mode,Ye),de.return=ge,ge=de}return B(ge);case Oe:return Nt=ye._init,Jr(ge,de,Nt(ye._payload),Ye)}if(Be(ye))return gt(ge,de,ye,Ye);if(_e(ye))return xt(ge,de,ye,Ye);Hf(ge,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,de!==null&&de.tag===6?(f(ge,de.sibling),de=b(de,ye),de.return=ge,ge=de):(f(ge,de),de=Iy(ye,ge.mode,Ye),de.return=ge,ge=de),B(ge)):f(ge,de)}return Jr}var uu=u_(!0),d_=u_(!1),Wf=To(null),qf=null,du=null,$x=null;function Bx(){$x=du=qf=null}function Ux(l){var u=Wf.current;Ir(Wf),l._currentValue=u}function zx(l,u,f){for(;l!==null;){var y=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),l===f)break;l=l.return}}function hu(l,u){qf=l,$x=du=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&u)!==0&&(xi=!0),l.firstContext=null)}function ss(l){var u=l._currentValue;if($x!==l)if(l={context:l,memoizedValue:u,next:null},du===null){if(qf===null)throw Error(t(308));du=l,qf.dependencies={lanes:0,firstContext:l}}else du=du.next=l;return u}var Il=null;function Hx(l){Il===null?Il=[l]:Il.push(l)}function h_(l,u,f,y){var b=u.interleaved;return b===null?(f.next=f,Hx(u)):(f.next=b.next,b.next=f),u.interleaved=f,Fa(l,y)}function Fa(l,u){l.lanes|=u;var f=l.alternate;for(f!==null&&(f.lanes|=u),f=l,l=l.return;l!==null;)l.childLanes|=u,f=l.alternate,f!==null&&(f.childLanes|=u),f=l,l=l.return;return f.tag===3?f.stateNode:null}var ko=!1;function Wx(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function f_(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Oa(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function So(l,u,f){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(rr&2)!==0){var b=y.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),y.pending=u,Fa(l,f)}return b=y.interleaved,b===null?(u.next=u,Hx(y)):(u.next=b.next,b.next=u),y.interleaved=u,Fa(l,f)}function Gf(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194240)!==0)){var y=u.lanes;y&=l.pendingLanes,f|=y,u.lanes=f,xo(l,f)}}function p_(l,u){var f=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,f===y)){var b=null,A=null;if(f=f.firstBaseUpdate,f!==null){do{var B={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};A===null?b=A=B:A=A.next=B,f=f.next}while(f!==null);A===null?b=A=u:A=A.next=u}else b=A=u;f={baseState:y.baseState,firstBaseUpdate:b,lastBaseUpdate:A,shared:y.shared,effects:y.effects},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}function Kf(l,u,f,y){var b=l.updateQueue;ko=!1;var A=b.firstBaseUpdate,B=b.lastBaseUpdate,ne=b.shared.pending;if(ne!==null){b.shared.pending=null;var le=ne,ve=le.next;le.next=null,B===null?A=ve:B.next=ve,B=le;var Ue=l.alternate;Ue!==null&&(Ue=Ue.updateQueue,ne=Ue.lastBaseUpdate,ne!==B&&(ne===null?Ue.firstBaseUpdate=ve:ne.next=ve,Ue.lastBaseUpdate=le))}if(A!==null){var We=b.baseState;B=0,Ue=ve=le=null,ne=A;do{var $e=ne.lane,ot=ne.eventTime;if((y&$e)===$e){Ue!==null&&(Ue=Ue.next={eventTime:ot,lane:0,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null});e:{var gt=l,xt=ne;switch($e=u,ot=f,xt.tag){case 1:if(gt=xt.payload,typeof gt=="function"){We=gt.call(ot,We,$e);break e}We=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=xt.payload,$e=typeof gt=="function"?gt.call(ot,We,$e):gt,$e==null)break e;We=Ne({},We,$e);break e;case 2:ko=!0}}ne.callback!==null&&ne.lane!==0&&(l.flags|=64,$e=b.effects,$e===null?b.effects=[ne]:$e.push(ne))}else ot={eventTime:ot,lane:$e,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},Ue===null?(ve=Ue=ot,le=We):Ue=Ue.next=ot,B|=$e;if(ne=ne.next,ne===null){if(ne=b.shared.pending,ne===null)break;$e=ne,ne=$e.next,$e.next=null,b.lastBaseUpdate=$e,b.shared.pending=null}}while(!0);if(Ue===null&&(le=We),b.baseState=le,b.firstBaseUpdate=ve,b.lastBaseUpdate=Ue,u=b.shared.interleaved,u!==null){b=u;do B|=b.lane,b=b.next;while(b!==u)}else A===null&&(b.shared.lanes=0);jl|=B,l.lanes=B,l.memoizedState=We}}function m_(l,u,f){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var y=l[u],b=y.callback;if(b!==null){if(y.callback=null,y=f,typeof b!="function")throw Error(t(191,b));b.call(y)}}}var t0={},ra=To(t0),r0=To(t0),n0=To(t0);function Pl(l){if(l===t0)throw Error(t(174));return l}function qx(l,u){switch(Sr(n0,u),Sr(r0,l),Sr(ra,t0),l=u.nodeType,l){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:Ct(null,"");break;default:l=l===8?u.parentNode:u,u=l.namespaceURI||null,l=l.tagName,u=Ct(u,l)}Ir(ra),Sr(ra,u)}function fu(){Ir(ra),Ir(r0),Ir(n0)}function g_(l){Pl(n0.current);var u=Pl(ra.current),f=Ct(u,l.type);u!==f&&(Sr(r0,l),Sr(ra,f))}function Gx(l){r0.current===l&&(Ir(ra),Ir(r0))}var $r=To(0);function Yf(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Kx=[];function Yx(){for(var l=0;l<Kx.length;l++)Kx[l]._workInProgressVersionPrimary=null;Kx.length=0}var Xf=L.ReactCurrentDispatcher,Xx=L.ReactCurrentBatchConfig,Rl=0,Br=null,dn=null,bn=null,Qf=!1,i0=!1,s0=0,IR=0;function Wn(){throw Error(t(321))}function Qx(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!As(l[f],u[f]))return!1;return!0}function Jx(l,u,f,y,b,A){if(Rl=A,Br=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Xf.current=l===null||l.memoizedState===null?DR:FR,l=f(y,b),i0){A=0;do{if(i0=!1,s0=0,25<=A)throw Error(t(301));A+=1,bn=dn=null,u.updateQueue=null,Xf.current=OR,l=f(y,b)}while(i0)}if(Xf.current=ep,u=dn!==null&&dn.next!==null,Rl=0,bn=dn=Br=null,Qf=!1,u)throw Error(t(300));return l}function Zx(){var l=s0!==0;return s0=0,l}function na(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?Br.memoizedState=bn=l:bn=bn.next=l,bn}function as(){if(dn===null){var l=Br.alternate;l=l!==null?l.memoizedState:null}else l=dn.next;var u=bn===null?Br.memoizedState:bn.next;if(u!==null)bn=u,dn=l;else{if(l===null)throw Error(t(310));dn=l,l={memoizedState:dn.memoizedState,baseState:dn.baseState,baseQueue:dn.baseQueue,queue:dn.queue,next:null},bn===null?Br.memoizedState=bn=l:bn=bn.next=l}return bn}function a0(l,u){return typeof u=="function"?u(l):u}function ey(l){var u=as(),f=u.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=l;var y=dn,b=y.baseQueue,A=f.pending;if(A!==null){if(b!==null){var B=b.next;b.next=A.next,A.next=B}y.baseQueue=b=A,f.pending=null}if(b!==null){A=b.next,y=y.baseState;var ne=B=null,le=null,ve=A;do{var Ue=ve.lane;if((Rl&Ue)===Ue)le!==null&&(le=le.next={lane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),y=ve.hasEagerState?ve.eagerState:l(y,ve.action);else{var We={lane:Ue,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null};le===null?(ne=le=We,B=y):le=le.next=We,Br.lanes|=Ue,jl|=Ue}ve=ve.next}while(ve!==null&&ve!==A);le===null?B=y:le.next=ne,As(y,u.memoizedState)||(xi=!0),u.memoizedState=y,u.baseState=B,u.baseQueue=le,f.lastRenderedState=y}if(l=f.interleaved,l!==null){b=l;do A=b.lane,Br.lanes|=A,jl|=A,b=b.next;while(b!==l)}else b===null&&(f.lanes=0);return[u.memoizedState,f.dispatch]}function ty(l){var u=as(),f=u.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=l;var y=f.dispatch,b=f.pending,A=u.memoizedState;if(b!==null){f.pending=null;var B=b=b.next;do A=l(A,B.action),B=B.next;while(B!==b);As(A,u.memoizedState)||(xi=!0),u.memoizedState=A,u.baseQueue===null&&(u.baseState=A),f.lastRenderedState=A}return[A,y]}function x_(){}function y_(l,u){var f=Br,y=as(),b=u(),A=!As(y.memoizedState,b);if(A&&(y.memoizedState=b,xi=!0),y=y.queue,ry(w_.bind(null,f,y,l),[l]),y.getSnapshot!==u||A||bn!==null&&bn.memoizedState.tag&1){if(f.flags|=2048,o0(9,b_.bind(null,f,y,b,u),void 0,null),wn===null)throw Error(t(349));(Rl&30)!==0||v_(f,u,b)}return b}function v_(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=Br.updateQueue,u===null?(u={lastEffect:null,stores:null},Br.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function b_(l,u,f,y){u.value=f,u.getSnapshot=y,__(u)&&E_(l)}function w_(l,u,f){return f(function(){__(u)&&E_(l)})}function __(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!As(l,f)}catch{return!0}}function E_(l){var u=Fa(l,1);u!==null&&Is(u,l,1,-1)}function T_(l){var u=na();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a0,lastRenderedState:l},u.queue=l,l=l.dispatch=jR.bind(null,Br,l),[u.memoizedState,l]}function o0(l,u,f,y){return l={tag:l,create:u,destroy:f,deps:y,next:null},u=Br.updateQueue,u===null?(u={lastEffect:null,stores:null},Br.updateQueue=u,u.lastEffect=l.next=l):(f=u.lastEffect,f===null?u.lastEffect=l.next=l:(y=f.next,f.next=l,l.next=y,u.lastEffect=l)),l}function A_(){return as().memoizedState}function Jf(l,u,f,y){var b=na();Br.flags|=l,b.memoizedState=o0(1|u,f,void 0,y===void 0?null:y)}function Zf(l,u,f,y){var b=as();y=y===void 0?null:y;var A=void 0;if(dn!==null){var B=dn.memoizedState;if(A=B.destroy,y!==null&&Qx(y,B.deps)){b.memoizedState=o0(u,f,A,y);return}}Br.flags|=l,b.memoizedState=o0(1|u,f,A,y)}function N_(l,u){return Jf(8390656,8,l,u)}function ry(l,u){return Zf(2048,8,l,u)}function k_(l,u){return Zf(4,2,l,u)}function S_(l,u){return Zf(4,4,l,u)}function C_(l,u){if(typeof u=="function")return l=l(),u(l),function(){u(null)};if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function I_(l,u,f){return f=f!=null?f.concat([l]):null,Zf(4,4,C_.bind(null,u,l),f)}function ny(){}function P_(l,u){var f=as();u=u===void 0?null:u;var y=f.memoizedState;return y!==null&&u!==null&&Qx(u,y[1])?y[0]:(f.memoizedState=[l,u],l)}function R_(l,u){var f=as();u=u===void 0?null:u;var y=f.memoizedState;return y!==null&&u!==null&&Qx(u,y[1])?y[0]:(l=l(),f.memoizedState=[l,u],l)}function j_(l,u,f){return(Rl&21)===0?(l.baseState&&(l.baseState=!1,xi=!0),l.memoizedState=f):(As(f,u)||(f=wl(),Br.lanes|=f,jl|=f,l.baseState=!0),u)}function PR(l,u){var f=Jt;Jt=f!==0&&4>f?f:4,l(!0);var y=Xx.transition;Xx.transition={};try{l(!1),u()}finally{Jt=f,Xx.transition=y}}function D_(){return as().memoizedState}function RR(l,u,f){var y=Ro(l);if(f={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null},F_(l))O_(u,f);else if(f=h_(l,u,f,y),f!==null){var b=si();Is(f,l,y,b),L_(f,u,y)}}function jR(l,u,f){var y=Ro(l),b={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null};if(F_(l))O_(u,b);else{var A=l.alternate;if(l.lanes===0&&(A===null||A.lanes===0)&&(A=u.lastRenderedReducer,A!==null))try{var B=u.lastRenderedState,ne=A(B,f);if(b.hasEagerState=!0,b.eagerState=ne,As(ne,B)){var le=u.interleaved;le===null?(b.next=b,Hx(u)):(b.next=le.next,le.next=b),u.interleaved=b;return}}catch{}finally{}f=h_(l,u,b,y),f!==null&&(b=si(),Is(f,l,y,b),L_(f,u,y))}}function F_(l){var u=l.alternate;return l===Br||u!==null&&u===Br}function O_(l,u){i0=Qf=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function L_(l,u,f){if((f&4194240)!==0){var y=u.lanes;y&=l.pendingLanes,f|=y,u.lanes=f,xo(l,f)}}var ep={readContext:ss,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useInsertionEffect:Wn,useLayoutEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useMutableSource:Wn,useSyncExternalStore:Wn,useId:Wn,unstable_isNewReconciler:!1},DR={readContext:ss,useCallback:function(l,u){return na().memoizedState=[l,u===void 0?null:u],l},useContext:ss,useEffect:N_,useImperativeHandle:function(l,u,f){return f=f!=null?f.concat([l]):null,Jf(4194308,4,C_.bind(null,u,l),f)},useLayoutEffect:function(l,u){return Jf(4194308,4,l,u)},useInsertionEffect:function(l,u){return Jf(4,2,l,u)},useMemo:function(l,u){var f=na();return u=u===void 0?null:u,l=l(),f.memoizedState=[l,u],l},useReducer:function(l,u,f){var y=na();return u=f!==void 0?f(u):u,y.memoizedState=y.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},y.queue=l,l=l.dispatch=RR.bind(null,Br,l),[y.memoizedState,l]},useRef:function(l){var u=na();return l={current:l},u.memoizedState=l},useState:T_,useDebugValue:ny,useDeferredValue:function(l){return na().memoizedState=l},useTransition:function(){var l=T_(!1),u=l[0];return l=PR.bind(null,l[1]),na().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,f){var y=Br,b=na();if(Dr){if(f===void 0)throw Error(t(407));f=f()}else{if(f=u(),wn===null)throw Error(t(349));(Rl&30)!==0||v_(y,u,f)}b.memoizedState=f;var A={value:f,getSnapshot:u};return b.queue=A,N_(w_.bind(null,y,A,l),[l]),y.flags|=2048,o0(9,b_.bind(null,y,A,f,u),void 0,null),f},useId:function(){var l=na(),u=wn.identifierPrefix;if(Dr){var f=Da,y=ja;f=(y&~(1<<32-Tr(y)-1)).toString(32)+f,u=":"+u+"R"+f,f=s0++,0<f&&(u+="H"+f.toString(32)),u+=":"}else f=IR++,u=":"+u+"r"+f.toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},FR={readContext:ss,useCallback:P_,useContext:ss,useEffect:ry,useImperativeHandle:I_,useInsertionEffect:k_,useLayoutEffect:S_,useMemo:R_,useReducer:ey,useRef:A_,useState:function(){return ey(a0)},useDebugValue:ny,useDeferredValue:function(l){var u=as();return j_(u,dn.memoizedState,l)},useTransition:function(){var l=ey(a0)[0],u=as().memoizedState;return[l,u]},useMutableSource:x_,useSyncExternalStore:y_,useId:D_,unstable_isNewReconciler:!1},OR={readContext:ss,useCallback:P_,useContext:ss,useEffect:ry,useImperativeHandle:I_,useInsertionEffect:k_,useLayoutEffect:S_,useMemo:R_,useReducer:ty,useRef:A_,useState:function(){return ty(a0)},useDebugValue:ny,useDeferredValue:function(l){var u=as();return dn===null?u.memoizedState=l:j_(u,dn.memoizedState,l)},useTransition:function(){var l=ty(a0)[0],u=as().memoizedState;return[l,u]},useMutableSource:x_,useSyncExternalStore:y_,useId:D_,unstable_isNewReconciler:!1};function ks(l,u){if(l&&l.defaultProps){u=Ne({},u),l=l.defaultProps;for(var f in l)u[f]===void 0&&(u[f]=l[f]);return u}return u}function iy(l,u,f,y){u=l.memoizedState,f=f(y,u),f=f==null?u:Ne({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var tp={isMounted:function(l){return(l=l._reactInternals)?O(l)===l:!1},enqueueSetState:function(l,u,f){l=l._reactInternals;var y=si(),b=Ro(l),A=Oa(y,b);A.payload=u,f!=null&&(A.callback=f),u=So(l,A,b),u!==null&&(Is(u,l,b,y),Gf(u,l,b))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var y=si(),b=Ro(l),A=Oa(y,b);A.tag=1,A.payload=u,f!=null&&(A.callback=f),u=So(l,A,b),u!==null&&(Is(u,l,b,y),Gf(u,l,b))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=si(),y=Ro(l),b=Oa(f,y);b.tag=2,u!=null&&(b.callback=u),u=So(l,b,y),u!==null&&(Is(u,l,y,f),Gf(u,l,y))}};function M_(l,u,f,y,b,A,B){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,A,B):u.prototype&&u.prototype.isPureReactComponent?!Gd(f,y)||!Gd(b,A):!0}function V_(l,u,f){var y=!1,b=Ao,A=u.contextType;return typeof A=="object"&&A!==null?A=ss(A):(b=gi(u)?kl:Hn.current,y=u.contextTypes,A=(y=y!=null)?au(l,b):Ao),u=new u(f,A),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=tp,l.stateNode=u,u._reactInternals=l,y&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=b,l.__reactInternalMemoizedMaskedChildContext=A),u}function $_(l,u,f,y){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,y),u.state!==l&&tp.enqueueReplaceState(u,u.state,null)}function sy(l,u,f,y){var b=l.stateNode;b.props=f,b.state=l.memoizedState,b.refs={},Wx(l);var A=u.contextType;typeof A=="object"&&A!==null?b.context=ss(A):(A=gi(u)?kl:Hn.current,b.context=au(l,A)),b.state=l.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(iy(l,u,A,f),b.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(u=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),u!==b.state&&tp.enqueueReplaceState(b,b.state,null),Kf(l,f,b,y),b.state=l.memoizedState),typeof b.componentDidMount=="function"&&(l.flags|=4194308)}function pu(l,u){try{var f="",y=u;do f+=ie(y),y=y.return;while(y);var b=f}catch(A){b=`
Error generating stack: `+A.message+`
`+A.stack}return{value:l,source:u,stack:b,digest:null}}function ay(l,u,f){return{value:l,source:null,stack:f??null,digest:u??null}}function oy(l,u){try{console.error(u.value)}catch(f){setTimeout(function(){throw f})}}var LR=typeof WeakMap=="function"?WeakMap:Map;function B_(l,u,f){f=Oa(-1,f),f.tag=3,f.payload={element:null};var y=u.value;return f.callback=function(){lp||(lp=!0,_y=y),oy(l,u)},f}function U_(l,u,f){f=Oa(-1,f),f.tag=3;var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var b=u.value;f.payload=function(){return y(b)},f.callback=function(){oy(l,u)}}var A=l.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(f.callback=function(){oy(l,u),typeof y!="function"&&(Io===null?Io=new Set([this]):Io.add(this));var B=u.stack;this.componentDidCatch(u.value,{componentStack:B!==null?B:""})}),f}function z_(l,u,f){var y=l.pingCache;if(y===null){y=l.pingCache=new LR;var b=new Set;y.set(u,b)}else b=y.get(u),b===void 0&&(b=new Set,y.set(u,b));b.has(f)||(b.add(f),l=QR.bind(null,l,u,f),u.then(l,l))}function H_(l){do{var u;if((u=l.tag===13)&&(u=l.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return l;l=l.return}while(l!==null);return null}function W_(l,u,f,y,b){return(l.mode&1)===0?(l===u?l.flags|=65536:(l.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(u=Oa(-1,1),u.tag=2,So(f,u,1))),f.lanes|=1),l):(l.flags|=65536,l.lanes=b,l)}var MR=L.ReactCurrentOwner,xi=!1;function ii(l,u,f,y){u.child=l===null?d_(u,null,f,y):uu(u,l.child,f,y)}function q_(l,u,f,y,b){f=f.render;var A=u.ref;return hu(u,b),y=Jx(l,u,f,y,A,b),f=Zx(),l!==null&&!xi?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~b,La(l,u,b)):(Dr&&f&&Fx(u),u.flags|=1,ii(l,u,y,b),u.child)}function G_(l,u,f,y,b){if(l===null){var A=f.type;return typeof A=="function"&&!Cy(A)&&A.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(u.tag=15,u.type=A,K_(l,u,A,y,b)):(l=pp(f.type,null,y,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(A=l.child,(l.lanes&b)===0){var B=A.memoizedProps;if(f=f.compare,f=f!==null?f:Gd,f(B,y)&&l.ref===u.ref)return La(l,u,b)}return u.flags|=1,l=Do(A,y),l.ref=u.ref,l.return=u,u.child=l}function K_(l,u,f,y,b){if(l!==null){var A=l.memoizedProps;if(Gd(A,y)&&l.ref===u.ref)if(xi=!1,u.pendingProps=y=A,(l.lanes&b)!==0)(l.flags&131072)!==0&&(xi=!0);else return u.lanes=l.lanes,La(l,u,b)}return ly(l,u,f,y,b)}function Y_(l,u,f){var y=u.pendingProps,b=y.children,A=l!==null?l.memoizedState:null;if(y.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sr(gu,Vi),Vi|=f;else{if((f&1073741824)===0)return l=A!==null?A.baseLanes|f:f,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,Sr(gu,Vi),Vi|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=A!==null?A.baseLanes:f,Sr(gu,Vi),Vi|=y}else A!==null?(y=A.baseLanes|f,u.memoizedState=null):y=f,Sr(gu,Vi),Vi|=y;return ii(l,u,b,f),u.child}function X_(l,u){var f=u.ref;(l===null&&f!==null||l!==null&&l.ref!==f)&&(u.flags|=512,u.flags|=2097152)}function ly(l,u,f,y,b){var A=gi(f)?kl:Hn.current;return A=au(u,A),hu(u,b),f=Jx(l,u,f,y,A,b),y=Zx(),l!==null&&!xi?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~b,La(l,u,b)):(Dr&&y&&Fx(u),u.flags|=1,ii(l,u,f,b),u.child)}function Q_(l,u,f,y,b){if(gi(f)){var A=!0;Vf(u)}else A=!1;if(hu(u,b),u.stateNode===null)np(l,u),V_(u,f,y),sy(u,f,y,b),y=!0;else if(l===null){var B=u.stateNode,ne=u.memoizedProps;B.props=ne;var le=B.context,ve=f.contextType;typeof ve=="object"&&ve!==null?ve=ss(ve):(ve=gi(f)?kl:Hn.current,ve=au(u,ve));var Ue=f.getDerivedStateFromProps,We=typeof Ue=="function"||typeof B.getSnapshotBeforeUpdate=="function";We||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(ne!==y||le!==ve)&&$_(u,B,y,ve),ko=!1;var $e=u.memoizedState;B.state=$e,Kf(u,y,B,b),le=u.memoizedState,ne!==y||$e!==le||mi.current||ko?(typeof Ue=="function"&&(iy(u,f,Ue,y),le=u.memoizedState),(ne=ko||M_(u,f,ne,y,$e,le,ve))?(We||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(u.flags|=4194308)):(typeof B.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=le),B.props=y,B.state=le,B.context=ve,y=ne):(typeof B.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{B=u.stateNode,f_(l,u),ne=u.memoizedProps,ve=u.type===u.elementType?ne:ks(u.type,ne),B.props=ve,We=u.pendingProps,$e=B.context,le=f.contextType,typeof le=="object"&&le!==null?le=ss(le):(le=gi(f)?kl:Hn.current,le=au(u,le));var ot=f.getDerivedStateFromProps;(Ue=typeof ot=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(ne!==We||$e!==le)&&$_(u,B,y,le),ko=!1,$e=u.memoizedState,B.state=$e,Kf(u,y,B,b);var gt=u.memoizedState;ne!==We||$e!==gt||mi.current||ko?(typeof ot=="function"&&(iy(u,f,ot,y),gt=u.memoizedState),(ve=ko||M_(u,f,ve,y,$e,gt,le)||!1)?(Ue||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(y,gt,le),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(y,gt,le)),typeof B.componentDidUpdate=="function"&&(u.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof B.componentDidUpdate!="function"||ne===l.memoizedProps&&$e===l.memoizedState||(u.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||ne===l.memoizedProps&&$e===l.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=gt),B.props=y,B.state=gt,B.context=le,y=ve):(typeof B.componentDidUpdate!="function"||ne===l.memoizedProps&&$e===l.memoizedState||(u.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||ne===l.memoizedProps&&$e===l.memoizedState||(u.flags|=1024),y=!1)}return cy(l,u,f,y,A,b)}function cy(l,u,f,y,b,A){X_(l,u);var B=(u.flags&128)!==0;if(!y&&!B)return b&&r_(u,f,!1),La(l,u,A);y=u.stateNode,MR.current=u;var ne=B&&typeof f.getDerivedStateFromError!="function"?null:y.render();return u.flags|=1,l!==null&&B?(u.child=uu(u,l.child,null,A),u.child=uu(u,null,ne,A)):ii(l,u,ne,A),u.memoizedState=y.state,b&&r_(u,f,!0),u.child}function J_(l){var u=l.stateNode;u.pendingContext?e_(l,u.pendingContext,u.pendingContext!==u.context):u.context&&e_(l,u.context,!1),qx(l,u.containerInfo)}function Z_(l,u,f,y,b){return cu(),Vx(b),u.flags|=256,ii(l,u,f,y),u.child}var uy={dehydrated:null,treeContext:null,retryLane:0};function dy(l){return{baseLanes:l,cachePool:null,transitions:null}}function eE(l,u,f){var y=u.pendingProps,b=$r.current,A=!1,B=(u.flags&128)!==0,ne;if((ne=B)||(ne=l!==null&&l.memoizedState===null?!1:(b&2)!==0),ne?(A=!0,u.flags&=-129):(l===null||l.memoizedState!==null)&&(b|=1),Sr($r,b&1),l===null)return Mx(u),l=u.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((u.mode&1)===0?u.lanes=1:l.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(B=y.children,l=y.fallback,A?(y=u.mode,A=u.child,B={mode:"hidden",children:B},(y&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=B):A=mp(B,y,0,null),l=Ll(l,y,f,null),A.return=u,l.return=u,A.sibling=l,u.child=A,u.child.memoizedState=dy(f),u.memoizedState=uy,l):hy(u,B));if(b=l.memoizedState,b!==null&&(ne=b.dehydrated,ne!==null))return VR(l,u,B,y,ne,b,f);if(A){A=y.fallback,B=u.mode,b=l.child,ne=b.sibling;var le={mode:"hidden",children:y.children};return(B&1)===0&&u.child!==b?(y=u.child,y.childLanes=0,y.pendingProps=le,u.deletions=null):(y=Do(b,le),y.subtreeFlags=b.subtreeFlags&14680064),ne!==null?A=Do(ne,A):(A=Ll(A,B,f,null),A.flags|=2),A.return=u,y.return=u,y.sibling=A,u.child=y,y=A,A=u.child,B=l.child.memoizedState,B=B===null?dy(f):{baseLanes:B.baseLanes|f,cachePool:null,transitions:B.transitions},A.memoizedState=B,A.childLanes=l.childLanes&~f,u.memoizedState=uy,y}return A=l.child,l=A.sibling,y=Do(A,{mode:"visible",children:y.children}),(u.mode&1)===0&&(y.lanes=f),y.return=u,y.sibling=null,l!==null&&(f=u.deletions,f===null?(u.deletions=[l],u.flags|=16):f.push(l)),u.child=y,u.memoizedState=null,y}function hy(l,u){return u=mp({mode:"visible",children:u},l.mode,0,null),u.return=l,l.child=u}function rp(l,u,f,y){return y!==null&&Vx(y),uu(u,l.child,null,f),l=hy(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function VR(l,u,f,y,b,A,B){if(f)return u.flags&256?(u.flags&=-257,y=ay(Error(t(422))),rp(l,u,B,y)):u.memoizedState!==null?(u.child=l.child,u.flags|=128,null):(A=y.fallback,b=u.mode,y=mp({mode:"visible",children:y.children},b,0,null),A=Ll(A,b,B,null),A.flags|=2,y.return=u,A.return=u,y.sibling=A,u.child=y,(u.mode&1)!==0&&uu(u,l.child,null,B),u.child.memoizedState=dy(B),u.memoizedState=uy,A);if((u.mode&1)===0)return rp(l,u,B,null);if(b.data==="$!"){if(y=b.nextSibling&&b.nextSibling.dataset,y)var ne=y.dgst;return y=ne,A=Error(t(419)),y=ay(A,y,void 0),rp(l,u,B,y)}if(ne=(B&l.childLanes)!==0,xi||ne){if(y=wn,y!==null){switch(B&-B){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(y.suspendedLanes|B))!==0?0:b,b!==0&&b!==A.retryLane&&(A.retryLane=b,Fa(l,b),Is(y,l,b,-1))}return Sy(),y=ay(Error(t(421))),rp(l,u,B,y)}return b.data==="$?"?(u.flags|=128,u.child=l.child,u=JR.bind(null,l),b._reactRetry=u,null):(l=A.treeContext,Mi=Eo(b.nextSibling),Li=u,Dr=!0,Ns=null,l!==null&&(ns[is++]=ja,ns[is++]=Da,ns[is++]=Sl,ja=l.id,Da=l.overflow,Sl=u),u=hy(u,y.children),u.flags|=4096,u)}function tE(l,u,f){l.lanes|=u;var y=l.alternate;y!==null&&(y.lanes|=u),zx(l.return,u,f)}function fy(l,u,f,y,b){var A=l.memoizedState;A===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:f,tailMode:b}:(A.isBackwards=u,A.rendering=null,A.renderingStartTime=0,A.last=y,A.tail=f,A.tailMode=b)}function rE(l,u,f){var y=u.pendingProps,b=y.revealOrder,A=y.tail;if(ii(l,u,y.children,f),y=$r.current,(y&2)!==0)y=y&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&tE(l,f,u);else if(l.tag===19)tE(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}if(Sr($r,y),(u.mode&1)===0)u.memoizedState=null;else switch(b){case"forwards":for(f=u.child,b=null;f!==null;)l=f.alternate,l!==null&&Yf(l)===null&&(b=f),f=f.sibling;f=b,f===null?(b=u.child,u.child=null):(b=f.sibling,f.sibling=null),fy(u,!1,b,f,A);break;case"backwards":for(f=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&Yf(l)===null){u.child=b;break}l=b.sibling,b.sibling=f,f=b,b=l}fy(u,!0,f,null,A);break;case"together":fy(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function np(l,u){(u.mode&1)===0&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function La(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),jl|=u.lanes,(f&u.childLanes)===0)return null;if(l!==null&&u.child!==l.child)throw Error(t(153));if(u.child!==null){for(l=u.child,f=Do(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=Do(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function $R(l,u,f){switch(u.tag){case 3:J_(u),cu();break;case 5:g_(u);break;case 1:gi(u.type)&&Vf(u);break;case 4:qx(u,u.stateNode.containerInfo);break;case 10:var y=u.type._context,b=u.memoizedProps.value;Sr(Wf,y._currentValue),y._currentValue=b;break;case 13:if(y=u.memoizedState,y!==null)return y.dehydrated!==null?(Sr($r,$r.current&1),u.flags|=128,null):(f&u.child.childLanes)!==0?eE(l,u,f):(Sr($r,$r.current&1),l=La(l,u,f),l!==null?l.sibling:null);Sr($r,$r.current&1);break;case 19:if(y=(f&u.childLanes)!==0,(l.flags&128)!==0){if(y)return rE(l,u,f);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Sr($r,$r.current),y)break;return null;case 22:case 23:return u.lanes=0,Y_(l,u,f)}return La(l,u,f)}var nE,py,iE,sE;nE=function(l,u){for(var f=u.child;f!==null;){if(f.tag===5||f.tag===6)l.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},py=function(){},iE=function(l,u,f,y){var b=l.memoizedProps;if(b!==y){l=u.stateNode,Pl(ra.current);var A=null;switch(f){case"input":b=bt(l,b),y=bt(l,y),A=[];break;case"select":b=Ne({},b,{value:void 0}),y=Ne({},y,{value:void 0}),A=[];break;case"textarea":b=rt(l,b),y=rt(l,y),A=[];break;default:typeof b.onClick!="function"&&typeof y.onClick=="function"&&(l.onclick=Of)}ut(f,y);var B;f=null;for(ve in b)if(!y.hasOwnProperty(ve)&&b.hasOwnProperty(ve)&&b[ve]!=null)if(ve==="style"){var ne=b[ve];for(B in ne)ne.hasOwnProperty(B)&&(f||(f={}),f[B]="")}else ve!=="dangerouslySetInnerHTML"&&ve!=="children"&&ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&ve!=="autoFocus"&&(i.hasOwnProperty(ve)?A||(A=[]):(A=A||[]).push(ve,null));for(ve in y){var le=y[ve];if(ne=b?.[ve],y.hasOwnProperty(ve)&&le!==ne&&(le!=null||ne!=null))if(ve==="style")if(ne){for(B in ne)!ne.hasOwnProperty(B)||le&&le.hasOwnProperty(B)||(f||(f={}),f[B]="");for(B in le)le.hasOwnProperty(B)&&ne[B]!==le[B]&&(f||(f={}),f[B]=le[B])}else f||(A||(A=[]),A.push(ve,f)),f=le;else ve==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,ne=ne?ne.__html:void 0,le!=null&&ne!==le&&(A=A||[]).push(ve,le)):ve==="children"?typeof le!="string"&&typeof le!="number"||(A=A||[]).push(ve,""+le):ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&(i.hasOwnProperty(ve)?(le!=null&&ve==="onScroll"&&Cr("scroll",l),A||ne===le||(A=[])):(A=A||[]).push(ve,le))}f&&(A=A||[]).push("style",f);var ve=A;(u.updateQueue=ve)&&(u.flags|=4)}},sE=function(l,u,f,y){f!==y&&(u.flags|=4)};function l0(l,u){if(!Dr)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function qn(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,y=0;if(u)for(var b=l.child;b!==null;)f|=b.lanes|b.childLanes,y|=b.subtreeFlags&14680064,y|=b.flags&14680064,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)f|=b.lanes|b.childLanes,y|=b.subtreeFlags,y|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=y,l.childLanes=f,u}function BR(l,u,f){var y=u.pendingProps;switch(Ox(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(u),null;case 1:return gi(u.type)&&Mf(),qn(u),null;case 3:return y=u.stateNode,fu(),Ir(mi),Ir(Hn),Yx(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(l===null||l.child===null)&&(zf(u)?u.flags|=4:l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Ns!==null&&(Ay(Ns),Ns=null))),py(l,u),qn(u),null;case 5:Gx(u);var b=Pl(n0.current);if(f=u.type,l!==null&&u.stateNode!=null)iE(l,u,f,y,b),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!y){if(u.stateNode===null)throw Error(t(166));return qn(u),null}if(l=Pl(ra.current),zf(u)){y=u.stateNode,f=u.type;var A=u.memoizedProps;switch(y[ta]=u,y[Jd]=A,l=(u.mode&1)!==0,f){case"dialog":Cr("cancel",y),Cr("close",y);break;case"iframe":case"object":case"embed":Cr("load",y);break;case"video":case"audio":for(b=0;b<Yd.length;b++)Cr(Yd[b],y);break;case"source":Cr("error",y);break;case"img":case"image":case"link":Cr("error",y),Cr("load",y);break;case"details":Cr("toggle",y);break;case"input":tr(y,A),Cr("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!A.multiple},Cr("invalid",y);break;case"textarea":st(y,A),Cr("invalid",y)}ut(f,A),b=null;for(var B in A)if(A.hasOwnProperty(B)){var ne=A[B];B==="children"?typeof ne=="string"?y.textContent!==ne&&(A.suppressHydrationWarning!==!0&&Ff(y.textContent,ne,l),b=["children",ne]):typeof ne=="number"&&y.textContent!==""+ne&&(A.suppressHydrationWarning!==!0&&Ff(y.textContent,ne,l),b=["children",""+ne]):i.hasOwnProperty(B)&&ne!=null&&B==="onScroll"&&Cr("scroll",y)}switch(f){case"input":Ke(y),Qt(y,A,!0);break;case"textarea":Ke(y),Tt(y);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(y.onclick=Of)}y=b,u.updateQueue=y,y!==null&&(u.flags|=4)}else{B=b.nodeType===9?b:b.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=lt(f)),l==="http://www.w3.org/1999/xhtml"?f==="script"?(l=B.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof y.is=="string"?l=B.createElement(f,{is:y.is}):(l=B.createElement(f),f==="select"&&(B=l,y.multiple?B.multiple=!0:y.size&&(B.size=y.size))):l=B.createElementNS(l,f),l[ta]=u,l[Jd]=y,nE(l,u,!1,!1),u.stateNode=l;e:{switch(B=Ot(f,y),f){case"dialog":Cr("cancel",l),Cr("close",l),b=y;break;case"iframe":case"object":case"embed":Cr("load",l),b=y;break;case"video":case"audio":for(b=0;b<Yd.length;b++)Cr(Yd[b],l);b=y;break;case"source":Cr("error",l),b=y;break;case"img":case"image":case"link":Cr("error",l),Cr("load",l),b=y;break;case"details":Cr("toggle",l),b=y;break;case"input":tr(l,y),b=bt(l,y),Cr("invalid",l);break;case"option":b=y;break;case"select":l._wrapperState={wasMultiple:!!y.multiple},b=Ne({},y,{value:void 0}),Cr("invalid",l);break;case"textarea":st(l,y),b=rt(l,y),Cr("invalid",l);break;default:b=y}ut(f,b),ne=b;for(A in ne)if(ne.hasOwnProperty(A)){var le=ne[A];A==="style"?Xe(l,le):A==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,le!=null&&kr(l,le)):A==="children"?typeof le=="string"?(f!=="textarea"||le!=="")&&ze(l,le):typeof le=="number"&&ze(l,""+le):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(i.hasOwnProperty(A)?le!=null&&A==="onScroll"&&Cr("scroll",l):le!=null&&V(l,A,le,B))}switch(f){case"input":Ke(l),Qt(l,y,!1);break;case"textarea":Ke(l),Tt(l);break;case"option":y.value!=null&&l.setAttribute("value",""+Ce(y.value));break;case"select":l.multiple=!!y.multiple,A=y.value,A!=null?ue(l,!!y.multiple,A,!1):y.defaultValue!=null&&ue(l,!!y.multiple,y.defaultValue,!0);break;default:typeof b.onClick=="function"&&(l.onclick=Of)}switch(f){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return qn(u),null;case 6:if(l&&u.stateNode!=null)sE(l,u,l.memoizedProps,y);else{if(typeof y!="string"&&u.stateNode===null)throw Error(t(166));if(f=Pl(n0.current),Pl(ra.current),zf(u)){if(y=u.stateNode,f=u.memoizedProps,y[ta]=u,(A=y.nodeValue!==f)&&(l=Li,l!==null))switch(l.tag){case 3:Ff(y.nodeValue,f,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Ff(y.nodeValue,f,(l.mode&1)!==0)}A&&(u.flags|=4)}else y=(f.nodeType===9?f:f.ownerDocument).createTextNode(y),y[ta]=u,u.stateNode=y}return qn(u),null;case 13:if(Ir($r),y=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Dr&&Mi!==null&&(u.mode&1)!==0&&(u.flags&128)===0)l_(),cu(),u.flags|=98560,A=!1;else if(A=zf(u),y!==null&&y.dehydrated!==null){if(l===null){if(!A)throw Error(t(318));if(A=u.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(t(317));A[ta]=u}else cu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;qn(u),A=!1}else Ns!==null&&(Ay(Ns),Ns=null),A=!0;if(!A)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=f,u):(y=y!==null,y!==(l!==null&&l.memoizedState!==null)&&y&&(u.child.flags|=8192,(u.mode&1)!==0&&(l===null||($r.current&1)!==0?hn===0&&(hn=3):Sy())),u.updateQueue!==null&&(u.flags|=4),qn(u),null);case 4:return fu(),py(l,u),l===null&&Xd(u.stateNode.containerInfo),qn(u),null;case 10:return Ux(u.type._context),qn(u),null;case 17:return gi(u.type)&&Mf(),qn(u),null;case 19:if(Ir($r),A=u.memoizedState,A===null)return qn(u),null;if(y=(u.flags&128)!==0,B=A.rendering,B===null)if(y)l0(A,!1);else{if(hn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(B=Yf(l),B!==null){for(u.flags|=128,l0(A,!1),y=B.updateQueue,y!==null&&(u.updateQueue=y,u.flags|=4),u.subtreeFlags=0,y=f,f=u.child;f!==null;)A=f,l=y,A.flags&=14680066,B=A.alternate,B===null?(A.childLanes=0,A.lanes=l,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=B.childLanes,A.lanes=B.lanes,A.child=B.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=B.memoizedProps,A.memoizedState=B.memoizedState,A.updateQueue=B.updateQueue,A.type=B.type,l=B.dependencies,A.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),f=f.sibling;return Sr($r,$r.current&1|2),u.child}l=l.sibling}A.tail!==null&&Le()>xu&&(u.flags|=128,y=!0,l0(A,!1),u.lanes=4194304)}else{if(!y)if(l=Yf(B),l!==null){if(u.flags|=128,y=!0,f=l.updateQueue,f!==null&&(u.updateQueue=f,u.flags|=4),l0(A,!0),A.tail===null&&A.tailMode==="hidden"&&!B.alternate&&!Dr)return qn(u),null}else 2*Le()-A.renderingStartTime>xu&&f!==1073741824&&(u.flags|=128,y=!0,l0(A,!1),u.lanes=4194304);A.isBackwards?(B.sibling=u.child,u.child=B):(f=A.last,f!==null?f.sibling=B:u.child=B,A.last=B)}return A.tail!==null?(u=A.tail,A.rendering=u,A.tail=u.sibling,A.renderingStartTime=Le(),u.sibling=null,f=$r.current,Sr($r,y?f&1|2:f&1),u):(qn(u),null);case 22:case 23:return ky(),y=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==y&&(u.flags|=8192),y&&(u.mode&1)!==0?(Vi&1073741824)!==0&&(qn(u),u.subtreeFlags&6&&(u.flags|=8192)):qn(u),null;case 24:return null;case 25:return null}throw Error(t(156,u.tag))}function UR(l,u){switch(Ox(u),u.tag){case 1:return gi(u.type)&&Mf(),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return fu(),Ir(mi),Ir(Hn),Yx(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 5:return Gx(u),null;case 13:if(Ir($r),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(t(340));cu()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return Ir($r),null;case 4:return fu(),null;case 10:return Ux(u.type._context),null;case 22:case 23:return ky(),null;case 24:return null;default:return null}}var ip=!1,Gn=!1,zR=typeof WeakSet=="function"?WeakSet:Set,mt=null;function mu(l,u){var f=l.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(y){Gr(l,u,y)}else f.current=null}function my(l,u,f){try{f()}catch(y){Gr(l,u,y)}}var aE=!1;function HR(l,u){if(kx=bo,l=Mw(),vx(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var y=f.getSelection&&f.getSelection();if(y&&y.rangeCount!==0){f=y.anchorNode;var b=y.anchorOffset,A=y.focusNode;y=y.focusOffset;try{f.nodeType,A.nodeType}catch{f=null;break e}var B=0,ne=-1,le=-1,ve=0,Ue=0,We=l,$e=null;t:for(;;){for(var ot;We!==f||b!==0&&We.nodeType!==3||(ne=B+b),We!==A||y!==0&&We.nodeType!==3||(le=B+y),We.nodeType===3&&(B+=We.nodeValue.length),(ot=We.firstChild)!==null;)$e=We,We=ot;for(;;){if(We===l)break t;if($e===f&&++ve===b&&(ne=B),$e===A&&++Ue===y&&(le=B),(ot=We.nextSibling)!==null)break;We=$e,$e=We.parentNode}We=ot}f=ne===-1||le===-1?null:{start:ne,end:le}}else f=null}f=f||{start:0,end:0}}else f=null;for(Sx={focusedElem:l,selectionRange:f},bo=!1,mt=u;mt!==null;)if(u=mt,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,mt=l;else for(;mt!==null;){u=mt;try{var gt=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var xt=gt.memoizedProps,Jr=gt.memoizedState,ge=u.stateNode,de=ge.getSnapshotBeforeUpdate(u.elementType===u.type?xt:ks(u.type,xt),Jr);ge.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var ye=u.stateNode.containerInfo;ye.nodeType===1?ye.textContent="":ye.nodeType===9&&ye.documentElement&&ye.removeChild(ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ye){Gr(u,u.return,Ye)}if(l=u.sibling,l!==null){l.return=u.return,mt=l;break}mt=u.return}return gt=aE,aE=!1,gt}function c0(l,u,f){var y=u.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var b=y=y.next;do{if((b.tag&l)===l){var A=b.destroy;b.destroy=void 0,A!==void 0&&my(u,f,A)}b=b.next}while(b!==y)}}function sp(l,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&l)===l){var y=f.create;f.destroy=y()}f=f.next}while(f!==u)}}function gy(l){var u=l.ref;if(u!==null){var f=l.stateNode;switch(l.tag){case 5:l=f;break;default:l=f}typeof u=="function"?u(l):u.current=l}}function oE(l){var u=l.alternate;u!==null&&(l.alternate=null,oE(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&(delete u[ta],delete u[Jd],delete u[Rx],delete u[NR],delete u[kR])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function lE(l){return l.tag===5||l.tag===3||l.tag===4}function cE(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||lE(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function xy(l,u,f){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?f.nodeType===8?f.parentNode.insertBefore(l,u):f.insertBefore(l,u):(f.nodeType===8?(u=f.parentNode,u.insertBefore(l,f)):(u=f,u.appendChild(l)),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=Of));else if(y!==4&&(l=l.child,l!==null))for(xy(l,u,f),l=l.sibling;l!==null;)xy(l,u,f),l=l.sibling}function yy(l,u,f){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(y!==4&&(l=l.child,l!==null))for(yy(l,u,f),l=l.sibling;l!==null;)yy(l,u,f),l=l.sibling}var In=null,Ss=!1;function Co(l,u,f){for(f=f.child;f!==null;)uE(l,u,f),f=f.sibling}function uE(l,u,f){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(zn,f)}catch{}switch(f.tag){case 5:Gn||mu(f,u);case 6:var y=In,b=Ss;In=null,Co(l,u,f),In=y,Ss=b,In!==null&&(Ss?(l=In,f=f.stateNode,l.nodeType===8?l.parentNode.removeChild(f):l.removeChild(f)):In.removeChild(f.stateNode));break;case 18:In!==null&&(Ss?(l=In,f=f.stateNode,l.nodeType===8?Px(l.parentNode,f):l.nodeType===1&&Px(l,f),Es(l)):Px(In,f.stateNode));break;case 4:y=In,b=Ss,In=f.stateNode.containerInfo,Ss=!0,Co(l,u,f),In=y,Ss=b;break;case 0:case 11:case 14:case 15:if(!Gn&&(y=f.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){b=y=y.next;do{var A=b,B=A.destroy;A=A.tag,B!==void 0&&((A&2)!==0||(A&4)!==0)&&my(f,u,B),b=b.next}while(b!==y)}Co(l,u,f);break;case 1:if(!Gn&&(mu(f,u),y=f.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=f.memoizedProps,y.state=f.memoizedState,y.componentWillUnmount()}catch(ne){Gr(f,u,ne)}Co(l,u,f);break;case 21:Co(l,u,f);break;case 22:f.mode&1?(Gn=(y=Gn)||f.memoizedState!==null,Co(l,u,f),Gn=y):Co(l,u,f);break;default:Co(l,u,f)}}function dE(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var f=l.stateNode;f===null&&(f=l.stateNode=new zR),u.forEach(function(y){var b=ZR.bind(null,l,y);f.has(y)||(f.add(y),y.then(b,b))})}}function Cs(l,u){var f=u.deletions;if(f!==null)for(var y=0;y<f.length;y++){var b=f[y];try{var A=l,B=u,ne=B;e:for(;ne!==null;){switch(ne.tag){case 5:In=ne.stateNode,Ss=!1;break e;case 3:In=ne.stateNode.containerInfo,Ss=!0;break e;case 4:In=ne.stateNode.containerInfo,Ss=!0;break e}ne=ne.return}if(In===null)throw Error(t(160));uE(A,B,b),In=null,Ss=!1;var le=b.alternate;le!==null&&(le.return=null),b.return=null}catch(ve){Gr(b,u,ve)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)hE(u,l),u=u.sibling}function hE(l,u){var f=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Cs(u,l),ia(l),y&4){try{c0(3,l,l.return),sp(3,l)}catch(xt){Gr(l,l.return,xt)}try{c0(5,l,l.return)}catch(xt){Gr(l,l.return,xt)}}break;case 1:Cs(u,l),ia(l),y&512&&f!==null&&mu(f,f.return);break;case 5:if(Cs(u,l),ia(l),y&512&&f!==null&&mu(f,f.return),l.flags&32){var b=l.stateNode;try{ze(b,"")}catch(xt){Gr(l,l.return,xt)}}if(y&4&&(b=l.stateNode,b!=null)){var A=l.memoizedProps,B=f!==null?f.memoizedProps:A,ne=l.type,le=l.updateQueue;if(l.updateQueue=null,le!==null)try{ne==="input"&&A.type==="radio"&&A.name!=null&&Et(b,A),Ot(ne,B);var ve=Ot(ne,A);for(B=0;B<le.length;B+=2){var Ue=le[B],We=le[B+1];Ue==="style"?Xe(b,We):Ue==="dangerouslySetInnerHTML"?kr(b,We):Ue==="children"?ze(b,We):V(b,Ue,We,ve)}switch(ne){case"input":Pe(b,A);break;case"textarea":ht(b,A);break;case"select":var $e=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!A.multiple;var ot=A.value;ot!=null?ue(b,!!A.multiple,ot,!1):$e!==!!A.multiple&&(A.defaultValue!=null?ue(b,!!A.multiple,A.defaultValue,!0):ue(b,!!A.multiple,A.multiple?[]:"",!1))}b[Jd]=A}catch(xt){Gr(l,l.return,xt)}}break;case 6:if(Cs(u,l),ia(l),y&4){if(l.stateNode===null)throw Error(t(162));b=l.stateNode,A=l.memoizedProps;try{b.nodeValue=A}catch(xt){Gr(l,l.return,xt)}}break;case 3:if(Cs(u,l),ia(l),y&4&&f!==null&&f.memoizedState.isDehydrated)try{Es(u.containerInfo)}catch(xt){Gr(l,l.return,xt)}break;case 4:Cs(u,l),ia(l);break;case 13:Cs(u,l),ia(l),b=l.child,b.flags&8192&&(A=b.memoizedState!==null,b.stateNode.isHidden=A,!A||b.alternate!==null&&b.alternate.memoizedState!==null||(wy=Le())),y&4&&dE(l);break;case 22:if(Ue=f!==null&&f.memoizedState!==null,l.mode&1?(Gn=(ve=Gn)||Ue,Cs(u,l),Gn=ve):Cs(u,l),ia(l),y&8192){if(ve=l.memoizedState!==null,(l.stateNode.isHidden=ve)&&!Ue&&(l.mode&1)!==0)for(mt=l,Ue=l.child;Ue!==null;){for(We=mt=Ue;mt!==null;){switch($e=mt,ot=$e.child,$e.tag){case 0:case 11:case 14:case 15:c0(4,$e,$e.return);break;case 1:mu($e,$e.return);var gt=$e.stateNode;if(typeof gt.componentWillUnmount=="function"){y=$e,f=$e.return;try{u=y,gt.props=u.memoizedProps,gt.state=u.memoizedState,gt.componentWillUnmount()}catch(xt){Gr(y,f,xt)}}break;case 5:mu($e,$e.return);break;case 22:if($e.memoizedState!==null){mE(We);continue}}ot!==null?(ot.return=$e,mt=ot):mE(We)}Ue=Ue.sibling}e:for(Ue=null,We=l;;){if(We.tag===5){if(Ue===null){Ue=We;try{b=We.stateNode,ve?(A=b.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(ne=We.stateNode,le=We.memoizedProps.style,B=le!=null&&le.hasOwnProperty("display")?le.display:null,ne.style.display=xe("display",B))}catch(xt){Gr(l,l.return,xt)}}}else if(We.tag===6){if(Ue===null)try{We.stateNode.nodeValue=ve?"":We.memoizedProps}catch(xt){Gr(l,l.return,xt)}}else if((We.tag!==22&&We.tag!==23||We.memoizedState===null||We===l)&&We.child!==null){We.child.return=We,We=We.child;continue}if(We===l)break e;for(;We.sibling===null;){if(We.return===null||We.return===l)break e;Ue===We&&(Ue=null),We=We.return}Ue===We&&(Ue=null),We.sibling.return=We.return,We=We.sibling}}break;case 19:Cs(u,l),ia(l),y&4&&dE(l);break;case 21:break;default:Cs(u,l),ia(l)}}function ia(l){var u=l.flags;if(u&2){try{e:{for(var f=l.return;f!==null;){if(lE(f)){var y=f;break e}f=f.return}throw Error(t(160))}switch(y.tag){case 5:var b=y.stateNode;y.flags&32&&(ze(b,""),y.flags&=-33);var A=cE(l);yy(l,A,b);break;case 3:case 4:var B=y.stateNode.containerInfo,ne=cE(l);xy(l,ne,B);break;default:throw Error(t(161))}}catch(le){Gr(l,l.return,le)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function WR(l,u,f){mt=l,fE(l)}function fE(l,u,f){for(var y=(l.mode&1)!==0;mt!==null;){var b=mt,A=b.child;if(b.tag===22&&y){var B=b.memoizedState!==null||ip;if(!B){var ne=b.alternate,le=ne!==null&&ne.memoizedState!==null||Gn;ne=ip;var ve=Gn;if(ip=B,(Gn=le)&&!ve)for(mt=b;mt!==null;)B=mt,le=B.child,B.tag===22&&B.memoizedState!==null?gE(b):le!==null?(le.return=B,mt=le):gE(b);for(;A!==null;)mt=A,fE(A),A=A.sibling;mt=b,ip=ne,Gn=ve}pE(l)}else(b.subtreeFlags&8772)!==0&&A!==null?(A.return=b,mt=A):pE(l)}}function pE(l){for(;mt!==null;){var u=mt;if((u.flags&8772)!==0){var f=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:Gn||sp(5,u);break;case 1:var y=u.stateNode;if(u.flags&4&&!Gn)if(f===null)y.componentDidMount();else{var b=u.elementType===u.type?f.memoizedProps:ks(u.type,f.memoizedProps);y.componentDidUpdate(b,f.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var A=u.updateQueue;A!==null&&m_(u,A,y);break;case 3:var B=u.updateQueue;if(B!==null){if(f=null,u.child!==null)switch(u.child.tag){case 5:f=u.child.stateNode;break;case 1:f=u.child.stateNode}m_(u,B,f)}break;case 5:var ne=u.stateNode;if(f===null&&u.flags&4){f=ne;var le=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":le.autoFocus&&f.focus();break;case"img":le.src&&(f.src=le.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var ve=u.alternate;if(ve!==null){var Ue=ve.memoizedState;if(Ue!==null){var We=Ue.dehydrated;We!==null&&Es(We)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Gn||u.flags&512&&gy(u)}catch($e){Gr(u,u.return,$e)}}if(u===l){mt=null;break}if(f=u.sibling,f!==null){f.return=u.return,mt=f;break}mt=u.return}}function mE(l){for(;mt!==null;){var u=mt;if(u===l){mt=null;break}var f=u.sibling;if(f!==null){f.return=u.return,mt=f;break}mt=u.return}}function gE(l){for(;mt!==null;){var u=mt;try{switch(u.tag){case 0:case 11:case 15:var f=u.return;try{sp(4,u)}catch(le){Gr(u,f,le)}break;case 1:var y=u.stateNode;if(typeof y.componentDidMount=="function"){var b=u.return;try{y.componentDidMount()}catch(le){Gr(u,b,le)}}var A=u.return;try{gy(u)}catch(le){Gr(u,A,le)}break;case 5:var B=u.return;try{gy(u)}catch(le){Gr(u,B,le)}}}catch(le){Gr(u,u.return,le)}if(u===l){mt=null;break}var ne=u.sibling;if(ne!==null){ne.return=u.return,mt=ne;break}mt=u.return}}var qR=Math.ceil,ap=L.ReactCurrentDispatcher,vy=L.ReactCurrentOwner,os=L.ReactCurrentBatchConfig,rr=0,wn=null,nn=null,Pn=0,Vi=0,gu=To(0),hn=0,u0=null,jl=0,op=0,by=0,d0=null,yi=null,wy=0,xu=1/0,Ma=null,lp=!1,_y=null,Io=null,cp=!1,Po=null,up=0,h0=0,Ey=null,dp=-1,hp=0;function si(){return(rr&6)!==0?Le():dp!==-1?dp:dp=Le()}function Ro(l){return(l.mode&1)===0?1:(rr&2)!==0&&Pn!==0?Pn&-Pn:CR.transition!==null?(hp===0&&(hp=wl()),hp):(l=Jt,l!==0||(l=window.event,l=l===void 0?16:$d(l.type)),l)}function Is(l,u,f,y){if(50<h0)throw h0=0,Ey=null,Error(t(185));go(l,f,y),((rr&2)===0||l!==wn)&&(l===wn&&((rr&2)===0&&(op|=f),hn===4&&jo(l,Pn)),vi(l,y),f===1&&rr===0&&(u.mode&1)===0&&(xu=Le()+500,$f&&No()))}function vi(l,u){var f=l.callbackNode;Na(l,u);var y=bl(l,l===wn?Pn:0);if(y===0)f!==null&&Ve(f),l.callbackNode=null,l.callbackPriority=0;else if(u=y&-y,l.callbackPriority!==u){if(f!=null&&Ve(f),u===1)l.tag===0?SR(yE.bind(null,l)):n_(yE.bind(null,l)),TR(function(){(rr&6)===0&&No()}),f=null;else{switch(yo(y)){case 1:f=Bt;break;case 4:f=$t;break;case 16:f=nr;break;case 536870912:f=Un;break;default:f=nr}f=NE(f,xE.bind(null,l))}l.callbackPriority=u,l.callbackNode=f}}function xE(l,u){if(dp=-1,hp=0,(rr&6)!==0)throw Error(t(327));var f=l.callbackNode;if(yu()&&l.callbackNode!==f)return null;var y=bl(l,l===wn?Pn:0);if(y===0)return null;if((y&30)!==0||(y&l.expiredLanes)!==0||u)u=fp(l,y);else{u=y;var b=rr;rr|=2;var A=bE();(wn!==l||Pn!==u)&&(Ma=null,xu=Le()+500,Fl(l,u));do try{YR();break}catch(ne){vE(l,ne)}while(!0);Bx(),ap.current=A,rr=b,nn!==null?u=0:(wn=null,Pn=0,u=hn)}if(u!==0){if(u===2&&(b=Di(l),b!==0&&(y=b,u=Ty(l,b))),u===1)throw f=u0,Fl(l,0),jo(l,y),vi(l,Le()),f;if(u===6)jo(l,y);else{if(b=l.current.alternate,(y&30)===0&&!GR(b)&&(u=fp(l,y),u===2&&(A=Di(l),A!==0&&(y=A,u=Ty(l,A))),u===1))throw f=u0,Fl(l,0),jo(l,y),vi(l,Le()),f;switch(l.finishedWork=b,l.finishedLanes=y,u){case 0:case 1:throw Error(t(345));case 2:Ol(l,yi,Ma);break;case 3:if(jo(l,y),(y&130023424)===y&&(u=wy+500-Le(),10<u)){if(bl(l,0)!==0)break;if(b=l.suspendedLanes,(b&y)!==y){si(),l.pingedLanes|=l.suspendedLanes&b;break}l.timeoutHandle=Ix(Ol.bind(null,l,yi,Ma),u);break}Ol(l,yi,Ma);break;case 4:if(jo(l,y),(y&4194240)===y)break;for(u=l.eventTimes,b=-1;0<y;){var B=31-Tr(y);A=1<<B,B=u[B],B>b&&(b=B),y&=~A}if(y=b,y=Le()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*qR(y/1960))-y,10<y){l.timeoutHandle=Ix(Ol.bind(null,l,yi,Ma),y);break}Ol(l,yi,Ma);break;case 5:Ol(l,yi,Ma);break;default:throw Error(t(329))}}}return vi(l,Le()),l.callbackNode===f?xE.bind(null,l):null}function Ty(l,u){var f=d0;return l.current.memoizedState.isDehydrated&&(Fl(l,u).flags|=256),l=fp(l,u),l!==2&&(u=yi,yi=f,u!==null&&Ay(u)),l}function Ay(l){yi===null?yi=l:yi.push.apply(yi,l)}function GR(l){for(var u=l;;){if(u.flags&16384){var f=u.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var y=0;y<f.length;y++){var b=f[y],A=b.getSnapshot;b=b.value;try{if(!As(A(),b))return!1}catch{return!1}}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function jo(l,u){for(u&=~by,u&=~op,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var f=31-Tr(u),y=1<<f;l[f]=-1,u&=~y}}function yE(l){if((rr&6)!==0)throw Error(t(327));yu();var u=bl(l,0);if((u&1)===0)return vi(l,Le()),null;var f=fp(l,u);if(l.tag!==0&&f===2){var y=Di(l);y!==0&&(u=y,f=Ty(l,y))}if(f===1)throw f=u0,Fl(l,0),jo(l,u),vi(l,Le()),f;if(f===6)throw Error(t(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,Ol(l,yi,Ma),vi(l,Le()),null}function Ny(l,u){var f=rr;rr|=1;try{return l(u)}finally{rr=f,rr===0&&(xu=Le()+500,$f&&No())}}function Dl(l){Po!==null&&Po.tag===0&&(rr&6)===0&&yu();var u=rr;rr|=1;var f=os.transition,y=Jt;try{if(os.transition=null,Jt=1,l)return l()}finally{Jt=y,os.transition=f,rr=u,(rr&6)===0&&No()}}function ky(){Vi=gu.current,Ir(gu)}function Fl(l,u){l.finishedWork=null,l.finishedLanes=0;var f=l.timeoutHandle;if(f!==-1&&(l.timeoutHandle=-1,ER(f)),nn!==null)for(f=nn.return;f!==null;){var y=f;switch(Ox(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Mf();break;case 3:fu(),Ir(mi),Ir(Hn),Yx();break;case 5:Gx(y);break;case 4:fu();break;case 13:Ir($r);break;case 19:Ir($r);break;case 10:Ux(y.type._context);break;case 22:case 23:ky()}f=f.return}if(wn=l,nn=l=Do(l.current,null),Pn=Vi=u,hn=0,u0=null,by=op=jl=0,yi=d0=null,Il!==null){for(u=0;u<Il.length;u++)if(f=Il[u],y=f.interleaved,y!==null){f.interleaved=null;var b=y.next,A=f.pending;if(A!==null){var B=A.next;A.next=b,y.next=B}f.pending=y}Il=null}return l}function vE(l,u){do{var f=nn;try{if(Bx(),Xf.current=ep,Qf){for(var y=Br.memoizedState;y!==null;){var b=y.queue;b!==null&&(b.pending=null),y=y.next}Qf=!1}if(Rl=0,bn=dn=Br=null,i0=!1,s0=0,vy.current=null,f===null||f.return===null){hn=1,u0=u,nn=null;break}e:{var A=l,B=f.return,ne=f,le=u;if(u=Pn,ne.flags|=32768,le!==null&&typeof le=="object"&&typeof le.then=="function"){var ve=le,Ue=ne,We=Ue.tag;if((Ue.mode&1)===0&&(We===0||We===11||We===15)){var $e=Ue.alternate;$e?(Ue.updateQueue=$e.updateQueue,Ue.memoizedState=$e.memoizedState,Ue.lanes=$e.lanes):(Ue.updateQueue=null,Ue.memoizedState=null)}var ot=H_(B);if(ot!==null){ot.flags&=-257,W_(ot,B,ne,A,u),ot.mode&1&&z_(A,ve,u),u=ot,le=ve;var gt=u.updateQueue;if(gt===null){var xt=new Set;xt.add(le),u.updateQueue=xt}else gt.add(le);break e}else{if((u&1)===0){z_(A,ve,u),Sy();break e}le=Error(t(426))}}else if(Dr&&ne.mode&1){var Jr=H_(B);if(Jr!==null){(Jr.flags&65536)===0&&(Jr.flags|=256),W_(Jr,B,ne,A,u),Vx(pu(le,ne));break e}}A=le=pu(le,ne),hn!==4&&(hn=2),d0===null?d0=[A]:d0.push(A),A=B;do{switch(A.tag){case 3:A.flags|=65536,u&=-u,A.lanes|=u;var ge=B_(A,le,u);p_(A,ge);break e;case 1:ne=le;var de=A.type,ye=A.stateNode;if((A.flags&128)===0&&(typeof de.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(Io===null||!Io.has(ye)))){A.flags|=65536,u&=-u,A.lanes|=u;var Ye=U_(A,ne,u);p_(A,Ye);break e}}A=A.return}while(A!==null)}_E(f)}catch(wt){u=wt,nn===f&&f!==null&&(nn=f=f.return);continue}break}while(!0)}function bE(){var l=ap.current;return ap.current=ep,l===null?ep:l}function Sy(){(hn===0||hn===3||hn===2)&&(hn=4),wn===null||(jl&268435455)===0&&(op&268435455)===0||jo(wn,Pn)}function fp(l,u){var f=rr;rr|=2;var y=bE();(wn!==l||Pn!==u)&&(Ma=null,Fl(l,u));do try{KR();break}catch(b){vE(l,b)}while(!0);if(Bx(),rr=f,ap.current=y,nn!==null)throw Error(t(261));return wn=null,Pn=0,hn}function KR(){for(;nn!==null;)wE(nn)}function YR(){for(;nn!==null&&!qe();)wE(nn)}function wE(l){var u=AE(l.alternate,l,Vi);l.memoizedProps=l.pendingProps,u===null?_E(l):nn=u,vy.current=null}function _E(l){var u=l;do{var f=u.alternate;if(l=u.return,(u.flags&32768)===0){if(f=BR(f,u,Vi),f!==null){nn=f;return}}else{if(f=UR(f,u),f!==null){f.flags&=32767,nn=f;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{hn=6,nn=null;return}}if(u=u.sibling,u!==null){nn=u;return}nn=u=l}while(u!==null);hn===0&&(hn=5)}function Ol(l,u,f){var y=Jt,b=os.transition;try{os.transition=null,Jt=1,XR(l,u,f,y)}finally{os.transition=b,Jt=y}return null}function XR(l,u,f,y){do yu();while(Po!==null);if((rr&6)!==0)throw Error(t(327));f=l.finishedWork;var b=l.finishedLanes;if(f===null)return null;if(l.finishedWork=null,l.finishedLanes=0,f===l.current)throw Error(t(177));l.callbackNode=null,l.callbackPriority=0;var A=f.lanes|f.childLanes;if(Ar(l,A),l===wn&&(nn=wn=null,Pn=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||cp||(cp=!0,NE(nr,function(){return yu(),null})),A=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||A){A=os.transition,os.transition=null;var B=Jt;Jt=1;var ne=rr;rr|=4,vy.current=null,HR(l,f),hE(f,l),gR(Sx),bo=!!kx,Sx=kx=null,l.current=f,WR(f),Re(),rr=ne,Jt=B,os.transition=A}else l.current=f;if(cp&&(cp=!1,Po=l,up=b),A=l.pendingLanes,A===0&&(Io=null),Ys(f.stateNode),vi(l,Le()),u!==null)for(y=l.onRecoverableError,f=0;f<u.length;f++)b=u[f],y(b.value,{componentStack:b.stack,digest:b.digest});if(lp)throw lp=!1,l=_y,_y=null,l;return(up&1)!==0&&l.tag!==0&&yu(),A=l.pendingLanes,(A&1)!==0?l===Ey?h0++:(h0=0,Ey=l):h0=0,No(),null}function yu(){if(Po!==null){var l=yo(up),u=os.transition,f=Jt;try{if(os.transition=null,Jt=16>l?16:l,Po===null)var y=!1;else{if(l=Po,Po=null,up=0,(rr&6)!==0)throw Error(t(331));var b=rr;for(rr|=4,mt=l.current;mt!==null;){var A=mt,B=A.child;if((mt.flags&16)!==0){var ne=A.deletions;if(ne!==null){for(var le=0;le<ne.length;le++){var ve=ne[le];for(mt=ve;mt!==null;){var Ue=mt;switch(Ue.tag){case 0:case 11:case 15:c0(8,Ue,A)}var We=Ue.child;if(We!==null)We.return=Ue,mt=We;else for(;mt!==null;){Ue=mt;var $e=Ue.sibling,ot=Ue.return;if(oE(Ue),Ue===ve){mt=null;break}if($e!==null){$e.return=ot,mt=$e;break}mt=ot}}}var gt=A.alternate;if(gt!==null){var xt=gt.child;if(xt!==null){gt.child=null;do{var Jr=xt.sibling;xt.sibling=null,xt=Jr}while(xt!==null)}}mt=A}}if((A.subtreeFlags&2064)!==0&&B!==null)B.return=A,mt=B;else e:for(;mt!==null;){if(A=mt,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:c0(9,A,A.return)}var ge=A.sibling;if(ge!==null){ge.return=A.return,mt=ge;break e}mt=A.return}}var de=l.current;for(mt=de;mt!==null;){B=mt;var ye=B.child;if((B.subtreeFlags&2064)!==0&&ye!==null)ye.return=B,mt=ye;else e:for(B=de;mt!==null;){if(ne=mt,(ne.flags&2048)!==0)try{switch(ne.tag){case 0:case 11:case 15:sp(9,ne)}}catch(wt){Gr(ne,ne.return,wt)}if(ne===B){mt=null;break e}var Ye=ne.sibling;if(Ye!==null){Ye.return=ne.return,mt=Ye;break e}mt=ne.return}}if(rr=b,No(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(zn,l)}catch{}y=!0}return y}finally{Jt=f,os.transition=u}}return!1}function EE(l,u,f){u=pu(f,u),u=B_(l,u,1),l=So(l,u,1),u=si(),l!==null&&(go(l,1,u),vi(l,u))}function Gr(l,u,f){if(l.tag===3)EE(l,l,f);else for(;u!==null;){if(u.tag===3){EE(u,l,f);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Io===null||!Io.has(y))){l=pu(f,l),l=U_(u,l,1),u=So(u,l,1),l=si(),u!==null&&(go(u,1,l),vi(u,l));break}}u=u.return}}function QR(l,u,f){var y=l.pingCache;y!==null&&y.delete(u),u=si(),l.pingedLanes|=l.suspendedLanes&f,wn===l&&(Pn&f)===f&&(hn===4||hn===3&&(Pn&130023424)===Pn&&500>Le()-wy?Fl(l,0):by|=f),vi(l,u)}function TE(l,u){u===0&&((l.mode&1)===0?u=1:(u=fo,fo<<=1,(fo&130023424)===0&&(fo=4194304)));var f=si();l=Fa(l,u),l!==null&&(go(l,u,f),vi(l,f))}function JR(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),TE(l,f)}function ZR(l,u){var f=0;switch(l.tag){case 13:var y=l.stateNode,b=l.memoizedState;b!==null&&(f=b.retryLane);break;case 19:y=l.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(u),TE(l,f)}var AE;AE=function(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps||mi.current)xi=!0;else{if((l.lanes&f)===0&&(u.flags&128)===0)return xi=!1,$R(l,u,f);xi=(l.flags&131072)!==0}else xi=!1,Dr&&(u.flags&1048576)!==0&&i_(u,Uf,u.index);switch(u.lanes=0,u.tag){case 2:var y=u.type;np(l,u),l=u.pendingProps;var b=au(u,Hn.current);hu(u,f),b=Jx(null,u,y,l,b,f);var A=Zx();return u.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,gi(y)?(A=!0,Vf(u)):A=!1,u.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Wx(u),b.updater=tp,u.stateNode=b,b._reactInternals=u,sy(u,y,l,f),u=cy(null,u,y,!0,A,f)):(u.tag=0,Dr&&A&&Fx(u),ii(null,u,b,f),u=u.child),u;case 16:y=u.elementType;e:{switch(np(l,u),l=u.pendingProps,b=y._init,y=b(y._payload),u.type=y,b=u.tag=tj(y),l=ks(y,l),b){case 0:u=ly(null,u,y,l,f);break e;case 1:u=Q_(null,u,y,l,f);break e;case 11:u=q_(null,u,y,l,f);break e;case 14:u=G_(null,u,y,ks(y.type,l),f);break e}throw Error(t(306,y,""))}return u;case 0:return y=u.type,b=u.pendingProps,b=u.elementType===y?b:ks(y,b),ly(l,u,y,b,f);case 1:return y=u.type,b=u.pendingProps,b=u.elementType===y?b:ks(y,b),Q_(l,u,y,b,f);case 3:e:{if(J_(u),l===null)throw Error(t(387));y=u.pendingProps,A=u.memoizedState,b=A.element,f_(l,u),Kf(u,y,null,f);var B=u.memoizedState;if(y=B.element,A.isDehydrated)if(A={element:y,isDehydrated:!1,cache:B.cache,pendingSuspenseBoundaries:B.pendingSuspenseBoundaries,transitions:B.transitions},u.updateQueue.baseState=A,u.memoizedState=A,u.flags&256){b=pu(Error(t(423)),u),u=Z_(l,u,y,f,b);break e}else if(y!==b){b=pu(Error(t(424)),u),u=Z_(l,u,y,f,b);break e}else for(Mi=Eo(u.stateNode.containerInfo.firstChild),Li=u,Dr=!0,Ns=null,f=d_(u,null,y,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(cu(),y===b){u=La(l,u,f);break e}ii(l,u,y,f)}u=u.child}return u;case 5:return g_(u),l===null&&Mx(u),y=u.type,b=u.pendingProps,A=l!==null?l.memoizedProps:null,B=b.children,Cx(y,b)?B=null:A!==null&&Cx(y,A)&&(u.flags|=32),X_(l,u),ii(l,u,B,f),u.child;case 6:return l===null&&Mx(u),null;case 13:return eE(l,u,f);case 4:return qx(u,u.stateNode.containerInfo),y=u.pendingProps,l===null?u.child=uu(u,null,y,f):ii(l,u,y,f),u.child;case 11:return y=u.type,b=u.pendingProps,b=u.elementType===y?b:ks(y,b),q_(l,u,y,b,f);case 7:return ii(l,u,u.pendingProps,f),u.child;case 8:return ii(l,u,u.pendingProps.children,f),u.child;case 12:return ii(l,u,u.pendingProps.children,f),u.child;case 10:e:{if(y=u.type._context,b=u.pendingProps,A=u.memoizedProps,B=b.value,Sr(Wf,y._currentValue),y._currentValue=B,A!==null)if(As(A.value,B)){if(A.children===b.children&&!mi.current){u=La(l,u,f);break e}}else for(A=u.child,A!==null&&(A.return=u);A!==null;){var ne=A.dependencies;if(ne!==null){B=A.child;for(var le=ne.firstContext;le!==null;){if(le.context===y){if(A.tag===1){le=Oa(-1,f&-f),le.tag=2;var ve=A.updateQueue;if(ve!==null){ve=ve.shared;var Ue=ve.pending;Ue===null?le.next=le:(le.next=Ue.next,Ue.next=le),ve.pending=le}}A.lanes|=f,le=A.alternate,le!==null&&(le.lanes|=f),zx(A.return,f,u),ne.lanes|=f;break}le=le.next}}else if(A.tag===10)B=A.type===u.type?null:A.child;else if(A.tag===18){if(B=A.return,B===null)throw Error(t(341));B.lanes|=f,ne=B.alternate,ne!==null&&(ne.lanes|=f),zx(B,f,u),B=A.sibling}else B=A.child;if(B!==null)B.return=A;else for(B=A;B!==null;){if(B===u){B=null;break}if(A=B.sibling,A!==null){A.return=B.return,B=A;break}B=B.return}A=B}ii(l,u,b.children,f),u=u.child}return u;case 9:return b=u.type,y=u.pendingProps.children,hu(u,f),b=ss(b),y=y(b),u.flags|=1,ii(l,u,y,f),u.child;case 14:return y=u.type,b=ks(y,u.pendingProps),b=ks(y.type,b),G_(l,u,y,b,f);case 15:return K_(l,u,u.type,u.pendingProps,f);case 17:return y=u.type,b=u.pendingProps,b=u.elementType===y?b:ks(y,b),np(l,u),u.tag=1,gi(y)?(l=!0,Vf(u)):l=!1,hu(u,f),V_(u,y,b),sy(u,y,b,f),cy(null,u,y,!0,l,f);case 19:return rE(l,u,f);case 22:return Y_(l,u,f)}throw Error(t(156,u.tag))};function NE(l,u){return je(l,u)}function ej(l,u,f,y){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(l,u,f,y){return new ej(l,u,f,y)}function Cy(l){return l=l.prototype,!(!l||!l.isReactComponent)}function tj(l){if(typeof l=="function")return Cy(l)?1:0;if(l!=null){if(l=l.$$typeof,l===D)return 11;if(l===Ae)return 14}return 2}function Do(l,u){var f=l.alternate;return f===null?(f=ls(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&14680064,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f}function pp(l,u,f,y,b,A){var B=2;if(y=l,typeof l=="function")Cy(l)&&(B=1);else if(typeof l=="string")B=5;else e:switch(l){case S:return Ll(f.children,b,A,u);case N:B=8,b|=8;break;case I:return l=ls(12,f,u,b|2),l.elementType=I,l.lanes=A,l;case F:return l=ls(13,f,u,b),l.elementType=F,l.lanes=A,l;case he:return l=ls(19,f,u,b),l.elementType=he,l.lanes=A,l;case De:return mp(f,b,A,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case R:B=10;break e;case M:B=9;break e;case D:B=11;break e;case Ae:B=14;break e;case Oe:B=16,y=null;break e}throw Error(t(130,l==null?l:typeof l,""))}return u=ls(B,f,u,b),u.elementType=l,u.type=y,u.lanes=A,u}function Ll(l,u,f,y){return l=ls(7,l,y,u),l.lanes=f,l}function mp(l,u,f,y){return l=ls(22,l,y,u),l.elementType=De,l.lanes=f,l.stateNode={isHidden:!1},l}function Iy(l,u,f){return l=ls(6,l,null,u),l.lanes=f,l}function Py(l,u,f){return u=ls(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function rj(l,u,f,y,b){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mo(0),this.expirationTimes=mo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mo(0),this.identifierPrefix=y,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function Ry(l,u,f,y,b,A,B,ne,le){return l=new rj(l,u,f,ne,le),u===1?(u=1,A===!0&&(u|=8)):u=0,A=ls(3,null,null,u),l.current=A,A.stateNode=l,A.memoizedState={element:y,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wx(A),l}function nj(l,u,f){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:y==null?null:""+y,children:l,containerInfo:u,implementation:f}}function kE(l){if(!l)return Ao;l=l._reactInternals;e:{if(O(l)!==l||l.tag!==1)throw Error(t(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(gi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(t(171))}if(l.tag===1){var f=l.type;if(gi(f))return t_(l,f,u)}return u}function SE(l,u,f,y,b,A,B,ne,le){return l=Ry(f,y,!0,l,b,A,B,ne,le),l.context=kE(null),f=l.current,y=si(),b=Ro(f),A=Oa(y,b),A.callback=u??null,So(f,A,b),l.current.lanes=b,go(l,b,y),vi(l,y),l}function gp(l,u,f,y){var b=u.current,A=si(),B=Ro(b);return f=kE(f),u.context===null?u.context=f:u.pendingContext=f,u=Oa(A,B),u.payload={element:l},y=y===void 0?null:y,y!==null&&(u.callback=y),l=So(b,u,B),l!==null&&(Is(l,b,B,A),Gf(l,b,B)),B}function xp(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function CE(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function jy(l,u){CE(l,u),(l=l.alternate)&&CE(l,u)}function ij(){return null}var IE=typeof reportError=="function"?reportError:function(l){console.error(l)};function Dy(l){this._internalRoot=l}yp.prototype.render=Dy.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(t(409));gp(l,u,null,null)},yp.prototype.unmount=Dy.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;Dl(function(){gp(null,l,null,null)}),u[Pa]=null}};function yp(l){this._internalRoot=l}yp.prototype.unstable_scheduleHydration=function(l){if(l){var u=yf();l={blockedOn:null,target:l,priority:u};for(var f=0;f<Qs.length&&u!==0&&u<Qs[f].priority;f++);Qs.splice(f,0,l),f===0&&wf(l)}};function Fy(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function vp(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function PE(){}function sj(l,u,f,y,b){if(b){if(typeof y=="function"){var A=y;y=function(){var ve=xp(B);A.call(ve)}}var B=SE(u,y,l,0,null,!1,!1,"",PE);return l._reactRootContainer=B,l[Pa]=B.current,Xd(l.nodeType===8?l.parentNode:l),Dl(),B}for(;b=l.lastChild;)l.removeChild(b);if(typeof y=="function"){var ne=y;y=function(){var ve=xp(le);ne.call(ve)}}var le=Ry(l,0,!1,null,null,!1,!1,"",PE);return l._reactRootContainer=le,l[Pa]=le.current,Xd(l.nodeType===8?l.parentNode:l),Dl(function(){gp(u,le,f,y)}),le}function bp(l,u,f,y,b){var A=f._reactRootContainer;if(A){var B=A;if(typeof b=="function"){var ne=b;b=function(){var le=xp(B);ne.call(le)}}gp(u,B,l,b)}else B=sj(f,u,l,b,y);return xp(B)}gf=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var f=po(u.pendingLanes);f!==0&&(xo(u,f|1),vi(u,Le()),(rr&6)===0&&(xu=Le()+500,No()))}break;case 13:Dl(function(){var y=Fa(l,1);if(y!==null){var b=si();Is(y,l,1,b)}}),jy(l,1)}},Uc=function(l){if(l.tag===13){var u=Fa(l,134217728);if(u!==null){var f=si();Is(u,l,134217728,f)}jy(l,134217728)}},xf=function(l){if(l.tag===13){var u=Ro(l),f=Fa(l,u);if(f!==null){var y=si();Is(f,l,u,y)}jy(l,u)}},yf=function(){return Jt},vf=function(l,u){var f=Jt;try{return Jt=l,u()}finally{Jt=f}},pt=function(l,u,f){switch(u){case"input":if(Pe(l,f),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<f.length;u++){var y=f[u];if(y!==l&&y.form===l.form){var b=Lf(y);if(!b)throw Error(t(90));dt(y),Pe(y,b)}}}break;case"textarea":ht(l,f);break;case"select":u=f.value,u!=null&&ue(l,!!f.multiple,u,!1)}},yn=Ny,Pi=Dl;var aj={usingClientEntryPoint:!1,Events:[Zd,iu,Lf,hr,xn,Ny]},f0={findFiberByHostInstance:Nl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oj={bundleType:f0.bundleType,version:f0.version,rendererPackageName:f0.rendererPackageName,rendererConfig:f0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=ce(l),l===null?null:l.stateNode},findFiberByHostInstance:f0.findFiberByHostInstance||ij,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wp.isDisabled&&wp.supportsFiber)try{zn=wp.inject(oj),Vr=wp}catch{}}return bi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aj,bi.createPortal=function(l,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fy(u))throw Error(t(200));return nj(l,u,null,f)},bi.createRoot=function(l,u){if(!Fy(l))throw Error(t(299));var f=!1,y="",b=IE;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(b=u.onRecoverableError)),u=Ry(l,1,!1,null,null,f,!1,y,b),l[Pa]=u.current,Xd(l.nodeType===8?l.parentNode:l),new Dy(u)},bi.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(t(188)):(l=Object.keys(l).join(","),Error(t(268,l)));return l=ce(u),l=l===null?null:l.stateNode,l},bi.flushSync=function(l){return Dl(l)},bi.hydrate=function(l,u,f){if(!vp(u))throw Error(t(200));return bp(null,l,u,!0,f)},bi.hydrateRoot=function(l,u,f){if(!Fy(l))throw Error(t(405));var y=f!=null&&f.hydratedSources||null,b=!1,A="",B=IE;if(f!=null&&(f.unstable_strictMode===!0&&(b=!0),f.identifierPrefix!==void 0&&(A=f.identifierPrefix),f.onRecoverableError!==void 0&&(B=f.onRecoverableError)),u=SE(u,null,l,1,f??null,b,!1,A,B),l[Pa]=u.current,Xd(l),y)for(l=0;l<y.length;l++)f=y[l],b=f._getVersion,b=b(f._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[f,b]:u.mutableSourceEagerHydrationData.push(f,b);return new yp(u)},bi.render=function(l,u,f){if(!vp(u))throw Error(t(200));return bp(null,l,u,!1,f)},bi.unmountComponentAtNode=function(l){if(!vp(l))throw Error(t(40));return l._reactRootContainer?(Dl(function(){bp(null,null,l,!1,function(){l._reactRootContainer=null,l[Pa]=null})}),!0):!1},bi.unstable_batchedUpdates=Ny,bi.unstable_renderSubtreeIntoContainer=function(l,u,f,y){if(!vp(f))throw Error(t(200));if(l==null||l._reactInternals===void 0)throw Error(t(38));return bp(l,u,f,!1,y)},bi.version="18.3.1-next-f1338f8080-20240426",bi}var VE;function mj(){if(VE)return My.exports;VE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),My.exports=pj(),My.exports}var $E;function gj(){if($E)return _p;$E=1;var r=mj();return _p.createRoot=r.createRoot,_p.hydrateRoot=r.hydrateRoot,_p}var xj=gj();const yj=$1(xj);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var BE="popstate";function vj(r={}){function e(n,i){let{pathname:s,search:a,hash:c}=n.location;return Iv("",{pathname:s,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:Z0(i)}return wj(e,t,null,r)}function Lr(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function zs(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bj(){return Math.random().toString(36).substring(2,10)}function UE(r,e){return{usr:r.state,key:r.key,idx:e}}function Iv(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?wd(e):e,state:t,key:e&&e.key||n||bj()}}function Z0({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function wd(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function wj(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,c="POP",d=null,h=p();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function p(){return(a.state||{idx:null}).idx}function m(){c="POP";let E=p(),j=E==null?null:E-h;h=E,d&&d({action:c,location:w.location,delta:j})}function x(E,j){c="PUSH";let P=Iv(w.location,E,j);h=p()+1;let V=UE(P,h),L=w.createHref(P);try{a.pushState(V,"",L)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;i.location.assign(L)}s&&d&&d({action:c,location:w.location,delta:1})}function v(E,j){c="REPLACE";let P=Iv(w.location,E,j);h=p();let V=UE(P,h),L=w.createHref(P);a.replaceState(V,"",L),s&&d&&d({action:c,location:w.location,delta:0})}function _(E){return _j(E)}let w={get action(){return c},get location(){return r(i,a)},listen(E){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(BE,m),d=E,()=>{i.removeEventListener(BE,m),d=null}},createHref(E){return e(i,E)},createURL:_,encodeLocation(E){let j=_(E);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:x,replace:v,go(E){return a.go(E)}};return w}function _j(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Lr(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:Z0(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function hk(r,e,t="/"){return Ej(r,e,t,!1)}function Ej(r,e,t,n){let i=typeof e=="string"?wd(e):e,s=Qa(i.pathname||"/",t);if(s==null)return null;let a=fk(r);Tj(a);let c=null;for(let d=0;c==null&&d<a.length;++d){let h=Fj(s);c=jj(a[d],h,n)}return c}function fk(r,e=[],t=[],n="",i=!1){let s=(a,c,d=i,h)=>{let p={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&d)return;Lr(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let m=Ha([n,p.relativePath]),x=t.concat(p);a.children&&a.children.length>0&&(Lr(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),fk(a.children,e,x,m,d)),!(a.path==null&&!a.index)&&e.push({path:m,score:Pj(m,a.index),routesMeta:x})};return r.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))s(a,c);else for(let d of pk(a.path))s(a,c,!0,d)}),e}function pk(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=pk(n.join("/")),c=[];return c.push(...a.map(d=>d===""?s:[s,d].join("/"))),i&&c.push(...a),c.map(d=>r.startsWith("/")&&d===""?"/":d)}function Tj(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Rj(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var Aj=/^:[\w-]+$/,Nj=3,kj=2,Sj=1,Cj=10,Ij=-2,zE=r=>r==="*";function Pj(r,e){let t=r.split("/"),n=t.length;return t.some(zE)&&(n+=Ij),e&&(n+=kj),t.filter(i=>!zE(i)).reduce((i,s)=>i+(Aj.test(s)?Nj:s===""?Sj:Cj),n)}function Rj(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function jj(r,e,t=!1){let{routesMeta:n}=r,i={},s="/",a=[];for(let c=0;c<n.length;++c){let d=n[c],h=c===n.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=hm({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),x=d.route;if(!m&&h&&t&&!n[n.length-1].route.index&&(m=hm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:Ha([s,m.pathname]),pathnameBase:Vj(Ha([s,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(s=Ha([s,m.pathnameBase]))}return a}function hm(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=Dj(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:m},x)=>{if(p==="*"){let _=c[x]||"";a=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const v=c[x];return m&&!v?h[p]=void 0:h[p]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:r}}function Dj(r,e=!1,t=!0){zs(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,d)=>(n.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Fj(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zs(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Qa(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function Oj(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?wd(r):r;return{pathname:t?t.startsWith("/")?t:Lj(t,e):e,search:$j(n),hash:Bj(i)}}function Lj(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function By(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Mj(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function U1(r){let e=Mj(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function z1(r,e,t,n=!1){let i;typeof r=="string"?i=wd(r):(i={...r},Lr(!i.pathname||!i.pathname.includes("?"),By("?","pathname","search",i)),Lr(!i.pathname||!i.pathname.includes("#"),By("#","pathname","hash",i)),Lr(!i.search||!i.search.includes("#"),By("#","search","hash",i)));let s=r===""||i.pathname==="",a=s?"/":i.pathname,c;if(a==null)c=t;else{let m=e.length-1;if(!n&&a.startsWith("..")){let x=a.split("/");for(;x[0]==="..";)x.shift(),m-=1;i.pathname=x.join("/")}c=m>=0?e[m]:"/"}let d=Oj(i,c),h=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}var Ha=r=>r.join("/").replace(/\/\/+/g,"/"),Vj=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),$j=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Bj=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Uj(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var mk=["POST","PUT","PATCH","DELETE"];new Set(mk);var zj=["GET",...mk];new Set(zj);var _d=k.createContext(null);_d.displayName="DataRouter";var yg=k.createContext(null);yg.displayName="DataRouterState";k.createContext(!1);var gk=k.createContext({isTransitioning:!1});gk.displayName="ViewTransition";var Hj=k.createContext(new Map);Hj.displayName="Fetchers";var Wj=k.createContext(null);Wj.displayName="Await";var qs=k.createContext(null);qs.displayName="Navigation";var jh=k.createContext(null);jh.displayName="Location";var Ea=k.createContext({outlet:null,matches:[],isDataRoute:!1});Ea.displayName="Route";var H1=k.createContext(null);H1.displayName="RouteError";function qj(r,{relative:e}={}){Lr(Ed(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=k.useContext(qs),{hash:i,pathname:s,search:a}=Dh(r,{relative:e}),c=s;return t!=="/"&&(c=s==="/"?t:Ha([t,s])),n.createHref({pathname:c,search:a,hash:i})}function Ed(){return k.useContext(jh)!=null}function fl(){return Lr(Ed(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(jh).location}var xk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yk(r){k.useContext(qs).static||k.useLayoutEffect(r)}function Gs(){let{isDataRoute:r}=k.useContext(Ea);return r?sD():Gj()}function Gj(){Lr(Ed(),"useNavigate() may be used only in the context of a <Router> component.");let r=k.useContext(_d),{basename:e,navigator:t}=k.useContext(qs),{matches:n}=k.useContext(Ea),{pathname:i}=fl(),s=JSON.stringify(U1(n)),a=k.useRef(!1);return yk(()=>{a.current=!0}),k.useCallback((d,h={})=>{if(zs(a.current,xk),!a.current)return;if(typeof d=="number"){t.go(d);return}let p=z1(d,JSON.parse(s),i,h.relative==="path");r==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ha([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,s,i,r])}k.createContext(null);function Dh(r,{relative:e}={}){let{matches:t}=k.useContext(Ea),{pathname:n}=fl(),i=JSON.stringify(U1(t));return k.useMemo(()=>z1(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function Kj(r,e){return vk(r,e)}function vk(r,e,t,n,i){Lr(Ed(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=k.useContext(qs),{matches:a}=k.useContext(Ea),c=a[a.length-1],d=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",m=c&&c.route;{let P=m&&m.path||"";bk(h,!m||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let x=fl(),v;if(e){let P=typeof e=="string"?wd(e):e;Lr(p==="/"||P.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${P.pathname}" was given in the \`location\` prop.`),v=P}else v=x;let _=v.pathname||"/",w=_;if(p!=="/"){let P=p.replace(/^\//,"").split("/");w="/"+_.replace(/^\//,"").split("/").slice(P.length).join("/")}let E=hk(r,{pathname:w});zs(m||E!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),zs(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=Zj(E&&E.map(P=>Object.assign({},P,{params:Object.assign({},d,P.params),pathname:Ha([p,s.encodeLocation?s.encodeLocation(P.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?p:Ha([p,s.encodeLocation?s.encodeLocation(P.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathnameBase])})),a,t,n,i);return e&&j?k.createElement(jh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},j):j}function Yj(){let r=iD(),e=Uj(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",r),a=k.createElement(k.Fragment,null,k.createElement("p",null,"💿 Hey developer 👋"),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:s},"ErrorBoundary")," or"," ",k.createElement("code",{style:s},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:i},t):null,a)}var Xj=k.createElement(Yj,null),Qj=class extends k.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?k.createElement(Ea.Provider,{value:this.props.routeContext},k.createElement(H1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Jj({routeContext:r,match:e,children:t}){let n=k.useContext(_d);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Ea.Provider,{value:r},t)}function Zj(r,e=[],t=null,n=null,i=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let s=r,a=t?.errors;if(a!=null){let h=s.findIndex(p=>p.route.id&&a?.[p.route.id]!==void 0);Lr(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let c=!1,d=-1;if(t)for(let h=0;h<s.length;h++){let p=s[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:m,errors:x}=t,v=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||v){c=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((h,p,m)=>{let x,v=!1,_=null,w=null;t&&(x=a&&p.route.id?a[p.route.id]:void 0,_=p.route.errorElement||Xj,c&&(d<0&&m===0?(bk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,w=null):d===m&&(v=!0,w=p.route.hydrateFallbackElement||null)));let E=e.concat(s.slice(0,m+1)),j=()=>{let P;return x?P=_:v?P=w:p.route.Component?P=k.createElement(p.route.Component,null):p.route.element?P=p.route.element:P=h,k.createElement(Jj,{match:p,routeContext:{outlet:h,matches:E,isDataRoute:t!=null},children:P})};return t&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?k.createElement(Qj,{location:t.location,revalidation:t.revalidation,component:_,error:x,children:j(),routeContext:{outlet:null,matches:E,isDataRoute:!0},unstable_onError:n}):j()},null)}function W1(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eD(r){let e=k.useContext(_d);return Lr(e,W1(r)),e}function tD(r){let e=k.useContext(yg);return Lr(e,W1(r)),e}function rD(r){let e=k.useContext(Ea);return Lr(e,W1(r)),e}function q1(r){let e=rD(r),t=e.matches[e.matches.length-1];return Lr(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function nD(){return q1("useRouteId")}function iD(){let r=k.useContext(H1),e=tD("useRouteError"),t=q1("useRouteError");return r!==void 0?r:e.errors?.[t]}function sD(){let{router:r}=eD("useNavigate"),e=q1("useNavigate"),t=k.useRef(!1);return yk(()=>{t.current=!0}),k.useCallback(async(i,s={})=>{zs(t.current,xk),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...s}))},[r,e])}var HE={};function bk(r,e,t){!e&&!HE[r]&&(HE[r]=!0,zs(!1,t))}k.memo(aD);function aD({routes:r,future:e,state:t,unstable_onError:n}){return vk(r,void 0,t,n,e)}function Fh({to:r,replace:e,state:t,relative:n}){Lr(Ed(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=k.useContext(qs);zs(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=k.useContext(Ea),{pathname:a}=fl(),c=Gs(),d=z1(r,U1(s),a,n==="path"),h=JSON.stringify(d);return k.useEffect(()=>{c(JSON.parse(h),{replace:e,state:t,relative:n})},[c,h,n,e,t]),null}function js(r){Lr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function oD({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:s=!1}){Lr(!Ed(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=r.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof t=="string"&&(t=wd(t));let{pathname:d="/",search:h="",hash:p="",state:m=null,key:x="default"}=t,v=k.useMemo(()=>{let _=Qa(d,a);return _==null?null:{location:{pathname:_,search:h,hash:p,state:m,key:x},navigationType:n}},[a,d,h,p,m,x,n]);return zs(v!=null,`<Router basename="${a}"> is not able to match the URL "${d}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:k.createElement(qs.Provider,{value:c},k.createElement(jh.Provider,{children:e,value:v}))}function lD({children:r,location:e}){return Kj(Pv(r),e)}function Pv(r,e=[]){let t=[];return k.Children.forEach(r,(n,i)=>{if(!k.isValidElement(n))return;let s=[...e,i];if(n.type===k.Fragment){t.push.apply(t,Pv(n.props.children,s));return}Lr(n.type===js,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Lr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Pv(n.props.children,s)),t.push(a)}),t}var Wp="get",qp="application/x-www-form-urlencoded";function vg(r){return r!=null&&typeof r.tagName=="string"}function cD(r){return vg(r)&&r.tagName.toLowerCase()==="button"}function uD(r){return vg(r)&&r.tagName.toLowerCase()==="form"}function dD(r){return vg(r)&&r.tagName.toLowerCase()==="input"}function hD(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function fD(r,e){return r.button===0&&(!e||e==="_self")&&!hD(r)}var Ep=null;function pD(){if(Ep===null)try{new FormData(document.createElement("form"),0),Ep=!1}catch{Ep=!0}return Ep}var mD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Uy(r){return r!=null&&!mD.has(r)?(zs(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qp}"`),null):r}function gD(r,e){let t,n,i,s,a;if(uD(r)){let c=r.getAttribute("action");n=c?Qa(c,e):null,t=r.getAttribute("method")||Wp,i=Uy(r.getAttribute("enctype"))||qp,s=new FormData(r)}else if(cD(r)||dD(r)&&(r.type==="submit"||r.type==="image")){let c=r.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||c.getAttribute("action");if(n=d?Qa(d,e):null,t=r.getAttribute("formmethod")||c.getAttribute("method")||Wp,i=Uy(r.getAttribute("formenctype"))||Uy(c.getAttribute("enctype"))||qp,s=new FormData(c,r),!pD()){let{name:h,type:p,value:m}=r;if(p==="image"){let x=h?`${h}.`:"";s.append(`${x}x`,"0"),s.append(`${x}y`,"0")}else h&&s.append(h,m)}}else{if(vg(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Wp,n=null,i=qp,a=r}return s&&i==="text/plain"&&(a=s,s=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function G1(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function xD(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&Qa(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function yD(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vD(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function bD(r,e,t){let n=await Promise.all(r.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await yD(s,t);return a.links?a.links():[]}return[]}));return TD(n.flat(1).filter(vD).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function WE(r,e,t,n,i,s){let a=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,c=(d,h)=>t[h].pathname!==d.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==d.params["*"];return s==="assets"?e.filter((d,h)=>a(d,h)||c(d,h)):s==="data"?e.filter((d,h)=>{let p=n.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(a(d,h)||c(d,h))return!0;if(d.route.shouldRevalidate){let m=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function wD(r,e,{includeHydrateFallback:t}={}){return _D(r.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function _D(r){return[...new Set(r)]}function ED(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function TD(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let s=JSON.stringify(ED(i));return t.has(s)||(t.add(s),n.push({key:s,link:i})),n},[])}function wk(){let r=k.useContext(_d);return G1(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function AD(){let r=k.useContext(yg);return G1(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var K1=k.createContext(void 0);K1.displayName="FrameworkContext";function _k(){let r=k.useContext(K1);return G1(r,"You must render this element inside a <HydratedRouter> element"),r}function ND(r,e){let t=k.useContext(K1),[n,i]=k.useState(!1),[s,a]=k.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=e,x=k.useRef(null);k.useEffect(()=>{if(r==="render"&&a(!0),r==="viewport"){let w=j=>{j.forEach(P=>{a(P.isIntersecting)})},E=new IntersectionObserver(w,{threshold:.5});return x.current&&E.observe(x.current),()=>{E.disconnect()}}},[r]),k.useEffect(()=>{if(n){let w=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(w)}}},[n]);let v=()=>{i(!0)},_=()=>{i(!1),a(!1)};return t?r!=="intent"?[s,x,{}]:[s,x,{onFocus:m0(c,v),onBlur:m0(d,_),onMouseEnter:m0(h,v),onMouseLeave:m0(p,_),onTouchStart:m0(m,v)}]:[!1,x,{}]}function m0(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function kD({page:r,...e}){let{router:t}=wk(),n=k.useMemo(()=>hk(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?k.createElement(CD,{page:r,matches:n,...e}):null}function SD(r){let{manifest:e,routeModules:t}=_k(),[n,i]=k.useState([]);return k.useEffect(()=>{let s=!1;return bD(r,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[r,e,t]),n}function CD({page:r,matches:e,...t}){let n=fl(),{manifest:i,routeModules:s}=_k(),{basename:a}=wk(),{loaderData:c,matches:d}=AD(),h=k.useMemo(()=>WE(r,e,d,i,n,"data"),[r,e,d,i,n]),p=k.useMemo(()=>WE(r,e,d,i,n,"assets"),[r,e,d,i,n]),m=k.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let _=new Set,w=!1;if(e.forEach(j=>{let P=i.routes[j.route.id];!P||!P.hasLoader||(!h.some(V=>V.route.id===j.route.id)&&j.route.id in c&&s[j.route.id]?.shouldRevalidate||P.hasClientLoader?w=!0:_.add(j.route.id))}),_.size===0)return[];let E=xD(r,a,"data");return w&&_.size>0&&E.searchParams.set("_routes",e.filter(j=>_.has(j.route.id)).map(j=>j.route.id).join(",")),[E.pathname+E.search]},[a,c,n,i,h,e,r,s]),x=k.useMemo(()=>wD(p,i),[p,i]),v=SD(p);return k.createElement(k.Fragment,null,m.map(_=>k.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...t})),x.map(_=>k.createElement("link",{key:_,rel:"modulepreload",href:_,...t})),v.map(({key:_,link:w})=>k.createElement("link",{key:_,nonce:t.nonce,...w})))}function ID(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Ek=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ek&&(window.__reactRouterVersion="7.9.4")}catch{}function PD({basename:r,children:e,window:t}){let n=k.useRef();n.current==null&&(n.current=vj({window:t,v5Compat:!0}));let i=n.current,[s,a]=k.useState({action:i.action,location:i.location}),c=k.useCallback(d=>{k.startTransition(()=>a(d))},[a]);return k.useLayoutEffect(()=>i.listen(c),[i,c]),k.createElement(oD,{basename:r,children:e,location:s.location,navigationType:s.action,navigator:i})}var Tk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wi=k.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:s,replace:a,state:c,target:d,to:h,preventScrollReset:p,viewTransition:m,...x},v){let{basename:_}=k.useContext(qs),w=typeof h=="string"&&Tk.test(h),E,j=!1;if(typeof h=="string"&&w&&(E=h,Ek))try{let I=new URL(window.location.href),R=h.startsWith("//")?new URL(I.protocol+h):new URL(h),M=Qa(R.pathname,_);R.origin===I.origin&&M!=null?h=M+R.search+R.hash:j=!0}catch{zs(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=qj(h,{relative:i}),[V,L,K]=ND(n,x),H=FD(h,{replace:a,state:c,target:d,preventScrollReset:p,relative:i,viewTransition:m});function S(I){e&&e(I),I.defaultPrevented||H(I)}let N=k.createElement("a",{...x,...K,href:E||P,onClick:j||s?e:S,ref:ID(v,L),target:d,"data-discover":!w&&t==="render"?"true":void 0});return V&&!w?k.createElement(k.Fragment,null,N,k.createElement(kD,{page:P})):N});wi.displayName="Link";var RD=k.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:s,to:a,viewTransition:c,children:d,...h},p){let m=Dh(a,{relative:h.relative}),x=fl(),v=k.useContext(yg),{navigator:_,basename:w}=k.useContext(qs),E=v!=null&&$D(m)&&c===!0,j=_.encodeLocation?_.encodeLocation(m).pathname:m.pathname,P=x.pathname,V=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(P=P.toLowerCase(),V=V?V.toLowerCase():null,j=j.toLowerCase()),V&&w&&(V=Qa(V,w)||V);const L=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let K=P===j||!i&&P.startsWith(j)&&P.charAt(L)==="/",H=V!=null&&(V===j||!i&&V.startsWith(j)&&V.charAt(j.length)==="/"),S={isActive:K,isPending:H,isTransitioning:E},N=K?e:void 0,I;typeof n=="function"?I=n(S):I=[n,K?"active":null,H?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let R=typeof s=="function"?s(S):s;return k.createElement(wi,{...h,"aria-current":N,className:I,ref:p,style:R,to:a,viewTransition:c},typeof d=="function"?d(S):d)});RD.displayName="NavLink";var jD=k.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:s,method:a=Wp,action:c,onSubmit:d,relative:h,preventScrollReset:p,viewTransition:m,...x},v)=>{let _=MD(),w=VD(c,{relative:h}),E=a.toLowerCase()==="get"?"get":"post",j=typeof c=="string"&&Tk.test(c),P=V=>{if(d&&d(V),V.defaultPrevented)return;V.preventDefault();let L=V.nativeEvent.submitter,K=L?.getAttribute("formmethod")||a;_(L||V.currentTarget,{fetcherKey:e,method:K,navigate:t,replace:i,state:s,relative:h,preventScrollReset:p,viewTransition:m})};return k.createElement("form",{ref:v,method:E,action:w,onSubmit:n?d:P,...x,"data-discover":!j&&r==="render"?"true":void 0})});jD.displayName="Form";function DD(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ak(r){let e=k.useContext(_d);return Lr(e,DD(r)),e}function FD(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:s,viewTransition:a}={}){let c=Gs(),d=fl(),h=Dh(r,{relative:s});return k.useCallback(p=>{if(fD(p,e)){p.preventDefault();let m=t!==void 0?t:Z0(d)===Z0(h);c(r,{replace:m,state:n,preventScrollReset:i,relative:s,viewTransition:a})}},[d,c,h,t,n,e,r,i,s,a])}var OD=0,LD=()=>`__${String(++OD)}__`;function MD(){let{router:r}=Ak("useSubmit"),{basename:e}=k.useContext(qs),t=nD();return k.useCallback(async(n,i={})=>{let{action:s,method:a,encType:c,formData:d,body:h}=gD(n,e);if(i.navigate===!1){let p=i.fetcherKey||LD();await r.fetch(p,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:d,body:h,formMethod:i.method||a,formEncType:i.encType||c,flushSync:i.flushSync})}else await r.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:d,body:h,formMethod:i.method||a,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function VD(r,{relative:e}={}){let{basename:t}=k.useContext(qs),n=k.useContext(Ea);Lr(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...Dh(r||".",{relative:e})},a=fl();if(r==null){s.search=a.search;let c=new URLSearchParams(s.search),d=c.getAll("index");if(d.some(p=>p==="")){c.delete("index"),d.filter(m=>m).forEach(m=>c.append("index",m));let p=c.toString();s.search=p?`?${p}`:""}}return(!r||r===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Ha([t,s.pathname])),Z0(s)}function $D(r,{relative:e}={}){let t=k.useContext(gk);Lr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Ak("useViewTransitionState"),i=Dh(r,{relative:e});if(!t.isTransitioning)return!1;let s=Qa(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=Qa(t.nextLocation.pathname,n)||t.nextLocation.pathname;return hm(i.pathname,a)!=null||hm(i.pathname,s)!=null}const BD=()=>{};var qE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},UD=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=r[t++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=r[t++],a=r[t++],c=r[t++],d=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const s=r[t++],a=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},kk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const s=r[i],a=i+1<r.length,c=a?r[i+1]:0,d=i+2<r.length,h=d?r[i+2]:0,p=s>>2,m=(s&3)<<4|c>>4;let x=(c&15)<<2|h>>6,v=h&63;d||(v=64,a||(x=64)),n.push(t[p],t[m],t[x],t[v])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Nk(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):UD(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const s=t[r.charAt(i++)],c=i<r.length?t[r.charAt(i)]:0;++i;const h=i<r.length?t[r.charAt(i)]:64;++i;const m=i<r.length?t[r.charAt(i)]:64;if(++i,s==null||c==null||h==null||m==null)throw new zD;const x=s<<2|c>>4;if(n.push(x),h!==64){const v=c<<4&240|h>>2;if(n.push(v),m!==64){const _=h<<6&192|m;n.push(_)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class zD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HD=function(r){const e=Nk(r);return kk.encodeByteArray(e,!0)},fm=function(r){return HD(r).replace(/\./g,"")},Sk=function(r){try{return kk.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=()=>WD().__FIREBASE_DEFAULTS__,GD=()=>{if(typeof process>"u"||typeof qE>"u")return;const r=qE.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},KD=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Sk(r[1]);return e&&JSON.parse(e)},bg=()=>{try{return BD()||qD()||GD()||KD()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Ck=r=>{var e,t;return(t=(e=bg())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},YD=r=>{const e=Ck(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},Ik=()=>{var r;return(r=bg())===null||r===void 0?void 0:r.config},Pk=r=>{var e;return(e=bg())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,s=r.sub||r.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},r);return[fm(JSON.stringify(t)),fm(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function ZD(){var r;const e=(r=bg())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function e8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Rk(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function t8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function r8(){const r=mn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function jk(){return!ZD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y1(){try{return typeof indexedDB=="object"}catch{return!1}}function Dk(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function n8(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8="FirebaseError";class ys extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=i8,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tc.prototype.create)}}class Tc{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?s8(s,n):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new ys(i,c,n)}}function s8(r,e){return r.replace(a8,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const a8=/\{\$([^}]+)}/g;function o8(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function rl(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const s=r[i],a=e[i];if(GE(s)&&GE(a)){if(!rl(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function GE(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function E0(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function T0(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function l8(r,e){const t=new c8(r,e);return t.subscribe.bind(t)}class c8{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");u8(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=zy),i.error===void 0&&(i.error=zy),i.complete===void 0&&(i.complete=zy);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function u8(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function zy(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8=1e3,h8=2,f8=14400*1e3,p8=.5;function KE(r,e=d8,t=h8){const n=e*Math.pow(t,r),i=Math.round(p8*n*(Math.random()-.5)*2);return Math.min(f8,n+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(r){return r&&r._delegate?r._delegate:r}class xs{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new XD;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(x8(e))try{this.getOrInitializeService({instanceIdentifier:$l})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=$l){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$l){return this.instances.has(e)}getOptions(e=$l){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);n===c&&a.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),s=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:g8(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=$l){return this.component?this.component.multipleInstances?e:$l:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function g8(r){return r===$l?void 0:r}function x8(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new m8(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Yt||(Yt={}));const v8={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},b8=Yt.INFO,w8={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},_8=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=w8[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wg{constructor(e){this.name=e,this._logLevel=b8,this._logHandler=_8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?v8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...e),this._logHandler(this,Yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...e),this._logHandler(this,Yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...e),this._logHandler(this,Yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...e),this._logHandler(this,Yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...e),this._logHandler(this,Yt.ERROR,...e)}}const E8=(r,e)=>e.some(t=>r instanceof t);let YE,XE;function T8(){return YE||(YE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function A8(){return XE||(XE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fk=new WeakMap,Rv=new WeakMap,Ok=new WeakMap,Hy=new WeakMap,X1=new WeakMap;function N8(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",s),r.removeEventListener("error",a)},s=()=>{t(Xo(r.result)),i()},a=()=>{n(r.error),i()};r.addEventListener("success",s),r.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Fk.set(t,r)}).catch(()=>{}),X1.set(e,r),e}function k8(r){if(Rv.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",s),r.removeEventListener("error",a),r.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",s),r.addEventListener("error",a),r.addEventListener("abort",a)});Rv.set(r,e)}let jv={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Rv.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Ok.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xo(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function S8(r){jv=r(jv)}function C8(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Wy(this),e,...t);return Ok.set(n,e.sort?e.sort():[e]),Xo(n)}:A8().includes(r)?function(...e){return r.apply(Wy(this),e),Xo(Fk.get(this))}:function(...e){return Xo(r.apply(Wy(this),e))}}function I8(r){return typeof r=="function"?C8(r):(r instanceof IDBTransaction&&k8(r),E8(r,T8())?new Proxy(r,jv):r)}function Xo(r){if(r instanceof IDBRequest)return N8(r);if(Hy.has(r))return Hy.get(r);const e=I8(r);return e!==r&&(Hy.set(r,e),X1.set(e,r)),e}const Wy=r=>X1.get(r);function Lk(r,e,{blocked:t,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(r,e),c=Xo(a);return n&&a.addEventListener("upgradeneeded",d=>{n(Xo(a.result),d.oldVersion,d.newVersion,Xo(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const P8=["get","getKey","getAll","getAllKeys","count"],R8=["put","add","delete","clear"],qy=new Map;function QE(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(qy.get(e))return qy.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=R8.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||P8.includes(t)))return;const s=async function(a,...c){const d=this.transaction(a,i?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),i&&d.done]))[0]};return qy.set(e,s),s}S8(r=>({...r,get:(e,t,n)=>QE(e,t)||r.get(e,t,n),has:(e,t)=>!!QE(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(D8(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function D8(r){const e=r.getComponent();return e?.type==="VERSION"}const Dv="@firebase/app",JE="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=new wg("@firebase/app"),F8="@firebase/app-compat",O8="@firebase/analytics-compat",L8="@firebase/analytics",M8="@firebase/app-check-compat",V8="@firebase/app-check",$8="@firebase/auth",B8="@firebase/auth-compat",U8="@firebase/database",z8="@firebase/data-connect",H8="@firebase/database-compat",W8="@firebase/functions",q8="@firebase/functions-compat",G8="@firebase/installations",K8="@firebase/installations-compat",Y8="@firebase/messaging",X8="@firebase/messaging-compat",Q8="@firebase/performance",J8="@firebase/performance-compat",Z8="@firebase/remote-config",e9="@firebase/remote-config-compat",t9="@firebase/storage",r9="@firebase/storage-compat",n9="@firebase/firestore",i9="@firebase/vertexai",s9="@firebase/firestore-compat",a9="firebase",o9="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="[DEFAULT]",l9={[Dv]:"fire-core",[F8]:"fire-core-compat",[L8]:"fire-analytics",[O8]:"fire-analytics-compat",[V8]:"fire-app-check",[M8]:"fire-app-check-compat",[$8]:"fire-auth",[B8]:"fire-auth-compat",[U8]:"fire-rtdb",[z8]:"fire-data-connect",[H8]:"fire-rtdb-compat",[W8]:"fire-fn",[q8]:"fire-fn-compat",[G8]:"fire-iid",[K8]:"fire-iid-compat",[Y8]:"fire-fcm",[X8]:"fire-fcm-compat",[Q8]:"fire-perf",[J8]:"fire-perf-compat",[Z8]:"fire-rc",[e9]:"fire-rc-compat",[t9]:"fire-gcs",[r9]:"fire-gcs-compat",[n9]:"fire-fst",[s9]:"fire-fst-compat",[i9]:"fire-vertex","fire-js":"fire-js",[a9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm=new Map,c9=new Map,Ov=new Map;function ZE(r,e){try{r.container.addComponent(e)}catch(t){Ja.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Hs(r){const e=r.name;if(Ov.has(e))return Ja.debug(`There were multiple attempts to register component ${e}.`),!1;Ov.set(e,r);for(const t of pm.values())ZE(t,r);for(const t of c9.values())ZE(t,r);return!0}function pl(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Wi(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qo=new Tc("app","Firebase",u9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=o9;function Mk(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Fv,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Qo.create("bad-app-name",{appName:String(i)});if(t||(t=Ik()),!t)throw Qo.create("no-options");const s=pm.get(i);if(s){if(rl(t,s.options)&&rl(n,s.config))return s;throw Qo.create("duplicate-app",{appName:i})}const a=new y8(i);for(const d of Ov.values())a.addComponent(d);const c=new d9(t,n,a);return pm.set(i,c),c}function Q1(r=Fv){const e=pm.get(r);if(!e&&r===Fv&&Ik())return Mk();if(!e)throw Qo.create("no-app",{appName:r});return e}function Ti(r,e,t){var n;let i=(n=l9[r])!==null&&n!==void 0?n:r;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ja.warn(c.join(" "));return}Hs(new xs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9="firebase-heartbeat-database",f9=1,eh="firebase-heartbeat-store";let Gy=null;function Vk(){return Gy||(Gy=Lk(h9,f9,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(eh)}catch(t){console.warn(t)}}}}).catch(r=>{throw Qo.create("idb-open",{originalErrorMessage:r.message})})),Gy}async function p9(r){try{const t=(await Vk()).transaction(eh),n=await t.objectStore(eh).get($k(r));return await t.done,n}catch(e){if(e instanceof ys)Ja.warn(e.message);else{const t=Qo.create("idb-get",{originalErrorMessage:e?.message});Ja.warn(t.message)}}}async function e4(r,e){try{const n=(await Vk()).transaction(eh,"readwrite");await n.objectStore(eh).put(e,$k(r)),await n.done}catch(t){if(t instanceof ys)Ja.warn(t.message);else{const n=Qo.create("idb-set",{originalErrorMessage:t?.message});Ja.warn(n.message)}}}function $k(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=1024,g9=30;class x9{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new v9(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=t4();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>g9){const a=b9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Ja.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=t4(),{heartbeatsToSend:n,unsentEntries:i}=y9(this._heartbeatsCache.heartbeats),s=fm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Ja.warn(t),""}}}function t4(){return new Date().toISOString().substring(0,10)}function y9(r,e=m9){const t=[];let n=r.slice();for(const i of r){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),r4(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),r4(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class v9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Y1()?Dk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await p9(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return e4(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return e4(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function r4(r){return fm(JSON.stringify({version:2,heartbeats:r})).length}function b9(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(r){Hs(new xs("platform-logger",e=>new j8(e),"PRIVATE")),Hs(new xs("heartbeat",e=>new x9(e),"PRIVATE")),Ti(Dv,JE,r),Ti(Dv,JE,"esm2017"),Ti("fire-js","")}w9("");function J1(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function Bk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _9=Bk,Uk=new Tc("auth","Firebase",Bk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=new wg("@firebase/auth");function E9(r,...e){mm.logLevel<=Yt.WARN&&mm.warn(`Auth (${Ac}): ${r}`,...e)}function Gp(r,...e){mm.logLevel<=Yt.ERROR&&mm.error(`Auth (${Ac}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(r,...e){throw Z1(r,...e)}function ua(r,...e){return Z1(r,...e)}function zk(r,e,t){const n=Object.assign(Object.assign({},_9()),{[e]:t});return new Tc("auth","Firebase",n).create(e,{appName:r.name})}function Wa(r){return zk(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Z1(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return Uk.create(r,...e)}function Pt(r,e,...t){if(!r)throw Z1(e,...t)}function $a(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Gp(e),new Error(e)}function Za(r,e){r||$a(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function T9(){return n4()==="http:"||n4()==="https:"}function n4(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(T9()||Rk()||"connection"in navigator)?navigator.onLine:!0}function N9(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Za(t>e,"Short delay should be less than long delay!"),this.isMobile=JD()||t8()}get(){return A9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(r,e){Za(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$a("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$a("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$a("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],C9=new Lh(3e4,6e4);function ao(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Ks(r,e,t,n,i={}){return Wk(r,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const c=Oh(Object.assign({key:r.config.apiKey},a)).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const h=Object.assign({method:e,headers:d},s);return e8()||(h.referrerPolicy="no-referrer"),Hk.fetch()(await qk(r,r.config.apiHost,t,c),h)})}async function Wk(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},k9),e);try{const i=new P9(r),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Tp(r,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tp(r,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw Tp(r,"email-already-in-use",a);if(d==="USER_DISABLED")throw Tp(r,"user-disabled",a);const p=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw zk(r,p,h);Ws(r,p)}}catch(i){if(i instanceof ys)throw i;Ws(r,"network-request-failed",{message:String(i)})}}async function Mh(r,e,t,n,i={}){const s=await Ks(r,e,t,n,i);return"mfaPendingCredential"in s&&Ws(r,"multi-factor-auth-required",{_serverResponse:s}),s}async function qk(r,e,t,n){const i=`${e}${t}?${n}`,s=r,a=s.config.emulator?eb(r.config,i):`${r.config.apiScheme}://${i}`;return S9.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function I9(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class P9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(ua(this.auth,"network-request-failed")),C9.get())})}}function Tp(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=ua(r,e,n);return i.customData._tokenResponse=t,i}function i4(r){return r!==void 0&&r.enterprise!==void 0}class R9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return I9(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function j9(r,e){return Ks(r,"GET","/v2/recaptchaConfig",ao(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D9(r,e){return Ks(r,"POST","/v1/accounts:delete",e)}async function gm(r,e){return Ks(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function F9(r,e=!1){const t=Nr(r),n=await t.getIdToken(e),i=tb(n);Pt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:n,authTime:j0(Ky(i.auth_time)),issuedAtTime:j0(Ky(i.iat)),expirationTime:j0(Ky(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Ky(r){return Number(r)*1e3}function tb(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Gp("JWT malformed, contained fewer than 3 sections"),null;try{const i=Sk(t);return i?JSON.parse(i):(Gp("Failed to decode base64 JWT payload"),null)}catch(i){return Gp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function s4(r){const e=tb(r);return Pt(e,"internal-error"),Pt(typeof e.exp<"u","internal-error"),Pt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ic(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof ys&&O9(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function O9({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=j0(this.lastLoginAt),this.creationTime=j0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xm(r){var e;const t=r.auth,n=await r.getIdToken(),i=await ic(r,gm(t,{idToken:n}));Pt(i?.users.length,t,"internal-error");const s=i.users[0];r._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Gk(s.providerUserInfo):[],c=V9(r.providerData,a),d=r.isAnonymous,h=!(r.email&&s.passwordHash)&&!c?.length,p=d?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Mv(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(r,m)}async function M9(r){const e=Nr(r);await xm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function V9(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function Gk(r){return r.map(e=>{var{providerId:t}=e,n=J1(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $9(r,e){const t=await Wk(r,{},async()=>{const n=Oh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=r.config,a=await qk(r,i,"/v1/token",`key=${s}`),c=await r._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Hk.fetch()(a,{method:"POST",headers:c,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function B9(r,e){return Ks(r,"POST","/v2/accounts:revokeToken",ao(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pt(e.idToken,"internal-error"),Pt(typeof e.idToken<"u","internal-error"),Pt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):s4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pt(e.length!==0,"internal-error");const t=s4(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await $9(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,a=new zu;return n&&(Pt(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(Pt(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Pt(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zu,this.toJSON())}_performRefresh(){return $a("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(r,e){Pt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ls{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,s=J1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new L9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Mv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ic(this,this.stsTokenManager.getToken(this.auth,e));return Pt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return F9(this,e)}reload(){return M9(this)}_assign(e){this!==e&&(Pt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ls(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await xm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wi(this.auth.app))return Promise.reject(Wa(this.auth));const e=await this.getIdToken();return await ic(this,D9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,s,a,c,d,h,p;const m=(n=t.displayName)!==null&&n!==void 0?n:void 0,x=(i=t.email)!==null&&i!==void 0?i:void 0,v=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,_=(a=t.photoURL)!==null&&a!==void 0?a:void 0,w=(c=t.tenantId)!==null&&c!==void 0?c:void 0,E=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,j=(h=t.createdAt)!==null&&h!==void 0?h:void 0,P=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:V,emailVerified:L,isAnonymous:K,providerData:H,stsTokenManager:S}=t;Pt(V&&S,e,"internal-error");const N=zu.fromJSON(this.name,S);Pt(typeof V=="string",e,"internal-error"),Oo(m,e.name),Oo(x,e.name),Pt(typeof L=="boolean",e,"internal-error"),Pt(typeof K=="boolean",e,"internal-error"),Oo(v,e.name),Oo(_,e.name),Oo(w,e.name),Oo(E,e.name),Oo(j,e.name),Oo(P,e.name);const I=new Ls({uid:V,auth:e,email:x,emailVerified:L,displayName:m,isAnonymous:K,photoURL:_,phoneNumber:v,tenantId:w,stsTokenManager:N,createdAt:j,lastLoginAt:P});return H&&Array.isArray(H)&&(I.providerData=H.map(R=>Object.assign({},R))),E&&(I._redirectEventId=E),I}static async _fromIdTokenResponse(e,t,n=!1){const i=new zu;i.updateFromServerResponse(t);const s=new Ls({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await xm(s),s}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];Pt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Gk(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,c=new zu;c.updateFromIdToken(n);const d=new Ls({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Mv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4=new Map;function Ba(r){Za(r instanceof Function,"Expected a class definition");let e=a4.get(r);return e?(Za(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,a4.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Kk.type="NONE";const o4=Kk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(r,e,t){return`firebase:${r}:${e}:${t}`}class Hu{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=Kp(this.userKey,i.apiKey,s),this.fullPersistenceKey=Kp("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await gm(this.auth,{idToken:e}).catch(()=>{});return t?Ls._fromGetAccountInfoResponse(this.auth,t,e):null}return Ls._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Hu(Ba(o4),e,n);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Ba(o4);const a=Kp(n,e.config.apiKey,e.name);let c=null;for(const h of t)try{const p=await h._get(a);if(p){let m;if(typeof p=="string"){const x=await gm(e,{idToken:p}).catch(()=>{});if(!x)break;m=await Ls._fromGetAccountInfoResponse(e,x,p)}else m=Ls._fromJSON(e,p);h!==s&&(c=m),s=h;break}}catch{}const d=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new Hu(s,e,n):(s=d[0],c&&await s._set(a,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Hu(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Jk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Yk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(e3(e))return"Blackberry";if(t3(e))return"Webos";if(Xk(e))return"Safari";if((e.includes("chrome/")||Qk(e))&&!e.includes("edge/"))return"Chrome";if(Zk(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if(n?.length===2)return n[1]}return"Other"}function Yk(r=mn()){return/firefox\//i.test(r)}function Xk(r=mn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qk(r=mn()){return/crios\//i.test(r)}function Jk(r=mn()){return/iemobile/i.test(r)}function Zk(r=mn()){return/android/i.test(r)}function e3(r=mn()){return/blackberry/i.test(r)}function t3(r=mn()){return/webos/i.test(r)}function rb(r=mn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function U9(r=mn()){var e;return rb(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function z9(){return r8()&&document.documentMode===10}function r3(r=mn()){return rb(r)||Zk(r)||t3(r)||e3(r)||/windows phone/i.test(r)||Jk(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(r,e=[]){let t;switch(r){case"Browser":t=l4(mn());break;case"Worker":t=`${l4(mn())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ac}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=s=>new Promise((a,c)=>{try{const d=e(s);a(d)}catch(d){c(d)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W9(r,e={}){return Ks(r,"GET","/v2/passwordPolicy",ao(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9=6;class G9{constructor(e){var t,n,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:q9,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,s,a,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsUppercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(a=d.containsNumericCharacter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c4(this),this.idTokenSubscription=new c4(this),this.beforeStateQueue=new H9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Uk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ba(t)),this._initializationPromise=this.queue(async()=>{var n,i,s;if(!this._deleted&&(this.persistenceManager=await Hu.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await gm(this,{idToken:e}),n=await Ls._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Wi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===c)&&d?.user&&(i=d.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=N9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wi(this.app))return Promise.reject(Wa(this));const t=e?Nr(e):null;return t&&Pt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wi(this.app)?Promise.reject(Wa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wi(this.app)?Promise.reject(Wa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ba(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W9(this),t=new G9(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tc("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await B9(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ba(e)||this._popupRedirectResolver;Pt(t,this,"argument-error"),this.redirectPersistenceManager=await Hu.create(this,[Ba(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pt(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,i);return()=>{a=!0,d()}}else{const d=e.addObserver(t);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=n3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Wi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&E9(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ml(r){return Nr(r)}class c4{constructor(e){this.auth=e,this.observer=null,this.addObserver=l8(t=>this.observer=t)}get next(){return Pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _g={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Y9(r){_g=r}function i3(r){return _g.loadJS(r)}function X9(){return _g.recaptchaEnterpriseScript}function Q9(){return _g.gapiScript}function J9(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Z9{constructor(){this.enterprise=new e7}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class e7{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const t7="recaptcha-enterprise",s3="NO_RECAPTCHA";class r7{constructor(e){this.type=t7,this.auth=ml(e)}async verify(e="verify",t=!1){async function n(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,c)=>{j9(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new R9(d);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(d=>{c(d)})})}function i(s,a,c){const d=window.grecaptcha;i4(d)?d.enterprise.ready(()=>{d.enterprise.execute(s,{action:e}).then(h=>{a(h)}).catch(()=>{a(s3)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Z9().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{n(this.auth).then(c=>{if(!t&&i4(window.grecaptcha))i(c,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=X9();d.length!==0&&(d+=c),i3(d).then(()=>{i(c,s,a)}).catch(h=>{a(h)})}}).catch(c=>{a(c)})})}}async function u4(r,e,t,n=!1,i=!1){const s=new r7(r);let a;if(i)a=s3;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return n?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function ym(r,e,t,n,i){var s;if(!((s=r._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await u4(r,e,t,t==="getOobCode");return n(r,a)}else return n(r,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await u4(r,e,t,t==="getOobCode");return n(r,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n7(r,e){const t=pl(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(rl(s,e??{}))return i;Ws(i,"already-initialized")}return t.initialize({options:e})}function i7(r,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(Ba);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e?.popupRedirectResolver)}function s7(r,e,t){const n=ml(r);Pt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,s=a3(e),{host:a,port:c}=a7(e),d=c===null?"":`:${c}`,h={url:`${s}//${a}${d}/`},p=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){Pt(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Pt(rl(h,n.config.emulator)&&rl(p,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=h,n.emulatorConfig=p,n.settings.appVerificationDisabledForTesting=!0,o7()}function a3(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function a7(r){const e=a3(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:d4(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:d4(a)}}}function d4(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function o7(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $a("not implemented")}_getIdTokenResponse(e){return $a("not implemented")}_linkToIdToken(e,t){return $a("not implemented")}_getReauthenticationResolver(e){return $a("not implemented")}}async function l7(r,e){return Ks(r,"POST","/v1/accounts:update",e)}async function c7(r,e){return Ks(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u7(r,e){return Mh(r,"POST","/v1/accounts:signInWithPassword",ao(r,e))}async function d7(r,e){return Ks(r,"POST","/v1/accounts:sendOobCode",ao(r,e))}async function h7(r,e){return d7(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f7(r,e){return Mh(r,"POST","/v1/accounts:signInWithEmailLink",ao(r,e))}async function p7(r,e){return Mh(r,"POST","/v1/accounts:signInWithEmailLink",ao(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th extends nb{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new th(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new th(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ym(e,t,"signInWithPassword",u7);case"emailLink":return f7(e,{email:this._email,oobCode:this._password});default:Ws(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ym(e,n,"signUpPassword",c7);case"emailLink":return p7(e,{idToken:t,email:this._email,oobCode:this._password});default:Ws(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wu(r,e){return Mh(r,"POST","/v1/accounts:signInWithIdp",ao(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m7="http://localhost";class sc extends nb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new sc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ws("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,s=J1(t,["providerId","signInMethod"]);if(!n||!i)return null;const a=new sc(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Wu(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Wu(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Wu(e,t)}buildRequest(){const e={requestUri:m7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Oh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g7(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function x7(r){const e=E0(T0(r)).link,t=e?E0(T0(e)).deep_link_id:null,n=E0(T0(r)).deep_link_id;return(n?E0(T0(n)).link:null)||n||t||e||r}class ib{constructor(e){var t,n,i,s,a,c;const d=E0(T0(e)),h=(t=d.apiKey)!==null&&t!==void 0?t:null,p=(n=d.oobCode)!==null&&n!==void 0?n:null,m=g7((i=d.mode)!==null&&i!==void 0?i:null);Pt(h&&p&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=p,this.continueUrl=(s=d.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=d.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=x7(e);try{return new ib(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(){this.providerId=Td.PROVIDER_ID}static credential(e,t){return th._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ib.parseLink(t);return Pt(n,"argument-error"),th._fromEmailAndCode(e,n.code,n.tenantId)}}Td.PROVIDER_ID="password";Td.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Td.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends o3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo extends Vh{constructor(){super("facebook.com")}static credential(e){return sc._fromParams({providerId:Uo.PROVIDER_ID,signInMethod:Uo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uo.credentialFromTaggedObject(e)}static credentialFromError(e){return Uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Uo.credential(e.oauthAccessToken)}catch{return null}}}Uo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Uo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo extends Vh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return sc._fromParams({providerId:zo.PROVIDER_ID,signInMethod:zo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zo.credentialFromTaggedObject(e)}static credentialFromError(e){return zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return zo.credential(t,n)}catch{return null}}}zo.GOOGLE_SIGN_IN_METHOD="google.com";zo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends Vh{constructor(){super("github.com")}static credential(e){return sc._fromParams({providerId:Ho.PROVIDER_ID,signInMethod:Ho.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ho.credentialFromTaggedObject(e)}static credentialFromError(e){return Ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ho.credential(e.oauthAccessToken)}catch{return null}}}Ho.GITHUB_SIGN_IN_METHOD="github.com";Ho.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo extends Vh{constructor(){super("twitter.com")}static credential(e,t){return sc._fromParams({providerId:Wo.PROVIDER_ID,signInMethod:Wo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Wo.credentialFromTaggedObject(e)}static credentialFromError(e){return Wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Wo.credential(t,n)}catch{return null}}}Wo.TWITTER_SIGN_IN_METHOD="twitter.com";Wo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y7(r,e){return Mh(r,"POST","/v1/accounts:signUp",ao(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await Ls._fromIdTokenResponse(e,n,i),a=h4(n);return new ac({user:s,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=h4(n);return new ac({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function h4(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm extends ys{constructor(e,t,n,i){var s;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,vm.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new vm(e,t,n,i)}}function l3(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?vm._fromErrorAndOperation(r,s,e,n):s})}async function v7(r,e,t=!1){const n=await ic(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ac._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b7(r,e,t=!1){const{auth:n}=r;if(Wi(n.app))return Promise.reject(Wa(n));const i="reauthenticate";try{const s=await ic(r,l3(n,i,e,r),t);Pt(s.idToken,n,"internal-error");const a=tb(s.idToken);Pt(a,n,"internal-error");const{sub:c}=a;return Pt(r.uid===c,n,"user-mismatch"),ac._forOperation(r,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ws(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c3(r,e,t=!1){if(Wi(r.app))return Promise.reject(Wa(r));const n="signIn",i=await l3(r,n,e),s=await ac._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(s.user),s}async function w7(r,e){return c3(ml(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u3(r){const e=ml(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _7(r,e,t){const n=ml(r);await ym(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",h7)}async function E7(r,e,t){if(Wi(r.app))return Promise.reject(Wa(r));const n=ml(r),a=await ym(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",y7).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&u3(r),d}),c=await ac._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(c.user),c}function T7(r,e,t){return Wi(r.app)?Promise.reject(Wa(r)):w7(Nr(r),Td.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&u3(r),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A7(r,e){return Ks(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N7(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=Nr(r),s={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await ic(n,A7(n.auth,s));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const c=n.providerData.find(({providerId:d})=>d==="password");c&&(c.displayName=n.displayName,c.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function sb(r,e){return k7(Nr(r),null,e)}async function k7(r,e,t){const{auth:n}=r,s={idToken:await r.getIdToken(),returnSecureToken:!0};t&&(s.password=t);const a=await ic(r,l7(n,s));await r._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(r,e){return Nr(r).setPersistence(e)}function C7(r,e,t,n){return Nr(r).onIdTokenChanged(e,t,n)}function I7(r,e,t){return Nr(r).beforeAuthStateChanged(e,t)}function Nc(r,e,t,n){return Nr(r).onAuthStateChanged(e,t,n)}function $h(r){return Nr(r).signOut()}const bm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bm,"1"),this.storage.removeItem(bm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P7=1e3,R7=10;class h3 extends d3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=r3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!t&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);z9()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,R7):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},P7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}h3.type="LOCAL";const f3=h3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3 extends d3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}p3.type="SESSION";const m3=p3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j7(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new Eg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const c=Array.from(a).map(async h=>h(t.origin,s)),d=await j7(c);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Eg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,d)=>{const h=ab("",20);i.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(m){const x=m;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(x.data.response);break;default:clearTimeout(p),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(){return window}function F7(r){da().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(){return typeof da().WorkerGlobalScope<"u"&&typeof da().importScripts=="function"}async function O7(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function L7(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function M7(){return g3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3="firebaseLocalStorageDb",V7=1,wm="firebaseLocalStorage",y3="fbase_key";class Bh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Tg(r,e){return r.transaction([wm],e?"readwrite":"readonly").objectStore(wm)}function $7(){const r=indexedDB.deleteDatabase(x3);return new Bh(r).toPromise()}function Vv(){const r=indexedDB.open(x3,V7);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(wm,{keyPath:y3})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(wm)?e(n):(n.close(),await $7(),e(await Vv()))})})}async function f4(r,e,t){const n=Tg(r,!0).put({[y3]:e,value:t});return new Bh(n).toPromise()}async function B7(r,e){const t=Tg(r,!1).get(e),n=await new Bh(t).toPromise();return n===void 0?null:n.value}function p4(r,e){const t=Tg(r,!0).delete(e);return new Bh(t).toPromise()}const U7=800,z7=3;class v3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>z7)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return g3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Eg._getInstance(M7()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await O7(),!this.activeServiceWorker)return;this.sender=new D7(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||L7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vv();return await f4(e,bm,"1"),await p4(e,bm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>f4(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>B7(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>p4(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Tg(i,!1).getAll();return new Bh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),U7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}v3.type="LOCAL";const H7=v3;new Lh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W7(r,e){return e?Ba(e):(Pt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob extends nb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function q7(r){return c3(r.auth,new ob(r),r.bypassAuthState)}function G7(r){const{auth:e,user:t}=r;return Pt(t,e,"internal-error"),b7(t,new ob(r),r.bypassAuthState)}async function K7(r){const{auth:e,user:t}=r;return Pt(t,e,"internal-error"),v7(t,new ob(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return q7;case"linkViaPopup":case"linkViaRedirect":return K7;case"reauthViaPopup":case"reauthViaRedirect":return G7;default:Ws(this.auth,"internal-error")}}resolve(e){Za(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Za(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7=new Lh(2e3,1e4);class Fu extends b3{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,Fu.currentPopupAction&&Fu.currentPopupAction.cancel(),Fu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pt(e,this.auth,"internal-error"),e}async onExecution(){Za(this.filter.length===1,"Popup operations only handle one event");const e=ab();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ua(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ua(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ua(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Y7.get())};e()}}Fu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7="pendingRedirect",Yp=new Map;class Q7 extends b3{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Yp.get(this.auth._key());if(!e){try{const n=await J7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Yp.set(this.auth._key(),e)}return this.bypassAuthState||Yp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function J7(r,e){const t=tF(e),n=eF(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function Z7(r,e){Yp.set(r._key(),e)}function eF(r){return Ba(r._redirectPersistence)}function tF(r){return Kp(X7,r.config.apiKey,r.name)}async function rF(r,e,t=!1){if(Wi(r.app))return Promise.reject(Wa(r));const n=ml(r),i=W7(n,e),a=await new Q7(n,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF=600*1e3;class iF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sF(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!w3(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(ua(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nF&&this.cachedEventUids.clear(),this.cachedEventUids.has(m4(e))}saveEventToCache(e){this.cachedEventUids.add(m4(e)),this.lastProcessedEventTime=Date.now()}}function m4(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function w3({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function sF(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return w3(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aF(r,e={}){return Ks(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lF=/^https?/;async function cF(r){if(r.config.emulator)return;const{authorizedDomains:e}=await aF(r);for(const t of e)try{if(uF(t))return}catch{}Ws(r,"unauthorized-domain")}function uF(r){const e=Lv(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const a=new URL(r);return a.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===n}if(!lF.test(t))return!1;if(oF.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=new Lh(3e4,6e4);function g4(){const r=da().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function hF(r){return new Promise((e,t)=>{var n,i,s;function a(){g4(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{g4(),t(ua(r,"network-request-failed"))},timeout:dF.get()})}if(!((i=(n=da().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=da().gapi)===null||s===void 0)&&s.load)a();else{const c=J9("iframefcb");return da()[c]=()=>{gapi.load?a():t(ua(r,"network-request-failed"))},i3(`${Q9()}?onload=${c}`).catch(d=>t(d))}}).catch(e=>{throw Xp=null,e})}let Xp=null;function fF(r){return Xp=Xp||hF(r),Xp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF=new Lh(5e3,15e3),mF="__/auth/iframe",gF="emulator/auth/iframe",xF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vF(r){const e=r.config;Pt(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?eb(e,gF):`https://${r.config.authDomain}/${mF}`,n={apiKey:e.apiKey,appName:r.name,v:Ac},i=yF.get(r.config.apiHost);i&&(n.eid=i);const s=r._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${Oh(n).slice(1)}`}async function bF(r){const e=await fF(r),t=da().gapi;return Pt(t,r,"internal-error"),e.open({where:document.body,url:vF(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xF,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=ua(r,"network-request-failed"),c=da().setTimeout(()=>{s(a)},pF.get());function d(){da().clearTimeout(c),i(n)}n.ping(d).then(d,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_F=500,EF=600,TF="_blank",AF="http://localhost";class x4{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NF(r,e,t,n=_F,i=EF){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},wF),{width:n.toString(),height:i.toString(),top:s,left:a}),h=mn().toLowerCase();t&&(c=Qk(h)?TF:t),Yk(h)&&(e=e||AF,d.scrollbars="yes");const p=Object.entries(d).reduce((x,[v,_])=>`${x}${v}=${_},`,"");if(U9(h)&&c!=="_self")return kF(e||"",c),new x4(null);const m=window.open(e||"",c,p);Pt(m,r,"popup-blocked");try{m.focus()}catch{}return new x4(m)}function kF(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF="__/auth/handler",CF="emulator/auth/handler",IF=encodeURIComponent("fac");async function y4(r,e,t,n,i,s){Pt(r.config.authDomain,r,"auth-domain-config-required"),Pt(r.config.apiKey,r,"invalid-api-key");const a={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Ac,eventId:i};if(e instanceof o3){e.setDefaultLanguage(r.languageCode),a.providerId=e.providerId||"",o8(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))a[p]=m}if(e instanceof Vh){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(a.scopes=p.join(","))}r.tenantId&&(a.tid=r.tenantId);const c=a;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await r._getAppCheckToken(),h=d?`#${IF}=${encodeURIComponent(d)}`:"";return`${PF(r)}?${Oh(c).slice(1)}${h}`}function PF({config:r}){return r.emulator?eb(r,CF):`https://${r.authDomain}/${SF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="webStorageSupport";class RF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=m3,this._completeRedirectFn=rF,this._overrideRedirectResult=Z7}async _openPopup(e,t,n,i){var s;Za((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await y4(e,t,n,Lv(),i);return NF(e,a,ab())}async _openRedirect(e,t,n,i){await this._originValidation(e);const s=await y4(e,t,n,Lv(),i);return F7(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Za(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await bF(e),n=new iF(e);return t.register("authEvent",i=>(Pt(i?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Yy,{type:Yy},i=>{var s;const a=(s=i?.[0])===null||s===void 0?void 0:s[Yy];a!==void 0&&t(!!a),Ws(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cF(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return r3()||Xk()||rb()}}const jF=RF;var v4="@firebase/auth",b4="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OF(r){Hs(new xs("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=n.options;Pt(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:a,authDomain:c,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:n3(r)},h=new K9(n,i,s,d);return i7(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Hs(new xs("auth-internal",e=>{const t=ml(e.getProvider("auth").getImmediate());return(n=>new DF(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ti(v4,b4,FF(r)),Ti(v4,b4,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF=300,MF=Pk("authIdTokenMaxAge")||LF;let w4=null;const VF=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>MF)return;const i=t?.token;w4!==i&&(w4=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function lb(r=Q1()){const e=pl(r,"auth");if(e.isInitialized())return e.getImmediate();const t=n7(r,{popupRedirectResolver:jF,persistence:[H7,f3,m3]}),n=Pk("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const a=VF(s.toString());I7(t,a,()=>a(t.currentUser)),C7(t,c=>a(c))}}const i=Ck("auth");return i&&s7(t,`http://${i}`),t}function $F(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}Y9({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const s=ua("internal-error");s.customData=i,t(s)},n.type="text/javascript",n.charset="UTF-8",$F().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OF("Browser");var _4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jo,_3;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,N){function I(){}I.prototype=N.prototype,S.D=N.prototype,S.prototype=new I,S.prototype.constructor=S,S.C=function(R,M,D){for(var F=Array(arguments.length-2),he=2;he<arguments.length;he++)F[he-2]=arguments[he];return N.prototype[M].apply(R,F)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,N,I){I||(I=0);var R=Array(16);if(typeof N=="string")for(var M=0;16>M;++M)R[M]=N.charCodeAt(I++)|N.charCodeAt(I++)<<8|N.charCodeAt(I++)<<16|N.charCodeAt(I++)<<24;else for(M=0;16>M;++M)R[M]=N[I++]|N[I++]<<8|N[I++]<<16|N[I++]<<24;N=S.g[0],I=S.g[1],M=S.g[2];var D=S.g[3],F=N+(D^I&(M^D))+R[0]+3614090360&4294967295;N=I+(F<<7&4294967295|F>>>25),F=D+(M^N&(I^M))+R[1]+3905402710&4294967295,D=N+(F<<12&4294967295|F>>>20),F=M+(I^D&(N^I))+R[2]+606105819&4294967295,M=D+(F<<17&4294967295|F>>>15),F=I+(N^M&(D^N))+R[3]+3250441966&4294967295,I=M+(F<<22&4294967295|F>>>10),F=N+(D^I&(M^D))+R[4]+4118548399&4294967295,N=I+(F<<7&4294967295|F>>>25),F=D+(M^N&(I^M))+R[5]+1200080426&4294967295,D=N+(F<<12&4294967295|F>>>20),F=M+(I^D&(N^I))+R[6]+2821735955&4294967295,M=D+(F<<17&4294967295|F>>>15),F=I+(N^M&(D^N))+R[7]+4249261313&4294967295,I=M+(F<<22&4294967295|F>>>10),F=N+(D^I&(M^D))+R[8]+1770035416&4294967295,N=I+(F<<7&4294967295|F>>>25),F=D+(M^N&(I^M))+R[9]+2336552879&4294967295,D=N+(F<<12&4294967295|F>>>20),F=M+(I^D&(N^I))+R[10]+4294925233&4294967295,M=D+(F<<17&4294967295|F>>>15),F=I+(N^M&(D^N))+R[11]+2304563134&4294967295,I=M+(F<<22&4294967295|F>>>10),F=N+(D^I&(M^D))+R[12]+1804603682&4294967295,N=I+(F<<7&4294967295|F>>>25),F=D+(M^N&(I^M))+R[13]+4254626195&4294967295,D=N+(F<<12&4294967295|F>>>20),F=M+(I^D&(N^I))+R[14]+2792965006&4294967295,M=D+(F<<17&4294967295|F>>>15),F=I+(N^M&(D^N))+R[15]+1236535329&4294967295,I=M+(F<<22&4294967295|F>>>10),F=N+(M^D&(I^M))+R[1]+4129170786&4294967295,N=I+(F<<5&4294967295|F>>>27),F=D+(I^M&(N^I))+R[6]+3225465664&4294967295,D=N+(F<<9&4294967295|F>>>23),F=M+(N^I&(D^N))+R[11]+643717713&4294967295,M=D+(F<<14&4294967295|F>>>18),F=I+(D^N&(M^D))+R[0]+3921069994&4294967295,I=M+(F<<20&4294967295|F>>>12),F=N+(M^D&(I^M))+R[5]+3593408605&4294967295,N=I+(F<<5&4294967295|F>>>27),F=D+(I^M&(N^I))+R[10]+38016083&4294967295,D=N+(F<<9&4294967295|F>>>23),F=M+(N^I&(D^N))+R[15]+3634488961&4294967295,M=D+(F<<14&4294967295|F>>>18),F=I+(D^N&(M^D))+R[4]+3889429448&4294967295,I=M+(F<<20&4294967295|F>>>12),F=N+(M^D&(I^M))+R[9]+568446438&4294967295,N=I+(F<<5&4294967295|F>>>27),F=D+(I^M&(N^I))+R[14]+3275163606&4294967295,D=N+(F<<9&4294967295|F>>>23),F=M+(N^I&(D^N))+R[3]+4107603335&4294967295,M=D+(F<<14&4294967295|F>>>18),F=I+(D^N&(M^D))+R[8]+1163531501&4294967295,I=M+(F<<20&4294967295|F>>>12),F=N+(M^D&(I^M))+R[13]+2850285829&4294967295,N=I+(F<<5&4294967295|F>>>27),F=D+(I^M&(N^I))+R[2]+4243563512&4294967295,D=N+(F<<9&4294967295|F>>>23),F=M+(N^I&(D^N))+R[7]+1735328473&4294967295,M=D+(F<<14&4294967295|F>>>18),F=I+(D^N&(M^D))+R[12]+2368359562&4294967295,I=M+(F<<20&4294967295|F>>>12),F=N+(I^M^D)+R[5]+4294588738&4294967295,N=I+(F<<4&4294967295|F>>>28),F=D+(N^I^M)+R[8]+2272392833&4294967295,D=N+(F<<11&4294967295|F>>>21),F=M+(D^N^I)+R[11]+1839030562&4294967295,M=D+(F<<16&4294967295|F>>>16),F=I+(M^D^N)+R[14]+4259657740&4294967295,I=M+(F<<23&4294967295|F>>>9),F=N+(I^M^D)+R[1]+2763975236&4294967295,N=I+(F<<4&4294967295|F>>>28),F=D+(N^I^M)+R[4]+1272893353&4294967295,D=N+(F<<11&4294967295|F>>>21),F=M+(D^N^I)+R[7]+4139469664&4294967295,M=D+(F<<16&4294967295|F>>>16),F=I+(M^D^N)+R[10]+3200236656&4294967295,I=M+(F<<23&4294967295|F>>>9),F=N+(I^M^D)+R[13]+681279174&4294967295,N=I+(F<<4&4294967295|F>>>28),F=D+(N^I^M)+R[0]+3936430074&4294967295,D=N+(F<<11&4294967295|F>>>21),F=M+(D^N^I)+R[3]+3572445317&4294967295,M=D+(F<<16&4294967295|F>>>16),F=I+(M^D^N)+R[6]+76029189&4294967295,I=M+(F<<23&4294967295|F>>>9),F=N+(I^M^D)+R[9]+3654602809&4294967295,N=I+(F<<4&4294967295|F>>>28),F=D+(N^I^M)+R[12]+3873151461&4294967295,D=N+(F<<11&4294967295|F>>>21),F=M+(D^N^I)+R[15]+530742520&4294967295,M=D+(F<<16&4294967295|F>>>16),F=I+(M^D^N)+R[2]+3299628645&4294967295,I=M+(F<<23&4294967295|F>>>9),F=N+(M^(I|~D))+R[0]+4096336452&4294967295,N=I+(F<<6&4294967295|F>>>26),F=D+(I^(N|~M))+R[7]+1126891415&4294967295,D=N+(F<<10&4294967295|F>>>22),F=M+(N^(D|~I))+R[14]+2878612391&4294967295,M=D+(F<<15&4294967295|F>>>17),F=I+(D^(M|~N))+R[5]+4237533241&4294967295,I=M+(F<<21&4294967295|F>>>11),F=N+(M^(I|~D))+R[12]+1700485571&4294967295,N=I+(F<<6&4294967295|F>>>26),F=D+(I^(N|~M))+R[3]+2399980690&4294967295,D=N+(F<<10&4294967295|F>>>22),F=M+(N^(D|~I))+R[10]+4293915773&4294967295,M=D+(F<<15&4294967295|F>>>17),F=I+(D^(M|~N))+R[1]+2240044497&4294967295,I=M+(F<<21&4294967295|F>>>11),F=N+(M^(I|~D))+R[8]+1873313359&4294967295,N=I+(F<<6&4294967295|F>>>26),F=D+(I^(N|~M))+R[15]+4264355552&4294967295,D=N+(F<<10&4294967295|F>>>22),F=M+(N^(D|~I))+R[6]+2734768916&4294967295,M=D+(F<<15&4294967295|F>>>17),F=I+(D^(M|~N))+R[13]+1309151649&4294967295,I=M+(F<<21&4294967295|F>>>11),F=N+(M^(I|~D))+R[4]+4149444226&4294967295,N=I+(F<<6&4294967295|F>>>26),F=D+(I^(N|~M))+R[11]+3174756917&4294967295,D=N+(F<<10&4294967295|F>>>22),F=M+(N^(D|~I))+R[2]+718787259&4294967295,M=D+(F<<15&4294967295|F>>>17),F=I+(D^(M|~N))+R[9]+3951481745&4294967295,S.g[0]=S.g[0]+N&4294967295,S.g[1]=S.g[1]+(M+(F<<21&4294967295|F>>>11))&4294967295,S.g[2]=S.g[2]+M&4294967295,S.g[3]=S.g[3]+D&4294967295}n.prototype.u=function(S,N){N===void 0&&(N=S.length);for(var I=N-this.blockSize,R=this.B,M=this.h,D=0;D<N;){if(M==0)for(;D<=I;)i(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<N;)if(R[M++]=S.charCodeAt(D++),M==this.blockSize){i(this,R),M=0;break}}else for(;D<N;)if(R[M++]=S[D++],M==this.blockSize){i(this,R),M=0;break}}this.h=M,this.o+=N},n.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var N=1;N<S.length-8;++N)S[N]=0;var I=8*this.o;for(N=S.length-8;N<S.length;++N)S[N]=I&255,I/=256;for(this.u(S),S=Array(16),N=I=0;4>N;++N)for(var R=0;32>R;R+=8)S[I++]=this.g[N]>>>R&255;return S};function s(S,N){var I=c;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=N(S)}function a(S,N){this.h=N;for(var I=[],R=!0,M=S.length-1;0<=M;M--){var D=S[M]|0;R&&D==N||(I[M]=D,R=!1)}this.g=I}var c={};function d(S){return-128<=S&&128>S?s(S,function(N){return new a([N|0],0>N?-1:0)}):new a([S|0],0>S?-1:0)}function h(S){if(isNaN(S)||!isFinite(S))return m;if(0>S)return E(h(-S));for(var N=[],I=1,R=0;S>=I;R++)N[R]=S/I|0,I*=4294967296;return new a(N,0)}function p(S,N){if(S.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(S.charAt(0)=="-")return E(p(S.substring(1),N));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=h(Math.pow(N,8)),R=m,M=0;M<S.length;M+=8){var D=Math.min(8,S.length-M),F=parseInt(S.substring(M,M+D),N);8>D?(D=h(Math.pow(N,D)),R=R.j(D).add(h(F))):(R=R.j(I),R=R.add(h(F)))}return R}var m=d(0),x=d(1),v=d(16777216);r=a.prototype,r.m=function(){if(w(this))return-E(this).m();for(var S=0,N=1,I=0;I<this.g.length;I++){var R=this.i(I);S+=(0<=R?R:4294967296+R)*N,N*=4294967296}return S},r.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(_(this))return"0";if(w(this))return"-"+E(this).toString(S);for(var N=h(Math.pow(S,6)),I=this,R="";;){var M=L(I,N).g;I=j(I,M.j(N));var D=((0<I.g.length?I.g[0]:I.h)>>>0).toString(S);if(I=M,_(I))return D+R;for(;6>D.length;)D="0"+D;R=D+R}},r.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function _(S){if(S.h!=0)return!1;for(var N=0;N<S.g.length;N++)if(S.g[N]!=0)return!1;return!0}function w(S){return S.h==-1}r.l=function(S){return S=j(this,S),w(S)?-1:_(S)?0:1};function E(S){for(var N=S.g.length,I=[],R=0;R<N;R++)I[R]=~S.g[R];return new a(I,~S.h).add(x)}r.abs=function(){return w(this)?E(this):this},r.add=function(S){for(var N=Math.max(this.g.length,S.g.length),I=[],R=0,M=0;M<=N;M++){var D=R+(this.i(M)&65535)+(S.i(M)&65535),F=(D>>>16)+(this.i(M)>>>16)+(S.i(M)>>>16);R=F>>>16,D&=65535,F&=65535,I[M]=F<<16|D}return new a(I,I[I.length-1]&-2147483648?-1:0)};function j(S,N){return S.add(E(N))}r.j=function(S){if(_(this)||_(S))return m;if(w(this))return w(S)?E(this).j(E(S)):E(E(this).j(S));if(w(S))return E(this.j(E(S)));if(0>this.l(v)&&0>S.l(v))return h(this.m()*S.m());for(var N=this.g.length+S.g.length,I=[],R=0;R<2*N;R++)I[R]=0;for(R=0;R<this.g.length;R++)for(var M=0;M<S.g.length;M++){var D=this.i(R)>>>16,F=this.i(R)&65535,he=S.i(M)>>>16,Ae=S.i(M)&65535;I[2*R+2*M]+=F*Ae,P(I,2*R+2*M),I[2*R+2*M+1]+=D*Ae,P(I,2*R+2*M+1),I[2*R+2*M+1]+=F*he,P(I,2*R+2*M+1),I[2*R+2*M+2]+=D*he,P(I,2*R+2*M+2)}for(R=0;R<N;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=N;R<2*N;R++)I[R]=0;return new a(I,0)};function P(S,N){for(;(S[N]&65535)!=S[N];)S[N+1]+=S[N]>>>16,S[N]&=65535,N++}function V(S,N){this.g=S,this.h=N}function L(S,N){if(_(N))throw Error("division by zero");if(_(S))return new V(m,m);if(w(S))return N=L(E(S),N),new V(E(N.g),E(N.h));if(w(N))return N=L(S,E(N)),new V(E(N.g),N.h);if(30<S.g.length){if(w(S)||w(N))throw Error("slowDivide_ only works with positive integers.");for(var I=x,R=N;0>=R.l(S);)I=K(I),R=K(R);var M=H(I,1),D=H(R,1);for(R=H(R,2),I=H(I,2);!_(R);){var F=D.add(R);0>=F.l(S)&&(M=M.add(I),D=F),R=H(R,1),I=H(I,1)}return N=j(S,M.j(N)),new V(M,N)}for(M=m;0<=S.l(N);){for(I=Math.max(1,Math.floor(S.m()/N.m())),R=Math.ceil(Math.log(I)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),D=h(I),F=D.j(N);w(F)||0<F.l(S);)I-=R,D=h(I),F=D.j(N);_(D)&&(D=x),M=M.add(D),S=j(S,F)}return new V(M,S)}r.A=function(S){return L(this,S).h},r.and=function(S){for(var N=Math.max(this.g.length,S.g.length),I=[],R=0;R<N;R++)I[R]=this.i(R)&S.i(R);return new a(I,this.h&S.h)},r.or=function(S){for(var N=Math.max(this.g.length,S.g.length),I=[],R=0;R<N;R++)I[R]=this.i(R)|S.i(R);return new a(I,this.h|S.h)},r.xor=function(S){for(var N=Math.max(this.g.length,S.g.length),I=[],R=0;R<N;R++)I[R]=this.i(R)^S.i(R);return new a(I,this.h^S.h)};function K(S){for(var N=S.g.length+1,I=[],R=0;R<N;R++)I[R]=S.i(R)<<1|S.i(R-1)>>>31;return new a(I,S.h)}function H(S,N){var I=N>>5;N%=32;for(var R=S.g.length-I,M=[],D=0;D<R;D++)M[D]=0<N?S.i(D+I)>>>N|S.i(D+I+1)<<32-N:S.i(D+I);return new a(M,S.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,_3=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,Jo=a}).apply(typeof _4<"u"?_4:typeof self<"u"?self:typeof window<"u"?window:{});var Ap=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var E3,A0,T3,Qp,$v,A3,N3,k3;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,T,C){return g==Array.prototype||g==Object.prototype||(g[T]=C.value),g};function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ap=="object"&&Ap];for(var T=0;T<g.length;++T){var C=g[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var n=t(this);function i(g,T){if(T)e:{var C=n;g=g.split(".");for(var G=0;G<g.length-1;G++){var pe=g[G];if(!(pe in C))break e;C=C[pe]}g=g[g.length-1],G=C[g],T=T(G),T!=G&&T!=null&&e(C,g,{configurable:!0,writable:!0,value:T})}}function s(g,T){g instanceof String&&(g+="");var C=0,G=!1,pe={next:function(){if(!G&&C<g.length){var Te=C++;return{value:T(Te,g[Te]),done:!1}}return G=!0,{done:!0,value:void 0}}};return pe[Symbol.iterator]=function(){return pe},pe}i("Array.prototype.values",function(g){return g||function(){return s(this,function(T,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function d(g){var T=typeof g;return T=T!="object"?T:g?Array.isArray(g)?"array":T:"null",T=="array"||T=="object"&&typeof g.length=="number"}function h(g){var T=typeof g;return T=="object"&&g!=null||T=="function"}function p(g,T,C){return g.call.apply(g.bind,arguments)}function m(g,T,C){if(!g)throw Error();if(2<arguments.length){var G=Array.prototype.slice.call(arguments,2);return function(){var pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(pe,G),g.apply(T,pe)}}return function(){return g.apply(T,arguments)}}function x(g,T,C){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,x.apply(null,arguments)}function v(g,T){var C=Array.prototype.slice.call(arguments,1);return function(){var G=C.slice();return G.push.apply(G,arguments),g.apply(this,G)}}function _(g,T){function C(){}C.prototype=T.prototype,g.aa=T.prototype,g.prototype=new C,g.prototype.constructor=g,g.Qb=function(G,pe,Te){for(var tt=Array(arguments.length-2),fr=2;fr<arguments.length;fr++)tt[fr-2]=arguments[fr];return T.prototype[pe].apply(G,tt)}}function w(g){const T=g.length;if(0<T){const C=Array(T);for(let G=0;G<T;G++)C[G]=g[G];return C}return[]}function E(g,T){for(let C=1;C<arguments.length;C++){const G=arguments[C];if(d(G)){const pe=g.length||0,Te=G.length||0;g.length=pe+Te;for(let tt=0;tt<Te;tt++)g[pe+tt]=G[tt]}else g.push(G)}}class j{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function P(g){return/^[\s\xa0]*$/.test(g)}function V(){var g=c.navigator;return g&&(g=g.userAgent)?g:""}function L(g){return L[" "](g),g}L[" "]=function(){};var K=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function H(g,T,C){for(const G in g)T.call(C,g[G],G,g)}function S(g,T){for(const C in g)T.call(void 0,g[C],C,g)}function N(g){const T={};for(const C in g)T[C]=g[C];return T}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(g,T){let C,G;for(let pe=1;pe<arguments.length;pe++){G=arguments[pe];for(C in G)g[C]=G[C];for(let Te=0;Te<I.length;Te++)C=I[Te],Object.prototype.hasOwnProperty.call(G,C)&&(g[C]=G[C])}}function M(g){var T=1;g=g.split(":");const C=[];for(;0<T&&g.length;)C.push(g.shift()),T--;return g.length&&C.push(g.join(":")),C}function D(g){c.setTimeout(()=>{throw g},0)}function F(){var g=_e;let T=null;return g.g&&(T=g.g,g.g=g.g.next,g.g||(g.h=null),T.next=null),T}class he{constructor(){this.h=this.g=null}add(T,C){const G=Ae.get();G.set(T,C),this.h?this.h.next=G:this.g=G,this.h=G}}var Ae=new j(()=>new Oe,g=>g.reset());class Oe{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let De,we=!1,_e=new he,Ne=()=>{const g=c.Promise.resolve(void 0);De=()=>{g.then(ae)}};var ae=()=>{for(var g;g=F();){try{g.h.call(g.g)}catch(C){D(C)}var T=Ae;T.j(g),100>T.h&&(T.h++,g.next=T.g,T.g=g)}we=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(g,T){this.type=g,this.g=this.target=T,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var te=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,T=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};c.addEventListener("test",C,T),c.removeEventListener("test",C,T)}catch{}return g})();function ie(g,T){if(ee.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var C=this.type=g.type,G=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=T,T=g.relatedTarget){if(K){e:{try{L(T.nodeName);var pe=!0;break e}catch{}pe=!1}pe||(T=null)}}else C=="mouseover"?T=g.fromElement:C=="mouseout"&&(T=g.toElement);this.relatedTarget=T,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:U[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&ie.aa.h.call(this)}}_(ie,ee);var U={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Ce=0;function ke(g,T,C,G,pe){this.listener=g,this.proxy=null,this.src=T,this.type=C,this.capture=!!G,this.ha=pe,this.key=++Ce,this.da=this.fa=!1}function Ee(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ke(g){this.src=g,this.g={},this.h=0}Ke.prototype.add=function(g,T,C,G,pe){var Te=g.toString();g=this.g[Te],g||(g=this.g[Te]=[],this.h++);var tt=zt(g,T,G,pe);return-1<tt?(T=g[tt],C||(T.fa=!1)):(T=new ke(T,this.src,Te,!!G,pe),T.fa=C,g.push(T)),T};function dt(g,T){var C=T.type;if(C in g.g){var G=g.g[C],pe=Array.prototype.indexOf.call(G,T,void 0),Te;(Te=0<=pe)&&Array.prototype.splice.call(G,pe,1),Te&&(Ee(T),g.g[C].length==0&&(delete g.g[C],g.h--))}}function zt(g,T,C,G){for(var pe=0;pe<g.length;++pe){var Te=g[pe];if(!Te.da&&Te.listener==T&&Te.capture==!!C&&Te.ha==G)return pe}return-1}var bt="closure_lm_"+(1e6*Math.random()|0),tr={};function Et(g,T,C,G,pe){if(Array.isArray(T)){for(var Te=0;Te<T.length;Te++)Et(g,T[Te],C,G,pe);return null}return C=Tt(C),g&&g[be]?g.K(T,C,h(G)?!!G.capture:!1,pe):Pe(g,T,C,!1,G,pe)}function Pe(g,T,C,G,pe,Te){if(!T)throw Error("Invalid event type");var tt=h(pe)?!!pe.capture:!!pe,fr=st(g);if(fr||(g[bt]=fr=new Ke(g)),C=fr.add(T,C,G,tt,Te),C.proxy)return C;if(G=Qt(),C.proxy=G,G.src=g,G.listener=C,g.addEventListener)te||(pe=tt),pe===void 0&&(pe=!1),g.addEventListener(T.toString(),G,pe);else if(g.attachEvent)g.attachEvent(ue(T.toString()),G);else if(g.addListener&&g.removeListener)g.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Qt(){function g(C){return T.call(g.src,g.listener,C)}const T=rt;return g}function St(g,T,C,G,pe){if(Array.isArray(T))for(var Te=0;Te<T.length;Te++)St(g,T[Te],C,G,pe);else G=h(G)?!!G.capture:!!G,C=Tt(C),g&&g[be]?(g=g.i,T=String(T).toString(),T in g.g&&(Te=g.g[T],C=zt(Te,C,G,pe),-1<C&&(Ee(Te[C]),Array.prototype.splice.call(Te,C,1),Te.length==0&&(delete g.g[T],g.h--)))):g&&(g=st(g))&&(T=g.g[T.toString()],g=-1,T&&(g=zt(T,C,G,pe)),(C=-1<g?T[g]:null)&&Be(C))}function Be(g){if(typeof g!="number"&&g&&!g.da){var T=g.src;if(T&&T[be])dt(T.i,g);else{var C=g.type,G=g.proxy;T.removeEventListener?T.removeEventListener(C,G,g.capture):T.detachEvent?T.detachEvent(ue(C),G):T.addListener&&T.removeListener&&T.removeListener(G),(C=st(T))?(dt(C,g),C.h==0&&(C.src=null,T[bt]=null)):Ee(g)}}}function ue(g){return g in tr?tr[g]:tr[g]="on"+g}function rt(g,T){if(g.da)g=!0;else{T=new ie(T,this);var C=g.listener,G=g.ha||g.src;g.fa&&Be(g),g=C.call(G,T)}return g}function st(g){return g=g[bt],g instanceof Ke?g:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tt(g){return typeof g=="function"?g:(g[ht]||(g[ht]=function(T){return g.handleEvent(T)}),g[ht])}function lt(){W.call(this),this.i=new Ke(this),this.M=this,this.F=null}_(lt,W),lt.prototype[be]=!0,lt.prototype.removeEventListener=function(g,T,C,G){St(this,g,T,C,G)};function Ct(g,T){var C,G=g.F;if(G)for(C=[];G;G=G.F)C.push(G);if(g=g.M,G=T.type||T,typeof T=="string")T=new ee(T,g);else if(T instanceof ee)T.target=T.target||g;else{var pe=T;T=new ee(G,g),R(T,pe)}if(pe=!0,C)for(var Te=C.length-1;0<=Te;Te--){var tt=T.g=C[Te];pe=ct(tt,G,!0,T)&&pe}if(tt=T.g=g,pe=ct(tt,G,!0,T)&&pe,pe=ct(tt,G,!1,T)&&pe,C)for(Te=0;Te<C.length;Te++)tt=T.g=C[Te],pe=ct(tt,G,!1,T)&&pe}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var g=this.i,T;for(T in g.g){for(var C=g.g[T],G=0;G<C.length;G++)Ee(C[G]);delete g.g[T],g.h--}}this.F=null},lt.prototype.K=function(g,T,C,G){return this.i.add(String(g),T,!1,C,G)},lt.prototype.L=function(g,T,C,G){return this.i.add(String(g),T,!0,C,G)};function ct(g,T,C,G){if(T=g.i.g[String(T)],!T)return!0;T=T.concat();for(var pe=!0,Te=0;Te<T.length;++Te){var tt=T[Te];if(tt&&!tt.da&&tt.capture==C){var fr=tt.listener,un=tt.ha||tt.src;tt.fa&&dt(g.i,tt),pe=fr.call(un,G)!==!1&&pe}}return pe&&!G.defaultPrevented}function kr(g,T,C){if(typeof g=="function")C&&(g=x(g,C));else if(g&&typeof g.handleEvent=="function")g=x(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:c.setTimeout(g,T||0)}function ze(g){g.g=kr(()=>{g.g=null,g.i&&(g.i=!1,ze(g))},g.l);const T=g.h;g.h=null,g.m.apply(null,T)}class at extends W{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:ze(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mt(g){W.call(this),this.h=g,this.g={}}_(Mt,W);var xe=[];function Xe(g){H(g.g,function(T,C){this.g.hasOwnProperty(C)&&Be(T)},g),g.g={}}Mt.prototype.N=function(){Mt.aa.N.call(this),Xe(this)},Mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var et=c.JSON.stringify,ut=c.JSON.parse,Ot=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function Ht(){}Ht.prototype.h=null;function Kt(g){return g.h||(g.h=g.i())}function pt(){}var nt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lt(){ee.call(this,"d")}_(Lt,ee);function qt(){ee.call(this,"c")}_(qt,ee);var hr={},xn=null;function yn(){return xn=xn||new lt}hr.La="serverreachability";function Pi(g){ee.call(this,hr.La,g)}_(Pi,ee);function tn(g){const T=yn();Ct(T,new Pi(T))}hr.STAT_EVENT="statevent";function Zi(g,T){ee.call(this,hr.STAT_EVENT,g),this.stat=T}_(Zi,ee);function wr(g){const T=yn();Ct(T,new Zi(T,g))}hr.Ma="timingevent";function es(g,T){ee.call(this,hr.Ma,g),this.size=T}_(es,ee);function qr(g,T){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},T)}function Ri(){this.g=!0}Ri.prototype.xa=function(){this.g=!1};function hi(g,T,C,G,pe,Te){g.info(function(){if(g.g)if(Te)for(var tt="",fr=Te.split("&"),un=0;un<fr.length;un++){var Zt=fr[un].split("=");if(1<Zt.length){var vn=Zt[0];Zt=Zt[1];var rn=vn.split("_");tt=2<=rn.length&&rn[1]=="type"?tt+(vn+"="+Zt+"&"):tt+(vn+"=redacted&")}}else tt=null;else tt=Te;return"XMLHTTP REQ ("+G+") [attempt "+pe+"]: "+T+`
`+C+`
`+tt})}function ji(g,T,C,G,pe,Te,tt){g.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+pe+"]: "+T+`
`+C+`
`+Te+" "+tt})}function z(g,T,C,G){g.info(function(){return"XMLHTTP TEXT ("+T+"): "+Y(g,C)+(G?" "+G:"")})}function J(g,T){g.info(function(){return"TIMEOUT: "+T})}Ri.prototype.info=function(){};function Y(g,T){if(!g.g)return T;if(!T)return null;try{var C=JSON.parse(T);if(C){for(g=0;g<C.length;g++)if(Array.isArray(C[g])){var G=C[g];if(!(2>G.length)){var pe=G[1];if(Array.isArray(pe)&&!(1>pe.length)){var Te=pe[0];if(Te!="noop"&&Te!="stop"&&Te!="close")for(var tt=1;tt<pe.length;tt++)pe[tt]=""}}}}return et(C)}catch{return T}}var X={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Z={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},O;function Q(){}_(Q,Ht),Q.prototype.g=function(){return new XMLHttpRequest},Q.prototype.i=function(){return{}},O=new Q;function oe(g,T,C,G){this.j=g,this.i=T,this.l=C,this.R=G||1,this.U=new Mt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new se}function se(){this.i=null,this.g="",this.h=!1}var ce={},fe={};function je(g,T,C){g.L=1,g.v=xo(Di(T)),g.m=C,g.P=!0,Ve(g,null)}function Ve(g,T){g.F=Date.now(),Le(g),g.A=Di(g.v);var C=g.A,G=g.R;Array.isArray(G)||(G=[String(G)]),vo(C.i,"t",G),g.C=0,C=g.j.J,g.h=new se,g.g=kf(g.j,C?T:null,!g.m),0<g.O&&(g.M=new at(x(g.Y,g,g.g),g.O)),T=g.U,C=g.g,G=g.ca;var pe="readystatechange";Array.isArray(pe)||(pe&&(xe[0]=pe.toString()),pe=xe);for(var Te=0;Te<pe.length;Te++){var tt=Et(C,pe[Te],G||T.handleEvent,!1,T.h||T);if(!tt)break;T.g[tt.key]=tt}T=g.H?N(g.H):{},g.m?(g.u||(g.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,T)):(g.u="GET",g.g.ea(g.A,g.u,null,T)),tn(),hi(g.i,g.u,g.A,g.l,g.R,g.m)}oe.prototype.ca=function(g){g=g.target;const T=this.M;T&&pi(g)==3?T.j():this.Y(g)},oe.prototype.Y=function(g){try{if(g==this.g)e:{const rn=pi(this.g);var T=this.g.Ba();const rs=this.g.Z();if(!(3>rn)&&(rn!=3||this.g&&(this.h.h||this.g.oa()||Bd(this.g)))){this.J||rn!=4||T==7||(T==8||0>=rs?tn(3):tn(2)),Bt(this);var C=this.g.Z();this.X=C;t:if(qe(this)){var G=Bd(this.g);g="";var pe=G.length,Te=pi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){nr(this),$t(this);var tt="";break t}this.h.i=new c.TextDecoder}for(T=0;T<pe;T++)this.h.h=!0,g+=this.h.i.decode(G[T],{stream:!(Te&&T==pe-1)});G.length=0,this.h.g+=g,this.C=0,tt=this.h.g}else tt=this.g.oa();if(this.o=C==200,ji(this.i,this.u,this.A,this.l,this.R,rn,C),this.o){if(this.T&&!this.K){t:{if(this.g){var fr,un=this.g;if((fr=un.g?un.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(fr)){var Zt=fr;break t}}Zt=null}if(C=Zt)z(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ri(this,C);else{this.o=!1,this.s=3,wr(12),nr(this),$t(this);break e}}if(this.P){C=!0;let Oi;for(;!this.J&&this.C<tt.length;)if(Oi=Re(this,tt),Oi==fe){rn==4&&(this.s=4,wr(14),C=!1),z(this.i,this.l,null,"[Incomplete Response]");break}else if(Oi==ce){this.s=4,wr(15),z(this.i,this.l,tt,"[Invalid Chunk]"),C=!1;break}else z(this.i,this.l,Oi,null),ri(this,Oi);if(qe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rn!=4||tt.length!=0||this.h.h||(this.s=1,wr(16),C=!1),this.o=this.o&&C,!C)z(this.i,this.l,tt,"[Invalid Chunked Response]"),nr(this),$t(this);else if(0<tt.length&&!this.W){this.W=!0;var vn=this.j;vn.g==this&&vn.ba&&!vn.M&&(vn.j.info("Great, no buffering proxy detected. Bytes received: "+tt.length),zd(vn),vn.M=!0,wr(11))}}else z(this.i,this.l,tt,null),ri(this,tt);rn==4&&nr(this),this.o&&!this.J&&(rn==4?Xc(this.j,this):(this.o=!1,Le(this)))}else Wc(this.g),C==400&&0<tt.indexOf("Unknown SID")?(this.s=3,wr(12)):(this.s=0,wr(13)),nr(this),$t(this)}}}catch{}finally{}};function qe(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Re(g,T){var C=g.C,G=T.indexOf(`
`,C);return G==-1?fe:(C=Number(T.substring(C,G)),isNaN(C)?ce:(G+=1,G+C>T.length?fe:(T=T.slice(G,G+C),g.C=G+C,T)))}oe.prototype.cancel=function(){this.J=!0,nr(this)};function Le(g){g.S=Date.now()+g.I,At(g,g.I)}function At(g,T){if(g.B!=null)throw Error("WatchDog timer not null");g.B=qr(x(g.ba,g),T)}function Bt(g){g.B&&(c.clearTimeout(g.B),g.B=null)}oe.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(J(this.i,this.A),this.L!=2&&(tn(),wr(17)),nr(this),this.s=2,$t(this)):At(this,this.S-g)};function $t(g){g.j.G==0||g.J||Xc(g.j,g)}function nr(g){Bt(g);var T=g.M;T&&typeof T.ma=="function"&&T.ma(),g.M=null,Xe(g.U),g.g&&(T=g.g,g.g=null,T.abort(),T.ma())}function ri(g,T){try{var C=g.j;if(C.G!=0&&(C.g==g||Tr(C.h,g))){if(!g.K&&Tr(C.h,g)&&C.G==3){try{var G=C.Da.g.parse(T)}catch{G=null}if(Array.isArray(G)&&G.length==3){var pe=G;if(pe[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<g.F)Yc(C),Ts(C);else break e;Kc(C),wr(18)}}else C.za=pe[1],0<C.za-C.T&&37500>pe[2]&&C.F&&C.v==0&&!C.C&&(C.C=qr(x(C.Za,C),6e3));if(1>=Ys(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Ia(C,11)}else if((g.K||C.g==g)&&Yc(C),!P(T))for(pe=C.Da.g.parse(T),T=0;T<pe.length;T++){let Zt=pe[T];if(C.T=Zt[0],Zt=Zt[1],C.G==2)if(Zt[0]=="c"){C.K=Zt[1],C.ia=Zt[2];const vn=Zt[3];vn!=null&&(C.la=vn,C.j.info("VER="+C.la));const rn=Zt[4];rn!=null&&(C.Aa=rn,C.j.info("SVER="+C.Aa));const rs=Zt[5];rs!=null&&typeof rs=="number"&&0<rs&&(G=1.5*rs,C.L=G,C.j.info("backChannelRequestTimeoutMs_="+G)),G=C;const Oi=g.g;if(Oi){const Al=Oi.g?Oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Al){var Te=G.h;Te.g||Al.indexOf("spdy")==-1&&Al.indexOf("quic")==-1&&Al.indexOf("h2")==-1||(Te.j=Te.l,Te.g=new Set,Te.h&&(Aa(Te,Te.h),Te.h=null))}if(G.D){const Jc=Oi.g?Oi.g.getResponseHeader("X-HTTP-Session-Id"):null;Jc&&(G.ya=Jc,Ar(G.I,G.D,Jc))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-g.F,C.j.info("Handshake RTT: "+C.R+"ms")),G=C;var tt=g;if(G.qa=Nf(G,G.J?G.ia:null,G.W),tt.K){$c(G.h,tt);var fr=tt,un=G.L;un&&(fr.I=un),fr.B&&(Bt(fr),Le(fr)),G.g=tt}else Tl(G);0<C.i.length&&Zs(C)}else Zt[0]!="stop"&&Zt[0]!="close"||Ia(C,7);else C.G==3&&(Zt[0]=="stop"||Zt[0]=="close"?Zt[0]=="stop"?Ia(C,7):Cn(C):Zt[0]!="noop"&&C.l&&C.l.ta(Zt),C.v=0)}}tn(4)}catch{}}var Un=class{constructor(g,T){this.g=g,this.map=T}};function zn(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vr(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ys(g){return g.h?1:g.g?g.g.size:0}function Tr(g,T){return g.h?g.h==T:g.g?g.g.has(T):!1}function Aa(g,T){g.g?g.g.add(T):g.h=T}function $c(g,T){g.h&&g.h==T?g.h=null:g.g&&g.g.has(T)&&g.g.delete(T)}zn.prototype.cancel=function(){if(this.i=Bc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Bc(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let T=g.i;for(const C of g.g.values())T=T.concat(C.D);return T}return w(g.i)}function ho(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(d(g)){for(var T=[],C=g.length,G=0;G<C;G++)T.push(g[G]);return T}T=[],C=0;for(G in g)T[C++]=g[G];return T}function fo(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(d(g)||typeof g=="string"){var T=[];g=g.length;for(var C=0;C<g;C++)T.push(C);return T}T=[],C=0;for(const G in g)T[C++]=G;return T}}}function po(g,T){if(g.forEach&&typeof g.forEach=="function")g.forEach(T,void 0);else if(d(g)||typeof g=="string")Array.prototype.forEach.call(g,T,void 0);else for(var C=fo(g),G=ho(g),pe=G.length,Te=0;Te<pe;Te++)T.call(void 0,G[Te],C&&C[Te],g)}var bl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hx(g,T){if(g){g=g.split("&");for(var C=0;C<g.length;C++){var G=g[C].indexOf("="),pe=null;if(0<=G){var Te=g[C].substring(0,G);pe=g[C].substring(G+1)}else Te=g[C];T(Te,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function Na(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Na){this.h=g.h,wl(this,g.j),this.o=g.o,this.g=g.g,mo(this,g.s),this.l=g.l;var T=g.i,C=new Xs;C.i=T.i,T.g&&(C.g=new Map(T.g),C.h=T.h),go(this,C),this.m=g.m}else g&&(T=String(g).match(bl))?(this.h=!1,wl(this,T[1]||"",!0),this.o=Jt(T[2]||""),this.g=Jt(T[3]||"",!0),mo(this,T[4]),this.l=Jt(T[5]||"",!0),go(this,T[6]||"",!0),this.m=Jt(T[7]||"")):(this.h=!1,this.i=new Xs(null,this.h))}Na.prototype.toString=function(){var g=[],T=this.j;T&&g.push(yo(T,Uc,!0),":");var C=this.g;return(C||T=="file")&&(g.push("//"),(T=this.o)&&g.push(yo(T,Uc,!0),"@"),g.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&g.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(yo(C,C.charAt(0)=="/"?yf:xf,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",yo(C,Md)),g.join("")};function Di(g){return new Na(g)}function wl(g,T,C){g.j=C?Jt(T,!0):T,g.j&&(g.j=g.j.replace(/:$/,""))}function mo(g,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);g.s=T}else g.s=null}function go(g,T,C){T instanceof Xs?(g.i=T,Qs(g.i,g.h)):(C||(T=yo(T,vf)),g.i=new Xs(T,g.h))}function Ar(g,T,C){g.i.set(T,C)}function xo(g){return Ar(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Jt(g,T){return g?T?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function yo(g,T,C){return typeof g=="string"?(g=encodeURI(g).replace(T,gf),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function gf(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Uc=/[#\/\?@]/g,xf=/[#\?:]/g,yf=/[#\?]/g,vf=/[#\?@]/g,Md=/#/g;function Xs(g,T){this.h=this.g=null,this.i=g||null,this.j=!!T}function Sn(g){g.g||(g.g=new Map,g.h=0,g.i&&hx(g.i,function(T,C){g.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}r=Xs.prototype,r.add=function(g,T){Sn(this),this.i=null,g=ts(this,g);var C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(T),this.h+=1,this};function bs(g,T){Sn(g),T=ts(g,T),g.g.has(T)&&(g.i=null,g.h-=g.g.get(T).length,g.g.delete(T))}function ws(g,T){return Sn(g),T=ts(g,T),g.g.has(T)}r.forEach=function(g,T){Sn(this),this.g.forEach(function(C,G){C.forEach(function(pe){g.call(T,pe,G,this)},this)},this)},r.na=function(){Sn(this);const g=Array.from(this.g.values()),T=Array.from(this.g.keys()),C=[];for(let G=0;G<T.length;G++){const pe=g[G];for(let Te=0;Te<pe.length;Te++)C.push(T[G])}return C},r.V=function(g){Sn(this);let T=[];if(typeof g=="string")ws(this,g)&&(T=T.concat(this.g.get(ts(this,g))));else{g=Array.from(this.g.values());for(let C=0;C<g.length;C++)T=T.concat(g[C])}return T},r.set=function(g,T){return Sn(this),this.i=null,g=ts(this,g),ws(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[T]),this.h+=1,this},r.get=function(g,T){return g?(g=this.V(g),0<g.length?String(g[0]):T):T};function vo(g,T,C){bs(g,T),0<C.length&&(g.i=null,g.g.set(ts(g,T),w(C)),g.h+=C.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],T=Array.from(this.g.keys());for(var C=0;C<T.length;C++){var G=T[C];const Te=encodeURIComponent(String(G)),tt=this.V(G);for(G=0;G<tt.length;G++){var pe=Te;tt[G]!==""&&(pe+="="+encodeURIComponent(String(tt[G]))),g.push(pe)}}return this.i=g.join("&")};function ts(g,T){return T=String(T),g.j&&(T=T.toLowerCase()),T}function Qs(g,T){T&&!g.j&&(Sn(g),g.i=null,g.g.forEach(function(C,G){var pe=G.toLowerCase();G!=pe&&(bs(this,G),vo(this,pe,C))},g)),g.j=T}function fx(g,T){const C=new Ri;if(c.Image){const G=new Image;G.onload=v(fi,C,"TestLoadImage: loaded",!0,T,G),G.onerror=v(fi,C,"TestLoadImage: error",!1,T,G),G.onabort=v(fi,C,"TestLoadImage: abort",!1,T,G),G.ontimeout=v(fi,C,"TestLoadImage: timeout",!1,T,G),c.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=g}else T(!1)}function bf(g,T){const C=new Ri,G=new AbortController,pe=setTimeout(()=>{G.abort(),fi(C,"TestPingServer: timeout",!1,T)},1e4);fetch(g,{signal:G.signal}).then(Te=>{clearTimeout(pe),Te.ok?fi(C,"TestPingServer: ok",!0,T):fi(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(pe),fi(C,"TestPingServer: error",!1,T)})}function fi(g,T,C,G,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),G(C)}catch{}}function px(){this.g=new Ot}function wf(g,T,C){const G=C||"";try{po(g,function(pe,Te){let tt=pe;h(pe)&&(tt=et(pe)),T.push(G+Te+"="+encodeURIComponent(tt))})}catch(pe){throw T.push(G+"type="+encodeURIComponent("_badmap")),pe}}function ka(g){this.l=g.Ub||null,this.j=g.eb||!1}_(ka,Ht),ka.prototype.g=function(){return new _l(this.l,this.j)},ka.prototype.i=(function(g){return function(){return g}})({});function _l(g,T){lt.call(this),this.D=g,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(_l,lt),r=_l.prototype,r.open=function(g,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=T,this.readyState=1,Es(this)},r.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(T.body=g),(this.D||c).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_s(this)),this.readyState=0},r.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Es(this)),this.g&&(this.readyState=3,Es(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_f(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function _f(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}r.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var T=g.value?g.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!g.done}))&&(this.response=this.responseText+=T)}g.done?_s(this):Es(this),this.readyState==3&&_f(this)}},r.Ra=function(g){this.g&&(this.response=this.responseText=g,_s(this))},r.Qa=function(g){this.g&&(this.response=g,_s(this))},r.ga=function(){this.g&&_s(this)};function _s(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Es(g)}r.setRequestHeader=function(g,T){this.u.append(g,T)},r.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=T.next();return g.join(`\r
`)};function Es(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(_l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Sa(g){let T="";return H(g,function(C,G){T+=G,T+=":",T+=C,T+=`\r
`}),T}function bo(g,T,C){e:{for(G in C){var G=!1;break e}G=!0}G||(C=Sa(C),typeof g=="string"?C!=null&&encodeURIComponent(String(C)):Ar(g,T,C))}function jr(g){lt.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(jr,lt);var mx=/^https?$/i,Vd=["POST","PUT"];r=jr.prototype,r.Ha=function(g){this.J=g},r.ea=function(g,T,C,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);T=T?T.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():O.g(),this.v=this.o?Kt(this.o):Kt(O),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(T,String(g),!0),this.B=!1}catch(Te){El(this,Te);return}if(g=C||"",C=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var pe in G)C.set(pe,G[pe]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const Te of G.keys())C.set(Te,G.get(Te));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(C.keys()).find(Te=>Te.toLowerCase()=="content-type"),pe=c.FormData&&g instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Vd,T,void 0))||G||pe||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Te,tt]of C)this.g.setRequestHeader(Te,tt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hc(this),this.u=!0,this.g.send(g),this.u=!1}catch(Te){El(this,Te)}};function El(g,T){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=T,g.m=5,zc(g),Fi(g)}function zc(g){g.A||(g.A=!0,Ct(g,"complete"),Ct(g,"error"))}r.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,Ct(this,"complete"),Ct(this,"abort"),Fi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fi(this,!0)),jr.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?$d(this):this.bb())},r.bb=function(){$d(this)};function $d(g){if(g.h&&typeof a<"u"&&(!g.v[1]||pi(g)!=4||g.Z()!=2)){if(g.u&&pi(g)==4)kr(g.Ea,0,g);else if(Ct(g,"readystatechange"),pi(g)==4){g.h=!1;try{const tt=g.Z();e:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var G;if(G=tt===0){var pe=String(g.D).match(bl)[1]||null;!pe&&c.self&&c.self.location&&(pe=c.self.location.protocol.slice(0,-1)),G=!mx.test(pe?pe.toLowerCase():"")}C=G}if(C)Ct(g,"complete"),Ct(g,"success");else{g.m=6;try{var Te=2<pi(g)?g.g.statusText:""}catch{Te=""}g.l=Te+" ["+g.Z()+"]",zc(g)}}finally{Fi(g)}}}}function Fi(g,T){if(g.g){Hc(g);const C=g.g,G=g.v[0]?()=>{}:null;g.g=null,g.v=null,T||Ct(g,"ready");try{C.onreadystatechange=G}catch{}}}function Hc(g){g.I&&(c.clearTimeout(g.I),g.I=null)}r.isActive=function(){return!!this.g};function pi(g){return g.g?g.g.readyState:0}r.Z=function(){try{return 2<pi(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(g){if(this.g){var T=this.g.responseText;return g&&T.indexOf(g)==0&&(T=T.substring(g.length)),ut(T)}};function Bd(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Wc(g){const T={};g=(g.g&&2<=pi(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<g.length;G++){if(P(g[G]))continue;var C=M(g[G]);const pe=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Te=T[pe]||[];T[pe]=Te,Te.push(C)}S(T,function(G){return G.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Js(g,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||T}function Ud(g){this.Aa=0,this.i=[],this.j=new Ri,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Js("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Js("baseRetryDelayMs",5e3,g),this.cb=Js("retryDelaySeedMs",1e4,g),this.Wa=Js("forwardChannelMaxRetries",2,g),this.wa=Js("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new zn(g&&g.concurrentRequestLimit),this.Da=new px,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ud.prototype,r.la=8,r.G=1,r.connect=function(g,T,C,G){wr(0),this.W=g,this.H=T||{},C&&G!==void 0&&(this.H.OSID=C,this.H.OAID=G),this.F=this.X,this.I=Nf(this,null,this.W),Zs(this)};function Cn(g){if(qc(g),g.G==3){var T=g.U++,C=Di(g.I);if(Ar(C,"SID",g.K),Ar(C,"RID",T),Ar(C,"TYPE","terminate"),Ca(g,C),T=new oe(g,g.j,T),T.L=2,T.v=xo(Di(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(T.v.toString(),"")}catch{}!C&&c.Image&&(new Image().src=T.v,C=!0),C||(T.g=kf(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Le(T)}Af(g)}function Ts(g){g.g&&(zd(g),g.g.cancel(),g.g=null)}function qc(g){Ts(g),g.u&&(c.clearTimeout(g.u),g.u=null),Yc(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&c.clearTimeout(g.s),g.s=null)}function Zs(g){if(!Vr(g.h)&&!g.s){g.s=!0;var T=g.Ga;De||Ne(),we||(De(),we=!0),_e.add(T,g),g.B=0}}function gx(g,T){return Ys(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=T.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=qr(x(g.Ga,g,T),Tf(g,g.B)),g.B++,!0)}r.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const pe=new oe(this,this.j,g);let Te=this.o;if(this.S&&(Te?(Te=N(Te),R(Te,this.S)):Te=this.S),this.m!==null||this.O||(pe.H=Te,Te=null),this.P)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var G=this.i[C];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(T+=G,4096<T){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=wo(this,pe,T),C=Di(this.I),Ar(C,"RID",g),Ar(C,"CVER",22),this.D&&Ar(C,"X-HTTP-Session-Id",this.D),Ca(this,C),Te&&(this.O?T="headers="+encodeURIComponent(String(Sa(Te)))+"&"+T:this.m&&bo(C,this.m,Te)),Aa(this.h,pe),this.Ua&&Ar(C,"TYPE","init"),this.P?(Ar(C,"$req",T),Ar(C,"SID","null"),pe.T=!0,je(pe,C,null)):je(pe,C,T),this.G=2}}else this.G==3&&(g?Gc(this,g):this.i.length==0||Vr(this.h)||Gc(this))};function Gc(g,T){var C;T?C=T.l:C=g.U++;const G=Di(g.I);Ar(G,"SID",g.K),Ar(G,"RID",C),Ar(G,"AID",g.T),Ca(g,G),g.m&&g.o&&bo(G,g.m,g.o),C=new oe(g,g.j,C,g.B+1),g.m===null&&(C.H=g.o),T&&(g.i=T.D.concat(g.i)),T=wo(g,C,1e3),C.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Aa(g.h,C),je(C,G,T)}function Ca(g,T){g.H&&H(g.H,function(C,G){Ar(T,G,C)}),g.l&&po({},function(C,G){Ar(T,G,C)})}function wo(g,T,C){C=Math.min(g.i.length,C);var G=g.l?x(g.l.Na,g.l,g):null;e:{var pe=g.i;let Te=-1;for(;;){const tt=["count="+C];Te==-1?0<C?(Te=pe[0].g,tt.push("ofs="+Te)):Te=0:tt.push("ofs="+Te);let fr=!0;for(let un=0;un<C;un++){let Zt=pe[un].g;const vn=pe[un].map;if(Zt-=Te,0>Zt)Te=Math.max(0,pe[un].g-100),fr=!1;else try{wf(vn,tt,"req"+Zt+"_")}catch{G&&G(vn)}}if(fr){G=tt.join("&");break e}}}return g=g.i.splice(0,C),T.D=g,G}function Tl(g){if(!g.g&&!g.u){g.Y=1;var T=g.Fa;De||Ne(),we||(De(),we=!0),_e.add(T,g),g.v=0}}function Kc(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=qr(x(g.Fa,g),Tf(g,g.v)),g.v++,!0)}r.Fa=function(){if(this.u=null,Ef(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=qr(x(this.ab,this),g)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wr(10),Ts(this),Ef(this))};function zd(g){g.A!=null&&(c.clearTimeout(g.A),g.A=null)}function Ef(g){g.g=new oe(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var T=Di(g.qa);Ar(T,"RID","rpc"),Ar(T,"SID",g.K),Ar(T,"AID",g.T),Ar(T,"CI",g.F?"0":"1"),!g.F&&g.ja&&Ar(T,"TO",g.ja),Ar(T,"TYPE","xmlhttp"),Ca(g,T),g.m&&g.o&&bo(T,g.m,g.o),g.L&&(g.g.I=g.L);var C=g.g;g=g.ia,C.L=1,C.v=xo(Di(T)),C.m=null,C.P=!0,Ve(C,g)}r.Za=function(){this.C!=null&&(this.C=null,Ts(this),Kc(this),wr(19))};function Yc(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function Xc(g,T){var C=null;if(g.g==T){Yc(g),zd(g),g.g=null;var G=2}else if(Tr(g.h,T))C=T.D,$c(g.h,T),G=1;else return;if(g.G!=0){if(T.o)if(G==1){C=T.m?T.m.length:0,T=Date.now()-T.F;var pe=g.B;G=yn(),Ct(G,new es(G,C)),Zs(g)}else Tl(g);else if(pe=T.s,pe==3||pe==0&&0<T.X||!(G==1&&gx(g,T)||G==2&&Kc(g)))switch(C&&0<C.length&&(T=g.h,T.i=T.i.concat(C)),pe){case 1:Ia(g,5);break;case 4:Ia(g,10);break;case 3:Ia(g,6);break;default:Ia(g,2)}}}function Tf(g,T){let C=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(C*=2),C*T}function Ia(g,T){if(g.j.info("Error code "+T),T==2){var C=x(g.fb,g),G=g.Xa;const pe=!G;G=new Na(G||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||wl(G,"https"),xo(G),pe?fx(G.toString(),C):bf(G.toString(),C)}else wr(2);g.G=0,g.l&&g.l.sa(T),Af(g),qc(g)}r.fb=function(g){g?(this.j.info("Successfully pinged google.com"),wr(2)):(this.j.info("Failed to ping google.com"),wr(1))};function Af(g){if(g.G=0,g.ka=[],g.l){const T=Bc(g.h);(T.length!=0||g.i.length!=0)&&(E(g.ka,T),E(g.ka,g.i),g.h.i.length=0,w(g.i),g.i.length=0),g.l.ra()}}function Nf(g,T,C){var G=C instanceof Na?Di(C):new Na(C);if(G.g!="")T&&(G.g=T+"."+G.g),mo(G,G.s);else{var pe=c.location;G=pe.protocol,T=T?T+"."+pe.hostname:pe.hostname,pe=+pe.port;var Te=new Na(null);G&&wl(Te,G),T&&(Te.g=T),pe&&mo(Te,pe),C&&(Te.l=C),G=Te}return C=g.D,T=g.ya,C&&T&&Ar(G,C,T),Ar(G,"VER",g.la),Ca(g,G),G}function kf(g,T,C){if(T&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=g.Ca&&!g.pa?new jr(new ka({eb:C})):new jr(g.pa),T.Ha(g.J),T}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hd(){}r=Hd.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Qc(){}Qc.prototype.g=function(g,T){return new ni(g,T)};function ni(g,T){lt.call(this),this.g=new Ud(T),this.l=g,this.h=T&&T.messageUrlParams||null,g=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(g?g["X-WebChannel-Content-Type"]=T.messageContentType:g={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(g?g["X-WebChannel-Client-Profile"]=T.va:g={"X-WebChannel-Client-Profile":T.va}),this.g.S=g,(g=T&&T.Sb)&&!P(g)&&(this.g.m=g),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!P(T)&&(this.g.D=T,g=this.h,g!==null&&T in g&&(g=this.h,T in g&&delete g[T])),this.j=new ea(this)}_(ni,lt),ni.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ni.prototype.close=function(){Cn(this.g)},ni.prototype.o=function(g){var T=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.u&&(C={},C.__data__=et(g),g=C);T.i.push(new Un(T.Ya++,g)),T.G==3&&Zs(T)},ni.prototype.N=function(){this.g.l=null,delete this.j,Cn(this.g),delete this.g,ni.aa.N.call(this)};function Sf(g){Lt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var T=g.__sm__;if(T){e:{for(const C in T){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,T=T!==null&&g in T?T[g]:void 0),this.data=T}else this.data=g}_(Sf,Lt);function Cf(){qt.call(this),this.status=1}_(Cf,qt);function ea(g){this.g=g}_(ea,Hd),ea.prototype.ua=function(){Ct(this.g,"a")},ea.prototype.ta=function(g){Ct(this.g,new Sf(g))},ea.prototype.sa=function(g){Ct(this.g,new Cf)},ea.prototype.ra=function(){Ct(this.g,"b")},Qc.prototype.createWebChannel=Qc.prototype.g,ni.prototype.send=ni.prototype.o,ni.prototype.open=ni.prototype.m,ni.prototype.close=ni.prototype.close,k3=function(){return new Qc},N3=function(){return yn()},A3=hr,$v={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},X.NO_ERROR=0,X.TIMEOUT=8,X.HTTP_ERROR=6,Qp=X,Z.COMPLETE="complete",T3=Z,pt.EventType=nt,nt.OPEN="a",nt.CLOSE="b",nt.ERROR="c",nt.MESSAGE="d",lt.prototype.listen=lt.prototype.K,A0=pt,jr.prototype.listenOnce=jr.prototype.L,jr.prototype.getLastError=jr.prototype.Ka,jr.prototype.getLastErrorCode=jr.prototype.Ba,jr.prototype.getStatus=jr.prototype.Z,jr.prototype.getResponseJson=jr.prototype.Oa,jr.prototype.getResponseText=jr.prototype.oa,jr.prototype.send=jr.prototype.ea,jr.prototype.setWithCredentials=jr.prototype.Ha,E3=jr}).apply(typeof Ap<"u"?Ap:typeof self<"u"?self:typeof window<"u"?window:{});const E4="@firebase/firestore",T4="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ai.UNAUTHENTICATED=new ai(null),ai.GOOGLE_CREDENTIALS=new ai("google-credentials-uid"),ai.FIRST_PARTY=new ai("first-party-uid"),ai.MOCK_USER=new ai("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ad="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new wg("@firebase/firestore");function Cu(){return oc.logLevel}function Ge(r,...e){if(oc.logLevel<=Yt.DEBUG){const t=e.map(cb);oc.debug(`Firestore (${Ad}): ${r}`,...t)}}function ci(r,...e){if(oc.logLevel<=Yt.ERROR){const t=e.map(cb);oc.error(`Firestore (${Ad}): ${r}`,...t)}}function rh(r,...e){if(oc.logLevel<=Yt.WARN){const t=e.map(cb);oc.warn(`Firestore (${Ad}): ${r}`,...t)}}function cb(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(r="Unexpected state"){const e=`FIRESTORE (${Ad}) INTERNAL ASSERTION FAILED: `+r;throw ci(e),new Error(e)}function yt(r,e){r||ft()}function Ft(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends ys{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ai.UNAUTHENTICATED)))}shutdown(){}}class zF{constructor(e){this.t=e,this.currentUser=ai.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){yt(this.o===void 0);let n=this.i;const i=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let s=new Bs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Bs,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const d=s;e.enqueueRetryable((async()=>{await d.promise,await i(this.currentUser)}))},c=d=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Bs)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(yt(typeof n.accessToken=="string"),new BF(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string"),new ai(e)}}class HF{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ai.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class WF{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new HF(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(ai.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class A4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qF{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Wi(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){yt(this.o===void 0);const n=s=>{s.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,Ge("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>n(s)))};const i=s=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new A4(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(yt(typeof t.token=="string"),this.R=t.token,new A4(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S3(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=GF(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%62))}return n}}function jt(r,e){return r<e?-1:r>e?1:0}function Bv(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=r.codePointAt(t),i=e.codePointAt(t);if(n!==i){if(n<128&&i<128)return jt(n,i);{const s=S3(),a=KF(s.encode(N4(r,t)),s.encode(N4(e,t)));return a!==0?a:jt(n,i)}}t+=n>65535?2:1}return jt(r.length,e.length)}function N4(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function KF(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return jt(r[t],e[t]);return jt(r.length,e.length)}function Qu(r,e,t){return r.length===e.length&&r.every(((n,i)=>t(n,e[i])))}function I3(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=-62135596800,S4=1e6;class or{static now(){return or.fromMillis(Date.now())}static fromDate(e){return or.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*S4);return new or(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ze(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ze(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<k4)throw new Ze(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/S4}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-k4;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{static fromTimestamp(e){return new _t(e)}static min(){return new _t(new or(0,0))}static max(){return new _t(new or(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4="__name__";class oa{constructor(e,t,n){t===void 0?t=0:t>e.length&&ft(),n===void 0?n=e.length-t:n>e.length-t&&ft(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return oa.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof oa?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=oa.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return jt(e.length,t.length)}static compareSegments(e,t){const n=oa.isNumericId(e),i=oa.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?oa.extractNumericId(e).compare(oa.extractNumericId(t)):Bv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jo.fromString(e.substring(4,e.length-2))}}class ar extends oa{construct(e,t,n){return new ar(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ze(Ie.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((i=>i.length>0)))}return new ar(t)}static emptyPath(){return new ar([])}}const YF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zr extends oa{construct(e,t,n){return new zr(e,t,n)}static isValidIdentifier(e){return YF.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===C4}static keyField(){return new zr([C4])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(n.length===0)throw new Ze(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Ze(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ze(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(n+=c,i++):(s(),i++)}if(s(),a)throw new Ze(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zr(t)}static emptyPath(){return new zr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.path=e}static fromPath(e){return new it(ar.fromString(e))}static fromName(e){return new it(ar.fromString(e).popFirst(5))}static empty(){return new it(ar.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ar.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ar.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new it(new ar(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=-1;class _m{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function Uv(r){return r.fields.find((e=>e.kind===2))}function Bl(r){return r.fields.filter((e=>e.kind!==2))}_m.UNKNOWN_ID=-1;class Jp{constructor(e,t){this.fieldPath=e,this.kind=t}}class ih{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ih(0,Xi.min())}}function XF(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=_t.fromTimestamp(n===1e9?new or(t+1,0):new or(t,n));return new Xi(i,it.empty(),e)}function P3(r){return new Xi(r.readTime,r.key,nh)}class Xi{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Xi(_t.min(),it.empty(),nh)}static max(){return new Xi(_t.max(),it.empty(),nh)}}function ub(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=it.comparator(r.documentKey,e.documentKey),t!==0?t:jt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class j3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(r){if(r.code!==Ie.FAILED_PRECONDITION||r.message!==R3)throw r;Ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me(((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):me.reject(t)}static resolve(e){return new me(((t,n)=>{t(e)}))}static reject(e){return new me(((t,n)=>{n(e)}))}static waitFor(e){return new me(((t,n)=>{let i=0,s=0,a=!1;e.forEach((c=>{++i,c.next((()=>{++s,a&&s===i&&t()}),(d=>n(d)))})),a=!0,s===i&&t()}))}static or(e){let t=me.resolve(!1);for(const n of e)t=t.next((i=>i?me.resolve(i):n()));return t}static forEach(e,t){const n=[];return e.forEach(((i,s)=>{n.push(t.call(this,i,s))})),this.waitFor(n)}static mapArray(e,t){return new me(((n,i)=>{const s=e.length,a=new Array(s);let c=0;for(let d=0;d<s;d++){const h=d;t(e[h]).next((p=>{a[h]=p,++c,c===s&&n(a)}),(p=>i(p)))}}))}static doWhile(e,t){return new me(((n,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):n()};s()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="SimpleDb";class Ag{static open(e,t,n,i){try{return new Ag(t,e.transaction(i,n))}catch(s){throw new D0(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new Bs,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new D0(e,t.error)):this.m.resolve()},this.transaction.onerror=n=>{const i=db(n.target.error);this.m.reject(new D0(e,i))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(Ge(Bi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new JF(t)}}class Zo{static delete(e){return Ge(Bi,"Removing database:",e),Hl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Y1())return!1;if(Zo.v())return!0;const e=mn(),t=Zo.C(e),n=0<t&&t<10,i=D3(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.O=n,Zo.C(mn())===12.2&&ci("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(Ge(Bi,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{n(new D0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?n(new Ze(Ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new Ze(Ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new D0(e,a))},i.onupgradeneeded=s=>{Ge(Bi,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.O.B(a,i.transaction,s.oldVersion,this.version).next((()=>{Ge(Bi,"Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.N(e);const c=Ag.open(this.db,e,s?"readonly":"readwrite",n),d=i(c).next((h=>(c.S(),h))).catch((h=>(c.abort(h),me.reject(h)))).toPromise();return d.catch((()=>{})),await c.p,d}catch(c){const d=c,h=d.name!=="FirebaseError"&&a<3;if(Ge(Bi,"Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function D3(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class QF{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return Hl(this.q.delete())}}class D0 extends Ze{constructor(e,t){super(Ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function gl(r){return r.name==="IndexedDbTransactionError"}class JF{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(Ge(Bi,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ge(Bi,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Hl(n)}add(e){return Ge(Bi,"ADD",this.store.name,e,e),Hl(this.store.add(e))}get(e){return Hl(this.store.get(e)).next((t=>(t===void 0&&(t=null),Ge(Bi,"GET",this.store.name,e,t),t)))}delete(e){return Ge(Bi,"DELETE",this.store.name,e),Hl(this.store.delete(e))}count(){return Ge(Bi,"COUNT",this.store.name),Hl(this.store.count())}G(e,t){const n=this.options(e,t),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(n.range);return new me(((a,c)=>{s.onerror=d=>{c(d.target.error)},s.onsuccess=d=>{a(d.target.result)}}))}{const s=this.cursor(n),a=[];return this.j(s,((c,d)=>{a.push(d)})).next((()=>a))}}H(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new me(((i,s)=>{n.onerror=a=>{s(a.target.error)},n.onsuccess=a=>{i(a.target.result)}}))}J(e,t){Ge(Bi,"DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const i=this.cursor(n);return this.j(i,((s,a,c)=>c.delete()))}Z(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.j(i,t)}X(e){const t=this.cursor({});return new me(((n,i)=>{t.onerror=s=>{const a=db(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((c=>{c?a.continue():n()})):n()}}))}j(e,t){const n=[];return new me(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const c=a.target.result;if(!c)return void i();const d=new QF(c),h=t(c.primaryKey,c.value,d);if(h instanceof me){const p=h.catch((m=>(d.done(),me.reject(m))));n.push(p)}d.isDone?i():d.K===null?c.continue():c.continue(d.K)}})).next((()=>me.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hl(r){return new me(((e,t)=>{r.onsuccess=n=>{const i=n.target.result;e(i)},r.onerror=n=>{const i=db(n.target.error);t(i)}}))}let I4=!1;function db(r){const e=Zo.C(mn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new Ze("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return I4||(I4=!0,setTimeout((()=>{throw n}),0)),n}}return r}const F0="IndexBackfiller";class ZF{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){Ge(F0,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ee.ne();Ge(F0,`Documents written: ${t}`)}catch(t){gl(t)?Ge(F0,"Ignoring IndexedDB error during index backfill: ",t):await kc(t)}await this.te(6e4)}))}}class eO{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.re(t,e)))}re(e,t){const n=new Set;let i=t,s=!0;return me.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!n.has(a))return Ge(F0,`Processing collection: ${a}`),this.ie(e,a,i).next((c=>{i-=c,n.add(a)}));s=!1})))).next((()=>t-i))}ie(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,n).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this.se(i,s))).next((c=>(Ge(F0,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c)))).next((()=>a.size))}))))}se(e,t){let n=e;return t.changes.forEach(((i,s)=>{const a=P3(s);ub(a,n)>0&&(n=a)})),new Xi(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.oe(n),this._e=n=>t.writeSequenceNumber(n))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}fs.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=-1;function Uh(r){return r==null}function sh(r){return r===0&&1/r==-1/0}function tO(r){return typeof r=="number"&&Number.isInteger(r)&&!sh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="";function Jn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=P4(e)),e=rO(r.get(t),e);return P4(e)}function rO(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const s=r.charAt(i);switch(s){case"\0":t+="";break;case Em:t+="";break;default:t+=s}}return t}function P4(r){return r+Em+""}function la(r){const e=r.length;if(yt(e>=2),e===2)return yt(r.charAt(0)===Em&&r.charAt(1)===""),ar.emptyPath();const t=e-2,n=[];let i="";for(let s=0;s<e;){const a=r.indexOf(Em,s);switch((a<0||a>t)&&ft(),r.charAt(a+1)){case"":const c=r.substring(s,a);let d;i.length===0?d=c:(i+=c,d=i,i=""),n.push(d);break;case"":i+=r.substring(s,a),i+="\0";break;case"":i+=r.substring(s,a+1);break;default:ft()}s=a+2}return new ar(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul="remoteDocuments",zh="owner",vu="owner",ah="mutationQueues",nO="userId",Fs="mutations",R4="batchId",Yl="userMutationsIndex",j4=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(r,e){return[r,Jn(e)]}function F3(r,e,t){return[r,Jn(e),t]}const iO={},Ju="documentMutations",Tm="remoteDocumentsV14",sO=["prefixPath","collectionGroup","readTime","documentId"],em="documentKeyIndex",aO=["prefixPath","collectionGroup","documentId"],O3="collectionGroupIndex",oO=["collectionGroup","readTime","prefixPath","documentId"],oh="remoteDocumentGlobal",zv="remoteDocumentGlobalKey",Zu="targets",L3="queryTargetsIndex",lO=["canonicalId","targetId"],ed="targetDocuments",cO=["targetId","path"],hb="documentTargetsIndex",uO=["path","targetId"],Am="targetGlobalKey",ec="targetGlobal",lh="collectionParents",dO=["collectionId","parent"],td="clientMetadata",hO="clientId",Ng="bundles",fO="bundleId",kg="namedQueries",pO="name",fb="indexConfiguration",mO="indexId",Hv="collectionGroupIndex",gO="collectionGroup",Nm="indexState",xO=["indexId","uid"],M3="sequenceNumberIndex",yO=["uid","sequenceNumber"],km="indexEntries",vO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],V3="documentKeyIndex",bO=["indexId","uid","orderedDocumentKey"],Sg="documentOverlays",wO=["userId","collectionPath","documentId"],Wv="collectionPathOverlayIndex",_O=["userId","collectionPath","largestBatchId"],$3="collectionGroupOverlayIndex",EO=["userId","collectionGroup","largestBatchId"],pb="globals",TO="name",B3=[ah,Fs,Ju,Ul,Zu,zh,ec,ed,td,oh,lh,Ng,kg],AO=[...B3,Sg],U3=[ah,Fs,Ju,Tm,Zu,zh,ec,ed,td,oh,lh,Ng,kg,Sg],z3=U3,mb=[...z3,fb,Nm,km],NO=mb,kO=[...mb,pb];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends j3{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function gn(r,e){const t=Ft(r);return Zo.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function xl(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function H3(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,t){this.comparator=e,this.root=t||Fn.EMPTY}insert(e,t){return new Mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fn.BLACK,null,null))}remove(e){return new Mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Np(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Np(this.root,e,this.comparator,!1)}getReverseIterator(){return new Np(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Np(this.root,e,this.comparator,!0)}}class Np{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fn{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=n??Fn.RED,this.left=i??Fn.EMPTY,this.right=s??Fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new Fn(e??this.key,t??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Fn.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}}Fn.EMPTY=null,Fn.RED=!0,Fn.BLACK=!1;Fn.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(e,t,n,i,s){return this}insert(e,t,n){return new Fn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.comparator=e,this.data=new Mr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new F4(this.data.getIterator())}getIteratorFrom(e){return new F4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof vr)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new vr(this.comparator);return t.data=e,t}}class F4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bu(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this.fields=e,e.sort(zr.comparator)}static empty(){return new _i([])}unionWith(e){let t=new vr(zr.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new _i(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qu(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new W3("Invalid base64 string: "+s):s}})(e);return new ln(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const SO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eo(r){if(yt(!!r),typeof r=="string"){let e=0;const t=SO.exec(r);if(yt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Fr(r.seconds),nanos:Fr(r.nanos)}}function Fr(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function to(r){return typeof r=="string"?ln.fromBase64String(r):ln.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3="server_timestamp",G3="__type__",K3="__previous_value__",Y3="__local_write_time__";function gb(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{})[G3])===null||t===void 0?void 0:t.stringValue)===q3}function Cg(r){const e=r.mapValue.fields[K3];return gb(e)?Cg(e):e}function ch(r){const e=eo(r.mapValue.fields[Y3].timestampValue);return new or(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,t,n,i,s,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}const Sm="(default)";class lc{constructor(e,t){this.projectId=e,this.database=t||Sm}static empty(){return new lc("","")}get isDefaultDatabase(){return this.database===Sm}isEqual(e){return e instanceof lc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="__type__",X3="__max__",Go={mapValue:{fields:{__type__:{stringValue:X3}}}},yb="__vector__",rd="value",tm={nullValue:"NULL_VALUE"};function nl(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?gb(r)?4:Q3(r)?9007199254740991:Ig(r)?10:11:ft()}function xa(r,e){if(r===e)return!0;const t=nl(r);if(t!==nl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ch(r).isEqual(ch(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=eo(i.timestampValue),c=eo(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(i,s){return to(i.bytesValue).isEqual(to(s.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(i,s){return Fr(i.geoPointValue.latitude)===Fr(s.geoPointValue.latitude)&&Fr(i.geoPointValue.longitude)===Fr(s.geoPointValue.longitude)})(r,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Fr(i.integerValue)===Fr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Fr(i.doubleValue),c=Fr(s.doubleValue);return a===c?sh(a)===sh(c):isNaN(a)&&isNaN(c)}return!1})(r,e);case 9:return Qu(r.arrayValue.values||[],e.arrayValue.values||[],xa);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(D4(a)!==D4(c))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(c[d]===void 0||!xa(a[d],c[d])))return!1;return!0})(r,e);default:return ft()}}function uh(r,e){return(r.values||[]).find((t=>xa(t,e)))!==void 0}function il(r,e){if(r===e)return 0;const t=nl(r),n=nl(e);if(t!==n)return jt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(r.booleanValue,e.booleanValue);case 2:return(function(s,a){const c=Fr(s.integerValue||s.doubleValue),d=Fr(a.integerValue||a.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(r,e);case 3:return O4(r.timestampValue,e.timestampValue);case 4:return O4(ch(r),ch(e));case 5:return Bv(r.stringValue,e.stringValue);case 6:return(function(s,a){const c=to(s),d=to(a);return c.compareTo(d)})(r.bytesValue,e.bytesValue);case 7:return(function(s,a){const c=s.split("/"),d=a.split("/");for(let h=0;h<c.length&&h<d.length;h++){const p=jt(c[h],d[h]);if(p!==0)return p}return jt(c.length,d.length)})(r.referenceValue,e.referenceValue);case 8:return(function(s,a){const c=jt(Fr(s.latitude),Fr(a.latitude));return c!==0?c:jt(Fr(s.longitude),Fr(a.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return L4(r.arrayValue,e.arrayValue);case 10:return(function(s,a){var c,d,h,p;const m=s.fields||{},x=a.fields||{},v=(c=m[rd])===null||c===void 0?void 0:c.arrayValue,_=(d=x[rd])===null||d===void 0?void 0:d.arrayValue,w=jt(((h=v?.values)===null||h===void 0?void 0:h.length)||0,((p=_?.values)===null||p===void 0?void 0:p.length)||0);return w!==0?w:L4(v,_)})(r.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Go.mapValue&&a===Go.mapValue)return 0;if(s===Go.mapValue)return 1;if(a===Go.mapValue)return-1;const c=s.fields||{},d=Object.keys(c),h=a.fields||{},p=Object.keys(h);d.sort(),p.sort();for(let m=0;m<d.length&&m<p.length;++m){const x=Bv(d[m],p[m]);if(x!==0)return x;const v=il(c[d[m]],h[p[m]]);if(v!==0)return v}return jt(d.length,p.length)})(r.mapValue,e.mapValue);default:throw ft()}}function O4(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return jt(r,e);const t=eo(r),n=eo(e),i=jt(t.seconds,n.seconds);return i!==0?i:jt(t.nanos,n.nanos)}function L4(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const s=il(t[i],n[i]);if(s)return s}return jt(t.length,n.length)}function nd(r){return Gv(r)}function Gv(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=eo(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return to(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return it.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",i=!0;for(const s of t.values||[])i?i=!1:n+=",",n+=Gv(s);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${Gv(t.fields[a])}`;return i+"}"})(r.mapValue):ft()}function rm(r){switch(nl(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cg(r);return e?16+rm(e):16;case 5:return 2*r.stringValue.length;case 6:return to(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,s)=>i+rm(s)),0)})(r.arrayValue);case 10:case 11:return(function(n){let i=0;return xl(n.fields,((s,a)=>{i+=s.length+rm(a)})),i})(r.mapValue);default:throw ft()}}function dh(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Kv(r){return!!r&&"integerValue"in r}function hh(r){return!!r&&"arrayValue"in r}function M4(r){return!!r&&"nullValue"in r}function V4(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function nm(r){return!!r&&"mapValue"in r}function Ig(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{})[xb])===null||t===void 0?void 0:t.stringValue)===yb}function O0(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return xl(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=O0(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=O0(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Q3(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===X3}const J3={mapValue:{fields:{[xb]:{stringValue:yb},[rd]:{arrayValue:{}}}}};function IO(r){return"nullValue"in r?tm:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?dh(lc.empty(),it.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Ig(r)?J3:{mapValue:{}}:ft()}function PO(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?dh(lc.empty(),it.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?J3:"mapValue"in r?Ig(r)?{mapValue:{}}:Go:ft()}function $4(r,e){const t=il(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function B4(r,e){const t=il(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!nm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=O0(t)}setAll(e){let t=zr.emptyPath(),n={},i=[];e.forEach(((a,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,n,i),n={},i=[],t=c.popLast()}a?n[c.lastSegment()]=O0(a):i.push(c.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());nm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];nm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){xl(t,((i,s)=>e[i]=s));for(const i of n)delete e[i]}clone(){return new On(O0(this.value))}}function Z3(r){const e=[];return xl(r.fields,((t,n)=>{const i=new zr([t]);if(nm(n)){const s=Z3(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new _i(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t,n,i,s,a,c){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Or(e,0,_t.min(),_t.min(),_t.min(),On.empty(),0)}static newFoundDocument(e,t,n,i){return new Or(e,1,t,_t.min(),n,i,0)}static newNoDocument(e,t){return new Or(e,2,t,_t.min(),_t.min(),On.empty(),0)}static newUnknownDocument(e,t){return new Or(e,3,t,_t.min(),_t.min(),On.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Or&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Or(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,t){this.position=e,this.inclusive=t}}function U4(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const s=e[i],a=r.position[i];if(s.field.isKeyField()?n=it.comparator(it.fromName(a.referenceValue),t.key):n=il(a,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function z4(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!xa(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t="asc"){this.field=e,this.dir=t}}function RO(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{}class Xt extends eS{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new jO(e,t,n):t==="array-contains"?new OO(e,n):t==="in"?new aS(e,n):t==="not-in"?new LO(e,n):t==="array-contains-any"?new MO(e,n):new Xt(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new DO(e,n):new FO(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(il(t,this.value)):t!==null&&nl(this.value)===nl(t)&&this.matchesComparison(il(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ft()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xr extends eS{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new xr(e,t)}matches(e){return sd(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function sd(r){return r.op==="and"}function Yv(r){return r.op==="or"}function vb(r){return tS(r)&&sd(r)}function tS(r){for(const e of r.filters)if(e instanceof xr)return!1;return!0}function Xv(r){if(r instanceof Xt)return r.field.canonicalString()+r.op.toString()+nd(r.value);if(vb(r))return r.filters.map((e=>Xv(e))).join(",");{const e=r.filters.map((t=>Xv(t))).join(",");return`${r.op}(${e})`}}function rS(r,e){return r instanceof Xt?(function(n,i){return i instanceof Xt&&n.op===i.op&&n.field.isEqual(i.field)&&xa(n.value,i.value)})(r,e):r instanceof xr?(function(n,i){return i instanceof xr&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((s,a,c)=>s&&rS(a,i.filters[c])),!0):!1})(r,e):void ft()}function nS(r,e){const t=r.filters.concat(e);return xr.create(t,r.op)}function iS(r){return r instanceof Xt?(function(t){return`${t.field.canonicalString()} ${t.op} ${nd(t.value)}`})(r):r instanceof xr?(function(t){return t.op.toString()+" {"+t.getFilters().map(iS).join(" ,")+"}"})(r):"Filter"}class jO extends Xt{constructor(e,t,n){super(e,t,n),this.key=it.fromName(n.referenceValue)}matches(e){const t=it.comparator(e.key,this.key);return this.matchesComparison(t)}}class DO extends Xt{constructor(e,t){super(e,"in",t),this.keys=sS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class FO extends Xt{constructor(e,t){super(e,"not-in",t),this.keys=sS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function sS(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((n=>it.fromName(n.referenceValue)))}class OO extends Xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hh(t)&&uh(t.arrayValue,this.value)}}class aS extends Xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&uh(this.value.arrayValue,t)}}class LO extends Xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!uh(this.value.arrayValue,t)}}class MO extends Xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>uh(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,t=null,n=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.le=null}}function Qv(r,e=null,t=[],n=[],i=null,s=null,a=null){return new VO(r,e,t,n,i,s,a)}function cc(r){const e=Ft(r);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>Xv(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(s){return s.field.canonicalString()+s.dir})(n))).join(","),Uh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>nd(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>nd(n))).join(",")),e.le=t}return e.le}function Hh(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!RO(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!rS(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!z4(r.startAt,e.startAt)&&z4(r.endAt,e.endAt)}function Cm(r){return it.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Im(r,e){return r.filters.filter((t=>t instanceof Xt&&t.field.isEqual(e)))}function H4(r,e,t){let n=tm,i=!0;for(const s of Im(r,e)){let a=tm,c=!0;switch(s.op){case"<":case"<=":a=IO(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,c=!1;break;case"!=":case"not-in":a=tm}$4({value:n,inclusive:i},{value:a,inclusive:c})<0&&(n=a,i=c)}if(t!==null){for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(e)){const a=t.position[s];$4({value:n,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(n=a,i=t.inclusive);break}}return{value:n,inclusive:i}}function W4(r,e,t){let n=Go,i=!0;for(const s of Im(r,e)){let a=Go,c=!0;switch(s.op){case">=":case">":a=PO(s.value),c=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,c=!1;break;case"!=":case"not-in":a=Go}B4({value:n,inclusive:i},{value:a,inclusive:c})>0&&(n=a,i=c)}if(t!==null){for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(e)){const a=t.position[s];B4({value:n,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(n=a,i=t.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t=null,n=[],i=[],s=null,a="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function $O(r,e,t,n,i,s,a,c){return new Nd(r,e,t,n,i,s,a,c)}function Wh(r){return new Nd(r)}function q4(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function oS(r){return r.collectionGroup!==null}function L0(r){const e=Ft(r);if(e.he===null){e.he=[];const t=new Set;for(const s of e.explicitOrderBy)e.he.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new vr(zr.comparator);return a.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.he.push(new fh(s,n))})),t.has(zr.keyField().canonicalString())||e.he.push(new fh(zr.keyField(),n))}return e.he}function ps(r){const e=Ft(r);return e.Pe||(e.Pe=BO(e,L0(r))),e.Pe}function BO(r,e){if(r.limitType==="F")return Qv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new fh(i.field,s)}));const t=r.endAt?new id(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new id(r.startAt.position,r.startAt.inclusive):null;return Qv(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function Jv(r,e){const t=r.filters.concat([e]);return new Nd(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Pm(r,e,t){return new Nd(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Pg(r,e){return Hh(ps(r),ps(e))&&r.limitType===e.limitType}function lS(r){return`${cc(ps(r))}|lt:${r.limitType}`}function Iu(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((i=>iS(i))).join(", ")}]`),Uh(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((i=>nd(i))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((i=>nd(i))).join(",")),`Target(${n})`})(ps(r))}; limitType=${r.limitType})`}function qh(r,e){return e.isFoundDocument()&&(function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):it.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)})(r,e)&&(function(n,i){for(const s of L0(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(r,e)&&(function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0})(r,e)&&(function(n,i){return!(n.startAt&&!(function(a,c,d){const h=U4(a,c,d);return a.inclusive?h<=0:h<0})(n.startAt,L0(n),i)||n.endAt&&!(function(a,c,d){const h=U4(a,c,d);return a.inclusive?h>=0:h>0})(n.endAt,L0(n),i))})(r,e)}function UO(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function cS(r){return(e,t)=>{let n=!1;for(const i of L0(r)){const s=zO(i,e,t);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function zO(r,e,t){const n=r.field.isKeyField()?it.comparator(e.key,t.key):(function(s,a,c){const d=a.data.field(s),h=c.data.field(s);return d!==null&&h!==null?il(d,h):ft()})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return ft()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xl(this.inner,((t,n)=>{for(const[i,s]of n)e(i,s)}))}isEmpty(){return H3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new Mr(it.comparator);function qi(){return HO}const uS=new Mr(it.comparator);function N0(...r){let e=uS;for(const t of r)e=e.insert(t.key,t);return e}function dS(r){let e=uS;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function ca(){return M0()}function hS(){return M0()}function M0(){return new oo((r=>r.toString()),((r,e)=>r.isEqual(e)))}const WO=new Mr(it.comparator),qO=new vr(it.comparator);function Wt(...r){let e=qO;for(const t of r)e=e.add(t);return e}const GO=new vr(jt);function KO(){return GO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sh(e)?"-0":e}}function fS(r){return{integerValue:""+r}}function pS(r,e){return tO(e)?fS(e):bb(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(){this._=void 0}}function YO(r,e,t){return r instanceof ad?(function(i,s){const a={fields:{[G3]:{stringValue:q3},[Y3]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&gb(s)&&(s=Cg(s)),s&&(a.fields[K3]=s),{mapValue:a}})(t,e):r instanceof od?gS(r,e):r instanceof ld?xS(r,e):(function(i,s){const a=mS(i,s),c=G4(a)+G4(i.Ie);return Kv(a)&&Kv(i.Ie)?fS(c):bb(i.serializer,c)})(r,e)}function XO(r,e,t){return r instanceof od?gS(r,e):r instanceof ld?xS(r,e):t}function mS(r,e){return r instanceof cd?(function(n){return Kv(n)||(function(s){return!!s&&"doubleValue"in s})(n)})(e)?e:{integerValue:0}:null}class ad extends Rg{}class od extends Rg{constructor(e){super(),this.elements=e}}function gS(r,e){const t=yS(e);for(const n of r.elements)t.some((i=>xa(i,n)))||t.push(n);return{arrayValue:{values:t}}}class ld extends Rg{constructor(e){super(),this.elements=e}}function xS(r,e){let t=yS(e);for(const n of r.elements)t=t.filter((i=>!xa(i,n)));return{arrayValue:{values:t}}}class cd extends Rg{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function G4(r){return Fr(r.integerValue||r.doubleValue)}function yS(r){return hh(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,t){this.field=e,this.transform=t}}function QO(r,e){return r.field.isEqual(e.field)&&(function(n,i){return n instanceof od&&i instanceof od||n instanceof ld&&i instanceof ld?Qu(n.elements,i.elements,xa):n instanceof cd&&i instanceof cd?xa(n.Ie,i.Ie):n instanceof ad&&i instanceof ad})(r.transform,e.transform)}class JO{constructor(e,t){this.version=e,this.transformResults=t}}class en{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function im(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class jg{}function vS(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Gh(r.key,en.none()):new kd(r.key,r.data,en.none());{const t=r.data,n=On.empty();let i=new vr(zr.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new lo(r.key,n,new _i(i.toArray()),en.none())}}function ZO(r,e,t){r instanceof kd?(function(i,s,a){const c=i.value.clone(),d=Y4(i.fieldTransforms,s,a.transformResults);c.setAll(d),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(r,e,t):r instanceof lo?(function(i,s,a){if(!im(i.precondition,s))return void s.convertToUnknownDocument(a.version);const c=Y4(i.fieldTransforms,s,a.transformResults),d=s.data;d.setAll(bS(i)),d.setAll(c),s.convertToFoundDocument(a.version,d).setHasCommittedMutations()})(r,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function V0(r,e,t,n){return r instanceof kd?(function(s,a,c,d){if(!im(s.precondition,a))return c;const h=s.value.clone(),p=X4(s.fieldTransforms,d,a);return h.setAll(p),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(r,e,t,n):r instanceof lo?(function(s,a,c,d){if(!im(s.precondition,a))return c;const h=X4(s.fieldTransforms,d,a),p=a.data;return p.setAll(bS(s)),p.setAll(h),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((m=>m.field)))})(r,e,t,n):(function(s,a,c){return im(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(r,e,t)}function eL(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),s=mS(n.transform,i||null);s!=null&&(t===null&&(t=On.empty()),t.set(n.field,s))}return t||null}function K4(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Qu(n,i,((s,a)=>QO(s,a)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class kd extends jg{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class lo extends jg{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function bS(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function Y4(r,e,t){const n=new Map;yt(r.length===t.length);for(let i=0;i<t.length;i++){const s=r[i],a=s.transform,c=e.data.field(s.field);n.set(s.field,XO(a,c,t[i]))}return n}function X4(r,e,t){const n=new Map;for(const i of r){const s=i.transform,a=t.data.field(i.field);n.set(i.field,YO(s,a,e))}return n}class Gh extends jg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _b extends jg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&ZO(s,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=V0(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=V0(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=hS();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;const d=vS(a,c);d!==null&&n.set(i.key,d),a.isValidDocument()||a.convertToNoDocument(_t.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Wt())}isEqual(e){return this.batchId===e.batchId&&Qu(this.mutations,e.mutations,((t,n)=>K4(t,n)))&&Qu(this.baseMutations,e.baseMutations,((t,n)=>K4(t,n)))}}class Tb{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){yt(e.mutations.length===n.length);let i=(function(){return WO})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new Tb(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an,er;function wS(r){switch(r){case Ie.OK:return ft();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0;default:return ft()}}function _S(r){if(r===void 0)return ci("GRPC error has no .code"),Ie.UNKNOWN;switch(r){case an.OK:return Ie.OK;case an.CANCELLED:return Ie.CANCELLED;case an.UNKNOWN:return Ie.UNKNOWN;case an.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case an.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case an.INTERNAL:return Ie.INTERNAL;case an.UNAVAILABLE:return Ie.UNAVAILABLE;case an.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case an.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case an.NOT_FOUND:return Ie.NOT_FOUND;case an.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case an.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case an.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case an.ABORTED:return Ie.ABORTED;case an.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case an.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case an.DATA_LOSS:return Ie.DATA_LOSS;default:return ft()}}(er=an||(an={}))[er.OK=0]="OK",er[er.CANCELLED=1]="CANCELLED",er[er.UNKNOWN=2]="UNKNOWN",er[er.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",er[er.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",er[er.NOT_FOUND=5]="NOT_FOUND",er[er.ALREADY_EXISTS=6]="ALREADY_EXISTS",er[er.PERMISSION_DENIED=7]="PERMISSION_DENIED",er[er.UNAUTHENTICATED=16]="UNAUTHENTICATED",er[er.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",er[er.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",er[er.ABORTED=10]="ABORTED",er[er.OUT_OF_RANGE=11]="OUT_OF_RANGE",er[er.UNIMPLEMENTED=12]="UNIMPLEMENTED",er[er.INTERNAL=13]="INTERNAL",er[er.UNAVAILABLE=14]="UNAVAILABLE",er[er.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=new Jo([4294967295,4294967295],0);function Q4(r){const e=S3().encode(r),t=new _3;return t.update(e),new Uint8Array(t.digest())}function J4(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Jo([t,n],0),new Jo([i,s],0)]}class Nb{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new k0(`Invalid padding: ${t}`);if(n<0)throw new k0(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new k0(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new k0(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Jo.fromNumber(this.Ee)}Ae(e,t,n){let i=e.add(t.multiply(Jo.fromNumber(n)));return i.compare(rL)===1&&(i=new Jo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Q4(e),[n,i]=J4(t);for(let s=0;s<this.hashCount;s++){const a=this.Ae(n,i,s);if(!this.Re(a))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Nb(s,i,t);return n.forEach((c=>a.insert(c))),a}insert(e){if(this.Ee===0)return;const t=Q4(e),[n,i]=J4(t);for(let s=0;s<this.hashCount;s++){const a=this.Ae(n,i,s);this.Ve(a)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class k0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,Kh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Dg(_t.min(),i,new Mr(jt),qi(),Wt())}}class Kh{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Kh(n,t,Wt(),Wt(),Wt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t,n,i){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=i}}class ES{constructor(e,t){this.targetId=e,this.ge=t}}class TS{constructor(e,t,n=ln.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Z4{constructor(){this.pe=0,this.ye=eT(),this.we=ln.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Wt(),t=Wt(),n=Wt();return this.ye.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:ft()}})),new Kh(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=eT()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,yt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class nL{constructor(e){this.ke=e,this.qe=new Map,this.Qe=qi(),this.$e=kp(),this.Ue=kp(),this.Ke=new Mr(jt)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,(t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:ft()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach(((n,i)=>{this.Je(i)&&t(i)}))}Ze(e){const t=e.targetId,n=e.ge.count,i=this.Xe(t);if(i){const s=i.target;if(Cm(s))if(n===0){const a=new it(s.path);this.ze(t,a,Or.newNoDocument(a,_t.min()))}else yt(n===1);else{const a=this.et(t);if(a!==n){const c=this.tt(e),d=c?this.nt(c,e,a):1;if(d!==0){this.Ye(t);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,h)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=t;let a,c;try{a=to(n).toUint8Array()}catch(d){if(d instanceof W3)return rh("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Nb(a,i,s)}catch(d){return rh(d instanceof k0?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ee===0?null:c}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let i=0;return n.forEach((s=>{const a=this.ke.it(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.ze(t,s,null),i++)})),i}ot(e){const t=new Map;this.qe.forEach(((s,a)=>{const c=this.Xe(a);if(c){if(s.current&&Cm(c.target)){const d=new it(c.target.path);this._t(d).has(a)||this.ut(a,d)||this.ze(a,d,Or.newNoDocument(d,e))}s.ve&&(t.set(a,s.Fe()),s.Me())}}));let n=Wt();this.Ue.forEach(((s,a)=>{let c=!0;a.forEachWhile((d=>{const h=this.Xe(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(s))})),this.Qe.forEach(((s,a)=>a.setReadTime(e)));const i=new Dg(e,t,this.Ke,this.Qe,n);return this.Qe=qi(),this.$e=kp(),this.Ue=kp(),this.Ke=new Mr(jt),i}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Z4,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new vr(jt),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new vr(jt),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||Ge("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Z4),this.ke.getRemoteKeysForTarget(e).forEach((t=>{this.ze(e,t,null)}))}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function kp(){return new Mr(it.comparator)}function eT(){return new Mr(it.comparator)}const iL={asc:"ASCENDING",desc:"DESCENDING"},sL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aL={and:"AND",or:"OR"};class oL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zv(r,e){return r.useProto3Json||Uh(e)?e:{value:e}}function ud(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AS(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function lL(r,e){return ud(r,e.toTimestamp())}function kn(r){return yt(!!r),_t.fromTimestamp((function(t){const n=eo(t);return new or(n.seconds,n.nanos)})(r))}function kb(r,e){return e1(r,e).canonicalString()}function e1(r,e){const t=(function(i){return new ar(["projects",i.projectId,"databases",i.database])})(r).child("documents");return e===void 0?t:t.child(e)}function NS(r){const e=ar.fromString(r);return yt(FS(e)),e}function ph(r,e){return kb(r.databaseId,e.path)}function qa(r,e){const t=NS(e);if(t.get(1)!==r.databaseId.projectId)throw new Ze(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Ze(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new it(CS(t))}function kS(r,e){return kb(r.databaseId,e)}function SS(r){const e=NS(r);return e.length===4?ar.emptyPath():CS(e)}function t1(r){return new ar(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function CS(r){return yt(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function tT(r,e,t){return{name:ph(r,e),fields:t.value.mapValue.fields}}function cL(r,e,t){const n=qa(r,e.name),i=kn(e.updateTime),s=e.createTime?kn(e.createTime):_t.min(),a=new On({mapValue:{fields:e.fields}}),c=Or.newFoundDocument(n,i,s,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function uL(r,e){return"found"in e?(function(n,i){yt(!!i.found),i.found.name,i.found.updateTime;const s=qa(n,i.found.name),a=kn(i.found.updateTime),c=i.found.createTime?kn(i.found.createTime):_t.min(),d=new On({mapValue:{fields:i.found.fields}});return Or.newFoundDocument(s,a,c,d)})(r,e):"missing"in e?(function(n,i){yt(!!i.missing),yt(!!i.readTime);const s=qa(n,i.missing),a=kn(i.readTime);return Or.newNoDocument(s,a)})(r,e):ft()}function dL(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ft()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(h,p){return h.useProto3Json?(yt(p===void 0||typeof p=="string"),ln.fromBase64String(p||"")):(yt(p===void 0||p instanceof Buffer||p instanceof Uint8Array),ln.fromUint8Array(p||new Uint8Array))})(r,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(h){const p=h.code===void 0?Ie.UNKNOWN:_S(h.code);return new Ze(p,h.message||"")})(a);t=new TS(n,i,s,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=qa(r,n.document.name),s=kn(n.document.updateTime),a=n.document.createTime?kn(n.document.createTime):_t.min(),c=new On({mapValue:{fields:n.document.fields}}),d=Or.newFoundDocument(i,s,a,c),h=n.targetIds||[],p=n.removedTargetIds||[];t=new sm(h,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=qa(r,n.document),s=n.readTime?kn(n.readTime):_t.min(),a=Or.newNoDocument(i,s),c=n.removedTargetIds||[];t=new sm([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=qa(r,n.document),s=n.removedTargetIds||[];t=new sm([],s,i,null)}else{if(!("filter"in e))return ft();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new tL(i,s),c=n.targetId;t=new ES(c,a)}}return t}function mh(r,e){let t;if(e instanceof kd)t={update:tT(r,e.key,e.value)};else if(e instanceof Gh)t={delete:ph(r,e.key)};else if(e instanceof lo)t={update:tT(r,e.key,e.data),updateMask:xL(e.fieldMask)};else{if(!(e instanceof _b))return ft();t={verify:ph(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(s,a){const c=a.transform;if(c instanceof ad)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof od)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ld)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof cd)return{fieldPath:a.field.canonicalString(),increment:c.Ie};throw ft()})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:lL(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ft()})(r,e.precondition)),t}function r1(r,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?en.updateTime(kn(s.updateTime)):s.exists!==void 0?en.exists(s.exists):en.none()})(e.currentDocument):en.none(),n=e.updateTransforms?e.updateTransforms.map((i=>(function(a,c){let d=null;if("setToServerValue"in c)yt(c.setToServerValue==="REQUEST_TIME"),d=new ad;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];d=new od(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];d=new ld(p)}else"increment"in c?d=new cd(a,c.increment):ft();const h=zr.fromServerFormat(c.fieldPath);return new wb(h,d)})(r,i))):[];if(e.update){e.update.name;const i=qa(r,e.update.name),s=new On({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(d){const h=d.fieldPaths||[];return new _i(h.map((p=>zr.fromServerFormat(p))))})(e.updateMask);return new lo(i,s,a,t,n)}return new kd(i,s,t,n)}if(e.delete){const i=qa(r,e.delete);return new Gh(i,t)}if(e.verify){const i=qa(r,e.verify);return new _b(i,t)}return ft()}function hL(r,e){return r&&r.length>0?(yt(e!==void 0),r.map((t=>(function(i,s){let a=i.updateTime?kn(i.updateTime):kn(s);return a.isEqual(_t.min())&&(a=kn(s)),new JO(a,i.transformResults||[])})(t,e)))):[]}function IS(r,e){return{documents:[kS(r,e.path)]}}function PS(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=kS(r,i);const s=(function(h){if(h.length!==0)return DS(xr.create(h,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(h){if(h.length!==0)return h.map((p=>(function(x){return{field:Pu(x.field),direction:pL(x.dir)}})(p)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=Zv(r,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ht:t,parent:i}}function RS(r){let e=SS(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){yt(n===1);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=(function(m){const x=jS(m);return x instanceof xr&&vb(x)?x.getFilters():[x]})(t.where));let a=[];t.orderBy&&(a=(function(m){return m.map((x=>(function(_){return new fh(Ru(_.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(x)))})(t.orderBy));let c=null;t.limit&&(c=(function(m){let x;return x=typeof m=="object"?m.value:m,Uh(x)?null:x})(t.limit));let d=null;t.startAt&&(d=(function(m){const x=!!m.before,v=m.values||[];return new id(v,x)})(t.startAt));let h=null;return t.endAt&&(h=(function(m){const x=!m.before,v=m.values||[];return new id(v,x)})(t.endAt)),$O(e,i,a,s,c,"F",d,h)}function fL(r,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ft()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function jS(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Ru(t.unaryFilter.field);return Xt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Ru(t.unaryFilter.field);return Xt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ru(t.unaryFilter.field);return Xt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ru(t.unaryFilter.field);return Xt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ft()}})(r):r.fieldFilter!==void 0?(function(t){return Xt.create(Ru(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return xr.create(t.compositeFilter.filters.map((n=>jS(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ft()}})(t.compositeFilter.op))})(r):ft()}function pL(r){return iL[r]}function mL(r){return sL[r]}function gL(r){return aL[r]}function Pu(r){return{fieldPath:r.canonicalString()}}function Ru(r){return zr.fromServerFormat(r.fieldPath)}function DS(r){return r instanceof Xt?(function(t){if(t.op==="=="){if(V4(t.value))return{unaryFilter:{field:Pu(t.field),op:"IS_NAN"}};if(M4(t.value))return{unaryFilter:{field:Pu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(V4(t.value))return{unaryFilter:{field:Pu(t.field),op:"IS_NOT_NAN"}};if(M4(t.value))return{unaryFilter:{field:Pu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pu(t.field),op:mL(t.op),value:t.value}}})(r):r instanceof xr?(function(t){const n=t.getFilters().map((i=>DS(i)));return n.length===1?n[0]:{compositeFilter:{op:gL(t.op),filters:n}}})(r):ft()}function xL(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function FS(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,t,n,i,s=_t.min(),a=_t.min(),c=ln.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Ua(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.Tt=e}}function yL(r,e){let t;if(e.document)t=cL(r.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=it.fromSegments(e.noDocument.path),i=dc(e.noDocument.readTime);t=Or.newNoDocument(n,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ft();{const n=it.fromSegments(e.unknownDocument.path),i=dc(e.unknownDocument.version);t=Or.newUnknownDocument(n,i)}}return e.readTime&&t.setReadTime((function(i){const s=new or(i[0],i[1]);return _t.fromTimestamp(s)})(e.readTime)),t}function rT(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Rm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(s,a){return{name:ph(s,a.key),fields:a.data.value.mapValue.fields,updateTime:ud(s,a.version.toTimestamp()),createTime:ud(s,a.createTime.toTimestamp())}})(r.Tt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:uc(e.version)};else{if(!e.isUnknownDocument())return ft();n.unknownDocument={path:t.path.toArray(),version:uc(e.version)}}return n}function Rm(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function uc(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function dc(r){const e=new or(r.seconds,r.nanoseconds);return _t.fromTimestamp(e)}function Wl(r,e){const t=(e.baseMutations||[]).map((s=>r1(r.Tt,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const c=e.mutations[s+1];a.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map((s=>r1(r.Tt,s))),i=or.fromMillis(e.localWriteTimeMs);return new Eb(e.batchId,i,t,n)}function S0(r){const e=dc(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?dc(r.lastLimboFreeSnapshotVersion):_t.min();let n;return n=(function(s){return s.documents!==void 0})(r.query)?(function(s){return yt(s.documents.length===1),ps(Wh(SS(s.documents[0])))})(r.query):(function(s){return ps(RS(s))})(r.query),new Ua(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,ln.fromBase64String(r.resumeToken))}function LS(r,e){const t=uc(e.snapshotVersion),n=uc(e.lastLimboFreeSnapshotVersion);let i;i=Cm(e.target)?IS(r.Tt,e.target):PS(r.Tt,e.target).ht;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:cc(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function MS(r){const e=RS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Pm(e,e.limit,"L"):e}function Xy(r,e){return new Ab(e.largestBatchId,r1(r.Tt,e.overlayMutation))}function nT(r,e){const t=e.path.lastSegment();return[r,Jn(e.path.popLast()),t]}function iT(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:uc(n.readTime),documentKey:Jn(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{getBundleMetadata(e,t){return sT(e).get(t).next((n=>{if(n)return(function(s){return{id:s.bundleId,createTime:dc(s.createTime),version:s.version}})(n)}))}saveBundleMetadata(e,t){return sT(e).put((function(i){return{bundleId:i.id,createTime:uc(kn(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return aT(e).get(t).next((n=>{if(n)return(function(s){return{name:s.name,query:MS(s.bundledQuery),readTime:dc(s.readTime)}})(n)}))}saveNamedQuery(e,t){return aT(e).put((function(i){return{name:i.name,readTime:uc(kn(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function sT(r){return gn(r,Ng)}function aT(r){return gn(r,kg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const n=t.uid||"";return new Fg(e,n)}getOverlay(e,t){return g0(e).get(nT(this.userId,t)).next((n=>n?Xy(this.serializer,n):null))}getOverlays(e,t){const n=ca();return me.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&n.set(i,s)})))).next((()=>n))}saveOverlays(e,t,n){const i=[];return n.forEach(((s,a)=>{const c=new Ab(t,a);i.push(this.Et(e,c))})),me.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach((a=>i.add(Jn(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const c=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);s.push(g0(e).J(Wv,c))})),me.waitFor(s)}getOverlaysForCollection(e,t,n){const i=ca(),s=Jn(t),a=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return g0(e).G(Wv,a).next((c=>{for(const d of c){const h=Xy(this.serializer,d);i.set(h.getKey(),h)}return i}))}getOverlaysForCollectionGroup(e,t,n,i){const s=ca();let a;const c=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return g0(e).Z({index:$3,range:c},((d,h,p)=>{const m=Xy(this.serializer,h);s.size()<i||m.largestBatchId===a?(s.set(m.getKey(),m),a=m.largestBatchId):p.done()})).next((()=>s))}Et(e,t){return g0(e).put((function(i,s,a){const[c,d,h]=nT(s,a.mutation.key);return{userId:s,collectionPath:d,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:mh(i.Tt,a.mutation)}})(this.serializer,this.userId,t))}}function g0(r){return gn(r,Sg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{dt(e){return gn(e,pb)}getSessionToken(e){return this.dt(e).get("sessionToken").next((t=>{const n=t?.value;return n?ln.fromUint8Array(n):ln.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Fr(e.integerValue));else if("doubleValue"in e){const n=Fr(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),sh(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(t,20),typeof n=="string"&&(n=eo(n)),t.yt(`${n.seconds||""}`),t.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(to(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(t,45),t.gt(n.latitude||0),t.gt(n.longitude||0)}else"mapValue"in e?Q3(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Ig(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):ft()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const n=e.fields||{};this.ft(t,55);for(const i of Object.keys(n))this.wt(i,t),this.Rt(n[i],t)}vt(e,t){var n,i;const s=e.fields||{};this.ft(t,53);const a=rd,c=((i=(n=s[a].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.length)||0;this.ft(t,15),t.gt(Fr(c)),this.wt(a,t),this.Rt(s[a],t)}Ft(e,t){const n=e.values||[];this.ft(t,50);for(const i of n)this.Rt(i,t)}Dt(e,t){this.ft(t,37),it.fromName(e).path.forEach((n=>{this.ft(t,60),this.Mt(n,t)}))}ft(e,t){e.gt(t)}St(e){e.gt(2)}}ql.xt=new ql;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=255;function wL(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function oT(r){const e=64-(function(n){let i=0;for(let s=0;s<8;++s){const a=wL(255&n[s]);if(i+=a,a!==8)break}return i})(r);return Math.ceil(e/8)}class _L{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Nt(n.value),n=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.kt(n.value),n=t.next();this.qt()}Qt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Nt(n);else if(n<2048)this.Nt(960|n>>>6),this.Nt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|n>>>12),this.Nt(128|63&n>>>6),this.Nt(128|63&n);else{const i=t.codePointAt(0);this.Nt(240|i>>>18),this.Nt(128|63&i>>>12),this.Nt(128|63&i>>>6),this.Nt(128|63&i)}}this.Bt()}$t(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.kt(n);else if(n<2048)this.kt(960|n>>>6),this.kt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|n>>>12),this.kt(128|63&n>>>6),this.kt(128|63&n);else{const i=t.codePointAt(0);this.kt(240|i>>>18),this.kt(128|63&i>>>12),this.kt(128|63&i>>>6),this.kt(128|63&i)}}this.qt()}Ut(e){const t=this.Kt(e),n=oT(t);this.Wt(1+n),this.buffer[this.position++]=255&n;for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Gt(e){const t=this.Kt(e),n=oT(t);this.Wt(1+n),this.buffer[this.position++]=~(255&n);for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}zt(){this.jt(wu),this.jt(255)}Ht(){this.Jt(wu),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let i=1;i<t.length;++i)t[i]^=n?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===wu?(this.jt(wu),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===wu?(this.Jt(wu),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class EL{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class TL{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class x0{constructor(){this.Zt=new _L,this.Xt=new EL(this.Zt),this.en=new TL(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,t,n,i){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=i}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Gl(this.indexId,this.documentKey,this.arrayValue,n)}}function Lo(r,e){let t=r.indexId-e.indexId;return t!==0?t:(t=lT(r.arrayValue,e.arrayValue),t!==0?t:(t=lT(r.directionalValue,e.directionalValue),t!==0?t:it.comparator(r.documentKey,e.documentKey)))}function lT(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.rn=new vr(((t,n)=>zr.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const n=t;n.isInequality()?this.rn=this.rn.add(n):this._n.push(n)}}get an(){return this.rn.size>1}un(e){if(yt(e.collectionGroup===this.collectionId),this.an)return!1;const t=Uv(e);if(t!==void 0&&!this.cn(t))return!1;const n=Bl(e);let i=new Set,s=0,a=0;for(;s<n.length&&this.cn(n[s]);++s)i=i.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.rn.size>0){const c=this.rn.getIterator().getNext();if(!i.has(c.field.canonicalString())){const d=n[s];if(!this.ln(c,d)||!this.hn(this.sn[a++],d))return!1}++s}for(;s<n.length;++s){const c=n[s];if(a>=this.sn.length||!this.hn(this.sn[a++],c))return!1}return!0}Pn(){if(this.an)return null;let e=new vr(zr.comparator);const t=[];for(const n of this._n)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new Jp(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Jp(n.field,0))}for(const n of this.sn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Jp(n.field,n.dir==="asc"?0:1)));return new _m(_m.UNKNOWN_ID,this.collectionId,t,ih.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(r){var e,t;if(yt(r instanceof Xt||r instanceof xr),r instanceof Xt){if(r instanceof aS){const i=((t=(e=r.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((s=>Xt.create(r.field,"==",s))))||[];return xr.create(i,"or")}return r}const n=r.filters.map((i=>VS(i)));return xr.create(n,r.op)}function AL(r){if(r.getFilters().length===0)return[];const e=s1(VS(r));return yt($S(e)),n1(e)||i1(e)?[e]:e.getFilters()}function n1(r){return r instanceof Xt}function i1(r){return r instanceof xr&&vb(r)}function $S(r){return n1(r)||i1(r)||(function(t){if(t instanceof xr&&Yv(t)){for(const n of t.getFilters())if(!n1(n)&&!i1(n))return!1;return!0}return!1})(r)}function s1(r){if(yt(r instanceof Xt||r instanceof xr),r instanceof Xt)return r;if(r.filters.length===1)return s1(r.filters[0]);const e=r.filters.map((n=>s1(n)));let t=xr.create(e,r.op);return t=jm(t),$S(t)?t:(yt(t instanceof xr),yt(sd(t)),yt(t.filters.length>1),t.filters.reduce(((n,i)=>Sb(n,i))))}function Sb(r,e){let t;return yt(r instanceof Xt||r instanceof xr),yt(e instanceof Xt||e instanceof xr),t=r instanceof Xt?e instanceof Xt?(function(i,s){return xr.create([i,s],"and")})(r,e):uT(r,e):e instanceof Xt?uT(e,r):(function(i,s){if(yt(i.filters.length>0&&s.filters.length>0),sd(i)&&sd(s))return nS(i,s.getFilters());const a=Yv(i)?i:s,c=Yv(i)?s:i,d=a.filters.map((h=>Sb(h,c)));return xr.create(d,"or")})(r,e),jm(t)}function uT(r,e){if(sd(e))return nS(e,r.getFilters());{const t=e.filters.map((n=>Sb(r,n)));return xr.create(t,"or")}}function jm(r){if(yt(r instanceof Xt||r instanceof xr),r instanceof Xt)return r;const e=r.getFilters();if(e.length===1)return jm(e[0]);if(tS(r))return r;const t=e.map((i=>jm(i))),n=[];return t.forEach((i=>{i instanceof Xt?n.push(i):i instanceof xr&&(i.op===r.op?n.push(...i.filters):n.push(i))})),n.length===1?n[0]:xr.create(n,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(){this.Tn=new Cb}addToCollectionParentIndex(e,t){return this.Tn.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(Xi.min())}getMinOffsetFromCollectionGroup(e,t){return me.resolve(Xi.min())}updateCollectionGroup(e,t,n){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class Cb{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new vr(ar.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new vr(ar.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="IndexedDbIndexManager",Sp=new Uint8Array(0);class kL{constructor(e,t){this.databaseId=t,this.In=new Cb,this.En=new oo((n=>cc(n)),((n,i)=>Hh(n,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.In.add(t)}));const s={collectionId:n,parent:Jn(i)};return hT(e).put(s)}return me.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[I3(t),""],!1,!0);return hT(e).G(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;n.push(la(a.parent))}return n}))}addFieldIndex(e,t){const n=y0(e),i=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete i.indexId;const s=n.add(i);if(t.indexState){const a=Eu(e);return s.next((c=>{a.put(iT(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const n=y0(e),i=Eu(e),s=_u(e);return n.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=y0(e),n=_u(e),i=Eu(e);return t.J().next((()=>n.J())).next((()=>i.J()))}createTargetIndexes(e,t){return me.forEach(this.dn(t),(n=>this.getIndexType(e,n).next((i=>{if(i===0||i===1){const s=new cT(n).Pn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const n=_u(e);let i=!0;const s=new Map;return me.forEach(this.dn(t),(a=>this.An(e,a).next((c=>{i&&(i=!!c),s.set(a,c)})))).next((()=>{if(i){let a=Wt();const c=[];return me.forEach(s,((d,h)=>{Ge(dT,`Using index ${(function(V){return`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map((L=>`${L.fieldPath}:${L.kind}`)).join(",")}`})(d)} to execute ${cc(t)}`);const p=(function(V,L){const K=Uv(L);if(K===void 0)return null;for(const H of Im(V,K.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null})(h,d),m=(function(V,L){const K=new Map;for(const H of Bl(L))for(const S of Im(V,H.fieldPath))switch(S.op){case"==":case"in":K.set(H.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return K.set(H.fieldPath.canonicalString(),S.value),Array.from(K.values())}return null})(h,d),x=(function(V,L){const K=[];let H=!0;for(const S of Bl(L)){const N=S.kind===0?H4(V,S.fieldPath,V.startAt):W4(V,S.fieldPath,V.startAt);K.push(N.value),H&&(H=N.inclusive)}return new id(K,H)})(h,d),v=(function(V,L){const K=[];let H=!0;for(const S of Bl(L)){const N=S.kind===0?W4(V,S.fieldPath,V.endAt):H4(V,S.fieldPath,V.endAt);K.push(N.value),H&&(H=N.inclusive)}return new id(K,H)})(h,d),_=this.Rn(d,h,x),w=this.Rn(d,h,v),E=this.Vn(d,h,m),j=this.mn(d.indexId,p,_,x.inclusive,w,v.inclusive,E);return me.forEach(j,(P=>n.H(P,t.limit).next((V=>{V.forEach((L=>{const K=it.fromSegments(L.documentKey);a.has(K)||(a=a.add(K),c.push(K))}))}))))})).next((()=>c))}return me.resolve(null)}))}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=AL(xr.create(e.filters,"and")).map((n=>Qv(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.En.set(e,t),t)}mn(e,t,n,i,s,a,c){const d=(t!=null?t.length:1)*Math.max(n.length,s.length),h=d/(t!=null?t.length:1),p=[];for(let m=0;m<d;++m){const x=t?this.fn(t[m/h]):Sp,v=this.gn(e,x,n[m%h],i),_=this.pn(e,x,s[m%h],a),w=c.map((E=>this.gn(e,x,E,!0)));p.push(...this.createRange(v,_,w))}return p}gn(e,t,n,i){const s=new Gl(e,it.empty(),t,n);return i?s:s.nn()}pn(e,t,n,i){const s=new Gl(e,it.empty(),t,n);return i?s.nn():s}An(e,t){const n=new cT(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const c of s)n.un(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a}))}getIndexType(e,t){let n=2;const i=this.dn(t);return me.forEach(i,(s=>this.An(e,s).next((a=>{a?n!==0&&a.fields.length<(function(d){let h=new vr(zr.comparator),p=!1;for(const m of d.filters)for(const x of m.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?p=!0:h=h.add(x.field));for(const m of d.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)})(s)&&(n=1):n=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&n===2?1:n))}yn(e,t){const n=new x0;for(const i of Bl(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=n.tn(i.kind);ql.xt.At(s,a)}return n.Yt()}fn(e){const t=new x0;return ql.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const n=new x0;return ql.xt.At(dh(this.databaseId,t),n.tn((function(s){const a=Bl(s);return a.length===0?0:a[a.length-1].kind})(e))),n.Yt()}Vn(e,t,n){if(n===null)return[];let i=[];i.push(new x0);let s=0;for(const a of Bl(e)){const c=n[s++];for(const d of i)if(this.Sn(t,a.fieldPath)&&hh(c))i=this.bn(i,a,c);else{const h=d.tn(a.kind);ql.xt.At(c,h)}}return this.Dn(i)}Rn(e,t,n){return this.Vn(e,t,n.position)}Dn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Yt();return t}bn(e,t,n){const i=[...e],s=[];for(const a of n.arrayValue.values||[])for(const c of i){const d=new x0;d.seed(c.Yt()),ql.xt.At(a,d.tn(t.kind)),s.push(d)}return s}Sn(e,t){return!!e.filters.find((n=>n instanceof Xt&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=y0(e),i=Eu(e);return(t?n.G(Hv,IDBKeyRange.bound(t,t)):n.G()).next((s=>{const a=[];return me.forEach(s,(c=>i.get([c.indexId,this.uid]).next((d=>{a.push((function(p,m){const x=m?new ih(m.sequenceNumber,new Xi(dc(m.readTime),new it(la(m.documentKey)),m.largestBatchId)):ih.empty(),v=p.fields.map((([_,w])=>new Jp(zr.fromServerFormat(_),w)));return new _m(p.indexId,p.collectionGroup,v,x)})(c,d))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,i)=>{const s=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:jt(n.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const i=y0(e),s=Eu(e);return this.vn(e).next((a=>i.G(Hv,IDBKeyRange.bound(t,t)).next((c=>me.forEach(c,(d=>s.put(iT(d.indexId,this.uid,a,n))))))))}updateIndexEntries(e,t){const n=new Map;return me.forEach(t,((i,s)=>{const a=n.get(i.collectionGroup);return(a?me.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((c=>(n.set(i.collectionGroup,c),me.forEach(c,(d=>this.Cn(e,i,d).next((h=>{const p=this.Fn(s,d);return h.isEqual(p)?me.resolve():this.Mn(e,s,d,h,p)})))))))}))}xn(e,t,n,i){return _u(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.wn(n,t.key),documentKey:t.key.path.toArray()})}On(e,t,n,i){return _u(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.wn(n,t.key),t.key.path.toArray()])}Cn(e,t,n){const i=_u(e);let s=new vr(Lo);return i.Z({index:V3,range:IDBKeyRange.only([n.indexId,this.uid,this.wn(n,t)])},((a,c)=>{s=s.add(new Gl(n.indexId,t,c.arrayValue,c.directionalValue))})).next((()=>s))}Fn(e,t){let n=new vr(Lo);const i=this.yn(t,e);if(i==null)return n;const s=Uv(t);if(s!=null){const a=e.data.field(s.fieldPath);if(hh(a))for(const c of a.arrayValue.values||[])n=n.add(new Gl(t.indexId,e.key,this.fn(c),i))}else n=n.add(new Gl(t.indexId,e.key,Sp,i));return n}Mn(e,t,n,i,s){Ge(dT,"Updating index entries for document '%s'",t.key);const a=[];return(function(d,h,p,m,x){const v=d.getIterator(),_=h.getIterator();let w=bu(v),E=bu(_);for(;w||E;){let j=!1,P=!1;if(w&&E){const V=p(w,E);V<0?P=!0:V>0&&(j=!0)}else w!=null?P=!0:j=!0;j?(m(E),E=bu(_)):P?(x(w),w=bu(v)):(w=bu(v),E=bu(_))}})(i,s,Lo,(c=>{a.push(this.xn(e,t,n,c))}),(c=>{a.push(this.On(e,t,n,c))})),me.waitFor(a)}vn(e){let t=1;return Eu(e).Z({index:M3,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((a,c)=>Lo(a,c))).filter(((a,c,d)=>!c||Lo(a,d[c-1])!==0));const i=[];i.push(e);for(const a of n){const c=Lo(a,e),d=Lo(a,t);if(c===0)i[0]=e.nn();else if(c>0&&d<0)i.push(a),i.push(a.nn());else if(d>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Nn(i[a],i[a+1]))return[];const c=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,Sp,[]],d=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,Sp,[]];s.push(IDBKeyRange.bound(c,d))}return s}Nn(e,t){return Lo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(fT)}getMinOffset(e,t){return me.mapArray(this.dn(t),(n=>this.An(e,n).next((i=>i||ft())))).next(fT)}}function hT(r){return gn(r,lh)}function _u(r){return gn(r,km)}function y0(r){return gn(r,fb)}function Eu(r){return gn(r,Nm)}function fT(r){yt(r.length!==0);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const i=r[n].indexState.offset;ub(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Xi(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BS=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(r,e,t){const n=r.store(Fs),i=r.store(Ju),s=[],a=IDBKeyRange.only(t.batchId);let c=0;const d=n.Z({range:a},((p,m,x)=>(c++,x.delete())));s.push(d.next((()=>{yt(c===1)})));const h=[];for(const p of t.mutations){const m=F3(e,p.key.path,t.batchId);s.push(i.delete(m)),h.push(p.key)}return me.waitFor(s).next((()=>h))}function Dm(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw ft();e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(BS,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);class Og{constructor(e,t,n,i){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=i,this.Bn={}}static It(e,t,n,i){yt(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Og(s,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mo(e).Z({index:Yl,range:n},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,n,i){const s=ju(e),a=Mo(e);return a.add({}).next((c=>{yt(typeof c=="number");const d=new Eb(c,t,n,i),h=(function(v,_,w){const E=w.baseMutations.map((P=>mh(v.Tt,P))),j=w.mutations.map((P=>mh(v.Tt,P)));return{userId:_,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:E,mutations:j}})(this.serializer,this.userId,d),p=[];let m=new vr(((x,v)=>jt(x.canonicalString(),v.canonicalString())));for(const x of i){const v=F3(this.userId,x.key.path,c);m=m.add(x.key.path.popLast()),p.push(a.put(h)),p.push(s.put(v,iO))}return m.forEach((x=>{p.push(this.indexManager.addToCollectionParentIndex(e,x))})),e.addOnCommittedListener((()=>{this.Bn[c]=d.keys()})),me.waitFor(p).next((()=>d))}))}lookupMutationBatch(e,t){return Mo(e).get(t).next((n=>n?(yt(n.userId===this.userId),Wl(this.serializer,n)):null))}Ln(e,t){return this.Bn[t]?me.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const i=n.keys();return this.Bn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return Mo(e).Z({index:Yl,range:i},((a,c,d)=>{c.userId===this.userId&&(yt(c.batchId>=n),s=Wl(this.serializer,c)),d.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=Zl;return Mo(e).Z({index:Yl,range:t,reverse:!0},((i,s,a)=>{n=s.batchId,a.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Zl],[this.userId,Number.POSITIVE_INFINITY]);return Mo(e).G(Yl,t).next((n=>n.map((i=>Wl(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Zp(this.userId,t.path),i=IDBKeyRange.lowerBound(n),s=[];return ju(e).Z({range:i},((a,c,d)=>{const[h,p,m]=a,x=la(p);if(h===this.userId&&t.path.isEqual(x))return Mo(e).get(m).next((v=>{if(!v)throw ft();yt(v.userId===this.userId),s.push(Wl(this.serializer,v))}));d.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new vr(jt);const i=[];return t.forEach((s=>{const a=Zp(this.userId,s.path),c=IDBKeyRange.lowerBound(a),d=ju(e).Z({range:c},((h,p,m)=>{const[x,v,_]=h,w=la(v);x===this.userId&&s.path.isEqual(w)?n=n.add(_):m.done()}));i.push(d)})),me.waitFor(i).next((()=>this.kn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,s=Zp(this.userId,n),a=IDBKeyRange.lowerBound(s);let c=new vr(jt);return ju(e).Z({range:a},((d,h,p)=>{const[m,x,v]=d,_=la(x);m===this.userId&&n.isPrefixOf(_)?_.length===i&&(c=c.add(v)):p.done()})).next((()=>this.kn(e,c)))}kn(e,t){const n=[],i=[];return t.forEach((s=>{i.push(Mo(e).get(s).next((a=>{if(a===null)throw ft();yt(a.userId===this.userId),n.push(Wl(this.serializer,a))})))})),me.waitFor(i).next((()=>n))}removeMutationBatch(e,t){return US(e.ue,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.qn(t.batchId)})),me.forEach(n,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return me.resolve();const n=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return ju(e).Z({range:n},((s,a,c)=>{if(s[0]===this.userId){const d=la(s[1]);i.push(d)}else c.done()})).next((()=>{yt(i.length===0)}))}))}containsKey(e,t){return zS(e,this.userId,t)}Qn(e){return HS(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Zl,lastStreamToken:""}))}}function zS(r,e,t){const n=Zp(e,t.path),i=n[1],s=IDBKeyRange.lowerBound(n);let a=!1;return ju(r).Z({range:s,Y:!0},((c,d,h)=>{const[p,m,x]=c;p===e&&m===i&&(a=!0),h.done()})).next((()=>a))}function Mo(r){return gn(r,Fs)}function ju(r){return gn(r,Ju)}function HS(r){return gn(r,ah)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new hc(0)}static Kn(){return new hc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next((t=>{const n=new hc(t.highestTargetId);return t.highestTargetId=n.next(),this.Gn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Wn(e).next((t=>_t.fromTimestamp(new or(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Wn(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Wn(e).next((i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Gn(e,i))))}addTargetData(e,t){return this.zn(e,t).next((()=>this.Wn(e).next((n=>(n.targetCount+=1,this.jn(t,n),this.Gn(e,n))))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Tu(e).delete(t.targetId))).next((()=>this.Wn(e))).next((n=>(yt(n.targetCount>0),n.targetCount-=1,this.Gn(e,n))))}removeTargets(e,t,n){let i=0;const s=[];return Tu(e).Z(((a,c)=>{const d=S0(c);d.sequenceNumber<=t&&n.get(d.targetId)===null&&(i++,s.push(this.removeTargetData(e,d)))})).next((()=>me.waitFor(s))).next((()=>i))}forEachTarget(e,t){return Tu(e).Z(((n,i)=>{const s=S0(i);t(s)}))}Wn(e){return mT(e).get(Am).next((t=>(yt(t!==null),t)))}Gn(e,t){return mT(e).put(Am,t)}zn(e,t){return Tu(e).put(LS(this.serializer,t))}jn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Wn(e).next((t=>t.targetCount))}getTargetData(e,t){const n=cc(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Tu(e).Z({range:i,index:L3},((a,c,d)=>{const h=S0(c);Hh(t,h.target)&&(s=h,d.done())})).next((()=>s))}addMatchingKeys(e,t,n){const i=[],s=qo(e);return t.forEach((a=>{const c=Jn(a.path);i.push(s.put({targetId:n,path:c})),i.push(this.referenceDelegate.addReference(e,n,a))})),me.waitFor(i)}removeMatchingKeys(e,t,n){const i=qo(e);return me.forEach(t,(s=>{const a=Jn(s.path);return me.waitFor([i.delete([n,a]),this.referenceDelegate.removeReference(e,n,s)])}))}removeMatchingKeysForTargetId(e,t){const n=qo(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=qo(e);let s=Wt();return i.Z({range:n,Y:!0},((a,c,d)=>{const h=la(a[1]),p=new it(h);s=s.add(p)})).next((()=>s))}containsKey(e,t){const n=Jn(t.path),i=IDBKeyRange.bound([n],[I3(n)],!1,!0);let s=0;return qo(e).Z({index:hb,Y:!0,range:i},(([a,c],d,h)=>{a!==0&&(s++,h.done())})).next((()=>s>0))}lt(e,t){return Tu(e).get(t).next((n=>n?S0(n):null))}}function Tu(r){return gn(r,Zu)}function mT(r){return gn(r,ec)}function qo(r){return gn(r,ed)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="LruGarbageCollector",WS=1048576;function xT([r,e],[t,n]){const i=jt(r,t);return i===0?jt(e,n):i}class CL{constructor(e){this.Hn=e,this.buffer=new vr(xT),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();xT(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qS{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Ge(gT,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){gl(t)?Ge(gT,"Ignoring IndexedDB error during garbage collection: ",t):await kc(t)}await this.er(3e5)}))}}class IL{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return me.resolve(fs.ae);const n=new CL(t);return this.tr.forEachTarget(e,(i=>n.Zn(i.sequenceNumber))).next((()=>this.tr.rr(e,(i=>n.Zn(i))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(pT)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pT):this.ir(e,t)))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,i,s,a,c,d,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,a=Date.now(),this.nthSequenceNumber(e,i)))).next((m=>(n=m,c=Date.now(),this.removeTargets(e,n,t)))).next((m=>(s=m,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((m=>(h=Date.now(),Cu()<=Yt.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(c-a)+`ms
	Removed ${s} targets in `+(d-c)+`ms
	Removed ${m} documents in `+(h-d)+`ms
Total Duration: ${h-p}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m}))))}}function GS(r,e){return new IL(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e,t){this.db=e,this.garbageCollector=GS(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((i=>n+i))))}sr(e){let t=0;return this.rr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,((n,i)=>t(i)))}addReference(e,t,n){return Cp(e,n)}removeReference(e,t,n){return Cp(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Cp(e,t)}ar(e,t){return(function(i,s){let a=!1;return HS(i).X((c=>zS(i,c,s).next((d=>(d&&(a=!0),me.resolve(!d)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this._r(e,((a,c)=>{if(c<=t){const d=this.ar(e,a).next((h=>{if(!h)return s++,n.getEntry(e,a).next((()=>(n.removeEntry(a,_t.min()),qo(e).delete((function(m){return[0,Jn(m.path)]})(a)))))}));i.push(d)}})).next((()=>me.waitFor(i))).next((()=>n.apply(e))).next((()=>s))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Cp(e,t)}_r(e,t){const n=qo(e);let i,s=fs.ae;return n.Z({index:hb},(([a,c],{path:d,sequenceNumber:h})=>{a===0?(s!==fs.ae&&t(new it(la(i)),s),s=h,i=d):s=fs.ae})).next((()=>{s!==fs.ae&&t(new it(la(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Cp(r,e){return qo(r).put((function(n,i){return{targetId:0,path:Jn(n.path),sequenceNumber:i}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(){this.changes=new oo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Or.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?me.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Ml(e).put(n)}removeEntry(e,t,n){return Ml(e).delete((function(s,a){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Rm(a),c[c.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.ur(e,n))))}getEntry(e,t){let n=Or.newInvalidDocument(t);return Ml(e).Z({index:em,range:IDBKeyRange.only(v0(t))},((i,s)=>{n=this.cr(t,s)})).next((()=>n))}lr(e,t){let n={size:0,document:Or.newInvalidDocument(t)};return Ml(e).Z({index:em,range:IDBKeyRange.only(v0(t))},((i,s)=>{n={document:this.cr(t,s),size:Dm(s)}})).next((()=>n))}getEntries(e,t){let n=qi();return this.hr(e,t,((i,s)=>{const a=this.cr(i,s);n=n.insert(i,a)})).next((()=>n))}Pr(e,t){let n=qi(),i=new Mr(it.comparator);return this.hr(e,t,((s,a)=>{const c=this.cr(s,a);n=n.insert(s,c),i=i.insert(s,Dm(a))})).next((()=>({documents:n,Tr:i})))}hr(e,t,n){if(t.isEmpty())return me.resolve();let i=new vr(bT);t.forEach((d=>i=i.add(d)));const s=IDBKeyRange.bound(v0(i.first()),v0(i.last())),a=i.getIterator();let c=a.getNext();return Ml(e).Z({index:em,range:s},((d,h,p)=>{const m=it.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&bT(c,m)<0;)n(c,null),c=a.getNext();c&&c.isEqual(m)&&(n(c,h),c=a.hasNext()?a.getNext():null),c?p.W(v0(c)):p.done()})).next((()=>{for(;c;)n(c,null),c=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,n,i,s){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),Rm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ml(e).G(IDBKeyRange.bound(c,d,!0)).next((h=>{s?.incrementDocumentReadCount(h.length);let p=qi();for(const m of h){const x=this.cr(it.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);x.isFoundDocument()&&(qh(t,x)||i.has(x.key))&&(p=p.insert(x.key,x))}return p}))}getAllFromCollectionGroup(e,t,n,i){let s=qi();const a=vT(t,n),c=vT(t,Xi.max());return Ml(e).Z({index:O3,range:IDBKeyRange.bound(a,c,!0)},((d,h,p)=>{const m=this.cr(it.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(m.key,m),s.size===i&&p.done()})).next((()=>s))}newChangeBuffer(e){return new jL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return yT(e).get(zv).next((t=>(yt(!!t),t)))}ur(e,t){return yT(e).put(zv,t)}cr(e,t){if(t){const n=yL(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(_t.min())))return n}return Or.newInvalidDocument(e)}}function YS(r){return new RL(r)}class jL extends KS{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new oo((n=>n.toString()),((n,i)=>n.isEqual(i)))}applyChanges(e){const t=[];let n=0,i=new vr(((s,a)=>jt(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const c=this.Er.get(s);if(t.push(this.Ir.removeEntry(e,s,c.readTime)),a.isValidDocument()){const d=rT(this.Ir.serializer,a);i=i.add(s.path.popLast());const h=Dm(d);n+=h-c.size,t.push(this.Ir.addEntry(e,s,d))}else if(n-=c.size,this.trackRemovals){const d=rT(this.Ir.serializer,a.convertToNoDocument(_t.min()));t.push(this.Ir.addEntry(e,s,d))}})),i.forEach((s=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Ir.updateMetadata(e,n)),me.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next((n=>(this.Er.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next((({documents:n,Tr:i})=>(i.forEach(((s,a)=>{this.Er.set(s,{size:a,readTime:n.get(s).readTime})})),n)))}}function yT(r){return gn(r,oh)}function Ml(r){return gn(r,Tm)}function v0(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function vT(r,e){const t=e.documentKey.path.toArray();return[r,Rm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function bT(r,e){const t=r.path.toArray(),n=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<n.length-2;++s)if(i=jt(t[s],n[s]),i)return i;return i=jt(t.length,n.length),i||(i=jt(t[t.length-2],n[n.length-2]),i||jt(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(n!==null&&V0(n.mutation,i,_i.empty(),or.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Wt()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Wt()){const i=ca();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((s=>{let a=N0();return s.forEach(((c,d)=>{a=a.insert(c,d.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const n=ca();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Wt())))}populateOverlays(e,t,n){const i=[];return n.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,c)=>{t.set(a,c)}))}))}computeViews(e,t,n,i){let s=qi();const a=M0(),c=(function(){return M0()})();return t.forEach(((d,h)=>{const p=n.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof lo)?s=s.insert(h.key,h):p!==void 0?(a.set(h.key,p.mutation.getFieldMask()),V0(p.mutation,h,p.mutation.getFieldMask(),or.now())):a.set(h.key,_i.empty())})),this.recalculateAndSaveOverlays(e,s).next((d=>(d.forEach(((h,p)=>a.set(h,p))),t.forEach(((h,p)=>{var m;return c.set(h,new DL(p,(m=a.get(h))!==null&&m!==void 0?m:null))})),c)))}recalculateAndSaveOverlays(e,t){const n=M0();let i=new Mr(((a,c)=>a-c)),s=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const c of a)c.keys().forEach((d=>{const h=t.get(d);if(h===null)return;let p=n.get(d)||_i.empty();p=c.applyToLocalView(h,p),n.set(d,p);const m=(i.get(c.batchId)||Wt()).add(d);i=i.insert(c.batchId,m)}))})).next((()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,p=d.value,m=hS();p.forEach((x=>{if(!s.has(x)){const v=vS(t.get(x),n.get(x));v!==null&&m.set(x,v),s=s.add(x)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,m))}return me.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,i){return(function(a){return it.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):oS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-s.size):me.resolve(ca());let c=nh,d=s;return a.next((h=>me.forEach(h,((p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),s.get(p)?me.resolve():this.remoteDocumentCache.getEntry(e,p).next((x=>{d=d.insert(p,x)}))))).next((()=>this.populateOverlays(e,h,s))).next((()=>this.computeViews(e,d,h,Wt()))).next((p=>({batchId:c,changes:dS(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new it(t)).next((n=>{let i=N0();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const s=t.collectionGroup;let a=N0();return this.indexManager.getCollectionParents(e,s).next((c=>me.forEach(c,(d=>{const h=(function(m,x){return new Nd(x,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,d.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,n,i).next((p=>{p.forEach(((m,x)=>{a=a.insert(m,x)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,i)))).next((a=>{s.forEach(((d,h)=>{const p=h.getKey();a.get(p)===null&&(a=a.insert(p,Or.newInvalidDocument(p)))}));let c=N0();return a.forEach(((d,h)=>{const p=s.get(d);p!==void 0&&V0(p.mutation,h,_i.empty(),or.now()),qh(t,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return me.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:kn(i.createTime)}})(t)),me.resolve()}getNamedQuery(e,t){return me.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,(function(i){return{name:i.name,query:MS(i.bundledQuery),readTime:kn(i.readTime)}})(t)),me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(){this.overlays=new Mr(it.comparator),this.Rr=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ca();return me.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&n.set(i,s)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((i,s)=>{this.Et(e,t,s)})),me.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Rr.get(n);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.Rr.delete(n)),me.resolve()}getOverlaysForCollection(e,t,n){const i=ca(),s=t.length+1,a=new it(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&d.largestBatchId>n&&i.set(d.getKey(),d)}return me.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new Mr(((h,p)=>h-p));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>n){let p=s.get(h.largestBatchId);p===null&&(p=ca(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=ca(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,p)=>c.set(h,p))),!(c.size()>=i)););return me.resolve(c)}Et(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.Rr.get(i.largestBatchId).delete(n.key);this.Rr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Ab(t,n));let s=this.Rr.get(t);s===void 0&&(s=Wt(),this.Rr.set(t,s)),this.Rr.set(t,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.Vr=new vr(En.mr),this.gr=new vr(En.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new En(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.wr(new En(e,t))}Sr(e,t){e.forEach((n=>this.removeReference(n,t)))}br(e){const t=new it(new ar([])),n=new En(t,e),i=new En(t,e+1),s=[];return this.gr.forEachInRange([n,i],(a=>{this.wr(a),s.push(a.key)})),s}Dr(){this.Vr.forEach((e=>this.wr(e)))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new it(new ar([])),n=new En(t,e),i=new En(t,e+1);let s=Wt();return this.gr.forEachInRange([n,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new En(e,0),n=this.Vr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class En{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return it.comparator(e.key,t.key)||jt(e.Cr,t.Cr)}static pr(e,t){return jt(e.Cr,t.Cr)||it.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new vr(En.mr)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Eb(s,t,n,i);this.mutationQueue.push(a);for(const c of i)this.Mr=this.Mr.add(new En(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return me.resolve(a)}lookupMutationBatch(e,t){return me.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.Nr(n),s=i<0?0:i;return me.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?Zl:this.Fr-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new En(t,0),i=new En(t,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([n,i],(a=>{const c=this.Or(a.Cr);s.push(c)})),me.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new vr(jt);return t.forEach((i=>{const s=new En(i,0),a=new En(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,a],(c=>{n=n.add(c.Cr)}))})),me.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;it.isDocumentKey(s)||(s=s.child(""));const a=new En(new it(s),0);let c=new vr(jt);return this.Mr.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===i&&(c=c.add(d.Cr)),!0)}),a),me.resolve(this.Br(c))}Br(e){const t=[];return e.forEach((n=>{const i=this.Or(n);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){yt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Mr;return me.forEach(t.mutations,(i=>{const s=new En(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Mr=n}))}qn(e){}containsKey(e,t){const n=new En(t,0),i=this.Mr.firstAfterOrEqual(n);return me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e){this.kr=e,this.docs=(function(){return new Mr(it.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,a=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return me.resolve(n?n.document.mutableCopy():Or.newInvalidDocument(t))}getEntries(e,t){let n=qi();return t.forEach((i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():Or.newInvalidDocument(i))})),me.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let s=qi();const a=t.path,c=new it(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:p}}=d.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||ub(P3(p),n)<=0||(i.has(p.key)||qh(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return me.resolve(s)}getAllFromCollectionGroup(e,t,n,i){ft()}qr(e,t){return me.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new $L(this)}getSize(e){return me.resolve(this.size)}}class $L extends KS{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(n)})),me.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.persistence=e,this.Qr=new oo((t=>cc(t)),Hh),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Ib,this.targetCount=0,this.Kr=hc.Un()}forEachTarget(e,t){return this.Qr.forEach(((n,i)=>t(i))),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),me.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new hc(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.zn(t),me.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.Qr.forEach(((a,c)=>{c.sequenceNumber<=t&&n.get(c.targetId)===null&&(this.Qr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),me.waitFor(s).next((()=>i))}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return me.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),me.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),me.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),me.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return me.resolve(n)}containsKey(e,t){return me.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new fs(0),this.zr=!1,this.zr=!0,this.jr=new LL,this.referenceDelegate=e(this),this.Hr=new BL(this),this.indexManager=new NL,this.remoteDocumentCache=(function(i){return new VL(i)})((n=>this.referenceDelegate.Jr(n))),this.serializer=new OS(t),this.Yr=new FL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new ML(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){Ge("MemoryPersistence","Starting transaction:",e);const i=new UL(this.Gr.next());return this.referenceDelegate.Zr(),n(i).next((s=>this.referenceDelegate.Xr(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}ei(e,t){return me.or(Object.values(this.Wr).map((n=>()=>n.containsKey(e,t))))}}class UL extends j3{constructor(e){super(),this.currentSequenceNumber=e}}class Lg{constructor(e){this.persistence=e,this.ti=new Ib,this.ni=null}static ri(e){return new Lg(e)}get ii(){if(this.ni)return this.ni;throw ft()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),me.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),me.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach((i=>this.ii.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.ii.add(s.toString())))})).next((()=>n.removeTargetData(e,t)))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.ii,(n=>{const i=it.fromPath(n);return this.si(e,i).next((s=>{s||t.removeEntry(i,_t.min())}))})).next((()=>(this.ni=null,t.apply(e))))}updateLimboDocument(e,t){return this.si(e,t).next((n=>{n?this.ii.delete(t.toString()):this.ii.add(t.toString())}))}Jr(e){return 0}si(e,t){return me.or([()=>me.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Fm{constructor(e,t){this.persistence=e,this.oi=new oo((n=>Jn(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=GS(this,t)}static ri(e,t){return new Fm(e,t)}Zr(){}Xr(e){return me.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((i=>n+i))))}sr(e){let t=0;return this.rr(e,(n=>{t++})).next((()=>t))}rr(e,t){return me.forEach(this.oi,((n,i)=>this.ar(e,n,i).next((s=>s?me.resolve():t(i)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.qr(e,(a=>this.ar(e,a,t).next((c=>{c||(n++,s.removeEntry(a,_t.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),me.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),me.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),me.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rm(e.data.value)),t}ar(e,t,n){return me.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return me.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.serializer=e}B(e,t,n,i){const s=new Ag("createOrUpgrade",t);n<1&&i>=1&&((function(d){d.createObjectStore(zh)})(e),(function(d){d.createObjectStore(ah,{keyPath:nO}),d.createObjectStore(Fs,{keyPath:R4,autoIncrement:!0}).createIndex(Yl,j4,{unique:!0}),d.createObjectStore(Ju)})(e),wT(e),(function(d){d.createObjectStore(Ul)})(e));let a=me.resolve();return n<3&&i>=3&&(n!==0&&((function(d){d.deleteObjectStore(ed),d.deleteObjectStore(Zu),d.deleteObjectStore(ec)})(e),wT(e)),a=a.next((()=>(function(d){const h=d.store(ec),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return h.put(Am,p)})(s)))),n<4&&i>=4&&(n!==0&&(a=a.next((()=>(function(d,h){return h.store(Fs).G().next((m=>{d.deleteObjectStore(Fs),d.createObjectStore(Fs,{keyPath:R4,autoIncrement:!0}).createIndex(Yl,j4,{unique:!0});const x=h.store(Fs),v=m.map((_=>x.put(_)));return me.waitFor(v)}))})(e,s)))),a=a.next((()=>{(function(d){d.createObjectStore(td,{keyPath:hO})})(e)}))),n<5&&i>=5&&(a=a.next((()=>this._i(s)))),n<6&&i>=6&&(a=a.next((()=>((function(d){d.createObjectStore(oh)})(e),this.ai(s))))),n<7&&i>=7&&(a=a.next((()=>this.ui(s)))),n<8&&i>=8&&(a=a.next((()=>this.ci(e,s)))),n<9&&i>=9&&(a=a.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&i>=10&&(a=a.next((()=>this.li(s)))),n<11&&i>=11&&(a=a.next((()=>{(function(d){d.createObjectStore(Ng,{keyPath:fO})})(e),(function(d){d.createObjectStore(kg,{keyPath:pO})})(e)}))),n<12&&i>=12&&(a=a.next((()=>{(function(d){const h=d.createObjectStore(Sg,{keyPath:wO});h.createIndex(Wv,_O,{unique:!1}),h.createIndex($3,EO,{unique:!1})})(e)}))),n<13&&i>=13&&(a=a.next((()=>(function(d){const h=d.createObjectStore(Tm,{keyPath:sO});h.createIndex(em,aO),h.createIndex(O3,oO)})(e))).next((()=>this.hi(e,s))).next((()=>e.deleteObjectStore(Ul)))),n<14&&i>=14&&(a=a.next((()=>this.Pi(e,s)))),n<15&&i>=15&&(a=a.next((()=>(function(d){d.createObjectStore(fb,{keyPath:mO,autoIncrement:!0}).createIndex(Hv,gO,{unique:!1}),d.createObjectStore(Nm,{keyPath:xO}).createIndex(M3,yO,{unique:!1}),d.createObjectStore(km,{keyPath:vO}).createIndex(V3,bO,{unique:!1})})(e)))),n<16&&i>=16&&(a=a.next((()=>{t.objectStore(Nm).clear()})).next((()=>{t.objectStore(km).clear()}))),n<17&&i>=17&&(a=a.next((()=>{(function(d){d.createObjectStore(pb,{keyPath:TO})})(e)}))),a}ai(e){let t=0;return e.store(Ul).Z(((n,i)=>{t+=Dm(i)})).next((()=>{const n={byteSize:t};return e.store(oh).put(zv,n)}))}_i(e){const t=e.store(ah),n=e.store(Fs);return t.G().next((i=>me.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,Zl],[s.userId,s.lastAcknowledgedBatchId]);return n.G(Yl,a).next((c=>me.forEach(c,(d=>{yt(d.userId===s.userId);const h=Wl(this.serializer,d);return US(e,s.userId,h).next((()=>{}))}))))}))))}ui(e){const t=e.store(ed),n=e.store(Ul);return e.store(ec).get(Am).next((i=>{const s=[];return n.Z(((a,c)=>{const d=new ar(a),h=(function(m){return[0,Jn(m)]})(d);s.push(t.get(h).next((p=>p?me.resolve():(m=>t.put({targetId:0,path:Jn(m),sequenceNumber:i.highestListenSequenceNumber}))(d))))})).next((()=>me.waitFor(s)))}))}ci(e,t){e.createObjectStore(lh,{keyPath:dO});const n=t.store(lh),i=new Cb,s=a=>{if(i.add(a)){const c=a.lastSegment(),d=a.popLast();return n.put({collectionId:c,parent:Jn(d)})}};return t.store(Ul).Z({Y:!0},((a,c)=>{const d=new ar(a);return s(d.popLast())})).next((()=>t.store(Ju).Z({Y:!0},(([a,c,d],h)=>{const p=la(c);return s(p.popLast())}))))}li(e){const t=e.store(Zu);return t.Z(((n,i)=>{const s=S0(i),a=LS(this.serializer,s);return t.put(a)}))}hi(e,t){const n=t.store(Ul),i=[];return n.Z(((s,a)=>{const c=t.store(Tm),d=(function(m){return m.document?new it(ar.fromString(m.document.name).popFirst(5)):m.noDocument?it.fromSegments(m.noDocument.path):m.unknownDocument?it.fromSegments(m.unknownDocument.path):ft()})(a).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(c.put(h))})).next((()=>me.waitFor(i)))}Pi(e,t){const n=t.store(Fs),i=YS(this.serializer),s=new Pb(Lg.ri,this.serializer.Tt);return n.G().next((a=>{const c=new Map;return a.forEach((d=>{var h;let p=(h=c.get(d.userId))!==null&&h!==void 0?h:Wt();Wl(this.serializer,d).keys().forEach((m=>p=p.add(m))),c.set(d.userId,p)})),me.forEach(c,((d,h)=>{const p=new ai(h),m=Fg.It(this.serializer,p),x=s.getIndexManager(p),v=Og.It(p,this.serializer,x,s.referenceDelegate);return new XS(i,v,m,x).recalculateAndSaveOverlaysForDocumentKeys(new qv(t,fs.ae),d).next()}))}))}}function wT(r){r.createObjectStore(ed,{keyPath:cO}).createIndex(hb,uO,{unique:!0}),r.createObjectStore(Zu,{keyPath:"targetId"}).createIndex(L3,lO,{unique:!0}),r.createObjectStore(ec)}const Vo="IndexedDbPersistence",Qy=18e5,Jy=5e3,Zy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",HL="main";class Rb{constructor(e,t,n,i,s,a,c,d,h,p,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Ti=s,this.window=a,this.document=c,this.Ii=h,this.Ei=p,this.di=m,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=x=>Promise.resolve(),!Rb.D())throw new Ze(Ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new PL(this,i),this.gi=t+HL,this.serializer=new OS(d),this.pi=new Zo(this.gi,this.di,new zL(this.serializer)),this.jr=new bL,this.Hr=new SL(this.referenceDelegate,this.serializer),this.remoteDocumentCache=YS(this.serializer),this.Yr=new vL,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,p===!1&&ci(Vo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ze(Ie.FAILED_PRECONDITION,Zy);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Hr.getHighestSequenceNumber(e)))})).then((e=>{this.Gr=new fs(e,this.Ii)})).then((()=>{this.zr=!0})).catch((e=>(this.pi&&this.pi.close(),Promise.reject(e))))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget((async()=>{this.started&&await this.wi()})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Ip(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Fi(e).next((t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable((()=>this.fi(!1))))}))})).next((()=>this.Mi(e))).next((t=>this.isPrimary&&!t?this.xi(e).next((()=>!1)):!!t&&this.Oi(e).next((()=>!0)))))).catch((e=>{if(gl(e))return Ge(Vo,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ge(Vo,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable((()=>this.fi(e))),this.isPrimary=e}))}Fi(e){return b0(e).get(vu).next((t=>me.resolve(this.Ni(t))))}Bi(e){return Ip(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Qy)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=gn(t,td);return n.G().next((i=>{const s=this.qi(i,Qy),a=i.filter((c=>s.indexOf(c)===-1));return me.forEach(a,(c=>n.delete(c.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.wi().then((()=>this.Li())).then((()=>this.Di()))))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?me.resolve(!0):b0(e).get(vu).next((t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Jy)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new Ze(Ie.FAILED_PRECONDITION,Zy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ip(e).G().next((n=>this.qi(n,Jy).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(s||a&&c)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Ge(Vo,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[zh,td],(e=>{const t=new qv(e,fs.ae);return this.xi(t).next((()=>this.Bi(t)))})),this.pi.close(),this.Gi()}qi(e,t){return e.filter((n=>this.ki(n.updateTimeMs,t)&&!this.$i(n.clientId)))}zi(){return this.runTransaction("getActiveClients","readonly",(e=>Ip(e).G().next((t=>this.qi(t,Qy).map((n=>n.clientId))))))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Og.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new kL(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Fg.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,n){Ge(Vo,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(d){return d===17?kO:d===16?NO:d===15?mb:d===14?z3:d===13?U3:d===12?AO:d===11?B3:void ft()})(this.di);let a;return this.pi.runTransaction(e,i,s,(c=>(a=new qv(c,this.Gr?this.Gr.next():fs.ae),t==="readwrite-primary"?this.Fi(a).next((d=>!!d||this.Mi(a))).next((d=>{if(!d)throw ci(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable((()=>this.fi(!1))),new Ze(Ie.FAILED_PRECONDITION,R3);return n(a)})).next((d=>this.Oi(a).next((()=>d)))):this.ji(a).next((()=>n(a)))))).then((c=>(a.raiseOnCommittedEvent(),c)))}ji(e){return b0(e).get(vu).next((t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Jy)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ze(Ie.FAILED_PRECONDITION,Zy)}))}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return b0(e).put(vu,t)}static D(){return Zo.D()}xi(e){const t=b0(e);return t.get(vu).next((n=>this.Ni(n)?(Ge(Vo,"Releasing primary lease."),t.delete(vu)):me.resolve()))}ki(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(ci(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.wi())))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();const t=/(?:Version|Mobile)\/1[456]/;jk()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const n=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return Ge(Vo,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ci(Vo,"Failed to get zombied client id.",n),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){ci("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function b0(r){return gn(r,zh)}function Ip(r){return gn(r,td)}function WL(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=i}static Yi(e,t){let n=Wt(),i=Wt();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new jb(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=(function(){return jk()?8:D3(mn())>0?6:4})()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,i){const s={result:null};return this.rs(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ss(e,t,i,n).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new qL;return this._s(e,t,a).next((c=>{if(s.result=c,this.Xi)return this.us(e,t,a,c.size)}))})).next((()=>s.result))}us(e,t,n,i){return n.documentReadCount<this.es?(Cu()<=Yt.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",Iu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),me.resolve()):(Cu()<=Yt.DEBUG&&Ge("QueryEngine","Query:",Iu(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ts*i?(Cu()<=Yt.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",Iu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ps(t))):me.resolve())}rs(e,t){if(q4(t))return me.resolve(null);let n=ps(t);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Pm(t,null,"F"),n=ps(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((s=>{const a=Wt(...s);return this.ns.getDocuments(e,a).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.cs(t,c);return this.ls(t,h,a,d.readTime)?this.rs(e,Pm(t,null,"F")):this.hs(e,h,t,d)}))))})))))}ss(e,t,n,i){return q4(t)||i.isEqual(_t.min())?me.resolve(null):this.ns.getDocuments(e,n).next((s=>{const a=this.cs(t,s);return this.ls(t,a,n,i)?me.resolve(null):(Cu()<=Yt.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Iu(t)),this.hs(e,a,t,XF(i,nh)).next((c=>c)))}))}cs(e,t){let n=new vr(cS(e));return t.forEach(((i,s)=>{qh(e,s)&&(n=n.add(s))})),n}ls(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}_s(e,t,n){return Cu()<=Yt.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",Iu(t)),this.ns.getDocumentsMatchingQuery(e,t,Xi.min(),n)}hs(e,t,n,i){return this.ns.getDocumentsMatchingQuery(e,n,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="LocalStore",GL=3e8;class KL{constructor(e,t,n,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new Mr(jt),this.Is=new oo((s=>cc(s)),Hh),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XS(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ts)))}}function JS(r,e,t,n){return new KL(r,e,t,n)}async function ZS(r,e){const t=Ft(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next((s=>(i=s,t.As(e),t.mutationQueue.getAllMutationBatches(n)))).next((s=>{const a=[],c=[];let d=Wt();for(const h of i){a.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}for(const h of s){c.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}return t.localDocuments.getDocuments(n,d).next((h=>({Rs:h,removedBatchIds:a,addedBatchIds:c})))}))}))}function YL(r,e){const t=Ft(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),s=t.ds.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,p){const m=h.batch,x=m.keys();let v=me.resolve();return x.forEach((_=>{v=v.next((()=>p.getEntry(d,_))).next((w=>{const E=h.docVersions.get(_);yt(E!==null),w.version.compareTo(E)<0&&(m.applyToRemoteDocument(w,h),w.isValidDocument()&&(w.setReadTime(h.commitVersion),p.addEntry(w)))}))})),v.next((()=>c.mutationQueue.removeMutationBatch(d,m)))})(t,n,e,s).next((()=>s.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=Wt();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(n,i)))}))}function e5(r){const e=Ft(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Hr.getLastRemoteSnapshotVersion(t)))}function XL(r,e){const t=Ft(r),n=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const c=[];e.targetChanges.forEach(((p,m)=>{const x=i.get(m);if(!x)return;c.push(t.Hr.removeMatchingKeys(s,p.removedDocuments,m).next((()=>t.Hr.addMatchingKeys(s,p.addedDocuments,m))));let v=x.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(ln.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):p.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(p.resumeToken,n)),i=i.insert(m,v),(function(w,E,j){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=GL?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(x,v,p)&&c.push(t.Hr.updateTargetData(s,v))}));let d=qi(),h=Wt();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))})),c.push(QL(s,a,e.documentUpdates).next((p=>{d=p.Vs,h=p.fs}))),!n.isEqual(_t.min())){const p=t.Hr.getLastRemoteSnapshotVersion(s).next((m=>t.Hr.setTargetsMetadata(s,s.currentSequenceNumber,n)));c.push(p)}return me.waitFor(c).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,d,h))).next((()=>d))})).then((s=>(t.Ts=i,s)))}function QL(r,e,t){let n=Wt(),i=Wt();return t.forEach((s=>n=n.add(s))),e.getEntries(r,n).next((s=>{let a=qi();return t.forEach(((c,d)=>{const h=s.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(_t.min())?(e.removeEntry(c,d.readTime),a=a.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),a=a.insert(c,d)):Ge(Db,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Vs:a,fs:i}}))}function JL(r,e){const t=Ft(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=Zl),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function ZL(r,e){const t=Ft(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return t.Hr.getTargetData(n,e).next((s=>s?(i=s,me.resolve(i)):t.Hr.allocateTargetId(n).next((a=>(i=new Ua(e,a,"TargetPurposeListen",n.currentSequenceNumber),t.Hr.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=t.Ts.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(n.targetId,n),t.Is.set(e,n.targetId)),n}))}async function a1(r,e,t){const n=Ft(r),i=n.Ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,(a=>n.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!gl(a))throw a;Ge(Db,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Ts=n.Ts.remove(e),n.Is.delete(i.target)}function _T(r,e,t){const n=Ft(r);let i=_t.min(),s=Wt();return n.persistence.runTransaction("Execute query","readwrite",(a=>(function(d,h,p){const m=Ft(d),x=m.Is.get(p);return x!==void 0?me.resolve(m.Ts.get(x)):m.Hr.getTargetData(h,p)})(n,a,ps(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,n.Hr.getMatchingKeysForTargetId(a,c.targetId).next((d=>{s=d}))})).next((()=>n.Ps.getDocumentsMatchingQuery(a,e,t?i:_t.min(),t?s:Wt()))).next((c=>(eM(n,UO(e),c),{documents:c,gs:s})))))}function eM(r,e,t){let n=r.Es.get(e)||_t.min();t.forEach(((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)})),r.Es.set(e,n)}class ET{constructor(){this.activeTargetIds=KO()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class t5{constructor(){this.ho=new ET,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new ET,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="ConnectivityMonitor";class AT{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Ge(TT,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Ge(TT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pp=null;function o1(){return Pp===null?Pp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Pp++,"0x"+Pp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="RestConnection",rM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nM{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${i}`,this.wo=this.databaseId.database===Sm?`project_id=${n}`:`project_id=${n}&database_id=${i}`}So(e,t,n,i,s){const a=o1(),c=this.bo(e,t.toUriEncodedString());Ge(ev,`Sending RPC '${e}' ${a}:`,c,n);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,i,s),this.vo(e,c,d,n).then((h=>(Ge(ev,`Received RPC '${e}' ${a}: `,h),h)),(h=>{throw rh(ev,`RPC '${e}' ${a} failed with error: `,h,"url: ",c,"request:",n),h}))}Co(e,t,n,i,s,a){return this.So(e,t,n,i,s)}Do(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ad})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),n&&n.headers.forEach(((i,s)=>e[s]=i))}bo(e,t){const n=rM[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn="WebChannelConnection";class sM extends nM{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,i){const s=o1();return new Promise(((a,c)=>{const d=new E3;d.setWithCredentials(!0),d.listenOnce(T3.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Qp.NO_ERROR:const p=d.getResponseJson();Ge(Kn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Qp.TIMEOUT:Ge(Kn,`RPC '${e}' ${s} timed out`),c(new Ze(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case Qp.HTTP_ERROR:const m=d.getStatus();if(Ge(Kn,`RPC '${e}' ${s} failed with status:`,m,"response text:",d.getResponseText()),m>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const v=x?.error;if(v&&v.status&&v.message){const _=(function(E){const j=E.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(j)>=0?j:Ie.UNKNOWN})(v.status);c(new Ze(_,v.message))}else c(new Ze(Ie.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Ze(Ie.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{Ge(Kn,`RPC '${e}' ${s} completed.`)}}));const h=JSON.stringify(i);Ge(Kn,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",h,n,15)}))}Wo(e,t,n){const i=o1(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=k3(),c=N3(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const p=s.join("");Ge(Kn,`Creating RPC '${e}' stream ${i}: ${p}`,d);const m=a.createWebChannel(p,d);let x=!1,v=!1;const _=new iM({Fo:E=>{v?Ge(Kn,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(x||(Ge(Kn,`Opening RPC '${e}' stream ${i} transport.`),m.open(),x=!0),Ge(Kn,`RPC '${e}' stream ${i} sending:`,E),m.send(E))},Mo:()=>m.close()}),w=(E,j,P)=>{E.listen(j,(V=>{try{P(V)}catch(L){setTimeout((()=>{throw L}),0)}}))};return w(m,A0.EventType.OPEN,(()=>{v||(Ge(Kn,`RPC '${e}' stream ${i} transport opened.`),_.Qo())})),w(m,A0.EventType.CLOSE,(()=>{v||(v=!0,Ge(Kn,`RPC '${e}' stream ${i} transport closed`),_.Uo())})),w(m,A0.EventType.ERROR,(E=>{v||(v=!0,rh(Kn,`RPC '${e}' stream ${i} transport errored:`,E),_.Uo(new Ze(Ie.UNAVAILABLE,"The operation could not be completed")))})),w(m,A0.EventType.MESSAGE,(E=>{var j;if(!v){const P=E.data[0];yt(!!P);const V=P,L=V?.error||((j=V[0])===null||j===void 0?void 0:j.error);if(L){Ge(Kn,`RPC '${e}' stream ${i} received error:`,L);const K=L.status;let H=(function(I){const R=an[I];if(R!==void 0)return _S(R)})(K),S=L.message;H===void 0&&(H=Ie.INTERNAL,S="Unknown error status: "+K+" with message "+L.message),v=!0,_.Uo(new Ze(H,S)),m.close()}else Ge(Kn,`RPC '${e}' stream ${i} received:`,P),_.Ko(P)}})),w(c,A3.STAT_EVENT,(E=>{E.stat===$v.PROXY?Ge(Kn,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===$v.NOPROXY&&Ge(Kn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.$o()}),0),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(){return typeof window<"u"?window:null}function am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(r){return new oL(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,t,n=1e3,i=1.5,s=6e4){this.Ti=e,this.timerId=t,this.Go=n,this.zo=i,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-n);i>0&&Ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,(()=>(this.Yo=Date.now(),e()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="PersistentStream";class r5{constructor(e,t,n,i,s,a,c,d){this.Ti=e,this.n_=n,this.r_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Fb(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Ie.RESOURCE_EXHAUSTED?(ci(t.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.i_===t&&this.V_(n,i)}),(n=>{e((()=>{const i=new Ze(Ie.UNKNOWN,"Fetching auth token failed: "+n.message);return this.m_(i)}))}))}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((i=>{n((()=>this.m_(i)))})),this.stream.onMessage((i=>{n((()=>++this.__==1?this.g_(i):this.onNext(i)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(e){return Ge(NT,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget((()=>this.i_===e?t():(Ge(NT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class oM extends r5{constructor(e,t,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=dL(this.serializer,e),n=(function(s){if(!("targetChange"in s))return _t.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?_t.min():a.readTime?kn(a.readTime):_t.min()})(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=t1(this.serializer),t.addTarget=(function(s,a){let c;const d=a.target;if(c=Cm(d)?{documents:IS(s,d)}:{query:PS(s,d).ht},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=AS(s,a.resumeToken);const h=Zv(s,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo(_t.min())>0){c.readTime=ud(s,a.snapshotVersion.toTimestamp());const h=Zv(s,a.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const n=fL(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=t1(this.serializer),t.removeTarget=e,this.I_(t)}}class lM extends r5{constructor(e,t,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return yt(!!e.streamToken),this.lastStreamToken=e.streamToken,yt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=hL(e.writeResults,e.commitTime),n=kn(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=t1(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>mh(this.serializer,n)))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{}class uM extends cM{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Ze(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.So(e,e1(t,n),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ze(Ie.UNKNOWN,s.toString())}))}Co(e,t,n,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Co(e,e1(t,n),i,a,c,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ze(Ie.UNKNOWN,a.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class dM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ci(t),this.N_=!1):Ge("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc="RemoteStore";class hM{constructor(e,t,n,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To((a=>{n.enqueueAndForget((async()=>{Sc(this)&&(Ge(fc,"Restarting streams for network reachability change."),await(async function(d){const h=Ft(d);h.W_.add(4),await Yh(h),h.j_.set("Unknown"),h.W_.delete(4),await Vg(h)})(this))}))})),this.j_=new dM(n,i)}}async function Vg(r){if(Sc(r))for(const e of r.G_)await e(!0)}async function Yh(r){for(const e of r.G_)await e(!1)}function n5(r,e){const t=Ft(r);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),Vb(t)?Mb(t):Sd(t).c_()&&Lb(t,e))}function Ob(r,e){const t=Ft(r),n=Sd(t);t.K_.delete(e),n.c_()&&i5(t,e),t.K_.size===0&&(n.c_()?n.P_():Sc(t)&&t.j_.set("Unknown"))}function Lb(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_t.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sd(r).y_(e)}function i5(r,e){r.H_.Ne(e),Sd(r).w_(e)}function Mb(r){r.H_=new nL({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.K_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),Sd(r).start(),r.j_.B_()}function Vb(r){return Sc(r)&&!Sd(r).u_()&&r.K_.size>0}function Sc(r){return Ft(r).W_.size===0}function s5(r){r.H_=void 0}async function fM(r){r.j_.set("Online")}async function pM(r){r.K_.forEach(((e,t)=>{Lb(r,e)}))}async function mM(r,e){s5(r),Vb(r)?(r.j_.q_(e),Mb(r)):r.j_.set("Unknown")}async function gM(r,e,t){if(r.j_.set("Online"),e instanceof TS&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const c of s.targetIds)i.K_.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.K_.delete(c),i.H_.removeTarget(c))})(r,e)}catch(n){Ge(fc,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Om(r,n)}else if(e instanceof sm?r.H_.We(e):e instanceof ES?r.H_.Ze(e):r.H_.je(e),!t.isEqual(_t.min()))try{const n=await e5(r.localStore);t.compareTo(n)>=0&&await(function(s,a){const c=s.H_.ot(a);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const p=s.K_.get(h);p&&s.K_.set(h,p.withResumeToken(d.resumeToken,a))}})),c.targetMismatches.forEach(((d,h)=>{const p=s.K_.get(d);if(!p)return;s.K_.set(d,p.withResumeToken(ln.EMPTY_BYTE_STRING,p.snapshotVersion)),i5(s,d);const m=new Ua(p.target,d,h,p.sequenceNumber);Lb(s,m)})),s.remoteSyncer.applyRemoteEvent(c)})(r,t)}catch(n){Ge(fc,"Failed to raise snapshot:",n),await Om(r,n)}}async function Om(r,e,t){if(!gl(e))throw e;r.W_.add(1),await Yh(r),r.j_.set("Offline"),t||(t=()=>e5(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Ge(fc,"Retrying IndexedDB access"),await t(),r.W_.delete(1),await Vg(r)}))}function a5(r,e){return e().catch((t=>Om(r,t,e)))}async function Xh(r){const e=Ft(r),t=sl(e);let n=e.U_.length>0?e.U_[e.U_.length-1].batchId:Zl;for(;xM(e);)try{const i=await JL(e.localStore,n);if(i===null){e.U_.length===0&&t.P_();break}n=i.batchId,yM(e,i)}catch(i){await Om(e,i)}o5(e)&&l5(e)}function xM(r){return Sc(r)&&r.U_.length<10}function yM(r,e){r.U_.push(e);const t=sl(r);t.c_()&&t.S_&&t.b_(e.mutations)}function o5(r){return Sc(r)&&!sl(r).u_()&&r.U_.length>0}function l5(r){sl(r).start()}async function vM(r){sl(r).C_()}async function bM(r){const e=sl(r);for(const t of r.U_)e.b_(t.mutations)}async function wM(r,e,t){const n=r.U_.shift(),i=Tb.from(n,e,t);await a5(r,(()=>r.remoteSyncer.applySuccessfulWrite(i))),await Xh(r)}async function _M(r,e){e&&sl(r).S_&&await(async function(n,i){if((function(a){return wS(a)&&a!==Ie.ABORTED})(i.code)){const s=n.U_.shift();sl(n).h_(),await a5(n,(()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i))),await Xh(n)}})(r,e),o5(r)&&l5(r)}async function kT(r,e){const t=Ft(r);t.asyncQueue.verifyOperationInProgress(),Ge(fc,"RemoteStore received new credentials");const n=Sc(t);t.W_.add(3),await Yh(t),n&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Vg(t)}async function EM(r,e){const t=Ft(r);e?(t.W_.delete(2),await Vg(t)):e||(t.W_.add(2),await Yh(t),t.j_.set("Unknown"))}function Sd(r){return r.J_||(r.J_=(function(t,n,i){const s=Ft(t);return s.M_(),new oM(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(r.datastore,r.asyncQueue,{xo:fM.bind(null,r),No:pM.bind(null,r),Lo:mM.bind(null,r),p_:gM.bind(null,r)}),r.G_.push((async e=>{e?(r.J_.h_(),Vb(r)?Mb(r):r.j_.set("Unknown")):(await r.J_.stop(),s5(r))}))),r.J_}function sl(r){return r.Y_||(r.Y_=(function(t,n,i){const s=Ft(t);return s.M_(),new lM(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:vM.bind(null,r),Lo:_M.bind(null,r),D_:bM.bind(null,r),v_:wM.bind(null,r)}),r.G_.push((async e=>{e?(r.Y_.h_(),await Xh(r)):(await r.Y_.stop(),r.U_.length>0&&(Ge(fc,`Stopping write stream with ${r.U_.length} pending writes`),r.U_=[]))}))),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new Bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,s){const a=Date.now()+n,c=new $b(e,t,a,i,s);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bb(r,e){if(ci("AsyncQueue",`${e}: ${r}`),gl(r))return new Ze(Ie.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{static emptySet(e){return new qu(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||it.comparator(t.key,n.key):(t,n)=>it.comparator(t.key,n.key),this.keyedMap=N0(),this.sortedSet=new Mr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new qu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.Z_=new Mr(it.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?e.type!==0&&n.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&n.type!==1?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Z_=this.Z_.remove(t):e.type===1&&n.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ft():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class dd{constructor(e,t,n,i,s,a,c,d,h){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,n,i,s){const a=[];return t.forEach((c=>{a.push({type:0,doc:c})})),new dd(e,t,qu.emptySet(t),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some((e=>e.ra()))}}class AM{constructor(){this.queries=CT(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,n){const i=Ft(t),s=i.queries;i.queries=CT(),s.forEach(((a,c)=>{for(const d of c.ta)d.onError(n)}))})(this,new Ze(Ie.ABORTED,"Firestore shutting down"))}}function CT(){return new oo((r=>lS(r)),Pg)}async function Ub(r,e){const t=Ft(r);let n=3;const i=e.query;let s=t.queries.get(i);s?!s.na()&&e.ra()&&(n=2):(s=new TM,n=e.ra()?0:1);try{switch(n){case 0:s.ea=await t.onListen(i,!0);break;case 1:s.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const c=Bb(a,`Initialization of query '${Iu(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.ta.push(e),e.sa(t.onlineState),s.ea&&e.oa(s.ea)&&Hb(t)}async function zb(r,e){const t=Ft(r),n=e.query;let i=3;const s=t.queries.get(n);if(s){const a=s.ta.indexOf(e);a>=0&&(s.ta.splice(a,1),s.ta.length===0?i=e.ra()?0:1:!s.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function NM(r,e){const t=Ft(r);let n=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const c of a.ta)c.oa(i)&&(n=!0);a.ea=i}}n&&Hb(t)}function kM(r,e,t){const n=Ft(r),i=n.queries.get(e);if(i)for(const s of i.ta)s.onError(t);n.queries.delete(e)}function Hb(r){r.ia.forEach((e=>{e.next()}))}var l1,IT;(IT=l1||(l1={}))._a="default",IT.Cache="cache";class Wb{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new dd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const n=t!=="Offline";return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=dd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==l1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e){this.key=e}}class u5{constructor(e){this.key=e}}class SM{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Wt(),this.mutatedKeys=Wt(),this.ya=cS(e),this.wa=new qu(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new ST,i=t?t.wa:this.wa;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,m)=>{const x=i.get(p),v=qh(this.query,m)?m:null,_=!!x&&this.mutatedKeys.has(x.key),w=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let E=!1;x&&v?x.data.isEqual(v.data)?_!==w&&(n.track({type:3,doc:v}),E=!0):this.va(x,v)||(n.track({type:2,doc:v}),E=!0,(d&&this.ya(v,d)>0||h&&this.ya(v,h)<0)&&(c=!0)):!x&&v?(n.track({type:0,doc:v}),E=!0):x&&!v&&(n.track({type:1,doc:x}),E=!0,(d||h)&&(c=!0)),E&&(v?(a=a.add(v),s=w?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),n.track({type:1,doc:p})}return{wa:a,Da:n,ls:c,mutatedKeys:s}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const a=e.Da.X_();a.sort(((p,m)=>(function(v,_){const w=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return w(v)-w(_)})(p.type,m.type)||this.ya(p.doc,m.doc))),this.Ca(n),i=i!=null&&i;const c=t&&!i?this.Fa():[],d=this.pa.size===0&&this.current&&!i?1:0,h=d!==this.ga;return this.ga=d,a.length!==0||h?{snapshot:new dd(this.query,e.wa,s,a,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new ST,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach((t=>this.fa=this.fa.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.fa=this.fa.delete(t))),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Wt(),this.wa.forEach((n=>{this.xa(n.key)&&(this.pa=this.pa.add(n.key))}));const t=[];return e.forEach((n=>{this.pa.has(n)||t.push(new u5(n))})),this.pa.forEach((n=>{e.has(n)||t.push(new c5(n))})),t}Oa(e){this.fa=e.gs,this.pa=Wt();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return dd.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const qb="SyncEngine";class CM{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class IM{constructor(e){this.key=e,this.Ba=!1}}class PM{constructor(e,t,n,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new oo((c=>lS(c)),Pg),this.qa=new Map,this.Qa=new Set,this.$a=new Mr(it.comparator),this.Ua=new Map,this.Ka=new Ib,this.Wa={},this.Ga=new Map,this.za=hc.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function RM(r,e,t=!0){const n=g5(r);let i;const s=n.ka.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await d5(n,e,t,!0),i}async function jM(r,e){const t=g5(r);await d5(t,e,!0,!1)}async function d5(r,e,t,n){const i=await ZL(r.localStore,ps(e)),s=i.targetId,a=r.sharedClientState.addLocalQueryTarget(s,t);let c;return n&&(c=await DM(r,e,s,a==="current",i.resumeToken)),r.isPrimaryClient&&t&&n5(r.remoteStore,i),c}async function DM(r,e,t,n,i){r.Ha=(m,x,v)=>(async function(w,E,j,P){let V=E.view.ba(j);V.ls&&(V=await _T(w.localStore,E.query,!1).then((({documents:S})=>E.view.ba(S,V))));const L=P&&P.targetChanges.get(E.targetId),K=P&&P.targetMismatches.get(E.targetId)!=null,H=E.view.applyChanges(V,w.isPrimaryClient,L,K);return RT(w,E.targetId,H.Ma),H.snapshot})(r,m,x,v);const s=await _T(r.localStore,e,!0),a=new SM(e,s.gs),c=a.ba(s.documents),d=Kh.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),h=a.applyChanges(c,r.isPrimaryClient,d);RT(r,t,h.Ma);const p=new CM(e,t,a);return r.ka.set(e,p),r.qa.has(t)?r.qa.get(t).push(e):r.qa.set(t,[e]),h.snapshot}async function FM(r,e,t){const n=Ft(r),i=n.ka.get(e),s=n.qa.get(i.targetId);if(s.length>1)return n.qa.set(i.targetId,s.filter((a=>!Pg(a,e)))),void n.ka.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await a1(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),t&&Ob(n.remoteStore,i.targetId),c1(n,i.targetId)})).catch(kc)):(c1(n,i.targetId),await a1(n.localStore,i.targetId,!0))}async function OM(r,e){const t=Ft(r),n=t.ka.get(e),i=t.qa.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Ob(t.remoteStore,n.targetId))}async function LM(r,e,t){const n=x5(r);try{const i=await(function(a,c){const d=Ft(a),h=or.now(),p=c.reduce(((v,_)=>v.add(_.key)),Wt());let m,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let _=qi(),w=Wt();return d.ds.getEntries(v,p).next((E=>{_=E,_.forEach(((j,P)=>{P.isValidDocument()||(w=w.add(j))}))})).next((()=>d.localDocuments.getOverlayedDocuments(v,_))).next((E=>{m=E;const j=[];for(const P of c){const V=eL(P,m.get(P.key).overlayedDocument);V!=null&&j.push(new lo(P.key,V,Z3(V.value.mapValue),en.exists(!0)))}return d.mutationQueue.addMutationBatch(v,h,j,c)})).next((E=>{x=E;const j=E.applyToLocalDocumentSet(m,w);return d.documentOverlayCache.saveOverlays(v,E.batchId,j)}))})).then((()=>({batchId:x.batchId,changes:dS(m)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(a,c,d){let h=a.Wa[a.currentUser.toKey()];h||(h=new Mr(jt)),h=h.insert(c,d),a.Wa[a.currentUser.toKey()]=h})(n,i.batchId,t),await Qh(n,i.changes),await Xh(n.remoteStore)}catch(i){const s=Bb(i,"Failed to persist write");t.reject(s)}}async function h5(r,e){const t=Ft(r);try{const n=await XL(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Ua.get(s);a&&(yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.Ba=!0:i.modifiedDocuments.size>0?yt(a.Ba):i.removedDocuments.size>0&&(yt(a.Ba),a.Ba=!1))})),await Qh(t,n,e)}catch(n){await kc(n)}}function PT(r,e,t){const n=Ft(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.ka.forEach(((s,a)=>{const c=a.view.sa(e);c.snapshot&&i.push(c.snapshot)})),(function(a,c){const d=Ft(a);d.onlineState=c;let h=!1;d.queries.forEach(((p,m)=>{for(const x of m.ta)x.sa(c)&&(h=!0)})),h&&Hb(d)})(n.eventManager,e),i.length&&n.La.p_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function MM(r,e,t){const n=Ft(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Ua.get(e),s=i&&i.key;if(s){let a=new Mr(it.comparator);a=a.insert(s,Or.newNoDocument(s,_t.min()));const c=Wt().add(s),d=new Dg(_t.min(),new Map,new Mr(jt),a,c);await h5(n,d),n.$a=n.$a.remove(s),n.Ua.delete(e),Gb(n)}else await a1(n.localStore,e,!1).then((()=>c1(n,e,t))).catch(kc)}async function VM(r,e){const t=Ft(r),n=e.batch.batchId;try{const i=await YL(t.localStore,e);p5(t,n,null),f5(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Qh(t,i)}catch(i){await kc(i)}}async function $M(r,e,t){const n=Ft(r);try{const i=await(function(a,c){const d=Ft(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return d.mutationQueue.lookupMutationBatch(h,c).next((m=>(yt(m!==null),p=m.keys(),d.mutationQueue.removeMutationBatch(h,m)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,p,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>d.localDocuments.getDocuments(h,p)))}))})(n.localStore,e);p5(n,e,t),f5(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Qh(n,i)}catch(i){await kc(i)}}function f5(r,e){(r.Ga.get(e)||[]).forEach((t=>{t.resolve()})),r.Ga.delete(e)}function p5(r,e,t){const n=Ft(r);let i=n.Wa[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),n.Wa[n.currentUser.toKey()]=i}}function c1(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.qa.get(e))r.ka.delete(n),t&&r.La.Ja(n,t);r.qa.delete(e),r.isPrimaryClient&&r.Ka.br(e).forEach((n=>{r.Ka.containsKey(n)||m5(r,n)}))}function m5(r,e){r.Qa.delete(e.path.canonicalString());const t=r.$a.get(e);t!==null&&(Ob(r.remoteStore,t),r.$a=r.$a.remove(e),r.Ua.delete(t),Gb(r))}function RT(r,e,t){for(const n of t)n instanceof c5?(r.Ka.addReference(n.key,e),BM(r,n)):n instanceof u5?(Ge(qb,"Document no longer in limbo: "+n.key),r.Ka.removeReference(n.key,e),r.Ka.containsKey(n.key)||m5(r,n.key)):ft()}function BM(r,e){const t=e.key,n=t.path.canonicalString();r.$a.get(t)||r.Qa.has(n)||(Ge(qb,"New document in limbo: "+t),r.Qa.add(n),Gb(r))}function Gb(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const t=new it(ar.fromString(e)),n=r.za.next();r.Ua.set(n,new IM(t)),r.$a=r.$a.insert(t,n),n5(r.remoteStore,new Ua(ps(Wh(t.path)),n,"TargetPurposeLimboResolution",fs.ae))}}async function Qh(r,e,t){const n=Ft(r),i=[],s=[],a=[];n.ka.isEmpty()||(n.ka.forEach(((c,d)=>{a.push(n.Ha(d,e,t).then((h=>{var p;if((h||t)&&n.isPrimaryClient){const m=h?!h.fromCache:(p=t?.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;n.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){i.push(h);const m=jb.Yi(d.targetId,h);s.push(m)}})))})),await Promise.all(a),n.La.p_(i),await(async function(d,h){const p=Ft(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>me.forEach(h,(x=>me.forEach(x.Hi,(v=>p.persistence.referenceDelegate.addReference(m,x.targetId,v))).next((()=>me.forEach(x.Ji,(v=>p.persistence.referenceDelegate.removeReference(m,x.targetId,v)))))))))}catch(m){if(!gl(m))throw m;Ge(Db,"Failed to update sequence numbers: "+m)}for(const m of h){const x=m.targetId;if(!m.fromCache){const v=p.Ts.get(x),_=v.snapshotVersion,w=v.withLastLimboFreeSnapshotVersion(_);p.Ts=p.Ts.insert(x,w)}}})(n.localStore,s))}async function UM(r,e){const t=Ft(r);if(!t.currentUser.isEqual(e)){Ge(qb,"User change. New user:",e.toKey());const n=await ZS(t.localStore,e);t.currentUser=e,(function(s,a){s.Ga.forEach((c=>{c.forEach((d=>{d.reject(new Ze(Ie.CANCELLED,a))}))})),s.Ga.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Qh(t,n.Rs)}}function zM(r,e){const t=Ft(r),n=t.Ua.get(e);if(n&&n.Ba)return Wt().add(n.key);{let i=Wt();const s=t.qa.get(e);if(!s)return i;for(const a of s){const c=t.ka.get(a);i=i.unionWith(c.view.Sa)}return i}}function g5(r){const e=Ft(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=h5.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MM.bind(null,e),e.La.p_=NM.bind(null,e.eventManager),e.La.Ja=kM.bind(null,e.eventManager),e}function x5(r){const e=Ft(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$M.bind(null,e),e}class gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mg(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return JS(this.persistence,new QS,e.initialUser,this.serializer)}Xa(e){return new Pb(Lg.ri,this.serializer)}Za(e){return new t5}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gh.provider={build:()=>new gh};class HM extends gh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){yt(this.persistence.referenceDelegate instanceof Fm);const n=this.persistence.referenceDelegate.garbageCollector;return new qS(n,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new Pb((n=>Fm.ri(n,t)),this.serializer)}}class WM extends gh{constructor(e,t,n){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await x5(this.ru.syncEngine),await Xh(this.ru.remoteStore),await this.persistence.Ci((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}eu(e){return JS(this.persistence,new QS,e.initialUser,this.serializer)}tu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new qS(n,e.asyncQueue,t)}nu(e,t){const n=new eO(t,this.persistence);return new ZF(e.asyncQueue,n)}Xa(e){const t=WL(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new Rb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,aM(),am(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new t5}}class Lm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>PT(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=UM.bind(null,this.syncEngine),await EM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new AM})()}createDatastore(e){const t=Mg(e.databaseInfo.databaseId),n=(function(s){return new sM(s)})(e.databaseInfo);return(function(s,a,c,d){return new uM(s,a,c,d)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,i,s,a,c){return new hM(n,i,s,a,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>PT(this.syncEngine,t,0)),(function(){return AT.D()?new AT:new tM})())}createSyncEngine(e,t){return(function(i,s,a,c,d,h,p){const m=new PM(i,s,a,c,d,h);return p&&(m.ja=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const s=Ft(i);Ge(fc,"RemoteStore shutting down."),s.W_.add(5),await Yh(s),s.z_.shutdown(),s.j_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Lm.provider={build:()=>new Lm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ci("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ze(Ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,s){const a=Ft(i),c={documents:s.map((m=>ph(a.serializer,m)))},d=await a.Co("BatchGetDocuments",a.serializer.databaseId,ar.emptyPath(),c,s.length),h=new Map;d.forEach((m=>{const x=uL(a.serializer,m);h.set(x.key.toString(),x)}));const p=[];return s.forEach((m=>{const x=h.get(m.toString());yt(!!x),p.push(x)})),p})(this.datastore,e);return t.forEach((n=>this.recordVersion(n))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,n)=>{const i=it.fromPath(n);this.mutations.push(new _b(i,this.precondition(i)))})),await(async function(n,i){const s=Ft(n),a={writes:i.map((c=>mh(s.serializer,c)))};await s.So("Commit",s.serializer.databaseId,ar.emptyPath(),a)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ft();t=_t.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ze(Ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(_t.min())?en.exists(!1):en.updateTime(t):en.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new Ze(Ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return en.updateTime(t)}return en.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,t,n,i,s){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=i,this.deferred=s,this.Tu=n.maxAttempts,this.a_=new Fb(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo((async()=>{const e=new qM(this.datastore),t=this.du(e);t&&t.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((i=>{this.Au(i)}))))})).catch((n=>{this.Au(n)}))}))}du(e){try{const t=this.updateFunction(e);return!Uh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Eu(),Promise.resolve())))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!wS(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al="FirestoreClient";class KM{constructor(e,t,n,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=ai.UNAUTHENTICATED,this.clientId=C3.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async a=>{Ge(al,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(n,(a=>(Ge(al,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Bb(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function tv(r,e){r.asyncQueue.verifyOperationInProgress(),Ge(al,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async i=>{n.isEqual(i)||(await ZS(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function jT(r,e){r.asyncQueue.verifyOperationInProgress();const t=await YM(r);Ge(al,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>kT(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,i)=>kT(e.remoteStore,i))),r._onlineComponents=e}async function YM(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ge(al,"Using user provided OfflineComponentProvider");try{await tv(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ie.FAILED_PRECONDITION||i.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;rh("Error using user provided cache. Falling back to memory cache: "+t),await tv(r,new gh)}}else Ge(al,"Using default OfflineComponentProvider"),await tv(r,new HM(void 0));return r._offlineComponents}async function Yb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ge(al,"Using user provided OnlineComponentProvider"),await jT(r,r._uninitializedComponentsProvider._online)):(Ge(al,"Using default OnlineComponentProvider"),await jT(r,new Lm))),r._onlineComponents}function XM(r){return Yb(r).then((e=>e.syncEngine))}function QM(r){return Yb(r).then((e=>e.datastore))}async function Mm(r){const e=await Yb(r),t=e.eventManager;return t.onListen=RM.bind(null,e.syncEngine),t.onUnlisten=FM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=jM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=OM.bind(null,e.syncEngine),t}function JM(r,e,t={}){const n=new Bs;return r.asyncQueue.enqueueAndForget((async()=>(function(s,a,c,d,h){const p=new Kb({next:x=>{p.su(),a.enqueueAndForget((()=>zb(s,m)));const v=x.docs.has(c);!v&&x.fromCache?h.reject(new Ze(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&x.fromCache&&d&&d.source==="server"?h.reject(new Ze(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),m=new Wb(Wh(c.path),p,{includeMetadataChanges:!0,Ta:!0});return Ub(s,m)})(await Mm(r),r.asyncQueue,e,t,n))),n.promise}function ZM(r,e,t={}){const n=new Bs;return r.asyncQueue.enqueueAndForget((async()=>(function(s,a,c,d,h){const p=new Kb({next:x=>{p.su(),a.enqueueAndForget((()=>zb(s,m))),x.fromCache&&d.source==="server"?h.reject(new Ze(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),m=new Wb(c,p,{includeMetadataChanges:!0,Ta:!0});return Ub(s,m)})(await Mm(r),r.asyncQueue,e,t,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y5(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(r,e,t){if(!t)throw new Ze(Ie.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function eV(r,e,t,n){if(e===!0&&n===!0)throw new Ze(Ie.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function FT(r){if(!it.isDocumentKey(r))throw new Ze(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function OT(r){if(it.isDocumentKey(r))throw new Ze(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function $g(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ft()}function Ai(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Ze(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$g(r);throw new Ze(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV="firestore.googleapis.com",LT=!0;class MT{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tV,this.ssl=LT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:LT;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WS)throw new Ze(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y5((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ze(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ze(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ze(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xb{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ze(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ze(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new UF;switch(n.type){case"firstParty":return new WF(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ze(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=DT.get(t);n&&(Ge("ComponentProvider","Removing Datastore"),DT.delete(t),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new co(this.firestore,e,this._query)}}class Vn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new el(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vn(this.firestore,e,this._key)}}class el extends co{constructor(e,t,n){super(e,t,Wh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vn(this.firestore,null,new it(e))}withConverter(e){return new el(this.firestore,e,this._path)}}function It(r,e,...t){if(r=Nr(r),v5("collection","path",e),r instanceof Xb){const n=ar.fromString(e,...t);return OT(n),new el(r,null,n)}{if(!(r instanceof Vn||r instanceof el))throw new Ze(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ar.fromString(e,...t));return OT(n),new el(r.firestore,null,n)}}function vt(r,e,...t){if(r=Nr(r),arguments.length===1&&(e=C3.newId()),v5("doc","path",e),r instanceof Xb){const n=ar.fromString(e,...t);return FT(n),new Vn(r,null,new it(n))}{if(!(r instanceof Vn||r instanceof el))throw new Ze(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ar.fromString(e,...t));return FT(n),new Vn(r.firestore,r instanceof el?r.converter:null,new it(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="AsyncQueue";class $T{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Fb(this,"async_queue_retry"),this.Su=()=>{const n=am();n&&Ge(VT,"Visibility state changed to "+n.visibilityState),this.a_.t_()},this.bu=e;const t=am();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=am();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise((()=>{}));const t=new Bs;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Vu.push(e),this.Cu())))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!gl(e))throw e;Ge(VT,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(e){const t=this.bu.then((()=>(this.pu=!0,e().catch((n=>{this.gu=n,this.pu=!1;const i=(function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c})(n);throw ci("INTERNAL UNHANDLED ERROR: ",i),n})).then((n=>(this.pu=!1,n))))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=$b.createAndSchedule(this,e,t,n,(s=>this.Fu(s)));return this.fu.push(i),i}Du(){this.gu&&ft()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then((()=>{this.fu.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()}))}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function BT(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1})(r,["next","error","complete"])}class ya extends Xb{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new $T,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $T(e),this._firestoreClient=void 0,await e}}}function rV(r,e,t){t||(t=Sm);const n=pl(r,"firestore");if(n.isInitialized(t)){const i=n.getImmediate({identifier:t}),s=n.getOptions(t);if(rl(s,e))return i;throw new Ze(Ie.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ze(Ie.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WS)throw new Ze(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:t})}function Jh(r){if(r._terminated)throw new Ze(Ie.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||nV(r),r._firestoreClient}function nV(r){var e,t,n;const i=r._freezeSettings(),s=(function(c,d,h,p){return new CO(c,d,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,y5(p.experimentalLongPollingOptions),p.useFetchStreams)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,i);r._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),r._firestoreClient=new KM(r._authCredentials,r._appCheckCredentials,r._queue,s,r._componentsProvider&&(function(c){const d=c?._online.build();return{_offline:c?._offline.build(d),_online:d}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pc(ln.fromBase64String(e))}catch(t){throw new Ze(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pc(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ze(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ze(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ze(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=/^__.*__$/;class sV{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new lo(e,this.data,this.fieldMask,t,this.fieldTransforms):new kd(e,this.data,t,this.fieldTransforms)}}class b5{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new lo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function w5(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class Zb{constructor(e,t,n,i,s,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Zb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:n,Qu:!1});return i.$u(e),i}Uu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:n,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Vm(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(w5(this.Lu)&&iV.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class aV{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Mg(e)}ju(e,t,n,i=!1){return new Zb({Lu:e,methodName:t,zu:n,path:zr.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tf(r){const e=r._freezeSettings(),t=Mg(r._databaseId);return new aV(r._databaseId,!!e.ignoreUndefinedProperties,t)}function e2(r,e,t,n,i,s={}){const a=r.ju(s.merge||s.mergeFields?2:0,e,t,i);n2("Data must be an object, but it was:",a,n);const c=T5(n,a);let d,h;if(s.merge)d=new _i(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const x=u1(e,m,t);if(!a.contains(x))throw new Ze(Ie.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);N5(p,x)||p.push(x)}d=new _i(p),h=a.fieldTransforms.filter((m=>d.covers(m.field)))}else d=null,h=a.fieldTransforms;return new sV(new On(c),d,h)}class Bg extends ef{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bg}}class t2 extends ef{_toFieldTransform(e){return new wb(e.path,new ad)}isEqual(e){return e instanceof t2}}class r2 extends ef{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new cd(e.serializer,pS(e.serializer,this.Ju));return new wb(e.path,t)}isEqual(e){return e instanceof r2&&this.Ju===e.Ju}}function _5(r,e,t,n){const i=r.ju(1,e,t);n2("Data must be an object, but it was:",i,n);const s=[],a=On.empty();xl(n,((d,h)=>{const p=i2(e,d,t);h=Nr(h);const m=i.Uu(p);if(h instanceof Bg)s.push(p);else{const x=rf(h,m);x!=null&&(s.push(p),a.set(p,x))}}));const c=new _i(s);return new b5(a,c,i.fieldTransforms)}function E5(r,e,t,n,i,s){const a=r.ju(1,e,t),c=[u1(e,n,t)],d=[i];if(s.length%2!=0)throw new Ze(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)c.push(u1(e,s[x])),d.push(s[x+1]);const h=[],p=On.empty();for(let x=c.length-1;x>=0;--x)if(!N5(h,c[x])){const v=c[x];let _=d[x];_=Nr(_);const w=a.Uu(v);if(_ instanceof Bg)h.push(v);else{const E=rf(_,w);E!=null&&(h.push(v),p.set(v,E))}}const m=new _i(h);return new b5(p,m,a.fieldTransforms)}function oV(r,e,t,n=!1){return rf(t,r.ju(n?4:3,e))}function rf(r,e){if(A5(r=Nr(r)))return n2("Unsupported field value:",e,r),T5(r,e);if(r instanceof ef)return(function(n,i){if(!w5(i.Lu))throw i.Wu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return(function(n,i){const s=[];let a=0;for(const c of n){let d=rf(c,i.Ku(a));d==null&&(d={nullValue:"NULL_VALUE"}),s.push(d),a++}return{arrayValue:{values:s}}})(r,e)}return(function(n,i){if((n=Nr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return pS(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=or.fromDate(n);return{timestampValue:ud(i.serializer,s)}}if(n instanceof or){const s=new or(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ud(i.serializer,s)}}if(n instanceof Qb)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof pc)return{bytesValue:AS(i.serializer,n._byteString)};if(n instanceof Vn){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:kb(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Jb)return(function(a,c){return{mapValue:{fields:{[xb]:{stringValue:yb},[rd]:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw c.Wu("VectorValues must only contain numeric values.");return bb(c.serializer,h)}))}}}}}})(n,i);throw i.Wu(`Unsupported field value: ${$g(n)}`)})(r,e)}function T5(r,e){const t={};return H3(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xl(r,((n,i)=>{const s=rf(i,e.qu(n));s!=null&&(t[n]=s)})),{mapValue:{fields:t}}}function A5(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof or||r instanceof Qb||r instanceof pc||r instanceof Vn||r instanceof ef||r instanceof Jb)}function n2(r,e,t){if(!A5(t)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(t)){const n=$g(t);throw n==="an object"?e.Wu(r+" a custom object"):e.Wu(r+" "+n)}}function u1(r,e,t){if((e=Nr(e))instanceof Zh)return e._internalPath;if(typeof e=="string")return i2(r,e);throw Vm("Field path arguments must be of type string or ",r,!1,void 0,t)}const lV=new RegExp("[~\\*/\\[\\]]");function i2(r,e,t){if(e.search(lV)>=0)throw Vm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Zh(...e.split("."))._internalPath}catch{throw Vm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Vm(r,e,t,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(s||a)&&(d+=" (found",s&&(d+=` in field ${n}`),a&&(d+=` in document ${i}`),d+=")"),new Ze(Ie.INVALID_ARGUMENT,c+r+d)}function N5(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ug("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class cV extends $m{data(){return super.data()}}function Ug(r,e){return typeof e=="string"?i2(r,e):e instanceof Zh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Ze(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class s2{}class a2 extends s2{}function ur(r,e,...t){let n=[];e instanceof s2&&n.push(e),n=n.concat(t),(function(s){const a=s.filter((d=>d instanceof o2)).length,c=s.filter((d=>d instanceof zg)).length;if(a>1||a>0&&c>0)throw new Ze(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)r=i._apply(r);return r}class zg extends a2{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new zg(e,t,n)}_apply(e){const t=this._parse(e);return S5(e._query,t),new co(e.firestore,e.converter,Jv(e._query,t))}_parse(e){const t=tf(e.firestore);return(function(s,a,c,d,h,p,m){let x;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Ze(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){zT(m,p);const _=[];for(const w of m)_.push(UT(d,s,w));x={arrayValue:{values:_}}}else x=UT(d,s,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||zT(m,p),x=oV(c,a,m,p==="in"||p==="not-in");return Xt.create(h,p,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function gr(r,e,t){const n=e,i=Ug("where",r);return zg._create(i,n,t)}class o2 extends s2{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new o2(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:xr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let a=i;const c=s.getFlattenedFilters();for(const d of c)S5(a,d),a=Jv(a,d)})(e._query,t),new co(e.firestore,e.converter,Jv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class l2 extends a2{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new l2(e,t)}_apply(e){const t=(function(i,s,a){if(i.startAt!==null)throw new Ze(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ze(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fh(s,a)})(e._query,this._field,this._direction);return new co(e.firestore,e.converter,(function(i,s){const a=i.explicitOrderBy.concat([s]);return new Nd(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function c2(r,e="asc"){const t=e,n=Ug("orderBy",r);return l2._create(n,t)}class u2 extends a2{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new u2(e,t,n)}_apply(e){return new co(e.firestore,e.converter,Pm(e._query,this._limit,this._limitType))}}function uV(r){return u2._create("limit",r,"F")}function UT(r,e,t){if(typeof(t=Nr(t))=="string"){if(t==="")throw new Ze(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oS(e)&&t.indexOf("/")!==-1)throw new Ze(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(ar.fromString(t));if(!it.isDocumentKey(n))throw new Ze(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return dh(r,new it(n))}if(t instanceof Vn)return dh(r,t._key);throw new Ze(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$g(t)}.`)}function zT(r,e){if(!Array.isArray(r)||r.length===0)throw new Ze(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function S5(r,e){const t=(function(i,s){for(const a of i)for(const c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null})(r.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ze(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ze(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class C5{convertValue(e,t="none"){switch(nl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(to(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ft()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return xl(e,((i,s)=>{n[i]=this.convertValue(s,t)})),n}convertVectorValue(e){var t,n,i;const s=(i=(n=(t=e.fields)===null||t===void 0?void 0:t[rd].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map((a=>Fr(a.doubleValue)));return new Jb(s)}convertGeoPoint(e){return new Qb(Fr(e.latitude),Fr(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Cg(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ch(e));default:return null}}convertTimestamp(e){const t=eo(e);return new or(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ar.fromString(e);yt(FS(n));const i=new lc(n.get(1),n.get(3)),s=new it(n.popFirst(5));return i.isEqual(t)||ci(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class dV extends C5{constructor(e){super(),this.firestore=e}convertBytes(e){return new pc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class h2 extends $m{constructor(e,t,n,i,s,a){super(e,t,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new om(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Ug("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class om extends h2{data(e={}){return super.data(e)}}class I5{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ou(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new om(this._firestore,this._userDataWriter,n.key,n,new Ou(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ze(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((c=>{const d=new om(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ou(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>s||c.type!==3)).map((c=>{const d=new om(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ou(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:hV(c.type),doc:d,oldIndex:h,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hV(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(r){r=Ai(r,Vn);const e=Ai(r.firestore,ya);return JM(Jh(e),r._key).then((t=>P5(e,r,t)))}class Hg extends C5{constructor(e){super(),this.firestore=e}convertBytes(e){return new pc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,t)}}function pn(r){r=Ai(r,co);const e=Ai(r.firestore,ya),t=Jh(e),n=new Hg(e);return k5(r._query),ZM(t,r._query).then((i=>new I5(e,n,r,i)))}function va(r,e,t){r=Ai(r,Vn);const n=Ai(r.firestore,ya),i=d2(r.converter,e,t);return Wg(n,[e2(tf(n),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,en.none())])}function Pr(r,e,t,...n){r=Ai(r,Vn);const i=Ai(r.firestore,ya),s=tf(i);let a;return a=typeof(e=Nr(e))=="string"||e instanceof Zh?E5(s,"updateDoc",r._key,e,t,n):_5(s,"updateDoc",r._key,e),Wg(i,[a.toMutation(r._key,en.exists(!0))])}function za(r){return Wg(Ai(r.firestore,ya),[new Gh(r._key,en.none())])}function tl(r,e){const t=Ai(r.firestore,ya),n=vt(r),i=d2(r.converter,e);return Wg(t,[e2(tf(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,en.exists(!1))]).then((()=>n))}function dr(r,...e){var t,n,i;r=Nr(r);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||BT(e[a])||(s=e[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(BT(e[a])){const m=e[a];e[a]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[a+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[a+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let d,h,p;if(r instanceof Vn)h=Ai(r.firestore,ya),p=Wh(r._key.path),d={next:m=>{e[a]&&e[a](P5(h,r,m))},error:e[a+1],complete:e[a+2]};else{const m=Ai(r,co);h=Ai(m.firestore,ya),p=m._query;const x=new Hg(h);d={next:v=>{e[a]&&e[a](new I5(h,x,m,v))},error:e[a+1],complete:e[a+2]},k5(r._query)}return(function(x,v,_,w){const E=new Kb(w),j=new Wb(v,E,_);return x.asyncQueue.enqueueAndForget((async()=>Ub(await Mm(x),j))),()=>{E.su(),x.asyncQueue.enqueueAndForget((async()=>zb(await Mm(x),j)))}})(Jh(h),p,c,d)}function Wg(r,e){return(function(n,i){const s=new Bs;return n.asyncQueue.enqueueAndForget((async()=>LM(await XM(n),i,s))),s.promise})(Jh(r),e)}function P5(r,e,t){const n=t.docs.get(e._key),i=new Hg(r);return new h2(r,i,e._key,n,new Ou(t.hasPendingWrites,t.fromCache),e.converter)}class fV{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=R5(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function pV(r){return new fV(r)}class mV{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Lm.provider,this._offlineComponentProvider={build:t=>new WM(t,e?.cacheSizeBytes,this.forceOwnership)}}}function R5(r){return new mV(void 0)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV={maxAttempts:5};function C0(r,e){if((r=Nr(r)).firestore!==e)throw new Ze(Ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=tf(e)}get(e){const t=C0(e,this._firestore),n=new dV(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return ft();const s=i[0];if(s.isFoundDocument())return new $m(this._firestore,n,s.key,s,t.converter);if(s.isNoDocument())return new $m(this._firestore,n,t._key,null,t.converter);throw ft()}))}set(e,t,n){const i=C0(e,this._firestore),s=d2(i.converter,t,n),a=e2(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,n);return this._transaction.set(i._key,a),this}update(e,t,n,...i){const s=C0(e,this._firestore);let a;return a=typeof(t=Nr(t))=="string"||t instanceof Zh?E5(this._dataReader,"Transaction.update",s._key,t,n,i):_5(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,a),this}delete(e){const t=C0(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV extends xV{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=C0(e,this._firestore),n=new Hg(this._firestore);return super.get(e).then((i=>new h2(this._firestore,n,t._key,i._document,new Ou(!1,!1),t.converter)))}}function HT(r,e,t){r=Ai(r,ya);const n=Object.assign(Object.assign({},gV),t);return(function(s){if(s.maxAttempts<1)throw new Ze(Ie.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(s,a,c){const d=new Bs;return s.asyncQueue.enqueueAndForget((async()=>{const h=await QM(s);new GM(s.asyncQueue,h,c,a,d).Iu()})),d.promise})(Jh(r),(i=>e(new yV(r,i))),n)}function Er(){return new t2("serverTimestamp")}function vV(r){return new r2("increment",r)}(function(e,t=!0){(function(i){Ad=i})(Ac),Hs(new xs("firestore",((n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),c=new ya(new zF(n.getProvider("auth-internal")),new qF(a,n.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ze(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lc(h.options.projectId,p)})(a,i),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c}),"PUBLIC").setMultipleInstances(!0)),Ti(E4,T4,e),Ti(E4,T4,"esm2017")})();var bV="firebase",wV="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti(bV,wV,"app");const j5="@firebase/installations",f2="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=1e4,F5=`w:${f2}`,O5="FIS_v2",_V="https://firebaseinstallations.googleapis.com/v1",EV=3600*1e3,TV="installations",AV="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},mc=new Tc(TV,AV,NV);function L5(r){return r instanceof ys&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5({projectId:r}){return`${_V}/projects/${r}/installations`}function V5(r){return{token:r.token,requestStatus:2,expiresIn:SV(r.expiresIn),creationTime:Date.now()}}async function $5(r,e){const n=(await e.json()).error;return mc.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function B5({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function kV(r,{refreshToken:e}){const t=B5(r);return t.append("Authorization",CV(e)),t}async function U5(r){const e=await r();return e.status>=500&&e.status<600?r():e}function SV(r){return Number(r.replace("s","000"))}function CV(r){return`${O5} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IV({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const n=M5(r),i=B5(r),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const a={fid:t,authVersion:O5,appId:r.appId,sdkVersion:F5},c={method:"POST",headers:i,body:JSON.stringify(a)},d=await U5(()=>fetch(n,c));if(d.ok){const h=await d.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:V5(h.authToken)}}else throw await $5("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=/^[cdef][\w-]{21}$/,d1="";function jV(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=DV(r);return RV.test(t)?t:d1}catch{return d1}}function DV(r){return PV(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=new Map;function W5(r,e){const t=qg(r);q5(t,e),FV(t,e)}function q5(r,e){const t=H5.get(r);if(t)for(const n of t)n(e)}function FV(r,e){const t=OV();t&&t.postMessage({key:r,fid:e}),LV()}let Xl=null;function OV(){return!Xl&&"BroadcastChannel"in self&&(Xl=new BroadcastChannel("[Firebase] FID Change"),Xl.onmessage=r=>{q5(r.data.key,r.data.fid)}),Xl}function LV(){H5.size===0&&Xl&&(Xl.close(),Xl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV="firebase-installations-database",VV=1,gc="firebase-installations-store";let rv=null;function p2(){return rv||(rv=Lk(MV,VV,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(gc)}}})),rv}async function Bm(r,e){const t=qg(r),i=(await p2()).transaction(gc,"readwrite"),s=i.objectStore(gc),a=await s.get(t);return await s.put(e,t),await i.done,(!a||a.fid!==e.fid)&&W5(r,e.fid),e}async function G5(r){const e=qg(r),n=(await p2()).transaction(gc,"readwrite");await n.objectStore(gc).delete(e),await n.done}async function Gg(r,e){const t=qg(r),i=(await p2()).transaction(gc,"readwrite"),s=i.objectStore(gc),a=await s.get(t),c=e(a);return c===void 0?await s.delete(t):await s.put(c,t),await i.done,c&&(!a||a.fid!==c.fid)&&W5(r,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m2(r){let e;const t=await Gg(r.appConfig,n=>{const i=$V(n),s=BV(r,i);return e=s.registrationPromise,s.installationEntry});return t.fid===d1?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function $V(r){const e=r||{fid:jV(),registrationStatus:0};return K5(e)}function BV(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(mc.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=UV(r,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:zV(r)}:{installationEntry:e}}async function UV(r,e){try{const t=await IV(r,e);return Bm(r.appConfig,t)}catch(t){throw L5(t)&&t.customData.serverCode===409?await G5(r.appConfig):await Bm(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function zV(r){let e=await WT(r.appConfig);for(;e.registrationStatus===1;)await z5(100),e=await WT(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:n}=await m2(r);return n||t}return e}function WT(r){return Gg(r,e=>{if(!e)throw mc.create("installation-not-found");return K5(e)})}function K5(r){return HV(r)?{fid:r.fid,registrationStatus:0}:r}function HV(r){return r.registrationStatus===1&&r.registrationTime+D5<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WV({appConfig:r,heartbeatServiceProvider:e},t){const n=qV(r,t),i=kV(r,t),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const a={installation:{sdkVersion:F5,appId:r.appId}},c={method:"POST",headers:i,body:JSON.stringify(a)},d=await U5(()=>fetch(n,c));if(d.ok){const h=await d.json();return V5(h)}else throw await $5("Generate Auth Token",d)}function qV(r,{fid:e}){return`${M5(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g2(r,e=!1){let t;const n=await Gg(r.appConfig,s=>{if(!Y5(s))throw mc.create("not-registered");const a=s.authToken;if(!e&&YV(a))return s;if(a.requestStatus===1)return t=GV(r,e),s;{if(!navigator.onLine)throw mc.create("app-offline");const c=QV(s);return t=KV(r,c),c}});return t?await t:n.authToken}async function GV(r,e){let t=await qT(r.appConfig);for(;t.authToken.requestStatus===1;)await z5(100),t=await qT(r.appConfig);const n=t.authToken;return n.requestStatus===0?g2(r,e):n}function qT(r){return Gg(r,e=>{if(!Y5(e))throw mc.create("not-registered");const t=e.authToken;return JV(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function KV(r,e){try{const t=await WV(r,e),n=Object.assign(Object.assign({},e),{authToken:t});return await Bm(r.appConfig,n),t}catch(t){if(L5(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await G5(r.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Bm(r.appConfig,n)}throw t}}function Y5(r){return r!==void 0&&r.registrationStatus===2}function YV(r){return r.requestStatus===2&&!XV(r)}function XV(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+EV}function QV(r){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:e})}function JV(r){return r.requestStatus===1&&r.requestTime+D5<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZV(r){const e=r,{installationEntry:t,registrationPromise:n}=await m2(e);return n?n.catch(console.error):g2(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e$(r,e=!1){const t=r;return await t$(t),(await g2(t,e)).token}async function t$(r){const{registrationPromise:e}=await m2(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r$(r){if(!r||!r.options)throw nv("App Configuration");if(!r.name)throw nv("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw nv(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function nv(r){return mc.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5="installations",n$="installations-internal",i$=r=>{const e=r.getProvider("app").getImmediate(),t=r$(e),n=pl(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},s$=r=>{const e=r.getProvider("app").getImmediate(),t=pl(e,X5).getImmediate();return{getId:()=>ZV(t),getToken:i=>e$(t,i)}};function a$(){Hs(new xs(X5,i$,"PUBLIC")),Hs(new xs(n$,s$,"PRIVATE"))}a$();Ti(j5,f2);Ti(j5,f2,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="analytics",o$="firebase_id",l$="origin",c$=60*1e3,u$="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",x2="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new wg("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d$={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Yi=new Tc("analytics","Analytics",d$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h$(r){if(!r.startsWith(x2)){const e=Yi.create("invalid-gtag-resource",{gtagURL:r});return Ni.warn(e.message),""}return r}function Q5(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function f$(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function p$(r,e){const t=f$("firebase-js-sdk-policy",{createScriptURL:h$}),n=document.createElement("script"),i=`${x2}?l=${r}&id=${e}`;n.src=t?t?.createScriptURL(i):i,n.async=!0,document.head.appendChild(n)}function m$(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function g$(r,e,t,n,i,s){const a=n[i];try{if(a)await e[a];else{const d=(await Q5(t)).find(h=>h.measurementId===i);d&&await e[d.appId]}}catch(c){Ni.error(c)}r("config",i,s)}async function x$(r,e,t,n,i){try{let s=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const c=await Q5(t);for(const d of a){const h=c.find(m=>m.measurementId===d),p=h&&e[h.appId];if(p)s.push(p);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),r("event",n,i||{})}catch(s){Ni.error(s)}}function y$(r,e,t,n){async function i(s,...a){try{if(s==="event"){const[c,d]=a;await x$(r,e,t,c,d)}else if(s==="config"){const[c,d]=a;await g$(r,e,t,n,c,d)}else if(s==="consent"){const[c,d]=a;r("consent",c,d)}else if(s==="get"){const[c,d,h]=a;r("get",c,d,h)}else if(s==="set"){const[c]=a;r("set",c)}else r(s,...a)}catch(c){Ni.error(c)}}return i}function v$(r,e,t,n,i){let s=function(...a){window[n].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=y$(s,r,e,t),{gtagCore:s,wrappedGtag:window[i]}}function b$(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(x2)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w$=30,_$=1e3;class E${constructor(e={},t=_$){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const J5=new E$;function T$(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function A$(r){var e;const{appId:t,apiKey:n}=r,i={method:"GET",headers:T$(n)},s=u$.replace("{app-id}",t),a=await fetch(s,i);if(a.status!==200&&a.status!==304){let c="";try{const d=await a.json();!((e=d.error)===null||e===void 0)&&e.message&&(c=d.error.message)}catch{}throw Yi.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function N$(r,e=J5,t){const{appId:n,apiKey:i,measurementId:s}=r.options;if(!n)throw Yi.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:n};throw Yi.create("no-api-key")}const a=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new C$;return setTimeout(async()=>{c.abort()},c$),Z5({appId:n,apiKey:i,measurementId:s},a,c,e)}async function Z5(r,{throttleEndTimeMillis:e,backoffCount:t},n,i=J5){var s;const{appId:a,measurementId:c}=r;try{await k$(n,e)}catch(d){if(c)return Ni.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:a,measurementId:c};throw d}try{const d=await A$(r);return i.deleteThrottleMetadata(a),d}catch(d){const h=d;if(!S$(h)){if(i.deleteThrottleMetadata(a),c)return Ni.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:a,measurementId:c};throw d}const p=Number((s=h?.customData)===null||s===void 0?void 0:s.httpStatus)===503?KE(t,i.intervalMillis,w$):KE(t,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return i.setThrottleMetadata(a,m),Ni.debug(`Calling attemptFetch again in ${p} millis`),Z5(r,m,n,i)}}function k$(r,e){return new Promise((t,n)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);r.addEventListener(()=>{clearTimeout(s),n(Yi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function S$(r){if(!(r instanceof ys)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class C${constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function I$(r,e,t,n,i){if(i&&i.global){r("event",t,n);return}else{const s=await e,a=Object.assign(Object.assign({},n),{send_to:s});r("event",t,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P$(){if(Y1())try{await Dk()}catch(r){return Ni.warn(Yi.create("indexeddb-unavailable",{errorInfo:r?.toString()}).message),!1}else return Ni.warn(Yi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function R$(r,e,t,n,i,s,a){var c;const d=N$(r);d.then(v=>{t[v.measurementId]=v.appId,r.options.measurementId&&v.measurementId!==r.options.measurementId&&Ni.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Ni.error(v)),e.push(d);const h=P$().then(v=>{if(v)return n.getId()}),[p,m]=await Promise.all([d,h]);b$(s)||p$(s,p.measurementId),i("js",new Date);const x=(c=a?.config)!==null&&c!==void 0?c:{};return x[l$]="firebase",x.update=!0,m!=null&&(x[o$]=m),i("config",p.measurementId,x),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(e){this.app=e}_delete(){return delete $0[this.app.options.appId],Promise.resolve()}}let $0={},GT=[];const KT={};let iv="dataLayer",D$="gtag",YT,eC,XT=!1;function F$(){const r=[];if(Rk()&&r.push("This is a browser extension environment."),n8()||r.push("Cookies are not available."),r.length>0){const e=r.map((n,i)=>`(${i+1}) ${n}`).join(" "),t=Yi.create("invalid-analytics-context",{errorInfo:e});Ni.warn(t.message)}}function O$(r,e,t){F$();const n=r.options.appId;if(!n)throw Yi.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)Ni.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Yi.create("no-api-key");if($0[n]!=null)throw Yi.create("already-exists",{id:n});if(!XT){m$(iv);const{wrappedGtag:s,gtagCore:a}=v$($0,GT,KT,iv,D$);eC=s,YT=a,XT=!0}return $0[n]=R$(r,GT,KT,e,YT,iv,t),new j$(r)}function L$(r=Q1()){r=Nr(r);const e=pl(r,Um);return e.isInitialized()?e.getImmediate():M$(r)}function M$(r,e={}){const t=pl(r,Um);if(t.isInitialized()){const i=t.getImmediate();if(rl(e,t.getOptions()))return i;throw Yi.create("already-initialized")}return t.initialize({options:e})}function V$(r,e,t,n){r=Nr(r),I$(eC,$0[r.app.options.appId],e,t,n).catch(i=>Ni.error(i))}const QT="@firebase/analytics",JT="0.10.12";function $$(){Hs(new xs(Um,(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return O$(n,i,t)},"PUBLIC")),Hs(new xs("analytics-internal",r,"PRIVATE")),Ti(QT,JT),Ti(QT,JT,"esm2017");function r(e){try{const t=e.getProvider(Um).getImmediate();return{logEvent:(n,i,s)=>V$(t,n,i,s)}}catch(t){throw Yi.create("interop-component-reg-failed",{reason:t})}}}$$();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="firebasestorage.googleapis.com",B$="storageBucket",U$=120*1e3,z$=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends ys{constructor(e,t,n=0){super(sv(e),`Firebase Storage: ${t} (${sv(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ta.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ba;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ba||(ba={}));function sv(r){return"storage/"+r}function H$(){const r="An unknown error occurred, please check the error payload for server response.";return new Ta(ba.UNKNOWN,r)}function W$(){return new Ta(ba.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function q$(){return new Ta(ba.CANCELED,"User canceled the upload/download.")}function G$(r){return new Ta(ba.INVALID_URL,"Invalid URL '"+r+"'.")}function K$(r){return new Ta(ba.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function ZT(r){return new Ta(ba.INVALID_ARGUMENT,r)}function rC(){return new Ta(ba.APP_DELETED,"The Firebase app was deleted.")}function Y$(r){return new Ta(ba.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Ms.makeFromUrl(e,t)}catch{return new Ms(e,"")}if(n.path==="")return n;throw K$(e)}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";function s(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+i+a,"i"),d={bucket:1,path:3};function h(L){L.path_=decodeURIComponent(L.path)}const p="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${p}/b/${i}/o${x}`,"i"),_={bucket:1,path:3},w=t===tC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,E="([^?#]*)",j=new RegExp(`^https?://${w}/${i}/${E}`,"i"),V=[{regex:c,indices:d,postModify:s},{regex:v,indices:_,postModify:h},{regex:j,indices:{bucket:1,path:2},postModify:h}];for(let L=0;L<V.length;L++){const K=V[L],H=K.regex.exec(e);if(H){const S=H[K.indices.bucket];let N=H[K.indices.path];N||(N=""),n=new Ms(S,N),K.postModify(n);break}}if(n==null)throw G$(e);return n}}class X${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(r,e,t){let n=1,i=null,s=null,a=!1,c=0;function d(){return c===2}let h=!1;function p(...E){h||(h=!0,e.apply(null,E))}function m(E){i=setTimeout(()=>{i=null,r(v,d())},E)}function x(){s&&clearTimeout(s)}function v(E,...j){if(h){x();return}if(E){x(),p.call(null,E,...j);return}if(d()||a){x(),p.call(null,E,...j);return}n<64&&(n*=2);let V;c===1?(c=2,V=0):V=(n+Math.random())*1e3,m(V)}let _=!1;function w(E){_||(_=!0,x(),!h&&(i!==null?(E||(c=2),clearTimeout(i),m(0)):E||(c=1)))}return m(0),s=setTimeout(()=>{a=!0,w(!0)},t),w}function J$(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$(r){return r!==void 0}function eA(r,e,t,n){if(n<e)throw ZT(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw ZT(`Invalid value for '${r}'. Expected ${t} or less.`)}function eB(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const i=e(n)+"="+e(r[n]);t=t+i+"&"}return t=t.slice(0,-1),t}var zm;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(zm||(zm={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tB(r,e){const t=r>=500&&r<600,i=[408,429].indexOf(r)!==-1,s=e.indexOf(r)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,t,n,i,s,a,c,d,h,p,m,x=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,_)=>{this.resolve_=v,this.reject_=_,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Rp(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const c=s.getErrorCode()===zm.NO_ERROR,d=s.getStatus();if(!c||tB(d,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===zm.ABORT;n(!1,new Rp(!1,null,p));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new Rp(h,s))})},t=(n,i)=>{const s=this.resolve_,a=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());Z$(d)?s(d):s()}catch(d){a(d)}else if(c!==null){const d=H$();d.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,d)):a(d)}else if(i.canceled){const d=this.appDelete_?rC():q$();a(d)}else{const d=W$();a(d)}};this.canceled_?t(!1,new Rp(!1,null,!0)):this.backoffId_=Q$(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&J$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Rp{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function nB(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function iB(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function sB(r,e){e&&(r["X-Firebase-GMPID"]=e)}function aB(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function oB(r,e,t,n,i,s,a=!0){const c=eB(r.urlParams),d=r.url+c,h=Object.assign({},r.headers);return sB(h,e),nB(h,t),iB(h,s),aB(h,n),new rB(d,r.method,h,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function cB(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t){this._service=e,t instanceof Ms?this._location=t:this._location=Ms.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Hm(e,t)}get root(){const e=new Ms(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cB(this._location.path)}get storage(){return this._service}get parent(){const e=lB(this._location.path);if(e===null)return null;const t=new Ms(this._location.bucket,e);return new Hm(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Y$(e)}}function tA(r,e){const t=e?.[B$];return t==null?null:Ms.makeFromBucketSpec(t,r)}function uB(r,e,t,n={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:i}=n;i&&(r._overrideAuthToken=typeof i=="string"?i:QD(i,r.app.options.projectId))}class dB{constructor(e,t,n,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=tC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=U$,this._maxUploadRetryTime=z$,this._requests=new Set,i!=null?this._bucket=Ms.makeFromBucketSpec(i,this._host):this._bucket=tA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ms.makeFromBucketSpec(this._url,e):this._bucket=tA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){eA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){eA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Wi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Hm(this,e)}_makeRequest(e,t,n,i,s=!0){if(this._deleted)return new X$(rC());{const a=oB(e,this._appId,n,i,t,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const rA="@firebase/storage",nA="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="storage";function hB(r=Q1(),e){r=Nr(r);const n=pl(r,nC).getImmediate({identifier:e}),i=YD("storage");return i&&fB(n,...i),n}function fB(r,e,t,n={}){uB(r,e,t,n)}function pB(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new dB(t,n,i,e,Ac)}function mB(){Hs(new xs(nC,pB,"PUBLIC").setMultipleInstances(!0)),Ti(rA,nA,""),Ti(rA,nA,"esm2017")}mB();const gB={apiKey:"AIzaSyDYacL_WIzZUSP-Tjl3794P_jHocMDqN9g",authDomain:"blackkstreaming-55f0e.firebaseapp.com",projectId:"blackkstreaming-55f0e",storageBucket:"blackkstreaming-55f0e.firebasestorage.app",messagingSenderId:"998157647233",appId:"1:998157647233:web:3e5b8128a0275ae4553c80",measurementId:"G-GFM50WNMSP"},nf=Mk(gB);L$(nf);hB(nf);const Xr=lb(nf),Fe=rV(nf,{localCache:pV({tabManager:R5()})});S7(Xr,f3);console.time("Firebase Init Complete");console.timeEnd("Firebase Init Complete");const iC=k.createContext(),xB=({children:r})=>{const e=lb(nf),[t,n]=k.useState(null),[i,s]=k.useState(null),[a,c]=k.useState(!0);return k.useEffect(()=>{const d=Nc(e,async h=>{if(h){n(h);try{const p=await ol(vt(Fe,"users",h.uid));p.exists()?s(p.data().role):s("user")}catch(p){console.error("Error fetching role:",p),s("user")}}else n(null),s(null);c(!1)});return()=>d()},[]),o.jsx(iC.Provider,{value:{user:t,role:i,loading:a},children:!a&&r})},sf=()=>{const r=k.useContext(iC);if(r===void 0)throw new Error("useAuth debe usarse dentro de un AuthProvider");return r},yB="modulepreload",vB=function(r){return"/"+r},iA={},lr=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let d=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");i=d(t.map(h=>{if(h=vB(h),h in iA)return;iA[h]=!0;const p=h.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":yB,p||(x.as="script"),x.crossOrigin="",x.href=h,c&&x.setAttribute("nonce",c),document.head.appendChild(x),p)return new Promise((v,_)=>{x.addEventListener("load",v),x.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},y2=k.createContext({});function v2(r){const e=k.useRef(null);return e.current===null&&(e.current=r()),e.current}const b2=typeof window<"u",sC=b2?k.useLayoutEffect:k.useEffect,Kg=k.createContext(null);function w2(r,e){r.indexOf(e)===-1&&r.push(e)}function _2(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}const ro=(r,e,t)=>t>e?e:t<r?r:t;let E2=()=>{};const no={},aC=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function oC(r){return typeof r=="object"&&r!==null}const lC=r=>/^0[^.\s]+$/u.test(r);function T2(r){let e;return()=>(e===void 0&&(e=r()),e)}const ms=r=>r,bB=(r,e)=>t=>e(r(t)),af=(...r)=>r.reduce(bB),xh=(r,e,t)=>{const n=e-r;return n===0?1:(t-r)/n};class A2{constructor(){this.subscriptions=[]}add(e){return w2(this.subscriptions,e),()=>_2(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,n);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ha=r=>r*1e3,fa=r=>r/1e3;function cC(r,e){return e?r*(1e3/e):0}const uC=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,wB=1e-7,_B=12;function EB(r,e,t,n,i){let s,a,c=0;do a=e+(t-e)/2,s=uC(a,n,i)-r,s>0?t=a:e=a;while(Math.abs(s)>wB&&++c<_B);return a}function of(r,e,t,n){if(r===e&&t===n)return ms;const i=s=>EB(s,0,1,r,t);return s=>s===0||s===1?s:uC(i(s),e,n)}const dC=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,hC=r=>e=>1-r(1-e),fC=of(.33,1.53,.69,.99),N2=hC(fC),pC=dC(N2),mC=r=>(r*=2)<1?.5*N2(r):.5*(2-Math.pow(2,-10*(r-1))),k2=r=>1-Math.sin(Math.acos(r)),gC=hC(k2),xC=dC(k2),TB=of(.42,0,1,1),AB=of(0,0,.58,1),yC=of(.42,0,.58,1),NB=r=>Array.isArray(r)&&typeof r[0]!="number",vC=r=>Array.isArray(r)&&typeof r[0]=="number",kB={linear:ms,easeIn:TB,easeInOut:yC,easeOut:AB,circIn:k2,circInOut:xC,circOut:gC,backIn:N2,backInOut:pC,backOut:fC,anticipate:mC},SB=r=>typeof r=="string",sA=r=>{if(vC(r)){E2(r.length===4);const[e,t,n,i]=r;return of(e,t,n,i)}else if(SB(r))return kB[r];return r},jp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],aA={value:null};function CB(r,e){let t=new Set,n=new Set,i=!1,s=!1;const a=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},d=0;function h(m){a.has(m)&&(p.schedule(m),r()),d++,m(c)}const p={schedule:(m,x=!1,v=!1)=>{const w=v&&i?t:n;return x&&a.add(m),w.has(m)||w.add(m),m},cancel:m=>{n.delete(m),a.delete(m)},process:m=>{if(c=m,i){s=!0;return}i=!0,[t,n]=[n,t],t.forEach(h),e&&aA.value&&aA.value.frameloop[e].push(d),d=0,t.clear(),i=!1,s&&(s=!1,p.process(m))}};return p}const IB=40;function bC(r,e){let t=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=jp.reduce((V,L)=>(V[L]=CB(s,e?L:void 0),V),{}),{setup:c,read:d,resolveKeyframes:h,preUpdate:p,update:m,preRender:x,render:v,postRender:_}=a,w=()=>{const V=no.useManualTiming?i.timestamp:performance.now();t=!1,no.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(V-i.timestamp,IB),1)),i.timestamp=V,i.isProcessing=!0,c.process(i),d.process(i),h.process(i),p.process(i),m.process(i),x.process(i),v.process(i),_.process(i),i.isProcessing=!1,t&&e&&(n=!1,r(w))},E=()=>{t=!0,n=!0,i.isProcessing||r(w)};return{schedule:jp.reduce((V,L)=>{const K=a[L];return V[L]=(H,S=!1,N=!1)=>(t||E(),K.schedule(H,S,N)),V},{}),cancel:V=>{for(let L=0;L<jp.length;L++)a[jp[L]].cancel(V)},state:i,steps:a}}const{schedule:Wr,cancel:ll,state:jn,steps:av}=bC(typeof requestAnimationFrame<"u"?requestAnimationFrame:ms,!0);let lm;function PB(){lm=void 0}const Ei={now:()=>(lm===void 0&&Ei.set(jn.isProcessing||no.useManualTiming?jn.timestamp:performance.now()),lm),set:r=>{lm=r,queueMicrotask(PB)}},wC=r=>e=>typeof e=="string"&&e.startsWith(r),S2=wC("--"),RB=wC("var(--"),C2=r=>RB(r)?jB.test(r.split("/*")[0].trim()):!1,jB=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Cd={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},yh={...Cd,transform:r=>ro(0,1,r)},Dp={...Cd,default:1},B0=r=>Math.round(r*1e5)/1e5,I2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function DB(r){return r==null}const FB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,P2=(r,e)=>t=>!!(typeof t=="string"&&FB.test(t)&&t.startsWith(r)||e&&!DB(t)&&Object.prototype.hasOwnProperty.call(t,e)),_C=(r,e,t)=>n=>{if(typeof n!="string")return n;const[i,s,a,c]=n.match(I2);return{[r]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:c!==void 0?parseFloat(c):1}},OB=r=>ro(0,255,r),ov={...Cd,transform:r=>Math.round(OB(r))},Ql={test:P2("rgb","red"),parse:_C("red","green","blue"),transform:({red:r,green:e,blue:t,alpha:n=1})=>"rgba("+ov.transform(r)+", "+ov.transform(e)+", "+ov.transform(t)+", "+B0(yh.transform(n))+")"};function LB(r){let e="",t="",n="",i="";return r.length>5?(e=r.substring(1,3),t=r.substring(3,5),n=r.substring(5,7),i=r.substring(7,9)):(e=r.substring(1,2),t=r.substring(2,3),n=r.substring(3,4),i=r.substring(4,5),e+=e,t+=t,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const h1={test:P2("#"),parse:LB,transform:Ql.transform},lf=r=>({test:e=>typeof e=="string"&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),Bo=lf("deg"),pa=lf("%"),Rt=lf("px"),MB=lf("vh"),VB=lf("vw"),oA={...pa,parse:r=>pa.parse(r)/100,transform:r=>pa.transform(r*100)},Lu={test:P2("hsl","hue"),parse:_C("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(r)+", "+pa.transform(B0(e))+", "+pa.transform(B0(t))+", "+B0(yh.transform(n))+")"},Yn={test:r=>Ql.test(r)||h1.test(r)||Lu.test(r),parse:r=>Ql.test(r)?Ql.parse(r):Lu.test(r)?Lu.parse(r):h1.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Ql.transform(r):Lu.transform(r)},$B=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function BB(r){return isNaN(r)&&typeof r=="string"&&(r.match(I2)?.length||0)+(r.match($B)?.length||0)>0}const EC="number",TC="color",UB="var",zB="var(",lA="${}",HB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vh(r){const e=r.toString(),t=[],n={color:[],number:[],var:[]},i=[];let s=0;const c=e.replace(HB,d=>(Yn.test(d)?(n.color.push(s),i.push(TC),t.push(Yn.parse(d))):d.startsWith(zB)?(n.var.push(s),i.push(UB),t.push(d)):(n.number.push(s),i.push(EC),t.push(parseFloat(d))),++s,lA)).split(lA);return{values:t,split:c,indexes:n,types:i}}function AC(r){return vh(r).values}function NC(r){const{split:e,types:t}=vh(r),n=e.length;return i=>{let s="";for(let a=0;a<n;a++)if(s+=e[a],i[a]!==void 0){const c=t[a];c===EC?s+=B0(i[a]):c===TC?s+=Yn.transform(i[a]):s+=i[a]}return s}}const WB=r=>typeof r=="number"?0:r;function qB(r){const e=AC(r);return NC(r)(e.map(WB))}const cl={test:BB,parse:AC,createTransformer:NC,getAnimatableNone:qB};function lv(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function GB({hue:r,saturation:e,lightness:t,alpha:n}){r/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const c=t<.5?t*(1+e):t+e-t*e,d=2*t-c;i=lv(d,c,r+1/3),s=lv(d,c,r),a=lv(d,c,r-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:n}}function Wm(r,e){return t=>t>0?e:r}const Hr=(r,e,t)=>r+(e-r)*t,cv=(r,e,t)=>{const n=r*r,i=t*(e*e-n)+n;return i<0?0:Math.sqrt(i)},KB=[h1,Ql,Lu],YB=r=>KB.find(e=>e.test(r));function cA(r){const e=YB(r);if(!e)return!1;let t=e.parse(r);return e===Lu&&(t=GB(t)),t}const uA=(r,e)=>{const t=cA(r),n=cA(e);if(!t||!n)return Wm(r,e);const i={...t};return s=>(i.red=cv(t.red,n.red,s),i.green=cv(t.green,n.green,s),i.blue=cv(t.blue,n.blue,s),i.alpha=Hr(t.alpha,n.alpha,s),Ql.transform(i))},f1=new Set(["none","hidden"]);function XB(r,e){return f1.has(r)?t=>t<=0?r:e:t=>t>=1?e:r}function QB(r,e){return t=>Hr(r,e,t)}function R2(r){return typeof r=="number"?QB:typeof r=="string"?C2(r)?Wm:Yn.test(r)?uA:eU:Array.isArray(r)?kC:typeof r=="object"?Yn.test(r)?uA:JB:Wm}function kC(r,e){const t=[...r],n=t.length,i=r.map((s,a)=>R2(s)(s,e[a]));return s=>{for(let a=0;a<n;a++)t[a]=i[a](s);return t}}function JB(r,e){const t={...r,...e},n={};for(const i in t)r[i]!==void 0&&e[i]!==void 0&&(n[i]=R2(r[i])(r[i],e[i]));return i=>{for(const s in n)t[s]=n[s](i);return t}}function ZB(r,e){const t=[],n={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],a=r.indexes[s][n[s]],c=r.values[a]??0;t[i]=c,n[s]++}return t}const eU=(r,e)=>{const t=cl.createTransformer(e),n=vh(r),i=vh(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?f1.has(r)&&!i.values.length||f1.has(e)&&!n.values.length?XB(r,e):af(kC(ZB(n,i),i.values),t):Wm(r,e)};function SC(r,e,t){return typeof r=="number"&&typeof e=="number"&&typeof t=="number"?Hr(r,e,t):R2(r)(r,e)}const tU=r=>{const e=({timestamp:t})=>r(t);return{start:(t=!0)=>Wr.update(e,t),stop:()=>ll(e),now:()=>jn.isProcessing?jn.timestamp:Ei.now()}},CC=(r,e,t=10)=>{let n="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)n+=r(s/(i-1))+", ";return`linear(${n.substring(0,n.length-2)})`},qm=2e4;function j2(r){let e=0;const t=50;let n=r.next(e);for(;!n.done&&e<qm;)e+=t,n=r.next(e);return e>=qm?1/0:e}function rU(r,e=100,t){const n=t({...r,keyframes:[0,e]}),i=Math.min(j2(n),qm);return{type:"keyframes",ease:s=>n.next(i*s).value/e,duration:fa(i)}}const nU=5;function IC(r,e,t){const n=Math.max(e-nU,0);return cC(t-r(n),e-n)}const Kr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},uv=.001;function iU({duration:r=Kr.duration,bounce:e=Kr.bounce,velocity:t=Kr.velocity,mass:n=Kr.mass}){let i,s,a=1-e;a=ro(Kr.minDamping,Kr.maxDamping,a),r=ro(Kr.minDuration,Kr.maxDuration,fa(r)),a<1?(i=h=>{const p=h*a,m=p*r,x=p-t,v=p1(h,a),_=Math.exp(-m);return uv-x/v*_},s=h=>{const m=h*a*r,x=m*t+t,v=Math.pow(a,2)*Math.pow(h,2)*r,_=Math.exp(-m),w=p1(Math.pow(h,2),a);return(-i(h)+uv>0?-1:1)*((x-v)*_)/w}):(i=h=>{const p=Math.exp(-h*r),m=(h-t)*r+1;return-uv+p*m},s=h=>{const p=Math.exp(-h*r),m=(t-h)*(r*r);return p*m});const c=5/r,d=aU(i,s,c);if(r=ha(r),isNaN(d))return{stiffness:Kr.stiffness,damping:Kr.damping,duration:r};{const h=Math.pow(d,2)*n;return{stiffness:h,damping:a*2*Math.sqrt(n*h),duration:r}}}const sU=12;function aU(r,e,t){let n=t;for(let i=1;i<sU;i++)n=n-r(n)/e(n);return n}function p1(r,e){return r*Math.sqrt(1-e*e)}const oU=["duration","bounce"],lU=["stiffness","damping","mass"];function dA(r,e){return e.some(t=>r[t]!==void 0)}function cU(r){let e={velocity:Kr.velocity,stiffness:Kr.stiffness,damping:Kr.damping,mass:Kr.mass,isResolvedFromDuration:!1,...r};if(!dA(r,lU)&&dA(r,oU))if(r.visualDuration){const t=r.visualDuration,n=2*Math.PI/(t*1.2),i=n*n,s=2*ro(.05,1,1-(r.bounce||0))*Math.sqrt(i);e={...e,mass:Kr.mass,stiffness:i,damping:s}}else{const t=iU(r);e={...e,...t,mass:Kr.mass},e.isResolvedFromDuration=!0}return e}function Gm(r=Kr.visualDuration,e=Kr.bounce){const t=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:e}:r;let{restSpeed:n,restDelta:i}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],c={done:!1,value:s},{stiffness:d,damping:h,mass:p,duration:m,velocity:x,isResolvedFromDuration:v}=cU({...t,velocity:-fa(t.velocity||0)}),_=x||0,w=h/(2*Math.sqrt(d*p)),E=a-s,j=fa(Math.sqrt(d/p)),P=Math.abs(E)<5;n||(n=P?Kr.restSpeed.granular:Kr.restSpeed.default),i||(i=P?Kr.restDelta.granular:Kr.restDelta.default);let V;if(w<1){const K=p1(j,w);V=H=>{const S=Math.exp(-w*j*H);return a-S*((_+w*j*E)/K*Math.sin(K*H)+E*Math.cos(K*H))}}else if(w===1)V=K=>a-Math.exp(-j*K)*(E+(_+j*E)*K);else{const K=j*Math.sqrt(w*w-1);V=H=>{const S=Math.exp(-w*j*H),N=Math.min(K*H,300);return a-S*((_+w*j*E)*Math.sinh(N)+K*E*Math.cosh(N))/K}}const L={calculatedDuration:v&&m||null,next:K=>{const H=V(K);if(v)c.done=K>=m;else{let S=K===0?_:0;w<1&&(S=K===0?ha(_):IC(V,K,H));const N=Math.abs(S)<=n,I=Math.abs(a-H)<=i;c.done=N&&I}return c.value=c.done?a:H,c},toString:()=>{const K=Math.min(j2(L),qm),H=CC(S=>L.next(K*S).value,K,30);return K+"ms "+H},toTransition:()=>{}};return L}Gm.applyToOptions=r=>{const e=rU(r,100,Gm);return r.ease=e.ease,r.duration=ha(e.duration),r.type="keyframes",r};function m1({keyframes:r,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:c,max:d,restDelta:h=.5,restSpeed:p}){const m=r[0],x={done:!1,value:m},v=N=>c!==void 0&&N<c||d!==void 0&&N>d,_=N=>c===void 0?d:d===void 0||Math.abs(c-N)<Math.abs(d-N)?c:d;let w=t*e;const E=m+w,j=a===void 0?E:a(E);j!==E&&(w=j-m);const P=N=>-w*Math.exp(-N/n),V=N=>j+P(N),L=N=>{const I=P(N),R=V(N);x.done=Math.abs(I)<=h,x.value=x.done?j:R};let K,H;const S=N=>{v(x.value)&&(K=N,H=Gm({keyframes:[x.value,_(x.value)],velocity:IC(V,N,x.value),damping:i,stiffness:s,restDelta:h,restSpeed:p}))};return S(0),{calculatedDuration:null,next:N=>{let I=!1;return!H&&K===void 0&&(I=!0,L(N),S(N)),K!==void 0&&N>=K?H.next(N-K):(!I&&L(N),x)}}}function uU(r,e,t){const n=[],i=t||no.mix||SC,s=r.length-1;for(let a=0;a<s;a++){let c=i(r[a],r[a+1]);if(e){const d=Array.isArray(e)?e[a]||ms:e;c=af(d,c)}n.push(c)}return n}function dU(r,e,{clamp:t=!0,ease:n,mixer:i}={}){const s=r.length;if(E2(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=r[0]===r[1];r[0]>r[s-1]&&(r=[...r].reverse(),e=[...e].reverse());const c=uU(e,n,i),d=c.length,h=p=>{if(a&&p<r[0])return e[0];let m=0;if(d>1)for(;m<r.length-2&&!(p<r[m+1]);m++);const x=xh(r[m],r[m+1],p);return c[m](x)};return t?p=>h(ro(r[0],r[s-1],p)):h}function hU(r,e){const t=r[r.length-1];for(let n=1;n<=e;n++){const i=xh(0,e,n);r.push(Hr(t,1,i))}}function fU(r){const e=[0];return hU(e,r.length-1),e}function pU(r,e){return r.map(t=>t*e)}function mU(r,e){return r.map(()=>e||yC).splice(0,r.length-1)}function U0({duration:r=300,keyframes:e,times:t,ease:n="easeInOut"}){const i=NB(n)?n.map(sA):sA(n),s={done:!1,value:e[0]},a=pU(t&&t.length===e.length?t:fU(e),r),c=dU(a,e,{ease:Array.isArray(i)?i:mU(e,i)});return{calculatedDuration:r,next:d=>(s.value=c(d),s.done=d>=r,s)}}const gU=r=>r!==null;function D2(r,{repeat:e,repeatType:t="loop"},n,i=1){const s=r.filter(gU),c=i<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!c||n===void 0?s[c]:n}const xU={decay:m1,inertia:m1,tween:U0,keyframes:U0,spring:Gm};function PC(r){typeof r.type=="string"&&(r.type=xU[r.type])}class F2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const yU=r=>r/100;class O2 extends F2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(t=!0)=>{if(t){const{motionValue:n}=this.options;n&&n.updatedAt!==Ei.now()&&this.tick(Ei.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;PC(e);const{type:t=U0,repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=e;let{keyframes:c}=e;const d=t||U0;d!==U0&&typeof c[0]!="number"&&(this.mixKeyframes=af(yU,SC(c[0],c[1])),c=[0,100]);const h=d({...e,keyframes:c});s==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...c].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=j2(h));const{calculatedDuration:p}=h;this.calculatedDuration=p,this.resolvedDuration=p+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=h}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return n.next(0);const{delay:h=0,keyframes:p,repeat:m,repeatType:x,repeatDelay:v,type:_,onUpdate:w,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const j=this.currentTime-h*(this.playbackSpeed>=0?1:-1),P=this.playbackSpeed>=0?j<0:j>i;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let V=this.currentTime,L=n;if(m){const N=Math.min(this.currentTime,i)/c;let I=Math.floor(N),R=N%1;!R&&N>=1&&(R=1),R===1&&I--,I=Math.min(I,m+1),!!(I%2)&&(x==="reverse"?(R=1-R,v&&(R-=v/c)):x==="mirror"&&(L=a)),V=ro(0,1,R)*c}const K=P?{done:!1,value:p[0]}:L.next(V);s&&(K.value=s(K.value));let{done:H}=K;!P&&d!==null&&(H=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return S&&_!==m1&&(K.value=D2(p,this.options,E,this.speed)),w&&w(K.value),S&&this.finish(),K}then(e,t){return this.finished.then(e,t)}get duration(){return fa(this.calculatedDuration)}get time(){return fa(this.currentTime)}set time(e){e=ha(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ei.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=fa(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=tU,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ei.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function vU(r){for(let e=1;e<r.length;e++)r[e]??(r[e]=r[e-1])}const Jl=r=>r*180/Math.PI,g1=r=>{const e=Jl(Math.atan2(r[1],r[0]));return x1(e)},bU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:g1,rotateZ:g1,skewX:r=>Jl(Math.atan(r[1])),skewY:r=>Jl(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},x1=r=>(r=r%360,r<0&&(r+=360),r),hA=g1,fA=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),pA=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),wU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:fA,scaleY:pA,scale:r=>(fA(r)+pA(r))/2,rotateX:r=>x1(Jl(Math.atan2(r[6],r[5]))),rotateY:r=>x1(Jl(Math.atan2(-r[2],r[0]))),rotateZ:hA,rotate:hA,skewX:r=>Jl(Math.atan(r[4])),skewY:r=>Jl(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function y1(r){return r.includes("scale")?1:0}function v1(r,e){if(!r||r==="none")return y1(e);const t=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(t)n=wU,i=t;else{const c=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=bU,i=c}if(!i)return y1(e);const s=n[e],a=i[1].split(",").map(EU);return typeof s=="function"?s(a):a[s]}const _U=(r,e)=>{const{transform:t="none"}=getComputedStyle(r);return v1(t,e)};function EU(r){return parseFloat(r.trim())}const Id=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Pd=new Set(Id),mA=r=>r===Cd||r===Rt,TU=new Set(["x","y","z"]),AU=Id.filter(r=>!TU.has(r));function NU(r){const e=[];return AU.forEach(t=>{const n=r.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const tc={width:({x:r},{paddingLeft:e="0",paddingRight:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),height:({y:r},{paddingTop:e="0",paddingBottom:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),top:(r,{top:e})=>parseFloat(e),left:(r,{left:e})=>parseFloat(e),bottom:({y:r},{top:e})=>parseFloat(e)+(r.max-r.min),right:({x:r},{left:e})=>parseFloat(e)+(r.max-r.min),x:(r,{transform:e})=>v1(e,"x"),y:(r,{transform:e})=>v1(e,"y")};tc.translateX=tc.x;tc.translateY=tc.y;const rc=new Set;let b1=!1,w1=!1,_1=!1;function RC(){if(w1){const r=Array.from(rc).filter(n=>n.needsMeasurement),e=new Set(r.map(n=>n.element)),t=new Map;e.forEach(n=>{const i=NU(n);i.length&&(t.set(n,i),n.render())}),r.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=t.get(n);i&&i.forEach(([s,a])=>{n.getValue(s)?.set(a)})}),r.forEach(n=>n.measureEndState()),r.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}w1=!1,b1=!1,rc.forEach(r=>r.complete(_1)),rc.clear()}function jC(){rc.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(w1=!0)})}function kU(){_1=!0,jC(),RC(),_1=!1}class L2{constructor(e,t,n,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(rc.add(this),b1||(b1=!0,Wr.read(jC),Wr.resolveKeyframes(RC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:i}=this;if(e[0]===null){const s=i?.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(n&&t){const c=n.readValue(t,a);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}vU(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),rc.delete(this)}cancel(){this.state==="scheduled"&&(rc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const SU=r=>r.startsWith("--");function CU(r,e,t){SU(e)?r.style.setProperty(e,t):r.style[e]=t}const IU=T2(()=>window.ScrollTimeline!==void 0),PU={};function RU(r,e){const t=T2(r);return()=>PU[e]??t()}const DC=RU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),I0=([r,e,t,n])=>`cubic-bezier(${r}, ${e}, ${t}, ${n})`,gA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:I0([0,.65,.55,1]),circOut:I0([.55,0,1,.45]),backIn:I0([.31,.01,.66,-.59]),backOut:I0([.33,1.53,.69,.99])};function FC(r,e){if(r)return typeof r=="function"?DC()?CC(r,e):"ease-out":vC(r)?I0(r):Array.isArray(r)?r.map(t=>FC(t,e)||gA.easeOut):gA[r]}function jU(r,e,t,{delay:n=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:c="easeOut",times:d}={},h=void 0){const p={[e]:t};d&&(p.offset=d);const m=FC(c,i);Array.isArray(m)&&(p.easing=m);const x={delay:n,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return h&&(x.pseudoElement=h),r.animate(p,x)}function OC(r){return typeof r=="function"&&"applyToOptions"in r}function DU({type:r,...e}){return OC(r)&&DC()?r.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class FU extends F2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:c,onComplete:d}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,E2(typeof e.type!="string");const h=DU(e);this.animation=jU(t,n,i,h,s),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const p=D2(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):CU(t,n,p),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return fa(Number(e))}get time(){return fa(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ha(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&IU()?(this.animation.timeline=e,ms):t(this)}}const LC={anticipate:mC,backInOut:pC,circInOut:xC};function OU(r){return r in LC}function LU(r){typeof r.ease=="string"&&OU(r.ease)&&(r.ease=LC[r.ease])}const xA=10;class MU extends FU{constructor(e){LU(e),PC(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:i,element:s,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new O2({...a,autoplay:!1}),d=ha(this.finishedTime??this.time);t.setWithVelocity(c.sample(d-xA).value,c.sample(d).value,xA),c.stop()}}const yA=(r,e)=>e==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(cl.test(r)||r==="0")&&!r.startsWith("url("));function VU(r){const e=r[0];if(r.length===1)return!0;for(let t=0;t<r.length;t++)if(r[t]!==e)return!0}function $U(r,e,t,n){const i=r[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=r[r.length-1],a=yA(i,e),c=yA(s,e);return!a||!c?!1:VU(r)||(t==="spring"||OC(t))&&n}function M2(r){return oC(r)&&"offsetHeight"in r}const BU=new Set(["opacity","clipPath","filter","transform"]),UU=T2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function zU(r){const{motionValue:e,name:t,repeatDelay:n,repeatType:i,damping:s,type:a}=r;if(!M2(e?.owner?.current))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return UU()&&t&&BU.has(t)&&(t!=="transform"||!d)&&!c&&!n&&i!=="mirror"&&s!==0&&a!=="inertia"}const HU=40;class WU extends F2{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:c,name:d,motionValue:h,element:p,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Ei.now();const x={autoplay:e,delay:t,type:n,repeat:i,repeatDelay:s,repeatType:a,name:d,motionValue:h,element:p,...m},v=p?.KeyframeResolver||L2;this.keyframeResolver=new v(c,(_,w,E)=>this.onKeyframesResolved(_,w,x,!E),d,h,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:c,delay:d,isHandoff:h,onUpdate:p}=n;this.resolvedAt=Ei.now(),$U(e,s,a,c)||((no.instantAnimations||!d)&&p?.(D2(e,n,t)),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const x={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>HU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},v=!h&&zU(x)?new MU({...x,element:x.motionValue.owner.current}):new O2(x);v.finished.then(()=>this.notifyFinished()).catch(ms),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),kU()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const qU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function GU(r){const e=qU.exec(r);if(!e)return[,];const[,t,n,i]=e;return[`--${t??n}`,i]}function MC(r,e,t=1){const[n,i]=GU(r);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const a=s.trim();return aC(a)?parseFloat(a):a}return C2(i)?MC(i,e,t+1):i}function V2(r,e){return r?.[e]??r?.default??r}const VC=new Set(["width","height","top","left","right","bottom",...Id]),KU={test:r=>r==="auto",parse:r=>r},$C=r=>e=>e.test(r),BC=[Cd,Rt,pa,Bo,VB,MB,KU],vA=r=>BC.find($C(r));function YU(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||lC(r):!0}const XU=new Set(["brightness","contrast","saturate","opacity"]);function QU(r){const[e,t]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[n]=t.match(I2)||[];if(!n)return r;const i=t.replace(n,"");let s=XU.has(e)?1:0;return n!==t&&(s*=100),e+"("+s+i+")"}const JU=/\b([a-z-]*)\(.*?\)/gu,E1={...cl,getAnimatableNone:r=>{const e=r.match(JU);return e?e.map(QU).join(" "):r}},bA={...Cd,transform:Math.round},ZU={rotate:Bo,rotateX:Bo,rotateY:Bo,rotateZ:Bo,scale:Dp,scaleX:Dp,scaleY:Dp,scaleZ:Dp,skew:Bo,skewX:Bo,skewY:Bo,distance:Rt,translateX:Rt,translateY:Rt,translateZ:Rt,x:Rt,y:Rt,z:Rt,perspective:Rt,transformPerspective:Rt,opacity:yh,originX:oA,originY:oA,originZ:Rt},$2={borderWidth:Rt,borderTopWidth:Rt,borderRightWidth:Rt,borderBottomWidth:Rt,borderLeftWidth:Rt,borderRadius:Rt,radius:Rt,borderTopLeftRadius:Rt,borderTopRightRadius:Rt,borderBottomRightRadius:Rt,borderBottomLeftRadius:Rt,width:Rt,maxWidth:Rt,height:Rt,maxHeight:Rt,top:Rt,right:Rt,bottom:Rt,left:Rt,padding:Rt,paddingTop:Rt,paddingRight:Rt,paddingBottom:Rt,paddingLeft:Rt,margin:Rt,marginTop:Rt,marginRight:Rt,marginBottom:Rt,marginLeft:Rt,backgroundPositionX:Rt,backgroundPositionY:Rt,...ZU,zIndex:bA,fillOpacity:yh,strokeOpacity:yh,numOctaves:bA},ez={...$2,color:Yn,backgroundColor:Yn,outlineColor:Yn,fill:Yn,stroke:Yn,borderColor:Yn,borderTopColor:Yn,borderRightColor:Yn,borderBottomColor:Yn,borderLeftColor:Yn,filter:E1,WebkitFilter:E1},UC=r=>ez[r];function zC(r,e){let t=UC(r);return t!==E1&&(t=cl),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const tz=new Set(["auto","none","0"]);function rz(r,e,t){let n=0,i;for(;n<r.length&&!i;){const s=r[n];typeof s=="string"&&!tz.has(s)&&vh(s).values.length&&(i=r[n]),n++}if(i&&t)for(const s of e)r[s]=zC(t,i)}class nz extends L2{constructor(e,t,n,i,s){super(e,t,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),C2(h))){const p=MC(h,t.current);p!==void 0&&(e[d]=p),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!VC.has(n)||e.length!==2)return;const[i,s]=e,a=vA(i),c=vA(s);if(a!==c)if(mA(a)&&mA(c))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else tc[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let i=0;i<e.length;i++)(e[i]===null||YU(e[i]))&&n.push(i);n.length&&rz(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=tc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const s=n.length-1,a=n[s];n[s]=tc[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function iz(r,e,t){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let n=document;const i=t?.[r]??n.querySelectorAll(r);return i?Array.from(i):[]}return Array.from(r)}const wA=30,sz=r=>!isNaN(parseFloat(r));class az{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const s=Ei.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty();i&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Ei.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=sz(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new A2);const n=this.events[e].add(t);return e==="change"?()=>{n(),Wr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ei.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>wA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,wA);return cC(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hd(r,e){return new az(r,e)}const HC=(r,e)=>e&&typeof r=="number"?e.transform(r):r,{schedule:B2}=bC(queueMicrotask,!1),Ds={x:!1,y:!1};function WC(){return Ds.x||Ds.y}function oz(r){return r==="x"||r==="y"?Ds[r]?null:(Ds[r]=!0,()=>{Ds[r]=!1}):Ds.x||Ds.y?null:(Ds.x=Ds.y=!0,()=>{Ds.x=Ds.y=!1})}function qC(r,e){const t=iz(r),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[t,i,()=>n.abort()]}function _A(r){return!(r.pointerType==="touch"||WC())}function lz(r,e,t={}){const[n,i,s]=qC(r,t),a=c=>{if(!_A(c))return;const{target:d}=c,h=e(d,c);if(typeof h!="function"||!d)return;const p=m=>{_A(m)&&(h(m),d.removeEventListener("pointerleave",p))};d.addEventListener("pointerleave",p,i)};return n.forEach(c=>{c.addEventListener("pointerenter",a,i)}),s}const GC=(r,e)=>e?r===e?!0:GC(r,e.parentElement):!1,U2=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,cz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function uz(r){return cz.has(r.tagName)||r.tabIndex!==-1}const cm=new WeakSet;function EA(r){return e=>{e.key==="Enter"&&r(e)}}function dv(r,e){r.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const dz=(r,e)=>{const t=r.currentTarget;if(!t)return;const n=EA(()=>{if(cm.has(t))return;dv(t,"down");const i=EA(()=>{dv(t,"up")}),s=()=>dv(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function TA(r){return U2(r)&&!WC()}function hz(r,e,t={}){const[n,i,s]=qC(r,t),a=c=>{const d=c.currentTarget;if(!TA(c))return;cm.add(d);const h=e(d,c),p=(v,_)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",x),cm.has(d)&&cm.delete(d),TA(v)&&typeof h=="function"&&h(v,{success:_})},m=v=>{p(v,d===window||d===document||t.useGlobalTarget||GC(d,v.target))},x=v=>{p(v,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",x,i)};return n.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",a,i),M2(c)&&(c.addEventListener("focus",h=>dz(h,i)),!uz(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),s}function KC(r){return oC(r)&&"ownerSVGElement"in r}function fz(r){return KC(r)&&r.tagName==="svg"}const Qn=r=>!!(r&&r.getVelocity),pz=[...BC,Yn,cl],mz=r=>pz.find($C(r)),z2=k.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class gz extends k.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const n=t.offsetParent,i=M2(n)&&n.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function xz({children:r,isPresent:e,anchorX:t}){const n=k.useId(),i=k.useRef(null),s=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=k.useContext(z2);return k.useInsertionEffect(()=>{const{width:c,height:d,top:h,left:p,right:m}=s.current;if(e||!i.current||!c||!d)return;const x=t==="left"?`left: ${p}`:`right: ${m}`;i.current.dataset.motionPopId=n;const v=document.createElement("style");return a&&(v.nonce=a),document.head.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${d}px !important;
            ${x}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.contains(v)&&document.head.removeChild(v)}},[e]),o.jsx(gz,{isPresent:e,childRef:i,sizeRef:s,children:k.cloneElement(r,{ref:i})})}const yz=({children:r,initial:e,isPresent:t,onExitComplete:n,custom:i,presenceAffectsLayout:s,mode:a,anchorX:c})=>{const d=v2(vz),h=k.useId();let p=!0,m=k.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:t,custom:i,onExitComplete:x=>{d.set(x,!0);for(const v of d.values())if(!v)return;n&&n()},register:x=>(d.set(x,!1),()=>d.delete(x))}),[t,d,n]);return s&&p&&(m={...m}),k.useMemo(()=>{d.forEach((x,v)=>d.set(v,!1))},[t]),k.useEffect(()=>{!t&&!d.size&&n&&n()},[t]),a==="popLayout"&&(r=o.jsx(xz,{isPresent:t,anchorX:c,children:r})),o.jsx(Kg.Provider,{value:m,children:r})};function vz(){return new Map}function YC(r=!0){const e=k.useContext(Kg);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,s=k.useId();k.useEffect(()=>{if(r)return i(s)},[r]);const a=k.useCallback(()=>r&&n&&n(s),[s,n,r]);return!t&&n?[!1,a]:[!0]}const Fp=r=>r.key||"";function AA(r){const e=[];return k.Children.forEach(r,t=>{k.isValidElement(t)&&e.push(t)}),e}const Vt=({children:r,custom:e,initial:t=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1,anchorX:c="left"})=>{const[d,h]=YC(a),p=k.useMemo(()=>AA(r),[r]),m=a&&!d?[]:p.map(Fp),x=k.useRef(!0),v=k.useRef(p),_=v2(()=>new Map),[w,E]=k.useState(p),[j,P]=k.useState(p);sC(()=>{x.current=!1,v.current=p;for(let K=0;K<j.length;K++){const H=Fp(j[K]);m.includes(H)?_.delete(H):_.get(H)!==!0&&_.set(H,!1)}},[j,m.length,m.join("-")]);const V=[];if(p!==w){let K=[...p];for(let H=0;H<j.length;H++){const S=j[H],N=Fp(S);m.includes(N)||(K.splice(H,0,S),V.push(S))}return s==="wait"&&V.length&&(K=V),P(AA(K)),E(p),null}const{forceRender:L}=k.useContext(y2);return o.jsx(o.Fragment,{children:j.map(K=>{const H=Fp(K),S=a&&!d?!1:p===j||m.includes(H),N=()=>{if(_.has(H))_.set(H,!0);else return;let I=!0;_.forEach(R=>{R||(I=!1)}),I&&(L?.(),P(v.current),a&&h?.(),n&&n())};return o.jsx(yz,{isPresent:S,initial:!x.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,onExitComplete:S?void 0:N,anchorX:c,children:K},H)})})},XC=k.createContext({strict:!1}),NA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},fd={};for(const r in NA)fd[r]={isEnabled:e=>NA[r].some(t=>!!e[t])};function bz(r){for(const e in r)fd[e]={...fd[e],...r[e]}}const wz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Km(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||wz.has(r)}let QC=r=>!Km(r);function _z(r){r&&(QC=e=>e.startsWith("on")?!Km(e):r(e))}try{_z(require("@emotion/is-prop-valid").default)}catch{}function Ez(r,e,t){const n={};for(const i in r)i==="values"&&typeof r.values=="object"||(QC(i)||t===!0&&Km(i)||!e&&!Km(i)||r.draggable&&i.startsWith("onDrag"))&&(n[i]=r[i]);return n}function Tz(r){if(typeof Proxy>"u")return r;const e=new Map,t=(...n)=>r(...n);return new Proxy(t,{get:(n,i)=>i==="create"?r:(e.has(i)||e.set(i,r(i)),e.get(i))})}const Yg=k.createContext({});function Xg(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function bh(r){return typeof r=="string"||Array.isArray(r)}const H2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],W2=["initial",...H2];function Qg(r){return Xg(r.animate)||W2.some(e=>bh(r[e]))}function JC(r){return!!(Qg(r)||r.variants)}function Az(r,e){if(Qg(r)){const{initial:t,animate:n}=r;return{initial:t===!1||bh(t)?t:void 0,animate:bh(n)?n:void 0}}return r.inherit!==!1?e:{}}function Nz(r){const{initial:e,animate:t}=Az(r,k.useContext(Yg));return k.useMemo(()=>({initial:e,animate:t}),[kA(e),kA(t)])}function kA(r){return Array.isArray(r)?r.join(" "):r}const kz=Symbol.for("motionComponentSymbol");function Mu(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function Sz(r,e,t){return k.useCallback(n=>{n&&r.onMount&&r.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):Mu(t)&&(t.current=n))},[e])}const q2=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Cz="framerAppearId",ZC="data-"+q2(Cz),e6=k.createContext({});function Iz(r,e,t,n,i){const{visualElement:s}=k.useContext(Yg),a=k.useContext(XC),c=k.useContext(Kg),d=k.useContext(z2).reducedMotion,h=k.useRef(null);n=n||a.renderer,!h.current&&n&&(h.current=n(r,{visualState:e,parent:s,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const p=h.current,m=k.useContext(e6);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&Pz(h.current,t,i,m);const x=k.useRef(!1);k.useInsertionEffect(()=>{p&&x.current&&p.update(t,c)});const v=t[ZC],_=k.useRef(!!v&&!window.MotionHandoffIsComplete?.(v)&&window.MotionHasOptimisedAnimation?.(v));return sC(()=>{p&&(x.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),B2.render(p.render),_.current&&p.animationState&&p.animationState.animateChanges())}),k.useEffect(()=>{p&&(!_.current&&p.animationState&&p.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(v)}),_.current=!1))}),p}function Pz(r,e,t,n){const{layoutId:i,layout:s,drag:a,dragConstraints:c,layoutScroll:d,layoutRoot:h,layoutCrossfade:p}=e;r.projection=new t(r.latestValues,e["data-framer-portal-id"]?void 0:t6(r.parent)),r.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||c&&Mu(c),visualElement:r,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:d,layoutRoot:h})}function t6(r){if(r)return r.options.allowProjection!==!1?r.projection:t6(r.parent)}function Rz({preloadedFeatures:r,createVisualElement:e,useRender:t,useVisualState:n,Component:i}){r&&bz(r);function s(c,d){let h;const p={...k.useContext(z2),...c,layoutId:jz(c)},{isStatic:m}=p,x=Nz(c),v=n(c,m);if(!m&&b2){Dz();const _=Fz(p);h=_.MeasureLayout,x.visualElement=Iz(i,v,p,e,_.ProjectionNode)}return o.jsxs(Yg.Provider,{value:x,children:[h&&x.visualElement?o.jsx(h,{visualElement:x.visualElement,...p}):null,t(i,c,Sz(v,x.visualElement,d),v,m,x.visualElement)]})}s.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const a=k.forwardRef(s);return a[kz]=i,a}function jz({layoutId:r}){const e=k.useContext(y2).id;return e&&r!==void 0?e+"-"+r:r}function Dz(r,e){k.useContext(XC).strict}function Fz(r){const{drag:e,layout:t}=fd;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e?.isEnabled(r)||t?.isEnabled(r)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const wh={};function Oz(r){for(const e in r)wh[e]=r[e],S2(e)&&(wh[e].isCSSVariable=!0)}function r6(r,{layout:e,layoutId:t}){return Pd.has(r)||r.startsWith("origin")||(e||t!==void 0)&&(!!wh[r]||r==="opacity")}const Lz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Mz=Id.length;function Vz(r,e,t){let n="",i=!0;for(let s=0;s<Mz;s++){const a=Id[s],c=r[a];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(a.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||t){const h=HC(c,$2[a]);if(!d){i=!1;const p=Lz[a]||a;n+=`${p}(${h}) `}t&&(e[a]=h)}}return n=n.trim(),t?n=t(e,i?"":n):i&&(n="none"),n}function G2(r,e,t){const{style:n,vars:i,transformOrigin:s}=r;let a=!1,c=!1;for(const d in e){const h=e[d];if(Pd.has(d)){a=!0;continue}else if(S2(d)){i[d]=h;continue}else{const p=HC(h,$2[d]);d.startsWith("origin")?(c=!0,s[d]=p):n[d]=p}}if(e.transform||(a||t?n.transform=Vz(e,r.transform,t):n.transform&&(n.transform="none")),c){const{originX:d="50%",originY:h="50%",originZ:p=0}=s;n.transformOrigin=`${d} ${h} ${p}`}}const K2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function n6(r,e,t){for(const n in e)!Qn(e[n])&&!r6(n,t)&&(r[n]=e[n])}function $z({transformTemplate:r},e){return k.useMemo(()=>{const t=K2();return G2(t,e,r),Object.assign({},t.vars,t.style)},[e])}function Bz(r,e){const t=r.style||{},n={};return n6(n,t,r),Object.assign(n,$z(r,e)),n}function Uz(r,e){const t={},n=Bz(r,e);return r.drag&&r.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(t.tabIndex=0),t.style=n,t}const zz={offset:"stroke-dashoffset",array:"stroke-dasharray"},Hz={offset:"strokeDashoffset",array:"strokeDasharray"};function Wz(r,e,t=1,n=0,i=!0){r.pathLength=1;const s=i?zz:Hz;r[s.offset]=Rt.transform(-n);const a=Rt.transform(e),c=Rt.transform(t);r[s.array]=`${a} ${c}`}function i6(r,{attrX:e,attrY:t,attrScale:n,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...c},d,h,p){if(G2(r,c,h),d){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:m,style:x}=r;m.transform&&(x.transform=m.transform,delete m.transform),(x.transform||m.transformOrigin)&&(x.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),x.transform&&(x.transformBox=p?.transformBox??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),n!==void 0&&(m.scale=n),i!==void 0&&Wz(m,i,s,a,!1)}const s6=()=>({...K2(),attrs:{}}),a6=r=>typeof r=="string"&&r.toLowerCase()==="svg";function qz(r,e,t,n){const i=k.useMemo(()=>{const s=s6();return i6(s,e,a6(n),r.transformTemplate,r.style),{...s.attrs,style:{...s.style}}},[e]);if(r.style){const s={};n6(s,r.style,r),i.style={...s,...i.style}}return i}const Gz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Y2(r){return typeof r!="string"||r.includes("-")?!1:!!(Gz.indexOf(r)>-1||/[A-Z]/u.test(r))}function Kz(r=!1){return(t,n,i,{latestValues:s},a)=>{const d=(Y2(t)?qz:Uz)(n,s,a,t),h=Ez(n,typeof t=="string",r),p=t!==k.Fragment?{...h,...d,ref:i}:{},{children:m}=n,x=k.useMemo(()=>Qn(m)?m.get():m,[m]);return k.createElement(t,{...p,children:x})}}function SA(r){const e=[{},{}];return r?.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function X2(r,e,t,n){if(typeof e=="function"){const[i,s]=SA(n);e=e(t!==void 0?t:r.custom,i,s)}if(typeof e=="string"&&(e=r.variants&&r.variants[e]),typeof e=="function"){const[i,s]=SA(n);e=e(t!==void 0?t:r.custom,i,s)}return e}function um(r){return Qn(r)?r.get():r}function Yz({scrapeMotionValuesFromProps:r,createRenderState:e},t,n,i){return{latestValues:Xz(t,n,i,r),renderState:e()}}const o6=r=>(e,t)=>{const n=k.useContext(Yg),i=k.useContext(Kg),s=()=>Yz(r,e,n,i);return t?s():v2(s)};function Xz(r,e,t,n){const i={},s=n(r,{});for(const x in s)i[x]=um(s[x]);let{initial:a,animate:c}=r;const d=Qg(r),h=JC(r);e&&h&&!d&&r.inherit!==!1&&(a===void 0&&(a=e.initial),c===void 0&&(c=e.animate));let p=t?t.initial===!1:!1;p=p||a===!1;const m=p?c:a;if(m&&typeof m!="boolean"&&!Xg(m)){const x=Array.isArray(m)?m:[m];for(let v=0;v<x.length;v++){const _=X2(r,x[v]);if(_){const{transitionEnd:w,transition:E,...j}=_;for(const P in j){let V=j[P];if(Array.isArray(V)){const L=p?V.length-1:0;V=V[L]}V!==null&&(i[P]=V)}for(const P in w)i[P]=w[P]}}}return i}function Q2(r,e,t){const{style:n}=r,i={};for(const s in n)(Qn(n[s])||e.style&&Qn(e.style[s])||r6(s,r)||t?.getValue(s)?.liveStyle!==void 0)&&(i[s]=n[s]);return i}const Qz={useVisualState:o6({scrapeMotionValuesFromProps:Q2,createRenderState:K2})};function l6(r,e,t){const n=Q2(r,e,t);for(const i in r)if(Qn(r[i])||Qn(e[i])){const s=Id.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=r[i]}return n}const Jz={useVisualState:o6({scrapeMotionValuesFromProps:l6,createRenderState:s6})};function Zz(r,e){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...Y2(n)?Jz:Qz,preloadedFeatures:r,useRender:Kz(i),createVisualElement:e,Component:n};return Rz(a)}}function _h(r,e,t){const n=r.getProps();return X2(n,e,t!==void 0?t:n.custom,r)}const T1=r=>Array.isArray(r);function eH(r,e,t){r.hasValue(e)?r.getValue(e).set(t):r.addValue(e,hd(t))}function tH(r){return T1(r)?r[r.length-1]||0:r}function rH(r,e){const t=_h(r,e);let{transitionEnd:n={},transition:i={},...s}=t||{};s={...s,...n};for(const a in s){const c=tH(s[a]);eH(r,a,c)}}function nH(r){return!!(Qn(r)&&r.add)}function A1(r,e){const t=r.getValue("willChange");if(nH(t))return t.add(e);if(!t&&no.WillChange){const n=new no.WillChange("auto");r.addValue("willChange",n),n.add(e)}}function c6(r){return r.props[ZC]}const iH=r=>r!==null;function sH(r,{repeat:e,repeatType:t="loop"},n){const i=r.filter(iH),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[s]}const aH={type:"spring",stiffness:500,damping:25,restSpeed:10},oH=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),lH={type:"keyframes",duration:.8},cH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uH=(r,{keyframes:e})=>e.length>2?lH:Pd.has(r)?r.startsWith("scale")?oH(e[1]):aH:cH;function dH({when:r,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:c,from:d,elapsed:h,...p}){return!!Object.keys(p).length}const J2=(r,e,t,n={},i,s)=>a=>{const c=V2(n,r)||{},d=c.delay||n.delay||0;let{elapsed:h=0}=n;h=h-ha(d);const p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:x=>{e.set(x),c.onUpdate&&c.onUpdate(x)},onComplete:()=>{a(),c.onComplete&&c.onComplete()},name:r,motionValue:e,element:s?void 0:i};dH(c)||Object.assign(p,uH(r,p)),p.duration&&(p.duration=ha(p.duration)),p.repeatDelay&&(p.repeatDelay=ha(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(m=!0)),(no.instantAnimations||no.skipAnimations)&&(m=!0,p.duration=0,p.delay=0),p.allowFlatten=!c.type&&!c.ease,m&&!s&&e.get()!==void 0){const x=sH(p.keyframes,c);if(x!==void 0){Wr.update(()=>{p.onUpdate(x),p.onComplete()});return}}return c.isSync?new O2(p):new WU(p)};function hH({protectedKeys:r,needsAnimating:e},t){const n=r.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function u6(r,e,{delay:t=0,transitionOverride:n,type:i}={}){let{transition:s=r.getDefaultTransition(),transitionEnd:a,...c}=e;n&&(s=n);const d=[],h=i&&r.animationState&&r.animationState.getState()[i];for(const p in c){const m=r.getValue(p,r.latestValues[p]??null),x=c[p];if(x===void 0||h&&hH(h,p))continue;const v={delay:t,...V2(s||{},p)},_=m.get();if(_!==void 0&&!m.isAnimating&&!Array.isArray(x)&&x===_&&!v.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const j=c6(r);if(j){const P=window.MotionHandoffAnimation(j,p,Wr);P!==null&&(v.startTime=P,w=!0)}}A1(r,p),m.start(J2(p,m,x,r.shouldReduceMotion&&VC.has(p)?{type:!1}:v,r,w));const E=m.animation;E&&d.push(E)}return a&&Promise.all(d).then(()=>{Wr.update(()=>{a&&rH(r,a)})}),d}function N1(r,e,t={}){const n=_h(r,e,t.type==="exit"?r.presenceContext?.custom:void 0);let{transition:i=r.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(i=t.transitionOverride);const s=n?()=>Promise.all(u6(r,n,t)):()=>Promise.resolve(),a=r.variantChildren&&r.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:m}=i;return fH(r,e,h+d,p,m,t)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,h]=c==="beforeChildren"?[s,a]:[a,s];return d().then(()=>h())}else return Promise.all([s(),a(t.delay)])}function fH(r,e,t=0,n=0,i=1,s){const a=[],c=(r.variantChildren.size-1)*n,d=i===1?(h=0)=>h*n:(h=0)=>c-h*n;return Array.from(r.variantChildren).sort(pH).forEach((h,p)=>{h.notify("AnimationStart",e),a.push(N1(h,e,{...s,delay:t+d(p)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(a)}function pH(r,e){return r.sortNodePosition(e)}function mH(r,e,t={}){r.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(s=>N1(r,s,t));n=Promise.all(i)}else if(typeof e=="string")n=N1(r,e,t);else{const i=typeof e=="function"?_h(r,e,t.custom):e;n=Promise.all(u6(r,i,t))}return n.then(()=>{r.notify("AnimationComplete",e)})}function d6(r,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==r.length)return!1;for(let n=0;n<t;n++)if(e[n]!==r[n])return!1;return!0}const gH=W2.length;function h6(r){if(!r)return;if(!r.isControllingVariants){const t=r.parent?h6(r.parent)||{}:{};return r.props.initial!==void 0&&(t.initial=r.props.initial),t}const e={};for(let t=0;t<gH;t++){const n=W2[t],i=r.props[n];(bh(i)||i===!1)&&(e[n]=i)}return e}const xH=[...H2].reverse(),yH=H2.length;function vH(r){return e=>Promise.all(e.map(({animation:t,options:n})=>mH(r,t,n)))}function bH(r){let e=vH(r),t=CA(),n=!0;const i=d=>(h,p)=>{const m=_h(r,p,d==="exit"?r.presenceContext?.custom:void 0);if(m){const{transition:x,transitionEnd:v,..._}=m;h={...h,..._,...v}}return h};function s(d){e=d(r)}function a(d){const{props:h}=r,p=h6(r.parent)||{},m=[],x=new Set;let v={},_=1/0;for(let E=0;E<yH;E++){const j=xH[E],P=t[j],V=h[j]!==void 0?h[j]:p[j],L=bh(V),K=j===d?P.isActive:null;K===!1&&(_=E);let H=V===p[j]&&V!==h[j]&&L;if(H&&n&&r.manuallyAnimateOnMount&&(H=!1),P.protectedKeys={...v},!P.isActive&&K===null||!V&&!P.prevProp||Xg(V)||typeof V=="boolean")continue;const S=wH(P.prevProp,V);let N=S||j===d&&P.isActive&&!H&&L||E>_&&L,I=!1;const R=Array.isArray(V)?V:[V];let M=R.reduce(i(j),{});K===!1&&(M={});const{prevResolvedValues:D={}}=P,F={...D,...M},he=De=>{N=!0,x.has(De)&&(I=!0,x.delete(De)),P.needsAnimating[De]=!0;const we=r.getValue(De);we&&(we.liveStyle=!1)};for(const De in F){const we=M[De],_e=D[De];if(v.hasOwnProperty(De))continue;let Ne=!1;T1(we)&&T1(_e)?Ne=!d6(we,_e):Ne=we!==_e,Ne?we!=null?he(De):x.add(De):we!==void 0&&x.has(De)?he(De):P.protectedKeys[De]=!0}P.prevProp=V,P.prevResolvedValues=M,P.isActive&&(v={...v,...M}),n&&r.blockInitialAnimation&&(N=!1),N&&(!(H&&S)||I)&&m.push(...R.map(De=>({animation:De,options:{type:j}})))}if(x.size){const E={};if(typeof h.initial!="boolean"){const j=_h(r,Array.isArray(h.initial)?h.initial[0]:h.initial);j&&j.transition&&(E.transition=j.transition)}x.forEach(j=>{const P=r.getBaseTarget(j),V=r.getValue(j);V&&(V.liveStyle=!0),E[j]=P??null}),m.push({animation:E})}let w=!!m.length;return n&&(h.initial===!1||h.initial===h.animate)&&!r.manuallyAnimateOnMount&&(w=!1),n=!1,w?e(m):Promise.resolve()}function c(d,h){if(t[d].isActive===h)return Promise.resolve();r.variantChildren?.forEach(m=>m.animationState?.setActive(d,h)),t[d].isActive=h;const p=a(d);for(const m in t)t[m].protectedKeys={};return p}return{animateChanges:a,setActive:c,setAnimateFunction:s,getState:()=>t,reset:()=>{t=CA(),n=!0}}}function wH(r,e){return typeof e=="string"?e!==r:Array.isArray(e)?!d6(e,r):!1}function Vl(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function CA(){return{animate:Vl(!0),whileInView:Vl(),whileHover:Vl(),whileTap:Vl(),whileDrag:Vl(),whileFocus:Vl(),exit:Vl()}}class yl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class _H extends yl{constructor(e){super(e),e.animationState||(e.animationState=bH(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Xg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let EH=0;class TH extends yl{constructor(){super(...arguments),this.id=EH++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const AH={animation:{Feature:_H},exit:{Feature:TH}};function Eh(r,e,t,n={passive:!0}){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t)}function cf(r){return{point:{x:r.pageX,y:r.pageY}}}const NH=r=>e=>U2(e)&&r(e,cf(e));function z0(r,e,t,n){return Eh(r,e,NH(t),n)}function f6({top:r,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:r,max:n}}}function kH({x:r,y:e}){return{top:e.min,right:r.max,bottom:e.max,left:r.min}}function SH(r,e){if(!e)return r;const t=e({x:r.left,y:r.top}),n=e({x:r.right,y:r.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}const p6=1e-4,CH=1-p6,IH=1+p6,m6=.01,PH=0-m6,RH=0+m6;function ui(r){return r.max-r.min}function jH(r,e,t){return Math.abs(r-e)<=t}function IA(r,e,t,n=.5){r.origin=n,r.originPoint=Hr(e.min,e.max,r.origin),r.scale=ui(t)/ui(e),r.translate=Hr(t.min,t.max,r.origin)-r.originPoint,(r.scale>=CH&&r.scale<=IH||isNaN(r.scale))&&(r.scale=1),(r.translate>=PH&&r.translate<=RH||isNaN(r.translate))&&(r.translate=0)}function H0(r,e,t,n){IA(r.x,e.x,t.x,n?n.originX:void 0),IA(r.y,e.y,t.y,n?n.originY:void 0)}function PA(r,e,t){r.min=t.min+e.min,r.max=r.min+ui(e)}function DH(r,e,t){PA(r.x,e.x,t.x),PA(r.y,e.y,t.y)}function RA(r,e,t){r.min=e.min-t.min,r.max=r.min+ui(e)}function W0(r,e,t){RA(r.x,e.x,t.x),RA(r.y,e.y,t.y)}const jA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vu=()=>({x:jA(),y:jA()}),DA=()=>({min:0,max:0}),Zr=()=>({x:DA(),y:DA()});function ds(r){return[r("x"),r("y")]}function hv(r){return r===void 0||r===1}function k1({scale:r,scaleX:e,scaleY:t}){return!hv(r)||!hv(e)||!hv(t)}function zl(r){return k1(r)||g6(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function g6(r){return FA(r.x)||FA(r.y)}function FA(r){return r&&r!=="0%"}function Ym(r,e,t){const n=r-t,i=e*n;return t+i}function OA(r,e,t,n,i){return i!==void 0&&(r=Ym(r,i,n)),Ym(r,t,n)+e}function S1(r,e=0,t=1,n,i){r.min=OA(r.min,e,t,n,i),r.max=OA(r.max,e,t,n,i)}function x6(r,{x:e,y:t}){S1(r.x,e.translate,e.scale,e.originPoint),S1(r.y,t.translate,t.scale,t.originPoint)}const LA=.999999999999,MA=1.0000000000001;function FH(r,e,t,n=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let c=0;c<i;c++){s=t[c],a=s.projectionDelta;const{visualElement:d}=s.options;d&&d.props.style&&d.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Bu(r,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,x6(r,a)),n&&zl(s.latestValues)&&Bu(r,s.latestValues))}e.x<MA&&e.x>LA&&(e.x=1),e.y<MA&&e.y>LA&&(e.y=1)}function $u(r,e){r.min=r.min+e,r.max=r.max+e}function VA(r,e,t,n,i=.5){const s=Hr(r.min,r.max,i);S1(r,e,t,s,n)}function Bu(r,e){VA(r.x,e.x,e.scaleX,e.scale,e.originX),VA(r.y,e.y,e.scaleY,e.scale,e.originY)}function y6(r,e){return f6(SH(r.getBoundingClientRect(),e))}function OH(r,e,t){const n=y6(r,t),{scroll:i}=e;return i&&($u(n.x,i.offset.x),$u(n.y,i.offset.y)),n}const v6=({current:r})=>r?r.ownerDocument.defaultView:null,$A=(r,e)=>Math.abs(r-e);function LH(r,e){const t=$A(r.x,e.x),n=$A(r.y,e.y);return Math.sqrt(t**2+n**2)}class b6{constructor(e,t,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=pv(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,v=LH(m.offset,{x:0,y:0})>=3;if(!x&&!v)return;const{point:_}=m,{timestamp:w}=jn;this.history.push({..._,timestamp:w});const{onStart:E,onMove:j}=this.handlers;x||(E&&E(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,m)},this.handlePointerMove=(m,x)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=fv(x,this.transformPagePoint),Wr.update(this.updatePoint,!0)},this.handlePointerUp=(m,x)=>{this.end();const{onEnd:v,onSessionEnd:_,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=pv(m.type==="pointercancel"?this.lastMoveEventInfo:fv(x,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,E),_&&_(m,E)},!U2(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.contextWindow=i||window;const a=cf(e),c=fv(a,this.transformPagePoint),{point:d}=c,{timestamp:h}=jn;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=t;p&&p(e,pv(c,this.history)),this.removeListeners=af(z0(this.contextWindow,"pointermove",this.handlePointerMove),z0(this.contextWindow,"pointerup",this.handlePointerUp),z0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ll(this.updatePoint)}}function fv(r,e){return e?{point:e(r.point)}:r}function BA(r,e){return{x:r.x-e.x,y:r.y-e.y}}function pv({point:r},e){return{point:r,delta:BA(r,w6(e)),offset:BA(r,MH(e)),velocity:VH(e,.1)}}function MH(r){return r[0]}function w6(r){return r[r.length-1]}function VH(r,e){if(r.length<2)return{x:0,y:0};let t=r.length-1,n=null;const i=w6(r);for(;t>=0&&(n=r[t],!(i.timestamp-n.timestamp>ha(e)));)t--;if(!n)return{x:0,y:0};const s=fa(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function $H(r,{min:e,max:t},n){return e!==void 0&&r<e?r=n?Hr(e,r,n.min):Math.max(r,e):t!==void 0&&r>t&&(r=n?Hr(t,r,n.max):Math.min(r,t)),r}function UA(r,e,t){return{min:e!==void 0?r.min+e:void 0,max:t!==void 0?r.max+t-(r.max-r.min):void 0}}function BH(r,{top:e,left:t,bottom:n,right:i}){return{x:UA(r.x,t,i),y:UA(r.y,e,n)}}function zA(r,e){let t=e.min-r.min,n=e.max-r.max;return e.max-e.min<r.max-r.min&&([t,n]=[n,t]),{min:t,max:n}}function UH(r,e){return{x:zA(r.x,e.x),y:zA(r.y,e.y)}}function zH(r,e){let t=.5;const n=ui(r),i=ui(e);return i>n?t=xh(e.min,e.max-n,r.min):n>i&&(t=xh(r.min,r.max-i,e.min)),ro(0,1,t)}function HH(r,e){const t={};return e.min!==void 0&&(t.min=e.min-r.min),e.max!==void 0&&(t.max=e.max-r.min),t}const C1=.35;function WH(r=C1){return r===!1?r=0:r===!0&&(r=C1),{x:HA(r,"left","right"),y:HA(r,"top","bottom")}}function HA(r,e,t){return{min:WA(r,e),max:WA(r,t)}}function WA(r,e){return typeof r=="number"?r:r[e]||0}const qH=new WeakMap;class GH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Zr(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(cf(p).point)},s=(p,m)=>{const{drag:x,dragPropagation:v,onDragStart:_}=this.getProps();if(x&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=oz(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ds(E=>{let j=this.getAxisMotionValue(E).get()||0;if(pa.test(j)){const{projection:P}=this.visualElement;if(P&&P.layout){const V=P.layout.layoutBox[E];V&&(j=ui(V)*(parseFloat(j)/100))}}this.originPoint[E]=j}),_&&Wr.postRender(()=>_(p,m)),A1(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},a=(p,m)=>{const{dragPropagation:x,dragDirectionLock:v,onDirectionLock:_,onDrag:w}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:E}=m;if(v&&this.currentDirection===null){this.currentDirection=KH(E),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",m.point,E),this.updateAxis("y",m.point,E),this.visualElement.render(),w&&w(p,m)},c=(p,m)=>this.stop(p,m),d=()=>ds(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new b6(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:v6(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Wr.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!Op(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=$H(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Mu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=BH(n.layoutBox,e):this.constraints=!1,this.elastic=WH(t),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ds(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=HH(n.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Mu(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=OH(n,i.root,this.visualElement.getTransformPagePoint());let a=UH(i.layout.layoutBox,s);if(t){const c=t(kH(a));this.hasMutatedConstraints=!!c,c&&(a=f6(c))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},h=ds(p=>{if(!Op(p,t,this.currentDirection))return;let m=d&&d[p]||{};a&&(m={min:0,max:0});const x=i?200:1e6,v=i?40:1e7,_={type:"inertia",velocity:n?e[p]:0,bounceStiffness:x,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...m};return this.startAxisValueAnimation(p,_)});return Promise.all(h).then(c)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return A1(this.visualElement,e),n.start(J2(e,n,0,t,this.visualElement,!1))}stopAnimation(){ds(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ds(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){ds(t=>{const{drag:n}=this.getProps();if(!Op(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:c}=i.layout.layoutBox[t];s.set(e[t]-Hr(a,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Mu(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ds(a=>{const c=this.getAxisMotionValue(a);if(c&&this.constraints!==!1){const d=c.get();i[a]=zH({min:d,max:d},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ds(a=>{if(!Op(a,e,null))return;const c=this.getAxisMotionValue(a),{min:d,max:h}=this.constraints[a];c.set(Hr(d,h,i[a]))})}addListeners(){if(!this.visualElement.current)return;qH.set(this.visualElement,this);const e=this.visualElement.current,t=z0(e,"pointerdown",d=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();Mu(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Wr.read(n);const a=Eh(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(ds(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=d[p].translate,m.set(m.get()+d[p].translate))}),this.visualElement.render())}));return()=>{a(),t(),s(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=C1,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:c}}}function Op(r,e,t){return(e===!0||e===r)&&(t===null||t===r)}function KH(r,e=10){let t=null;return Math.abs(r.y)>e?t="y":Math.abs(r.x)>e&&(t="x"),t}class YH extends yl{constructor(e){super(e),this.removeGroupControls=ms,this.removeListeners=ms,this.controls=new GH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ms}unmount(){this.removeGroupControls(),this.removeListeners()}}const qA=r=>(e,t)=>{r&&Wr.postRender(()=>r(e,t))};class XH extends yl{constructor(){super(...arguments),this.removePointerDownListener=ms}onPointerDown(e){this.session=new b6(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:v6(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:qA(e),onStart:qA(t),onMove:n,onEnd:(s,a)=>{delete this.session,i&&Wr.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=z0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const dm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function GA(r,e){return e.max===e.min?0:r/(e.max-e.min)*100}const w0={correct:(r,e)=>{if(!e.target)return r;if(typeof r=="string")if(Rt.test(r))r=parseFloat(r);else return r;const t=GA(r,e.target.x),n=GA(r,e.target.y);return`${t}% ${n}%`}},QH={correct:(r,{treeScale:e,projectionDelta:t})=>{const n=r,i=cl.parse(r);if(i.length>5)return n;const s=cl.createTransformer(r),a=typeof i[0]!="number"?1:0,c=t.x.scale*e.x,d=t.y.scale*e.y;i[0+a]/=c,i[1+a]/=d;const h=Hr(c,d,.5);return typeof i[2+a]=="number"&&(i[2+a]/=h),typeof i[3+a]=="number"&&(i[3+a]/=h),s(i)}};class JH extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;Oz(ZH),s&&(t.group&&t.group.add(s),n&&n.register&&i&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),dm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:s}=this.props,{projection:a}=n;return a&&(a.isPresent=s,i||e.layoutDependency!==t||t===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Wr.postRender(()=>{const c=a.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),B2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function _6(r){const[e,t]=YC(),n=k.useContext(y2);return o.jsx(JH,{...r,layoutGroup:n,switchLayoutGroup:k.useContext(e6),isPresent:e,safeToRemove:t})}const ZH={borderRadius:{...w0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:w0,borderTopRightRadius:w0,borderBottomLeftRadius:w0,borderBottomRightRadius:w0,boxShadow:QH};function eW(r,e,t){const n=Qn(r)?r:hd(r);return n.start(J2("",n,e,t)),n.animation}const tW=(r,e)=>r.depth-e.depth;class rW{constructor(){this.children=[],this.isDirty=!1}add(e){w2(this.children,e),this.isDirty=!0}remove(e){_2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(tW),this.isDirty=!1,this.children.forEach(e)}}function nW(r,e){const t=Ei.now(),n=({timestamp:i})=>{const s=i-t;s>=e&&(ll(n),r(s-e))};return Wr.setup(n,!0),()=>ll(n)}const E6=["TopLeft","TopRight","BottomLeft","BottomRight"],iW=E6.length,KA=r=>typeof r=="string"?parseFloat(r):r,YA=r=>typeof r=="number"||Rt.test(r);function sW(r,e,t,n,i,s){i?(r.opacity=Hr(0,t.opacity??1,aW(n)),r.opacityExit=Hr(e.opacity??1,0,oW(n))):s&&(r.opacity=Hr(e.opacity??1,t.opacity??1,n));for(let a=0;a<iW;a++){const c=`border${E6[a]}Radius`;let d=XA(e,c),h=XA(t,c);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||YA(d)===YA(h)?(r[c]=Math.max(Hr(KA(d),KA(h),n),0),(pa.test(h)||pa.test(d))&&(r[c]+="%")):r[c]=h}(e.rotate||t.rotate)&&(r.rotate=Hr(e.rotate||0,t.rotate||0,n))}function XA(r,e){return r[e]!==void 0?r[e]:r.borderRadius}const aW=T6(0,.5,gC),oW=T6(.5,.95,ms);function T6(r,e,t){return n=>n<r?0:n>e?1:t(xh(r,e,n))}function QA(r,e){r.min=e.min,r.max=e.max}function cs(r,e){QA(r.x,e.x),QA(r.y,e.y)}function JA(r,e){r.translate=e.translate,r.scale=e.scale,r.originPoint=e.originPoint,r.origin=e.origin}function ZA(r,e,t,n,i){return r-=e,r=Ym(r,1/t,n),i!==void 0&&(r=Ym(r,1/i,n)),r}function lW(r,e=0,t=1,n=.5,i,s=r,a=r){if(pa.test(e)&&(e=parseFloat(e),e=Hr(a.min,a.max,e/100)-a.min),typeof e!="number")return;let c=Hr(s.min,s.max,n);r===s&&(c-=e),r.min=ZA(r.min,e,t,c,i),r.max=ZA(r.max,e,t,c,i)}function eN(r,e,[t,n,i],s,a){lW(r,e[t],e[n],e[i],e.scale,s,a)}const cW=["x","scaleX","originX"],uW=["y","scaleY","originY"];function tN(r,e,t,n){eN(r.x,e,cW,t?t.x:void 0,n?n.x:void 0),eN(r.y,e,uW,t?t.y:void 0,n?n.y:void 0)}function rN(r){return r.translate===0&&r.scale===1}function A6(r){return rN(r.x)&&rN(r.y)}function nN(r,e){return r.min===e.min&&r.max===e.max}function dW(r,e){return nN(r.x,e.x)&&nN(r.y,e.y)}function iN(r,e){return Math.round(r.min)===Math.round(e.min)&&Math.round(r.max)===Math.round(e.max)}function N6(r,e){return iN(r.x,e.x)&&iN(r.y,e.y)}function sN(r){return ui(r.x)/ui(r.y)}function aN(r,e){return r.translate===e.translate&&r.scale===e.scale&&r.originPoint===e.originPoint}class hW{constructor(){this.members=[]}add(e){w2(this.members,e),e.scheduleRender()}remove(e){if(_2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let n;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fW(r,e,t){let n="";const i=r.x.translate/e.x,s=r.y.translate/e.y,a=t?.z||0;if((i||s||a)&&(n=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:p,rotateX:m,rotateY:x,skewX:v,skewY:_}=t;h&&(n=`perspective(${h}px) ${n}`),p&&(n+=`rotate(${p}deg) `),m&&(n+=`rotateX(${m}deg) `),x&&(n+=`rotateY(${x}deg) `),v&&(n+=`skewX(${v}deg) `),_&&(n+=`skewY(${_}deg) `)}const c=r.x.scale*e.x,d=r.y.scale*e.y;return(c!==1||d!==1)&&(n+=`scale(${c}, ${d})`),n||"none"}const mv=["","X","Y","Z"],pW={visibility:"hidden"},mW=1e3;let gW=0;function gv(r,e,t,n){const{latestValues:i}=e;i[r]&&(t[r]=i[r],e.setStaticValue(r,0),n&&(n[r]=0))}function k6(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:e}=r.options;if(!e)return;const t=c6(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=r.options;window.MotionCancelOptimisedAnimation(t,"transform",Wr,!(i||s))}const{parent:n}=r;n&&!n.hasCheckedOptimisedAppear&&k6(n)}function S6({attachResizeListener:r,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(a={},c=e?.()){this.id=gW++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(vW),this.nodes.forEach(TW),this.nodes.forEach(AW),this.nodes.forEach(bW)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new rW)}addEventListener(a,c){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new A2),this.eventHandlers.get(a).add(c)}notifyListeners(a,...c){const d=this.eventHandlers.get(a);d&&d.notify(...c)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=KC(a)&&!fz(a),this.instance=a;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),r){let p;const m=()=>this.root.updateBlockedByResize=!1;r(a,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=nW(m,250),dm.hasAnimatedSinceResize&&(dm.hasAnimatedSinceResize=!1,this.nodes.forEach(lN))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:x,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||h.getDefaultTransition()||IW,{onLayoutAnimationStart:w,onLayoutAnimationComplete:E}=h.getProps(),j=!this.targetLayout||!N6(this.targetLayout,v),P=!m&&x;if(this.options.layoutRoot||this.resumeFrom||P||m&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,P);const V={...V2(_,"layout"),onPlay:w,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V)}else m||lN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ll(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(NW),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&k6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(oN);return}this.isUpdating||this.nodes.forEach(_W),this.isUpdating=!1,this.nodes.forEach(EW),this.nodes.forEach(xW),this.nodes.forEach(yW),this.clearAllSnapshots();const c=Ei.now();jn.delta=ro(0,1e3/60,c-jn.timestamp),jn.timestamp=c,jn.isProcessing=!0,av.update.process(jn),av.preRender.process(jn),av.render.process(jn),jn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,B2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(wW),this.sharedNodes.forEach(kW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Wr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Wr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ui(this.snapshot.measuredBox.x)&&!ui(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Zr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(c=!1),c&&this.instance){const d=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!A6(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;a&&this.instance&&(c||zl(this.latestValues)||p)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return a&&(d=this.removeTransform(d)),PW(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Zr();const c=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(RW))){const{scroll:h}=this.root;h&&($u(c.x,h.offset.x),$u(c.y,h.offset.y))}return c}removeElementScroll(a){const c=Zr();if(cs(c,a),this.scroll?.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:p,options:m}=h;h!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&cs(c,a),$u(c.x,p.offset.x),$u(c.y,p.offset.y))}return c}applyTransform(a,c=!1){const d=Zr();cs(d,a);for(let h=0;h<this.path.length;h++){const p=this.path[h];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Bu(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),zl(p.latestValues)&&Bu(d,p.latestValues)}return zl(this.latestValues)&&Bu(d,this.latestValues),d}removeTransform(a){const c=Zr();cs(c,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!zl(h.latestValues))continue;k1(h.latestValues)&&h.updateSnapshot();const p=Zr(),m=h.measurePageBox();cs(p,m),tN(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return zl(this.latestValues)&&tN(c,this.latestValues),c}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(a||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!(!this.layout||!(p||m))){if(this.resolvedRelativeTargetAt=jn.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Zr(),this.relativeTargetOrigin=Zr(),W0(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),cs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Zr(),this.targetWithTransforms=Zr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),DH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):cs(this.target,this.layout.layoutBox),x6(this.target,this.targetDelta)):cs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Zr(),this.relativeTargetOrigin=Zr(),W0(this.relativeTargetOrigin,this.target,x.target),cs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||k1(this.parent.latestValues)||g6(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const a=this.getLead(),c=!!this.resumingFrom||this!==a;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===jn.timestamp&&(d=!1),d)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;cs(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,x=this.treeScale.y;FH(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Zr());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(JA(this.prevProjectionDelta.x,this.projectionDelta.x),JA(this.prevProjectionDelta.y,this.projectionDelta.y)),H0(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==x||!aN(this.projectionDelta.x,this.prevProjectionDelta.x)||!aN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Vu(),this.projectionDelta=Vu(),this.projectionDeltaWithTransform=Vu()}setAnimationOrigin(a,c=!1){const d=this.snapshot,h=d?d.latestValues:{},p={...this.latestValues},m=Vu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const x=Zr(),v=d?d.source:void 0,_=this.layout?this.layout.source:void 0,w=v!==_,E=this.getStack(),j=!E||E.members.length<=1,P=!!(w&&!j&&this.options.crossfade===!0&&!this.path.some(CW));this.animationProgress=0;let V;this.mixTargetDelta=L=>{const K=L/1e3;cN(m.x,a.x,K),cN(m.y,a.y,K),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(W0(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SW(this.relativeTarget,this.relativeTargetOrigin,x,K),V&&dW(this.relativeTarget,V)&&(this.isProjectionDirty=!1),V||(V=Zr()),cs(V,this.relativeTarget)),w&&(this.animationValues=p,sW(p,h,this.latestValues,K,P,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(!1),this.resumingFrom?.currentAnimation?.stop(!1),this.pendingAnimation&&(ll(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Wr.update(()=>{dm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=hd(0)),this.currentAnimation=eW(this.motionValue,[0,1e3],{...a,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),a.onUpdate&&a.onUpdate(c)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mW),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:c,target:d,layout:h,latestValues:p}=a;if(!(!c||!d||!h)){if(this!==a&&this.layout&&h&&C6(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||Zr();const m=ui(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+m;const x=ui(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+x}cs(c,d),Bu(c,p),H0(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(a,c){this.sharedNodes.has(a)||this.sharedNodes.set(a,new hW),this.sharedNodes.get(a).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:c,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let c=!1;const{latestValues:d}=a;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const h={};d.z&&gv("z",a,h,this.animationValues);for(let p=0;p<mv.length;p++)gv(`rotate${mv[p]}`,a,h,this.animationValues),gv(`skew${mv[p]}`,a,h,this.animationValues);a.render();for(const p in h)a.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return pW;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=um(a?.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=um(a?.pointerEvents)||""),this.hasProjected&&!zl(this.latestValues)&&(v.transform=d?d({},""):"none",this.hasProjected=!1),v}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=fW(this.projectionDeltaWithTransform,this.treeScale,p),d&&(c.transform=d(p,c.transform));const{x:m,y:x}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${x.origin*100}% 0`,h.animationValues?c.opacity=h===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const v in wh){if(p[v]===void 0)continue;const{correct:_,applyTo:w,isCSSVariable:E}=wh[v],j=c.transform==="none"?p[v]:_(p[v],h);if(w){const P=w.length;for(let V=0;V<P;V++)c[w[V]]=j}else E?this.options.visualElement.renderState.vars[v]=j:c[v]=j}return this.options.layoutId&&(c.pointerEvents=h===this?um(a?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop(!1)),this.root.nodes.forEach(oN),this.root.sharedNodes.clear()}}}function xW(r){r.updateLayout()}function yW(r){const e=r.resumeFrom?.snapshot||r.snapshot;if(r.isLead()&&r.layout&&e&&r.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:n}=r.layout,{animationType:i}=r.options,s=e.source!==r.layout.source;i==="size"?ds(p=>{const m=s?e.measuredBox[p]:e.layoutBox[p],x=ui(m);m.min=t[p].min,m.max=m.min+x}):C6(i,e.layoutBox,t)&&ds(p=>{const m=s?e.measuredBox[p]:e.layoutBox[p],x=ui(t[p]);m.max=m.min+x,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[p].max=r.relativeTarget[p].min+x)});const a=Vu();H0(a,t,e.layoutBox);const c=Vu();s?H0(c,r.applyTransform(n,!0),e.measuredBox):H0(c,t,e.layoutBox);const d=!A6(a);let h=!1;if(!r.resumeFrom){const p=r.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:x}=p;if(m&&x){const v=Zr();W0(v,e.layoutBox,m.layoutBox);const _=Zr();W0(_,t,x.layoutBox),N6(v,_)||(h=!0),p.options.layoutRoot&&(r.relativeTarget=_,r.relativeTargetOrigin=v,r.relativeParent=p)}}}r.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:a,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(r.isLead()){const{onExitComplete:t}=r.options;t&&t()}r.options.transition=void 0}function vW(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function bW(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function wW(r){r.clearSnapshot()}function oN(r){r.clearMeasurements()}function _W(r){r.isLayoutDirty=!1}function EW(r){const{visualElement:e}=r.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),r.resetTransform()}function lN(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function TW(r){r.resolveTargetDelta()}function AW(r){r.calcProjection()}function NW(r){r.resetSkewAndRotation()}function kW(r){r.removeLeadSnapshot()}function cN(r,e,t){r.translate=Hr(e.translate,0,t),r.scale=Hr(e.scale,1,t),r.origin=e.origin,r.originPoint=e.originPoint}function uN(r,e,t,n){r.min=Hr(e.min,t.min,n),r.max=Hr(e.max,t.max,n)}function SW(r,e,t,n){uN(r.x,e.x,t.x,n),uN(r.y,e.y,t.y,n)}function CW(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const IW={duration:.45,ease:[.4,0,.1,1]},dN=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),hN=dN("applewebkit/")&&!dN("chrome/")?Math.round:ms;function fN(r){r.min=hN(r.min),r.max=hN(r.max)}function PW(r){fN(r.x),fN(r.y)}function C6(r,e,t){return r==="position"||r==="preserve-aspect"&&!jH(sN(e),sN(t),.2)}function RW(r){return r!==r.root&&r.scroll?.wasRoot}const jW=S6({attachResizeListener:(r,e)=>Eh(r,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xv={current:void 0},I6=S6({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!xv.current){const r=new jW({});r.mount(window),r.setOptions({layoutScroll:!0}),xv.current=r}return xv.current},resetTransform:(r,e)=>{r.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),DW={pan:{Feature:XH},drag:{Feature:YH,ProjectionNode:I6,MeasureLayout:_6}};function pN(r,e,t){const{props:n}=r;r.animationState&&n.whileHover&&r.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=n[i];s&&Wr.postRender(()=>s(e,cf(e)))}class FW extends yl{mount(){const{current:e}=this.node;e&&(this.unmount=lz(e,(t,n)=>(pN(this.node,n,"Start"),i=>pN(this.node,i,"End"))))}unmount(){}}class OW extends yl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=af(Eh(this.node.current,"focus",()=>this.onFocus()),Eh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function mN(r,e,t){const{props:n}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&n.whileTap&&r.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=n[i];s&&Wr.postRender(()=>s(e,cf(e)))}class LW extends yl{mount(){const{current:e}=this.node;e&&(this.unmount=hz(e,(t,n)=>(mN(this.node,n,"Start"),(i,{success:s})=>mN(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const I1=new WeakMap,yv=new WeakMap,MW=r=>{const e=I1.get(r.target);e&&e(r)},VW=r=>{r.forEach(MW)};function $W({root:r,...e}){const t=r||document;yv.has(t)||yv.set(t,{});const n=yv.get(t),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(VW,{root:r,...e})),n[i]}function BW(r,e,t){const n=$W(e);return I1.set(r,t),n.observe(r),()=>{I1.delete(r),n.unobserve(r)}}const UW={some:0,all:1};class zW extends yl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:UW[i]},c=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),x=h?p:m;x&&x(d)};return BW(this.node.current,a,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(HW(e,t))&&this.startObserver()}unmount(){}}function HW({viewport:r={}},{viewport:e={}}={}){return t=>r[t]!==e[t]}const WW={inView:{Feature:zW},tap:{Feature:LW},focus:{Feature:OW},hover:{Feature:FW}},qW={layout:{ProjectionNode:I6,MeasureLayout:_6}},P1={current:null},P6={current:!1};function GW(){if(P6.current=!0,!!b2)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),e=()=>P1.current=r.matches;r.addListener(e),e()}else P1.current=!1}const KW=new WeakMap;function YW(r,e,t){for(const n in e){const i=e[n],s=t[n];if(Qn(i))r.addValue(n,i);else if(Qn(s))r.addValue(n,hd(i,{owner:r}));else if(s!==i)if(r.hasValue(n)){const a=r.getValue(n);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=r.getStaticValue(n);r.addValue(n,hd(a!==void 0?a:i,{owner:r}))}}for(const n in t)e[n]===void 0&&r.removeValue(n);return e}const gN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class XW{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=L2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Ei.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Wr.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=a;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!s,this.isControllingVariants=Qg(t),this.isVariantNode=JC(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in m){const v=m[x];d[x]!==void 0&&Qn(v)&&v.set(d[x],!1)}}mount(e){this.current=e,KW.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),P6.current||GW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:P1.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ll(this.notifyUpdate),ll(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Pd.has(e);n&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Wr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in fd){const t=fd[e];if(!t)continue;const{isEnabled:n,Feature:i}=t;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Zr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<gN.length;n++){const i=gN[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=YW(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=hd(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(aC(n)||lC(n))?n=parseFloat(n):!mz(n)&&cl.test(t)&&(n=zC(e,t)),this.setBaseTarget(e,Qn(n)?n.get():n)),Qn(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if(typeof t=="string"||typeof t=="object"){const s=X2(this.props,t,this.presenceContext?.custom);s&&(n=s[e])}if(t&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Qn(i)?i:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new A2),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class R6 extends XW{constructor(){super(...arguments),this.KeyframeResolver=nz}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Qn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function j6(r,{style:e,vars:t},n,i){Object.assign(r.style,e,i&&i.getProjectionStyles(n));for(const s in t)r.style.setProperty(s,t[s])}function QW(r){return window.getComputedStyle(r)}class JW extends R6{constructor(){super(...arguments),this.type="html",this.renderInstance=j6}readValueFromInstance(e,t){if(Pd.has(t))return this.projection?.isProjecting?y1(t):_U(e,t);{const n=QW(e),i=(S2(t)?n.getPropertyValue(t):n[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return y6(e,t)}build(e,t,n){G2(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return Q2(e,t,n)}}const D6=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ZW(r,e,t,n){j6(r,e,void 0,n);for(const i in e.attrs)r.setAttribute(D6.has(i)?i:q2(i),e.attrs[i])}class eq extends R6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Zr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Pd.has(t)){const n=UC(t);return n&&n.default||0}return t=D6.has(t)?t:q2(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return l6(e,t,n)}build(e,t,n){i6(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,i){ZW(e,t,n,i)}mount(e){this.isSVGTag=a6(e.tagName),super.mount(e)}}const tq=(r,e)=>Y2(r)?new eq(e):new JW(e,{allowProjection:r!==k.Fragment}),rq=Zz({...AH,...WW,...DW,...qW},tq),re=Tz(rq),xN=(r,e,t,n)=>{r.style.transition=`${e} ${t}ms ${n}`},Va=(r,e,t)=>Math.min(Math.max(r,e),t);class nq{constructor(e,t){this.glareAngle=0,this.glareOpacity=0,this.calculateGlareSize=a=>{const{width:c,height:d}=a,h=Math.sqrt(c**2+d**2);return{width:h,height:h}},this.setSize=a=>{const c=this.calculateGlareSize(a);this.glareEl.style.width=`${c.width}px`,this.glareEl.style.height=`${c.height}px`},this.update=(a,c,d,h)=>{this.updateAngle(a,c.glareReverse),this.updateOpacity(a,c,d,h)},this.updateAngle=(a,c)=>{const{xPercentage:d,yPercentage:h}=a,p=180/Math.PI,m=d?Math.atan2(h,-d)*p:0;this.glareAngle=m-(c?180:0)},this.updateOpacity=(a,c,d,h)=>{const{xPercentage:p,yPercentage:m}=a,{glarePosition:x,glareReverse:v,glareMaxOpacity:_}=c,w=d?-1:1,E=h?-1:1,j=v?-1:1;let P=0;switch(x){case"top":P=-p*w*j;break;case"right":P=m*E*j;break;case"bottom":case void 0:P=p*w*j;break;case"left":P=-m*E*j;break;case"all":P=Math.hypot(p,m)}const V=Va(P,0,100);this.glareOpacity=V*_/100},this.render=a=>{const{glareColor:c}=a;this.glareEl.style.transform=`rotate(${this.glareAngle}deg) translate(-50%, -50%)`,this.glareEl.style.opacity=this.glareOpacity.toString(),this.glareEl.style.background=`linear-gradient(0deg, rgba(255,255,255,0) 0%, ${c} 100%)`},this.glareWrapperEl=document.createElement("div"),this.glareEl=document.createElement("div"),this.glareWrapperEl.appendChild(this.glareEl),this.glareWrapperEl.className="glare-wrapper",this.glareEl.className="glare";const n={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden",borderRadius:t,WebkitMaskImage:"-webkit-radial-gradient(white, black)",pointerEvents:"none"},i=this.calculateGlareSize(e),s={position:"absolute",top:"50%",left:"50%",transformOrigin:"0% 0%",pointerEvents:"none",width:`${i.width}px`,height:`${i.height}px`};Object.assign(this.glareWrapperEl.style,n),Object.assign(this.glareEl.style,s)}}class iq{constructor(){this.tiltAngleX=0,this.tiltAngleY=0,this.tiltAngleXPercentage=0,this.tiltAngleYPercentage=0,this.update=(e,t)=>{this.updateTilt(e,t),this.updateTiltManualInput(e,t),this.updateTiltReverse(t),this.updateTiltLimits(t)},this.updateTilt=(e,t)=>{const{xPercentage:n,yPercentage:i}=e,{tiltMaxAngleX:s,tiltMaxAngleY:a}=t;this.tiltAngleX=n*s/100,this.tiltAngleY=i*a/100*-1},this.updateTiltManualInput=(e,t)=>{const{tiltAngleXManual:n,tiltAngleYManual:i,tiltMaxAngleX:s,tiltMaxAngleY:a}=t;(n!==null||i!==null)&&(this.tiltAngleX=n!==null?n:0,this.tiltAngleY=i!==null?i:0,e.xPercentage=100*this.tiltAngleX/s,e.yPercentage=100*this.tiltAngleY/a)},this.updateTiltReverse=e=>{const t=e.tiltReverse?-1:1;this.tiltAngleX=t*this.tiltAngleX,this.tiltAngleY=t*this.tiltAngleY},this.updateTiltLimits=e=>{const{tiltAxis:t}=e;this.tiltAngleX=Va(this.tiltAngleX,-90,90),this.tiltAngleY=Va(this.tiltAngleY,-90,90),t&&(this.tiltAngleX=t==="x"?this.tiltAngleX:0,this.tiltAngleY=t==="y"?this.tiltAngleY:0)},this.updateTiltAnglesPercentage=e=>{const{tiltMaxAngleX:t,tiltMaxAngleY:n}=e;this.tiltAngleXPercentage=this.tiltAngleX/t*100,this.tiltAngleYPercentage=this.tiltAngleY/n*100},this.render=e=>{e.style.transform+=`rotateX(${this.tiltAngleX}deg) rotateY(${this.tiltAngleY}deg) `}}}const sq={scale:1,perspective:1e3,flipVertically:!1,flipHorizontally:!1,reset:!0,transitionEasing:"cubic-bezier(.03,.98,.52,.99)",transitionSpeed:400,trackOnWindow:!1,gyroscope:!1,tiltEnable:!0,tiltReverse:!1,tiltAngleXInitial:0,tiltAngleYInitial:0,tiltMaxAngleX:20,tiltMaxAngleY:20,tiltAxis:void 0,tiltAngleXManual:null,tiltAngleYManual:null,glareEnable:!1,glareMaxOpacity:.7,glareColor:"#ffffff",glarePosition:"bottom",glareReverse:!1,glareBorderRadius:"0"};class F6 extends k.PureComponent{constructor(){super(...arguments),this.wrapperEl={node:null,size:{width:0,height:0,left:0,top:0},clientPosition:{x:null,y:null,xPercentage:0,yPercentage:0},updateAnimationId:null,scale:1},this.tilt=null,this.glare=null,this.addDeviceOrientationEventListener=async()=>{if(!window.DeviceOrientationEvent)return;const e=DeviceOrientationEvent.requestPermission;typeof e=="function"?await e()==="granted"&&window.addEventListener("deviceorientation",this.onMove):window.addEventListener("deviceorientation",this.onMove)},this.setSize=()=>{this.setWrapperElSize(),this.glare&&this.glare.setSize(this.wrapperEl.size)},this.mainLoop=e=>{this.wrapperEl.updateAnimationId!==null&&cancelAnimationFrame(this.wrapperEl.updateAnimationId),this.processInput(e),this.update(e.type),this.wrapperEl.updateAnimationId=requestAnimationFrame(this.renderFrame)},this.onEnter=e=>{const{onEnter:t}=this.props;this.setSize(),this.wrapperEl.node.style.willChange="transform",this.setTransitions(),t&&t({event:e})},this.onMove=e=>{this.mainLoop(e),this.emitOnMove(e)},this.onLeave=e=>{const{onLeave:t}=this.props;if(this.setTransitions(),t&&t({event:e}),this.props.reset){const n=new CustomEvent("autoreset");this.onMove(n)}},this.processInput=e=>{const{scale:t}=this.props;switch(e.type){case"mousemove":this.wrapperEl.clientPosition.x=e.pageX,this.wrapperEl.clientPosition.y=e.pageY,this.wrapperEl.scale=t;break;case"touchmove":this.wrapperEl.clientPosition.x=e.touches[0].pageX,this.wrapperEl.clientPosition.y=e.touches[0].pageY,this.wrapperEl.scale=t;break;case"deviceorientation":this.processInputDeviceOrientation(e),this.wrapperEl.scale=t;break;case"autoreset":{const{tiltAngleXInitial:n,tiltAngleYInitial:i,tiltMaxAngleX:s,tiltMaxAngleY:a}=this.props,c=i/a*100;this.wrapperEl.clientPosition.xPercentage=Va(n/s*100,-100,100),this.wrapperEl.clientPosition.yPercentage=Va(c,-100,100),this.wrapperEl.scale=1;break}}},this.processInputDeviceOrientation=e=>{if(!e.gamma||!e.beta||!this.props.gyroscope)return;const{tiltMaxAngleX:t,tiltMaxAngleY:n}=this.props,i=e.gamma;this.wrapperEl.clientPosition.xPercentage=e.beta/t*100,this.wrapperEl.clientPosition.yPercentage=i/n*100,this.wrapperEl.clientPosition.xPercentage=Va(this.wrapperEl.clientPosition.xPercentage,-100,100),this.wrapperEl.clientPosition.yPercentage=Va(this.wrapperEl.clientPosition.yPercentage,-100,100)},this.update=e=>{const{tiltEnable:t,flipVertically:n,flipHorizontally:i}=this.props;e!=="autoreset"&&e!=="deviceorientation"&&e!=="propChange"&&this.updateClientInput(),t&&this.tilt.update(this.wrapperEl.clientPosition,this.props),this.updateFlip(),this.tilt.updateTiltAnglesPercentage(this.props),this.glare&&this.glare.update(this.wrapperEl.clientPosition,this.props,n,i)},this.updateClientInput=()=>{const{trackOnWindow:e}=this.props;let t,n;if(e){const{x:i,y:s}=this.wrapperEl.clientPosition;t=s/window.innerHeight*200-100,n=i/window.innerWidth*200-100}else{const{size:{width:i,height:s,left:a,top:c},clientPosition:{x:d,y:h}}=this.wrapperEl;t=(h-c)/s*200-100,n=(d-a)/i*200-100}this.wrapperEl.clientPosition.xPercentage=Va(t,-100,100),this.wrapperEl.clientPosition.yPercentage=Va(n,-100,100)},this.updateFlip=()=>{const{flipVertically:e,flipHorizontally:t}=this.props;e&&(this.tilt.tiltAngleX+=180,this.tilt.tiltAngleY*=-1),t&&(this.tilt.tiltAngleY+=180)},this.renderFrame=()=>{this.resetWrapperElTransform(),this.renderPerspective(),this.tilt.render(this.wrapperEl.node),this.renderScale(),this.glare&&this.glare.render(this.props)}}componentDidMount(){if(this.tilt=new iq,this.initGlare(),this.setSize(),this.addEventListeners(),typeof CustomEvent>"u")return;const e=new CustomEvent("autoreset");this.mainLoop(e);const t=new CustomEvent("initial");this.emitOnMove(t)}componentWillUnmount(){this.wrapperEl.updateAnimationId!==null&&cancelAnimationFrame(this.wrapperEl.updateAnimationId),this.removeEventListeners()}componentDidUpdate(){const e=new CustomEvent("propChange");this.mainLoop(e),this.emitOnMove(e)}addEventListeners(){const{trackOnWindow:e,gyroscope:t}=this.props;window.addEventListener("resize",this.setSize),e&&(window.addEventListener("mouseenter",this.onEnter),window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseout",this.onLeave),window.addEventListener("touchstart",this.onEnter),window.addEventListener("touchmove",this.onMove),window.addEventListener("touchend",this.onLeave)),t&&this.addDeviceOrientationEventListener()}removeEventListeners(){const{trackOnWindow:e,gyroscope:t}=this.props;window.removeEventListener("resize",this.setSize),e&&(window.removeEventListener("mouseenter",this.onEnter),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseout",this.onLeave),window.removeEventListener("touchstart",this.onEnter),window.removeEventListener("touchmove",this.onMove),window.removeEventListener("touchend",this.onLeave)),t&&window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",this.onMove)}setWrapperElSize(){const e=this.wrapperEl.node.getBoundingClientRect();this.wrapperEl.size.width=this.wrapperEl.node.offsetWidth,this.wrapperEl.size.height=this.wrapperEl.node.offsetHeight,this.wrapperEl.size.left=e.left+window.scrollX,this.wrapperEl.size.top=e.top+window.scrollY}initGlare(){const{glareEnable:e,glareBorderRadius:t}=this.props;e&&(this.glare=new nq(this.wrapperEl.size,t),this.wrapperEl.node.appendChild(this.glare.glareWrapperEl))}emitOnMove(e){const{onMove:t}=this.props;if(!t)return;let n=0,i=0;this.glare&&(n=this.glare.glareAngle,i=this.glare.glareOpacity),t({tiltAngleX:this.tilt.tiltAngleX,tiltAngleY:this.tilt.tiltAngleY,tiltAngleXPercentage:this.tilt.tiltAngleXPercentage,tiltAngleYPercentage:this.tilt.tiltAngleYPercentage,glareAngle:n,glareOpacity:i,event:e})}resetWrapperElTransform(){this.wrapperEl.node.style.transform=""}renderPerspective(){const{perspective:e}=this.props;this.wrapperEl.node.style.transform+=`perspective(${e}px) `}renderScale(){const{scale:e}=this.wrapperEl;this.wrapperEl.node.style.transform+=`scale3d(${e},${e},${e})`}setTransitions(){const{transitionSpeed:e,transitionEasing:t}=this.props;xN(this.wrapperEl.node,"all",e,t),this.glare&&xN(this.glare.glareEl,"opacity",e,t)}render(){const{children:e,className:t,style:n}=this.props;return o.jsx("div",{ref:i=>{this.wrapperEl.node=i},onMouseEnter:this.onEnter,onMouseMove:this.onMove,onMouseLeave:this.onLeave,onTouchStart:this.onEnter,onTouchMove:this.onMove,onTouchEnd:this.onLeave,className:t,style:n,children:e})}}F6.defaultProps=sq;var vv={exports:{}},bv,yN;function aq(){if(yN)return bv;yN=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return bv=r,bv}var wv,vN;function oq(){if(vN)return wv;vN=1;var r=aq();function e(){}function t(){}return t.resetWarningCache=e,wv=function(){function n(a,c,d,h,p,m){if(m!==r){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}n.isRequired=n;function i(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},wv}var bN;function lq(){return bN||(bN=1,vv.exports=oq()()),vv.exports}var cq=lq();const q=$1(cq);var O6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},wN=$s.createContext&&$s.createContext(O6),uq=["attr","size","title"];function dq(r,e){if(r==null)return{};var t=hq(r,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function hq(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function Xm(){return Xm=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Xm.apply(this,arguments)}function _N(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Qm(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_N(Object(t),!0).forEach(function(n){fq(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):_N(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function fq(r,e,t){return e=pq(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function pq(r){var e=mq(r,"string");return typeof e=="symbol"?e:e+""}function mq(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function L6(r){return r&&r.map((e,t)=>$s.createElement(e.tag,Qm({key:t},e.attr),L6(e.child)))}function He(r){return e=>$s.createElement(gq,Xm({attr:Qm({},r.attr)},e),L6(r.child))}function gq(r){var e=t=>{var{attr:n,size:i,title:s}=r,a=dq(r,uq),c=i||t.size||"1em",d;return t.className&&(d=t.className),r.className&&(d=(d?d+" ":"")+r.className),$s.createElement("svg",Xm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,a,{className:d,style:Qm(Qm({color:r.color||t.color},t.style),r.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),s&&$s.createElement("title",null,s),r.children)};return wN!==void 0?$s.createElement(wN.Consumer,null,t=>e(t)):e(O6)}function Cc(r){return He({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(r)}function Ic(r){return He({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(r)}function Pc(r){return He({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(r)}function Jg(r){return He({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(r)}function xq(r){return He({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.034 8 8 119.033 8 256s111.034 248 248 248 248-111.034 248-248S392.967 8 256 8zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676zM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676z"},child:[]}]})(r)}function Zg(r){return He({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(r)}function xc(r){return He({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(r)}function yq(r){return He({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(r)}function vq(r){return He({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"},child:[]}]})(r)}function P0(r){return He({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(r)}function bq(r){return He({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(r)}function wq(r){return He({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(r)}function _q(r){return He({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(r)}function Eq(r){return He({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(r)}function Tq(r){return He({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(r)}function ma(r){return He({attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"},child:[]}]})(r)}function q0(r){return He({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(r)}function pd(r){return He({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(r)}function yc(r){return He({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(r)}function M6(r){return He({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(r)}function V6(r){return He({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(r)}function Z2(r){return He({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(r)}function ew(r){return He({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(r)}function Rc(r){return He({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(r)}function Aq(r){return He({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(r)}function Nq(r){return He({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"},child:[]}]})(r)}function kq(r){return He({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"},child:[]}]})(r)}function md(r){return He({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(r)}function R1(r){return He({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"},child:[]}]})(r)}function gd(r){return He({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(r)}function j1(r){return He({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(r)}function xd(r){return He({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(r)}function jc(r){return He({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(r)}function ti(r){return He({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(r)}function tw(r){return He({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(r)}function Sq(r){return He({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(r)}function Jm(r){return He({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(r)}function D1(r){return He({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(r)}function vc(r){return He({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(r)}function wa(r){return He({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(r)}function qte(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(r)}function Gi(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(r)}function Th(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(r)}function Gte(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(r)}function rw(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(r)}function Cq(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(r)}function yd(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(r)}function Iq(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(r)}function ex(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(r)}function tx(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(r)}function Rd(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(r)}function $6(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(r)}function EN(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"},child:[]},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"},child:[]},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"},child:[]}]})(r)}function Ki(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(r)}function rx(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(r)}function B6(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(r)}function Pq(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(r)}function Rq(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(r)}function U6(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(r)}function Kte(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"},child:[]},{tag:"line",attr:{x1:"7",y1:"2",x2:"7",y2:"22"},child:[]},{tag:"line",attr:{x1:"17",y1:"2",x2:"17",y2:"22"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"2",y1:"7",x2:"7",y2:"7"},child:[]},{tag:"line",attr:{x1:"2",y1:"17",x2:"7",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"17",x2:"22",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"7",x2:"22",y2:"7"},child:[]}]})(r)}function Yte(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(r)}function Ga(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(r)}function jq(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(r)}function z6(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(r)}function Xte(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(r)}function Dq(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"},child:[]}]})(r)}function H6(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},child:[]},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},child:[]}]})(r)}function Qte(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(r)}function Zm(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(r)}function eg(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(r)}function nw(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(r)}function Fq(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(r)}function Ur(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(r)}function Jte(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(r)}function Zte(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 18V5l12-2v13"},child:[]},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"16",r:"3"},child:[]}]})(r)}function Oq(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(r)}function ere(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 19l7-7 3 3-7 7-3-3z"},child:[]},{tag:"path",attr:{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"},child:[]},{tag:"path",attr:{d:"M2 2l7.586 7.586"},child:[]},{tag:"circle",attr:{cx:"11",cy:"11",r:"2"},child:[]}]})(r)}function Ah(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(r)}function tre(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polygon",attr:{points:"10 8 16 12 10 16 10 8"},child:[]}]})(r)}function TN(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(r)}function F1(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(r)}function W6(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"17 1 21 5 17 9"},child:[]},{tag:"path",attr:{d:"M3 11V9a4 4 0 0 1 4-4h14"},child:[]},{tag:"polyline",attr:{points:"7 23 3 19 7 15"},child:[]},{tag:"path",attr:{d:"M21 13v2a4 4 0 0 1-4 4H3"},child:[]}]})(r)}function ga(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(r)}function q6(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(r)}function bc(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(r)}function tg(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(r)}function G6(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"},child:[]},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"},child:[]}]})(r)}function rre(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(r)}function iw(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(r)}function AN(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(r)}function nre(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"15",rx:"2",ry:"2"},child:[]},{tag:"polyline",attr:{points:"17 2 12 7 7 2"},child:[]}]})(r)}function rg(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(r)}function ire(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(r)}function ki(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(r)}function vd(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(r)}function sre(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(r)}function Lq(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(r)}function Qi(r){return He({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(r)}const Dc="/assets/logo-DFdgxMoO.webp",Mq="/assets/brooklyn99-CRig83u8.webp",Vq="/assets/stranger-things-CgnouC0f.webp",$q="/assets/breaking-bad-bqUVAyrc.webp",Bq="/assets/naruto-DKDor6UB.webp",Uq="/assets/alice-BA5HPubx.webp",zq="/assets/netflix-OezU_Jrg.webp",Hq="/assets/spotify-Bkt61dvX.webp",Wq="/assets/disney-CwAAFq8J.webp",qq="/assets/max-DuvCHRsB.webp",Gq="/assets/prime-video-CjCvpr54.webp",Kq="/assets/vix-D-40sIBx.webp",Yq="/assets/Canva-C4zols_B.webp",Xq="/assets/ChatGPT-BrDd5yiZ.webp",Qq="/assets/crunchyroll-TwNYMG6Z.webp",Jq="/assets/redessociales-br9Cvt2I.webp",Zq="/assets/dgo-rWjlD8fS.webp",eG="/assets/ligamax-BCMYHRJx.webp",tG="data:image/webp;base64,UklGRiAMAABXRUJQVlA4WAoAAAAwAAAA+QAAdwAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADZBTFBITQQAAAFfoKBtJBS/BGaIiACMeeQ7aQe1bdvWts0jydyBxrx5vCVp66Mal8bMzHOWYy6MmbdiDrf6MqYyg75kBlnS/fP0vO/7CPx1i+j/BNB/bG6/09/oTK27YwDBhVOqkyAdOFPJjcA/NpV+hroyhdxYY3YK/QzNwJo+Ex3Uyqq90LtVqAPt2ZKaTwD4jsghvW/LqZsg7VsSoR6sMnJj8DMCbmJQLaPDUAa22dMwbGXS7fXsIriJCjNmB01mM1kCnCL8BM3ANhqZvKu10ONvs4sV6uBSo8gk0AqhDB4uUgfavkkbxrYI8GiBtuihZvCRWVUIFxdnaDBrcMisIeUXJzLYYzA2axk4RLTqswRArShtmNb0ErNZAaJ5AJcW5SOj1VodmK8WoRHwblEOGu3R+kjgXZktwJ6iDI1Q0/lXwJdpA7AKEprN6owF9shQAjgFic18nUQAQpFBx1u49dqcuBCsqDqQtGVCoKZaOIn07gqz0HtQsdB7UKAjcanqIw3/vGcTzskuBB84qRC+IoQv0JXwVQONKtHPucO7edgigYoiVD1GRB2uJhMBjgCcHBwUmeHaUFeIiKIsYq3Fjbd63n3HAVyagyWRwGZ+Un1L6XEGLgBLpRwDj+VgKIK7Uu5EdSkzzKALBGT0NOAXBRcR0a9QV5gB0xA5BLxrRgmCHIyF8LL3B9Q+sUtybgzMCoRADkIp/dVZuUcBNATGZdHMYEOv1+tFAAJbYFgWlQw0V1OxdscZBJSDwDHxPM8b5+hbq5PIvasYZHERaXUWocxNi+iw3KxiyNQk/OtJ6+4EuasS3S3XzOJWz/O8a4nn3Any5xBRJFbJwiFtbgvS/X4/zpFNRIfFLEXIVDMbAXuuIyIa5mKo0ZXyycDJLAGqlDeHiCgRekwV5aMNfEs5GugMhS4zoay6wGyelphaaotQQxWngjwsMwky2cI0Um2higppvwDI5COmlaKJjGXwbRHsLJ5mZplDInvI4LXMngZW6w2BWhYd5jGmK/KayerM2sAebsQMgBmmE4sQ4zOUSMyatDKjBLiJiNzfwPwEBBcSuZ8mkIlSATeUaGokqXp2IwAb7+vF4O4GgF39BBAKU3CYLRI1jQmAwM5uC3SJiCJoioyYGtOWsDUGAB6j7NxYsYv7WRHEMktMi6GJWUCadwOo5IC6CfPI05wbMnvOD2W2MLPcIbPXdOjT/g2kvcrzLL2O51lERM+cBHZfT67npai9CAQv2yT0NPMa97TZpVpFF2ozeziKjWplR3EKFjcwCawSmQiNmQrXNXmMSjQSGjB1jiKDepkk+FbkJ6al+Flvj1UibeBdkbuZZQo30rqESrQLrBZxk9RqBXV13qUyHQAtEQoN6IjKd8pkPgFqModTsxq0g/vGoZJc3NjrLQIILJmnUy0dunex3994PZXmBPwMCUcAqlplG3KBLTUPvEslPuIuIvF7X7TL7O2TAL4+n/7PKQBWUDgg3AUAANAiAJ0BKvoAeAA+bTKWR6QjIiElk6sYgA2JZG7hawDrjv/Rvyg8Nq0XVPyH9qStfz78Af0LmRjPeoPsN+a+4P3ef3b2Wfdp7gH6V/8f7c/gA9Q38l9AH88/x37Ae9h/nP1A9wHoAfyv/Bf/n2Qv77///cA/vHqAfsT6q3+6/Z3/3fIl+5H7ue5p/jf/5/0OwA/9vXb9AP4B+AH6Afn73+Fksuo22S2t8raJpulguWnrfPvQVHbfK2tTGs+AOXakyZX4d+B+GHpHdMPzj70OfehWu0nnZi5bXtOTJ3s0gB8vsHU+xZ3c0G0CXeMVZRexFwLYhpQfWs3wvg0Ng/6BEGH2nciy3WAEKKQ5u3jOJVOEll1CJKLI22S2t8ra3ySAAP7+ycAAaYzhBlbGo1tklY8O9pZCGu8C07+MN0xDrwQWEi8POvVlbad2sw3ZAI7+/rEZgwFEiJBzegXInbxZP+uyvAoJtyGnsMT/3NczjDaqajM+S+GCnRnnEMam+2xRnza9i8t9WLI/fU4LjXLNkfPIxwHH+6aUn511oE0Q5qek/9mUluTpSIyVnNPSIHRnIB0pV6Dx8HyXRkCWgNZ3DDAYXPBr0/ClWX3pVbO17lDjhS02x0cUoHf6wt//mYu4OTms3lEFtLr7IPEC0Wm31F/Xsoswh+yRpGQ1rZ6mOCuvwU1xHBn7J+TxZksHi57REFow4yojf9iEQWosAJhYKVr6DYTw7qHmw3EXdjaIQd5qtQ/MNHPlRTbCcTzVo89rAVtxwmvZ2PB409kX8eG71hghH5+rFXIpLkXVW3oNiAv2q6i0960OFWNOGmWVe82RdJSmvxspV6yhMnFCOHdzmWpC963juX3GU9/NNdXlSmQhgp3HHcFrmzTW8Y6Jk53uS+ih7Mrb9r3u43nSgumGAoOwRGWbqOVH/Sw3n+lw0POZnRxXlTIdCa/CJjXL/dTetI5PeS9oZP26ffTo6Mb3vCIDVwLHFDpNXiaQWvRtPbhhysze5gBCmrEWisOCXmyb72GHNxCX53DsRW2FxzZUypkoNKPfQLfbuvx4FLOZbL6ve/YtGf6A+OjWqcKwVamOUsBVeeuh0HjdPemygk5GKE4kPUJgL7wjsyO/F7MlE7EPc23qI9yNlGi0rZGL0kLGiRQZ41B+ftWc8OpjXi9n1kqEC8sLf4gzZQqduIoFO3BqXuC+9vzDzD1Uc5PAF+SxWVls7URZxBZBdO1LtnmlWcqS53V3XW8+82aLrjYLhahKzmya9OmDZJfYjDo3kTSpJbmuuXuP62iN+feYxvw/OEa52TdlfdABPn1N9Bzj2wL0nHe5LZJ/dGgOFlkVAe94yKvOt8JLHMzdRYUhlcji/n8ZF0i1YBcwWxmkGapImoDYOnlBMZH63AMFYhhRJiFZEDyvvB/hub9BtSjgS+6XLw6AfT2JrbMaYOhYthx8ZgLVm2rk9a9zFctqZMeLlbQpqlAZBbS6ZS2nwf6ygc5GcLZNkSgsjqupevcdywJV9XV//Pwu7A+dya12Zd0txxJmNmLvXnAvy+KCvhYyNIyVXpeRERddr0LMvLkSN7p1VegIuiyzypGT+e4OAZm/+18oVv7LFbwNgZIZIKH+nXzcCRtXkefpHpLh3wKjCKtW4iGsE/AM/ULebTkMcNUyD48HYjqIAz1Y44ZV+UCg2DA3PWm45tta/KgKIXwAjUpGEQR6WF2urYmstjsCzP3X0BYfn3oE7ayRmYG65TYgGY2Obpfs7FmGTgo9MZSYd+qb7O28WB8YNazEi2vyRqqKOCuvw2Fz5fYHMVDB1IW2S/o3a4uGsigYWTlZqLEtyCH6R61OQzrxgP8TEmyoE+gwLyuU4febYW1SP2dAxT7TsXWJvlRTbP+zXzPvynmfjwRzWIHcAWvJvM4jqNjH9anUwAMIfk0kj7Cw08l9qqv/+JiVYmSMNJX/gif3a3ePt85DS62Jmud7hPMqP82kaSNLI003n4sAAAAAAAAAAAAAAA==",rG="/assets/youtube-CyjXMWeA.webp",nG="/assets/deezer-A8B2Y9_p.webp",iG="/assets/tidal-DYYyAkwV.webp",sG="/assets/vpn-D3FZN68z.webp",aG="/assets/wintv-nyhMIfWe.webp",oG="/assets/applemusic-DIZM1VKJ.webp",lG="/assets/appletv-Di9nYvwP.webp",cG="/assets/iptv-qo_mgMvC.webp",uG="/assets/flujotv-FQulHY7R.webp",dG="/assets/vikirakuten-BedAzacT.webp",hG="/assets/pornhub-CNac7CBA.webp",fG="/assets/paramount-B9ERDaZl.webp",pG="data:image/webp;base64,UklGRuYPAABXRUJQVlA4WAoAAAAgAAAA/wAA/wAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADZWUDgg+A0AAFBFAJ0BKgABAAE+bTaXSKQjIiEjOPjwgA2JZW7hdqvoX8lrK3ZPyj9oGwv37chiF9rH8Tzd+oD88f533Bf0//0vUA/cD1Afsb+zPuq/5D9pvcp6AH9V/0fq4f732OfQA8rj9xPgy/sf/R/aL2pf/prNnl3sY/t35P+evij8V+4PK33IehP8V+xP33+5/ujyM9274AvyP+R/5D8x+EHs36AXtV9U/4Pgafvn9A9V/ql7AH8m/rf+g44T7d/y/YC/mf9w8/3/r/2HoP+pf+v7h388/tH/T7FnpHih6oZuwjRuNsPbMAdzqhm7CNG42w9swB3OqGbsI0bjbABOxEeKoE/LVpmGDnfalNoTi/WQcV5Grfcjlfu5zEM3YLk8JiPAuL/cy904GSTW0fDPOPy0VqYjp6o37zUOhBRxW75R3q7TmYlG42cNwGPUJElIRtkyLoNtK9soZysN+yoXJzgnL/AwgZu7XcU9vdeJszPZ4vDeh0y9rLy01FwQzO1CAqNS6JIWoTTvHTF5t/MC9a+ONKepUVbiNsNnB+p/BHvHEYXjEGWaLAan8trl3YPB7smWQEfyew9Ii3/LUJ74rIfLQZ7b3QHjGQfwPKLZWzf7K3SaNW5teFctBI3inUAqzAC3o8NAnOK/b8G0SoeWf6gQWBru1LVcSLBu0DoH1zAkJOp2bcDIegLiFjPb2uDPfBzDqhm7CNG42w9swB3OqGbsI0bjbD2zAHc6oZuwjRuNsPbMAdYAAP7/3DgAABcPO+e131bg4s0inDdzkYvu/5y2Uh20jMn8jbctbVockPPOs+JJym7IPgcARL0t3N0m3LU2M22rr6RPcFuvgjwXDtvd59cn3BauhXjj8rQv/28HVtEhzN9Rf/EIYcawBEblejKea66z2hjp41yao7dd8qQyThYv6++nAf9K5ZNmlI/3iyvgzbfe0Iqa7TsXE6/pgFJ/Os/u5Wn5keh7OkAnbgMoBVdIO0zyd0zAe6uGN/jQ85iQSppHMqs+rsZe+wF1H1/B8f66NNIcS4/FkGdTc6VRNeVgCDQ05Hzp/f+t/LbD1jLS8qifebYUFBn8/fXLGDufG7rfKnyazuT9C3W2w6963T5kuFNWHSdDVCPuigwC0nR/6du//mz+SUyQfLe2hHBZ2WKuUQ6Lmy10CyQs95GZO0uauHBKN+NI+5IOZ4Pi5acnFJ/6jlYJw5iY+UbRFo7X2yxJofXzA7kGfzOrsdoTLJxlKp1UWhEiPIFA+G3I/gYo34d/gQn9Kx0aIXx6OSmexDlixXIjCwozZ8nyfg8+bQOIC2TJnKRT8vfVvL7QxkqiPcycIVbXuH7Nl6iM1l/ej2Mmt7G6R1EyszNKwIPjTB76kInHbAJU0/fnK/N2X+GkKgApHNBFqXaoK3HPMwTaXcXw/35aSZUEr9v15rp3lYTdkHvGtQ7rm4KiwsdtFLCQFWDLAwN/QMpHtxX4xAzjhOu5mrcu7zI8kgHw8gPL7GwmaAxDO3ss72TAi79U3/tcwuP5yD9M0XPqiPMlVLERN6b7yewapaUmFf+J1xv2/15uj6SpFeV7L2ACXDi8kM4XhBOddBeTBV1rPHK2mYQsIZZJ0RYIWEdHeV1TOpRR0Co1iSoJcQdebvL1dV+CbPYpalm3hq4BIGRfucpBb19E0md/MJA+YJDfZ+arispiSEZ9UJZwTW+fwO4mAM1B077sqWv6Ej9GbriqGffxed7RO/JWLM3oUZD/fYpGQkqBwDUOf1nYH3EyXraF7o7iYyNK/aIMrn07OyDPAzlAb2oI3nOe/YcRrbG9LL6fFaFy8EsdBOGnXSsHDjz+PVcDtbVUUfynnxPTQenABQbjq9yJopfKIKLrVIRtH0DLrOyBgcAJiN0Xq0Ra/Thnz8bP3Zf+GJpA/K6t0TW5lDLK/7NQCk/wwAVMa2AJk0oXrxGRsapMUJ5jaYcVvPszlP8eSMBgUCJ7fTnJHzSyrNd/oYEpSEAC2YOr2kzMRFz2Q+fM13uy2J5xXcDj6a2U0lmaHdsTd+rdGm80Z6f9D7hirv3kkUGWf4og/5y8lfvJSm8NqnicsYSfy6wqMofN+bxS+x72YOvH7q4xnjncNXyYwnxGOIHuBavm2dKXzmcW9GixL57U2z8Lzw9XarCcagymoKKUFIKaCf+142alOj3gLuPxXuN3c+XDdCp8VbdPgYIydnu8PUUqmWwBVJjEAaCE2h7EMl/3KrwSkoj+L/uoCO74vCI0Dl81q5EgB0FTnaoqcE9hvrqUjeZAOjHMjQEyIbQviFzfPD2udQ3bVWo8xNvzJBAI5eDGEnVvlt2bl7EhAkAkBTYau0hDhwmD7KvBYwCFUZFBgpT3cn4o5OxHS0czqNxCL6T7vlUBdX7wNcU6HkFjWM/OOAJNj/nvHNIpnYVWAB548r+sU1+1D4EixHd4K/VeRTHL0uGor67ukMFrvEegFlDTmkWy8x+Sswyl4Oi1sclWRsWFf3ha0YOtBFhgr+lxNjbnktVIMK/1rQ9+c0+fvBGfKP/YHkkLBlXIJt33YkrG2W+9O9a62C3W3QAK6hXesVrWVcf0b6X8vNda+ukEl5cBwmBTcHLlQqX5dP1gG5fSE0h2bD35/T+r6AzVUyux1Z+sZHk6Co2XVQsR7S/yx5bjTCX24GmjmkyWQ/jgKVZl0RyX/xzIPROiBVJ126VThYOVFnVj9ggxHPiWwdUPKkFU+/LA9WuCt+NB6vjKTt/kxEBw9hs/6gSQ0zddnjuWxxa6JcAeZbYNpi0oCR1As+Phz7a5kCialvNJq7Pk7x/5SXb7UHbE9stfTCT5x4p+1nUwyCCAX8sv3xCrAUEnMIr4ojDTl6Mf9rB0J9VL4unYP59igiBrSxOcNzwjQrpabcO9QBT0NbschmRxwzoeSFxBuTXs9RIk9D/o6mLpQ7GqSCLrQ6KAC5O2ndCQBup9PGmRLb2uCf1m+rMoH27Zz1PPwht5pBEJluHgjGZg2y1a3gAg2h8D06Cb5E8oEUrbvoAYkWpa3fbInFsow34gnY/f4bFjFEJsGtF/aGEE3aPGKdc8hvTDznR3UtKvEO6yVR7JpwD0RN1wGDthXwUgVKMKQaE9sMHNwCACGFOvYObJzVAjCA7mSRc+E+jhTf7B5dpAXVX8tLu/rNdrd/IFM/gGWHoOpeHtdPHalfIsJVhT/annvtpNhHmAaSem3fwDlfHCkyE9wOMHbzeL0gNLMi0J1caphIGKzJx2UH8BgzMR66lUbWhYXF+wjuHhsN8wuGFqZf9QfYmlWhyeF/9FkcZs6BVDnv/o/buOhDL9QPPZn4Tax0VR2DVkTmKkOWe5LU4uP5FCX195oPCn7xNcKTfVfl8wDl9YBV0st/CHuUOyDLihsV8M6LyuFHr3V4JLjJ2+k/3UpVY7djF0EJjFzL6vRiX3IuF4Tzl9ytC9pLFCNIfyiKN0LPylGZrS2PJYvtsCzB9hhS0LnlZEi51cB0eOzIbTENRAJTJ3bC6ft5mnHpsotTepQ8PyMdFvq/Ez7mdUzsfXswyIWIjNfc8uWMhXwU2uvWOm4rlzWXB3YQWNp4x1Sclf9gDZFoOEpxR39eqLypWOXCZjsWirtL5qh0noFzxFZ7BYBNHQmdAFUaL910LcgY4sJ0VPmvnsmYzcNUVK5qxQcBNZ2pmbNBVdB6Oil6yxMUx9PU+GU/WlHjlSZpcQgWEHhIat7su9Raby7T78EsvXe1jUfnpuKrUcmjsYTdrSCSnHjmNOc8ULd68q6VM6UYfWg0mr8mYDBf4Sdf0c+DKIKpWJ9qq2Bsebyth4BkxMqVm/5cBeapdGXrQdF1UrV2jYbBSelJWMlkcb/E5eYfHO9kEAZJ7lBglN1S92sMyeYCS8ugozlnvN9hjIzSCMGcrOyqtioeuuI788iJb2OWWr3Qio9kCcmcmQvnpjAqxWB2qnqrKHTM6RR+MbacVGoCdaoY9MwSilBFT27NrxIfw6YO1Oy2RWWcvWQ0rmPdZdi5l79MPG9YCZr3C9E4O0Rb6rOnQkN4FOWZYgjqAqgyrKikhoMKx7LqxAl28Kc8rdkQg4qNfvLv77LkmbhMidyldkh7z7Ck1KgIru+Qg1/C8rQeXh4yChGWT3GzUQkL/plSyWvMQdaHpn4UsF7XUg1Lb4yXnfeTahfmlu80wtMcdto2EAYt6PHVNIJn/HGh0GfFbnhWhTMcEiydYzUrPQnhMwo2bcUOJV5AGflHRlQ3zYyCXKZrnUZfBqJXwGD/FUGab/R32QEO4VFp+c+UVcy5vNvEBRZOhLCOdYdHrHJbBOkrscKzoSjSfXIOnFhb/iYg1EqAG9WegT9Ct75tBi9Ybi6e1jwj/cGBZkAlCiy9Rfzf7mDSSO+jstemSVZ1IC0wd7jDMDuSBGPU+M0/IaUFXVNzdsKKPpJESYK6hrlftmxceERS0Iynj/KJyIzBkBDP3BSvlFH+KkpUVD0/uF7eqThFJLDCxIDjkz5EA1meCVrJgbM/9P2gfoFUSlkhnPJTa4x1VOrL0VYmAQ8kNH8w94CpRkxw53V/uaK4JKjHbUDbZhoWs/3vJET5GdCc7anASmgJvxeuTC36YFKYdFn0WOyKyjaIEvyh5fna6NyAuksxtlXejvoemfMhQJ323CJqMilt3zMFVd8w43xvGfQDBDBAy/qQUpFX3Vaa/73nlr7Sc+DbDSgx+9wP6tPs2V36zmvrGZrho88HAWqmVp57DH3MsVlY18hPZFJuA/LL+q7ZNXUmPgAAAAAAAAAAAAAA==",mG="/assets/capcut-BHzV_tZm.webp",gG="/assets/duolingo-BNs4g7oM.webp",xG="/assets/buscapersonas-CDaqQL09.webp",Au=[{src:Mq,title:"Brooklyn Nine-Nine",description:"Comedia policial hilarante"},{src:Vq,title:"Stranger Things",description:"Misterio y nostalgia ochentera"},{src:$q,title:"Breaking Bad",description:"Un descenso al mundo del crimen"},{src:Bq,title:"Naruto",description:"Aventuras ninja épicas"},{src:Uq,title:"Alice in Borderland",description:"Juego de supervivencia intenso"}],yG=[{name:"Netflix",logo:zq,route:"/netflix",color:"#E50914"},{name:"Spotify",logo:Hq,route:"/spotify",color:"#1DB954"},{name:"Disney+",logo:Wq,route:"/disney",color:"#113CCF"},{name:"Max",logo:qq,route:"/max",color:"#002BE7"},{name:"Prime Video",logo:Gq,route:"/primevideo",color:"#00A8E1"},{name:"Vix",logo:Kq,route:"/vix",color:"#FF2E63"},{name:"Canva",logo:Yq,route:"/canva",color:"#00C4B4"},{name:"ChatGPT",logo:Xq,route:"/chatgpt",color:"#10A37F"},{name:"Crunchyroll",logo:Qq,route:"/crunchyroll",color:"#F47521"},{name:"Redes Sociales",logo:Jq,route:"/redessociales",color:"#3B5998"},{name:"Dgo",logo:Zq,route:"/dgo",color:"#00A1D6"},{name:"Liga Max",logo:eG,route:"/ligamax",color:"#FFD700"},{name:"Movistar Play",logo:tG,route:"/movistarplay",color:"#005566"},{name:"Youtube",logo:rG,route:"/youtube",color:"#FF0000"},{name:"Deezer",logo:nG,route:"/deezer",color:"#FEAA2D"},{name:"Tidal",logo:iG,route:"/tidal",color:"#000000"},{name:"Vpn",logo:sG,route:"/vpn",color:"#4CAF50"},{name:"Win Tv",logo:aG,route:"/wintv",color:"#9C27B0"},{name:"Cine Planet",logo:oG,route:"/applemusic",color:"#FA57C1"},{name:"Apple Tv",logo:lG,route:"/appletv",color:"#000000"},{name:"Iptv",logo:cG,route:"/iptv",color:"#607D8B"},{name:"Flujo Tv",logo:uG,route:"/flujotv",color:"#FF5722"},{name:"Viki Rakuten",logo:dG,route:"/vikirakuten",color:"#D81B60"},{name:"Pornhub",logo:hG,route:"/pornhub",color:"#FF9000"},{name:"Paramount",logo:fG,route:"/paramount",color:"#0064D2"},{name:"Licencias",logo:pG,route:"/licencias",color:"#795548"},{name:"Cap cut",logo:mG,route:"/capcut",color:"#00C4B4"},{name:"Duolingo",logo:gG,route:"/duolingo",color:"#58CC02"},{name:"Busca Personas",logo:xG,route:"/buscapersonas",color:"#3F51B5"}],vG=(r,e=5e3)=>{const[t,n]=k.useState(0),[i,s]=k.useState(0),[a,c]=k.useState(!1);k.useEffect(()=>{if(a)return;const m=setInterval(()=>{s(v=>v>=100?0:v+100/(e/100))},100),x=setInterval(()=>{n(v=>(v+1)%r.length),s(0)},e);return()=>{clearInterval(m),clearInterval(x)}},[a,r.length,e]);const d=k.useCallback(m=>{n(m),s(0)},[]),h=k.useCallback(()=>{n(m=>(m-1+r.length)%r.length),s(0)},[r.length]),p=k.useCallback(()=>{n(m=>(m+1)%r.length),s(0)},[r.length]);return{currentIndex:t,progress:i,isPaused:a,setIsPaused:c,goToSlide:d,prevSlide:h,nextSlide:p}},K6=k.memo(({platform:r,theme:e})=>o.jsx(F6,{tiltMaxAngleX:8,tiltMaxAngleY:8,scale:1.03,transitionSpeed:300,children:o.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:`${e==="dark"?"bg-gray-900/30 border-gray-700/30":"bg-white/90 border-gray-200/30"} backdrop-blur-xl rounded-xl overflow-hidden shadow-md cursor-pointer hover:shadow-xl hover:border-blue-500/50 transition-all duration-300 relative`,children:o.jsxs(wi,{to:r.route,title:r.name,className:"block",children:[o.jsx("img",{src:r.logo,alt:r.name,className:`w-full h-24 sm:h-28 lg:h-32 object-contain p-4 ${e==="dark"?"bg-white/95":"bg-gray-50/95"} transition-transform duration-300 hover:scale-105`,loading:"lazy",width:"200",height:"100"}),o.jsx("div",{className:"p-3 text-center",style:{background:`linear-gradient(180deg, ${r.color}20, ${r.color}50)`},children:o.jsx("h3",{className:`font-semibold text-sm sm:text-base ${e==="dark"?"text-gray-100":"text-gray-900"} tracking-tight`,children:r.name})})]})})}));K6.propTypes={platform:q.shape({name:q.string.isRequired,logo:q.string.isRequired,route:q.string.isRequired,color:q.string.isRequired}).isRequired,theme:q.string.isRequired};const Y6=k.memo(({show:r,onClose:e,notifications:t,theme:n})=>{const i=n==="dark",s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},a=c=>c.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return o.jsx(Vt,{children:r&&o.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:e,role:"dialog","aria-labelledby":"notifications-title",children:o.jsxs(re.div,{variants:s,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:c=>c.stopPropagation(),children:[o.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:o.jsx(ti,{size:20})}),o.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),t.length>0?t.map(c=>o.jsxs(re.div,{variants:s,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[o.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:c.message}),o.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:a(c.updatedAt?.toDate?.()||new Date)})]},c.id)):o.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});Y6.propTypes={show:q.bool.isRequired,onClose:q.func.isRequired,notifications:q.arrayOf(q.shape({id:q.string.isRequired,message:q.string.isRequired,updatedAt:q.object})).isRequired,theme:q.string.isRequired};const X6=k.memo(({isOpen:r,message:e,onClose:t,theme:n})=>o.jsx(Vt,{children:r&&o.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"modal-title",children:o.jsxs(re.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[o.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:o.jsx(ti,{size:20})}),o.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),o.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:e})]})})}));X6.propTypes={isOpen:q.bool.isRequired,message:q.string.isRequired,onClose:q.func.isRequired,theme:q.string.isRequired};const Q6=()=>{const{currentIndex:r,progress:e,setIsPaused:t,goToSlide:n,prevSlide:i,nextSlide:s}=vG(Au,5e3),[a,c]=k.useState(""),[d,h]=k.useState(null),[p,m]=k.useState(0),[x,v]=k.useState(null),[_,w]=k.useState(!1),[E,j]=k.useState(!1),[P,V]=k.useState("dark"),[L,K]=k.useState(!1),[H,S]=k.useState(!1),[N,I]=k.useState([]),[R,M]=k.useState(null),D=Gs(),F=k.useRef(null);k.useEffect(()=>{const ee=Nc(Xr,te=>{h(te),te?(he(te.uid),Ae(te.uid)):(m(0),v(null),I([]))});return()=>ee()},[]);const he=async ee=>{try{const te=await ol(vt(Fe,"users",ee));if(te.exists()){m(te.data().balance||0),v(te.data().role);const ie=te.data().username||"Usuario";h(U=>({...U,username:ie,id:ee,name:ie,phone:te.data().phone||""}))}}catch(te){console.error("Error fetching user data:",te)}},Ae=async ee=>{try{const te=ur(It(Fe,"users",ee,"notifications"),c2("updatedAt","desc")),U=(await pn(te)).docs.map(be=>({id:be.id,message:be.data().message||"Sin mensaje",updatedAt:be.data().updatedAt}));I(U)}catch(te){console.error("Error fetching notifications:",te)}};k.useEffect(()=>{const ee=()=>{j(window.scrollY>300)};return window.addEventListener("scroll",ee),()=>window.removeEventListener("scroll",ee)},[]),k.useEffect(()=>{const ee=F.current;let te=0;const ie=be=>{te=be.touches[0].clientX,t(!0)},U=be=>{const Ce=be.changedTouches[0].clientX;te-Ce>50&&s(),Ce-te>50&&i(),setTimeout(()=>t(!1),500)};return ee?.addEventListener("touchstart",ie),ee?.addEventListener("touchend",U),()=>{ee?.removeEventListener("touchstart",ie),ee?.removeEventListener("touchend",U)}},[i,s,t]);const Oe=k.useCallback(ee=>{ee.preventDefault()},[]),De=k.useCallback(async()=>{try{await $h(Xr),D("/")}catch(ee){console.error("Error signing out:",ee)}},[D]),we=k.useCallback(()=>{V(ee=>ee==="dark"?"light":"dark")},[]),_e=k.useCallback(ee=>ee?ee.split(" ").map(ie=>ie[0]).join("").slice(0,2).toUpperCase():"U",[]),Ne=k.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),ae=k.useCallback(()=>{switch(x){case"admin":return"/dashboard/admin";case"provider":return"/dashboard/provider";default:return"/dashboard/user"}},[x]),W=k.useCallback(ee=>{if(!x){ee.preventDefault();const te={id:Date.now().toString(),message:"Usuario no activado",updatedAt:new Date};return I(ie=>[...ie,te]),S(!0),!1}return!0},[x]);return o.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${P==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-100 via-gray-50 to-white text-gray-900"} flex flex-col font-inter relative overflow-hidden`,children:[o.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[o.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${P==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),o.jsx("div",{className:"particles",children:[...Array(25)].map((ee,te)=>o.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},te))})]}),o.jsxs("header",{className:`${P==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300`,children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(re.img,{src:Dc,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${P==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},fetchpriority:"high",loading:"eager",width:"40",height:"40"}),o.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),o.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:o.jsxs("div",{className:"relative group",children:[o.jsx("input",{type:"text",placeholder:"Buscar productos y proveedores...",value:a,onChange:ee=>c(ee.target.value),className:`w-full py-2.5 px-5 ${P==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${P==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar productos y proveedores",onKeyDown:ee=>ee.key==="Enter"&&Oe(ee)}),o.jsx("button",{onClick:Oe,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${P==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:o.jsx(md,{size:18})})]})}),o.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[o.jsx("button",{onClick:we,className:`p-2 rounded-full ${P==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${P==="dark"?"claro":"oscuro"}`,children:P==="dark"?o.jsx(jc,{size:20}):o.jsx(Rc,{size:20})}),d&&o.jsxs("button",{onClick:()=>S(!0),className:`p-2 rounded-full relative ${P==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${N.length} nuevas)`,children:[o.jsx(xc,{size:20}),N.length>0&&o.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:N.length})]}),o.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>K(!L),"aria-label":"Abrir menú móvil","aria-expanded":L,children:o.jsx(Zg,{size:20,className:P==="dark"?"text-gray-300":"text-gray-600"})}),o.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:d?o.jsxs("div",{className:"relative flex items-center space-x-4",children:[o.jsx(re.div,{className:`flex items-center space-x-2 ${P==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:o.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",p.toFixed(2)]})}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>w(!_),className:`flex items-center space-x-2 ${P==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":_,children:[o.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:d.photoURL?o.jsx("img",{src:d.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):_e(d.username||d.email)}),o.jsx("span",{className:`text-sm font-semibold ${P==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:d.username||"Usuario"}),o.jsx(vq,{className:`ml-1 ${P==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),o.jsx(Vt,{children:_&&o.jsxs(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${P==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[o.jsxs(wi,{to:ae(),className:`w-full text-left px-4 py-2 text-sm hover:${P==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${P==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,onClick:ee=>{W(ee),w(!1)},role:"menuitem","aria-label":"Ir al dashboard",children:[o.jsx(Jm,{className:"mr-2"})," Dashboard"]}),o.jsxs("button",{onClick:De,className:`w-full text-left px-4 py-2 text-sm hover:${P==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${P==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[o.jsx(xd,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs(wi,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${P==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[o.jsx(j1,{className:"mr-2"})," Ingresar"]}),o.jsxs(wi,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${P==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[o.jsx(D1,{className:"mr-2"})," Registrarse"]})]})})]}),o.jsx(Vt,{children:L&&o.jsx(re.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${P==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:o.jsxs("div",{className:"flex flex-col space-y-4",children:[o.jsxs("div",{className:"relative group",children:[o.jsx("input",{type:"text",placeholder:"Buscar productos y proveedores...",value:a,onChange:ee=>c(ee.target.value),className:`w-full py-2.5 px-5 ${P==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${P==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar productos y proveedores",onKeyDown:ee=>ee.key==="Enter"&&Oe(ee)}),o.jsx("button",{onClick:Oe,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${P==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:o.jsx(md,{size:18})})]}),d&&o.jsxs("button",{onClick:()=>{S(!0),K(!1)},className:`text-sm flex items-center ${P==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[o.jsx(xc,{className:"mr-2"})," Notificaciones"]}),d?o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:`text-sm ${P==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",p.toFixed(2)]}),o.jsxs(wi,{to:ae(),className:`text-sm flex items-center ${P==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,onClick:ee=>{W(ee)&&K(!1)},role:"menuitem","aria-label":"Ir al dashboard",children:[o.jsx(Jm,{className:"mr-2"})," Dashboard"]}),o.jsxs("button",{onClick:()=>{De(),K(!1)},className:`text-sm flex items-center ${P==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[o.jsx(xd,{className:"mr-2"})," Cerrar Sesión"]})]}):o.jsxs(o.Fragment,{children:[o.jsxs(wi,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${P==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>K(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[o.jsx(j1,{className:"mr-2"})," Ingresar"]}),o.jsxs(wi,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${P==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>K(!1),role:"menuitem","aria-label":"Registrarse",children:[o.jsx(D1,{className:"mr-2"})," Registrarse"]})]})]})})})]}),o.jsx(Y6,{show:H&&!!d,onClose:()=>S(!1),notifications:N,theme:P}),o.jsx(X6,{isOpen:!!R,message:R?.message||"",onClose:()=>{R?.onClose&&R.onClose(),M(null)},theme:P}),o.jsxs("main",{className:"flex-1 px-4 sm:px-6 lg:px-8 py-10 pt-24 relative z-10",children:[o.jsxs("section",{ref:F,className:"relative h-64 sm:h-80 md:h-96 lg:h-[600px] mb-12 overflow-hidden rounded-2xl shadow-2xl",onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),role:"region","aria-label":"Carrusel de contenido destacado",children:[o.jsx(Vt,{initial:!1,children:o.jsxs(re.div,{className:"absolute inset-0 flex items-center justify-center",initial:{opacity:0,x:300,scale:1.1},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-300,scale:1.1},transition:{duration:.8,ease:"easeInOut"},children:[o.jsx("img",{src:Au[r].src,alt:Au[r].title,className:"absolute inset-0 w-full h-full object-cover object-center",fetchpriority:r===0?"high":"auto",loading:r===0?"eager":"lazy",width:"1200",height:"600"}),o.jsxs("div",{className:`absolute inset-0 bg-gradient-to-t ${P==="dark"?"from-black/90 via-black/60 to-transparent":"from-white/90 via-white/60 to-transparent"} flex flex-col justify-end p-6 sm:p-8 md:p-10 lg:p-12`,children:[o.jsx(re.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.5},className:`text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-extrabold mb-2 bg-clip-text text-transparent bg-gradient-to-r ${P==="dark"?"from-white to-gray-200":"from-gray-900 to-gray-700"} tracking-tight drop-shadow-md`,children:Au[r].title}),o.jsx(re.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},className:`text-sm sm:text-base md:text-lg lg:text-xl max-w-md ${P==="dark"?"text-gray-300":"text-gray-700"} font-medium drop-shadow-sm`,children:Au[r].description})]})]},r)}),o.jsx("button",{onClick:i,className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${P==="dark"?"bg-black/50 hover:bg-black/70":"bg-white/50 hover:bg-white/70"} backdrop-blur-lg p-3 rounded-full transition-all duration-300 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,"aria-label":"Diapositiva anterior",children:o.jsx(_q,{size:20})}),o.jsx("button",{onClick:s,className:`absolute right-4 top-1/2 transform -translate-y-1/2 ${P==="dark"?"bg-black/50 hover:bg-black/70":"bg-white/50 hover:bg-white/70"} backdrop-blur-lg p-3 rounded-full transition-all duration-300 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,"aria-label":"Diapositiva siguiente",children:o.jsx(Eq,{size:20})}),o.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",role:"tablist",children:Au.map((ee,te)=>o.jsx("button",{className:`w-2 h-2 sm:w-3 sm:h-3 rounded-full transition-all duration-300 ${r===te?"bg-blue-500 scale-125":P==="dark"?"bg-gray-500/50":"bg-gray-400/50"} focus:outline-none focus:ring-2 focus:ring-blue-500`,onClick:()=>n(te),role:"tab","aria-selected":r===te,"aria-label":`Ir a diapositiva ${te+1}`},te))}),o.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 ${P==="dark"?"bg-gray-800/50":"bg-gray-200/50"}`,children:o.jsx(re.div,{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600",style:{width:`${e}%`},initial:{width:0},animate:{width:`${e}%`},transition:{duration:.1}})})]}),o.jsxs("section",{className:"relative",children:[o.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold mb-10 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600 tracking-tight",children:"Categorías de Plataformas"}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-4 sm:gap-6 lg:gap-8",children:yG.map((ee,te)=>o.jsx(K6,{platform:ee,theme:P},te))})]})]}),o.jsx("footer",{className:`${P==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-10 px-4 sm:px-6 lg:px-8 text-center text-sm relative z-10`,children:o.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[o.jsxs("p",{className:`${P==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["BlackStreaming - Todos los derechos reservados. Desarrollado por"," ",o.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Saiph"}),"."]}),o.jsxs("div",{className:"flex justify-center space-x-8",children:[o.jsx("a",{href:"https://twitter.com",className:`${P==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Twitter de BlackStreaming",children:o.jsx(Pc,{size:24})}),o.jsx("a",{href:"https://instagram.com",className:`${P==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Instagram de BlackStreaming",children:o.jsx(Ic,{size:24})}),o.jsx("a",{href:"https://facebook.com",className:`${P==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Facebook de BlackStreaming",children:o.jsx(Cc,{size:24})})]})]})}),o.jsx(Vt,{children:E&&o.jsx(re.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ne,className:`fixed bottom-6 left-6 bg-blue-600/90 backdrop-blur-lg p-3 rounded-full hover:bg-blue-700/95 shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 ${P==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Volver al inicio de la página",children:o.jsx(Jg,{size:20})})})]})};Q6.propTypes={};const bG=()=>{const[r,e]=k.useState(""),[t,n]=k.useState(""),[i,s]=k.useState(!1),[a,c]=k.useState(""),[d,h]=k.useState(!1),[p,m]=k.useState(()=>localStorage.getItem("theme")||"dark"),x=Gs(),v=k.useRef(null);k.useEffect(()=>{localStorage.setItem("theme",p),document.documentElement.classList.toggle("dark",p==="dark")},[p]),k.useEffect(()=>{const V=Xr.onAuthStateChanged(L=>{L&&x("/")});return()=>V()},[x]),k.useEffect(()=>{v.current?.focus()},[]);const _=k.useCallback(()=>r?t?t.length<6?"La contraseña debe tener al menos 6 caracteres":"":"Por favor, ingresa tu contraseña":"Por favor, ingresa tu nombre de usuario o correo electrónico",[r,t]),w=async V=>{try{const L=It(Fe,"users"),K=ur(L,gr("username","==",V)),H=await pn(K);if(!H.empty){const S=H.docs[0].data();return{email:S.email,status:S.status||"active"}}return null}catch(L){return console.error("Error fetching username:",L),null}},E=k.useCallback(async V=>{V.preventDefault();const L=_();if(L){c(L);return}c(""),h(!0);try{let K=r,H="active";if(r.includes("@")){const S=It(Fe,"users"),N=ur(S,gr("email","==",r)),I=await pn(N);I.empty||(H=I.docs[0].data().status||"active")}else{const S=await w(r);if(!S){c("Nombre de usuario no encontrado"),h(!1);return}K=S.email,H=S.status}if(H==="suspended"){c("Esta cuenta está suspendida y no se puede ingresar"),h(!1);return}await T7(Xr,K,t),e(""),n(""),x("/")}catch(K){c(K.code==="auth/wrong-password"?"Contraseña incorrecta":K.code==="auth/user-not-found"?"Usuario o correo electrónico no encontrado":K.code==="auth/too-many-requests"?"Demasiados intentos fallidos. Intenta de nuevo más tarde.":"Error al iniciar sesión. Por favor, intenta de nuevo.")}finally{h(!1)}},[r,t,x,_]),j=k.useCallback(()=>{m(V=>V==="dark"?"light":"dark")},[]),P=k.useCallback(()=>{s(V=>!V)},[]);return o.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${p==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-100 via-gray-50 to-white text-gray-900"} flex flex-col items-center justify-between px-4 sm:px-6 lg:px-8 font-inter relative overflow-hidden`,children:[o.jsx("div",{className:"absolute bottom-4 right-4 z-20",children:o.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full backdrop-blur-sm ${p==="dark"?"bg-gray-800/50 text-gray-400 border border-gray-600/30":"bg-white/70 text-gray-600 border border-gray-300/30"}`,children:"V2.1.2"})}),o.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[o.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${p==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),o.jsx("div",{className:"particles",children:[...Array(25)].map((V,L)=>o.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},L))})]}),o.jsx("main",{className:"flex-1 flex items-center justify-center w-full py-12 sm:py-16 relative z-10",children:o.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`${p==="dark"?"bg-gray-900/30 border-gray-700/30":"bg-white/90 border-gray-200/30"} backdrop-blur-xl rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md`,role:"form","aria-labelledby":"login-title",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(re.img,{src:Dc,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${p==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),o.jsx("h1",{className:"text-2xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),o.jsx("button",{onClick:j,className:`p-2 rounded-full ${p==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${p==="dark"?"claro":"oscuro"}`,children:p==="dark"?o.jsx(jc,{size:20}):o.jsx(Rc,{size:20})})]}),o.jsx("h2",{id:"login-title",className:"text-2xl sm:text-3xl font-bold mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Iniciar Sesión"}),o.jsx(Vt,{children:a&&o.jsx(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${p==="dark"?"bg-red-900/50 border-red-600/50":"bg-red-100/50 border-red-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-red-600 border-l-4`,role:"alert",children:a})}),o.jsxs("form",{onSubmit:E,className:"space-y-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(vc,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${p==="dark"?"text-gray-400":"text-gray-600"}`}),o.jsx(re.input,{ref:v,type:"text",placeholder:"Nombre de usuario o correo electrónico",value:r,onChange:V=>e(V.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${p==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Nombre de usuario o correo electrónico",required:!0,whileFocus:{scale:1.02}})]}),o.jsxs("div",{className:"relative",children:[o.jsx(ew,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${p==="dark"?"text-gray-400":"text-gray-600"}`}),o.jsx(re.input,{type:i?"text":"password",placeholder:"Contraseña",value:t,onChange:V=>n(V.target.value),className:`w-full pl-12 pr-12 py-3 rounded-full ${p==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Contraseña",required:!0,whileFocus:{scale:1.02}}),o.jsx("button",{type:"button",onClick:P,className:`absolute right-4 top-1/2 transform -translate-y-1/2 ${p==="dark"?"text-gray-400 hover:text-gray-200":"text-gray-600 hover:text-gray-800"} transition duration-200`,"aria-label":i?"Ocultar contraseña":"Mostrar contraseña",children:i?o.jsx(M6,{size:18}):o.jsx(V6,{size:18})})]}),o.jsxs(re.button,{type:"submit",disabled:d,className:`w-full bg-blue-600/90 backdrop-blur-xl py-3 rounded-full ${d?"opacity-50 cursor-not-allowed":"hover:bg-blue-700/95"} text-sm border ${p==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center justify-center text-white font-semibold`,"aria-label":"Iniciar sesión",whileHover:{scale:d?1:1.05},whileTap:{scale:d?1:.95},children:[d?o.jsxs(re.svg,{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-16 0z"})]}):o.jsx(j1,{className:"mr-2"}),d?"Cargando...":"Iniciar Sesión"]})]}),o.jsxs("div",{className:"text-center text-sm mt-6 space-y-3",children:[o.jsxs("p",{className:`${p==="dark"?"text-gray-300":"text-gray-700"}`,children:["¿No tienes una cuenta?"," ",o.jsx(wi,{to:"/register",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Ir a registrarse",children:"Regístrate aquí"})]}),o.jsxs("p",{className:`${p==="dark"?"text-gray-300":"text-gray-700"}`,children:["¿Olvidaste tu contraseña?"," ",o.jsx(wi,{to:"/forgot-password",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Recuperar contraseña",children:"Recupérala aquí"})]})]})]})}),o.jsx("footer",{className:`${p==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-10 px-4 sm:px-6 lg:px-8 text-center text-sm relative z-10 w-full`,children:o.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[o.jsxs("p",{className:`${p==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["BlackStreaming - Todos los derechos reservados. Desarrollado por"," ",o.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Saiph"}),"."]}),o.jsxs("div",{className:"flex justify-center space-x-8",children:[o.jsx("a",{href:"https://twitter.com",className:`${p==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Twitter de BlackStreaming",children:o.jsx(Pc,{size:24})}),o.jsx("a",{href:"https://instagram.com",className:`${p==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Instagram de BlackStreaming",children:o.jsx(Ic,{size:24})}),o.jsx("a",{href:"https://facebook.com",className:`${p==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Facebook de BlackStreaming",children:o.jsx(Cc,{size:24})})]})]})})]})},wG=()=>{const r=[{name:"Perú",code:"+51",flag:"🇵🇪",pattern:/^\d{9}$/,length:9},{name:"Estados Unidos",code:"+1",flag:"🇺🇸",pattern:/^\d{10}$/,length:10},{name:"México",code:"+52",flag:"🇲🇽",pattern:/^\d{10}$/,length:10},{name:"Argentina",code:"+54",flag:"🇦🇷",pattern:/^\d{10}$/,length:10},{name:"Chile",code:"+56",flag:"🇨🇱",pattern:/^\d{9}$/,length:9},{name:"Colombia",code:"+57",flag:"🇨🇴",pattern:/^\d{10}$/,length:10}],[e,t]=k.useState(""),[n,i]=k.useState(""),[s,a]=k.useState(""),[c,d]=k.useState(""),[h,p]=k.useState(""),[m,x]=k.useState(r[0]),[v,_]=k.useState(!1),[w,E]=k.useState(""),[j,P]=k.useState(!1),[V,L]=k.useState(!1),[K,H]=k.useState(()=>localStorage.getItem("theme")||"dark"),S=Gs(),N=k.useRef(null);k.useEffect(()=>{localStorage.setItem("theme",K),document.documentElement.classList.toggle("dark",K==="dark")},[K]),k.useEffect(()=>{const he=Xr.onAuthStateChanged(Ae=>{Ae&&!V&&S("/")});return()=>he()},[S,V]),k.useEffect(()=>{N.current?.focus()},[]);const I=k.useCallback(async()=>e?/^[a-zA-Z0-9_]{3,20}$/.test(e)?(await ol(vt(Fe,"usernames",e.toLowerCase()))).exists()?"El nombre de usuario ya está en uso":n?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?s?m.pattern.test(s)?c?c.length<6?"La contraseña debe tener al menos 6 caracteres":"":"Por favor, ingresa una contraseña":`El número de teléfono debe tener exactamente ${m.length} dígitos`:"Por favor, ingresa tu número de teléfono":"Correo electrónico inválido":"Por favor, ingresa tu correo electrónico":"El nombre de usuario debe tener entre 3 y 20 caracteres alfanuméricos":"Por favor, ingresa un nombre de usuario",[e,n,s,c,m]),R=k.useCallback(async he=>{he.preventDefault();const Ae=await I();if(Ae){E(Ae);return}E(""),P(!0),L(!0);try{const De=(await E7(Xr,n,c)).user;console.log("Usuario creado en Auth:",De.uid),await N7(De,{displayName:e}),console.log("Perfil actualizado con username:",e);const we=De.uid.slice(-6).toUpperCase();let _e=null;if(h){const Ne=ur(It(Fe,"users"),gr("referralCode","==",h)),ae=await pn(Ne);if(!ae.empty)_e=ae.docs[0].id,console.log(`Referred by UID: ${_e}`);else{E("Código de referido inválido"),console.warn(`Invalid referral code: ${h}`),P(!1),L(!1);return}}await va(vt(Fe,"users",De.uid),{username:e.toLowerCase(),email:n.toLowerCase(),phone:`${m.code}${s}`,phoneCountryCode:m.code,phoneCountryName:m.name,phoneDigits:s,referralCode:we,referredBy:_e,balance:0,createdAt:new Date}),console.log('Datos guardados en colección "users" con ID:',De.uid),await va(vt(Fe,"usernames",e.toLowerCase()),{email:n.toLowerCase(),uid:De.uid}),console.log('Mapping guardado en colección "usernames" con ID:',e.toLowerCase()),t(""),i(""),a(""),d(""),p(""),S("/")}catch(Oe){console.error("Error en registro:",Oe),E(Oe.code==="auth/email-already-in-use"?"El correo electrónico ya está registrado":Oe.code==="auth/invalid-email"?"Correo electrónico inválido":Oe.code==="auth/weak-password"?"La contraseña es demasiado débil":"Error al registrarse. Por favor, intenta de nuevo.")}finally{P(!1),L(!1)}},[e,n,s,c,h,m,S,I]),M=k.useCallback(()=>{H(he=>he==="dark"?"light":"dark")},[]),D=k.useCallback(()=>{_(he=>!he)},[]),F=k.useCallback(he=>{const Ae=he.target.value,Oe=r.find(De=>De.code===Ae)||m;x(Oe),s.length>Oe.length&&a(s.slice(0,Oe.length))},[m,s]);return o.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${K==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-100 via-gray-50 to-white text-gray-900"} flex flex-col items-center justify-between px-4 sm:px-6 lg:px-8 font-inter relative overflow-hidden`,children:[o.jsx("div",{className:"absolute bottom-4 right-4 z-20",children:o.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full backdrop-blur-sm ${K==="dark"?"bg-gray-800/50 text-gray-400 border border-gray-600/30":"bg-white/70 text-gray-600 border border-gray-300/30"}`,children:"V2.1.2"})}),o.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[o.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${K==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),o.jsx("div",{className:"particles",children:[...Array(25)].map((he,Ae)=>o.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},Ae))})]}),o.jsx("main",{className:"flex-1 flex items-center justify-center w-full py-12 sm:py-16 relative z-10",children:o.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`${K==="dark"?"bg-gray-900/30 border-gray-700/30":"bg-white/90 border-gray-200/30"} backdrop-blur-xl rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md`,role:"form","aria-labelledby":"register-title",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(re.img,{src:Dc,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${K==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),o.jsx("h1",{className:"text-2xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),o.jsx("button",{onClick:M,className:`p-2 rounded-full ${K==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${K==="dark"?"claro":"oscuro"}`,children:K==="dark"?o.jsx(jc,{size:20}):o.jsx(Rc,{size:20})})]}),o.jsx(Vt,{children:o.jsx(re.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,ease:"easeOut"},className:`${K==="dark"?"bg-green-900/30 border-green-600/30 text-green-200":"bg-green-100/50 border-green-300/30 text-green-800"} rounded-lg p-3 mb-6 text-center text-sm border-l-4 font-semibold`,role:"banner",children:"¡Regístrate gratis ahora!"})}),o.jsx("h2",{id:"register-title",className:"text-2xl sm:text-3xl font-bold mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Registrarse"}),o.jsx(Vt,{children:w&&o.jsx(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${K==="dark"?"bg-red-900/50 border-red-600/50":"bg-red-100/50 border-red-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-red-600 border-l-4`,role:"alert",children:w})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(vc,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${K==="dark"?"text-gray-400":"text-gray-600"}`}),o.jsx(re.input,{ref:N,type:"text",placeholder:"Elige un nombre de usuario",value:e,onChange:he=>t(he.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${K==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Nombre de usuario",required:!0,whileFocus:{scale:1.02}})]}),o.jsxs("div",{className:"relative",children:[o.jsx(pd,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${K==="dark"?"text-gray-400":"text-gray-600"}`}),o.jsx(re.input,{type:"email",placeholder:"Tu correo electrónico",value:n,onChange:he=>i(he.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${K==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Correo electrónico",required:!0,whileFocus:{scale:1.02}})]}),o.jsxs("div",{className:"relative flex items-center",children:[o.jsx(Aq,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${K==="dark"?"text-gray-400":"text-gray-600"}`}),o.jsxs("div",{className:"flex w-full",children:[o.jsx("select",{value:m.code,onChange:F,className:`flex items-center pl-3 pr-3 py-3 rounded-l-full text-sm font-medium cursor-pointer appearance-none bg-transparent border border-r-0 focus:outline-none focus:ring-2 focus:ring-blue-500/50 backdrop-blur-xl transition-all duration-300 hover:shadow-lg ${K==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"}`,children:r.map(he=>o.jsxs("option",{value:he.code,children:[he.flag," ",he.name," (",he.code,")"]},he.code))}),o.jsx(re.input,{type:"tel",placeholder:`Número de teléfono (${m.name})`,value:s,onChange:he=>a(he.target.value.replace(/\D/g,"")),className:`flex-1 pl-4 pr-4 py-3 rounded-r-full border border-l-0 focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg ${K==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"}`,"aria-label":"Número de teléfono",required:!0,maxLength:m.length,whileFocus:{scale:1.02}})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx(ew,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${K==="dark"?"text-gray-400":"text-gray-600"}`}),o.jsx(re.input,{type:v?"text":"password",placeholder:"Elige una contraseña",value:c,onChange:he=>d(he.target.value),className:`w-full pl-12 pr-12 py-3 rounded-full ${K==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Contraseña",required:!0,whileFocus:{scale:1.02}}),o.jsx("button",{onClick:D,className:`absolute right-4 top-1/2 transform -translate-y-1/2 ${K==="dark"?"text-gray-400 hover:text-gray-200":"text-gray-600 hover:text-gray-800"} transition duration-200`,"aria-label":v?"Ocultar contraseña":"Mostrar contraseña",children:v?o.jsx(M6,{size:18}):o.jsx(V6,{size:18})})]}),o.jsxs("div",{className:"relative",children:[o.jsx(vc,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${K==="dark"?"text-gray-400":"text-gray-600"}`}),o.jsx(re.input,{type:"text",placeholder:"Código de referido (opcional)",value:h,onChange:he=>p(he.target.value.trim().toUpperCase()),className:`w-full pl-12 pr-4 py-3 rounded-full ${K==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Código de referido",whileFocus:{scale:1.02}}),o.jsx("span",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-xs italic text-gray-500",children:"opcional"})]}),o.jsxs(re.button,{onClick:R,disabled:j,className:`w-full bg-green-600/90 backdrop-blur-xl py-3 rounded-full ${j?"opacity-50 cursor-not-allowed":"hover:bg-green-700/95"} text-sm border ${K==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center justify-center text-white font-semibold`,"aria-label":"Registrarse",whileHover:{scale:j?1:1.05},whileTap:{scale:j?1:.95},children:[j?o.jsxs(re.svg,{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V8h8a8 8 0 01-16 0z"})]}):o.jsx(D1,{className:"mr-2"}),j?"Cargando...":"Registrarse"]})]}),o.jsxs("p",{className:`text-center text-sm mt-6 ${K==="dark"?"text-gray-300":"text-gray-700"}`,children:["¿Ya tienes una cuenta?"," ",o.jsx(wi,{to:"/login",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Ir a iniciar sesión",children:"Inicia sesión aquí"})]})]})}),o.jsx("footer",{className:`${K==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-10 px-4 sm:px-6 lg:px-8 text-center text-sm relative z-10 w-full`,children:o.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[o.jsxs("p",{className:`${K==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["BlackStreaming - Todos los derechos reservados. Desarrollado por"," ",o.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Saiph"}),"."]}),o.jsxs("div",{className:"flex justify-center space-x-8",children:[o.jsx("a",{href:"https://twitter.com",className:`${K==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Twitter de BlackStreaming",children:o.jsx(Pc,{size:24})}),o.jsx("a",{href:"https://instagram.com",className:`${K==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Instagram de BlackStreaming",children:o.jsx(Ic,{size:24})}),o.jsx("a",{href:"https://facebook.com",className:`${K==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Facebook de BlackStreaming",children:o.jsx(Cc,{size:24})})]})]})})]})},_G=()=>{const[r,e]=k.useState(""),[t,n]=k.useState(""),[i,s]=k.useState(""),[a,c]=k.useState(!1),[d,h]=k.useState(()=>localStorage.getItem("theme")||"dark"),p=Gs(),m=k.useRef(null);k.useEffect(()=>{localStorage.setItem("theme",d),document.documentElement.classList.toggle("dark",d==="dark")},[d]),k.useEffect(()=>{const w=Xr.onAuthStateChanged(E=>{E&&p("/")});return()=>w()},[p]),k.useEffect(()=>{m.current?.focus()},[]);const x=k.useCallback(()=>r?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?"":"Correo electrónico inválido":"Por favor, ingresa tu correo electrónico",[r]),v=k.useCallback(async w=>{w.preventDefault();const E=x();if(E){n(E),s("");return}n(""),s(""),c(!0);try{await _7(Xr,r),s("Se ha enviado un enlace de restablecimiento de contraseña a tu correo electrónico."),e("")}catch(j){n(j.code==="auth/user-not-found"?"No se encontró un usuario con este correo electrónico":j.code==="auth/invalid-email"?"Correo electrónico inválido":j.code==="auth/too-many-requests"?"Demasiados intentos. Intenta de nuevo más tarde.":"Error al enviar el enlace de restablecimiento. Por favor, intenta de nuevo.")}finally{c(!1)}},[r,x]),_=k.useCallback(()=>{h(w=>w==="dark"?"light":"dark")},[]);return o.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${d==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-100 via-gray-50 to-white text-gray-900"} flex flex-col items-center justify-between px-4 sm:px-6 lg:px-8 font-inter relative overflow-hidden`,children:[o.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[o.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${d==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),o.jsx("div",{className:"particles",children:[...Array(25)].map((w,E)=>o.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),o.jsx("main",{className:"flex-1 flex items-center justify-center w-full py-12 sm:py-16 relative z-10",children:o.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`${d==="dark"?"bg-gray-900/30 border-gray-700/30":"bg-white/90 border-gray-200/30"} backdrop-blur-xl rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md`,role:"form","aria-labelledby":"forgot-password-title",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(re.img,{src:Dc,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${d==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),o.jsx("h1",{className:"text-2xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),o.jsx("button",{onClick:_,className:`p-2 rounded-full ${d==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${d==="dark"?"claro":"oscuro"}`,children:d==="dark"?o.jsx(jc,{size:20}):o.jsx(Rc,{size:20})})]}),o.jsx("h2",{id:"forgot-password-title",className:"text-2xl sm:text-3xl font-bold mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Recuperar Contraseña"}),o.jsxs(Vt,{children:[t&&o.jsx(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${d==="dark"?"bg-red-900/50 border-red-600/50":"bg-red-100/50 border-red-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-red-600 border-l-4`,role:"alert",children:t}),i&&o.jsx(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${d==="dark"?"bg-green-900/50 border-green-600/50":"bg-green-100/50 border-green-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-green-600 border-l-4`,role:"alert",children:i})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(pd,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${d==="dark"?"text-gray-400":"text-gray-600"}`}),o.jsx(re.input,{ref:m,type:"email",placeholder:"Tu correo electrónico",value:r,onChange:w=>e(w.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${d==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Correo electrónico",required:!0,whileFocus:{scale:1.02}})]}),o.jsxs(re.button,{onClick:v,disabled:a,className:`w-full bg-blue-600/90 backdrop-blur-xl py-3 rounded-full ${a?"opacity-50 cursor-not-allowed":"hover:bg-blue-700/95"} text-sm border ${d==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center justify-center text-white font-semibold`,"aria-label":"Enviar enlace de restablecimiento",whileHover:{scale:a?1:1.05},whileTap:{scale:a?1:.95},children:[a?o.jsxs(re.svg,{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-16 0z"})]}):o.jsx(pd,{className:"mr-2"}),a?"Cargando...":"Enviar Enlace de Restablecimiento"]})]}),o.jsxs("div",{className:"text-center text-sm mt-6 space-y-3",children:[o.jsxs("p",{className:`${d==="dark"?"text-gray-300":"text-gray-700"}`,children:["¿Ya tienes una cuenta?"," ",o.jsx(wi,{to:"/login",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Ir a iniciar sesión",children:"Inicia sesión aquí"})]}),o.jsxs("p",{className:`${d==="dark"?"text-gray-300":"text-gray-700"}`,children:["¿No tienes una cuenta?"," ",o.jsx(wi,{to:"/register",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Ir a registrarse",children:"Regístrate aquí"})]})]})]})}),o.jsx("footer",{className:`${d==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-10 px-4 sm:px-6 lg:px-8 text-center text-sm relative z-10 w-full`,children:o.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[o.jsxs("p",{className:`${d==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["BlackStreaming - Todos los derechos reservados. Desarrollado por"," ",o.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Saiph"}),"."]}),o.jsxs("div",{className:"flex justify-center space-x-8",children:[o.jsx("a",{href:"https://twitter.com",className:`${d==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Twitter de BlackStreaming",children:o.jsx(Pc,{size:24})}),o.jsx("a",{href:"https://instagram.com",className:`${d==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Instagram de BlackStreaming",children:o.jsx(Ic,{size:24})}),o.jsx("a",{href:"https://facebook.com",className:`${d==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Facebook de BlackStreaming",children:o.jsx(Cc,{size:24})})]})]})})]})},EG=({isOpen:r,message:e,title:t,onClose:n})=>r?o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:t}),o.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-all duration-300",children:o.jsx(Qi,{size:20})})]}),o.jsx("p",{className:"text-gray-300 mb-6",children:e}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:n,className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,J6=({isOpen:r,user:e,onClose:t,onSave:n,theme:i="dark"})=>{const s=i==="dark",[a,c]=k.useState(e?.username||""),[d,h]=k.useState(""),p={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,scale:.95,transition:{duration:.2}}},m={hover:{scale:1.05,transition:{duration:.2}},tap:{scale:.95}},x=v=>{if(v.preventDefault(),h(""),!a.trim()){h("El nombre de usuario no puede estar vacío.");return}n(e.id,a.trim())};return r?o.jsx(re.div,{className:`fixed inset-0 ${s?"bg-black/70":"bg-black/50"} flex items-center justify-center z-50 p-4`,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},role:"dialog","aria-modal":"true","aria-labelledby":"edit-profile-title",children:o.jsx(re.div,{className:`rounded-2xl shadow-md w-full max-w-md border ${s?"bg-gray-900/90 border-gray-700/50":"bg-white border-gray-300"}`,variants:p,initial:"hidden",animate:"visible",exit:"exit",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{id:"edit-profile-title",className:"text-xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Editar Perfil"}),o.jsx(re.button,{onClick:t,className:`${s?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,variants:m,whileHover:"hover",whileTap:"tap","aria-label":"Cerrar modal",children:o.jsx(Qi,{size:20})})]}),o.jsxs("form",{onSubmit:x,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:`block mb-2 font-semibold ${s?"text-gray-300":"text-gray-700"}`,children:"Nombre de usuario"}),o.jsx("input",{type:"text",value:a,onChange:v=>c(v.target.value),className:`w-full px-4 py-2 rounded-xl ${s?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300`,required:!0,"aria-label":"Nombre de usuario"}),d&&o.jsx("p",{className:`text-sm mt-2 ${s?"text-red-400":"text-red-600"}`,children:d})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx(re.button,{type:"button",onClick:t,className:`px-4 py-2 rounded-xl font-medium transition-all duration-300 ${s?"bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-400":"bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:m,whileHover:"hover",whileTap:"tap","aria-label":"Cancelar edición",children:"Cancelar"}),o.jsx(re.button,{type:"submit",className:`px-4 py-2 rounded-xl font-medium transition-all duration-300 ${s?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:m,whileHover:"hover",whileTap:"tap","aria-label":"Guardar perfil",children:"Guardar"})]})]})]})})}):null};J6.propTypes={isOpen:q.bool.isRequired,user:q.shape({id:q.string.isRequired,username:q.string.isRequired}).isRequired,onClose:q.func.isRequired,onSave:q.func.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const Z6=({isOpen:r,provider:e,onClose:t,onRate:n,theme:i="dark"})=>{const s=i==="dark",[a,c]=k.useState(0),[d,h]=k.useState(""),p={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.2}}},m={hidden:{opacity:0,scale:.95,y:20},visible:{opacity:1,scale:1,y:0,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,scale:.95,y:20,transition:{duration:.2}}},x={hover:{scale:1.2,y:-5,transition:{duration:.2,type:"spring"}},tap:{scale:.95}},v={hover:{scale:1.05,transition:{duration:.2}},tap:{scale:.95}},_=E=>{if(E.preventDefault(),h(""),a<1||a>5){h("Por favor, selecciona una calificación entre 1 y 5 estrellas.");return}n(e.id,a),c(0)},w=E=>{c(E),h("")};return r?o.jsx(Vt,{children:o.jsx(re.div,{className:`fixed inset-0 ${s?"bg-black/70 backdrop-blur-sm":"bg-black/50 backdrop-blur-sm"} flex items-center justify-center z-50 p-4`,variants:p,initial:"hidden",animate:"visible",exit:"exit",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"rate-provider-title",children:o.jsx(re.div,{className:`rounded-3xl shadow-2xl w-full max-w-md border ${s?"bg-gradient-to-br from-gray-900/95 to-gray-800/95 border-gray-700/50":"bg-gradient-to-br from-white to-gray-50 border-gray-200/50"}`,variants:m,initial:"hidden",animate:"visible",exit:"exit",onClick:E=>E.stopPropagation(),children:o.jsxs("div",{className:"p-6 sm:p-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx(re.h2,{id:"rate-provider-title",className:`text-xl sm:text-2xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${s?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,initial:{x:-10},animate:{x:0},transition:{duration:.5},children:"Calificar Proveedor"}),o.jsx(re.button,{onClick:t,className:`p-2 rounded-2xl ${s?"text-gray-400 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200 hover:text-gray-900"} transition-all duration-300`,variants:v,whileHover:"hover",whileTap:"tap","aria-label":"Cerrar modal",children:o.jsx(Qi,{size:20})})]}),o.jsxs("form",{onSubmit:_,className:"space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:`inline-flex items-center gap-2 p-3 rounded-2xl mb-4 ${s?"bg-gray-800/50":"bg-gray-100"}`,children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:o.jsx(ki,{className:"text-white text-sm"})}),o.jsx("span",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:e.name})]}),o.jsx("div",{className:"flex justify-center space-x-1 mb-4",children:[1,2,3,4,5].map(E=>o.jsx(re.button,{type:"button",onClick:()=>w(E),className:`p-1 focus:outline-none focus:ring-2 focus:ring-yellow-500/50 rounded-full transition-all duration-200 ${E<=a?s?"text-yellow-400 hover:text-yellow-300":"text-yellow-600 hover:text-yellow-500":s?"text-gray-500 hover:text-gray-400":"text-gray-400 hover:text-gray-500"}`,variants:x,whileHover:"hover",whileTap:"tap","aria-label":`Seleccionar ${E} estrella${E>1?"s":""}`,children:o.jsx(tg,{size:28})},E))}),o.jsx("p",{className:`text-sm font-medium ${s?"text-gray-300":"text-gray-700"}`,children:a>0?`Calificación seleccionada: ${a} estrella${a>1?"s":""}`:"Selecciona una calificación"})]}),d&&o.jsx(re.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-3 rounded-xl ${s?"bg-red-900/50 border border-red-500/30 text-red-300":"bg-red-50 border border-red-200 text-red-700"}`,children:d}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200/50 dark:border-gray-700/50",children:[o.jsx(re.button,{type:"button",onClick:t,className:`px-6 py-3 rounded-2xl font-semibold transition-all duration-300 ${s?"bg-gray-600/70 hover:bg-gray-700/80 text-white focus:ring-gray-500/50":"bg-gray-400/70 hover:bg-gray-500/80 text-white focus:ring-gray-500/50"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:v,whileHover:"hover",whileTap:"tap","aria-label":"Cancelar calificación",children:"Cancelar"}),o.jsxs(re.button,{type:"submit",disabled:a===0,className:`px-6 py-3 rounded-2xl font-semibold flex items-center gap-2 transition-all duration-300 ${a>0?s?"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white focus:ring-green-400":"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white focus:ring-green-500":s?"bg-gray-600/70 text-gray-400 cursor-not-allowed":"bg-gray-400/70 text-gray-500 cursor-not-allowed"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:v,whileHover:a>0?"hover":{},whileTap:a>0?"tap":{},"aria-label":"Enviar calificación",children:[o.jsx(tg,{size:18,className:"text-yellow-400"}),o.jsx("span",{children:"Enviar Calificación"})]})]})]})]})})})}):null};Z6.propTypes={isOpen:q.bool.isRequired,provider:q.shape({id:q.string.isRequired,name:q.string.isRequired}).isRequired,onClose:q.func.isRequired,onRate:q.func.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const TG=({userName:r,email:e,balance:t,orders:n,notifications:i,setActivePage:s,formatDate:a,theme:c="dark"})=>{const d=c==="dark",h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}},p={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}};return o.jsxs(re.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${d?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:p,initial:"hidden",animate:"visible",children:[o.jsxs(re.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-6 bg-clip-text text-transparent bg-gradient-to-r ${d?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:["Bienvenido, ",o.jsx("span",{className:"text-red-400",children:r.username})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${d?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:h,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${d?"text-blue-400":"text-blue-600"}`,children:[o.jsx(ki,{size:20}),"Información de cuenta"]}),o.jsxs("div",{className:`space-y-4 ${d?"text-gray-300":"text-gray-700"}`,children:[o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-gray-800/20 dark:bg-gray-700/20",children:[o.jsx(ki,{className:"text-blue-400 flex-shrink-0",size:20}),o.jsx("span",{className:"font-medium",children:r.username})]}),o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-gray-800/20 dark:bg-gray-700/20",children:[o.jsx(Ur,{className:"text-blue-400 flex-shrink-0",size:20}),o.jsx("span",{className:"font-medium",children:e})]}),o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-gray-800/20 dark:bg-gray-700/20",children:[o.jsx(Ah,{className:"text-blue-400 flex-shrink-0",size:20}),o.jsx("span",{className:"font-medium",children:r.phone||"No especificado"})]})]})]}),o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${d?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:h,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${d?"text-green-400":"text-green-600"}`,children:[o.jsx(Ah,{size:20}),"Saldo disponible"]}),o.jsxs("p",{className:`text-4xl font-bold ${d?"text-white":"text-gray-900"}`,children:["S/ ",t.toFixed(2)]}),o.jsx(re.button,{onClick:()=>s("recargar"),className:`mt-6 w-full px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-green-500/50 ${d?"from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700":"from-green-600 to-emerald-700 hover:from-green-700 hover:to-emerald-800"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Recargar Saldo"})]}),o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${d?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:h,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${d?"text-purple-400":"text-purple-600"}`,children:[o.jsx(Ur,{size:20}),"Pedidos activos"]}),o.jsx("p",{className:`text-4xl font-bold ${d?"text-white":"text-gray-900"}`,children:n.filter(m=>new Date(m.endDate)>new Date&&(m.status==="completed"||m.status==="active")).length}),o.jsx(re.button,{onClick:()=>s("pedidos"),className:`mt-6 w-full px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-purple-500/50 ${d?"from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700":"from-purple-600 to-pink-800 hover:from-purple-700 hover:to-pink-900"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Ver Pedidos"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[o.jsxs(re.div,{className:`rounded-2xl p-6 shadow-xl border backdrop-blur-sm ${d?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:h,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${d?"text-white":"text-gray-900"}`,children:[o.jsx(Ur,{size:20}),"Pedidos recientes"]}),o.jsx(Vt,{children:n.length>0?n.slice(0,3).map((m,x)=>{const v=new Date(m.endDate)>new Date&&(m.status==="completed"||m.status==="active"),_=m.status==="pending";return o.jsxs(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:x*.1},className:`mb-4 p-4 rounded-xl transition-all duration-300 border ${d?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,whileHover:{scale:1.02},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("p",{className:`font-semibold ${d?"text-white":"text-gray-900"}`,children:m.productName||"Producto sin nombre"}),o.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${m.status==="pending"?d?"bg-yellow-900/80 text-yellow-300 border border-yellow-500/30":"bg-yellow-100 text-yellow-800 border border-yellow-300":v?d?"bg-green-900/80 text-green-300 border border-green-500/30":"bg-green-100 text-green-800 border border-green-300":d?"bg-red-900/80 text-red-300 border border-red-500/30":"bg-red-100 text-red-800 border border-red-300"}`,children:_?"A pedido":v?"Activo":"Expirado"})]}),o.jsxs("p",{className:`text-sm ${d?"text-gray-400":"text-gray-600"}`,children:["Vence: ",a(m.endDate)]})]},m.id)}):o.jsx(re.p,{initial:{opacity:0},animate:{opacity:1},className:`py-8 text-center ${d?"text-gray-400":"text-gray-500"}`,children:"No tienes pedidos recientes"})}),n.length>3&&o.jsx(re.button,{onClick:()=>s("pedidos"),className:`w-full mt-4 px-6 py-3 text-center text-sm transition-all duration-300 rounded-xl border-2 font-medium ${d?"border-blue-500/50 text-blue-400 hover:bg-blue-500/10":"border-blue-500/50 text-blue-600 hover:bg-blue-500/10"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Ver todos los pedidos"})]}),o.jsxs(re.div,{className:`rounded-2xl p-6 shadow-xl border backdrop-blur-sm ${d?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:h,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${d?"text-white":"text-gray-900"}`,children:[o.jsx(Gi,{size:20}),"Notificaciones"]}),o.jsx(Vt,{children:i.length>0?i.map((m,x)=>o.jsxs(re.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3,delay:x*.1},className:`mb-4 p-4 rounded-xl transition-all duration-300 border ${d?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,whileHover:{scale:1.02},children:[o.jsx("p",{className:`font-medium ${d?"text-gray-300":"text-gray-700"}`,children:m.message}),o.jsx("p",{className:`text-xs mt-2 ${d?"text-gray-400":"text-gray-500"}`,children:a(m.updatedAt?.toDate?.()||new Date)})]},m.id)):o.jsx(re.p,{initial:{opacity:0},animate:{opacity:1},className:`py-8 text-center ${d?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})})]})]}),o.jsxs(re.div,{className:`rounded-3xl p-6 shadow-2xl border backdrop-blur-sm ${d?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:h,whileHover:"hover",children:[o.jsxs("h3",{className:`text-xl font-bold mb-6 flex items-center gap-2 ${d?"text-white":"text-gray-900"}`,children:[o.jsx(Ur,{size:24}),"Únete a nuestros grupos"]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[{href:"https://chat.whatsapp.com/IG8v1E00lAD6RIOo7ZB5Kv",icon:Ur,title:"Avisos",subtitle:"Grupo de WhatsApp",color:"from-green-500 to-emerald-600"},{href:"https://chat.whatsapp.com/Gs6kTW4DBTi7dEMhnZV1yb",icon:Ur,title:"General",subtitle:"Grupo de WhatsApp",color:"from-blue-500 to-cyan-600"},{href:"https://chat.whatsapp.com/BqCOR6w8002695hbYXf5KA",icon:Ur,title:"Publicidad",subtitle:"Grupo de WhatsApp",color:"from-purple-500 to-pink-600"}].map((m,x)=>o.jsxs(re.a,{href:m.href,target:"_blank",rel:"noopener noreferrer",className:`flex items-center p-4 rounded-2xl transition-all duration-300 border group ${d?"bg-gray-700/50 hover:bg-gray-600/70 border-gray-600/50":"bg-gray-200/50 hover:bg-gray-300/70 border-gray-300/50"}`,whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:[o.jsx(re.div,{className:`flex-shrink-0 p-3 rounded-xl mr-4 bg-gradient-to-br ${m.color} text-white shadow-lg`,whileHover:{scale:1.1},children:o.jsx(m.icon,{size:24})}),o.jsxs("div",{children:[o.jsx("p",{className:`font-semibold ${d?"text-white":"text-gray-900"} group-hover:text-blue-500 transition-colors`,children:m.title}),o.jsx("p",{className:`text-sm ${d?"text-gray-300":"text-gray-600"}`,children:m.subtitle})]})]},x))})]})]})},eI=({notifications:r,formatDate:e,theme:t="dark"})=>{const n=t==="dark",i={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return o.jsxs(re.div,{className:`p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${n?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:i,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"notifications-title",children:[o.jsxs(re.h3,{id:"notifications-title",className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-8 bg-clip-text text-transparent bg-gradient-to-r ${n?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"} text-center`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:["Notificaciones",o.jsx("span",{className:`ml-2 bg-gradient-to-r ${n?"from-blue-400/20 to-purple-600/20":"from-blue-600/20 to-purple-800/20"} px-2 py-1 rounded-full text-sm font-medium`,children:r.length})]}),o.jsx(Vt,{children:r.length>0?o.jsx(re.div,{className:"space-y-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:r.map((a,c)=>o.jsx(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm transition-all duration-300 ${n?"bg-gray-800/70 border-gray-700/50 hover:bg-gray-700/70":"bg-white/70 border-gray-200/50 hover:bg-gray-50/70"}`,variants:s,whileHover:"hover",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:c*.1},"aria-labelledby":`notification-${a.id}-title`,children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"flex-shrink-0 pt-1",children:o.jsx(Th,{className:`text-xl ${n?"text-blue-400":"text-blue-600"}`})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{id:`notification-${a.id}-title`,className:`font-semibold text-base ${n?"text-white":"text-gray-900"} mb-2`,children:a.message}),o.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:e(a.updatedAt?.toDate?.()||new Date)})]})]})},a.id))}):o.jsxs(re.div,{className:"text-center py-16",variants:s,initial:"hidden",animate:"visible",children:[o.jsx(re.div,{className:`mx-auto w-20 h-20 rounded-2xl bg-gradient-to-br from-gray-400 to-gray-500 flex items-center justify-center mb-6 shadow-lg ${n?"bg-gray-700/50":"bg-gray-200/50"}`,animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:o.jsx(Th,{className:"text-white",size:32})}),o.jsx("h4",{className:`text-xl font-semibold mb-2 ${n?"text-gray-300":"text-gray-700"}`,children:"No hay notificaciones"}),o.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"No tienes mensajes nuevos. ¡Vuelve pronto para ver actualizaciones!"})]})})]})};eI.propTypes={notifications:q.arrayOf(q.shape({id:q.string.isRequired,message:q.string.isRequired,updatedAt:q.oneOfType([q.instanceOf(Date),q.shape({toDate:q.func})])})).isRequired,formatDate:q.func.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const AG="/assets/yape-sz-BXIcptMw.webp",NG="/assets/binance-sz-CWIZMLwL.webp",tI=({amount:r,setAmount:e,topUps:t,actionLoading:n,handleTopUpRequest:i,formatDate:s,theme:a="dark"})=>{const c=a==="dark",[d,h]=k.useState("PEN"),[p,m]=k.useState(3.75),[x,v]=k.useState(!1),[_,w]=k.useState(!1),[E,j]=k.useState(""),[P,V]=k.useState(5),L={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5}}};k.useEffect(()=>{(async()=>{v(!0),w(!1);try{const D=await fetch("https://api.exchangerate-api.com/v4/latest/USD");if(!D.ok)throw new Error("API request failed");const he=(await D.json()).rates.PEN||3.75;m(he*1.1)}catch(D){console.error("Error fetching exchange rate:",D),w(!0)}finally{v(!1)}})()},[]),k.useEffect(()=>{const M=Math.ceil(P/(p/1.1));V(d==="PEN"?5:M)},[d,p]),k.useEffect(()=>{const M=parseFloat(E);if(isNaN(M))e("");else{const D=d==="USD"?M*p:M;e(D.toFixed(2))}},[E,d,p,e]);const K=M=>{const D=M.target.value;(/^\d*\.?\d{0,2}$/.test(D)||D==="")&&j(D)},H=parseFloat(E),S=d==="USD"?H*p:H,N=isNaN(S)?"0.00":S.toFixed(2),I=!isNaN(H)&&H>=P,R=`Hola 😊, he realizado una recarga a través de ${d==="PEN"?"Yape":"Binance"} por ${d==="PEN"?`S/ ${N}`:`$ ${H?.toFixed(2)||"0.00"} (equivalente a S/ ${N})`}. Por favor, confirma mi pago.`;return o.jsxs(re.div,{className:"space-y-8 max-w-6xl mx-auto px-4 sm:px-0",variants:L,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"topup-title",children:[o.jsxs("div",{className:`p-6 sm:p-8 rounded-3xl shadow-md border ${c?"bg-gray-900/80 border-gray-700/30":"bg-white border-gray-300"}`,children:[o.jsx("h3",{id:"topup-title",className:"text-2xl sm:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-6 text-center",children:"Recargar saldo"}),o.jsxs("div",{className:"max-w-lg mx-auto space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block mb-2 font-medium ${c?"text-gray-300":"text-gray-700"}`,children:"Moneda"}),o.jsxs("select",{value:d,onChange:M=>{h(M.target.value),j(""),e("")},className:`w-full px-4 py-3 rounded-xl ${c?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300`,"aria-label":"Seleccionar moneda",children:[o.jsx("option",{value:"PEN",children:"S/ (PEN)"}),o.jsx("option",{value:"USD",children:"$ (USD)"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block mb-2 font-medium ${c?"text-gray-300":"text-gray-700"}`,children:["Monto a recargar (",d==="PEN"?"S/":"$",")"]}),o.jsx("input",{type:"number",value:E,onChange:K,className:`w-full px-4 py-3 rounded-xl ${c?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300 ${!I&&E?"border-red-500 focus:ring-red-400":""}`,placeholder:`Mínimo ${d==="PEN"?"S/ 5.00":`$${P.toFixed(2)}`}`,min:P,step:"0.01","aria-label":`Monto a recargar en ${d}`,"aria-invalid":!I&&E}),d==="USD"&&!isNaN(H)&&o.jsxs("p",{className:`text-sm mt-2 ${_?"text-red-400":c?"text-gray-400":"text-gray-600"}`,children:[_?"Error al cargar tasa. Usando tasa por defecto.":`Equivalente: S/ ${N} (Tasa: 1 USD ≈ ${p.toFixed(2)} PEN)`,x&&" (Cargando tasa...)"]}),!I&&E&&o.jsxs("p",{className:"text-sm text-red-400 mt-1",children:["Monto mínimo: ",d==="PEN"?"S/ 5.00":`$${P.toFixed(2)}`]})]}),o.jsx(re.button,{onClick:i,disabled:n.topUp||!I,className:`w-full py-3 px-4 rounded-xl font-medium text-lg transition-all duration-300 ${I&&!n.topUp?c?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500":"bg-gray-300 text-gray-500 cursor-not-allowed"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,whileHover:{scale:I&&!n.topUp?1.05:1},whileTap:{scale:I&&!n.topUp?.95:1},"aria-label":"Solicitar recarga",children:n.topUp?o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("div",{className:"animate-spin h-6 w-6 border-3 border-white rounded-full border-t-transparent mr-2"}),"Procesando..."]}):"Solicitar recarga"})]}),o.jsx("div",{className:`mt-8 p-6 rounded-2xl border ${c?"bg-gray-800/50 border-gray-700/30":"bg-gray-100 border-gray-300"} max-w-lg mx-auto`,children:o.jsxs(re.div,{className:"animate-fade-in",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[o.jsxs("h4",{className:`text-lg font-semibold ${c?"text-blue-400":"text-blue-600"} mb-4 flex items-center`,children:[o.jsx(Ki,{className:"mr-2"})," Pago con ",d==="PEN"?"Yape":"Binance"]}),o.jsxs("p",{className:`mb-3 ${c?"text-gray-300":"text-gray-700"}`,children:["Escanea el código QR",d==="PEN"?" o usa Yape con el número:":"."]}),d==="PEN"&&o.jsx("p",{className:`text-xl font-bold ${c?"text-white":"text-gray-900"} mb-3 text-center`,children:"📱 990477711"}),o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:`p-4 rounded-xl shadow-md ${c?"bg-white border-4 border-blue-600":"bg-white border border-gray-300"}`,children:o.jsx("img",{src:d==="PEN"?AG:NG,alt:`${d==="PEN"?"Yape":"Binance"} QR Code`,className:"w-48 h-48 object-contain",loading:"lazy"})})}),o.jsxs("p",{className:`mb-4 ${c?"text-gray-300":"text-gray-700"} text-center`,children:["Realiza el pago de ",d==="PEN"?`S/ ${N}`:`$ ${H?.toFixed(2)||"0.00"} (S/ ${N})`,". Confirma tu recarga vía WhatsApp."]}),o.jsxs(re.a,{href:`https://wa.me/51940990278?text=${encodeURIComponent(R)}`,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center justify-center w-full px-6 py-3 rounded-xl font-medium transition-all duration-300 ${c?"bg-green-500 hover:bg-green-600 text-white focus:ring-green-400":"bg-green-500 hover:bg-green-600 text-white focus:ring-green-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Confirmar pago por WhatsApp con ${d==="PEN"?"Yape":"Binance"}`,children:[o.jsx(Ur,{className:"mr-2"})," Confirmar por WhatsApp"]})]})})]}),o.jsxs("div",{className:`p-6 sm:p-8 rounded-3xl shadow-md border ${c?"bg-gray-900/80 border-gray-700/30":"bg-white border-gray-300"}`,children:[o.jsx("h3",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-6 text-center",children:"Historial de recargas"}),t.length>0?o.jsx("div",{className:"overflow-x-auto rounded-xl border",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[o.jsx("thead",{className:`${c?"bg-gray-800/50":"bg-gray-100"}`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${c?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Monto"}),o.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${c?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Estado"}),o.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${c?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Fecha"})]})}),o.jsx("tbody",{className:`${c?"bg-gray-800/50":"bg-white"} divide-y ${c?"divide-gray-600/50":"divide-gray-200"}`,children:t.map(M=>{const D=M.status==="aprobado"?"Aprobado":M.status==="pendiente"?"Pendiente":"Rechazado",F=M.status==="aprobado"?"green":M.status==="pendiente"?"yellow":"red";return o.jsxs("tr",{className:`${c?"hover:bg-gray-700/50":"hover:bg-gray-100"} transition-all duration-300`,children:[o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap font-medium ${c?"text-white":"text-gray-900"}`,children:["S/ ",M.amount.toFixed(2)]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full capitalize ${c?`bg-${F}-900/80 text-${F}-400`:`bg-${F}-500/20 text-${F}-600`}`,children:D})}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${c?"text-gray-400":"text-gray-600"}`,children:s(M.date)})]},M.id)})})]})}):o.jsxs(re.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-12",children:[o.jsx(Ki,{className:`mx-auto text-4xl ${c?"text-gray-400":"text-gray-500"} mb-4`}),o.jsx("p",{className:`text-lg ${c?"text-gray-400":"text-gray-600"}`,children:"No hay recargas registradas"})]})]})]})};tI.propTypes={amount:q.oneOfType([q.string,q.number]).isRequired,setAmount:q.func.isRequired,topUps:q.arrayOf(q.shape({id:q.string.isRequired,amount:q.oneOfType([q.string,q.number]).isRequired,status:q.string.isRequired,date:q.oneOfType([q.instanceOf(Date),q.string]).isRequired})).isRequired,actionLoading:q.shape({topUp:q.bool}).isRequired,handleTopUpRequest:q.func.isRequired,formatDate:q.func.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const rI=({providers:r,openRateProviderModal:e,deleteRatingProvider:t,theme:n="dark"})=>{const i=n==="dark",s={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},a={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return o.jsxs(re.div,{className:`p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${i?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:s,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"providers-title",children:[o.jsxs(re.h3,{id:"providers-title",className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-8 bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"} text-center`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:["Proveedores",o.jsx("span",{className:`ml-2 bg-gradient-to-r ${i?"from-blue-400/20 to-purple-600/20":"from-blue-600/20 to-purple-800/20"} px-2 py-1 rounded-full text-sm font-medium`,children:r.length})]}),o.jsx(Vt,{children:r.length>0?o.jsx(re.div,{className:"space-y-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:r.map((c,d)=>o.jsx(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm transition-all duration-300 ${i?"bg-gray-800/70 border-gray-700/50 hover:bg-gray-700/70":"bg-white/70 border-gray-200/50 hover:bg-gray-50/70"}`,variants:a,whileHover:"hover","aria-labelledby":`provider-${c.id}-title`,children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:o.jsx(ki,{className:"text-white",size:24})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{id:`provider-${c.id}-title`,className:`font-bold text-lg ${i?"text-white":"text-gray-900"}`,children:c.name}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(Ah,{className:`text-sm ${i?"text-gray-400":"text-gray-600"}`}),o.jsx("span",{className:`text-sm ${i?"text-gray-400":"text-gray-600"}`,children:c.phone})]}),c.hasRated&&o.jsx("div",{className:"flex items-center gap-2 mt-2",children:o.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((h,p)=>o.jsx(tg,{size:16,className:`${p<c.rating?"text-yellow-400 fill-current":i?"text-gray-600":"text-gray-400"}`},p))})})]})]}),c.hasRated?o.jsxs(re.button,{onClick:()=>t(c),className:`px-4 py-2 rounded-xl font-semibold transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 ${i?"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white focus:ring-red-400":"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white focus:ring-red-500"}`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Eliminar valoración del proveedor ${c.name}`,children:[o.jsx(iw,{size:16}),o.jsx("span",{className:"hidden sm:inline",children:"Eliminar"})]}):o.jsxs(re.button,{onClick:()=>e(c),className:`px-6 py-3 rounded-xl font-semibold transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 ${i?"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white focus:ring-purple-400":"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white focus:ring-purple-500"}`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Calificar al proveedor ${c.name}`,children:[o.jsx(tg,{size:18}),o.jsx("span",{children:"Calificar"})]})]})},c.id))}):o.jsxs(re.div,{className:"text-center py-16",variants:a,initial:"hidden",animate:"visible",children:[o.jsx(re.div,{className:`mx-auto w-20 h-20 rounded-2xl bg-gradient-to-br from-gray-400 to-gray-500 flex items-center justify-center mb-6 shadow-lg ${i?"bg-gray-700/50":"bg-gray-200/50"}`,animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:o.jsx(ki,{className:"text-white",size:32})}),o.jsx("h4",{className:`text-xl font-semibold mb-2 ${i?"text-gray-300":"text-gray-700"}`,children:"No hay proveedores"}),o.jsx("p",{className:`text-sm ${i?"text-gray-400":"text-gray-600"}`,children:"No has realizado compras con proveedores aún. ¡Tu primer pedido desbloqueará esta sección!"})]})})]})};rI.propTypes={providers:q.arrayOf(q.shape({id:q.string.isRequired,name:q.string.isRequired,phone:q.string.isRequired,hasRated:q.bool.isRequired,rating:q.number})).isRequired,openRateProviderModal:q.func.isRequired,deleteRatingProvider:q.func.isRequired,theme:q.oneOf(["light","dark"]).isRequired};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var ng={};ng.version="0.18.5";var nI=1252,kG=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],iI=function(r){kG.indexOf(r)!=-1&&(nI=r)};function SG(){iI(1252)}var Nh=function(r){iI(r)};function CG(){Nh(1200),SG()}var Lp=function(e){return String.fromCharCode(e)},NN=function(e){return String.fromCharCode(e)},ig,Ko="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function kh(r){for(var e="",t=0,n=0,i=0,s=0,a=0,c=0,d=0,h=0;h<r.length;)t=r.charCodeAt(h++),s=t>>2,n=r.charCodeAt(h++),a=(t&3)<<4|n>>4,i=r.charCodeAt(h++),c=(n&15)<<2|i>>6,d=i&63,isNaN(n)?c=d=64:isNaN(i)&&(d=64),e+=Ko.charAt(s)+Ko.charAt(a)+Ko.charAt(c)+Ko.charAt(d);return e}function io(r){var e="",t=0,n=0,i=0,s=0,a=0,c=0,d=0;r=r.replace(/[^\w\+\/\=]/g,"");for(var h=0;h<r.length;)s=Ko.indexOf(r.charAt(h++)),a=Ko.indexOf(r.charAt(h++)),t=s<<2|a>>4,e+=String.fromCharCode(t),c=Ko.indexOf(r.charAt(h++)),n=(a&15)<<4|c>>2,c!==64&&(e+=String.fromCharCode(n)),d=Ko.indexOf(r.charAt(h++)),i=(c&3)<<6|d,d!==64&&(e+=String.fromCharCode(i));return e}var cr=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),uo=(function(){if(typeof Buffer<"u"){var r=!Buffer.from;if(!r)try{Buffer.from("foo","utf8")}catch{r=!0}return r?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function wc(r){return cr?Buffer.alloc?Buffer.alloc(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}function kN(r){return cr?Buffer.allocUnsafe?Buffer.allocUnsafe(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}var Os=function(e){return cr?uo(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function nx(r){if(typeof ArrayBuffer>"u")return Os(r);for(var e=new ArrayBuffer(r.length),t=new Uint8Array(e),n=0;n!=r.length;++n)t[n]=r.charCodeAt(n)&255;return e}function uf(r){if(Array.isArray(r))return r.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],t=0;t<r.length;++t)e[t]=String.fromCharCode(r[t]);return e.join("")}function IG(r){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(r)}var Ln=cr?function(r){return Buffer.concat(r.map(function(e){return Buffer.isBuffer(e)?e:uo(e)}))}:function(r){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<r.length;++e)t+=r[e].length;var n=new Uint8Array(t),i=0;for(e=0,t=0;e<r.length;t+=i,++e)if(i=r[e].length,r[e]instanceof Uint8Array)n.set(r[e],t);else{if(typeof r[e]=="string")throw"wtf";n.set(new Uint8Array(r[e]),t)}return n}return[].concat.apply([],r.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function PG(r){for(var e=[],t=0,n=r.length+250,i=wc(r.length+255),s=0;s<r.length;++s){var a=r.charCodeAt(s);if(a<128)i[t++]=a;else if(a<2048)i[t++]=192|a>>6&31,i[t++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var c=r.charCodeAt(++s)&1023;i[t++]=240|a>>8&7,i[t++]=128|a>>2&63,i[t++]=128|c>>6&15|(a&3)<<4,i[t++]=128|c&63}else i[t++]=224|a>>12&15,i[t++]=128|a>>6&63,i[t++]=128|a&63;t>n&&(e.push(i.slice(0,t)),t=0,i=wc(65535),n=65530)}return e.push(i.slice(0,t)),Ln(e)}var G0=/\u0000/g,Mp=/[\u0001-\u0006]/g;function Gu(r){for(var e="",t=r.length-1;t>=0;)e+=r.charAt(t--);return e}function Vs(r,e){var t=""+r;return t.length>=e?t:Yr("0",e-t.length)+t}function sw(r,e){var t=""+r;return t.length>=e?t:Yr(" ",e-t.length)+t}function sg(r,e){var t=""+r;return t.length>=e?t:t+Yr(" ",e-t.length)}function RG(r,e){var t=""+Math.round(r);return t.length>=e?t:Yr("0",e-t.length)+t}function jG(r,e){var t=""+r;return t.length>=e?t:Yr("0",e-t.length)+t}var SN=Math.pow(2,32);function Nu(r,e){if(r>SN||r<-SN)return RG(r,e);var t=Math.round(r);return jG(t,e)}function ag(r,e){return e=e||0,r.length>=7+e&&(r.charCodeAt(e)|32)===103&&(r.charCodeAt(e+1)|32)===101&&(r.charCodeAt(e+2)|32)===110&&(r.charCodeAt(e+3)|32)===101&&(r.charCodeAt(e+4)|32)===114&&(r.charCodeAt(e+5)|32)===97&&(r.charCodeAt(e+6)|32)===108}var CN=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],_v=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function DG(r){return r||(r={}),r[0]="General",r[1]="0",r[2]="0.00",r[3]="#,##0",r[4]="#,##0.00",r[9]="0%",r[10]="0.00%",r[11]="0.00E+00",r[12]="# ?/?",r[13]="# ??/??",r[14]="m/d/yy",r[15]="d-mmm-yy",r[16]="d-mmm",r[17]="mmm-yy",r[18]="h:mm AM/PM",r[19]="h:mm:ss AM/PM",r[20]="h:mm",r[21]="h:mm:ss",r[22]="m/d/yy h:mm",r[37]="#,##0 ;(#,##0)",r[38]="#,##0 ;[Red](#,##0)",r[39]="#,##0.00;(#,##0.00)",r[40]="#,##0.00;[Red](#,##0.00)",r[45]="mm:ss",r[46]="[h]:mm:ss",r[47]="mmss.0",r[48]="##0.0E+0",r[49]="@",r[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',r}var Qr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},IN={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},FG={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function og(r,e,t){for(var n=r<0?-1:1,i=r*n,s=0,a=1,c=0,d=1,h=0,p=0,m=Math.floor(i);h<e&&(m=Math.floor(i),c=m*a+s,p=m*h+d,!(i-m<5e-8));)i=1/(i-m),s=a,a=c,d=h,h=p;if(p>e&&(h>e?(p=d,c=s):(p=h,c=a)),!t)return[0,n*c,p];var x=Math.floor(n*c/p);return[x,n*c-x*p,p]}function Vp(r,e,t){if(r>2958465||r<0)return null;var n=r|0,i=Math.floor(86400*(r-n)),s=0,a=[],c={D:n,T:i,u:86400*(r-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(c.u)<1e-6&&(c.u=0),e&&e.date1904&&(n+=1462),c.u>.9999&&(c.u=0,++i==86400&&(c.T=i=0,++n,++c.D)),n===60)a=t?[1317,10,29]:[1900,2,29],s=3;else if(n===0)a=t?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var d=new Date(1900,0,1);d.setDate(d.getDate()+n-1),a=[d.getFullYear(),d.getMonth()+1,d.getDate()],s=d.getDay(),n<60&&(s=(s+6)%7),t&&(s=UG(d,a))}return c.y=a[0],c.m=a[1],c.d=a[2],c.S=i%60,i=Math.floor(i/60),c.M=i%60,i=Math.floor(i/60),c.H=i,c.q=s,c}var sI=new Date(1899,11,31,0,0,0),OG=sI.getTime(),LG=new Date(1900,2,1,0,0,0);function aI(r,e){var t=r.getTime();return e?t-=1461*24*60*60*1e3:r>=LG&&(t+=1440*60*1e3),(t-(OG+(r.getTimezoneOffset()-sI.getTimezoneOffset())*6e4))/(1440*60*1e3)}function aw(r){return r.indexOf(".")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function MG(r){return r.indexOf("E")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function VG(r){var e=r<0?12:11,t=aw(r.toFixed(12));return t.length<=e||(t=r.toPrecision(10),t.length<=e)?t:r.toExponential(5)}function $G(r){var e=aw(r.toFixed(11));return e.length>(r<0?12:11)||e==="0"||e==="-0"?r.toPrecision(6):e}function BG(r){var e=Math.floor(Math.log(Math.abs(r))*Math.LOG10E),t;return e>=-4&&e<=-1?t=r.toPrecision(10+e):Math.abs(e)<=9?t=VG(r):e===10?t=r.toFixed(10).substr(0,12):t=$G(r),aw(MG(t.toUpperCase()))}function O1(r,e){switch(typeof r){case"string":return r;case"boolean":return r?"TRUE":"FALSE";case"number":return(r|0)===r?r.toString(10):BG(r);case"undefined":return"";case"object":if(r==null)return"";if(r instanceof Date)return ul(14,aI(r,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+r)}function UG(r,e){e[0]-=581;var t=r.getDay();return r<60&&(t=(t+6)%7),t}function zG(r,e,t,n){var i="",s=0,a=0,c=t.y,d,h=0;switch(r){case 98:c=t.y+543;case 121:switch(e.length){case 1:case 2:d=c%100,h=2;break;default:d=c%1e4,h=4;break}break;case 109:switch(e.length){case 1:case 2:d=t.m,h=e.length;break;case 3:return _v[t.m-1][1];case 5:return _v[t.m-1][0];default:return _v[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:d=t.d,h=e.length;break;case 3:return CN[t.q][0];default:return CN[t.q][1]}break;case 104:switch(e.length){case 1:case 2:d=1+(t.H+11)%12,h=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:d=t.H,h=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:d=t.M,h=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?Vs(t.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,s=Math.round(a*(t.S+t.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=Vs(s,2+n),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":d=t.D*24+t.H;break;case"[m]":case"[mm]":d=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":d=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}h=e.length===3?1:2;break;case 101:d=c,h=1;break}var p=h>0?Vs(d,h):"";return p}function Yo(r){var e=3;if(r.length<=e)return r;for(var t=r.length%e,n=r.substr(0,t);t!=r.length;t+=e)n+=(n.length>0?",":"")+r.substr(t,e);return n}var oI=/%/g;function HG(r,e,t){var n=e.replace(oI,""),i=e.length-n.length;return Ka(r,n,t*Math.pow(10,2*i))+Yr("%",i)}function WG(r,e,t){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Ka(r,e.substr(0,n),t/Math.pow(10,3*(e.length-n)))}function lI(r,e){var t,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+lI(r,-e);var i=r.indexOf(".");i===-1&&(i=r.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),t.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(c,d,h,p){return d+h+p.substr(0,(i+s)%i)+"."+p.substr(s)+"E"})}else t=e.toExponential(n);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var cI=/# (\?+)( ?)\/( ?)(\d+)/;function qG(r,e,t){var n=parseInt(r[4],10),i=Math.round(e*n),s=Math.floor(i/n),a=i-s*n,c=n;return t+(s===0?"":""+s)+" "+(a===0?Yr(" ",r[1].length+1+r[4].length):sw(a,r[1].length)+r[2]+"/"+r[3]+Vs(c,r[4].length))}function GG(r,e,t){return t+(e===0?"":""+e)+Yr(" ",r[1].length+2+r[4].length)}var uI=/^#*0*\.([0#]+)/,dI=/\).*[0#]/,hI=/\(###\) ###\\?-####/;function oi(r){for(var e="",t,n=0;n!=r.length;++n)switch(t=r.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function PN(r,e){var t=Math.pow(10,e);return""+Math.round(r*t)/t}function RN(r,e){var t=r-Math.floor(r),n=Math.pow(10,e);return e<(""+Math.round(t*n)).length?0:Math.round(t*n)}function KG(r,e){return e<(""+Math.round((r-Math.floor(r))*Math.pow(10,e))).length?1:0}function YG(r){return r<2147483647&&r>-2147483648?""+(r>=0?r|0:r-1|0):""+Math.floor(r)}function us(r,e,t){if(r.charCodeAt(0)===40&&!e.match(dI)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?us("n",n,t):"("+us("n",n,-t)+")"}if(e.charCodeAt(e.length-1)===44)return WG(r,e,t);if(e.indexOf("%")!==-1)return HG(r,e,t);if(e.indexOf("E")!==-1)return lI(e,t);if(e.charCodeAt(0)===36)return"$"+us(r,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,c,d=Math.abs(t),h=t<0?"-":"";if(e.match(/^00+$/))return h+Nu(d,e.length);if(e.match(/^[#?]+$/))return i=Nu(t,0),i==="0"&&(i=""),i.length>e.length?i:oi(e.substr(0,e.length-i.length))+i;if(s=e.match(cI))return qG(s,d,h);if(e.match(/^#+0+$/))return h+Nu(d,e.length-e.indexOf("0"));if(s=e.match(uI))return i=PN(t,s[1].length).replace(/^([^\.]+)$/,"$1."+oi(s[1])).replace(/\.$/,"."+oi(s[1])).replace(/\.(\d*)$/,function(_,w){return"."+w+Yr("0",oi(s[1]).length-w.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return h+PN(d,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return h+Yo(Nu(d,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+us(r,e,-t):Yo(""+(Math.floor(t)+KG(t,s[1].length)))+"."+Vs(RN(t,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return us(r,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Gu(us(r,e.replace(/[\\-]/g,""),t)),a=0,Gu(Gu(e.replace(/\\/g,"")).replace(/[0#]/g,function(_){return a<i.length?i.charAt(a++):_==="0"?"0":""}));if(e.match(hI))return i=us(r,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var p="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),c=og(d,Math.pow(10,a)-1,!1),i=""+h,p=Ka("n",s[1],c[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),i+=p+s[2]+"/"+s[3],p=sg(c[2],a),p.length<s[4].length&&(p=oi(s[4].substr(s[4].length-p.length))+p),i+=p,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),c=og(d,Math.pow(10,a)-1,!0),h+(c[0]||(c[1]?"":"0"))+" "+(c[1]?sw(c[1],a)+s[2]+"/"+s[3]+sg(c[2],a):Yr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=Nu(t,0),e.length<=i.length?i:oi(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var m=e.indexOf(".")-a,x=e.length-i.length-m;return oi(e.substr(0,m)+i+e.substr(e.length-x))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=RN(t,s[1].length),t<0?"-"+us(r,e,-t):Yo(YG(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(_){return"00,"+(_.length<3?Vs(0,3-_.length):"")+_})+"."+Vs(a,s[1].length);switch(e){case"###,##0.00":return us(r,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var v=Yo(Nu(d,0));return v!=="0"?h+v:"";case"###,###.00":return us(r,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return us(r,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function XG(r,e,t){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Ka(r,e.substr(0,n),t/Math.pow(10,3*(e.length-n)))}function QG(r,e,t){var n=e.replace(oI,""),i=e.length-n.length;return Ka(r,n,t*Math.pow(10,2*i))+Yr("%",i)}function fI(r,e){var t,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+fI(r,-e);var i=r.indexOf(".");i===-1&&(i=r.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),!t.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(c,d,h,p){return d+h+p.substr(0,(i+s)%i)+"."+p.substr(s)+"E"})}else t=e.toExponential(n);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function sa(r,e,t){if(r.charCodeAt(0)===40&&!e.match(dI)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?sa("n",n,t):"("+sa("n",n,-t)+")"}if(e.charCodeAt(e.length-1)===44)return XG(r,e,t);if(e.indexOf("%")!==-1)return QG(r,e,t);if(e.indexOf("E")!==-1)return fI(e,t);if(e.charCodeAt(0)===36)return"$"+sa(r,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,c,d=Math.abs(t),h=t<0?"-":"";if(e.match(/^00+$/))return h+Vs(d,e.length);if(e.match(/^[#?]+$/))return i=""+t,t===0&&(i=""),i.length>e.length?i:oi(e.substr(0,e.length-i.length))+i;if(s=e.match(cI))return GG(s,d,h);if(e.match(/^#+0+$/))return h+Vs(d,e.length-e.indexOf("0"));if(s=e.match(uI))return i=(""+t).replace(/^([^\.]+)$/,"$1."+oi(s[1])).replace(/\.$/,"."+oi(s[1])),i=i.replace(/\.(\d*)$/,function(_,w){return"."+w+Yr("0",oi(s[1]).length-w.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return h+(""+d).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return h+Yo(""+d);if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+sa(r,e,-t):Yo(""+t)+"."+Yr("0",s[1].length);if(s=e.match(/^#,#*,#0/))return sa(r,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Gu(sa(r,e.replace(/[\\-]/g,""),t)),a=0,Gu(Gu(e.replace(/\\/g,"")).replace(/[0#]/g,function(_){return a<i.length?i.charAt(a++):_==="0"?"0":""}));if(e.match(hI))return i=sa(r,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var p="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),c=og(d,Math.pow(10,a)-1,!1),i=""+h,p=Ka("n",s[1],c[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),i+=p+s[2]+"/"+s[3],p=sg(c[2],a),p.length<s[4].length&&(p=oi(s[4].substr(s[4].length-p.length))+p),i+=p,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),c=og(d,Math.pow(10,a)-1,!0),h+(c[0]||(c[1]?"":"0"))+" "+(c[1]?sw(c[1],a)+s[2]+"/"+s[3]+sg(c[2],a):Yr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+t,e.length<=i.length?i:oi(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var m=e.indexOf(".")-a,x=e.length-i.length-m;return oi(e.substr(0,m)+i+e.substr(e.length-x))}if(s=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+sa(r,e,-t):Yo(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(_){return"00,"+(_.length<3?Vs(0,3-_.length):"")+_})+"."+Vs(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var v=Yo(""+d);return v!=="0"?h+v:"";default:if(e.match(/\.[0#?]*$/))return sa(r,e.slice(0,e.lastIndexOf(".")),t)+oi(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Ka(r,e,t){return(t|0)===t?sa(r,e,t):us(r,e,t)}function JG(r){for(var e=[],t=!1,n=0,i=0;n<r.length;++n)switch(r.charCodeAt(n)){case 34:t=!t;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=r.substr(i,n-i),i=n+1}if(e[e.length]=r.substr(i),t===!0)throw new Error("Format |"+r+"| unterminated string ");return e}var pI=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function mI(r){for(var e=0,t="",n="";e<r.length;)switch(t=r.charAt(e)){case"G":ag(r,e)&&(e+=6),e++;break;case'"':for(;r.charCodeAt(++e)!==34&&e<r.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(r.charAt(e+1)==="1"||r.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(r.substr(e,3).toUpperCase()==="A/P"||r.substr(e,5).toUpperCase()==="AM/PM"||r.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(n=t;r.charAt(e++)!=="]"&&e<r.length;)n+=r.charAt(e);if(n.match(pI))return!0;break;case".":case"0":case"#":for(;e<r.length&&("0#?.,E+-%".indexOf(t=r.charAt(++e))>-1||t=="\\"&&r.charAt(e+1)=="-"&&"0#".indexOf(r.charAt(e+2))>-1););break;case"?":for(;r.charAt(++e)===t;);break;case"*":++e,(r.charAt(e)==" "||r.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<r.length&&"0123456789".indexOf(r.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function ZG(r,e,t,n){for(var i=[],s="",a=0,c="",d="t",h,p,m,x="H";a<r.length;)switch(c=r.charAt(a)){case"G":if(!ag(r,a))throw new Error("unrecognized character "+c+" in "+r);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(m=r.charCodeAt(++a))!==34&&a<r.length;)s+=String.fromCharCode(m);i[i.length]={t:"t",v:s},++a;break;case"\\":var v=r.charAt(++a),_=v==="("||v===")"?v:"t";i[i.length]={t:_,v},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(r.charAt(a+1)==="1"||r.charAt(a+1)==="2"){if(h==null&&(h=Vp(e,t,r.charAt(a+1)==="2"),h==null))return"";i[i.length]={t:"X",v:r.substr(a,2)},d=c,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":c=c.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||h==null&&(h=Vp(e,t),h==null))return"";for(s=c;++a<r.length&&r.charAt(a).toLowerCase()===c;)s+=c;c==="m"&&d.toLowerCase()==="h"&&(c="M"),c==="h"&&(c=x),i[i.length]={t:c,v:s},d=c;break;case"A":case"a":case"上":var w={t:c,v:c};if(h==null&&(h=Vp(e,t)),r.substr(a,3).toUpperCase()==="A/P"?(h!=null&&(w.v=h.H>=12?"P":"A"),w.t="T",x="h",a+=3):r.substr(a,5).toUpperCase()==="AM/PM"?(h!=null&&(w.v=h.H>=12?"PM":"AM"),w.t="T",a+=5,x="h"):r.substr(a,5).toUpperCase()==="上午/下午"?(h!=null&&(w.v=h.H>=12?"下午":"上午"),w.t="T",a+=5,x="h"):(w.t="t",++a),h==null&&w.t==="T")return"";i[i.length]=w,d=c;break;case"[":for(s=c;r.charAt(a++)!=="]"&&a<r.length;)s+=r.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(pI)){if(h==null&&(h=Vp(e,t),h==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},d=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",mI(r)||(i[i.length]={t:"t",v:s}));break;case".":if(h!=null){for(s=c;++a<r.length&&(c=r.charAt(a))==="0";)s+=c;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=c;++a<r.length&&"0#?.,E+-%".indexOf(c=r.charAt(a))>-1;)s+=c;i[i.length]={t:"n",v:s};break;case"?":for(s=c;r.charAt(++a)===c;)s+=c;i[i.length]={t:c,v:s},d=c;break;case"*":++a,(r.charAt(a)==" "||r.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:n===1?"t":c,v:c},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=c;a<r.length&&"0123456789".indexOf(r.charAt(++a))>-1;)s+=r.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:c,v:c},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(c)===-1)throw new Error("unrecognized character "+c+" in "+r);i[i.length]={t:"t",v:c},++a;break}var E=0,j=0,P;for(a=i.length-1,d="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=x,d="h",E<1&&(E=1);break;case"s":(P=i[a].v.match(/\.0+$/))&&(j=Math.max(j,P[0].length-1)),E<3&&(E=3);case"d":case"y":case"M":case"e":d=i[a].t;break;case"m":d==="s"&&(i[a].t="M",E<2&&(E=2));break;case"X":break;case"Z":E<1&&i[a].v.match(/[Hh]/)&&(E=1),E<2&&i[a].v.match(/[Mm]/)&&(E=2),E<3&&i[a].v.match(/[Ss]/)&&(E=3)}switch(E){case 0:break;case 1:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M),h.M>=60&&(h.M=0,++h.H);break;case 2:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M);break}var V="",L;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=zG(i[a].t.charCodeAt(0),i[a].v,h,j),i[a].t="t";break;case"n":case"?":for(L=a+1;i[L]!=null&&((c=i[L].t)==="?"||c==="D"||(c===" "||c==="t")&&i[L+1]!=null&&(i[L+1].t==="?"||i[L+1].t==="t"&&i[L+1].v==="/")||i[a].t==="("&&(c===" "||c==="n"||c===")")||c==="t"&&(i[L].v==="/"||i[L].v===" "&&i[L+1]!=null&&i[L+1].t=="?"));)i[a].v+=i[L].v,i[L]={v:"",t:";"},++L;V+=i[a].v,a=L-1;break;case"G":i[a].t="t",i[a].v=O1(e,t);break}var K="",H,S;if(V.length>0){V.charCodeAt(0)==40?(H=e<0&&V.charCodeAt(0)===45?-e:e,S=Ka("n",V,H)):(H=e<0&&n>1?-e:e,S=Ka("n",V,H),H<0&&i[0]&&i[0].t=="t"&&(S=S.substr(1),i[0].v="-"+i[0].v)),L=S.length-1;var N=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){N=a;break}var I=i.length;if(N===i.length&&S.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(L>=i[a].v.length-1?(L-=i[a].v.length,i[a].v=S.substr(L+1,i[a].v.length)):L<0?i[a].v="":(i[a].v=S.substr(0,L+1),L=-1),i[a].t="t",I=a);L>=0&&I<i.length&&(i[I].v=S.substr(0,L+1)+i[I].v)}else if(N!==i.length&&S.indexOf("E")===-1){for(L=S.indexOf(".")-1,a=N;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(p=i[a].v.indexOf(".")>-1&&a===N?i[a].v.indexOf(".")-1:i[a].v.length-1,K=i[a].v.substr(p+1);p>=0;--p)L>=0&&(i[a].v.charAt(p)==="0"||i[a].v.charAt(p)==="#")&&(K=S.charAt(L--)+K);i[a].v=K,i[a].t="t",I=a}for(L>=0&&I<i.length&&(i[I].v=S.substr(0,L+1)+i[I].v),L=S.indexOf(".")+1,a=N;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==N)){for(p=i[a].v.indexOf(".")>-1&&a===N?i[a].v.indexOf(".")+1:0,K=i[a].v.substr(0,p);p<i[a].v.length;++p)L<S.length&&(K+=S.charAt(L++));i[a].v=K,i[a].t="t",I=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(H=n>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Ka(i[a].t,i[a].v,H),i[a].t="t");var R="";for(a=0;a!==i.length;++a)i[a]!=null&&(R+=i[a].v);return R}var jN=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function DN(r,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(r==t)return!0;break;case">":if(r>t)return!0;break;case"<":if(r<t)return!0;break;case"<>":if(r!=t)return!0;break;case">=":if(r>=t)return!0;break;case"<=":if(r<=t)return!0;break}return!1}function eK(r,e){var t=JG(r),n=t.length,i=t[n-1].indexOf("@");if(n<4&&i>-1&&--n,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var s=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[n,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var a=t[0].match(jN),c=t[1].match(jN);return DN(e,a)?[n,t[0]]:DN(e,c)?[n,t[1]]:[n,t[a!=null&&c!=null?2:1]]}return[n,s]}function ul(r,e,t){t==null&&(t={});var n="";switch(typeof r){case"string":r=="m/d/yy"&&t.dateNF?n=t.dateNF:n=r;break;case"number":r==14&&t.dateNF?n=t.dateNF:n=(t.table!=null?t.table:Qr)[r],n==null&&(n=t.table&&t.table[IN[r]]||Qr[IN[r]]),n==null&&(n=FG[r]||"General");break}if(ag(n,0))return O1(e,t);e instanceof Date&&(e=aI(e,t.date1904));var i=eK(n,e);if(ag(i[1]))return O1(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return ZG(i[1],e,t,i[0])}function gI(r,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(Qr[t]==null){e<0&&(e=t);continue}if(Qr[t]==r){e=t;break}}e<0&&(e=391)}return Qr[e]=r,e}function ix(r){for(var e=0;e!=392;++e)r[e]!==void 0&&gI(r[e],e)}function sx(){Qr=DG()}var xI=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function tK(r){var e=typeof r=="number"?Qr[r]:r;return e=e.replace(xI,"(\\d+)"),new RegExp("^"+e+"$")}function rK(r,e,t){var n=-1,i=-1,s=-1,a=-1,c=-1,d=-1;(e.match(xI)||[]).forEach(function(m,x){var v=parseInt(t[x+1],10);switch(m.toLowerCase().charAt(0)){case"y":n=v;break;case"d":s=v;break;case"h":a=v;break;case"s":d=v;break;case"m":a>=0?c=v:i=v;break}}),d>=0&&c==-1&&i>=0&&(c=i,i=-1);var h=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);h.length==7&&(h="0"+h),h.length==8&&(h="20"+h);var p=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2);return a==-1&&c==-1&&d==-1?h:n==-1&&i==-1&&s==-1?p:h+"T"+p}var nK=(function(){var r={};r.version="1.2.0";function e(){for(var S=0,N=new Array(256),I=0;I!=256;++I)S=I,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,N[I]=S;return typeof Int32Array<"u"?new Int32Array(N):N}var t=e();function n(S){var N=0,I=0,R=0,M=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)M[R]=S[R];for(R=0;R!=256;++R)for(I=S[R],N=256+R;N<4096;N+=256)I=M[N]=I>>>8^S[I&255];var D=[];for(R=1;R!=16;++R)D[R-1]=typeof Int32Array<"u"?M.subarray(R*256,R*256+256):M.slice(R*256,R*256+256);return D}var i=n(t),s=i[0],a=i[1],c=i[2],d=i[3],h=i[4],p=i[5],m=i[6],x=i[7],v=i[8],_=i[9],w=i[10],E=i[11],j=i[12],P=i[13],V=i[14];function L(S,N){for(var I=N^-1,R=0,M=S.length;R<M;)I=I>>>8^t[(I^S.charCodeAt(R++))&255];return~I}function K(S,N){for(var I=N^-1,R=S.length-15,M=0;M<R;)I=V[S[M++]^I&255]^P[S[M++]^I>>8&255]^j[S[M++]^I>>16&255]^E[S[M++]^I>>>24]^w[S[M++]]^_[S[M++]]^v[S[M++]]^x[S[M++]]^m[S[M++]]^p[S[M++]]^h[S[M++]]^d[S[M++]]^c[S[M++]]^a[S[M++]]^s[S[M++]]^t[S[M++]];for(R+=15;M<R;)I=I>>>8^t[(I^S[M++])&255];return~I}function H(S,N){for(var I=N^-1,R=0,M=S.length,D=0,F=0;R<M;)D=S.charCodeAt(R++),D<128?I=I>>>8^t[(I^D)&255]:D<2048?(I=I>>>8^t[(I^(192|D>>6&31))&255],I=I>>>8^t[(I^(128|D&63))&255]):D>=55296&&D<57344?(D=(D&1023)+64,F=S.charCodeAt(R++)&1023,I=I>>>8^t[(I^(240|D>>8&7))&255],I=I>>>8^t[(I^(128|D>>2&63))&255],I=I>>>8^t[(I^(128|F>>6&15|(D&3)<<4))&255],I=I>>>8^t[(I^(128|F&63))&255]):(I=I>>>8^t[(I^(224|D>>12&15))&255],I=I>>>8^t[(I^(128|D>>6&63))&255],I=I>>>8^t[(I^(128|D&63))&255]);return~I}return r.table=t,r.bstr=L,r.buf=K,r.str=H,r})(),_r=(function(){var e={};e.version="1.2.1";function t(z,J){for(var Y=z.split("/"),X=J.split("/"),Z=0,O=0,Q=Math.min(Y.length,X.length);Z<Q;++Z){if(O=Y[Z].length-X[Z].length)return O;if(Y[Z]!=X[Z])return Y[Z]<X[Z]?-1:1}return Y.length-X.length}function n(z){if(z.charAt(z.length-1)=="/")return z.slice(0,-1).indexOf("/")===-1?z:n(z.slice(0,-1));var J=z.lastIndexOf("/");return J===-1?z:z.slice(0,J+1)}function i(z){if(z.charAt(z.length-1)=="/")return i(z.slice(0,-1));var J=z.lastIndexOf("/");return J===-1?z:z.slice(J+1)}function s(z,J){typeof J=="string"&&(J=new Date(J));var Y=J.getHours();Y=Y<<6|J.getMinutes(),Y=Y<<5|J.getSeconds()>>>1,z.write_shift(2,Y);var X=J.getFullYear()-1980;X=X<<4|J.getMonth()+1,X=X<<5|J.getDate(),z.write_shift(2,X)}function a(z){var J=z.read_shift(2)&65535,Y=z.read_shift(2)&65535,X=new Date,Z=Y&31;Y>>>=5;var O=Y&15;Y>>>=4,X.setMilliseconds(0),X.setFullYear(Y+1980),X.setMonth(O-1),X.setDate(Z);var Q=J&31;J>>>=5;var oe=J&63;return J>>>=6,X.setHours(J),X.setMinutes(oe),X.setSeconds(Q<<1),X}function c(z){Ui(z,0);for(var J={},Y=0;z.l<=z.length-4;){var X=z.read_shift(2),Z=z.read_shift(2),O=z.l+Z,Q={};switch(X){case 21589:Y=z.read_shift(1),Y&1&&(Q.mtime=z.read_shift(4)),Z>5&&(Y&2&&(Q.atime=z.read_shift(4)),Y&4&&(Q.ctime=z.read_shift(4))),Q.mtime&&(Q.mt=new Date(Q.mtime*1e3));break}z.l=O,J[X]=Q}return J}var d;function h(){return d||(d={})}function p(z,J){if(z[0]==80&&z[1]==75)return pt(z,J);if((z[0]|32)==109&&(z[1]|32)==105)return Zi(z,J);if(z.length<512)throw new Error("CFB file size "+z.length+" < 512");var Y=3,X=512,Z=0,O=0,Q=0,oe=0,se=0,ce=[],fe=z.slice(0,512);Ui(fe,0);var je=m(fe);switch(Y=je[0],Y){case 3:X=512;break;case 4:X=4096;break;case 0:if(je[1]==0)return pt(z,J);default:throw new Error("Major Version: Expected 3 or 4 saw "+Y)}X!==512&&(fe=z.slice(0,X),Ui(fe,28));var Ve=z.slice(0,X);x(fe,Y);var qe=fe.read_shift(4,"i");if(Y===3&&qe!==0)throw new Error("# Directory Sectors: Expected 0 saw "+qe);fe.l+=4,Q=fe.read_shift(4,"i"),fe.l+=4,fe.chk("00100000","Mini Stream Cutoff Size: "),oe=fe.read_shift(4,"i"),Z=fe.read_shift(4,"i"),se=fe.read_shift(4,"i"),O=fe.read_shift(4,"i");for(var Re=-1,Le=0;Le<109&&(Re=fe.read_shift(4,"i"),!(Re<0));++Le)ce[Le]=Re;var At=v(z,X);E(se,O,At,X,ce);var Bt=P(At,Q,ce,X);Bt[Q].name="!Directory",Z>0&&oe!==F&&(Bt[oe].name="!MiniFAT"),Bt[ce[0]].name="!FAT",Bt.fat_addrs=ce,Bt.ssz=X;var $t={},nr=[],ri=[],Un=[];V(Q,Bt,At,nr,Z,$t,ri,oe),_(ri,Un,nr),nr.shift();var zn={FileIndex:ri,FullPaths:Un};return J&&J.raw&&(zn.raw={header:Ve,sectors:At}),zn}function m(z){if(z[z.l]==80&&z[z.l+1]==75)return[0,0];z.chk(he,"Header Signature: "),z.l+=16;var J=z.read_shift(2,"u");return[z.read_shift(2,"u"),J]}function x(z,J){var Y=9;switch(z.l+=2,Y=z.read_shift(2)){case 9:if(J!=3)throw new Error("Sector Shift: Expected 9 saw "+Y);break;case 12:if(J!=4)throw new Error("Sector Shift: Expected 12 saw "+Y);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Y)}z.chk("0600","Mini Sector Shift: "),z.chk("000000000000","Reserved: ")}function v(z,J){for(var Y=Math.ceil(z.length/J)-1,X=[],Z=1;Z<Y;++Z)X[Z-1]=z.slice(Z*J,(Z+1)*J);return X[Y-1]=z.slice(Y*J),X}function _(z,J,Y){for(var X=0,Z=0,O=0,Q=0,oe=0,se=Y.length,ce=[],fe=[];X<se;++X)ce[X]=fe[X]=X,J[X]=Y[X];for(;oe<fe.length;++oe)X=fe[oe],Z=z[X].L,O=z[X].R,Q=z[X].C,ce[X]===X&&(Z!==-1&&ce[Z]!==Z&&(ce[X]=ce[Z]),O!==-1&&ce[O]!==O&&(ce[X]=ce[O])),Q!==-1&&(ce[Q]=X),Z!==-1&&X!=ce[X]&&(ce[Z]=ce[X],fe.lastIndexOf(Z)<oe&&fe.push(Z)),O!==-1&&X!=ce[X]&&(ce[O]=ce[X],fe.lastIndexOf(O)<oe&&fe.push(O));for(X=1;X<se;++X)ce[X]===X&&(O!==-1&&ce[O]!==O?ce[X]=ce[O]:Z!==-1&&ce[Z]!==Z&&(ce[X]=ce[Z]));for(X=1;X<se;++X)if(z[X].type!==0){if(oe=X,oe!=ce[oe])do oe=ce[oe],J[X]=J[oe]+"/"+J[X];while(oe!==0&&ce[oe]!==-1&&oe!=ce[oe]);ce[X]=-1}for(J[0]+="/",X=1;X<se;++X)z[X].type!==2&&(J[X]+="/")}function w(z,J,Y){for(var X=z.start,Z=z.size,O=[],Q=X;Y&&Z>0&&Q>=0;)O.push(J.slice(Q*D,Q*D+D)),Z-=D,Q=Kl(Y,Q*4);return O.length===0?Se(0):Ln(O).slice(0,z.size)}function E(z,J,Y,X,Z){var O=F;if(z===F){if(J!==0)throw new Error("DIFAT chain shorter than expected")}else if(z!==-1){var Q=Y[z],oe=(X>>>2)-1;if(!Q)return;for(var se=0;se<oe&&(O=Kl(Q,se*4))!==F;++se)Z.push(O);E(Kl(Q,X-4),J-1,Y,X,Z)}}function j(z,J,Y,X,Z){var O=[],Q=[];Z||(Z=[]);var oe=X-1,se=0,ce=0;for(se=J;se>=0;){Z[se]=!0,O[O.length]=se,Q.push(z[se]);var fe=Y[Math.floor(se*4/X)];if(ce=se*4&oe,X<4+ce)throw new Error("FAT boundary crossed: "+se+" 4 "+X);if(!z[fe])break;se=Kl(z[fe],ce)}return{nodes:O,data:UN([Q])}}function P(z,J,Y,X){var Z=z.length,O=[],Q=[],oe=[],se=[],ce=X-1,fe=0,je=0,Ve=0,qe=0;for(fe=0;fe<Z;++fe)if(oe=[],Ve=fe+J,Ve>=Z&&(Ve-=Z),!Q[Ve]){se=[];var Re=[];for(je=Ve;je>=0;){Re[je]=!0,Q[je]=!0,oe[oe.length]=je,se.push(z[je]);var Le=Y[Math.floor(je*4/X)];if(qe=je*4&ce,X<4+qe)throw new Error("FAT boundary crossed: "+je+" 4 "+X);if(!z[Le]||(je=Kl(z[Le],qe),Re[je]))break}O[Ve]={nodes:oe,data:UN([se])}}return O}function V(z,J,Y,X,Z,O,Q,oe){for(var se=0,ce=X.length?2:0,fe=J[z].data,je=0,Ve=0,qe;je<fe.length;je+=128){var Re=fe.slice(je,je+128);Ui(Re,64),Ve=Re.read_shift(2),qe=dw(Re,0,Ve-ce),X.push(qe);var Le={name:qe,type:Re.read_shift(1),color:Re.read_shift(1),L:Re.read_shift(4,"i"),R:Re.read_shift(4,"i"),C:Re.read_shift(4,"i"),clsid:Re.read_shift(16),state:Re.read_shift(4,"i"),start:0,size:0},At=Re.read_shift(2)+Re.read_shift(2)+Re.read_shift(2)+Re.read_shift(2);At!==0&&(Le.ct=L(Re,Re.l-8));var Bt=Re.read_shift(2)+Re.read_shift(2)+Re.read_shift(2)+Re.read_shift(2);Bt!==0&&(Le.mt=L(Re,Re.l-8)),Le.start=Re.read_shift(4,"i"),Le.size=Re.read_shift(4,"i"),Le.size<0&&Le.start<0&&(Le.size=Le.type=0,Le.start=F,Le.name=""),Le.type===5?(se=Le.start,Z>0&&se!==F&&(J[se].name="!StreamData")):Le.size>=4096?(Le.storage="fat",J[Le.start]===void 0&&(J[Le.start]=j(Y,Le.start,J.fat_addrs,J.ssz)),J[Le.start].name=Le.name,Le.content=J[Le.start].data.slice(0,Le.size)):(Le.storage="minifat",Le.size<0?Le.size=0:se!==F&&Le.start!==F&&J[se]&&(Le.content=w(Le,J[se].data,(J[oe]||{}).data))),Le.content&&Ui(Le.content,0),O[qe]=Le,Q.push(Le)}}function L(z,J){return new Date((Hi(z,J+4)/1e7*Math.pow(2,32)+Hi(z,J)/1e7-11644473600)*1e3)}function K(z,J){return h(),p(d.readFileSync(z),J)}function H(z,J){var Y=J&&J.type;switch(Y||cr&&Buffer.isBuffer(z)&&(Y="buffer"),Y||"base64"){case"file":return K(z,J);case"base64":return p(Os(io(z)),J);case"binary":return p(Os(z),J)}return p(z,J)}function S(z,J){var Y=J||{},X=Y.root||"Root Entry";if(z.FullPaths||(z.FullPaths=[]),z.FileIndex||(z.FileIndex=[]),z.FullPaths.length!==z.FileIndex.length)throw new Error("inconsistent CFB structure");z.FullPaths.length===0&&(z.FullPaths[0]=X+"/",z.FileIndex[0]={name:X,type:5}),Y.CLSID&&(z.FileIndex[0].clsid=Y.CLSID),N(z)}function N(z){var J="Sh33tJ5";if(!_r.find(z,"/"+J)){var Y=Se(4);Y[0]=55,Y[1]=Y[3]=50,Y[2]=54,z.FileIndex.push({name:J,type:2,content:Y,size:4,L:69,R:69,C:69}),z.FullPaths.push(z.FullPaths[0]+J),I(z)}}function I(z,J){S(z);for(var Y=!1,X=!1,Z=z.FullPaths.length-1;Z>=0;--Z){var O=z.FileIndex[Z];switch(O.type){case 0:X?Y=!0:(z.FileIndex.pop(),z.FullPaths.pop());break;case 1:case 2:case 5:X=!0,isNaN(O.R*O.L*O.C)&&(Y=!0),O.R>-1&&O.L>-1&&O.R==O.L&&(Y=!0);break;default:Y=!0;break}}if(!(!Y&&!J)){var Q=new Date(1987,1,19),oe=0,se=Object.create?Object.create(null):{},ce=[];for(Z=0;Z<z.FullPaths.length;++Z)se[z.FullPaths[Z]]=!0,z.FileIndex[Z].type!==0&&ce.push([z.FullPaths[Z],z.FileIndex[Z]]);for(Z=0;Z<ce.length;++Z){var fe=n(ce[Z][0]);X=se[fe],X||(ce.push([fe,{name:i(fe).replace("/",""),type:1,clsid:Oe,ct:Q,mt:Q,content:null}]),se[fe]=!0)}for(ce.sort(function(qe,Re){return t(qe[0],Re[0])}),z.FullPaths=[],z.FileIndex=[],Z=0;Z<ce.length;++Z)z.FullPaths[Z]=ce[Z][0],z.FileIndex[Z]=ce[Z][1];for(Z=0;Z<ce.length;++Z){var je=z.FileIndex[Z],Ve=z.FullPaths[Z];if(je.name=i(Ve).replace("/",""),je.L=je.R=je.C=-(je.color=1),je.size=je.content?je.content.length:0,je.start=0,je.clsid=je.clsid||Oe,Z===0)je.C=ce.length>1?1:-1,je.size=0,je.type=5;else if(Ve.slice(-1)=="/"){for(oe=Z+1;oe<ce.length&&n(z.FullPaths[oe])!=Ve;++oe);for(je.C=oe>=ce.length?-1:oe,oe=Z+1;oe<ce.length&&n(z.FullPaths[oe])!=n(Ve);++oe);je.R=oe>=ce.length?-1:oe,je.type=1}else n(z.FullPaths[Z+1]||"")==n(Ve)&&(je.R=Z+1),je.type=2}}}function R(z,J){var Y=J||{};if(Y.fileType=="mad")return wr(z,Y);switch(I(z),Y.fileType){case"zip":return Lt(z,Y)}var X=(function(qe){for(var Re=0,Le=0,At=0;At<qe.FileIndex.length;++At){var Bt=qe.FileIndex[At];if(Bt.content){var $t=Bt.content.length;$t>0&&($t<4096?Re+=$t+63>>6:Le+=$t+511>>9)}}for(var nr=qe.FullPaths.length+3>>2,ri=Re+7>>3,Un=Re+127>>7,zn=ri+Le+nr+Un,Vr=zn+127>>7,Ys=Vr<=109?0:Math.ceil((Vr-109)/127);zn+Vr+Ys+127>>7>Vr;)Ys=++Vr<=109?0:Math.ceil((Vr-109)/127);var Tr=[1,Ys,Vr,Un,nr,Le,Re,0];return qe.FileIndex[0].size=Re<<6,Tr[7]=(qe.FileIndex[0].start=Tr[0]+Tr[1]+Tr[2]+Tr[3]+Tr[4]+Tr[5])+(Tr[6]+7>>3),Tr})(z),Z=Se(X[7]<<9),O=0,Q=0;{for(O=0;O<8;++O)Z.write_shift(1,Ae[O]);for(O=0;O<8;++O)Z.write_shift(2,0);for(Z.write_shift(2,62),Z.write_shift(2,3),Z.write_shift(2,65534),Z.write_shift(2,9),Z.write_shift(2,6),O=0;O<3;++O)Z.write_shift(2,0);for(Z.write_shift(4,0),Z.write_shift(4,X[2]),Z.write_shift(4,X[0]+X[1]+X[2]+X[3]-1),Z.write_shift(4,0),Z.write_shift(4,4096),Z.write_shift(4,X[3]?X[0]+X[1]+X[2]-1:F),Z.write_shift(4,X[3]),Z.write_shift(-4,X[1]?X[0]-1:F),Z.write_shift(4,X[1]),O=0;O<109;++O)Z.write_shift(-4,O<X[2]?X[1]+O:-1)}if(X[1])for(Q=0;Q<X[1];++Q){for(;O<236+Q*127;++O)Z.write_shift(-4,O<X[2]?X[1]+O:-1);Z.write_shift(-4,Q===X[1]-1?F:Q+1)}var oe=function(qe){for(Q+=qe;O<Q-1;++O)Z.write_shift(-4,O+1);qe&&(++O,Z.write_shift(-4,F))};for(Q=O=0,Q+=X[1];O<Q;++O)Z.write_shift(-4,De.DIFSECT);for(Q+=X[2];O<Q;++O)Z.write_shift(-4,De.FATSECT);oe(X[3]),oe(X[4]);for(var se=0,ce=0,fe=z.FileIndex[0];se<z.FileIndex.length;++se)fe=z.FileIndex[se],fe.content&&(ce=fe.content.length,!(ce<4096)&&(fe.start=Q,oe(ce+511>>9)));for(oe(X[6]+7>>3);Z.l&511;)Z.write_shift(-4,De.ENDOFCHAIN);for(Q=O=0,se=0;se<z.FileIndex.length;++se)fe=z.FileIndex[se],fe.content&&(ce=fe.content.length,!(!ce||ce>=4096)&&(fe.start=Q,oe(ce+63>>6)));for(;Z.l&511;)Z.write_shift(-4,De.ENDOFCHAIN);for(O=0;O<X[4]<<2;++O){var je=z.FullPaths[O];if(!je||je.length===0){for(se=0;se<17;++se)Z.write_shift(4,0);for(se=0;se<3;++se)Z.write_shift(4,-1);for(se=0;se<12;++se)Z.write_shift(4,0);continue}fe=z.FileIndex[O],O===0&&(fe.start=fe.size?fe.start-1:F);var Ve=O===0&&Y.root||fe.name;if(ce=2*(Ve.length+1),Z.write_shift(64,Ve,"utf16le"),Z.write_shift(2,ce),Z.write_shift(1,fe.type),Z.write_shift(1,fe.color),Z.write_shift(-4,fe.L),Z.write_shift(-4,fe.R),Z.write_shift(-4,fe.C),fe.clsid)Z.write_shift(16,fe.clsid,"hex");else for(se=0;se<4;++se)Z.write_shift(4,0);Z.write_shift(4,fe.state||0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,fe.start),Z.write_shift(4,fe.size),Z.write_shift(4,0)}for(O=1;O<z.FileIndex.length;++O)if(fe=z.FileIndex[O],fe.size>=4096)if(Z.l=fe.start+1<<9,cr&&Buffer.isBuffer(fe.content))fe.content.copy(Z,Z.l,0,fe.size),Z.l+=fe.size+511&-512;else{for(se=0;se<fe.size;++se)Z.write_shift(1,fe.content[se]);for(;se&511;++se)Z.write_shift(1,0)}for(O=1;O<z.FileIndex.length;++O)if(fe=z.FileIndex[O],fe.size>0&&fe.size<4096)if(cr&&Buffer.isBuffer(fe.content))fe.content.copy(Z,Z.l,0,fe.size),Z.l+=fe.size+63&-64;else{for(se=0;se<fe.size;++se)Z.write_shift(1,fe.content[se]);for(;se&63;++se)Z.write_shift(1,0)}if(cr)Z.l=Z.length;else for(;Z.l<Z.length;)Z.write_shift(1,0);return Z}function M(z,J){var Y=z.FullPaths.map(function(se){return se.toUpperCase()}),X=Y.map(function(se){var ce=se.split("/");return ce[ce.length-(se.slice(-1)=="/"?2:1)]}),Z=!1;J.charCodeAt(0)===47?(Z=!0,J=Y[0].slice(0,-1)+J):Z=J.indexOf("/")!==-1;var O=J.toUpperCase(),Q=Z===!0?Y.indexOf(O):X.indexOf(O);if(Q!==-1)return z.FileIndex[Q];var oe=!O.match(Mp);for(O=O.replace(G0,""),oe&&(O=O.replace(Mp,"!")),Q=0;Q<Y.length;++Q)if((oe?Y[Q].replace(Mp,"!"):Y[Q]).replace(G0,"")==O||(oe?X[Q].replace(Mp,"!"):X[Q]).replace(G0,"")==O)return z.FileIndex[Q];return null}var D=64,F=-2,he="d0cf11e0a1b11ae1",Ae=[208,207,17,224,161,177,26,225],Oe="00000000000000000000000000000000",De={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:F,FREESECT:-1,HEADER_SIGNATURE:he,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Oe,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function we(z,J,Y){h();var X=R(z,Y);d.writeFileSync(J,X)}function _e(z){for(var J=new Array(z.length),Y=0;Y<z.length;++Y)J[Y]=String.fromCharCode(z[Y]);return J.join("")}function Ne(z,J){var Y=R(z,J);switch(J&&J.type||"buffer"){case"file":return h(),d.writeFileSync(J.filename,Y),Y;case"binary":return typeof Y=="string"?Y:_e(Y);case"base64":return kh(typeof Y=="string"?Y:_e(Y));case"buffer":if(cr)return Buffer.isBuffer(Y)?Y:uo(Y);case"array":return typeof Y=="string"?Os(Y):Y}return Y}var ae;function W(z){try{var J=z.InflateRaw,Y=new J;if(Y._processChunk(new Uint8Array([3,0]),Y._finishFlushFlag),Y.bytesRead)ae=z;else throw new Error("zlib does not expose bytesRead")}catch(X){console.error("cannot use native zlib: "+(X.message||X))}}function ee(z,J){if(!ae)return Ht(z,J);var Y=ae.InflateRaw,X=new Y,Z=X._processChunk(z.slice(z.l),X._finishFlushFlag);return z.l+=X.bytesRead,Z}function te(z){return ae?ae.deflateRawSync(z):ze(z)}var ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],be=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ce(z){var J=(z<<1|z<<11)&139536|(z<<5|z<<15)&558144;return(J>>16|J>>8|J)&255}for(var ke=typeof Uint8Array<"u",Ee=ke?new Uint8Array(256):[],Ke=0;Ke<256;++Ke)Ee[Ke]=Ce(Ke);function dt(z,J){var Y=Ee[z&255];return J<=8?Y>>>8-J:(Y=Y<<8|Ee[z>>8&255],J<=16?Y>>>16-J:(Y=Y<<8|Ee[z>>16&255],Y>>>24-J))}function zt(z,J){var Y=J&7,X=J>>>3;return(z[X]|(Y<=6?0:z[X+1]<<8))>>>Y&3}function bt(z,J){var Y=J&7,X=J>>>3;return(z[X]|(Y<=5?0:z[X+1]<<8))>>>Y&7}function tr(z,J){var Y=J&7,X=J>>>3;return(z[X]|(Y<=4?0:z[X+1]<<8))>>>Y&15}function Et(z,J){var Y=J&7,X=J>>>3;return(z[X]|(Y<=3?0:z[X+1]<<8))>>>Y&31}function Pe(z,J){var Y=J&7,X=J>>>3;return(z[X]|(Y<=1?0:z[X+1]<<8))>>>Y&127}function Qt(z,J,Y){var X=J&7,Z=J>>>3,O=(1<<Y)-1,Q=z[Z]>>>X;return Y<8-X||(Q|=z[Z+1]<<8-X,Y<16-X)||(Q|=z[Z+2]<<16-X,Y<24-X)||(Q|=z[Z+3]<<24-X),Q&O}function St(z,J,Y){var X=J&7,Z=J>>>3;return X<=5?z[Z]|=(Y&7)<<X:(z[Z]|=Y<<X&255,z[Z+1]=(Y&7)>>8-X),J+3}function Be(z,J,Y){var X=J&7,Z=J>>>3;return Y=(Y&1)<<X,z[Z]|=Y,J+1}function ue(z,J,Y){var X=J&7,Z=J>>>3;return Y<<=X,z[Z]|=Y&255,Y>>>=8,z[Z+1]=Y,J+8}function rt(z,J,Y){var X=J&7,Z=J>>>3;return Y<<=X,z[Z]|=Y&255,Y>>>=8,z[Z+1]=Y&255,z[Z+2]=Y>>>8,J+16}function st(z,J){var Y=z.length,X=2*Y>J?2*Y:J+5,Z=0;if(Y>=J)return z;if(cr){var O=kN(X);if(z.copy)z.copy(O);else for(;Z<z.length;++Z)O[Z]=z[Z];return O}else if(ke){var Q=new Uint8Array(X);if(Q.set)Q.set(z);else for(;Z<Y;++Z)Q[Z]=z[Z];return Q}return z.length=X,z}function ht(z){for(var J=new Array(z),Y=0;Y<z;++Y)J[Y]=0;return J}function Tt(z,J,Y){var X=1,Z=0,O=0,Q=0,oe=0,se=z.length,ce=ke?new Uint16Array(32):ht(32);for(O=0;O<32;++O)ce[O]=0;for(O=se;O<Y;++O)z[O]=0;se=z.length;var fe=ke?new Uint16Array(se):ht(se);for(O=0;O<se;++O)ce[Z=z[O]]++,X<Z&&(X=Z),fe[O]=0;for(ce[0]=0,O=1;O<=X;++O)ce[O+16]=oe=oe+ce[O-1]<<1;for(O=0;O<se;++O)oe=z[O],oe!=0&&(fe[O]=ce[oe+16]++);var je=0;for(O=0;O<se;++O)if(je=z[O],je!=0)for(oe=dt(fe[O],X)>>X-je,Q=(1<<X+4-je)-1;Q>=0;--Q)J[oe|Q<<je]=je&15|O<<4;return X}var lt=ke?new Uint16Array(512):ht(512),Ct=ke?new Uint16Array(32):ht(32);if(!ke){for(var ct=0;ct<512;++ct)lt[ct]=0;for(ct=0;ct<32;++ct)Ct[ct]=0}(function(){for(var z=[],J=0;J<32;J++)z.push(5);Tt(z,Ct,32);var Y=[];for(J=0;J<=143;J++)Y.push(8);for(;J<=255;J++)Y.push(9);for(;J<=279;J++)Y.push(7);for(;J<=287;J++)Y.push(8);Tt(Y,lt,288)})();var kr=(function(){for(var J=ke?new Uint8Array(32768):[],Y=0,X=0;Y<be.length-1;++Y)for(;X<be[Y+1];++X)J[X]=Y;for(;X<32768;++X)J[X]=29;var Z=ke?new Uint8Array(259):[];for(Y=0,X=0;Y<U.length-1;++Y)for(;X<U[Y+1];++X)Z[X]=Y;function O(oe,se){for(var ce=0;ce<oe.length;){var fe=Math.min(65535,oe.length-ce),je=ce+fe==oe.length;for(se.write_shift(1,+je),se.write_shift(2,fe),se.write_shift(2,~fe&65535);fe-- >0;)se[se.l++]=oe[ce++]}return se.l}function Q(oe,se){for(var ce=0,fe=0,je=ke?new Uint16Array(32768):[];fe<oe.length;){var Ve=Math.min(65535,oe.length-fe);if(Ve<10){for(ce=St(se,ce,+(fe+Ve==oe.length)),ce&7&&(ce+=8-(ce&7)),se.l=ce/8|0,se.write_shift(2,Ve),se.write_shift(2,~Ve&65535);Ve-- >0;)se[se.l++]=oe[fe++];ce=se.l*8;continue}ce=St(se,ce,+(fe+Ve==oe.length)+2);for(var qe=0;Ve-- >0;){var Re=oe[fe];qe=(qe<<5^Re)&32767;var Le=-1,At=0;if((Le=je[qe])&&(Le|=fe&-32768,Le>fe&&(Le-=32768),Le<fe))for(;oe[Le+At]==oe[fe+At]&&At<250;)++At;if(At>2){Re=Z[At],Re<=22?ce=ue(se,ce,Ee[Re+1]>>1)-1:(ue(se,ce,3),ce+=5,ue(se,ce,Ee[Re-23]>>5),ce+=3);var Bt=Re<8?0:Re-4>>2;Bt>0&&(rt(se,ce,At-U[Re]),ce+=Bt),Re=J[fe-Le],ce=ue(se,ce,Ee[Re]>>3),ce-=3;var $t=Re<4?0:Re-2>>1;$t>0&&(rt(se,ce,fe-Le-be[Re]),ce+=$t);for(var nr=0;nr<At;++nr)je[qe]=fe&32767,qe=(qe<<5^oe[fe])&32767,++fe;Ve-=At-1}else Re<=143?Re=Re+48:ce=Be(se,ce,1),ce=ue(se,ce,Ee[Re]),je[qe]=fe&32767,++fe}ce=ue(se,ce,0)-1}return se.l=(ce+7)/8|0,se.l}return function(se,ce){return se.length<8?O(se,ce):Q(se,ce)}})();function ze(z){var J=Se(50+Math.floor(z.length*1.1)),Y=kr(z,J);return J.slice(0,Y)}var at=ke?new Uint16Array(32768):ht(32768),Mt=ke?new Uint16Array(32768):ht(32768),xe=ke?new Uint16Array(128):ht(128),Xe=1,et=1;function ut(z,J){var Y=Et(z,J)+257;J+=5;var X=Et(z,J)+1;J+=5;var Z=tr(z,J)+4;J+=4;for(var O=0,Q=ke?new Uint8Array(19):ht(19),oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],se=1,ce=ke?new Uint8Array(8):ht(8),fe=ke?new Uint8Array(8):ht(8),je=Q.length,Ve=0;Ve<Z;++Ve)Q[ie[Ve]]=O=bt(z,J),se<O&&(se=O),ce[O]++,J+=3;var qe=0;for(ce[0]=0,Ve=1;Ve<=se;++Ve)fe[Ve]=qe=qe+ce[Ve-1]<<1;for(Ve=0;Ve<je;++Ve)(qe=Q[Ve])!=0&&(oe[Ve]=fe[qe]++);var Re=0;for(Ve=0;Ve<je;++Ve)if(Re=Q[Ve],Re!=0){qe=Ee[oe[Ve]]>>8-Re;for(var Le=(1<<7-Re)-1;Le>=0;--Le)xe[qe|Le<<Re]=Re&7|Ve<<3}var At=[];for(se=1;At.length<Y+X;)switch(qe=xe[Pe(z,J)],J+=qe&7,qe>>>=3){case 16:for(O=3+zt(z,J),J+=2,qe=At[At.length-1];O-- >0;)At.push(qe);break;case 17:for(O=3+bt(z,J),J+=3;O-- >0;)At.push(0);break;case 18:for(O=11+Pe(z,J),J+=7;O-- >0;)At.push(0);break;default:At.push(qe),se<qe&&(se=qe);break}var Bt=At.slice(0,Y),$t=At.slice(Y);for(Ve=Y;Ve<286;++Ve)Bt[Ve]=0;for(Ve=X;Ve<30;++Ve)$t[Ve]=0;return Xe=Tt(Bt,at,286),et=Tt($t,Mt,30),J}function Ot(z,J){if(z[0]==3&&!(z[1]&3))return[wc(J),2];for(var Y=0,X=0,Z=kN(J||1<<18),O=0,Q=Z.length>>>0,oe=0,se=0;(X&1)==0;){if(X=bt(z,Y),Y+=3,X>>>1)X>>1==1?(oe=9,se=5):(Y=ut(z,Y),oe=Xe,se=et);else{Y&7&&(Y+=8-(Y&7));var ce=z[Y>>>3]|z[(Y>>>3)+1]<<8;if(Y+=32,ce>0)for(!J&&Q<O+ce&&(Z=st(Z,O+ce),Q=Z.length);ce-- >0;)Z[O++]=z[Y>>>3],Y+=8;continue}for(;;){!J&&Q<O+32767&&(Z=st(Z,O+32767),Q=Z.length);var fe=Qt(z,Y,oe),je=X>>>1==1?lt[fe]:at[fe];if(Y+=je&15,je>>>=4,(je>>>8&255)===0)Z[O++]=je;else{if(je==256)break;je-=257;var Ve=je<8?0:je-4>>2;Ve>5&&(Ve=0);var qe=O+U[je];Ve>0&&(qe+=Qt(z,Y,Ve),Y+=Ve),fe=Qt(z,Y,se),je=X>>>1==1?Ct[fe]:Mt[fe],Y+=je&15,je>>>=4;var Re=je<4?0:je-2>>1,Le=be[je];for(Re>0&&(Le+=Qt(z,Y,Re),Y+=Re),!J&&Q<qe&&(Z=st(Z,qe+100),Q=Z.length);O<qe;)Z[O]=Z[O-Le],++O}}}return J?[Z,Y+7>>>3]:[Z.slice(0,O),Y+7>>>3]}function Ht(z,J){var Y=z.slice(z.l||0),X=Ot(Y,J);return z.l+=X[1],X[0]}function Kt(z,J){if(z)typeof console<"u"&&console.error(J);else throw new Error(J)}function pt(z,J){var Y=z;Ui(Y,0);var X=[],Z=[],O={FileIndex:X,FullPaths:Z};S(O,{root:J.root});for(var Q=Y.length-4;(Y[Q]!=80||Y[Q+1]!=75||Y[Q+2]!=5||Y[Q+3]!=6)&&Q>=0;)--Q;Y.l=Q+4,Y.l+=4;var oe=Y.read_shift(2);Y.l+=6;var se=Y.read_shift(4);for(Y.l=se,Q=0;Q<oe;++Q){Y.l+=20;var ce=Y.read_shift(4),fe=Y.read_shift(4),je=Y.read_shift(2),Ve=Y.read_shift(2),qe=Y.read_shift(2);Y.l+=8;var Re=Y.read_shift(4),Le=c(Y.slice(Y.l+je,Y.l+je+Ve));Y.l+=je+Ve+qe;var At=Y.l;Y.l=Re+4,nt(Y,ce,fe,O,Le),Y.l=At}return O}function nt(z,J,Y,X,Z){z.l+=2;var O=z.read_shift(2),Q=z.read_shift(2),oe=a(z);if(O&8257)throw new Error("Unsupported ZIP encryption");for(var se=z.read_shift(4),ce=z.read_shift(4),fe=z.read_shift(4),je=z.read_shift(2),Ve=z.read_shift(2),qe="",Re=0;Re<je;++Re)qe+=String.fromCharCode(z[z.l++]);if(Ve){var Le=c(z.slice(z.l,z.l+Ve));(Le[21589]||{}).mt&&(oe=Le[21589].mt),((Z||{})[21589]||{}).mt&&(oe=Z[21589].mt)}z.l+=Ve;var At=z.slice(z.l,z.l+ce);switch(Q){case 8:At=ee(z,fe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Q)}var Bt=!1;O&8&&(se=z.read_shift(4),se==134695760&&(se=z.read_shift(4),Bt=!0),ce=z.read_shift(4),fe=z.read_shift(4)),ce!=J&&Kt(Bt,"Bad compressed size: "+J+" != "+ce),fe!=Y&&Kt(Bt,"Bad uncompressed size: "+Y+" != "+fe),qr(X,qe,At,{unsafe:!0,mt:oe})}function Lt(z,J){var Y=J||{},X=[],Z=[],O=Se(1),Q=Y.compression?8:0,oe=0,se=0,ce=0,fe=0,je=0,Ve=z.FullPaths[0],qe=Ve,Re=z.FileIndex[0],Le=[],At=0;for(se=1;se<z.FullPaths.length;++se)if(qe=z.FullPaths[se].slice(Ve.length),Re=z.FileIndex[se],!(!Re.size||!Re.content||qe=="Sh33tJ5")){var Bt=fe,$t=Se(qe.length);for(ce=0;ce<qe.length;++ce)$t.write_shift(1,qe.charCodeAt(ce)&127);$t=$t.slice(0,$t.l),Le[je]=nK.buf(Re.content,0);var nr=Re.content;Q==8&&(nr=te(nr)),O=Se(30),O.write_shift(4,67324752),O.write_shift(2,20),O.write_shift(2,oe),O.write_shift(2,Q),Re.mt?s(O,Re.mt):O.write_shift(4,0),O.write_shift(-4,Le[je]),O.write_shift(4,nr.length),O.write_shift(4,Re.content.length),O.write_shift(2,$t.length),O.write_shift(2,0),fe+=O.length,X.push(O),fe+=$t.length,X.push($t),fe+=nr.length,X.push(nr),O=Se(46),O.write_shift(4,33639248),O.write_shift(2,0),O.write_shift(2,20),O.write_shift(2,oe),O.write_shift(2,Q),O.write_shift(4,0),O.write_shift(-4,Le[je]),O.write_shift(4,nr.length),O.write_shift(4,Re.content.length),O.write_shift(2,$t.length),O.write_shift(2,0),O.write_shift(2,0),O.write_shift(2,0),O.write_shift(2,0),O.write_shift(4,0),O.write_shift(4,Bt),At+=O.l,Z.push(O),At+=$t.length,Z.push($t),++je}return O=Se(22),O.write_shift(4,101010256),O.write_shift(2,0),O.write_shift(2,0),O.write_shift(2,je),O.write_shift(2,je),O.write_shift(4,At),O.write_shift(4,fe),O.write_shift(2,0),Ln([Ln(X),Ln(Z),O])}var qt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function hr(z,J){if(z.ctype)return z.ctype;var Y=z.name||"",X=Y.match(/\.([^\.]+)$/);return X&&qt[X[1]]||J&&(X=(Y=J).match(/[\.\\]([^\.\\])+$/),X&&qt[X[1]])?qt[X[1]]:"application/octet-stream"}function xn(z){for(var J=kh(z),Y=[],X=0;X<J.length;X+=76)Y.push(J.slice(X,X+76));return Y.join(`\r
`)+`\r
`}function yn(z){var J=z.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ce){var fe=ce.charCodeAt(0).toString(16).toUpperCase();return"="+(fe.length==1?"0"+fe:fe)});J=J.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),J.charAt(0)==`
`&&(J="=0D"+J.slice(1)),J=J.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Y=[],X=J.split(`\r
`),Z=0;Z<X.length;++Z){var O=X[Z];if(O.length==0){Y.push("");continue}for(var Q=0;Q<O.length;){var oe=76,se=O.slice(Q,Q+oe);se.charAt(oe-1)=="="?oe--:se.charAt(oe-2)=="="?oe-=2:se.charAt(oe-3)=="="&&(oe-=3),se=O.slice(Q,Q+oe),Q+=oe,Q<O.length&&(se+="="),Y.push(se)}}return Y.join(`\r
`)}function Pi(z){for(var J=[],Y=0;Y<z.length;++Y){for(var X=z[Y];Y<=z.length&&X.charAt(X.length-1)=="=";)X=X.slice(0,X.length-1)+z[++Y];J.push(X)}for(var Z=0;Z<J.length;++Z)J[Z]=J[Z].replace(/[=][0-9A-Fa-f]{2}/g,function(O){return String.fromCharCode(parseInt(O.slice(1),16))});return Os(J.join(`\r
`))}function tn(z,J,Y){for(var X="",Z="",O="",Q,oe=0;oe<10;++oe){var se=J[oe];if(!se||se.match(/^\s*$/))break;var ce=se.match(/^(.*?):\s*([^\s].*)$/);if(ce)switch(ce[1].toLowerCase()){case"content-location":X=ce[2].trim();break;case"content-type":O=ce[2].trim();break;case"content-transfer-encoding":Z=ce[2].trim();break}}switch(++oe,Z.toLowerCase()){case"base64":Q=Os(io(J.slice(oe).join("")));break;case"quoted-printable":Q=Pi(J.slice(oe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Z)}var fe=qr(z,X.slice(Y.length),Q,{unsafe:!0});O&&(fe.ctype=O)}function Zi(z,J){if(_e(z.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Y=J&&J.root||"",X=(cr&&Buffer.isBuffer(z)?z.toString("binary"):_e(z)).split(`\r
`),Z=0,O="";for(Z=0;Z<X.length;++Z)if(O=X[Z],!!/^Content-Location:/i.test(O)&&(O=O.slice(O.indexOf("file")),Y||(Y=O.slice(0,O.lastIndexOf("/")+1)),O.slice(0,Y.length)!=Y))for(;Y.length>0&&(Y=Y.slice(0,Y.length-1),Y=Y.slice(0,Y.lastIndexOf("/")+1),O.slice(0,Y.length)!=Y););var Q=(X[1]||"").match(/boundary="(.*?)"/);if(!Q)throw new Error("MAD cannot find boundary");var oe="--"+(Q[1]||""),se=[],ce=[],fe={FileIndex:se,FullPaths:ce};S(fe);var je,Ve=0;for(Z=0;Z<X.length;++Z){var qe=X[Z];qe!==oe&&qe!==oe+"--"||(Ve++&&tn(fe,X.slice(je,Z),Y),je=Z)}return fe}function wr(z,J){var Y=J||{},X=Y.boundary||"SheetJS";X="------="+X;for(var Z=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+X.slice(2)+'"',"","",""],O=z.FullPaths[0],Q=O,oe=z.FileIndex[0],se=1;se<z.FullPaths.length;++se)if(Q=z.FullPaths[se].slice(O.length),oe=z.FileIndex[se],!(!oe.size||!oe.content||Q=="Sh33tJ5")){Q=Q.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(At){return"_x"+At.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(At){return"_u"+At.charCodeAt(0).toString(16)+"_"});for(var ce=oe.content,fe=cr&&Buffer.isBuffer(ce)?ce.toString("binary"):_e(ce),je=0,Ve=Math.min(1024,fe.length),qe=0,Re=0;Re<=Ve;++Re)(qe=fe.charCodeAt(Re))>=32&&qe<128&&++je;var Le=je>=Ve*4/5;Z.push(X),Z.push("Content-Location: "+(Y.root||"file:///C:/SheetJS/")+Q),Z.push("Content-Transfer-Encoding: "+(Le?"quoted-printable":"base64")),Z.push("Content-Type: "+hr(oe,Q)),Z.push(""),Z.push(Le?yn(fe):xn(fe))}return Z.push(X+`--\r
`),Z.join(`\r
`)}function es(z){var J={};return S(J,z),J}function qr(z,J,Y,X){var Z=X&&X.unsafe;Z||S(z);var O=!Z&&_r.find(z,J);if(!O){var Q=z.FullPaths[0];J.slice(0,Q.length)==Q?Q=J:(Q.slice(-1)!="/"&&(Q+="/"),Q=(Q+J).replace("//","/")),O={name:i(J),type:2},z.FileIndex.push(O),z.FullPaths.push(Q),Z||_r.utils.cfb_gc(z)}return O.content=Y,O.size=Y?Y.length:0,X&&(X.CLSID&&(O.clsid=X.CLSID),X.mt&&(O.mt=X.mt),X.ct&&(O.ct=X.ct)),O}function Ri(z,J){S(z);var Y=_r.find(z,J);if(Y){for(var X=0;X<z.FileIndex.length;++X)if(z.FileIndex[X]==Y)return z.FileIndex.splice(X,1),z.FullPaths.splice(X,1),!0}return!1}function hi(z,J,Y){S(z);var X=_r.find(z,J);if(X){for(var Z=0;Z<z.FileIndex.length;++Z)if(z.FileIndex[Z]==X)return z.FileIndex[Z].name=i(Y),z.FullPaths[Z]=Y,!0}return!1}function ji(z){I(z,!0)}return e.find=M,e.read=H,e.parse=p,e.write=Ne,e.writeFile=we,e.utils={cfb_new:es,cfb_add:qr,cfb_del:Ri,cfb_mov:hi,cfb_gc:ji,ReadShift:Y0,CheckField:FI,prep_blob:Ui,bconcat:Ln,use_zlib:W,_deflateRaw:ze,_inflateRaw:Ht,consts:De},e})();function iK(r){return typeof r=="string"?nx(r):Array.isArray(r)?IG(r):r}function df(r,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=nx(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(r,e)}var n=t=="utf8"?Ch(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,r);if(typeof Blob<"u"){var i=new Blob([iK(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,r);if(typeof saveAs<"u")return saveAs(i,r);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:r,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=r,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var c=File(r);return c.open("w"),c.encoding="binary",Array.isArray(e)&&(e=uf(e)),c.write(e),c.close(),e}catch(d){if(!d.message||!d.message.match(/onstruct/))throw d}throw new Error("cannot save file "+r)}function Bn(r){for(var e=Object.keys(r),t=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(r,e[n])&&t.push(e[n]);return t}function FN(r,e){for(var t=[],n=Bn(r),i=0;i!==n.length;++i)t[r[n[i]][e]]==null&&(t[r[n[i]][e]]=n[i]);return t}function ow(r){for(var e=[],t=Bn(r),n=0;n!==t.length;++n)e[r[t[n]]]=t[n];return e}function ax(r){for(var e=[],t=Bn(r),n=0;n!==t.length;++n)e[r[t[n]]]=parseInt(t[n],10);return e}function sK(r){for(var e=[],t=Bn(r),n=0;n!==t.length;++n)e[r[t[n]]]==null&&(e[r[t[n]]]=[]),e[r[t[n]]].push(t[n]);return e}var lg=new Date(1899,11,30,0,0,0);function Ci(r,e){var t=r.getTime(),n=lg.getTime()+(r.getTimezoneOffset()-lg.getTimezoneOffset())*6e4;return(t-n)/(1440*60*1e3)}var yI=new Date,aK=lg.getTime()+(yI.getTimezoneOffset()-lg.getTimezoneOffset())*6e4,ON=yI.getTimezoneOffset();function vI(r){var e=new Date;return e.setTime(r*24*60*60*1e3+aK),e.getTimezoneOffset()!==ON&&e.setTime(e.getTime()+(e.getTimezoneOffset()-ON)*6e4),e}var LN=new Date("2017-02-19T19:06:09.000Z"),bI=isNaN(LN.getFullYear())?new Date("2/19/17"):LN,oK=bI.getFullYear()==2017;function di(r,e){var t=new Date(r);if(oK)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(r instanceof Date)return r;if(bI.getFullYear()==1917&&!isNaN(t.getFullYear())){var n=t.getFullYear();return r.indexOf(""+n)>-1||t.setFullYear(t.getFullYear()+100),t}var i=r.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return r.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function ox(r,e){if(cr&&Buffer.isBuffer(r))return r.toString("binary");if(typeof TextDecoder<"u")try{var t={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(r)&&(r=new Uint8Array(r)),new TextDecoder("latin1").decode(r).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return t[s]||s})}catch{}for(var n=[],i=0;i!=r.length;++i)n.push(String.fromCharCode(r[i]));return n.join("")}function Ii(r){if(typeof JSON<"u"&&!Array.isArray(r))return JSON.parse(JSON.stringify(r));if(typeof r!="object"||r==null)return r;if(r instanceof Date)return new Date(r.getTime());var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=Ii(r[t]));return e}function Yr(r,e){for(var t="";t.length<e;)t+=r;return t}function Ya(r){var e=Number(r);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(r))return e;var t=1,n=r.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,s){return t=-t,s}),!isNaN(e=Number(n)))?e/t:e}var lK=["january","february","march","april","may","june","july","august","september","october","november","december"];function Sh(r){var e=new Date(r),t=new Date(NaN),n=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return t;var a=r.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&lK.indexOf(a)==-1)return t}else if(a.match(/[a-z]/))return t;return n<0||n>8099?t:(i>0||s>1)&&n!=101?e:r.match(/[^-0-9:,\/\\]/)?t:e}function Ut(r,e,t){if(r.FullPaths){if(typeof t=="string"){var n;return cr?n=uo(t):n=PG(t),_r.utils.cfb_add(r,e,n)}_r.utils.cfb_add(r,e,t)}else r.file(e,t)}function lw(){return _r.utils.cfb_new()}var cn=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,cK={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},cw=ow(cK),uw=/[&<>'"]/g,uK=/[\u0000-\u0008\u000b-\u001f]/g;function yr(r){var e=r+"";return e.replace(uw,function(t){return cw[t]}).replace(uK,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function MN(r){return yr(r).replace(/ /g,"_x0020_")}var wI=/[\u0000-\u001f]/g;function dK(r){var e=r+"";return e.replace(uw,function(t){return cw[t]}).replace(/\n/g,"<br/>").replace(wI,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function hK(r){var e=r+"";return e.replace(uw,function(t){return cw[t]}).replace(wI,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function fK(r){return r.replace(/(\r\n|[\r\n])/g,"&#10;")}function pK(r){switch(r){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Ev(r){for(var e="",t=0,n=0,i=0,s=0,a=0,c=0;t<r.length;){if(n=r.charCodeAt(t++),n<128){e+=String.fromCharCode(n);continue}if(i=r.charCodeAt(t++),n>191&&n<224){a=(n&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=r.charCodeAt(t++),n<240){e+=String.fromCharCode((n&15)<<12|(i&63)<<6|s&63);continue}a=r.charCodeAt(t++),c=((n&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(c>>>10&1023)),e+=String.fromCharCode(56320+(c&1023))}return e}function VN(r){var e=wc(2*r.length),t,n,i=1,s=0,a=0,c;for(n=0;n<r.length;n+=i)i=1,(c=r.charCodeAt(n))<128?t=c:c<224?(t=(c&31)*64+(r.charCodeAt(n+1)&63),i=2):c<240?(t=(c&15)*4096+(r.charCodeAt(n+1)&63)*64+(r.charCodeAt(n+2)&63),i=3):(i=4,t=(c&7)*262144+(r.charCodeAt(n+1)&63)*4096+(r.charCodeAt(n+2)&63)*64+(r.charCodeAt(n+3)&63),t-=65536,a=55296+(t>>>10&1023),t=56320+(t&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=t%256,e[s++]=t>>>8;return e.slice(0,s).toString("ucs2")}function $N(r){return uo(r,"binary").toString("utf8")}var $p="foo bar bazâð£",K0=cr&&($N($p)==Ev($p)&&$N||VN($p)==Ev($p)&&VN)||Ev,Ch=cr?function(r){return uo(r,"utf8").toString("binary")}:function(r){for(var e=[],t=0,n=0,i=0;t<r.length;)switch(n=r.charCodeAt(t++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=r.charCodeAt(t++)-56320+(n<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},mK=(function(){var r=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<r.length;++i)n=n.replace(r[i][0],r[i][1]);return n}})(),_I=/(^\s|\s$|\n)/;function Mn(r,e){return"<"+r+(e.match(_I)?' xml:space="preserve"':"")+">"+e+"</"+r+">"}function Ih(r){return Bn(r).map(function(e){return" "+e+'="'+r[e]+'"'}).join("")}function Qe(r,e,t){return"<"+r+(t!=null?Ih(t):"")+(e!=null?(e.match(_I)?' xml:space="preserve"':"")+">"+e+"</"+r:"/")+">"}function L1(r,e){try{return r.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function gK(r,e){switch(typeof r){case"string":var t=Qe("vt:lpwstr",yr(r));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return Qe((r|0)==r?"vt:i4":"vt:r8",yr(String(r)));case"boolean":return Qe("vt:bool",r?"true":"false")}if(r instanceof Date)return Qe("vt:filetime",L1(r));throw new Error("Unable to serialize "+r)}var Tn={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},jd=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],zi={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function xK(r,e){for(var t=1-2*(r[e+7]>>>7),n=((r[e+7]&127)<<4)+(r[e+6]>>>4&15),i=r[e+6]&15,s=5;s>=0;--s)i=i*256+r[e+s];return n==2047?i==0?t*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),t*Math.pow(2,n-52)*i)}function yK(r,e,t){var n=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=n?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var c=0;c<=5;++c,s/=256)r[t+c]=s&255;r[t+6]=(i&15)<<4|s&15,r[t+7]=i>>4|n}var BN=function(r){for(var e=[],t=10240,n=0;n<r[0].length;++n)if(r[0][n])for(var i=0,s=r[0][n].length;i<s;i+=t)e.push.apply(e,r[0][n].slice(i,i+t));return e},UN=cr?function(r){return r[0].length>0&&Buffer.isBuffer(r[0][0])?Buffer.concat(r[0].map(function(e){return Buffer.isBuffer(e)?e:uo(e)})):BN(r)}:BN,zN=function(r,e,t){for(var n=[],i=e;i<t;i+=2)n.push(String.fromCharCode(R0(r,i)));return n.join("").replace(G0,"")},dw=cr?function(r,e,t){return Buffer.isBuffer(r)?r.toString("utf16le",e,t).replace(G0,""):zN(r,e,t)}:zN,HN=function(r,e,t){for(var n=[],i=e;i<e+t;++i)n.push(("0"+r[i].toString(16)).slice(-2));return n.join("")},EI=cr?function(r,e,t){return Buffer.isBuffer(r)?r.toString("hex",e,e+t):HN(r,e,t)}:HN,WN=function(r,e,t){for(var n=[],i=e;i<t;i++)n.push(String.fromCharCode(Du(r,i)));return n.join("")},hf=cr?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):WN(e,t,n)}:WN,TI=function(r,e){var t=Hi(r,e);return t>0?hf(r,e+4,e+4+t-1):""},AI=TI,NI=function(r,e){var t=Hi(r,e);return t>0?hf(r,e+4,e+4+t-1):""},kI=NI,SI=function(r,e){var t=2*Hi(r,e);return t>0?hf(r,e+4,e+4+t-1):""},CI=SI,II=function(e,t){var n=Hi(e,t);return n>0?dw(e,t+4,t+4+n):""},PI=II,RI=function(r,e){var t=Hi(r,e);return t>0?hf(r,e+4,e+4+t):""},jI=RI,DI=function(r,e){return xK(r,e)},cg=DI,hw=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};cr&&(AI=function(e,t){if(!Buffer.isBuffer(e))return TI(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},kI=function(e,t){if(!Buffer.isBuffer(e))return NI(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},CI=function(e,t){if(!Buffer.isBuffer(e))return SI(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},PI=function(e,t){if(!Buffer.isBuffer(e))return II(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},jI=function(e,t){if(!Buffer.isBuffer(e))return RI(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},cg=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):DI(e,t)},hw=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Du=function(r,e){return r[e]},R0=function(r,e){return r[e+1]*256+r[e]},vK=function(r,e){var t=r[e+1]*256+r[e];return t<32768?t:(65535-t+1)*-1},Hi=function(r,e){return r[e+3]*(1<<24)+(r[e+2]<<16)+(r[e+1]<<8)+r[e]},Kl=function(r,e){return r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]},bK=function(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]};function Y0(r,e){var t="",n,i,s=[],a,c,d,h;switch(e){case"dbcs":if(h=this.l,cr&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*r).toString("utf16le");else for(d=0;d<r;++d)t+=String.fromCharCode(R0(this,h)),h+=2;r*=2;break;case"utf8":t=hf(this,this.l,this.l+r);break;case"utf16le":r*=2,t=dw(this,this.l,this.l+r);break;case"wstr":return Y0.call(this,r,"dbcs");case"lpstr-ansi":t=AI(this,this.l),r=4+Hi(this,this.l);break;case"lpstr-cp":t=kI(this,this.l),r=4+Hi(this,this.l);break;case"lpwstr":t=CI(this,this.l),r=4+2*Hi(this,this.l);break;case"lpp4":r=4+Hi(this,this.l),t=PI(this,this.l),r&2&&(r+=2);break;case"8lpp4":r=4+Hi(this,this.l),t=jI(this,this.l),r&3&&(r+=4-(r&3));break;case"cstr":for(r=0,t="";(a=Du(this,this.l+r++))!==0;)s.push(Lp(a));t=s.join("");break;case"_wstr":for(r=0,t="";(a=R0(this,this.l+r))!==0;)s.push(Lp(a)),r+=2;r+=2,t=s.join("");break;case"dbcs-cont":for(t="",h=this.l,d=0;d<r;++d){if(this.lens&&this.lens.indexOf(h)!==-1)return a=Du(this,h),this.l=h+1,c=Y0.call(this,r-d,a?"dbcs-cont":"sbcs-cont"),s.join("")+c;s.push(Lp(R0(this,h))),h+=2}t=s.join(""),r*=2;break;case"cpstr":case"sbcs-cont":for(t="",h=this.l,d=0;d!=r;++d){if(this.lens&&this.lens.indexOf(h)!==-1)return a=Du(this,h),this.l=h+1,c=Y0.call(this,r-d,a?"dbcs-cont":"sbcs-cont"),s.join("")+c;s.push(Lp(Du(this,h))),h+=1}t=s.join("");break;default:switch(r){case 1:return n=Du(this,this.l),this.l++,n;case 2:return n=(e==="i"?vK:R0)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(r>0?Kl:bK)(this,this.l),this.l+=4,n):(i=Hi(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return r==8?i=cg(this,this.l):i=cg([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;r=8;case 16:t=EI(this,this.l,r);break}}return this.l+=r,t}var wK=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24&255},_K=function(r,e,t){r[t]=e&255,r[t+1]=e>>8&255,r[t+2]=e>>16&255,r[t+3]=e>>24&255},EK=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255};function TK(r,e,t){var n=0,i=0;if(t==="dbcs"){for(i=0;i!=e.length;++i)EK(this,e.charCodeAt(i),this.l+2*i);n=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;n=e.length}else if(t==="hex"){for(;i<r;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(t==="utf16le"){var s=Math.min(this.l+r,this.length);for(i=0;i<Math.min(e.length,r);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(r){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,wK(this,e,this.l);break;case 8:if(n=8,t==="f"){yK(this,e,this.l);break}case 16:break;case-4:n=4,_K(this,e,this.l);break}return this.l+=n,this}function FI(r,e){var t=EI(this,this.l,r.length>>1);if(t!==r)throw new Error(e+"Expected "+r+" saw "+t);this.l+=r.length>>1}function Ui(r,e){r.l=e,r.read_shift=Y0,r.chk=FI,r.write_shift=TK}function _a(r,e){r.l+=e}function Se(r){var e=wc(r);return Ui(e,0),e}function Si(){var r=[],e=cr?256:2048,t=function(h){var p=Se(h);return Ui(p,0),p},n=t(e),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&r.push(n),n=null)},s=function(h){return n&&h<n.length-n.l?n:(i(),n=t(Math.max(h+1,e)))},a=function(){return i(),Ln(r)},c=function(h){i(),n=h,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:c,end:a,_bufs:r}}function Me(r,e,t,n){var i=+e,s;if(!isNaN(i)){n||(n=xee[i].p||(t||[]).length||0),s=1+(i>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var a=r.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var c=0;c!=4;++c)if(n>=128)a.write_shift(1,(n&127)+128),n>>=7;else{a.write_shift(1,n);break}n>0&&hw(t)&&r.push(t)}}function X0(r,e,t){var n=Ii(r);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!t||t.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function qN(r,e,t){var n=Ii(r);return n.s=X0(n.s,e.s,t),n.e=X0(n.e,e.s,t),n}function Q0(r,e){if(r.cRel&&r.c<0)for(r=Ii(r);r.c<0;)r.c+=e>8?16384:256;if(r.rRel&&r.r<0)for(r=Ii(r);r.r<0;)r.r+=e>8?1048576:e>5?65536:16384;var t=br(r);return!r.cRel&&r.cRel!=null&&(t=kK(t)),!r.rRel&&r.rRel!=null&&(t=AK(t)),t}function Tv(r,e){return r.s.r==0&&!r.s.rRel&&r.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!r.e.rRel?(r.s.cRel?"":"$")+Zn(r.s.c)+":"+(r.e.cRel?"":"$")+Zn(r.e.c):r.s.c==0&&!r.s.cRel&&r.e.c==(e.biff>=12?16383:255)&&!r.e.cRel?(r.s.rRel?"":"$")+$n(r.s.r)+":"+(r.e.rRel?"":"$")+$n(r.e.r):Q0(r.s,e.biff)+":"+Q0(r.e,e.biff)}function fw(r){return parseInt(NK(r),10)-1}function $n(r){return""+(r+1)}function AK(r){return r.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function NK(r){return r.replace(/\$(\d+)$/,"$1")}function pw(r){for(var e=SK(r),t=0,n=0;n!==e.length;++n)t=26*t+e.charCodeAt(n)-64;return t-1}function Zn(r){if(r<0)throw new Error("invalid column "+r);var e="";for(++r;r;r=Math.floor((r-1)/26))e=String.fromCharCode((r-1)%26+65)+e;return e}function kK(r){return r.replace(/^([A-Z])/,"$$$1")}function SK(r){return r.replace(/^\$([A-Z])/,"$1")}function CK(r){return r.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function An(r){for(var e=0,t=0,n=0;n<r.length;++n){var i=r.charCodeAt(n);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:e-1}}function br(r){for(var e=r.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(r.r+1)}function Ji(r){var e=r.indexOf(":");return e==-1?{s:An(r),e:An(r)}:{s:An(r.slice(0,e)),e:An(r.slice(e+1))}}function on(r,e){return typeof e>"u"||typeof e=="number"?on(r.s,r.e):(typeof r!="string"&&(r=br(r)),typeof e!="string"&&(e=br(e)),r==e?r:r+":"+e)}function Rr(r){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,n=0,i=0,s=r.length;for(t=0;n<s&&!((i=r.charCodeAt(n)-64)<1||i>26);++n)t=26*t+i;for(e.s.c=--t,t=0;n<s&&!((i=r.charCodeAt(n)-48)<0||i>9);++n)t=10*t+i;if(e.s.r=--t,n===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,t=0;n!=s&&!((i=r.charCodeAt(n)-64)<1||i>26);++n)t=26*t+i;for(e.e.c=--t,t=0;n!=s&&!((i=r.charCodeAt(n)-48)<0||i>9);++n)t=10*t+i;return e.e.r=--t,e}function GN(r,e){var t=r.t=="d"&&e instanceof Date;if(r.z!=null)try{return r.w=ul(r.z,t?Ci(e):e)}catch{}try{return r.w=ul((r.XF||{}).numFmtId||(t?14:0),t?Ci(e):e)}catch{return""+e}}function so(r,e,t){return r==null||r.t==null||r.t=="z"?"":r.w!==void 0?r.w:(r.t=="d"&&!r.z&&t&&t.dateNF&&(r.z=t.dateNF),r.t=="e"?ff[r.v]||r.v:e==null?GN(r,r.v):GN(r,e))}function Fc(r,e){var t=e&&e.sheet?e.sheet:"Sheet1",n={};return n[t]=r,{SheetNames:[t],Sheets:n}}function OI(r,e,t){var n=t||{},i=r?Array.isArray(r):n.dense,s=r||(i?[]:{}),a=0,c=0;if(s&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var d=typeof n.origin=="string"?An(n.origin):n.origin;a=d.r,c=d.c}s["!ref"]||(s["!ref"]="A1:A1")}var h={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var p=Rr(s["!ref"]);h.s.c=p.s.c,h.s.r=p.s.r,h.e.c=Math.max(h.e.c,p.e.c),h.e.r=Math.max(h.e.r,p.e.r),a==-1&&(h.e.r=a=p.e.r+1)}for(var m=0;m!=e.length;++m)if(e[m]){if(!Array.isArray(e[m]))throw new Error("aoa_to_sheet expects an array of arrays");for(var x=0;x!=e[m].length;++x)if(!(typeof e[m][x]>"u")){var v={v:e[m][x]},_=a+m,w=c+x;if(h.s.r>_&&(h.s.r=_),h.s.c>w&&(h.s.c=w),h.e.r<_&&(h.e.r=_),h.e.c<w&&(h.e.c=w),e[m][x]&&typeof e[m][x]=="object"&&!Array.isArray(e[m][x])&&!(e[m][x]instanceof Date))v=e[m][x];else if(Array.isArray(v.v)&&(v.f=e[m][x][1],v.v=v.v[0]),v.v===null)if(v.f)v.t="n";else if(n.nullError)v.t="e",v.v=0;else if(n.sheetStubs)v.t="z";else continue;else typeof v.v=="number"?v.t="n":typeof v.v=="boolean"?v.t="b":v.v instanceof Date?(v.z=n.dateNF||Qr[14],n.cellDates?(v.t="d",v.w=ul(v.z,Ci(v.v))):(v.t="n",v.v=Ci(v.v),v.w=ul(v.z,v.v))):v.t="s";if(i)s[_]||(s[_]=[]),s[_][w]&&s[_][w].z&&(v.z=s[_][w].z),s[_][w]=v;else{var E=br({c:w,r:_});s[E]&&s[E].z&&(v.z=s[E].z),s[E]=v}}}return h.s.c<1e7&&(s["!ref"]=on(h)),s}function Dd(r,e){return OI(null,r,e)}function IK(r){return r.read_shift(4,"i")}function Us(r,e){return e||(e=Se(4)),e.write_shift(4,r),e}function ei(r){var e=r.read_shift(4);return e===0?"":r.read_shift(e,"dbcs")}function Nn(r,e){var t=!1;return e==null&&(t=!0,e=Se(4+2*r.length)),e.write_shift(4,r.length),r.length>0&&e.write_shift(0,r,"dbcs"),t?e.slice(0,e.l):e}function PK(r){return{ich:r.read_shift(2),ifnt:r.read_shift(2)}}function RK(r,e){return e||(e=Se(4)),e.write_shift(2,0),e.write_shift(2,0),e}function mw(r,e){var t=r.l,n=r.read_shift(1),i=ei(r),s=[],a={t:i,h:i};if((n&1)!==0){for(var c=r.read_shift(4),d=0;d!=c;++d)s.push(PK(r));a.r=s}else a.r=[{ich:0,ifnt:0}];return r.l=t+e,a}function jK(r,e){var t=!1;return e==null&&(t=!0,e=Se(15+4*r.t.length)),e.write_shift(1,0),Nn(r.t,e),t?e.slice(0,e.l):e}var DK=mw;function FK(r,e){var t=!1;return e==null&&(t=!0,e=Se(23+4*r.t.length)),e.write_shift(1,1),Nn(r.t,e),e.write_shift(4,1),RK({},e),t?e.slice(0,e.l):e}function vs(r){var e=r.read_shift(4),t=r.read_shift(2);return t+=r.read_shift(1)<<16,r.l++,{c:e,iStyleRef:t}}function Oc(r,e){return e==null&&(e=Se(8)),e.write_shift(-4,r.c),e.write_shift(3,r.iStyleRef||r.s),e.write_shift(1,0),e}function Lc(r){var e=r.read_shift(2);return e+=r.read_shift(1)<<16,r.l++,{c:-1,iStyleRef:e}}function Mc(r,e){return e==null&&(e=Se(4)),e.write_shift(3,r.iStyleRef||r.s),e.write_shift(1,0),e}var OK=ei,LI=Nn;function gw(r){var e=r.read_shift(4);return e===0||e===4294967295?"":r.read_shift(e,"dbcs")}function ug(r,e){var t=!1;return e==null&&(t=!0,e=Se(127)),e.write_shift(4,r.length>0?r.length:4294967295),r.length>0&&e.write_shift(0,r,"dbcs"),t?e.slice(0,e.l):e}var LK=ei,M1=gw,xw=ug;function MI(r){var e=r.slice(r.l,r.l+4),t=e[0]&1,n=e[0]&2;r.l+=4;var i=n===0?cg([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Kl(e,0)>>2;return t?i/100:i}function VI(r,e){e==null&&(e=Se(4));var t=0,n=0,i=r*100;if(r==(r|0)&&r>=-536870912&&r<1<<29?n=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(n=1,t=1),n)e.write_shift(-4,((t?i:r)<<2)+(t+2));else throw new Error("unsupported RkNumber "+r)}function $I(r){var e={s:{},e:{}};return e.s.r=r.read_shift(4),e.e.r=r.read_shift(4),e.s.c=r.read_shift(4),e.e.c=r.read_shift(4),e}function MK(r,e){return e||(e=Se(16)),e.write_shift(4,r.s.r),e.write_shift(4,r.e.r),e.write_shift(4,r.s.c),e.write_shift(4,r.e.c),e}var Vc=$I,Fd=MK;function Od(r){if(r.length-r.l<8)throw"XLS Xnum Buffer underflow";return r.read_shift(8,"f")}function _c(r,e){return(e||Se(8)).write_shift(8,r,"f")}function VK(r){var e={},t=r.read_shift(1),n=t>>>1,i=r.read_shift(1),s=r.read_shift(2,"i"),a=r.read_shift(1),c=r.read_shift(1),d=r.read_shift(1);switch(r.l++,n){case 0:e.auto=1;break;case 1:e.index=i;var h=KK[i];h&&(e.rgb=ik(h));break;case 2:e.rgb=ik([a,c,d]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function dg(r,e){if(e||(e=Se(8)),!r||r.auto)return e.write_shift(4,0),e.write_shift(4,0),e;r.index!=null?(e.write_shift(1,2),e.write_shift(1,r.index)):r.theme!=null?(e.write_shift(1,6),e.write_shift(1,r.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=r.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!r.rgb||r.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=r.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function $K(r){var e=r.read_shift(1);r.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function BK(r,e){e||(e=Se(2));var t=(r.italic?2:0)|(r.strike?8:0)|(r.outline?16:0)|(r.shadow?32:0)|(r.condense?64:0)|(r.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var BI=2,$i=3,Bp=11,hg=19,Up=64,UK=65,zK=71,HK=4108,WK=4126,Dn=80,KN={1:{n:"CodePage",t:BI},2:{n:"Category",t:Dn},3:{n:"PresentationFormat",t:Dn},4:{n:"ByteCount",t:$i},5:{n:"LineCount",t:$i},6:{n:"ParagraphCount",t:$i},7:{n:"SlideCount",t:$i},8:{n:"NoteCount",t:$i},9:{n:"HiddenCount",t:$i},10:{n:"MultimediaClipCount",t:$i},11:{n:"ScaleCrop",t:Bp},12:{n:"HeadingPairs",t:HK},13:{n:"TitlesOfParts",t:WK},14:{n:"Manager",t:Dn},15:{n:"Company",t:Dn},16:{n:"LinksUpToDate",t:Bp},17:{n:"CharacterCount",t:$i},19:{n:"SharedDoc",t:Bp},22:{n:"HyperlinksChanged",t:Bp},23:{n:"AppVersion",t:$i,p:"version"},24:{n:"DigSig",t:UK},26:{n:"ContentType",t:Dn},27:{n:"ContentStatus",t:Dn},28:{n:"Language",t:Dn},29:{n:"Version",t:Dn},255:{},2147483648:{n:"Locale",t:hg},2147483651:{n:"Behavior",t:hg},1919054434:{}},YN={1:{n:"CodePage",t:BI},2:{n:"Title",t:Dn},3:{n:"Subject",t:Dn},4:{n:"Author",t:Dn},5:{n:"Keywords",t:Dn},6:{n:"Comments",t:Dn},7:{n:"Template",t:Dn},8:{n:"LastAuthor",t:Dn},9:{n:"RevNumber",t:Dn},10:{n:"EditTime",t:Up},11:{n:"LastPrinted",t:Up},12:{n:"CreatedDate",t:Up},13:{n:"ModifiedDate",t:Up},14:{n:"PageCount",t:$i},15:{n:"WordCount",t:$i},16:{n:"CharCount",t:$i},17:{n:"Thumbnail",t:zK},18:{n:"Application",t:Dn},19:{n:"DocSecurity",t:$i},255:{},2147483648:{n:"Locale",t:hg},2147483651:{n:"Behavior",t:hg},1919054434:{}};function qK(r){return r.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var GK=qK([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),KK=Ii(GK),ff={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},YK={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},zp={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function UI(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function zI(r,e){var t=sK(YK),n=[],i;n[n.length]=cn,n[n.length]=Qe("Types",null,{xmlns:Tn.CT,"xmlns:xsd":Tn.xsd,"xmlns:xsi":Tn.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(d){return Qe("Default",null,{Extension:d[0],ContentType:d[1]})}));var s=function(d){r[d]&&r[d].length>0&&(i=r[d][0],n[n.length]=Qe("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:zp[d][e.bookType]||zp[d].xlsx}))},a=function(d){(r[d]||[]).forEach(function(h){n[n.length]=Qe("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:zp[d][e.bookType]||zp[d].xlsx})})},c=function(d){(r[d]||[]).forEach(function(h){n[n.length]=Qe("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:t[d][0]})})};return s("workbooks"),a("sheets"),a("charts"),c("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(c),c("vba"),c("comments"),c("threadedcomments"),c("drawings"),a("metadata"),c("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var sr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function HI(r){var e=r.lastIndexOf("/");return r.slice(0,e+1)+"_rels/"+r.slice(e+1)+".rels"}function Ku(r){var e=[cn,Qe("Relationships",null,{xmlns:Tn.RELS})];return Bn(r["!id"]).forEach(function(t){e[e.length]=Qe("Relationship",null,r["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function mr(r,e,t,n,i,s){if(i||(i={}),r["!id"]||(r["!id"]={}),r["!idx"]||(r["!idx"]=1),e<0)for(e=r["!idx"];r["!id"]["rId"+e];++e);if(r["!idx"]=e+1,i.Id="rId"+e,i.Type=n,i.Target=t,[sr.HLINK,sr.XPATH,sr.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),r["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return r["!id"][i.Id]=i,r[("/"+i.Target).replace("//","/")]=i,e}function XK(r){var e=[cn];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<r.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+r[t][0]+'" manifest:media-type="'+r[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function XN(r,e,t){return['  <rdf:Description rdf:about="'+r+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function QK(r,e){return['  <rdf:Description rdf:about="'+r+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function JK(r){var e=[cn];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=r.length;++t)e.push(XN(r[t][0],r[t][1])),e.push(QK("",r[t][0]));return e.push(XN("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function WI(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+ng.version+"</meta:generator></office:meta></office:document-meta>"}var nc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Av(r,e,t,n,i){i[r]!=null||e==null||e===""||(i[r]=e,e=yr(e),n[n.length]=t?Qe(r,e,t):Mn(r,e))}function qI(r,e){var t=e||{},n=[cn,Qe("cp:coreProperties",null,{"xmlns:cp":Tn.CORE_PROPS,"xmlns:dc":Tn.dc,"xmlns:dcterms":Tn.dcterms,"xmlns:dcmitype":Tn.dcmitype,"xmlns:xsi":Tn.xsi})],i={};if(!r&&!t.Props)return n.join("");r&&(r.CreatedDate!=null&&Av("dcterms:created",typeof r.CreatedDate=="string"?r.CreatedDate:L1(r.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),r.ModifiedDate!=null&&Av("dcterms:modified",typeof r.ModifiedDate=="string"?r.ModifiedDate:L1(r.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var s=0;s!=nc.length;++s){var a=nc[s],c=t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:r?r[a[1]]:null;c===!0?c="1":c===!1?c="0":typeof c=="number"&&(c=String(c)),c!=null&&Av(a[0],c,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Yu=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],GI=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function KI(r){var e=[],t=Qe;return r||(r={}),r.Application="SheetJS",e[e.length]=cn,e[e.length]=Qe("Properties",null,{xmlns:Tn.EXT_PROPS,"xmlns:vt":Tn.vt}),Yu.forEach(function(n){if(r[n[1]]!==void 0){var i;switch(n[2]){case"string":i=yr(String(r[n[1]]));break;case"bool":i=r[n[1]]?"true":"false";break}i!==void 0&&(e[e.length]=t(n[0],i))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(r.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",r.SheetNames.map(function(n){return"<vt:lpstr>"+yr(n)+"</vt:lpstr>"}).join(""),{size:r.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function YI(r){var e=[cn,Qe("Properties",null,{xmlns:Tn.CUST_PROPS,"xmlns:vt":Tn.vt})];if(!r)return e.join("");var t=1;return Bn(r).forEach(function(i){++t,e[e.length]=Qe("property",gK(r[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:yr(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var QN={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function ZK(r,e){var t=[];return Bn(QN).map(function(n){for(var i=0;i<nc.length;++i)if(nc[i][1]==n)return nc[i];for(i=0;i<Yu.length;++i)if(Yu[i][1]==n)return Yu[i];throw n}).forEach(function(n){if(r[n[1]]!=null){var i=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:r[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),t.push(Mn(QN[n[1]]||n[1],i))}}),Qe("DocumentProperties",t.join(""),{xmlns:zi.o})}function eY(r,e){var t=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return r&&Bn(r).forEach(function(s){if(Object.prototype.hasOwnProperty.call(r,s)){for(var a=0;a<nc.length;++a)if(s==nc[a][1])return;for(a=0;a<Yu.length;++a)if(s==Yu[a][1])return;for(a=0;a<t.length;++a)if(s==t[a])return;var c=r[s],d="string";typeof c=="number"?(d="float",c=String(c)):c===!0||c===!1?(d="boolean",c=c?"1":"0"):c=String(c),i.push(Qe(MN(s),c,{"dt:dt":d}))}}),e&&Bn(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(r&&Object.prototype.hasOwnProperty.call(r,s))){var a=e[s],c="string";typeof a=="number"?(c="float",a=String(a)):a===!0||a===!1?(c="boolean",a=a?"1":"0"):a instanceof Date?(c="dateTime.tz",a=a.toISOString()):a=String(a),i.push(Qe(MN(s),a,{"dt:dt":c}))}}),"<"+n+' xmlns="'+zi.o+'">'+i.join("")+"</"+n+">"}function tY(r){var e=typeof r=="string"?new Date(Date.parse(r)):r,t=e.getTime()/1e3+11644473600,n=t%Math.pow(2,32),i=(t-n)/Math.pow(2,32);n*=1e7,i*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),i+=s);var a=Se(8);return a.write_shift(4,n),a.write_shift(4,i),a}function JN(r,e){var t=Se(4),n=Se(4);switch(t.write_shift(4,r==80?31:r),r){case 3:n.write_shift(-4,e);break;case 5:n=Se(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=tY(e);break;case 31:case 80:for(n=Se(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+r+" "+e)}return Ln([t,n])}var XI=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function rY(r){switch(typeof r){case"boolean":return 11;case"number":return(r|0)==r?3:5;case"string":return 31;case"object":if(r instanceof Date)return 64;break}return-1}function ZN(r,e,t){var n=Se(8),i=[],s=[],a=8,c=0,d=Se(8),h=Se(8);if(d.write_shift(4,2),d.write_shift(4,1200),h.write_shift(4,1),s.push(d),i.push(h),a+=8+d.length,!e){h=Se(8),h.write_shift(4,0),i.unshift(h);var p=[Se(4)];for(p[0].write_shift(4,r.length),c=0;c<r.length;++c){var m=r[c][0];for(d=Se(8+2*(m.length+1)+(m.length%2?0:2)),d.write_shift(4,c+2),d.write_shift(4,m.length+1),d.write_shift(0,m,"dbcs");d.l!=d.length;)d.write_shift(1,0);p.push(d)}d=Ln(p),s.unshift(d),a+=8+d.length}for(c=0;c<r.length;++c)if(!(e&&!e[r[c][0]])&&!(XI.indexOf(r[c][0])>-1||GI.indexOf(r[c][0])>-1)&&r[c][1]!=null){var x=r[c][1],v=0;if(e){v=+e[r[c][0]];var _=t[v];if(_.p=="version"&&typeof x=="string"){var w=x.split(".");x=(+w[0]<<16)+(+w[1]||0)}d=JN(_.t,x)}else{var E=rY(x);E==-1&&(E=31,x=String(x)),d=JN(E,x)}s.push(d),h=Se(8),h.write_shift(4,e?v:2+c),i.push(h),a+=8+d.length}var j=8*(s.length+1);for(c=0;c<s.length;++c)i[c].write_shift(4,j),j+=s[c].length;return n.write_shift(4,a),n.write_shift(4,s.length),Ln([n].concat(i).concat(s))}function ek(r,e,t,n,i,s){var a=Se(i?68:48),c=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,_r.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var d=ZN(r,t,n);if(c.push(d),i){var h=ZN(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+d.length),c.push(h)}return Ln(c)}function nY(r,e){e||(e=Se(r));for(var t=0;t<r;++t)e.write_shift(1,0);return e}function iY(r,e){return r.read_shift(e)===1}function li(r,e){return e||(e=Se(2)),e.write_shift(2,+!!r),e}function QI(r){return r.read_shift(2,"u")}function hs(r,e){return e||(e=Se(2)),e.write_shift(2,r),e}function JI(r,e,t){return t||(t=Se(2)),t.write_shift(1,e=="e"?+r:+!!r),t.write_shift(1,e=="e"?1:0),t}function ZI(r,e,t){var n=r.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var s=r.read_shift(1);s&&(i="dbcs-cont")}else t.biff==12&&(i="wstr");t.biff>=2&&t.biff<=5&&(i="cpstr");var a=n?r.read_shift(n,i):"";return a}function sY(r){var e=r.t||"",t=Se(3);t.write_shift(2,e.length),t.write_shift(1,1);var n=Se(2*e.length);n.write_shift(2*e.length,e,"utf16le");var i=[t,n];return Ln(i)}function aY(r,e,t){var n;if(t){if(t.biff>=2&&t.biff<=5)return r.read_shift(e,"cpstr");if(t.biff>=12)return r.read_shift(e,"dbcs-cont")}var i=r.read_shift(1);return i===0?n=r.read_shift(e,"sbcs-cont"):n=r.read_shift(e,"dbcs-cont"),n}function oY(r,e,t){var n=r.read_shift(t&&t.biff==2?1:2);return n===0?(r.l++,""):aY(r,n,t)}function lY(r,e,t){if(t.biff>5)return oY(r,e,t);var n=r.read_shift(1);return n===0?(r.l++,""):r.read_shift(n,t.biff<=4||!r.lens?"cpstr":"sbcs-cont")}function eP(r,e,t){return t||(t=Se(3+2*r.length)),t.write_shift(2,r.length),t.write_shift(1,1),t.write_shift(31,r,"utf16le"),t}function tk(r,e){e||(e=Se(6+r.length*2)),e.write_shift(4,1+r.length);for(var t=0;t<r.length;++t)e.write_shift(2,r.charCodeAt(t));return e.write_shift(2,0),e}function cY(r){var e=Se(512),t=0,n=r.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),s=i>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(t=0;t<a.length;++t)e.write_shift(4,a[t]);if(s==28)n=n.slice(1),tk(n,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));var c=i>-1?n.slice(0,i):n;for(e.write_shift(4,2*(c.length+1)),t=0;t<c.length;++t)e.write_shift(2,c.charCodeAt(t));e.write_shift(2,0),s&8&&tk(i>-1?n.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));for(var d=0;n.slice(d*3,d*3+3)=="../"||n.slice(d*3,d*3+3)=="..\\";)++d;for(e.write_shift(2,d),e.write_shift(4,n.length-3*d+1),t=0;t<n.length-3*d;++t)e.write_shift(1,n.charCodeAt(t+3*d)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function Ec(r,e,t,n){return n||(n=Se(6)),n.write_shift(2,r),n.write_shift(2,e),n.write_shift(2,t||0),n}function uY(r,e,t){var n=t.biff>8?4:2,i=r.read_shift(n),s=r.read_shift(n,"i"),a=r.read_shift(n,"i");return[i,s,a]}function dY(r){var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(2),i=r.read_shift(2);return{s:{c:n,r:e},e:{c:i,r:t}}}function tP(r,e){return e||(e=Se(8)),e.write_shift(2,r.s.r),e.write_shift(2,r.e.r),e.write_shift(2,r.s.c),e.write_shift(2,r.e.c),e}function yw(r,e,t){var n=1536,i=16;switch(t.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Se(i);return s.write_shift(2,n),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function hY(r,e){var t=!e||e.biff==8,n=Se(t?112:54);for(n.write_shift(e.biff==8?2:1,7),t&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(t?0:536870912));n.l<n.length;)n.write_shift(1,t?0:32);return n}function fY(r,e){var t=!e||e.biff>=8?2:1,n=Se(8+t*r.name.length);n.write_shift(4,r.pos),n.write_shift(1,r.hs||0),n.write_shift(1,r.dt),n.write_shift(1,r.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(t*r.name.length,r.name,e.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function pY(r,e){var t=Se(8);t.write_shift(4,r.Count),t.write_shift(4,r.Unique);for(var n=[],i=0;i<r.length;++i)n[i]=sY(r[i]);var s=Ln([t].concat(n));return s.parts=[t.length].concat(n.map(function(a){return a.length})),s}function mY(){var r=Se(18);return r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,29280),r.write_shift(2,17600),r.write_shift(2,56),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,1),r.write_shift(2,500),r}function gY(r){var e=Se(18),t=1718;return r&&r.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function xY(r,e){var t=r.name||"Arial",n=e&&e.biff==5,i=n?15+t.length:16+2*t.length,s=Se(i);return s.write_shift(2,r.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,t.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*t.length,t,n?"sbcs":"utf16le"),s}function yY(r,e,t,n){var i=Se(10);return Ec(r,e,n,i),i.write_shift(4,t),i}function vY(r,e,t,n,i){var s=!i||i.biff==8,a=Se(8+ +s+(1+s)*t.length);return Ec(r,e,n,a),a.write_shift(2,t.length),s&&a.write_shift(1,1),a.write_shift((1+s)*t.length,t,s?"utf16le":"sbcs"),a}function bY(r,e,t,n){var i=t&&t.biff==5;n||(n=Se(i?3+e.length:5+2*e.length)),n.write_shift(2,r),n.write_shift(i?1:2,e.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}function wY(r,e){var t=e.biff==8||!e.biff?4:2,n=Se(2*t+6);return n.write_shift(t,r.s.r),n.write_shift(t,r.e.r+1),n.write_shift(2,r.s.c),n.write_shift(2,r.e.c+1),n.write_shift(2,0),n}function rk(r,e,t,n){var i=t&&t.biff==5;n||(n=Se(i?16:20)),n.write_shift(2,0),r.style?(n.write_shift(2,r.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,r.numFmtId||0),n.write_shift(2,e<<4));var s=0;return r.numFmtId>0&&i&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function _Y(r){var e=Se(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function EY(r,e,t,n,i,s){var a=Se(8);return Ec(r,e,n,a),JI(t,s,a),a}function TY(r,e,t,n){var i=Se(14);return Ec(r,e,n,i),_c(t,i),i}function AY(r,e,t){if(t.biff<8)return NY(r,e,t);for(var n=[],i=r.l+e,s=r.read_shift(t.biff>8?4:2);s--!==0;)n.push(uY(r,t.biff>8?12:6,t));if(r.l!=i)throw new Error("Bad ExternSheet: "+r.l+" != "+i);return n}function NY(r,e,t){r[r.l+1]==3&&r[r.l]++;var n=ZI(r,e,t);return n.charCodeAt(0)==3?n.slice(1):n}function kY(r){var e=Se(2+r.length*8);e.write_shift(2,r.length);for(var t=0;t<r.length;++t)tP(r[t],e);return e}function SY(r){var e=Se(24),t=An(r[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(n[i],16));return Ln([e,cY(r[1])])}function CY(r){var e=r[1].Tooltip,t=Se(10+2*(e.length+1));t.write_shift(2,2048);var n=An(r[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var i=0;i<e.length;++i)t.write_shift(2,e.charCodeAt(i));return t.write_shift(2,0),t}function IY(r){return r||(r=Se(4)),r.write_shift(2,1),r.write_shift(2,1),r}function PY(r,e,t){if(!t.cellStyles)return _a(r,e);var n=t&&t.biff>=12?4:2,i=r.read_shift(n),s=r.read_shift(n),a=r.read_shift(n),c=r.read_shift(n),d=r.read_shift(2);n==2&&(r.l+=2);var h={s:i,e:s,w:a,ixfe:c,flags:d};return(t.biff>=5||!t.biff)&&(h.level=d>>8&7),h}function RY(r,e){var t=Se(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,r.width*256),t.write_shift(2,0);var n=0;return r.hidden&&(n|=1),t.write_shift(1,n),n=r.level||0,t.write_shift(1,n),t.write_shift(2,0),t}function jY(r){for(var e=Se(2*r),t=0;t<r;++t)e.write_shift(2,t+1);return e}function DY(r,e,t){var n=Se(15);return mf(n,r,e),n.write_shift(8,t,"f"),n}function FY(r,e,t){var n=Se(9);return mf(n,r,e),n.write_shift(2,t),n}var OY=(function(){var r={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=ow({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(c,d){var h=[],p=wc(1);switch(d.type){case"base64":p=Os(io(c));break;case"binary":p=Os(c);break;case"buffer":case"array":p=c;break}Ui(p,0);var m=p.read_shift(1),x=!!(m&136),v=!1,_=!1;switch(m){case 2:break;case 3:break;case 48:v=!0,x=!0;break;case 49:v=!0,x=!0;break;case 131:break;case 139:break;case 140:_=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+m.toString(16))}var w=0,E=521;m==2&&(w=p.read_shift(2)),p.l+=3,m!=2&&(w=p.read_shift(4)),w>1048576&&(w=1e6),m!=2&&(E=p.read_shift(2));var j=p.read_shift(2),P=d.codepage||1252;m!=2&&(p.l+=16,p.read_shift(1),p[p.l]!==0&&(P=r[p[p.l]]),p.l+=1,p.l+=2),_&&(p.l+=36);for(var V=[],L={},K=Math.min(p.length,m==2?521:E-10-(v?264:0)),H=_?32:11;p.l<K&&p[p.l]!=13;)switch(L={},L.name=ig.utils.decode(P,p.slice(p.l,p.l+H)).replace(/[\u0000\r\n].*$/g,""),p.l+=H,L.type=String.fromCharCode(p.read_shift(1)),m!=2&&!_&&(L.offset=p.read_shift(4)),L.len=p.read_shift(1),m==2&&(L.offset=p.read_shift(2)),L.dec=p.read_shift(1),L.name.length&&V.push(L),m!=2&&(p.l+=_?13:14),L.type){case"B":(!v||L.len!=8)&&d.WTF&&console.log("Skipping "+L.name+":"+L.type);break;case"G":case"P":d.WTF&&console.log("Skipping "+L.name+":"+L.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+L.type)}if(p[p.l]!==13&&(p.l=E-1),p.read_shift(1)!==13)throw new Error("DBF Terminator not found "+p.l+" "+p[p.l]);p.l=E;var S=0,N=0;for(h[0]=[],N=0;N!=V.length;++N)h[0][N]=V[N].name;for(;w-- >0;){if(p[p.l]===42){p.l+=j;continue}for(++p.l,h[++S]=[],N=0,N=0;N!=V.length;++N){var I=p.slice(p.l,p.l+V[N].len);p.l+=V[N].len,Ui(I,0);var R=ig.utils.decode(P,I);switch(V[N].type){case"C":R.trim().length&&(h[S][N]=R.replace(/\s+$/,""));break;case"D":R.length===8?h[S][N]=new Date(+R.slice(0,4),+R.slice(4,6)-1,+R.slice(6,8)):h[S][N]=R;break;case"F":h[S][N]=parseFloat(R.trim());break;case"+":case"I":h[S][N]=_?I.read_shift(-4,"i")^2147483648:I.read_shift(4,"i");break;case"L":switch(R.trim().toUpperCase()){case"Y":case"T":h[S][N]=!0;break;case"N":case"F":h[S][N]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+R+"|")}break;case"M":if(!x)throw new Error("DBF Unexpected MEMO for type "+m.toString(16));h[S][N]="##MEMO##"+(_?parseInt(R.trim(),10):I.read_shift(4));break;case"N":R=R.replace(/\u0000/g,"").trim(),R&&R!="."&&(h[S][N]=+R||0);break;case"@":h[S][N]=new Date(I.read_shift(-8,"f")-621356832e5);break;case"T":h[S][N]=new Date((I.read_shift(4)-2440588)*864e5+I.read_shift(4));break;case"Y":h[S][N]=I.read_shift(4,"i")/1e4+I.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":h[S][N]=-I.read_shift(-8,"f");break;case"B":if(v&&V[N].len==8){h[S][N]=I.read_shift(8,"f");break}case"G":case"P":I.l+=V[N].len;break;case"0":if(V[N].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+V[N].type)}}}if(m!=2&&p.l<p.length&&p[p.l++]!=26)throw new Error("DBF EOF Marker missing "+(p.l-1)+" of "+p.length+" "+p[p.l-1].toString(16));return d&&d.sheetRows&&(h=h.slice(0,d.sheetRows)),d.DBF=V,h}function n(c,d){var h=d||{};h.dateNF||(h.dateNF="yyyymmdd");var p=Dd(t(c,h),h);return p["!cols"]=h.DBF.map(function(m){return{wch:m.len,DBF:m}}),delete h.DBF,p}function i(c,d){try{return Fc(n(c,d),d)}catch(h){if(d&&d.WTF)throw h}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(c,d){var h=d||{};if(+h.codepage>=0&&Nh(+h.codepage),h.type=="string")throw new Error("Cannot write DBF to JS string");var p=Si(),m=xg(c,{header:1,raw:!0,cellDates:!0}),x=m[0],v=m.slice(1),_=c["!cols"]||[],w=0,E=0,j=0,P=1;for(w=0;w<x.length;++w){if(((_[w]||{}).DBF||{}).name){x[w]=_[w].DBF.name,++j;continue}if(x[w]!=null){if(++j,typeof x[w]=="number"&&(x[w]=x[w].toString(10)),typeof x[w]!="string")throw new Error("DBF Invalid column name "+x[w]+" |"+typeof x[w]+"|");if(x.indexOf(x[w])!==w){for(E=0;E<1024;++E)if(x.indexOf(x[w]+"_"+E)==-1){x[w]+="_"+E;break}}}}var V=Rr(c["!ref"]),L=[],K=[],H=[];for(w=0;w<=V.e.c-V.s.c;++w){var S="",N="",I=0,R=[];for(E=0;E<v.length;++E)v[E][w]!=null&&R.push(v[E][w]);if(R.length==0||x[w]==null){L[w]="?";continue}for(E=0;E<R.length;++E){switch(typeof R[E]){case"number":N="B";break;case"string":N="C";break;case"boolean":N="L";break;case"object":N=R[E]instanceof Date?"D":"C";break;default:N="C"}I=Math.max(I,String(R[E]).length),S=S&&S!=N?"C":N}I>250&&(I=250),N=((_[w]||{}).DBF||{}).type,N=="C"&&_[w].DBF.len>I&&(I=_[w].DBF.len),S=="B"&&N=="N"&&(S="N",H[w]=_[w].DBF.dec,I=_[w].DBF.len),K[w]=S=="C"||N=="N"?I:s[S]||0,P+=K[w],L[w]=S}var M=p.next(32);for(M.write_shift(4,318902576),M.write_shift(4,v.length),M.write_shift(2,296+32*j),M.write_shift(2,P),w=0;w<4;++w)M.write_shift(4,0);for(M.write_shift(4,0|(+e[nI]||3)<<8),w=0,E=0;w<x.length;++w)if(x[w]!=null){var D=p.next(32),F=(x[w].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);D.write_shift(1,F,"sbcs"),D.write_shift(1,L[w]=="?"?"C":L[w],"sbcs"),D.write_shift(4,E),D.write_shift(1,K[w]||s[L[w]]||0),D.write_shift(1,H[w]||0),D.write_shift(1,2),D.write_shift(4,0),D.write_shift(1,0),D.write_shift(4,0),D.write_shift(4,0),E+=K[w]||s[L[w]]||0}var he=p.next(264);for(he.write_shift(4,13),w=0;w<65;++w)he.write_shift(4,0);for(w=0;w<v.length;++w){var Ae=p.next(P);for(Ae.write_shift(1,0),E=0;E<x.length;++E)if(x[E]!=null)switch(L[E]){case"L":Ae.write_shift(1,v[w][E]==null?63:v[w][E]?84:70);break;case"B":Ae.write_shift(8,v[w][E]||0,"f");break;case"N":var Oe="0";for(typeof v[w][E]=="number"&&(Oe=v[w][E].toFixed(H[E]||0)),j=0;j<K[E]-Oe.length;++j)Ae.write_shift(1,32);Ae.write_shift(1,Oe,"sbcs");break;case"D":v[w][E]?(Ae.write_shift(4,("0000"+v[w][E].getFullYear()).slice(-4),"sbcs"),Ae.write_shift(2,("00"+(v[w][E].getMonth()+1)).slice(-2),"sbcs"),Ae.write_shift(2,("00"+v[w][E].getDate()).slice(-2),"sbcs")):Ae.write_shift(8,"00000000","sbcs");break;case"C":var De=String(v[w][E]!=null?v[w][E]:"").slice(0,K[E]);for(Ae.write_shift(1,De,"sbcs"),j=0;j<K[E]-De.length;++j)Ae.write_shift(1,32);break}}return p.next(1).write_shift(1,26),p.end()}return{to_workbook:i,to_sheet:n,from_sheet:a}})(),LY=(function(){var r={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Bn(r).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(x,v){var _=r[v];return typeof _=="number"?NN(_):_},n=function(x,v,_){var w=v.charCodeAt(0)-32<<4|_.charCodeAt(0)-48;return w==59?x:NN(w)};r["|"]=254;function i(x,v){switch(v.type){case"base64":return s(io(x),v);case"binary":return s(x,v);case"buffer":return s(cr&&Buffer.isBuffer(x)?x.toString("binary"):uf(x),v);case"array":return s(ox(x),v)}throw new Error("Unrecognized type "+v.type)}function s(x,v){var _=x.split(/[\n\r]+/),w=-1,E=-1,j=0,P=0,V=[],L=[],K=null,H={},S=[],N=[],I=[],R=0,M;for(+v.codepage>=0&&Nh(+v.codepage);j!==_.length;++j){R=0;var D=_[j].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,t),F=D.replace(/;;/g,"\0").split(";").map(function(ie){return ie.replace(/\u0000/g,";")}),he=F[0],Ae;if(D.length>0)switch(he){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":F[1].charAt(0)=="P"&&L.push(D.slice(3).replace(/;;/g,";"));break;case"C":var Oe=!1,De=!1,we=!1,_e=!1,Ne=-1,ae=-1;for(P=1;P<F.length;++P)switch(F[P].charAt(0)){case"A":break;case"X":E=parseInt(F[P].slice(1))-1,De=!0;break;case"Y":for(w=parseInt(F[P].slice(1))-1,De||(E=0),M=V.length;M<=w;++M)V[M]=[];break;case"K":Ae=F[P].slice(1),Ae.charAt(0)==='"'?Ae=Ae.slice(1,Ae.length-1):Ae==="TRUE"?Ae=!0:Ae==="FALSE"?Ae=!1:isNaN(Ya(Ae))?isNaN(Sh(Ae).getDate())||(Ae=di(Ae)):(Ae=Ya(Ae),K!==null&&mI(K)&&(Ae=vI(Ae))),Oe=!0;break;case"E":_e=!0;var W=FX(F[P].slice(1),{r:w,c:E});V[w][E]=[V[w][E],W];break;case"S":we=!0,V[w][E]=[V[w][E],"S5S"];break;case"G":break;case"R":Ne=parseInt(F[P].slice(1))-1;break;case"C":ae=parseInt(F[P].slice(1))-1;break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+D)}if(Oe&&(V[w][E]&&V[w][E].length==2?V[w][E][0]=Ae:V[w][E]=Ae,K=null),we){if(_e)throw new Error("SYLK shared formula cannot have own formula");var ee=Ne>-1&&V[Ne][ae];if(!ee||!ee[1])throw new Error("SYLK shared formula cannot find base");V[w][E][1]=OX(ee[1],{r:w-Ne,c:E-ae})}break;case"F":var te=0;for(P=1;P<F.length;++P)switch(F[P].charAt(0)){case"X":E=parseInt(F[P].slice(1))-1,++te;break;case"Y":for(w=parseInt(F[P].slice(1))-1,M=V.length;M<=w;++M)V[M]=[];break;case"M":R=parseInt(F[P].slice(1))/20;break;case"F":break;case"G":break;case"P":K=L[parseInt(F[P].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(I=F[P].slice(1).split(" "),M=parseInt(I[0],10);M<=parseInt(I[1],10);++M)R=parseInt(I[2],10),N[M-1]=R===0?{hidden:!0}:{wch:R},vw(N[M-1]);break;case"C":E=parseInt(F[P].slice(1))-1,N[E]||(N[E]={});break;case"R":w=parseInt(F[P].slice(1))-1,S[w]||(S[w]={}),R>0?(S[w].hpt=R,S[w].hpx=aP(R)):R===0&&(S[w].hidden=!0);break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+D)}te<1&&(K=null);break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+D)}}return S.length>0&&(H["!rows"]=S),N.length>0&&(H["!cols"]=N),v&&v.sheetRows&&(V=V.slice(0,v.sheetRows)),[V,H]}function a(x,v){var _=i(x,v),w=_[0],E=_[1],j=Dd(w,v);return Bn(E).forEach(function(P){j[P]=E[P]}),j}function c(x,v){return Fc(a(x,v),v)}function d(x,v,_,w){var E="C;Y"+(_+1)+";X"+(w+1)+";K";switch(x.t){case"n":E+=x.v||0,x.f&&!x.F&&(E+=";E"+ww(x.f,{r:_,c:w}));break;case"b":E+=x.v?"TRUE":"FALSE";break;case"e":E+=x.w||x.v;break;case"d":E+='"'+(x.w||x.v)+'"';break;case"s":E+='"'+x.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function h(x,v){v.forEach(function(_,w){var E="F;W"+(w+1)+" "+(w+1)+" ";_.hidden?E+="0":(typeof _.width=="number"&&!_.wpx&&(_.wpx=fg(_.width)),typeof _.wpx=="number"&&!_.wch&&(_.wch=pg(_.wpx)),typeof _.wch=="number"&&(E+=Math.round(_.wch))),E.charAt(E.length-1)!=" "&&x.push(E)})}function p(x,v){v.forEach(function(_,w){var E="F;";_.hidden?E+="M0;":_.hpt?E+="M"+20*_.hpt+";":_.hpx&&(E+="M"+20*mg(_.hpx)+";"),E.length>2&&x.push(E+"R"+(w+1))})}function m(x,v){var _=["ID;PWXL;N;E"],w=[],E=Rr(x["!ref"]),j,P=Array.isArray(x),V=`\r
`;_.push("P;PGeneral"),_.push("F;P0;DG0G8;M255"),x["!cols"]&&h(_,x["!cols"]),x["!rows"]&&p(_,x["!rows"]),_.push("B;Y"+(E.e.r-E.s.r+1)+";X"+(E.e.c-E.s.c+1)+";D"+[E.s.c,E.s.r,E.e.c,E.e.r].join(" "));for(var L=E.s.r;L<=E.e.r;++L)for(var K=E.s.c;K<=E.e.c;++K){var H=br({r:L,c:K});j=P?(x[L]||[])[K]:x[H],!(!j||j.v==null&&(!j.f||j.F))&&w.push(d(j,x,L,K))}return _.join(V)+V+w.join(V)+V+"E"+V}return{to_workbook:c,to_sheet:a,from_sheet:m}})(),MY=(function(){function r(s,a){switch(a.type){case"base64":return e(io(s),a);case"binary":return e(s,a);case"buffer":return e(cr&&Buffer.isBuffer(s)?s.toString("binary"):uf(s),a);case"array":return e(ox(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var c=s.split(`
`),d=-1,h=-1,p=0,m=[];p!==c.length;++p){if(c[p].trim()==="BOT"){m[++d]=[],h=0;continue}if(!(d<0)){var x=c[p].trim().split(","),v=x[0],_=x[1];++p;for(var w=c[p]||"";(w.match(/["]/g)||[]).length&1&&p<c.length-1;)w+=`
`+c[++p];switch(w=w.trim(),+v){case-1:if(w==="BOT"){m[++d]=[],h=0;continue}else if(w!=="EOD")throw new Error("Unrecognized DIF special command "+w);break;case 0:w==="TRUE"?m[d][h]=!0:w==="FALSE"?m[d][h]=!1:isNaN(Ya(_))?isNaN(Sh(_).getDate())?m[d][h]=_:m[d][h]=di(_):m[d][h]=Ya(_),++h;break;case 1:w=w.slice(1,w.length-1),w=w.replace(/""/g,'"'),w&&w.match(/^=".*"$/)&&(w=w.slice(2,-1)),m[d][h++]=w!==""?w:null;break}if(w==="EOD")break}}return a&&a.sheetRows&&(m=m.slice(0,a.sheetRows)),m}function t(s,a){return Dd(r(s,a),a)}function n(s,a){return Fc(t(s,a),a)}var i=(function(){var s=function(d,h,p,m,x){d.push(h),d.push(p+","+m),d.push('"'+x.replace(/"/g,'""')+'"')},a=function(d,h,p,m){d.push(h+","+p),d.push(h==1?'"'+m.replace(/"/g,'""')+'"':m)};return function(d){var h=[],p=Rr(d["!ref"]),m,x=Array.isArray(d);s(h,"TABLE",0,1,"sheetjs"),s(h,"VECTORS",0,p.e.r-p.s.r+1,""),s(h,"TUPLES",0,p.e.c-p.s.c+1,""),s(h,"DATA",0,0,"");for(var v=p.s.r;v<=p.e.r;++v){a(h,-1,0,"BOT");for(var _=p.s.c;_<=p.e.c;++_){var w=br({r:v,c:_});if(m=x?(d[v]||[])[_]:d[w],!m){a(h,1,0,"");continue}switch(m.t){case"n":var E=m.w;!E&&m.v!=null&&(E=m.v),E==null?m.f&&!m.F?a(h,1,0,"="+m.f):a(h,1,0,""):a(h,0,E,"V");break;case"b":a(h,0,m.v?1:0,m.v?"TRUE":"FALSE");break;case"s":a(h,1,0,isNaN(m.v)?m.v:'="'+m.v+'"');break;case"d":m.w||(m.w=ul(m.z||Qr[14],Ci(di(m.v)))),a(h,0,m.w,"V");break;default:a(h,1,0,"")}}}a(h,-1,0,"EOD");var j=`\r
`,P=h.join(j);return P}})();return{to_workbook:n,to_sheet:t,from_sheet:i}})(),rP=(function(){function r(m){return m.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(m){return m.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(m,x){for(var v=m.split(`
`),_=-1,w=-1,E=0,j=[];E!==v.length;++E){var P=v[E].trim().split(":");if(P[0]==="cell"){var V=An(P[1]);if(j.length<=V.r)for(_=j.length;_<=V.r;++_)j[_]||(j[_]=[]);switch(_=V.r,w=V.c,P[2]){case"t":j[_][w]=r(P[3]);break;case"v":j[_][w]=+P[3];break;case"vtf":var L=P[P.length-1];case"vtc":switch(P[3]){case"nl":j[_][w]=!!+P[4];break;default:j[_][w]=+P[4];break}P[2]=="vtf"&&(j[_][w]=[j[_][w],L])}}}return x&&x.sheetRows&&(j=j.slice(0,x.sheetRows)),j}function n(m,x){return Dd(t(m,x),x)}function i(m,x){return Fc(n(m,x),x)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,c=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),d="--SocialCalcSpreadsheetControlSave--";function h(m){if(!m||!m["!ref"])return"";for(var x=[],v=[],_,w="",E=Ji(m["!ref"]),j=Array.isArray(m),P=E.s.r;P<=E.e.r;++P)for(var V=E.s.c;V<=E.e.c;++V)if(w=br({r:P,c:V}),_=j?(m[P]||[])[V]:m[w],!(!_||_.v==null||_.t==="z")){switch(v=["cell",w,"t"],_.t){case"s":case"str":v.push(e(_.v));break;case"n":_.f?(v[2]="vtf",v[3]="n",v[4]=_.v,v[5]=e(_.f)):(v[2]="v",v[3]=_.v);break;case"b":v[2]="vt"+(_.f?"f":"c"),v[3]="nl",v[4]=_.v?"1":"0",v[5]=e(_.f||(_.v?"TRUE":"FALSE"));break;case"d":var L=Ci(di(_.v));v[2]="vtc",v[3]="nd",v[4]=""+L,v[5]=_.w||ul(_.z||Qr[14],L);break;case"e":continue}x.push(v.join(":"))}return x.push("sheet:c:"+(E.e.c-E.s.c+1)+":r:"+(E.e.r-E.s.r+1)+":tvf:1"),x.push("valueformat:1:text-wiki"),x.join(`
`)}function p(m){return[s,a,c,a,h(m),d].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:p}})(),VY=(function(){function r(p,m,x,v,_){_.raw?m[x][v]=p:p===""||(p==="TRUE"?m[x][v]=!0:p==="FALSE"?m[x][v]=!1:isNaN(Ya(p))?isNaN(Sh(p).getDate())?m[x][v]=p:m[x][v]=di(p):m[x][v]=Ya(p))}function e(p,m){var x=m||{},v=[];if(!p||p.length===0)return v;for(var _=p.split(/[\r\n]/),w=_.length-1;w>=0&&_[w].length===0;)--w;for(var E=10,j=0,P=0;P<=w;++P)j=_[P].indexOf(" "),j==-1?j=_[P].length:j++,E=Math.max(E,j);for(P=0;P<=w;++P){v[P]=[];var V=0;for(r(_[P].slice(0,E).trim(),v,P,V,x),V=1;V<=(_[P].length-E)/10+1;++V)r(_[P].slice(E+(V-1)*10,E+V*10).trim(),v,P,V,x)}return x.sheetRows&&(v=v.slice(0,x.sheetRows)),v}var t={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(p){for(var m={},x=!1,v=0,_=0;v<p.length;++v)(_=p.charCodeAt(v))==34?x=!x:!x&&_ in t&&(m[_]=(m[_]||0)+1);_=[];for(v in m)Object.prototype.hasOwnProperty.call(m,v)&&_.push([m[v],v]);if(!_.length){m=n;for(v in m)Object.prototype.hasOwnProperty.call(m,v)&&_.push([m[v],v])}return _.sort(function(w,E){return w[0]-E[0]||n[w[1]]-n[E[1]]}),t[_.pop()[1]]||44}function s(p,m){var x=m||{},v="",_=x.dense?[]:{},w={s:{c:0,r:0},e:{c:0,r:0}};p.slice(0,4)=="sep="?p.charCodeAt(5)==13&&p.charCodeAt(6)==10?(v=p.charAt(4),p=p.slice(7)):p.charCodeAt(5)==13||p.charCodeAt(5)==10?(v=p.charAt(4),p=p.slice(6)):v=i(p.slice(0,1024)):x&&x.FS?v=x.FS:v=i(p.slice(0,1024));var E=0,j=0,P=0,V=0,L=0,K=v.charCodeAt(0),H=!1,S=0,N=p.charCodeAt(0);p=p.replace(/\r\n/mg,`
`);var I=x.dateNF!=null?tK(x.dateNF):null;function R(){var M=p.slice(V,L),D={};if(M.charAt(0)=='"'&&M.charAt(M.length-1)=='"'&&(M=M.slice(1,-1).replace(/""/g,'"')),M.length===0)D.t="z";else if(x.raw)D.t="s",D.v=M;else if(M.trim().length===0)D.t="s",D.v=M;else if(M.charCodeAt(0)==61)M.charCodeAt(1)==34&&M.charCodeAt(M.length-1)==34?(D.t="s",D.v=M.slice(2,-1).replace(/""/g,'"')):LX(M)?(D.t="n",D.f=M.slice(1)):(D.t="s",D.v=M);else if(M=="TRUE")D.t="b",D.v=!0;else if(M=="FALSE")D.t="b",D.v=!1;else if(!isNaN(P=Ya(M)))D.t="n",x.cellText!==!1&&(D.w=M),D.v=P;else if(!isNaN(Sh(M).getDate())||I&&M.match(I)){D.z=x.dateNF||Qr[14];var F=0;I&&M.match(I)&&(M=rK(M,x.dateNF,M.match(I)||[]),F=1),x.cellDates?(D.t="d",D.v=di(M,F)):(D.t="n",D.v=Ci(di(M,F))),x.cellText!==!1&&(D.w=ul(D.z,D.v instanceof Date?Ci(D.v):D.v)),x.cellNF||delete D.z}else D.t="s",D.v=M;if(D.t=="z"||(x.dense?(_[E]||(_[E]=[]),_[E][j]=D):_[br({c:j,r:E})]=D),V=L+1,N=p.charCodeAt(V),w.e.c<j&&(w.e.c=j),w.e.r<E&&(w.e.r=E),S==K)++j;else if(j=0,++E,x.sheetRows&&x.sheetRows<=E)return!0}e:for(;L<p.length;++L)switch(S=p.charCodeAt(L)){case 34:N===34&&(H=!H);break;case K:case 10:case 13:if(!H&&R())break e;break}return L-V>0&&R(),_["!ref"]=on(w),_}function a(p,m){return!(m&&m.PRN)||m.FS||p.slice(0,4)=="sep="||p.indexOf("	")>=0||p.indexOf(",")>=0||p.indexOf(";")>=0?s(p,m):Dd(e(p,m),m)}function c(p,m){var x="",v=m.type=="string"?[0,0,0,0]:Qee(p,m);switch(m.type){case"base64":x=io(p);break;case"binary":x=p;break;case"buffer":m.codepage==65001?x=p.toString("utf8"):m.codepage&&typeof ig<"u"||(x=cr&&Buffer.isBuffer(p)?p.toString("binary"):uf(p));break;case"array":x=ox(p);break;case"string":x=p;break;default:throw new Error("Unrecognized type "+m.type)}return v[0]==239&&v[1]==187&&v[2]==191?x=K0(x.slice(3)):m.type!="string"&&m.type!="buffer"&&m.codepage==65001?x=K0(x):m.type=="binary"&&typeof ig<"u",x.slice(0,19)=="socialcalc:version:"?rP.to_sheet(m.type=="string"?x:K0(x),m):a(x,m)}function d(p,m){return Fc(c(p,m),m)}function h(p){for(var m=[],x=Rr(p["!ref"]),v,_=Array.isArray(p),w=x.s.r;w<=x.e.r;++w){for(var E=[],j=x.s.c;j<=x.e.c;++j){var P=br({r:w,c:j});if(v=_?(p[w]||[])[j]:p[P],!v||v.v==null){E.push("          ");continue}for(var V=(v.w||(so(v),v.w)||"").slice(0,10);V.length<10;)V+=" ";E.push(V+(j===0?" ":""))}m.push(E.join(""))}return m.join(`
`)}return{to_workbook:d,to_sheet:c,from_sheet:h}})(),nk=(function(){function r(W,ee,te){if(W){Ui(W,W.l||0);for(var ie=te.Enum||Ne;W.l<W.length;){var U=W.read_shift(2),be=ie[U]||ie[65535],Ce=W.read_shift(2),ke=W.l+Ce,Ee=be.f&&be.f(W,Ce,te);if(W.l=ke,ee(Ee,be,U))return}}}function e(W,ee){switch(ee.type){case"base64":return t(Os(io(W)),ee);case"binary":return t(Os(W),ee);case"buffer":case"array":return t(W,ee)}throw"Unsupported type "+ee.type}function t(W,ee){if(!W)return W;var te=ee||{},ie=te.dense?[]:{},U="Sheet1",be="",Ce=0,ke={},Ee=[],Ke=[],dt={s:{r:0,c:0},e:{r:0,c:0}},zt=te.sheetRows||0;if(W[2]==0&&(W[3]==8||W[3]==9)&&W.length>=16&&W[14]==5&&W[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(W[2]==2)te.Enum=Ne,r(W,function(Pe,Qt,St){switch(St){case 0:te.vers=Pe,Pe>=4096&&(te.qpro=!0);break;case 6:dt=Pe;break;case 204:Pe&&(be=Pe);break;case 222:be=Pe;break;case 15:case 51:te.qpro||(Pe[1].v=Pe[1].v.slice(1));case 13:case 14:case 16:St==14&&(Pe[2]&112)==112&&(Pe[2]&15)>1&&(Pe[2]&15)<15&&(Pe[1].z=te.dateNF||Qr[14],te.cellDates&&(Pe[1].t="d",Pe[1].v=vI(Pe[1].v))),te.qpro&&Pe[3]>Ce&&(ie["!ref"]=on(dt),ke[U]=ie,Ee.push(U),ie=te.dense?[]:{},dt={s:{r:0,c:0},e:{r:0,c:0}},Ce=Pe[3],U=be||"Sheet"+(Ce+1),be="");var Be=te.dense?(ie[Pe[0].r]||[])[Pe[0].c]:ie[br(Pe[0])];if(Be){Be.t=Pe[1].t,Be.v=Pe[1].v,Pe[1].z!=null&&(Be.z=Pe[1].z),Pe[1].f!=null&&(Be.f=Pe[1].f);break}te.dense?(ie[Pe[0].r]||(ie[Pe[0].r]=[]),ie[Pe[0].r][Pe[0].c]=Pe[1]):ie[br(Pe[0])]=Pe[1];break}},te);else if(W[2]==26||W[2]==14)te.Enum=ae,W[2]==14&&(te.qpro=!0,W.l=0),r(W,function(Pe,Qt,St){switch(St){case 204:U=Pe;break;case 22:Pe[1].v=Pe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Pe[3]>Ce&&(ie["!ref"]=on(dt),ke[U]=ie,Ee.push(U),ie=te.dense?[]:{},dt={s:{r:0,c:0},e:{r:0,c:0}},Ce=Pe[3],U="Sheet"+(Ce+1)),zt>0&&Pe[0].r>=zt)break;te.dense?(ie[Pe[0].r]||(ie[Pe[0].r]=[]),ie[Pe[0].r][Pe[0].c]=Pe[1]):ie[br(Pe[0])]=Pe[1],dt.e.c<Pe[0].c&&(dt.e.c=Pe[0].c),dt.e.r<Pe[0].r&&(dt.e.r=Pe[0].r);break;case 27:Pe[14e3]&&(Ke[Pe[14e3][0]]=Pe[14e3][1]);break;case 1537:Ke[Pe[0]]=Pe[1],Pe[0]==Ce&&(U=Pe[1]);break}},te);else throw new Error("Unrecognized LOTUS BOF "+W[2]);if(ie["!ref"]=on(dt),ke[be||U]=ie,Ee.push(be||U),!Ke.length)return{SheetNames:Ee,Sheets:ke};for(var bt={},tr=[],Et=0;Et<Ke.length;++Et)ke[Ee[Et]]?(tr.push(Ke[Et]||Ee[Et]),bt[Ke[Et]]=ke[Ke[Et]]||ke[Ee[Et]]):(tr.push(Ke[Et]),bt[Ke[Et]]={"!ref":"A1"});return{SheetNames:tr,Sheets:bt}}function n(W,ee){var te=ee||{};if(+te.codepage>=0&&Nh(+te.codepage),te.type=="string")throw new Error("Cannot write WK1 to JS string");var ie=Si(),U=Rr(W["!ref"]),be=Array.isArray(W),Ce=[];Je(ie,0,s(1030)),Je(ie,6,d(U));for(var ke=Math.min(U.e.r,8191),Ee=U.s.r;Ee<=ke;++Ee)for(var Ke=$n(Ee),dt=U.s.c;dt<=U.e.c;++dt){Ee===U.s.r&&(Ce[dt]=Zn(dt));var zt=Ce[dt]+Ke,bt=be?(W[Ee]||[])[dt]:W[zt];if(!(!bt||bt.t=="z"))if(bt.t=="n")(bt.v|0)==bt.v&&bt.v>=-32768&&bt.v<=32767?Je(ie,13,v(Ee,dt,bt.v)):Je(ie,14,w(Ee,dt,bt.v));else{var tr=so(bt);Je(ie,15,m(Ee,dt,tr.slice(0,239)))}}return Je(ie,1),ie.end()}function i(W,ee){var te=ee||{};if(+te.codepage>=0&&Nh(+te.codepage),te.type=="string")throw new Error("Cannot write WK3 to JS string");var ie=Si();Je(ie,0,a(W));for(var U=0,be=0;U<W.SheetNames.length;++U)(W.Sheets[W.SheetNames[U]]||{})["!ref"]&&Je(ie,27,_e(W.SheetNames[U],be++));var Ce=0;for(U=0;U<W.SheetNames.length;++U){var ke=W.Sheets[W.SheetNames[U]];if(!(!ke||!ke["!ref"])){for(var Ee=Rr(ke["!ref"]),Ke=Array.isArray(ke),dt=[],zt=Math.min(Ee.e.r,8191),bt=Ee.s.r;bt<=zt;++bt)for(var tr=$n(bt),Et=Ee.s.c;Et<=Ee.e.c;++Et){bt===Ee.s.r&&(dt[Et]=Zn(Et));var Pe=dt[Et]+tr,Qt=Ke?(ke[bt]||[])[Et]:ke[Pe];if(!(!Qt||Qt.t=="z"))if(Qt.t=="n")Je(ie,23,R(bt,Et,Ce,Qt.v));else{var St=so(Qt);Je(ie,22,S(bt,Et,Ce,St.slice(0,239)))}}++Ce}}return Je(ie,1),ie.end()}function s(W){var ee=Se(2);return ee.write_shift(2,W),ee}function a(W){var ee=Se(26);ee.write_shift(2,4096),ee.write_shift(2,4),ee.write_shift(4,0);for(var te=0,ie=0,U=0,be=0;be<W.SheetNames.length;++be){var Ce=W.SheetNames[be],ke=W.Sheets[Ce];if(!(!ke||!ke["!ref"])){++U;var Ee=Ji(ke["!ref"]);te<Ee.e.r&&(te=Ee.e.r),ie<Ee.e.c&&(ie=Ee.e.c)}}return te>8191&&(te=8191),ee.write_shift(2,te),ee.write_shift(1,U),ee.write_shift(1,ie),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(1,1),ee.write_shift(1,2),ee.write_shift(4,0),ee.write_shift(4,0),ee}function c(W,ee,te){var ie={s:{c:0,r:0},e:{c:0,r:0}};return ee==8&&te.qpro?(ie.s.c=W.read_shift(1),W.l++,ie.s.r=W.read_shift(2),ie.e.c=W.read_shift(1),W.l++,ie.e.r=W.read_shift(2),ie):(ie.s.c=W.read_shift(2),ie.s.r=W.read_shift(2),ee==12&&te.qpro&&(W.l+=2),ie.e.c=W.read_shift(2),ie.e.r=W.read_shift(2),ee==12&&te.qpro&&(W.l+=2),ie.s.c==65535&&(ie.s.c=ie.e.c=ie.s.r=ie.e.r=0),ie)}function d(W){var ee=Se(8);return ee.write_shift(2,W.s.c),ee.write_shift(2,W.s.r),ee.write_shift(2,W.e.c),ee.write_shift(2,W.e.r),ee}function h(W,ee,te){var ie=[{c:0,r:0},{t:"n",v:0},0,0];return te.qpro&&te.vers!=20768?(ie[0].c=W.read_shift(1),ie[3]=W.read_shift(1),ie[0].r=W.read_shift(2),W.l+=2):(ie[2]=W.read_shift(1),ie[0].c=W.read_shift(2),ie[0].r=W.read_shift(2)),ie}function p(W,ee,te){var ie=W.l+ee,U=h(W,ee,te);if(U[1].t="s",te.vers==20768){W.l++;var be=W.read_shift(1);return U[1].v=W.read_shift(be,"utf8"),U}return te.qpro&&W.l++,U[1].v=W.read_shift(ie-W.l,"cstr"),U}function m(W,ee,te){var ie=Se(7+te.length);ie.write_shift(1,255),ie.write_shift(2,ee),ie.write_shift(2,W),ie.write_shift(1,39);for(var U=0;U<ie.length;++U){var be=te.charCodeAt(U);ie.write_shift(1,be>=128?95:be)}return ie.write_shift(1,0),ie}function x(W,ee,te){var ie=h(W,ee,te);return ie[1].v=W.read_shift(2,"i"),ie}function v(W,ee,te){var ie=Se(7);return ie.write_shift(1,255),ie.write_shift(2,ee),ie.write_shift(2,W),ie.write_shift(2,te,"i"),ie}function _(W,ee,te){var ie=h(W,ee,te);return ie[1].v=W.read_shift(8,"f"),ie}function w(W,ee,te){var ie=Se(13);return ie.write_shift(1,255),ie.write_shift(2,ee),ie.write_shift(2,W),ie.write_shift(8,te,"f"),ie}function E(W,ee,te){var ie=W.l+ee,U=h(W,ee,te);if(U[1].v=W.read_shift(8,"f"),te.qpro)W.l=ie;else{var be=W.read_shift(2);L(W.slice(W.l,W.l+be),U),W.l+=be}return U}function j(W,ee,te){var ie=ee&32768;return ee&=-32769,ee=(ie?W:0)+(ee>=8192?ee-16384:ee),(ie?"":"$")+(te?Zn(ee):$n(ee))}var P={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},V=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function L(W,ee){Ui(W,0);for(var te=[],ie=0,U="",be="",Ce="",ke="";W.l<W.length;){var Ee=W[W.l++];switch(Ee){case 0:te.push(W.read_shift(8,"f"));break;case 1:be=j(ee[0].c,W.read_shift(2),!0),U=j(ee[0].r,W.read_shift(2),!1),te.push(be+U);break;case 2:{var Ke=j(ee[0].c,W.read_shift(2),!0),dt=j(ee[0].r,W.read_shift(2),!1);be=j(ee[0].c,W.read_shift(2),!0),U=j(ee[0].r,W.read_shift(2),!1),te.push(Ke+dt+":"+be+U)}break;case 3:if(W.l<W.length){console.error("WK1 premature formula end");return}break;case 4:te.push("("+te.pop()+")");break;case 5:te.push(W.read_shift(2));break;case 6:{for(var zt="";Ee=W[W.l++];)zt+=String.fromCharCode(Ee);te.push('"'+zt.replace(/"/g,'""')+'"')}break;case 8:te.push("-"+te.pop());break;case 23:te.push("+"+te.pop());break;case 22:te.push("NOT("+te.pop()+")");break;case 20:case 21:ke=te.pop(),Ce=te.pop(),te.push(["AND","OR"][Ee-20]+"("+Ce+","+ke+")");break;default:if(Ee<32&&V[Ee])ke=te.pop(),Ce=te.pop(),te.push(Ce+V[Ee]+ke);else if(P[Ee]){if(ie=P[Ee][1],ie==69&&(ie=W[W.l++]),ie>te.length){console.error("WK1 bad formula parse 0x"+Ee.toString(16)+":|"+te.join("|")+"|");return}var bt=te.slice(-ie);te.length-=ie,te.push(P[Ee][0]+"("+bt.join(",")+")")}else return Ee<=7?console.error("WK1 invalid opcode "+Ee.toString(16)):Ee<=24?console.error("WK1 unsupported op "+Ee.toString(16)):Ee<=30?console.error("WK1 invalid opcode "+Ee.toString(16)):Ee<=115?console.error("WK1 unsupported function opcode "+Ee.toString(16)):console.error("WK1 unrecognized opcode "+Ee.toString(16))}}te.length==1?ee[1].f=""+te[0]:console.error("WK1 bad formula parse |"+te.join("|")+"|")}function K(W){var ee=[{c:0,r:0},{t:"n",v:0},0];return ee[0].r=W.read_shift(2),ee[3]=W[W.l++],ee[0].c=W[W.l++],ee}function H(W,ee){var te=K(W);return te[1].t="s",te[1].v=W.read_shift(ee-4,"cstr"),te}function S(W,ee,te,ie){var U=Se(6+ie.length);U.write_shift(2,W),U.write_shift(1,te),U.write_shift(1,ee),U.write_shift(1,39);for(var be=0;be<ie.length;++be){var Ce=ie.charCodeAt(be);U.write_shift(1,Ce>=128?95:Ce)}return U.write_shift(1,0),U}function N(W,ee){var te=K(W);te[1].v=W.read_shift(2);var ie=te[1].v>>1;if(te[1].v&1)switch(ie&7){case 0:ie=(ie>>3)*5e3;break;case 1:ie=(ie>>3)*500;break;case 2:ie=(ie>>3)/20;break;case 3:ie=(ie>>3)/200;break;case 4:ie=(ie>>3)/2e3;break;case 5:ie=(ie>>3)/2e4;break;case 6:ie=(ie>>3)/16;break;case 7:ie=(ie>>3)/64;break}return te[1].v=ie,te}function I(W,ee){var te=K(W),ie=W.read_shift(4),U=W.read_shift(4),be=W.read_shift(2);if(be==65535)return ie===0&&U===3221225472?(te[1].t="e",te[1].v=15):ie===0&&U===3489660928?(te[1].t="e",te[1].v=42):te[1].v=0,te;var Ce=be&32768;return be=(be&32767)-16446,te[1].v=(1-Ce*2)*(U*Math.pow(2,be+32)+ie*Math.pow(2,be)),te}function R(W,ee,te,ie){var U=Se(14);if(U.write_shift(2,W),U.write_shift(1,te),U.write_shift(1,ee),ie==0)return U.write_shift(4,0),U.write_shift(4,0),U.write_shift(2,65535),U;var be=0,Ce=0,ke=0,Ee=0;return ie<0&&(be=1,ie=-ie),Ce=Math.log2(ie)|0,ie/=Math.pow(2,Ce-31),Ee=ie>>>0,(Ee&2147483648)==0&&(ie/=2,++Ce,Ee=ie>>>0),ie-=Ee,Ee|=2147483648,Ee>>>=0,ie*=Math.pow(2,32),ke=ie>>>0,U.write_shift(4,ke),U.write_shift(4,Ee),Ce+=16383+(be?32768:0),U.write_shift(2,Ce),U}function M(W,ee){var te=I(W);return W.l+=ee-14,te}function D(W,ee){var te=K(W),ie=W.read_shift(4);return te[1].v=ie>>6,te}function F(W,ee){var te=K(W),ie=W.read_shift(8,"f");return te[1].v=ie,te}function he(W,ee){var te=F(W);return W.l+=ee-10,te}function Ae(W,ee){return W[W.l+ee-1]==0?W.read_shift(ee,"cstr"):""}function Oe(W,ee){var te=W[W.l++];te>ee-1&&(te=ee-1);for(var ie="";ie.length<te;)ie+=String.fromCharCode(W[W.l++]);return ie}function De(W,ee,te){if(!(!te.qpro||ee<21)){var ie=W.read_shift(1);W.l+=17,W.l+=1,W.l+=2;var U=W.read_shift(ee-21,"cstr");return[ie,U]}}function we(W,ee){for(var te={},ie=W.l+ee;W.l<ie;){var U=W.read_shift(2);if(U==14e3){for(te[U]=[0,""],te[U][0]=W.read_shift(2);W[W.l];)te[U][1]+=String.fromCharCode(W[W.l]),W.l++;W.l++}}return te}function _e(W,ee){var te=Se(5+W.length);te.write_shift(2,14e3),te.write_shift(2,ee);for(var ie=0;ie<W.length;++ie){var U=W.charCodeAt(ie);te[te.l++]=U>127?95:U}return te[te.l++]=0,te}var Ne={0:{n:"BOF",f:QI},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:c},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:x},14:{n:"NUMBER",f:_},15:{n:"LABEL",f:p},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:p},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Ae},222:{n:"SHEETNAMELP",f:Oe},65535:{n:""}},ae={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:H},23:{n:"NUMBER17",f:I},24:{n:"NUMBER18",f:N},25:{n:"FORMULA19",f:M},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:we},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:D},38:{n:"??"},39:{n:"NUMBER27",f:F},40:{n:"FORMULA28",f:he},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Ae},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:De},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:e}})(),$Y=/^\s|\s$|[\t\n\r]/;function nP(r,e){if(!e.bookSST)return"";var t=[cn];t[t.length]=Qe("sst",null,{xmlns:jd[0],count:r.Count,uniqueCount:r.Unique});for(var n=0;n!=r.length;++n)if(r[n]!=null){var i=r[n],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match($Y)&&(s+=' xml:space="preserve"'),s+=">"+yr(i.t)+"</t>"),s+="</si>",t[t.length]=s}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function BY(r){return[r.read_shift(4),r.read_shift(4)]}function UY(r,e){return e||(e=Se(8)),e.write_shift(4,r.Count),e.write_shift(4,r.Unique),e}var zY=jK;function HY(r){var e=Si();Me(e,159,UY(r));for(var t=0;t<r.length;++t)Me(e,19,zY(r[t]));return Me(e,160),e.end()}function WY(r){for(var e=[],t=r.split(""),n=0;n<t.length;++n)e[n]=t[n].charCodeAt(0);return e}function iP(r){var e=0,t,n=WY(r),i=n.length+1,s,a,c,d,h;for(t=wc(i),t[0]=n.length,s=1;s!=i;++s)t[s]=n[s-1];for(s=i-1;s>=0;--s)a=t[s],c=(e&16384)===0?0:1,d=e<<1&32767,h=c|d,e=h^a;return e^52811}var qY=(function(){function r(i,s){switch(s.type){case"base64":return e(io(i),s);case"binary":return e(i,s);case"buffer":return e(cr&&Buffer.isBuffer(i)?i.toString("binary"):uf(i),s);case"array":return e(ox(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},c=a.dense?[]:{},d=i.match(/\\trowd.*?\\row\b/g);if(!d.length)throw new Error("RTF missing table");var h={s:{c:0,r:0},e:{c:0,r:d.length-1}};return d.forEach(function(p,m){Array.isArray(c)&&(c[m]=[]);for(var x=/\\\w+\b/g,v=0,_,w=-1;_=x.exec(p);){switch(_[0]){case"\\cell":var E=p.slice(v,x.lastIndex-_[0].length);if(E[0]==" "&&(E=E.slice(1)),++w,E.length){var j={v:E,t:"s"};Array.isArray(c)?c[m][w]=j:c[br({r:m,c:w})]=j}break}v=x.lastIndex}w>h.e.c&&(h.e.c=w)}),c["!ref"]=on(h),c}function t(i,s){return Fc(r(i,s),s)}function n(i){for(var s=["{\\rtf1\\ansi"],a=Rr(i["!ref"]),c,d=Array.isArray(i),h=a.s.r;h<=a.e.r;++h){s.push("\\trowd\\trautofit1");for(var p=a.s.c;p<=a.e.c;++p)s.push("\\cellx"+(p+1));for(s.push("\\pard\\intbl"),p=a.s.c;p<=a.e.c;++p){var m=br({r:h,c:p});c=d?(i[h]||[])[p]:i[m],!(!c||c.v==null&&(!c.f||c.F))&&(s.push(" "+(c.w||(so(c),c.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:t,to_sheet:r,from_sheet:n}})();function ik(r){for(var e=0,t=1;e!=3;++e)t=t*256+(r[e]>255?255:r[e]<0?0:r[e]);return t.toString(16).toUpperCase().slice(1)}var GY=6,Xa=GY;function fg(r){return Math.floor((r+Math.round(128/Xa)/256)*Xa)}function pg(r){return Math.floor((r-5)/Xa*100+.5)/100}function V1(r){return Math.round((r*Xa+5)/Xa*256)/256}function vw(r){r.width?(r.wpx=fg(r.width),r.wch=pg(r.wpx),r.MDW=Xa):r.wpx?(r.wch=pg(r.wpx),r.width=V1(r.wch),r.MDW=Xa):typeof r.wch=="number"&&(r.width=V1(r.wch),r.wpx=fg(r.width),r.MDW=Xa),r.customWidth&&delete r.customWidth}var KY=96,sP=KY;function mg(r){return r*96/sP}function aP(r){return r*sP/96}function YY(r){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var n=t[0];n<=t[1];++n)r[n]!=null&&(e[e.length]=Qe("numFmt",null,{numFmtId:n,formatCode:yr(r[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Qe("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function XY(r){var e=[];return e[e.length]=Qe("cellXfs",null),r.forEach(function(t){e[e.length]=Qe("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Qe("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function oP(r,e){var t=[cn,Qe("styleSheet",null,{xmlns:jd[0],"xmlns:vt":Tn.vt})],n;return r.SSF&&(n=YY(r.SSF))!=null&&(t[t.length]=n),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=XY(e.cellXfs))&&(t[t.length]=n),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function QY(r,e){var t=r.read_shift(2),n=ei(r);return[t,n]}function JY(r,e,t){t||(t=Se(6+4*e.length)),t.write_shift(2,r),Nn(e,t);var n=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),n}function ZY(r,e,t){var n={};n.sz=r.read_shift(2)/20;var i=$K(r);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var s=r.read_shift(2);switch(s===700&&(n.bold=1),r.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=r.read_shift(1);a!=0&&(n.underline=a);var c=r.read_shift(1);c>0&&(n.family=c);var d=r.read_shift(1);switch(d>0&&(n.charset=d),r.l++,n.color=VK(r),r.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=ei(r),n}function eX(r,e){e||(e=Se(153)),e.write_shift(2,r.sz*20),BK(r,e),e.write_shift(2,r.bold?700:400);var t=0;r.vertAlign=="superscript"?t=1:r.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,r.underline||0),e.write_shift(1,r.family||0),e.write_shift(1,r.charset||0),e.write_shift(1,0),dg(r.color,e);var n=0;return n=2,e.write_shift(1,n),Nn(r.name,e),e.length>e.l?e.slice(0,e.l):e}var tX=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Nv,rX=_a;function sk(r,e){e||(e=Se(84)),Nv||(Nv=ow(tX));var t=Nv[r.patternType];t==null&&(t=40),e.write_shift(4,t);var n=0;if(t!=40)for(dg({auto:1},e),dg({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function nX(r,e){var t=r.l+e,n=r.read_shift(2),i=r.read_shift(2);return r.l=t,{ixfe:n,numFmtId:i}}function lP(r,e,t){t||(t=Se(16)),t.write_shift(2,e||0),t.write_shift(2,r.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var n=0;return t.write_shift(1,n),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function _0(r,e){return e||(e=Se(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var iX=_a;function sX(r,e){return e||(e=Se(51)),e.write_shift(1,0),_0(null,e),_0(null,e),_0(null,e),_0(null,e),_0(null,e),e.length>e.l?e.slice(0,e.l):e}function aX(r,e){return e||(e=Se(52)),e.write_shift(4,r.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),ug(r.name||"",e),e.length>e.l?e.slice(0,e.l):e}function oX(r,e,t){var n=Se(2052);return n.write_shift(4,r),ug(e,n),ug(t,n),n.length>n.l?n.slice(0,n.l):n}function lX(r,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&++t}),t!=0&&(Me(r,615,Us(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&Me(r,44,JY(i,e[i]))}),Me(r,616))}}function cX(r){var e=1;Me(r,611,Us(e)),Me(r,43,eX({sz:12,color:{theme:1},name:"Calibri",family:2})),Me(r,612)}function uX(r){var e=2;Me(r,603,Us(e)),Me(r,45,sk({patternType:"none"})),Me(r,45,sk({patternType:"gray125"})),Me(r,604)}function dX(r){var e=1;Me(r,613,Us(e)),Me(r,46,sX()),Me(r,614)}function hX(r){var e=1;Me(r,626,Us(e)),Me(r,47,lP({numFmtId:0},65535)),Me(r,627)}function fX(r,e){Me(r,617,Us(e.length)),e.forEach(function(t){Me(r,47,lP(t,0))}),Me(r,618)}function pX(r){var e=1;Me(r,619,Us(e)),Me(r,48,aX({xfId:0,name:"Normal"})),Me(r,620)}function mX(r){var e=0;Me(r,505,Us(e)),Me(r,506)}function gX(r){var e=0;Me(r,508,oX(e,"TableStyleMedium9","PivotStyleMedium4")),Me(r,509)}function xX(r,e){var t=Si();return Me(t,278),lX(t,r.SSF),cX(t),uX(t),dX(t),hX(t),fX(t,e.cellXfs),pX(t),mX(t),gX(t),Me(t,279),t.end()}function cP(r,e){if(e&&e.themeXLSX)return e.themeXLSX;if(r&&typeof r.raw=="string")return r.raw;var t=[cn];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',t[t.length]='<a:font script="Hang" typeface="맑은 고딕"/>',t[t.length]='<a:font script="Hans" typeface="宋体"/>',t[t.length]='<a:font script="Hant" typeface="新細明體"/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',t[t.length]='<a:font script="Hang" typeface="맑은 고딕"/>',t[t.length]='<a:font script="Hans" typeface="宋体"/>',t[t.length]='<a:font script="Hant" typeface="新細明體"/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function yX(r,e){return{flags:r.read_shift(4),version:r.read_shift(4),name:ei(r)}}function vX(r){var e=Se(12+2*r.name.length);return e.write_shift(4,r.flags),e.write_shift(4,r.version),Nn(r.name,e),e.slice(0,e.l)}function bX(r){for(var e=[],t=r.read_shift(4);t-- >0;)e.push([r.read_shift(4),r.read_shift(4)]);return e}function wX(r){var e=Se(4+8*r.length);e.write_shift(4,r.length);for(var t=0;t<r.length;++t)e.write_shift(4,r[t][0]),e.write_shift(4,r[t][1]);return e}function _X(r,e){var t=Se(8+2*e.length);return t.write_shift(4,r),Nn(e,t),t.slice(0,t.l)}function EX(r){return r.l+=4,r.read_shift(4)!=0}function TX(r,e){var t=Se(8);return t.write_shift(4,r),t.write_shift(4,1),t}function AX(){var r=Si();return Me(r,332),Me(r,334,Us(1)),Me(r,335,vX({name:"XLDAPR",version:12e4,flags:3496657072})),Me(r,336),Me(r,339,_X(1,"XLDAPR")),Me(r,52),Me(r,35,Us(514)),Me(r,4096,Us(0)),Me(r,4097,hs(1)),Me(r,36),Me(r,53),Me(r,340),Me(r,337,TX(1)),Me(r,51,wX([[1,0]])),Me(r,338),Me(r,333),r.end()}function uP(){var r=[cn];return r.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),r.join("")}function NX(r){var e={};e.i=r.read_shift(4);var t={};t.r=r.read_shift(4),t.c=r.read_shift(4),e.r=br(t);var n=r.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var Uu=1024;function dP(r,e){for(var t=[21600,21600],n=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),i=[Qe("xml",null,{"xmlns:v":zi.v,"xmlns:o":zi.o,"xmlns:x":zi.x,"xmlns:mv":zi.mv}).replace(/\/>/,">"),Qe("o:shapelayout",Qe("o:idmap",null,{"v:ext":"edit",data:r}),{"v:ext":"edit"}),Qe("v:shapetype",[Qe("v:stroke",null,{joinstyle:"miter"}),Qe("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:n})];Uu<r*1e3;)Uu+=1e3;return e.forEach(function(s){var a=An(s[0]),c={color2:"#BEFF82",type:"gradient"};c.type=="gradient"&&(c.angle="-180");var d=c.type=="gradient"?Qe("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,h=Qe("v:fill",d,c),p={on:"t",obscured:"t"};++Uu,i=i.concat(["<v:shape"+Ih({id:"_x0000_s"+Uu,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",h,Qe("v:shadow",null,p),Qe("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Mn("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),Mn("x:AutoFill","False"),Mn("x:Row",String(a.r)),Mn("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function hP(r){var e=[cn,Qe("comments",null,{xmlns:jd[0]})],t=[];return e.push("<authors>"),r.forEach(function(n){n[1].forEach(function(i){var s=yr(i.a);t.indexOf(s)==-1&&(t.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&t.indexOf("tc="+i.ID)==-1&&(t.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),r.forEach(function(n){var i=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?i=t.indexOf("tc="+n[1][0].ID):n[1].forEach(function(d){d.a&&(i=t.indexOf(yr(d.a))),s.push(d.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(Mn("t",yr(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,c=1;c<s.length;++c)a+=`Reply:
    `+s[c]+`
`;e.push(Mn("t",yr(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function kX(r,e,t){var n=[cn,Qe("ThreadedComments",null,{xmlns:Tn.TCMNT}).replace(/[\/]>/,">")];return r.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,c){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var d={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};c==0?s=d.id:d.parentId=s,a.ID=d.id,a.a&&(d.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),n.push(Qe("threadedComment",Mn("text",a.t||""),d))})}),n.push("</ThreadedComments>"),n.join("")}function SX(r){var e=[cn,Qe("personList",null,{xmlns:Tn.TCMNT,"xmlns:x":jd[0]}).replace(/[\/]>/,">")];return r.forEach(function(t,n){e.push(Qe("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function CX(r){var e={};e.iauthor=r.read_shift(4);var t=Vc(r);return e.rfx=t.s,e.ref=br(t.s),r.l+=16,e}function IX(r,e){return e==null&&(e=Se(36)),e.write_shift(4,r[1].iauthor),Fd(r[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var PX=ei;function RX(r){return Nn(r.slice(0,54))}function jX(r){var e=Si(),t=[];return Me(e,628),Me(e,630),r.forEach(function(n){n[1].forEach(function(i){t.indexOf(i.a)>-1||(t.push(i.a.slice(0,54)),Me(e,632,RX(i.a)))})}),Me(e,631),Me(e,633),r.forEach(function(n){n[1].forEach(function(i){i.iauthor=t.indexOf(i.a);var s={s:An(n[0]),e:An(n[0])};Me(e,635,IX([s,i])),i.t&&i.t.length>0&&Me(e,637,FK(i)),Me(e,636),delete i.iauthor})}),Me(e,634),Me(e,629),e.end()}function DX(r,e){e.FullPaths.forEach(function(t,n){if(n!=0){var i=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&_r.utils.cfb_add(r,i,e.FileIndex[n].content)}})}var fP=["xlsb","xlsm","xlam","biff8","xla"],FX=(function(){var r=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(n,i,s,a){var c=!1,d=!1;s.length==0?d=!0:s.charAt(0)=="["&&(d=!0,s=s.slice(1,-1)),a.length==0?c=!0:a.charAt(0)=="["&&(c=!0,a=a.slice(1,-1));var h=s.length>0?parseInt(s,10)|0:0,p=a.length>0?parseInt(a,10)|0:0;return c?p+=e.c:--p,d?h+=e.r:--h,i+(c?"":"$")+Zn(p)+(d?"":"$")+$n(h)}return function(i,s){return e=s,i.replace(r,t)}})(),bw=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,ww=(function(){return function(e,t){return e.replace(bw,function(n,i,s,a,c,d){var h=pw(a)-(s?0:t.c),p=fw(d)-(c?0:t.r),m=p==0?"":c?p+1:"["+p+"]",x=h==0?"":s?h+1:"["+h+"]";return i+"R"+m+"C"+x})}})();function OX(r,e){return r.replace(bw,function(t,n,i,s,a,c){return n+(i=="$"?i+s:Zn(pw(s)+e.c))+(a=="$"?a+c:$n(fw(c)+e.r))})}function LX(r){return r.length!=1}function sn(r){r.l+=1}function dl(r,e){var t=r.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function pP(r,e,t){var n=2;if(t){if(t.biff>=2&&t.biff<=5)return mP(r);t.biff==12&&(n=4)}var i=r.read_shift(n),s=r.read_shift(n),a=dl(r),c=dl(r);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:c[0],cRel:c[1],rRel:c[2]}}}function mP(r){var e=dl(r),t=dl(r),n=r.read_shift(1),i=r.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function MX(r,e,t){if(t.biff<8)return mP(r);var n=r.read_shift(t.biff==12?4:2),i=r.read_shift(t.biff==12?4:2),s=dl(r),a=dl(r);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function gP(r,e,t){if(t&&t.biff>=2&&t.biff<=5)return VX(r);var n=r.read_shift(t&&t.biff==12?4:2),i=dl(r);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function VX(r){var e=dl(r),t=r.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function $X(r){var e=r.read_shift(2),t=r.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function BX(r,e,t){var n=t&&t.biff?t.biff:8;if(n>=2&&n<=5)return UX(r);var i=r.read_shift(n>=12?4:2),s=r.read_shift(2),a=(s&16384)>>14,c=(s&32768)>>15;if(s&=16383,c==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:c}}function UX(r){var e=r.read_shift(2),t=r.read_shift(1),n=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),i==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:i,rRel:n}}function zX(r,e,t){var n=(r[r.l++]&96)>>5,i=pP(r,t.biff>=2&&t.biff<=5?6:8,t);return[n,i]}function HX(r,e,t){var n=(r[r.l++]&96)>>5,i=r.read_shift(2,"i"),s=8;if(t)switch(t.biff){case 5:r.l+=12,s=6;break;case 12:s=12;break}var a=pP(r,s,t);return[n,i,a]}function WX(r,e,t){var n=(r[r.l++]&96)>>5;return r.l+=t&&t.biff>8?12:t.biff<8?6:8,[n]}function qX(r,e,t){var n=(r[r.l++]&96)>>5,i=r.read_shift(2),s=8;if(t)switch(t.biff){case 5:r.l+=12,s=6;break;case 12:s=12;break}return r.l+=s,[n,i]}function GX(r,e,t){var n=(r[r.l++]&96)>>5,i=MX(r,e-1,t);return[n,i]}function KX(r,e,t){var n=(r[r.l++]&96)>>5;return r.l+=t.biff==2?6:t.biff==12?14:7,[n]}function ak(r){var e=r[r.l+1]&1,t=1;return r.l+=4,[e,t]}function YX(r,e,t){r.l+=2;for(var n=r.read_shift(t&&t.biff==2?1:2),i=[],s=0;s<=n;++s)i.push(r.read_shift(t&&t.biff==2?1:2));return i}function XX(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(t&&t.biff==2?1:2)]}function QX(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(t&&t.biff==2?1:2)]}function JX(r){var e=r[r.l+1]&255?1:0;return r.l+=2,[e,r.read_shift(2)]}function ZX(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=t&&t.biff==2?3:4,[n]}function xP(r){var e=r.read_shift(1),t=r.read_shift(1);return[e,t]}function eQ(r){return r.read_shift(2),xP(r)}function tQ(r){return r.read_shift(2),xP(r)}function rQ(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var i=gP(r,0,t);return[n,i]}function nQ(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var i=BX(r,0,t);return[n,i]}function iQ(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var i=r.read_shift(2);t&&t.biff==5&&(r.l+=12);var s=gP(r,0,t);return[n,i,s]}function sQ(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var i=r.read_shift(t&&t.biff<=3?1:2);return[sJ[i],bP[i],n]}function aQ(r,e,t){var n=r[r.l++],i=r.read_shift(1),s=t&&t.biff<=3?[n==88?-1:0,r.read_shift(1)]:oQ(r);return[i,(s[0]===0?bP:iJ)[s[1]]]}function oQ(r){return[r[r.l+1]>>7,r.read_shift(2)&32767]}function lQ(r,e,t){r.l+=t&&t.biff==2?3:4}function cQ(r,e,t){if(r.l++,t&&t.biff==12)return[r.read_shift(4,"i"),0];var n=r.read_shift(2),i=r.read_shift(t&&t.biff==2?1:2);return[n,i]}function uQ(r){return r.l++,ff[r.read_shift(1)]}function dQ(r){return r.l++,r.read_shift(2)}function hQ(r){return r.l++,r.read_shift(1)!==0}function fQ(r){return r.l++,Od(r)}function pQ(r,e,t){return r.l++,ZI(r,e-1,t)}function mQ(r,e){var t=[r.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=iY(r,1)?"TRUE":"FALSE",e!=12&&(r.l+=7);break;case 37:case 16:t[1]=ff[r[r.l]],r.l+=e==12?4:8;break;case 0:r.l+=8;break;case 1:t[1]=Od(r);break;case 2:t[1]=lY(r,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function gQ(r,e,t){for(var n=r.read_shift(t.biff==12?4:2),i=[],s=0;s!=n;++s)i.push((t.biff==12?Vc:dY)(r));return i}function xQ(r,e,t){var n=0,i=0;t.biff==12?(n=r.read_shift(4),i=r.read_shift(4)):(i=1+r.read_shift(1),n=1+r.read_shift(2)),t.biff>=2&&t.biff<8&&(--n,--i==0&&(i=256));for(var s=0,a=[];s!=n&&(a[s]=[]);++s)for(var c=0;c!=i;++c)a[s][c]=mQ(r,t.biff);return a}function yQ(r,e,t){var n=r.read_shift(1)>>>5&3,i=!t||t.biff>=8?4:2,s=r.read_shift(i);switch(t.biff){case 2:r.l+=5;break;case 3:case 4:r.l+=8;break;case 5:r.l+=12;break}return[n,0,s]}function vQ(r,e,t){if(t.biff==5)return bQ(r);var n=r.read_shift(1)>>>5&3,i=r.read_shift(2),s=r.read_shift(4);return[n,i,s]}function bQ(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2,"i");r.l+=8;var n=r.read_shift(2);return r.l+=12,[e,t,n]}function wQ(r,e,t){var n=r.read_shift(1)>>>5&3;r.l+=t&&t.biff==2?3:4;var i=r.read_shift(t&&t.biff==2?1:2);return[n,i]}function _Q(r,e,t){var n=r.read_shift(1)>>>5&3,i=r.read_shift(t&&t.biff==2?1:2);return[n,i]}function EQ(r,e,t){var n=r.read_shift(1)>>>5&3;return r.l+=4,t.biff<8&&r.l--,t.biff==12&&(r.l+=2),[n]}function TQ(r,e,t){var n=(r[r.l++]&96)>>5,i=r.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6;break}return r.l+=s,[n,i]}var AQ=_a,NQ=_a,kQ=_a;function pf(r,e,t){return r.l+=2,[$X(r)]}function _w(r){return r.l+=6,[]}var SQ=pf,CQ=_w,IQ=_w,PQ=pf;function yP(r){return r.l+=2,[QI(r),r.read_shift(2)&1]}var RQ=pf,jQ=yP,DQ=_w,FQ=pf,OQ=pf,LQ=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function MQ(r){r.l+=2;var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(4),i=r.read_shift(2),s=r.read_shift(2),a=LQ[t>>2&31];return{ixti:e,coltype:t&3,rt:a,idx:n,c:i,C:s}}function VQ(r){return r.l+=2,[r.read_shift(4)]}function $Q(r,e,t){return r.l+=5,r.l+=2,r.l+=t.biff==2?1:4,["PTGSHEET"]}function BQ(r,e,t){return r.l+=t.biff==2?4:5,["PTGENDSHEET"]}function UQ(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2);return[e,t]}function zQ(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2);return[e,t]}function HQ(r){return r.l+=4,[0,0]}var ok={1:{n:"PtgExp",f:cQ},2:{n:"PtgTbl",f:kQ},3:{n:"PtgAdd",f:sn},4:{n:"PtgSub",f:sn},5:{n:"PtgMul",f:sn},6:{n:"PtgDiv",f:sn},7:{n:"PtgPower",f:sn},8:{n:"PtgConcat",f:sn},9:{n:"PtgLt",f:sn},10:{n:"PtgLe",f:sn},11:{n:"PtgEq",f:sn},12:{n:"PtgGe",f:sn},13:{n:"PtgGt",f:sn},14:{n:"PtgNe",f:sn},15:{n:"PtgIsect",f:sn},16:{n:"PtgUnion",f:sn},17:{n:"PtgRange",f:sn},18:{n:"PtgUplus",f:sn},19:{n:"PtgUminus",f:sn},20:{n:"PtgPercent",f:sn},21:{n:"PtgParen",f:sn},22:{n:"PtgMissArg",f:sn},23:{n:"PtgStr",f:pQ},26:{n:"PtgSheet",f:$Q},27:{n:"PtgEndSheet",f:BQ},28:{n:"PtgErr",f:uQ},29:{n:"PtgBool",f:hQ},30:{n:"PtgInt",f:dQ},31:{n:"PtgNum",f:fQ},32:{n:"PtgArray",f:KX},33:{n:"PtgFunc",f:sQ},34:{n:"PtgFuncVar",f:aQ},35:{n:"PtgName",f:yQ},36:{n:"PtgRef",f:rQ},37:{n:"PtgArea",f:zX},38:{n:"PtgMemArea",f:wQ},39:{n:"PtgMemErr",f:AQ},40:{n:"PtgMemNoMem",f:NQ},41:{n:"PtgMemFunc",f:_Q},42:{n:"PtgRefErr",f:EQ},43:{n:"PtgAreaErr",f:WX},44:{n:"PtgRefN",f:nQ},45:{n:"PtgAreaN",f:GX},46:{n:"PtgMemAreaN",f:UQ},47:{n:"PtgMemNoMemN",f:zQ},57:{n:"PtgNameX",f:vQ},58:{n:"PtgRef3d",f:iQ},59:{n:"PtgArea3d",f:HX},60:{n:"PtgRefErr3d",f:TQ},61:{n:"PtgAreaErr3d",f:qX},255:{}},WQ={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},qQ={1:{n:"PtgElfLel",f:yP},2:{n:"PtgElfRw",f:FQ},3:{n:"PtgElfCol",f:SQ},6:{n:"PtgElfRwV",f:OQ},7:{n:"PtgElfColV",f:PQ},10:{n:"PtgElfRadical",f:RQ},11:{n:"PtgElfRadicalS",f:DQ},13:{n:"PtgElfColS",f:CQ},15:{n:"PtgElfColSV",f:IQ},16:{n:"PtgElfRadicalLel",f:jQ},25:{n:"PtgList",f:MQ},29:{n:"PtgSxName",f:VQ},255:{}},GQ={0:{n:"PtgAttrNoop",f:HQ},1:{n:"PtgAttrSemi",f:ZX},2:{n:"PtgAttrIf",f:QX},4:{n:"PtgAttrChoose",f:YX},8:{n:"PtgAttrGoto",f:XX},16:{n:"PtgAttrSum",f:lQ},32:{n:"PtgAttrBaxcel",f:ak},33:{n:"PtgAttrBaxcel",f:ak},64:{n:"PtgAttrSpace",f:eQ},65:{n:"PtgAttrSpaceSemi",f:tQ},128:{n:"PtgAttrIfError",f:JX},255:{}};function KQ(r,e,t,n){if(n.biff<8)return _a(r,e);for(var i=r.l+e,s=[],a=0;a!==t.length;++a)switch(t[a][0]){case"PtgArray":t[a][1]=xQ(r,0,n),s.push(t[a][1]);break;case"PtgMemArea":t[a][2]=gQ(r,t[a][1],n),s.push(t[a][2]);break;case"PtgExp":n&&n.biff==12&&(t[a][1][1]=r.read_shift(4),s.push(t[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[a][0]}return e=i-r.l,e!==0&&s.push(_a(r,e)),s}function YQ(r,e,t){for(var n=r.l+e,i,s,a=[];n!=r.l;)e=n-r.l,s=r[r.l],i=ok[s]||ok[WQ[s]],(s===24||s===25)&&(i=(s===24?qQ:GQ)[r[r.l+1]]),!i||!i.f?_a(r,e):a.push([i.n,i.f(r,e,t)]);return a}function XQ(r){for(var e=[],t=0;t<r.length;++t){for(var n=r[t],i=[],s=0;s<n.length;++s){var a=n[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var QQ={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function JQ(r,e){if(!r&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(r)?"'"+r+"'":r}function vP(r,e,t){if(!r)return"SH33TJSERR0";if(t.biff>8&&(!r.XTI||!r.XTI[e]))return r.SheetNames[e];if(!r.XTI)return"SH33TJSERR6";var n=r.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":r.XTI[e-1];if(!n)return"SH33TJSERR1";var i="";if(t.biff>8)switch(r[n[0]][0]){case 357:return i=n[1]==-1?"#REF":r.SheetNames[n[1]],n[1]==n[2]?i:i+":"+r.SheetNames[n[2]];case 358:return t.SID!=null?r.SheetNames[t.SID]:"SH33TJSSAME"+r[n[0]][0];case 355:default:return"SH33TJSSRC"+r[n[0]][0]}switch(r[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":r.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+r.SheetNames[n[2]];case 14849:return r[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return r[n[0]][0][3]?(i=n[1]==-1?"#REF":r[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+r[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function lk(r,e,t){var n=vP(r,e,t);return n=="#REF"?n:JQ(n,t)}function bd(r,e,t,n,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},c=[],d,h,p,m=0,x=0,v,_="";if(!r[0]||!r[0][0])return"";for(var w=-1,E="",j=0,P=r[0].length;j<P;++j){var V=r[0][j];switch(V[0]){case"PtgUminus":c.push("-"+c.pop());break;case"PtgUplus":c.push("+"+c.pop());break;case"PtgPercent":c.push(c.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(d=c.pop(),h=c.pop(),w>=0){switch(r[0][w][1][0]){case 0:E=Yr(" ",r[0][w][1][1]);break;case 1:E=Yr("\r",r[0][w][1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][w][1][0])}h=h+E,w=-1}c.push(h+QQ[V[0]]+d);break;case"PtgIsect":d=c.pop(),h=c.pop(),c.push(h+" "+d);break;case"PtgUnion":d=c.pop(),h=c.pop(),c.push(h+","+d);break;case"PtgRange":d=c.pop(),h=c.pop(),c.push(h+":"+d);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":p=X0(V[1][1],a,i),c.push(Q0(p,s));break;case"PtgRefN":p=t?X0(V[1][1],t,i):V[1][1],c.push(Q0(p,s));break;case"PtgRef3d":m=V[1][1],p=X0(V[1][2],a,i),_=lk(n,m,i),c.push(_+"!"+Q0(p,s));break;case"PtgFunc":case"PtgFuncVar":var L=V[1][0],K=V[1][1];L||(L=0),L&=127;var H=L==0?[]:c.slice(-L);c.length-=L,K==="User"&&(K=H.shift()),c.push(K+"("+H.join(",")+")");break;case"PtgBool":c.push(V[1]?"TRUE":"FALSE");break;case"PtgInt":c.push(V[1]);break;case"PtgNum":c.push(String(V[1]));break;case"PtgStr":c.push('"'+V[1].replace(/"/g,'""')+'"');break;case"PtgErr":c.push(V[1]);break;case"PtgAreaN":v=qN(V[1][1],t?{s:t}:a,i),c.push(Tv(v,i));break;case"PtgArea":v=qN(V[1][1],a,i),c.push(Tv(v,i));break;case"PtgArea3d":m=V[1][1],v=V[1][2],_=lk(n,m,i),c.push(_+"!"+Tv(v,i));break;case"PtgAttrSum":c.push("SUM("+c.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":x=V[1][2];var S=(n.names||[])[x-1]||(n[0]||[])[x],N=S?S.Name:"SH33TJSNAME"+String(x);N&&N.slice(0,6)=="_xlfn."&&!i.xlfn&&(N=N.slice(6)),c.push(N);break;case"PtgNameX":var I=V[1][1];x=V[1][2];var R;if(i.biff<=5)I<0&&(I=-I),n[I]&&(R=n[I][x]);else{var M="";if(((n[I]||[])[0]||[])[0]==14849||(((n[I]||[])[0]||[])[0]==1025?n[I][x]&&n[I][x].itab>0&&(M=n.SheetNames[n[I][x].itab-1]+"!"):M=n.SheetNames[x-1]+"!"),n[I]&&n[I][x])M+=n[I][x].Name;else if(n[0]&&n[0][x])M+=n[0][x].Name;else{var D=(vP(n,I,i)||"").split(";;");D[x-1]?M=D[x-1]:M+="SH33TJSERRX"}c.push(M);break}R||(R={Name:"SH33TJSERRY"}),c.push(R.Name);break;case"PtgParen":var F="(",he=")";if(w>=0){switch(E="",r[0][w][1][0]){case 2:F=Yr(" ",r[0][w][1][1])+F;break;case 3:F=Yr("\r",r[0][w][1][1])+F;break;case 4:he=Yr(" ",r[0][w][1][1])+he;break;case 5:he=Yr("\r",r[0][w][1][1])+he;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][w][1][0])}w=-1}c.push(F+c.pop()+he);break;case"PtgRefErr":c.push("#REF!");break;case"PtgRefErr3d":c.push("#REF!");break;case"PtgExp":p={c:V[1][1],r:V[1][0]};var Ae={c:t.c,r:t.r};if(n.sharedf[br(p)]){var Oe=n.sharedf[br(p)];c.push(bd(Oe,a,Ae,n,i))}else{var De=!1;for(d=0;d!=n.arrayf.length;++d)if(h=n.arrayf[d],!(p.c<h[0].s.c||p.c>h[0].e.c)&&!(p.r<h[0].s.r||p.r>h[0].e.r)){c.push(bd(h[1],a,Ae,n,i)),De=!0;break}De||c.push(V[1])}break;case"PtgArray":c.push("{"+XQ(V[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":w=j;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":c.push("");break;case"PtgAreaErr":c.push("#REF!");break;case"PtgAreaErr3d":c.push("#REF!");break;case"PtgList":c.push("Table"+V[1].idx+"[#"+V[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(V));default:throw new Error("Unrecognized Formula Token: "+String(V))}var we=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&w>=0&&we.indexOf(r[0][j][0])==-1){V=r[0][w];var _e=!0;switch(V[1][0]){case 4:_e=!1;case 0:E=Yr(" ",V[1][1]);break;case 5:_e=!1;case 1:E=Yr("\r",V[1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+V[1][0])}c.push((_e?E:"")+c.pop()+(_e?"":E)),w=-1}}if(c.length>1&&i.WTF)throw new Error("bad formula stack");return c[0]}function ZQ(r){if(r==null){var e=Se(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof r=="number")return _c(r);return _c(0)}function eJ(r,e,t,n,i){var s=Ec(e,t,i),a=ZQ(r.v),c=Se(6),d=33;c.write_shift(2,d),c.write_shift(4,0);for(var h=Se(r.bf.length),p=0;p<r.bf.length;++p)h[p]=r.bf[p];var m=Ln([s,a,c,h]);return m}function lx(r,e,t){var n=r.read_shift(4),i=YQ(r,n,t),s=r.read_shift(4),a=s>0?KQ(r,s,i,t):null;return[i,a]}var tJ=lx,cx=lx,rJ=lx,nJ=lx,iJ={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},bP={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},sJ={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function aJ(r){var e="of:="+r.replace(bw,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function oJ(r){return r.replace(/\./,"!")}var J0=typeof Map<"u";function Ew(r,e,t){var n=0,i=r.length;if(t){if(J0?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var s=J0?t.get(e):t[e];n<s.length;++n)if(r[s[n]].t===e)return r.Count++,s[n]}}else for(;n<i;++n)if(r[n].t===e)return r.Count++,n;return r[i]={t:e},r.Count++,r.Unique++,t&&(J0?(t.has(e)||t.set(e,[]),t.get(e).push(i)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(i))),i}function ux(r,e){var t={min:r+1,max:r+1},n=-1;return e.MDW&&(Xa=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?n=pg(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(t.width=V1(n),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function wP(r,e){if(r){var t=[.7,.7,.75,.75,.3,.3];r.left==null&&(r.left=t[0]),r.right==null&&(r.right=t[1]),r.top==null&&(r.top=t[2]),r.bottom==null&&(r.bottom=t[3]),r.header==null&&(r.header=t[4]),r.footer==null&&(r.footer=t[5])}}function vl(r,e,t){var n=t.revssf[e.z!=null?e.z:"General"],i=60,s=r.length;if(n==null&&t.ssf){for(;i<392;++i)if(t.ssf[i]==null){gI(e.z,i),t.ssf[i]=e.z,t.revssf[e.z]=n=i;break}}for(i=0;i!=s;++i)if(r[i].numFmtId===n)return i;return r[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function lJ(r,e,t){if(r&&r["!ref"]){var n=Rr(r["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+t+"): "+r["!ref"])}}function cJ(r){if(r.length===0)return"";for(var e='<mergeCells count="'+r.length+'">',t=0;t!=r.length;++t)e+='<mergeCell ref="'+on(r[t])+'"/>';return e+"</mergeCells>"}function uJ(r,e,t,n,i){var s=!1,a={},c=null;if(n.bookType!=="xlsx"&&e.vbaraw){var d=e.SheetNames[t];try{e.Workbook&&(d=e.Workbook.Sheets[t].CodeName||d)}catch{}s=!0,a.codeName=Ch(yr(d))}if(r&&r["!outline"]){var h={summaryBelow:1,summaryRight:1};r["!outline"].above&&(h.summaryBelow=0),r["!outline"].left&&(h.summaryRight=0),c=(c||"")+Qe("outlinePr",null,h)}!s&&!c||(i[i.length]=Qe("sheetPr",c,a))}var dJ=["objects","scenarios","selectLockedCells","selectUnlockedCells"],hJ=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function fJ(r){var e={sheet:1};return dJ.forEach(function(t){r[t]!=null&&r[t]&&(e[t]="1")}),hJ.forEach(function(t){r[t]!=null&&!r[t]&&(e[t]="0")}),r.password&&(e.password=iP(r.password).toString(16).toUpperCase()),Qe("sheetProtection",null,e)}function pJ(r){return wP(r),Qe("pageMargins",null,r)}function mJ(r,e){for(var t=["<cols>"],n,i=0;i!=e.length;++i)(n=e[i])&&(t[t.length]=Qe("col",null,ux(i,n)));return t[t.length]="</cols>",t.join("")}function gJ(r,e,t,n){var i=typeof r.ref=="string"?r.ref:on(r.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var s=t.Workbook.Names,a=Ji(i);a.s.r==a.e.r&&(a.e.r=Ji(e["!ref"]).e.r,i=on(a));for(var c=0;c<s.length;++c){var d=s[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==n){d.Ref="'"+t.SheetNames[n]+"'!"+i;break}}return c==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+i}),Qe("autoFilter",null,{ref:i})}function xJ(r,e,t,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Qe("sheetViews",Qe("sheetView",null,i),{})}function yJ(r,e,t,n){if(r.c&&t["!comments"].push([e,r.c]),r.v===void 0&&typeof r.f!="string"||r.t==="z"&&!r.f)return"";var i="",s=r.t,a=r.v;if(r.t!=="z")switch(r.t){case"b":i=r.v?"1":"0";break;case"n":i=""+r.v;break;case"e":i=ff[r.v];break;case"d":n&&n.cellDates?i=di(r.v,-1).toISOString():(r=Ii(r),r.t="n",i=""+(r.v=Ci(di(r.v)))),typeof r.z>"u"&&(r.z=Qr[14]);break;default:i=r.v;break}var c=Mn("v",yr(i)),d={r:e},h=vl(n.cellXfs,r,n);switch(h!==0&&(d.s=h),r.t){case"n":break;case"d":d.t="d";break;case"b":d.t="b";break;case"e":d.t="e";break;case"z":break;default:if(r.v==null){delete r.t;break}if(r.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){c=Mn("v",""+Ew(n.Strings,r.v,n.revStrings)),d.t="s";break}d.t="str";break}if(r.t!=s&&(r.t=s,r.v=a),typeof r.f=="string"&&r.f){var p=r.F&&r.F.slice(0,e.length)==e?{t:"array",ref:r.F}:null;c=Qe("f",yr(r.f),p)+(r.v!=null?c:"")}return r.l&&t["!links"].push([e,r.l]),r.D&&(d.cm=1),Qe("c",c,d)}function vJ(r,e,t,n){var i=[],s=[],a=Rr(r["!ref"]),c="",d,h="",p=[],m=0,x=0,v=r["!rows"],_=Array.isArray(r),w={r:h},E,j=-1;for(x=a.s.c;x<=a.e.c;++x)p[x]=Zn(x);for(m=a.s.r;m<=a.e.r;++m){for(s=[],h=$n(m),x=a.s.c;x<=a.e.c;++x){d=p[x]+h;var P=_?(r[m]||[])[x]:r[d];P!==void 0&&(c=yJ(P,d,r,e))!=null&&s.push(c)}(s.length>0||v&&v[m])&&(w={r:h},v&&v[m]&&(E=v[m],E.hidden&&(w.hidden=1),j=-1,E.hpx?j=mg(E.hpx):E.hpt&&(j=E.hpt),j>-1&&(w.ht=j,w.customHeight=1),E.level&&(w.outlineLevel=E.level)),i[i.length]=Qe("row",s.join(""),w))}if(v)for(;m<v.length;++m)v&&v[m]&&(w={r:m+1},E=v[m],E.hidden&&(w.hidden=1),j=-1,E.hpx?j=mg(E.hpx):E.hpt&&(j=E.hpt),j>-1&&(w.ht=j,w.customHeight=1),E.level&&(w.outlineLevel=E.level),i[i.length]=Qe("row","",w));return i.join("")}function _P(r,e,t,n){var i=[cn,Qe("worksheet",null,{xmlns:jd[0],"xmlns:r":Tn.r})],s=t.SheetNames[r],a=0,c="",d=t.Sheets[s];d==null&&(d={});var h=d["!ref"]||"A1",p=Rr(h);if(p.e.c>16383||p.e.r>1048575){if(e.WTF)throw new Error("Range "+h+" exceeds format limit A1:XFD1048576");p.e.c=Math.min(p.e.c,16383),p.e.r=Math.min(p.e.c,1048575),h=on(p)}n||(n={}),d["!comments"]=[];var m=[];uJ(d,t,r,e,i),i[i.length]=Qe("dimension",null,{ref:h}),i[i.length]=xJ(d,e,r,t),e.sheetFormat&&(i[i.length]=Qe("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),d["!cols"]!=null&&d["!cols"].length>0&&(i[i.length]=mJ(d,d["!cols"])),i[a=i.length]="<sheetData/>",d["!links"]=[],d["!ref"]!=null&&(c=vJ(d,e),c.length>0&&(i[i.length]=c)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),d["!protect"]&&(i[i.length]=fJ(d["!protect"])),d["!autofilter"]!=null&&(i[i.length]=gJ(d["!autofilter"],d,t,r)),d["!merges"]!=null&&d["!merges"].length>0&&(i[i.length]=cJ(d["!merges"]));var x=-1,v,_=-1;return d["!links"].length>0&&(i[i.length]="<hyperlinks>",d["!links"].forEach(function(w){w[1].Target&&(v={ref:w[0]},w[1].Target.charAt(0)!="#"&&(_=mr(n,-1,yr(w[1].Target).replace(/#.*$/,""),sr.HLINK),v["r:id"]="rId"+_),(x=w[1].Target.indexOf("#"))>-1&&(v.location=yr(w[1].Target.slice(x+1))),w[1].Tooltip&&(v.tooltip=yr(w[1].Tooltip)),i[i.length]=Qe("hyperlink",null,v))}),i[i.length]="</hyperlinks>"),delete d["!links"],d["!margins"]!=null&&(i[i.length]=pJ(d["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=Mn("ignoredErrors",Qe("ignoredError",null,{numberStoredAsText:1,sqref:h}))),m.length>0&&(_=mr(n,-1,"../drawings/drawing"+(r+1)+".xml",sr.DRAW),i[i.length]=Qe("drawing",null,{"r:id":"rId"+_}),d["!drawing"]=m),d["!comments"].length>0&&(_=mr(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",sr.VML),i[i.length]=Qe("legacyDrawing",null,{"r:id":"rId"+_}),d["!legacy"]=_),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function bJ(r,e){var t={},n=r.l+e;t.r=r.read_shift(4),r.l+=4;var i=r.read_shift(2);r.l+=1;var s=r.read_shift(1);return r.l=n,s&7&&(t.level=s&7),s&16&&(t.hidden=!0),s&32&&(t.hpt=i/20),t}function wJ(r,e,t){var n=Se(145),i=(t["!rows"]||[])[r]||{};n.write_shift(4,r),n.write_shift(4,0);var s=320;i.hpx?s=mg(i.hpx)*20:i.hpt&&(s=i.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),n.write_shift(1,a),n.write_shift(1,0);var c=0,d=n.l;n.l+=4;for(var h={r,c:0},p=0;p<16;++p)if(!(e.s.c>p+1<<10||e.e.c<p<<10)){for(var m=-1,x=-1,v=p<<10;v<p+1<<10;++v){h.c=v;var _=Array.isArray(t)?(t[h.r]||[])[h.c]:t[br(h)];_&&(m<0&&(m=v),x=v)}m<0||(++c,n.write_shift(4,m),n.write_shift(4,x))}var w=n.l;return n.l=d,n.write_shift(4,c),n.l=w,n.length>n.l?n.slice(0,n.l):n}function _J(r,e,t,n){var i=wJ(n,t,e);(i.length>17||(e["!rows"]||[])[n])&&Me(r,0,i)}var EJ=Vc,TJ=Fd;function AJ(){}function NJ(r,e){var t={},n=r[r.l];return++r.l,t.above=!(n&64),t.left=!(n&128),r.l+=18,t.name=OK(r),t}function kJ(r,e,t){t==null&&(t=Se(84+4*r.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),t.write_shift(1,n);for(var i=1;i<3;++i)t.write_shift(1,0);return dg({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),LI(r,t),t.slice(0,t.l)}function SJ(r){var e=vs(r);return[e]}function CJ(r,e,t){return t==null&&(t=Se(8)),Oc(e,t)}function IJ(r){var e=Lc(r);return[e]}function PJ(r,e,t){return t==null&&(t=Se(4)),Mc(e,t)}function RJ(r){var e=vs(r),t=r.read_shift(1);return[e,t,"b"]}function jJ(r,e,t){return t==null&&(t=Se(9)),Oc(e,t),t.write_shift(1,r.v?1:0),t}function DJ(r){var e=Lc(r),t=r.read_shift(1);return[e,t,"b"]}function FJ(r,e,t){return t==null&&(t=Se(5)),Mc(e,t),t.write_shift(1,r.v?1:0),t}function OJ(r){var e=vs(r),t=r.read_shift(1);return[e,t,"e"]}function LJ(r,e,t){return t==null&&(t=Se(9)),Oc(e,t),t.write_shift(1,r.v),t}function MJ(r){var e=Lc(r),t=r.read_shift(1);return[e,t,"e"]}function VJ(r,e,t){return t==null&&(t=Se(8)),Mc(e,t),t.write_shift(1,r.v),t.write_shift(2,0),t.write_shift(1,0),t}function $J(r){var e=vs(r),t=r.read_shift(4);return[e,t,"s"]}function BJ(r,e,t){return t==null&&(t=Se(12)),Oc(e,t),t.write_shift(4,e.v),t}function UJ(r){var e=Lc(r),t=r.read_shift(4);return[e,t,"s"]}function zJ(r,e,t){return t==null&&(t=Se(8)),Mc(e,t),t.write_shift(4,e.v),t}function HJ(r){var e=vs(r),t=Od(r);return[e,t,"n"]}function WJ(r,e,t){return t==null&&(t=Se(16)),Oc(e,t),_c(r.v,t),t}function qJ(r){var e=Lc(r),t=Od(r);return[e,t,"n"]}function GJ(r,e,t){return t==null&&(t=Se(12)),Mc(e,t),_c(r.v,t),t}function KJ(r){var e=vs(r),t=MI(r);return[e,t,"n"]}function YJ(r,e,t){return t==null&&(t=Se(12)),Oc(e,t),VI(r.v,t),t}function XJ(r){var e=Lc(r),t=MI(r);return[e,t,"n"]}function QJ(r,e,t){return t==null&&(t=Se(8)),Mc(e,t),VI(r.v,t),t}function JJ(r){var e=vs(r),t=mw(r);return[e,t,"is"]}function ZJ(r){var e=vs(r),t=ei(r);return[e,t,"str"]}function eZ(r,e,t){return t==null&&(t=Se(12+4*r.v.length)),Oc(e,t),Nn(r.v,t),t.length>t.l?t.slice(0,t.l):t}function tZ(r){var e=Lc(r),t=ei(r);return[e,t,"str"]}function rZ(r,e,t){return t==null&&(t=Se(8+4*r.v.length)),Mc(e,t),Nn(r.v,t),t.length>t.l?t.slice(0,t.l):t}function nZ(r,e,t){var n=r.l+e,i=vs(r);i.r=t["!row"];var s=r.read_shift(1),a=[i,s,"b"];if(t.cellFormula){r.l+=2;var c=cx(r,n-r.l,t);a[3]=bd(c,null,i,t.supbooks,t)}else r.l=n;return a}function iZ(r,e,t){var n=r.l+e,i=vs(r);i.r=t["!row"];var s=r.read_shift(1),a=[i,s,"e"];if(t.cellFormula){r.l+=2;var c=cx(r,n-r.l,t);a[3]=bd(c,null,i,t.supbooks,t)}else r.l=n;return a}function sZ(r,e,t){var n=r.l+e,i=vs(r);i.r=t["!row"];var s=Od(r),a=[i,s,"n"];if(t.cellFormula){r.l+=2;var c=cx(r,n-r.l,t);a[3]=bd(c,null,i,t.supbooks,t)}else r.l=n;return a}function aZ(r,e,t){var n=r.l+e,i=vs(r);i.r=t["!row"];var s=ei(r),a=[i,s,"str"];if(t.cellFormula){r.l+=2;var c=cx(r,n-r.l,t);a[3]=bd(c,null,i,t.supbooks,t)}else r.l=n;return a}var oZ=Vc,lZ=Fd;function cZ(r,e){return e==null&&(e=Se(4)),e.write_shift(4,r),e}function uZ(r,e){var t=r.l+e,n=Vc(r),i=gw(r),s=ei(r),a=ei(r),c=ei(r);r.l=t;var d={rfx:n,relId:i,loc:s,display:c};return a&&(d.Tooltip=a),d}function dZ(r,e){var t=Se(50+4*(r[1].Target.length+(r[1].Tooltip||"").length));Fd({s:An(r[0]),e:An(r[0])},t),xw("rId"+e,t);var n=r[1].Target.indexOf("#"),i=n==-1?"":r[1].Target.slice(n+1);return Nn(i||"",t),Nn(r[1].Tooltip||"",t),Nn("",t),t.slice(0,t.l)}function hZ(){}function fZ(r,e,t){var n=r.l+e,i=$I(r),s=r.read_shift(1),a=[i];if(a[2]=s,t.cellFormula){var c=tJ(r,n-r.l,t);a[1]=c}else r.l=n;return a}function pZ(r,e,t){var n=r.l+e,i=Vc(r),s=[i];if(t.cellFormula){var a=nJ(r,n-r.l,t);s[1]=a,r.l=n}else r.l=n;return s}function mZ(r,e,t){t==null&&(t=Se(18));var n=ux(r,e);t.write_shift(-4,r),t.write_shift(-4,r),t.write_shift(4,(n.width||10)*256),t.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),t.write_shift(2,i),t}var EP=["left","right","top","bottom","header","footer"];function gZ(r){var e={};return EP.forEach(function(t){e[t]=Od(r)}),e}function xZ(r,e){return e==null&&(e=Se(48)),wP(r),EP.forEach(function(t){_c(r[t],e)}),e}function yZ(r){var e=r.read_shift(2);return r.l+=28,{RTL:e&32}}function vZ(r,e,t){t==null&&(t=Se(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function bZ(r){var e=Se(24);return e.write_shift(4,4),e.write_shift(4,1),Fd(r,e),e}function wZ(r,e){return e==null&&(e=Se(66)),e.write_shift(2,r.password?iP(r.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,r[t[0]]!=null&&!r[t[0]]?1:0):e.write_shift(4,r[t[0]]!=null&&r[t[0]]?0:1)}),e}function _Z(){}function EZ(){}function TZ(r,e,t,n,i,s,a){if(e.v===void 0)return!1;var c="";switch(e.t){case"b":c=e.v?"1":"0";break;case"d":e=Ii(e),e.z=e.z||Qr[14],e.v=Ci(di(e.v)),e.t="n";break;case"n":case"e":c=""+e.v;break;default:c=e.v;break}var d={r:t,c:n};switch(d.s=vl(i.cellXfs,e,i),e.l&&s["!links"].push([br(d),e.l]),e.c&&s["!comments"].push([br(d),e.c]),e.t){case"s":case"str":return i.bookSST?(c=Ew(i.Strings,e.v,i.revStrings),d.t="s",d.v=c,a?Me(r,18,zJ(e,d)):Me(r,7,BJ(e,d))):(d.t="str",a?Me(r,17,rZ(e,d)):Me(r,6,eZ(e,d))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?Me(r,13,QJ(e,d)):Me(r,2,YJ(e,d)):a?Me(r,16,GJ(e,d)):Me(r,5,WJ(e,d)),!0;case"b":return d.t="b",a?Me(r,15,FJ(e,d)):Me(r,4,jJ(e,d)),!0;case"e":return d.t="e",a?Me(r,14,VJ(e,d)):Me(r,3,LJ(e,d)),!0}return a?Me(r,12,PJ(e,d)):Me(r,1,CJ(e,d)),!0}function AZ(r,e,t,n){var i=Rr(e["!ref"]||"A1"),s,a="",c=[];Me(r,145);var d=Array.isArray(e),h=i.e.r;e["!rows"]&&(h=Math.max(i.e.r,e["!rows"].length-1));for(var p=i.s.r;p<=h;++p){a=$n(p),_J(r,e,i,p);var m=!1;if(p<=i.e.r)for(var x=i.s.c;x<=i.e.c;++x){p===i.s.r&&(c[x]=Zn(x)),s=c[x]+a;var v=d?(e[p]||[])[x]:e[s];if(!v){m=!1;continue}m=TZ(r,v,p,x,n,e,m)}}Me(r,146)}function NZ(r,e){!e||!e["!merges"]||(Me(r,177,cZ(e["!merges"].length)),e["!merges"].forEach(function(t){Me(r,176,lZ(t))}),Me(r,178))}function kZ(r,e){!e||!e["!cols"]||(Me(r,390),e["!cols"].forEach(function(t,n){t&&Me(r,60,mZ(n,t))}),Me(r,391))}function SZ(r,e){!e||!e["!ref"]||(Me(r,648),Me(r,649,bZ(Rr(e["!ref"]))),Me(r,650))}function CZ(r,e,t){e["!links"].forEach(function(n){if(n[1].Target){var i=mr(t,-1,n[1].Target.replace(/#.*$/,""),sr.HLINK);Me(r,494,dZ(n,i))}}),delete e["!links"]}function IZ(r,e,t,n){if(e["!comments"].length>0){var i=mr(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",sr.VML);Me(r,551,xw("rId"+i)),e["!legacy"]=i}}function PZ(r,e,t,n){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:on(i.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,c=Ji(s);c.s.r==c.e.r&&(c.e.r=Ji(e["!ref"]).e.r,s=on(c));for(var d=0;d<a.length;++d){var h=a[d];if(h.Name=="_xlnm._FilterDatabase"&&h.Sheet==n){h.Ref="'"+t.SheetNames[n]+"'!"+s;break}}d==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+s}),Me(r,161,Fd(Rr(s))),Me(r,162)}}function RZ(r,e,t){Me(r,133),Me(r,137,vZ(e,t)),Me(r,138),Me(r,134)}function jZ(r,e){e["!protect"]&&Me(r,535,wZ(e["!protect"]))}function DZ(r,e,t,n){var i=Si(),s=t.SheetNames[r],a=t.Sheets[s]||{},c=s;try{t&&t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}var d=Rr(a["!ref"]||"A1");if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],Me(i,129),(t.vbaraw||a["!outline"])&&Me(i,147,kJ(c,a["!outline"])),Me(i,148,TJ(d)),RZ(i,a,t.Workbook),kZ(i,a),AZ(i,a,r,e),jZ(i,a),PZ(i,a,t,r),NZ(i,a),CZ(i,a,n),a["!margins"]&&Me(i,476,xZ(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&SZ(i,a),IZ(i,a,r,n),Me(i,130),i.end()}function FZ(r,e){r.l+=10;var t=ei(r);return{name:t}}var OZ=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function LZ(r){return!r.Workbook||!r.Workbook.WBProps?"false":pK(r.Workbook.WBProps.date1904)?"true":"false"}var MZ="][*?/\\".split("");function TP(r,e){if(r.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return MZ.forEach(function(n){if(r.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function VZ(r,e,t){r.forEach(function(n,i){TP(n);for(var s=0;s<i;++s)if(n==r[s])throw new Error("Duplicate Sheet Name: "+n);if(t){var a=e&&e[i]&&e[i].CodeName||n;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function $Z(r){if(!r||!r.SheetNames||!r.Sheets)throw new Error("Invalid Workbook");if(!r.SheetNames.length)throw new Error("Workbook is empty");var e=r.Workbook&&r.Workbook.Sheets||[];VZ(r.SheetNames,e,!!r.vbaraw);for(var t=0;t<r.SheetNames.length;++t)lJ(r.Sheets[r.SheetNames[t]],r.SheetNames[t],t)}function AP(r){var e=[cn];e[e.length]=Qe("workbook",null,{xmlns:jd[0],"xmlns:r":Tn.r});var t=r.Workbook&&(r.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};r.Workbook&&r.Workbook.WBProps&&(OZ.forEach(function(c){r.Workbook.WBProps[c[0]]!=null&&r.Workbook.WBProps[c[0]]!=c[1]&&(n[c[0]]=r.Workbook.WBProps[c[0]])}),r.Workbook.WBProps.CodeName&&(n.codeName=r.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Qe("workbookPr",null,n);var i=r.Workbook&&r.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=r.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==r.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=r.SheetNames.length;++s){var a={name:yr(r.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=Qe("sheet",null,a)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",r.Workbook&&r.Workbook.Names&&r.Workbook.Names.forEach(function(c){var d={name:c.Name};c.Comment&&(d.comment=c.Comment),c.Sheet!=null&&(d.localSheetId=""+c.Sheet),c.Hidden&&(d.hidden="1"),c.Ref&&(e[e.length]=Qe("definedName",yr(c.Ref),d))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function BZ(r,e){var t={};return t.Hidden=r.read_shift(4),t.iTabID=r.read_shift(4),t.strRelID=M1(r),t.name=ei(r),t}function UZ(r,e){return e||(e=Se(127)),e.write_shift(4,r.Hidden),e.write_shift(4,r.iTabID),xw(r.strRelID,e),Nn(r.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function zZ(r,e){var t={},n=r.read_shift(4);t.defaultThemeVersion=r.read_shift(4);var i=e>8?ei(r):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(n&65536),t.backupFile=!!(n&64),t.checkCompatibility=!!(n&4096),t.date1904=!!(n&1),t.filterPrivacy=!!(n&8),t.hidePivotFieldList=!!(n&1024),t.promptedSolutions=!!(n&16),t.publishItems=!!(n&2048),t.refreshAllConnections=!!(n&262144),t.saveExternalLinkValues=!!(n&128),t.showBorderUnselectedTables=!!(n&4),t.showInkAnnotation=!!(n&32),t.showObjects=["all","placeholders","none"][n>>13&3],t.showPivotChartFilter=!!(n&32768),t.updateLinks=["userSet","never","always"][n>>8&3],t}function HZ(r,e){e||(e=Se(72));var t=0;return r&&r.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),LI(r&&r.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function WZ(r,e,t){var n=r.l+e;r.l+=4,r.l+=1;var i=r.read_shift(4),s=LK(r),a=rJ(r,0,t),c=gw(r);r.l=n;var d={Name:s,Ptg:a};return i<268435455&&(d.Sheet=i),c&&(d.Comment=c),d}function qZ(r,e){Me(r,143);for(var t=0;t!=e.SheetNames.length;++t){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,i={Hidden:n,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};Me(r,156,UZ(i))}Me(r,144)}function GZ(r,e){e||(e=Se(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return Nn("SheetJS",e),Nn(ng.version,e),Nn(ng.version,e),Nn("7262",e),e.length>e.l?e.slice(0,e.l):e}function KZ(r,e){e||(e=Se(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,r),e.write_shift(4,r);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function YZ(r,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,n=0,i=-1,s=-1;n<t.length;++n)!t[n]||!t[n].Hidden&&i==-1?i=n:t[n].Hidden==1&&s==-1&&(s=n);s>i||(Me(r,135),Me(r,158,KZ(i)),Me(r,136))}}function XZ(r,e){var t=Si();return Me(t,131),Me(t,128,GZ()),Me(t,153,HZ(r.Workbook&&r.Workbook.WBProps||null)),YZ(t,r),qZ(t,r),Me(t,132),t.end()}function QZ(r,e,t){return(e.slice(-4)===".bin"?XZ:AP)(r)}function JZ(r,e,t,n,i){return(e.slice(-4)===".bin"?DZ:_P)(r,t,n,i)}function ZZ(r,e,t){return(e.slice(-4)===".bin"?xX:oP)(r,t)}function eee(r,e,t){return(e.slice(-4)===".bin"?HY:nP)(r,t)}function tee(r,e,t){return(e.slice(-4)===".bin"?jX:hP)(r)}function ree(r){return(r.slice(-4)===".bin"?AX:uP)()}function nee(r,e){var t=[];return r.Props&&t.push(ZK(r.Props,e)),r.Custprops&&t.push(eY(r.Props,r.Custprops)),t.join("")}function iee(){return""}function see(r,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,i){var s=[];s.push(Qe("NumberFormat",null,{"ss:Format":yr(Qr[n.numFmtId])}));var a={"ss:ID":"s"+(21+i)};t.push(Qe("Style",s.join(""),a))}),Qe("Styles",t.join(""))}function NP(r){return Qe("NamedRange",null,{"ss:Name":r.Name,"ss:RefersTo":"="+ww(r.Ref,{r:0,c:0})})}function aee(r){if(!((r||{}).Workbook||{}).Names)return"";for(var e=r.Workbook.Names,t=[],n=0;n<e.length;++n){var i=e[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||t.push(NP(i)))}return Qe("Names",t.join(""))}function oee(r,e,t,n){if(!r||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,s=[],a=0;a<i.length;++a){var c=i[a];c.Sheet==t&&(c.Name.match(/^_xlfn\./)||s.push(NP(c)))}return s.join("")}function lee(r,e,t,n){if(!r)return"";var i=[];if(r["!margins"]&&(i.push("<PageSetup>"),r["!margins"].header&&i.push(Qe("Header",null,{"x:Margin":r["!margins"].header})),r["!margins"].footer&&i.push(Qe("Footer",null,{"x:Margin":r["!margins"].footer})),i.push(Qe("PageMargins",null,{"x:Bottom":r["!margins"].bottom||"0.75","x:Left":r["!margins"].left||"0.7","x:Right":r["!margins"].right||"0.7","x:Top":r["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[t])if(n.Workbook.Sheets[t].Hidden)i.push(Qe("Visible",n.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<t&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==t&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),r["!protect"]&&(i.push(Mn("ProtectContents","True")),r["!protect"].objects&&i.push(Mn("ProtectObjects","True")),r["!protect"].scenarios&&i.push(Mn("ProtectScenarios","True")),r["!protect"].selectLockedCells!=null&&!r["!protect"].selectLockedCells?i.push(Mn("EnableSelection","NoSelection")):r["!protect"].selectUnlockedCells!=null&&!r["!protect"].selectUnlockedCells&&i.push(Mn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){r["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":Qe("WorksheetOptions",i.join(""),{xmlns:zi.x})}function cee(r){return r.map(function(e){var t=fK(e.t||""),n=Qe("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return Qe("Comment",n,{"ss:Author":e.a})}).join("")}function uee(r,e,t,n,i,s,a){if(!r||r.v==null&&r.f==null)return"";var c={};if(r.f&&(c["ss:Formula"]="="+yr(ww(r.f,a))),r.F&&r.F.slice(0,e.length)==e){var d=An(r.F.slice(e.length+1));c["ss:ArrayRange"]="RC:R"+(d.r==a.r?"":"["+(d.r-a.r)+"]")+"C"+(d.c==a.c?"":"["+(d.c-a.c)+"]")}if(r.l&&r.l.Target&&(c["ss:HRef"]=yr(r.l.Target),r.l.Tooltip&&(c["x:HRefScreenTip"]=yr(r.l.Tooltip))),t["!merges"])for(var h=t["!merges"],p=0;p!=h.length;++p)h[p].s.c!=a.c||h[p].s.r!=a.r||(h[p].e.c>h[p].s.c&&(c["ss:MergeAcross"]=h[p].e.c-h[p].s.c),h[p].e.r>h[p].s.r&&(c["ss:MergeDown"]=h[p].e.r-h[p].s.r));var m="",x="";switch(r.t){case"z":if(!n.sheetStubs)return"";break;case"n":m="Number",x=String(r.v);break;case"b":m="Boolean",x=r.v?"1":"0";break;case"e":m="Error",x=ff[r.v];break;case"d":m="DateTime",x=new Date(r.v).toISOString(),r.z==null&&(r.z=r.z||Qr[14]);break;case"s":m="String",x=hK(r.v||"");break}var v=vl(n.cellXfs,r,n);c["ss:StyleID"]="s"+(21+v),c["ss:Index"]=a.c+1;var _=r.v!=null?x:"",w=r.t=="z"?"":'<Data ss:Type="'+m+'">'+_+"</Data>";return(r.c||[]).length>0&&(w+=cee(r.c)),Qe("Cell",w,c)}function dee(r,e){var t='<Row ss:Index="'+(r+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=aP(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function hee(r,e,t,n){if(!r["!ref"])return"";var i=Rr(r["!ref"]),s=r["!merges"]||[],a=0,c=[];r["!cols"]&&r["!cols"].forEach(function(E,j){vw(E);var P=!!E.width,V=ux(j,E),L={"ss:Index":j+1};P&&(L["ss:Width"]=fg(V.width)),E.hidden&&(L["ss:Hidden"]="1"),c.push(Qe("Column",null,L))});for(var d=Array.isArray(r),h=i.s.r;h<=i.e.r;++h){for(var p=[dee(h,(r["!rows"]||[])[h])],m=i.s.c;m<=i.e.c;++m){var x=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>m)&&!(s[a].s.r>h)&&!(s[a].e.c<m)&&!(s[a].e.r<h)){(s[a].s.c!=m||s[a].s.r!=h)&&(x=!0);break}if(!x){var v={r:h,c:m},_=br(v),w=d?(r[h]||[])[m]:r[_];p.push(uee(w,_,r,e,t,n,v))}}p.push("</Row>"),p.length>2&&c.push(p.join(""))}return c.join("")}function fee(r,e,t){var n=[],i=t.SheetNames[r],s=t.Sheets[i],a=s?oee(s,e,r,t):"";return a.length>0&&n.push("<Names>"+a+"</Names>"),a=s?hee(s,e,r,t):"",a.length>0&&n.push("<Table>"+a+"</Table>"),n.push(lee(s,e,r,t)),n.join("")}function pee(r,e){e||(e={}),r.SSF||(r.SSF=Ii(Qr)),r.SSF&&(sx(),ix(r.SSF),e.revssf=ax(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF,e.cellXfs=[],vl(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(nee(r,e)),t.push(iee()),t.push(""),t.push("");for(var n=0;n<r.SheetNames.length;++n)t.push(Qe("Worksheet",fee(n,e,r),{"ss:Name":yr(r.SheetNames[n])}));return t[2]=see(r,e),t[3]=aee(r),cn+Qe("Workbook",t.join(""),{xmlns:zi.ss,"xmlns:o":zi.o,"xmlns:x":zi.x,"xmlns:ss":zi.ss,"xmlns:dt":zi.dt,"xmlns:html":zi.html})}var kv={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function mee(r,e){var t=[],n=[],i=[],s=0,a,c=FN(KN,"n"),d=FN(YN,"n");if(r.Props)for(a=Bn(r.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(c,a[s])?t:Object.prototype.hasOwnProperty.call(d,a[s])?n:i).push([a[s],r.Props[a[s]]]);if(r.Custprops)for(a=Bn(r.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(r.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(c,a[s])?t:Object.prototype.hasOwnProperty.call(d,a[s])?n:i).push([a[s],r.Custprops[a[s]]]);var h=[];for(s=0;s<i.length;++s)XI.indexOf(i[s][0])>-1||GI.indexOf(i[s][0])>-1||i[s][1]!=null&&h.push(i[s]);n.length&&_r.utils.cfb_add(e,"/SummaryInformation",ek(n,kv.SI,d,YN)),(t.length||h.length)&&_r.utils.cfb_add(e,"/DocumentSummaryInformation",ek(t,kv.DSI,c,KN,h.length?h:null,kv.UDI))}function gee(r,e){var t=e||{},n=_r.utils.cfb_new({root:"R"}),i="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":i="/Workbook",t.biff=8;break;case"biff5":i="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return _r.utils.cfb_add(n,i,kP(r,t)),t.biff==8&&(r.Props||r.Custprops)&&mee(r,n),t.biff==8&&r.vbaraw&&DX(n,_r.read(r.vbaraw,{type:typeof r.vbaraw=="string"?"binary":"buffer"})),n}var xee={0:{f:bJ},1:{f:SJ},2:{f:KJ},3:{f:OJ},4:{f:RJ},5:{f:HJ},6:{f:ZJ},7:{f:$J},8:{f:aZ},9:{f:sZ},10:{f:nZ},11:{f:iZ},12:{f:IJ},13:{f:XJ},14:{f:MJ},15:{f:DJ},16:{f:qJ},17:{f:tZ},18:{f:UJ},19:{f:mw},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:WZ},40:{},42:{},43:{f:ZY},44:{f:QY},45:{f:rX},46:{f:iX},47:{f:nX},48:{},49:{f:IK},50:{},51:{f:bX},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:PY},62:{f:JJ},63:{f:NX},64:{f:_Z},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:_a,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:yZ},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:NJ},148:{f:EJ,p:16},151:{f:hZ},152:{},153:{f:zZ},154:{},155:{},156:{f:BZ},157:{},158:{},159:{T:1,f:BY},160:{T:-1},161:{T:1,f:Vc},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:oZ},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:yX},336:{T:-1},337:{f:EX,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:M1},357:{},358:{},359:{},360:{T:1},361:{},362:{f:AY},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:fZ},427:{f:pZ},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:gZ},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:AJ},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:uZ},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:M1},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:PX},633:{T:1},634:{T:-1},635:{T:1,f:CX},636:{T:-1},637:{f:DK},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:FZ},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:EZ},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Je(r,e,t,n){var i=e;if(!isNaN(i)){var s=n||(t||[]).length||0,a=r.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&hw(t)&&r.push(t)}}function yee(r,e,t,n){var i=(t||[]).length||0;if(i<=8224)return Je(r,e,t,i);var s=e;if(!isNaN(s)){for(var a=t.parts||[],c=0,d=0,h=0;h+(a[c]||8224)<=8224;)h+=a[c]||8224,c++;var p=r.next(4);for(p.write_shift(2,s),p.write_shift(2,h),r.push(t.slice(d,d+h)),d+=h;d<i;){for(p=r.next(4),p.write_shift(2,60),h=0;h+(a[c]||8224)<=8224;)h+=a[c]||8224,c++;p.write_shift(2,h),r.push(t.slice(d,d+h)),d+=h}}}function mf(r,e,t){return r||(r=Se(7)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,0),r.write_shift(1,0),r}function vee(r,e,t,n){var i=Se(9);return mf(i,r,e),JI(t,n||"b",i),i}function bee(r,e,t){var n=Se(8+2*t.length);return mf(n,r,e),n.write_shift(1,t.length),n.write_shift(t.length,t,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function wee(r,e,t,n){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Ci(di(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?Je(r,2,FY(t,n,i)):Je(r,3,DY(t,n,i));return;case"b":case"e":Je(r,5,vee(t,n,e.v,e.t));return;case"s":case"str":Je(r,4,bee(t,n,(e.v||"").slice(0,255)));return}Je(r,1,mf(null,t,n))}function _ee(r,e,t,n){var i=Array.isArray(e),s=Rr(e["!ref"]||"A1"),a,c="",d=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=on(s)}for(var h=s.s.r;h<=s.e.r;++h){c=$n(h);for(var p=s.s.c;p<=s.e.c;++p){h===s.s.r&&(d[p]=Zn(p)),a=d[p]+c;var m=i?(e[h]||[])[p]:e[a];m&&wee(r,m,h,p)}}}function Eee(r,e){for(var t=e||{},n=Si(),i=0,s=0;s<r.SheetNames.length;++s)r.SheetNames[s]==t.sheet&&(i=s);if(i==0&&t.sheet&&r.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return Je(n,t.biff==4?1033:t.biff==3?521:9,yw(r,16,t)),_ee(n,r.Sheets[r.SheetNames[i]],i,t),Je(n,10),n.end()}function Tee(r,e,t){Je(r,49,xY({sz:12,name:"Arial"},t))}function Aee(r,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&Je(r,1054,bY(i,e[i],t))})}function Nee(r,e){var t=Se(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),Je(r,2151,t),t=Se(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),tP(Rr(e["!ref"]||"A1"),t),t.write_shift(4,4),Je(r,2152,t)}function kee(r,e){for(var t=0;t<16;++t)Je(r,224,rk({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Je(r,224,rk(n,0,e))})}function See(r,e){for(var t=0;t<e["!links"].length;++t){var n=e["!links"][t];Je(r,440,SY(n)),n[1].Tooltip&&Je(r,2048,CY(n))}delete e["!links"]}function Cee(r,e){if(e){var t=0;e.forEach(function(n,i){++t<=256&&n&&Je(r,125,RY(ux(i,n),i))})}}function Iee(r,e,t,n,i){var s=16+vl(i.cellXfs,e,i);if(e.v==null&&!e.bf){Je(r,513,Ec(t,n,s));return}if(e.bf)Je(r,6,eJ(e,t,n,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?Ci(di(e.v)):e.v;Je(r,515,TY(t,n,a,s));break;case"b":case"e":Je(r,517,EY(t,n,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var c=Ew(i.Strings,e.v,i.revStrings);Je(r,253,yY(t,n,c,s))}else Je(r,516,vY(t,n,(e.v||"").slice(0,255),s,i));break;default:Je(r,513,Ec(t,n,s))}}function Pee(r,e,t){var n=Si(),i=t.SheetNames[r],s=t.Sheets[i]||{},a=(t||{}).Workbook||{},c=(a.Sheets||[])[r]||{},d=Array.isArray(s),h=e.biff==8,p,m="",x=[],v=Rr(s["!ref"]||"A1"),_=h?65536:16384;if(v.e.c>255||v.e.r>=_){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");v.e.c=Math.min(v.e.c,255),v.e.r=Math.min(v.e.c,_-1)}Je(n,2057,yw(t,16,e)),Je(n,13,hs(1)),Je(n,12,hs(100)),Je(n,15,li(!0)),Je(n,17,li(!1)),Je(n,16,_c(.001)),Je(n,95,li(!0)),Je(n,42,li(!1)),Je(n,43,li(!1)),Je(n,130,hs(1)),Je(n,128,_Y()),Je(n,131,li(!1)),Je(n,132,li(!1)),h&&Cee(n,s["!cols"]),Je(n,512,wY(v,e)),h&&(s["!links"]=[]);for(var w=v.s.r;w<=v.e.r;++w){m=$n(w);for(var E=v.s.c;E<=v.e.c;++E){w===v.s.r&&(x[E]=Zn(E)),p=x[E]+m;var j=d?(s[w]||[])[E]:s[p];j&&(Iee(n,j,w,E,e),h&&j.l&&s["!links"].push([p,j.l]))}}var P=c.CodeName||c.name||i;return h&&Je(n,574,gY((a.Views||[])[0])),h&&(s["!merges"]||[]).length&&Je(n,229,kY(s["!merges"])),h&&See(n,s),Je(n,442,eP(P)),h&&Nee(n,s),Je(n,10),n.end()}function Ree(r,e,t){var n=Si(),i=(r||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},c=t.biff==8,d=t.biff==5;if(Je(n,2057,yw(r,5,t)),t.bookType=="xla"&&Je(n,135),Je(n,225,c?hs(1200):null),Je(n,193,nY(2)),d&&Je(n,191),d&&Je(n,192),Je(n,226),Je(n,92,hY("SheetJS",t)),Je(n,66,hs(c?1200:1252)),c&&Je(n,353,hs(0)),c&&Je(n,448),Je(n,317,jY(r.SheetNames.length)),c&&r.vbaraw&&Je(n,211),c&&r.vbaraw){var h=a.CodeName||"ThisWorkbook";Je(n,442,eP(h))}Je(n,156,hs(17)),Je(n,25,li(!1)),Je(n,18,li(!1)),Je(n,19,hs(0)),c&&Je(n,431,li(!1)),c&&Je(n,444,hs(0)),Je(n,61,mY()),Je(n,64,li(!1)),Je(n,141,hs(0)),Je(n,34,li(LZ(r)=="true")),Je(n,14,li(!0)),c&&Je(n,439,li(!1)),Je(n,218,hs(0)),Tee(n,r,t),Aee(n,r.SSF,t),kee(n,t),c&&Je(n,352,li(!1));var p=n.end(),m=Si();c&&Je(m,140,IY()),c&&t.Strings&&yee(m,252,pY(t.Strings)),Je(m,10);var x=m.end(),v=Si(),_=0,w=0;for(w=0;w<r.SheetNames.length;++w)_+=(c?12:11)+(c?2:1)*r.SheetNames[w].length;var E=p.length+_+x.length;for(w=0;w<r.SheetNames.length;++w){var j=s[w]||{};Je(v,133,fY({pos:E,hs:j.Hidden||0,dt:0,name:r.SheetNames[w]},t)),E+=e[w].length}var P=v.end();if(_!=P.length)throw new Error("BS8 "+_+" != "+P.length);var V=[];return p.length&&V.push(p),P.length&&V.push(P),x.length&&V.push(x),Ln(V)}function jee(r,e){var t=e||{},n=[];r&&!r.SSF&&(r.SSF=Ii(Qr)),r&&r.SSF&&(sx(),ix(r.SSF),t.revssf=ax(r.SSF),t.revssf[r.SSF[65535]]=0,t.ssf=r.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Tw(t),t.cellXfs=[],vl(t.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={});for(var i=0;i<r.SheetNames.length;++i)n[n.length]=Pee(i,t,r);return n.unshift(Ree(r,n,t)),Ln(n)}function kP(r,e){for(var t=0;t<=r.SheetNames.length;++t){var n=r.Sheets[r.SheetNames[t]];if(!(!n||!n["!ref"])){var i=Ji(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+r.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return jee(r,e);case 4:case 3:case 2:return Eee(r,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function Dee(r,e,t,n){for(var i=r["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var c=0,d=0,h=0;h<i.length;++h)if(!(i[h].s.r>t||i[h].s.c>a)&&!(i[h].e.r<t||i[h].e.c<a)){if(i[h].s.r<t||i[h].s.c<a){c=-1;break}c=i[h].e.r-i[h].s.r+1,d=i[h].e.c-i[h].s.c+1;break}if(!(c<0)){var p=br({r:t,c:a}),m=n.dense?(r[t]||[])[a]:r[p],x=m&&m.v!=null&&(m.h||dK(m.w||(so(m),m.w)||""))||"",v={};c>1&&(v.rowspan=c),d>1&&(v.colspan=d),n.editable?x='<span contenteditable="true">'+x+"</span>":m&&(v["data-t"]=m&&m.t||"z",m.v!=null&&(v["data-v"]=m.v),m.z!=null&&(v["data-z"]=m.z),m.l&&(m.l.Target||"#").charAt(0)!="#"&&(x='<a href="'+m.l.Target+'">'+x+"</a>")),v.id=(n.id||"sjs")+"-"+p,s.push(Qe("td",x,v))}}var _="<tr>";return _+s.join("")+"</tr>"}var Fee='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Oee="</body></html>";function Lee(r,e,t){var n=[];return n.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function SP(r,e){var t=e||{},n=t.header!=null?t.header:Fee,i=t.footer!=null?t.footer:Oee,s=[n],a=Ji(r["!ref"]);t.dense=Array.isArray(r),s.push(Lee(r,a,t));for(var c=a.s.r;c<=a.e.r;++c)s.push(Dee(r,a,c,t));return s.push("</table>"+i),s.join("")}function CP(r,e,t){var n=t||{},i=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var a=typeof n.origin=="string"?An(n.origin):n.origin;i=a.r,s=a.c}var c=e.getElementsByTagName("tr"),d=Math.min(n.sheetRows||1e7,c.length),h={s:{r:0,c:0},e:{r:i,c:s}};if(r["!ref"]){var p=Ji(r["!ref"]);h.s.r=Math.min(h.s.r,p.s.r),h.s.c=Math.min(h.s.c,p.s.c),h.e.r=Math.max(h.e.r,p.e.r),h.e.c=Math.max(h.e.c,p.e.c),i==-1&&(h.e.r=i=p.e.r+1)}var m=[],x=0,v=r["!rows"]||(r["!rows"]=[]),_=0,w=0,E=0,j=0,P=0,V=0;for(r["!cols"]||(r["!cols"]=[]);_<c.length&&w<d;++_){var L=c[_];if(ck(L)){if(n.display)continue;v[w]={hidden:!0}}var K=L.children;for(E=j=0;E<K.length;++E){var H=K[E];if(!(n.display&&ck(H))){var S=H.hasAttribute("data-v")?H.getAttribute("data-v"):H.hasAttribute("v")?H.getAttribute("v"):mK(H.innerHTML),N=H.getAttribute("data-z")||H.getAttribute("z");for(x=0;x<m.length;++x){var I=m[x];I.s.c==j+s&&I.s.r<w+i&&w+i<=I.e.r&&(j=I.e.c+1-s,x=-1)}V=+H.getAttribute("colspan")||1,((P=+H.getAttribute("rowspan")||1)>1||V>1)&&m.push({s:{r:w+i,c:j+s},e:{r:w+i+(P||1)-1,c:j+s+(V||1)-1}});var R={t:"s",v:S},M=H.getAttribute("data-t")||H.getAttribute("t")||"";S!=null&&(S.length==0?R.t=M||"z":n.raw||S.trim().length==0||M=="s"||(S==="TRUE"?R={t:"b",v:!0}:S==="FALSE"?R={t:"b",v:!1}:isNaN(Ya(S))?isNaN(Sh(S).getDate())||(R={t:"d",v:di(S)},n.cellDates||(R={t:"n",v:Ci(R.v)}),R.z=n.dateNF||Qr[14]):R={t:"n",v:Ya(S)})),R.z===void 0&&N!=null&&(R.z=N);var D="",F=H.getElementsByTagName("A");if(F&&F.length)for(var he=0;he<F.length&&!(F[he].hasAttribute("href")&&(D=F[he].getAttribute("href"),D.charAt(0)!="#"));++he);D&&D.charAt(0)!="#"&&(R.l={Target:D}),n.dense?(r[w+i]||(r[w+i]=[]),r[w+i][j+s]=R):r[br({c:j+s,r:w+i})]=R,h.e.c<j+s&&(h.e.c=j+s),j+=V}}++w}return m.length&&(r["!merges"]=(r["!merges"]||[]).concat(m)),h.e.r=Math.max(h.e.r,w-1+i),r["!ref"]=on(h),w>=d&&(r["!fullref"]=on((h.e.r=c.length-_+w-1+i,h))),r}function IP(r,e){var t=e||{},n=t.dense?[]:{};return CP(n,r,e)}function Mee(r,e){return Fc(IP(r,e),e)}function ck(r){var e="",t=Vee(r);return t&&(e=t(r).getPropertyValue("display")),e||(e=r.style&&r.style.display),e==="none"}function Vee(r){return r.ownerDocument.defaultView&&typeof r.ownerDocument.defaultView.getComputedStyle=="function"?r.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var $ee=(function(){var r=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Ih({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+r+"</office:document-styles>";return function(){return cn+e}})(),uk=(function(){var r=function(s){return yr(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,n=function(s,a,c){var d=[];d.push('      <table:table table:name="'+yr(a.SheetNames[c])+`" table:style-name="ta1">
`);var h=0,p=0,m=Ji(s["!ref"]||"A1"),x=s["!merges"]||[],v=0,_=Array.isArray(s);if(s["!cols"])for(p=0;p<=m.e.c;++p)d.push("        <table:table-column"+(s["!cols"][p]?' table:style-name="co'+s["!cols"][p].ods+'"':"")+`></table:table-column>
`);var w="",E=s["!rows"]||[];for(h=0;h<m.s.r;++h)w=E[h]?' table:style-name="ro'+E[h].ods+'"':"",d.push("        <table:table-row"+w+`></table:table-row>
`);for(;h<=m.e.r;++h){for(w=E[h]?' table:style-name="ro'+E[h].ods+'"':"",d.push("        <table:table-row"+w+`>
`),p=0;p<m.s.c;++p)d.push(e);for(;p<=m.e.c;++p){var j=!1,P={},V="";for(v=0;v!=x.length;++v)if(!(x[v].s.c>p)&&!(x[v].s.r>h)&&!(x[v].e.c<p)&&!(x[v].e.r<h)){(x[v].s.c!=p||x[v].s.r!=h)&&(j=!0),P["table:number-columns-spanned"]=x[v].e.c-x[v].s.c+1,P["table:number-rows-spanned"]=x[v].e.r-x[v].s.r+1;break}if(j){d.push(t);continue}var L=br({r:h,c:p}),K=_?(s[h]||[])[p]:s[L];if(K&&K.f&&(P["table:formula"]=yr(aJ(K.f)),K.F&&K.F.slice(0,L.length)==L)){var H=Ji(K.F);P["table:number-matrix-columns-spanned"]=H.e.c-H.s.c+1,P["table:number-matrix-rows-spanned"]=H.e.r-H.s.r+1}if(!K){d.push(e);continue}switch(K.t){case"b":V=K.v?"TRUE":"FALSE",P["office:value-type"]="boolean",P["office:boolean-value"]=K.v?"true":"false";break;case"n":V=K.w||String(K.v||0),P["office:value-type"]="float",P["office:value"]=K.v||0;break;case"s":case"str":V=K.v==null?"":K.v,P["office:value-type"]="string";break;case"d":V=K.w||di(K.v).toISOString(),P["office:value-type"]="date",P["office:date-value"]=di(K.v).toISOString(),P["table:style-name"]="ce1";break;default:d.push(e);continue}var S=r(V);if(K.l&&K.l.Target){var N=K.l.Target;N=N.charAt(0)=="#"?"#"+oJ(N.slice(1)):N,N.charAt(0)!="#"&&!N.match(/^\w+:/)&&(N="../"+N),S=Qe("text:a",S,{"xlink:href":N.replace(/&/g,"&amp;")})}d.push("          "+Qe("table:table-cell",Qe("text:p",S,{}),P)+`
`)}d.push(`        </table:table-row>
`)}return d.push(`      </table:table>
`),d.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var c=0;a.SheetNames.map(function(h){return a.Sheets[h]}).forEach(function(h){if(h&&h["!cols"]){for(var p=0;p<h["!cols"].length;++p)if(h["!cols"][p]){var m=h["!cols"][p];if(m.width==null&&m.wpx==null&&m.wch==null)continue;vw(m),m.ods=c;var x=h["!cols"][p].wpx+"px";s.push('  <style:style style:name="co'+c+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+x+`"/>
`),s.push(`  </style:style>
`),++c}}});var d=0;a.SheetNames.map(function(h){return a.Sheets[h]}).forEach(function(h){if(h&&h["!rows"]){for(var p=0;p<h["!rows"].length;++p)if(h["!rows"][p]){h["!rows"][p].ods=d;var m=h["!rows"][p].hpx+"px";s.push('  <style:style style:name="ro'+d+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+m+`"/>
`),s.push(`  </style:style>
`),++d}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,c){var d=[cn],h=Ih({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),p=Ih({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});c.bookType=="fods"?(d.push("<office:document"+h+p+`>
`),d.push(WI().replace(/office:document-meta/g,"office:meta"))):d.push("<office:document-content"+h+`>
`),i(d,a),d.push(`  <office:body>
`),d.push(`    <office:spreadsheet>
`);for(var m=0;m!=a.SheetNames.length;++m)d.push(n(a.Sheets[a.SheetNames[m]],a,m));return d.push(`    </office:spreadsheet>
`),d.push(`  </office:body>
`),c.bookType=="fods"?d.push("</office:document>"):d.push("</office:document-content>"),d.join("")}})();function PP(r,e){if(e.bookType=="fods")return uk(r,e);var t=lw(),n="",i=[],s=[];return n="mimetype",Ut(t,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Ut(t,n,uk(r,e)),i.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Ut(t,n,$ee(r,e)),i.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Ut(t,n,cn+WI()),i.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Ut(t,n,JK(s)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Ut(t,n,XK(i)),t}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function gg(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Bee(r){return typeof TextEncoder<"u"?new TextEncoder().encode(r):Os(Ch(r))}function Uee(r,e){e:for(var t=0;t<=r.length-e.length;++t){for(var n=0;n<e.length;++n)if(r[t+n]!=e[n])continue e;return!0}return!1}function hl(r){var e=r.reduce(function(i,s){return i+s.length},0),t=new Uint8Array(e),n=0;return r.forEach(function(i){t.set(i,n),n+=i.length}),t}function zee(r,e,t){var n=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,i=t/Math.pow(10,n-6176);r[e+15]|=n>>7,r[e+14]|=(n&127)<<1;for(var s=0;i>=1;++s,i/=256)r[e+s]=i&255;r[e+15]|=t>=0?0:128}function Ph(r,e){var t=e?e[0]:0,n=r[t]&127;e:if(r[t++]>=128&&(n|=(r[t]&127)<<7,r[t++]<128||(n|=(r[t]&127)<<14,r[t++]<128)||(n|=(r[t]&127)<<21,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,28),++t,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,35),++t,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,42),++t,r[t++]<128)))break e;return e&&(e[0]=t),n}function pr(r){var e=new Uint8Array(7);e[0]=r&127;var t=1;e:if(r>127){if(e[t-1]|=128,e[t]=r>>7&127,++t,r<=16383||(e[t-1]|=128,e[t]=r>>14&127,++t,r<=2097151)||(e[t-1]|=128,e[t]=r>>21&127,++t,r<=268435455)||(e[t-1]|=128,e[t]=r/256>>>21&127,++t,r<=34359738367)||(e[t-1]|=128,e[t]=r/65536>>>21&127,++t,r<=4398046511103))break e;e[t-1]|=128,e[t]=r/16777216>>>21&127,++t}return e.slice(0,t)}function Xu(r){var e=0,t=r[e]&127;e:if(r[e++]>=128){if(t|=(r[e]&127)<<7,r[e++]<128||(t|=(r[e]&127)<<14,r[e++]<128)||(t|=(r[e]&127)<<21,r[e++]<128))break e;t|=(r[e]&127)<<28}return t}function fn(r){for(var e=[],t=[0];t[0]<r.length;){var n=t[0],i=Ph(r,t),s=i&7;i=Math.floor(i/8);var a=0,c;if(i==0)break;switch(s){case 0:{for(var d=t[0];r[t[0]++]>=128;);c=r.slice(d,t[0])}break;case 5:a=4,c=r.slice(t[0],t[0]+a),t[0]+=a;break;case 1:a=8,c=r.slice(t[0],t[0]+a),t[0]+=a;break;case 2:a=Ph(r,t),c=r.slice(t[0],t[0]+a),t[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(n))}var h={data:c,type:s};e[i]==null?e[i]=[h]:e[i].push(h)}return e}function Rn(r){var e=[];return r.forEach(function(t,n){t.forEach(function(i){i.data&&(e.push(pr(n*8+i.type)),i.type==2&&e.push(pr(i.data.length)),e.push(i.data))})}),hl(e)}function Ps(r){for(var e,t=[],n=[0];n[0]<r.length;){var i=Ph(r,n),s=fn(r.slice(n[0],n[0]+i));n[0]+=i;var a={id:Xu(s[1][0].data),messages:[]};s[2].forEach(function(c){var d=fn(c.data),h=Xu(d[3][0].data);a.messages.push({meta:d,data:r.slice(n[0],n[0]+h)}),n[0]+=h}),(e=s[3])!=null&&e[0]&&(a.merge=Xu(s[3][0].data)>>>0>0),t.push(a)}return t}function ku(r){var e=[];return r.forEach(function(t){var n=[];n[1]=[{data:pr(t.id),type:0}],n[2]=[],t.merge!=null&&(n[3]=[{data:pr(+!!t.merge),type:0}]);var i=[];t.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:pr(a.data.length)}],n[2].push({data:Rn(a.meta),type:2})});var s=Rn(n);e.push(pr(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),hl(e)}function Hee(r,e){if(r!=0)throw new Error("Unexpected Snappy chunk type ".concat(r));for(var t=[0],n=Ph(e,t),i=[];t[0]<e.length;){var s=e[t[0]]&3;if(s==0){var a=e[t[0]++]>>2;if(a<60)++a;else{var c=a-59;a=e[t[0]],c>1&&(a|=e[t[0]+1]<<8),c>2&&(a|=e[t[0]+2]<<16),c>3&&(a|=e[t[0]+3]<<24),a>>>=0,a++,t[0]+=c}i.push(e.slice(t[0],t[0]+a)),t[0]+=a;continue}else{var d=0,h=0;if(s==1?(h=(e[t[0]]>>2&7)+4,d=(e[t[0]++]&224)<<3,d|=e[t[0]++]):(h=(e[t[0]++]>>2)+1,s==2?(d=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(d=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),i=[hl(i)],d==0)throw new Error("Invalid offset 0");if(d>i[0].length)throw new Error("Invalid offset beyond length");if(h>=d)for(i.push(i[0].slice(-d)),h-=d;h>=i[i.length-1].length;)i.push(i[i.length-1]),h-=i[i.length-1].length;i.push(i[0].slice(-d,-d+h))}}var p=hl(i);if(p.length!=n)throw new Error("Unexpected length: ".concat(p.length," != ").concat(n));return p}function Rs(r){for(var e=[],t=0;t<r.length;){var n=r[t++],i=r[t]|r[t+1]<<8|r[t+2]<<16;t+=3,e.push(Hee(n,r.slice(t,t+i))),t+=i}if(t!==r.length)throw new Error("data is not a valid framed stream!");return hl(e)}function Su(r){for(var e=[],t=0;t<r.length;){var n=Math.min(r.length-t,268435455),i=new Uint8Array(4);e.push(i);var s=pr(n),a=s.length;e.push(s),n<=60?(a++,e.push(new Uint8Array([n-1<<2]))):n<=256?(a+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(a+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(a+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(a+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(r.slice(t,t+n)),a+=n,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,t+=n}return hl(e)}function Sv(r,e){var t=new Uint8Array(32),n=gg(t),i=12,s=0;switch(t[0]=5,r.t){case"n":t[1]=2,zee(t,i,r.v),s|=1,i+=16;break;case"b":t[1]=6,n.setFloat64(i,r.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(r.v)==-1)throw new Error("Value ".concat(r.v," missing from SST!"));t[1]=3,n.setUint32(i,e.indexOf(r.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+r.t}return n.setUint32(8,s,!0),t.slice(0,i)}function Cv(r,e){var t=new Uint8Array(32),n=gg(t),i=12,s=0;switch(t[0]=3,r.t){case"n":t[2]=2,n.setFloat64(i,r.v,!0),s|=32,i+=8;break;case"b":t[2]=6,n.setFloat64(i,r.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(r.v)==-1)throw new Error("Value ".concat(r.v," missing from SST!"));t[2]=3,n.setUint32(i,e.indexOf(r.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+r.t}return n.setUint32(4,s,!0),t.slice(0,i)}function $o(r){var e=fn(r);return Ph(e[1][0].data)}function Wee(r,e,t){var n,i,s,a;if(!((n=r[6])!=null&&n[0])||!((i=r[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var c=((a=(s=r[8])==null?void 0:s[0])==null?void 0:a.data)&&Xu(r[8][0].data)>0||!1;if(c)throw"Math only works with normal offsets";for(var d=0,h=gg(r[7][0].data),p=0,m=[],x=gg(r[4][0].data),v=0,_=[],w=0;w<e.length;++w){if(e[w]==null){h.setUint16(w*2,65535,!0),x.setUint16(w*2,65535);continue}h.setUint16(w*2,p,!0),x.setUint16(w*2,v,!0);var E,j;switch(typeof e[w]){case"string":E=Sv({t:"s",v:e[w]},t),j=Cv({t:"s",v:e[w]},t);break;case"number":E=Sv({t:"n",v:e[w]},t),j=Cv({t:"n",v:e[w]},t);break;case"boolean":E=Sv({t:"b",v:e[w]},t),j=Cv({t:"b",v:e[w]},t);break;default:throw new Error("Unsupported value "+e[w])}m.push(E),p+=E.length,_.push(j),v+=j.length,++d}for(r[2][0].data=pr(d);w<r[7][0].data.length/2;++w)h.setUint16(w*2,65535,!0),x.setUint16(w*2,65535,!0);return r[6][0].data=hl(m),r[3][0].data=hl(_),d}function qee(r,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=r.Sheets[r.SheetNames[0]];r.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Ji(t["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(on(n)));var s=xg(t,{range:n,header:1}),a=["~Sh33tJ5~"];s.forEach(function(ee){return ee.forEach(function(te){typeof te=="string"&&a.push(te)})});var c={},d=[],h=_r.read(e.numbers,{type:"base64"});h.FileIndex.map(function(ee,te){return[ee,h.FullPaths[te]]}).forEach(function(ee){var te=ee[0],ie=ee[1];if(te.type==2&&te.name.match(/\.iwa/)){var U=te.content,be=Rs(U),Ce=Ps(be);Ce.forEach(function(ke){d.push(ke.id),c[ke.id]={deps:[],location:ie,type:Xu(ke.messages[0].meta[1][0].data)}})}}),d.sort(function(ee,te){return ee-te});var p=d.filter(function(ee){return ee>1}).map(function(ee){return[ee,pr(ee)]});h.FileIndex.map(function(ee,te){return[ee,h.FullPaths[te]]}).forEach(function(ee){var te=ee[0];if(ee[1],!!te.name.match(/\.iwa/)){var ie=Ps(Rs(te.content));ie.forEach(function(U){U.messages.forEach(function(be){p.forEach(function(Ce){U.messages.some(function(ke){return Xu(ke.meta[1][0].data)!=11006&&Uee(ke.data,Ce[1])})&&c[Ce[0]].deps.push(U.id)})})})}});for(var m=_r.find(h,c[1].location),x=Ps(Rs(m.content)),v,_=0;_<x.length;++_){var w=x[_];w.id==1&&(v=w)}var E=$o(fn(v.messages[0].data)[1][0].data);for(m=_r.find(h,c[E].location),x=Ps(Rs(m.content)),_=0;_<x.length;++_)w=x[_],w.id==E&&(v=w);for(E=$o(fn(v.messages[0].data)[2][0].data),m=_r.find(h,c[E].location),x=Ps(Rs(m.content)),_=0;_<x.length;++_)w=x[_],w.id==E&&(v=w);for(E=$o(fn(v.messages[0].data)[2][0].data),m=_r.find(h,c[E].location),x=Ps(Rs(m.content)),_=0;_<x.length;++_)w=x[_],w.id==E&&(v=w);var j=fn(v.messages[0].data);{j[6][0].data=pr(n.e.r+1),j[7][0].data=pr(n.e.c+1);var P=$o(j[46][0].data),V=_r.find(h,c[P].location),L=Ps(Rs(V.content));{for(var K=0;K<L.length&&L[K].id!=P;++K);if(L[K].id!=P)throw"Bad ColumnRowUIDMapArchive";var H=fn(L[K].messages[0].data);H[1]=[],H[2]=[],H[3]=[];for(var S=0;S<=n.e.c;++S){var N=[];N[1]=N[2]=[{type:0,data:pr(S+420690)}],H[1].push({type:2,data:Rn(N)}),H[2].push({type:0,data:pr(S)}),H[3].push({type:0,data:pr(S)})}H[4]=[],H[5]=[],H[6]=[];for(var I=0;I<=n.e.r;++I)N=[],N[1]=N[2]=[{type:0,data:pr(I+726270)}],H[4].push({type:2,data:Rn(N)}),H[5].push({type:0,data:pr(I)}),H[6].push({type:0,data:pr(I)});L[K].messages[0].data=Rn(H)}V.content=Su(ku(L)),V.size=V.content.length,delete j[46];var R=fn(j[4][0].data);{R[7][0].data=pr(n.e.r+1);var M=fn(R[1][0].data),D=$o(M[2][0].data);V=_r.find(h,c[D].location),L=Ps(Rs(V.content));{if(L[0].id!=D)throw"Bad HeaderStorageBucket";var F=fn(L[0].messages[0].data);for(I=0;I<s.length;++I){var he=fn(F[2][0].data);he[1][0].data=pr(I),he[4][0].data=pr(s[I].length),F[2][I]={type:F[2][0].type,data:Rn(he)}}L[0].messages[0].data=Rn(F)}V.content=Su(ku(L)),V.size=V.content.length;var Ae=$o(R[2][0].data);V=_r.find(h,c[Ae].location),L=Ps(Rs(V.content));{if(L[0].id!=Ae)throw"Bad HeaderStorageBucket";for(F=fn(L[0].messages[0].data),S=0;S<=n.e.c;++S)he=fn(F[2][0].data),he[1][0].data=pr(S),he[4][0].data=pr(n.e.r+1),F[2][S]={type:F[2][0].type,data:Rn(he)};L[0].messages[0].data=Rn(F)}V.content=Su(ku(L)),V.size=V.content.length;var Oe=$o(R[4][0].data);(function(){for(var ee=_r.find(h,c[Oe].location),te=Ps(Rs(ee.content)),ie,U=0;U<te.length;++U){var be=te[U];be.id==Oe&&(ie=be)}var Ce=fn(ie.messages[0].data);{Ce[3]=[];var ke=[];a.forEach(function(dt,zt){ke[1]=[{type:0,data:pr(zt)}],ke[2]=[{type:0,data:pr(1)}],ke[3]=[{type:2,data:Bee(dt)}],Ce[3].push({type:2,data:Rn(ke)})})}ie.messages[0].data=Rn(Ce);var Ee=ku(te),Ke=Su(Ee);ee.content=Ke,ee.size=ee.content.length})();var De=fn(R[3][0].data);{var we=De[1][0];delete De[2];var _e=fn(we.data);{var Ne=$o(_e[2][0].data);(function(){for(var ee=_r.find(h,c[Ne].location),te=Ps(Rs(ee.content)),ie,U=0;U<te.length;++U){var be=te[U];be.id==Ne&&(ie=be)}var Ce=fn(ie.messages[0].data);{delete Ce[6],delete De[7];var ke=new Uint8Array(Ce[5][0].data);Ce[5]=[];for(var Ee=0,Ke=0;Ke<=n.e.r;++Ke){var dt=fn(ke);Ee+=Wee(dt,s[Ke],a),dt[1][0].data=pr(Ke),Ce[5].push({data:Rn(dt),type:2})}Ce[1]=[{type:0,data:pr(n.e.c+1)}],Ce[2]=[{type:0,data:pr(n.e.r+1)}],Ce[3]=[{type:0,data:pr(Ee)}],Ce[4]=[{type:0,data:pr(n.e.r+1)}]}ie.messages[0].data=Rn(Ce);var zt=ku(te),bt=Su(zt);ee.content=bt,ee.size=ee.content.length})()}we.data=Rn(_e)}R[3][0].data=Rn(De)}j[4][0].data=Rn(R)}v.messages[0].data=Rn(j);var ae=ku(x),W=Su(ae);return m.content=W,m.size=m.content.length,h}function Gee(r){return function(t){for(var n=0;n!=r.length;++n){var i=r[n];t[i[0]]===void 0&&(t[i[0]]=i[1]),i[2]==="n"&&(t[i[0]]=Number(t[i[0]]))}}}function Tw(r){Gee([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(r)}function Kee(r,e){return e.bookType=="ods"?PP(r,e):e.bookType=="numbers"?qee(r,e):e.bookType=="xlsb"?Yee(r,e):Xee(r,e)}function Yee(r,e){Uu=1024,r&&!r.SSF&&(r.SSF=Ii(Qr)),r&&r.SSF&&(sx(),ix(r.SSF),e.revssf=ax(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,J0?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",n=fP.indexOf(e.bookType)>-1,i=UI();Tw(e=e||{});var s=lw(),a="",c=0;if(e.cellXfs=[],vl(e.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),a="docProps/core.xml",Ut(s,a,qI(r.Props,e)),i.coreprops.push(a),mr(e.rels,2,a,sr.CORE_PROPS),a="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var d=[],h=0;h<r.SheetNames.length;++h)(r.Workbook.Sheets[h]||{}).Hidden!=2&&d.push(r.SheetNames[h]);r.Props.SheetNames=d}for(r.Props.Worksheets=r.Props.SheetNames.length,Ut(s,a,KI(r.Props)),i.extprops.push(a),mr(e.rels,3,a,sr.EXT_PROPS),r.Custprops!==r.Props&&Bn(r.Custprops||{}).length>0&&(a="docProps/custom.xml",Ut(s,a,YI(r.Custprops)),i.custprops.push(a),mr(e.rels,4,a,sr.CUST_PROPS)),c=1;c<=r.SheetNames.length;++c){var p={"!id":{}},m=r.Sheets[r.SheetNames[c-1]],x=(m||{})["!type"]||"sheet";switch(x){case"chart":default:a="xl/worksheets/sheet"+c+"."+t,Ut(s,a,JZ(c-1,a,e,r,p)),i.sheets.push(a),mr(e.wbrels,-1,"worksheets/sheet"+c+"."+t,sr.WS[0])}if(m){var v=m["!comments"],_=!1,w="";v&&v.length>0&&(w="xl/comments"+c+"."+t,Ut(s,w,tee(v,w)),i.comments.push(w),mr(p,-1,"../comments"+c+"."+t,sr.CMNT),_=!0),m["!legacy"]&&_&&Ut(s,"xl/drawings/vmlDrawing"+c+".vml",dP(c,m["!comments"])),delete m["!comments"],delete m["!legacy"]}p["!id"].rId1&&Ut(s,HI(a),Ku(p))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,Ut(s,a,eee(e.Strings,a,e)),i.strs.push(a),mr(e.wbrels,-1,"sharedStrings."+t,sr.SST)),a="xl/workbook."+t,Ut(s,a,QZ(r,a)),i.workbooks.push(a),mr(e.rels,1,a,sr.WB),a="xl/theme/theme1.xml",Ut(s,a,cP(r.Themes,e)),i.themes.push(a),mr(e.wbrels,-1,"theme/theme1.xml",sr.THEME),a="xl/styles."+t,Ut(s,a,ZZ(r,a,e)),i.styles.push(a),mr(e.wbrels,-1,"styles."+t,sr.STY),r.vbaraw&&n&&(a="xl/vbaProject.bin",Ut(s,a,r.vbaraw),i.vba.push(a),mr(e.wbrels,-1,"vbaProject.bin",sr.VBA)),a="xl/metadata."+t,Ut(s,a,ree(a)),i.metadata.push(a),mr(e.wbrels,-1,"metadata."+t,sr.XLMETA),Ut(s,"[Content_Types].xml",zI(i,e)),Ut(s,"_rels/.rels",Ku(e.rels)),Ut(s,"xl/_rels/workbook."+t+".rels",Ku(e.wbrels)),delete e.revssf,delete e.ssf,s}function Xee(r,e){Uu=1024,r&&!r.SSF&&(r.SSF=Ii(Qr)),r&&r.SSF&&(sx(),ix(r.SSF),e.revssf=ax(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,J0?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",n=fP.indexOf(e.bookType)>-1,i=UI();Tw(e=e||{});var s=lw(),a="",c=0;if(e.cellXfs=[],vl(e.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),a="docProps/core.xml",Ut(s,a,qI(r.Props,e)),i.coreprops.push(a),mr(e.rels,2,a,sr.CORE_PROPS),a="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var d=[],h=0;h<r.SheetNames.length;++h)(r.Workbook.Sheets[h]||{}).Hidden!=2&&d.push(r.SheetNames[h]);r.Props.SheetNames=d}r.Props.Worksheets=r.Props.SheetNames.length,Ut(s,a,KI(r.Props)),i.extprops.push(a),mr(e.rels,3,a,sr.EXT_PROPS),r.Custprops!==r.Props&&Bn(r.Custprops||{}).length>0&&(a="docProps/custom.xml",Ut(s,a,YI(r.Custprops)),i.custprops.push(a),mr(e.rels,4,a,sr.CUST_PROPS));var p=["SheetJ5"];for(e.tcid=0,c=1;c<=r.SheetNames.length;++c){var m={"!id":{}},x=r.Sheets[r.SheetNames[c-1]],v=(x||{})["!type"]||"sheet";switch(v){case"chart":default:a="xl/worksheets/sheet"+c+"."+t,Ut(s,a,_P(c-1,e,r,m)),i.sheets.push(a),mr(e.wbrels,-1,"worksheets/sheet"+c+"."+t,sr.WS[0])}if(x){var _=x["!comments"],w=!1,E="";if(_&&_.length>0){var j=!1;_.forEach(function(P){P[1].forEach(function(V){V.T==!0&&(j=!0)})}),j&&(E="xl/threadedComments/threadedComment"+c+"."+t,Ut(s,E,kX(_,p,e)),i.threadedcomments.push(E),mr(m,-1,"../threadedComments/threadedComment"+c+"."+t,sr.TCMNT)),E="xl/comments"+c+"."+t,Ut(s,E,hP(_)),i.comments.push(E),mr(m,-1,"../comments"+c+"."+t,sr.CMNT),w=!0}x["!legacy"]&&w&&Ut(s,"xl/drawings/vmlDrawing"+c+".vml",dP(c,x["!comments"])),delete x["!comments"],delete x["!legacy"]}m["!id"].rId1&&Ut(s,HI(a),Ku(m))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,Ut(s,a,nP(e.Strings,e)),i.strs.push(a),mr(e.wbrels,-1,"sharedStrings."+t,sr.SST)),a="xl/workbook."+t,Ut(s,a,AP(r)),i.workbooks.push(a),mr(e.rels,1,a,sr.WB),a="xl/theme/theme1.xml",Ut(s,a,cP(r.Themes,e)),i.themes.push(a),mr(e.wbrels,-1,"theme/theme1.xml",sr.THEME),a="xl/styles."+t,Ut(s,a,oP(r,e)),i.styles.push(a),mr(e.wbrels,-1,"styles."+t,sr.STY),r.vbaraw&&n&&(a="xl/vbaProject.bin",Ut(s,a,r.vbaraw),i.vba.push(a),mr(e.wbrels,-1,"vbaProject.bin",sr.VBA)),a="xl/metadata."+t,Ut(s,a,uP()),i.metadata.push(a),mr(e.wbrels,-1,"metadata."+t,sr.XLMETA),p.length>1&&(a="xl/persons/person.xml",Ut(s,a,SX(p)),i.people.push(a),mr(e.wbrels,-1,"persons/person.xml",sr.PEOPLE)),Ut(s,"[Content_Types].xml",zI(i,e)),Ut(s,"_rels/.rels",Ku(e.rels)),Ut(s,"xl/_rels/workbook."+t+".rels",Ku(e.wbrels)),delete e.revssf,delete e.ssf,s}function Qee(r,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];case"base64":t=io(r.slice(0,12));break;case"binary":t=r;break;case"array":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function RP(r,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return df(e.file,_r.write(r,{type:cr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return _r.write(r,e)}function Jee(r,e){var t=Ii(e||{}),n=Kee(r,t);return Zee(n,t)}function Zee(r,e){var t={},n=cr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=n;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var i=r.FullPaths?_r.write(r,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):r.generate(t);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(nx(i))}return e.password&&typeof encrypt_agile<"u"?RP(encrypt_agile(i,e.password),e):e.type==="file"?df(e.file,i):e.type=="string"?K0(i):i}function ete(r,e){var t=e||{},n=gee(r,t);return RP(n,t)}function aa(r,e,t){t||(t="");var n=t+r;switch(e.type){case"base64":return kh(Ch(n));case"binary":return Ch(n);case"string":return r;case"file":return df(e.file,n,"utf8");case"buffer":return cr?uo(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):aa(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function tte(r,e){switch(e.type){case"base64":return kh(r);case"binary":return r;case"string":return r;case"file":return df(e.file,r,"binary");case"buffer":return cr?uo(r,"binary"):r.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Hp(r,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",n=0;n<r.length;++n)t+=String.fromCharCode(r[n]);return e.type=="base64"?kh(t):e.type=="string"?K0(t):t;case"file":return df(e.file,r);case"buffer":return r;default:throw new Error("Unrecognized type "+e.type)}}function jP(r,e){CG(),$Z(r);var t=Ii(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var n=jP(r,t);return t.type="array",nx(n)}var i=0;if(t.sheet&&(typeof t.sheet=="number"?i=t.sheet:i=r.SheetNames.indexOf(t.sheet),!r.SheetNames[i]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return aa(pee(r,t),t);case"slk":case"sylk":return aa(LY.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"htm":case"html":return aa(SP(r.Sheets[r.SheetNames[i]],t),t);case"txt":return tte(DP(r.Sheets[r.SheetNames[i]],t),t);case"csv":return aa(Aw(r.Sheets[r.SheetNames[i]],t),t,"\uFEFF");case"dif":return aa(MY.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"dbf":return Hp(OY.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"prn":return aa(VY.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"rtf":return aa(qY.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"eth":return aa(rP.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"fods":return aa(PP(r,t),t);case"wk1":return Hp(nk.sheet_to_wk1(r.Sheets[r.SheetNames[i]],t),t);case"wk3":return Hp(nk.book_to_wk3(r,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),Hp(kP(r,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),ete(r,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Jee(r,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function rte(r){if(!r.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=r.file.slice(r.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(r.bookType=t.slice(1)),r.bookType=e[r.bookType]||r.bookType}}function dx(r,e,t){var n={};return n.type="file",n.file=e,rte(n),jP(r,n)}function nte(r,e,t,n,i,s,a,c){var d=$n(t),h=c.defval,p=c.raw||!Object.prototype.hasOwnProperty.call(c,"raw"),m=!0,x=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(x,"__rowNum__",{value:t,enumerable:!1})}catch{x.__rowNum__=t}else x.__rowNum__=t;if(!a||r[t])for(var v=e.s.c;v<=e.e.c;++v){var _=a?r[t][v]:r[n[v]+d];if(_===void 0||_.t===void 0){if(h===void 0)continue;s[v]!=null&&(x[s[v]]=h);continue}var w=_.v;switch(_.t){case"z":if(w==null)break;continue;case"e":w=w==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+_.t)}if(s[v]!=null){if(w==null)if(_.t=="e"&&w===null)x[s[v]]=null;else if(h!==void 0)x[s[v]]=h;else if(p&&w===null)x[s[v]]=null;else continue;else x[s[v]]=p&&(_.t!=="n"||_.t==="n"&&c.rawNumbers!==!1)?w:so(_,w,c);w!=null&&(m=!1)}}return{row:x,isempty:m}}function xg(r,e){if(r==null||r["!ref"]==null)return[];var t={t:"n",v:0},n=0,i=1,s=[],a=0,c="",d={s:{r:0,c:0},e:{r:0,c:0}},h=e||{},p=h.range!=null?h.range:r["!ref"];switch(h.header===1?n=1:h.header==="A"?n=2:Array.isArray(h.header)?n=3:h.header==null&&(n=0),typeof p){case"string":d=Rr(p);break;case"number":d=Rr(r["!ref"]),d.s.r=p;break;default:d=p}n>0&&(i=0);var m=$n(d.s.r),x=[],v=[],_=0,w=0,E=Array.isArray(r),j=d.s.r,P=0,V={};E&&!r[j]&&(r[j]=[]);var L=h.skipHidden&&r["!cols"]||[],K=h.skipHidden&&r["!rows"]||[];for(P=d.s.c;P<=d.e.c;++P)if(!(L[P]||{}).hidden)switch(x[P]=Zn(P),t=E?r[j][P]:r[x[P]+m],n){case 1:s[P]=P-d.s.c;break;case 2:s[P]=x[P];break;case 3:s[P]=h.header[P-d.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),c=a=so(t,null,h),w=V[a]||0,!w)V[a]=1;else{do c=a+"_"+w++;while(V[c]);V[a]=w,V[c]=1}s[P]=c}for(j=d.s.r+i;j<=d.e.r;++j)if(!(K[j]||{}).hidden){var H=nte(r,d,j,x,n,s,E,h);(H.isempty===!1||(n===1?h.blankrows!==!1:h.blankrows))&&(v[_++]=H.row)}return v.length=_,v}var dk=/"/g;function ite(r,e,t,n,i,s,a,c){for(var d=!0,h=[],p="",m=$n(t),x=e.s.c;x<=e.e.c;++x)if(n[x]){var v=c.dense?(r[t]||[])[x]:r[n[x]+m];if(v==null)p="";else if(v.v!=null){d=!1,p=""+(c.rawNumbers&&v.t=="n"?v.v:so(v,null,c));for(var _=0,w=0;_!==p.length;++_)if((w=p.charCodeAt(_))===i||w===s||w===34||c.forceQuotes){p='"'+p.replace(dk,'""')+'"';break}p=="ID"&&(p='"ID"')}else v.f!=null&&!v.F?(d=!1,p="="+v.f,p.indexOf(",")>=0&&(p='"'+p.replace(dk,'""')+'"')):p="";h.push(p)}return c.blankrows===!1&&d?null:h.join(a)}function Aw(r,e){var t=[],n=e??{};if(r==null||r["!ref"]==null)return"";var i=Rr(r["!ref"]),s=n.FS!==void 0?n.FS:",",a=s.charCodeAt(0),c=n.RS!==void 0?n.RS:`
`,d=c.charCodeAt(0),h=new RegExp((s=="|"?"\\|":s)+"+$"),p="",m=[];n.dense=Array.isArray(r);for(var x=n.skipHidden&&r["!cols"]||[],v=n.skipHidden&&r["!rows"]||[],_=i.s.c;_<=i.e.c;++_)(x[_]||{}).hidden||(m[_]=Zn(_));for(var w=0,E=i.s.r;E<=i.e.r;++E)(v[E]||{}).hidden||(p=ite(r,i,E,m,a,d,s,n),p!=null&&(n.strip&&(p=p.replace(h,"")),(p||n.blankrows!==!1)&&t.push((w++?c:"")+p)));return delete n.dense,t.join("")}function DP(r,e){e||(e={}),e.FS="	",e.RS=`
`;var t=Aw(r,e);return t}function ste(r){var e="",t,n="";if(r==null||r["!ref"]==null)return[];var i=Rr(r["!ref"]),s="",a=[],c,d=[],h=Array.isArray(r);for(c=i.s.c;c<=i.e.c;++c)a[c]=Zn(c);for(var p=i.s.r;p<=i.e.r;++p)for(s=$n(p),c=i.s.c;c<=i.e.c;++c)if(e=a[c]+s,t=h?(r[p]||[])[c]:r[e],n="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;n=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)n=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)n=""+t.v;else if(t.t=="b")n=t.v?"TRUE":"FALSE";else if(t.w!==void 0)n="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?n="'"+t.v:n=""+t.v}}d[d.length]=e+"="+n}return d}function FP(r,e,t){var n=t||{},i=+!n.skipHeader,s=r||{},a=0,c=0;if(s&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var d=typeof n.origin=="string"?An(n.origin):n.origin;a=d.r,c=d.c}var h,p={s:{c:0,r:0},e:{c,r:a+e.length-1+i}};if(s["!ref"]){var m=Rr(s["!ref"]);p.e.c=Math.max(p.e.c,m.e.c),p.e.r=Math.max(p.e.r,m.e.r),a==-1&&(a=m.e.r+1,p.e.r=a+e.length-1+i)}else a==-1&&(a=0,p.e.r=e.length-1+i);var x=n.header||[],v=0;e.forEach(function(w,E){Bn(w).forEach(function(j){(v=x.indexOf(j))==-1&&(x[v=x.length]=j);var P=w[j],V="z",L="",K=br({c:c+v,r:a+E+i});h=Rh(s,K),P&&typeof P=="object"&&!(P instanceof Date)?s[K]=P:(typeof P=="number"?V="n":typeof P=="boolean"?V="b":typeof P=="string"?V="s":P instanceof Date?(V="d",n.cellDates||(V="n",P=Ci(P)),L=n.dateNF||Qr[14]):P===null&&n.nullError&&(V="e",P=0),h?(h.t=V,h.v=P,delete h.w,delete h.R,L&&(h.z=L)):s[K]=h={t:V,v:P},L&&(h.z=L))})}),p.e.c=Math.max(p.e.c,c+x.length-1);var _=$n(a);if(i)for(v=0;v<x.length;++v)s[Zn(v+c)+_]={t:"s",v:x[v]};return s["!ref"]=on(p),s}function ate(r,e){return FP(null,r,e)}function Rh(r,e,t){if(typeof e=="string"){if(Array.isArray(r)){var n=An(e);return r[n.r]||(r[n.r]=[]),r[n.r][n.c]||(r[n.r][n.c]={t:"z"})}return r[e]||(r[e]={t:"z"})}return typeof e!="number"?Rh(r,br(e)):Rh(r,br({r:e,c:t||0}))}function ote(r,e){if(typeof e=="number"){if(e>=0&&r.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=r.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function lte(){return{SheetNames:[],Sheets:{}}}function cte(r,e,t,n){var i=1;if(!t)for(;i<=65535&&r.SheetNames.indexOf(t="Sheet"+i)!=-1;++i,t=void 0);if(!t||r.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&r.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||t;for(++i;i<=65535&&r.SheetNames.indexOf(t=a+i)!=-1;++i);}if(TP(t),r.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return r.SheetNames.push(t),r.Sheets[t]=e,t}function ute(r,e,t){r.Workbook||(r.Workbook={}),r.Workbook.Sheets||(r.Workbook.Sheets=[]);var n=ote(r,e);switch(r.Workbook.Sheets[n]||(r.Workbook.Sheets[n]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}r.Workbook.Sheets[n].Hidden=t}function dte(r,e){return r.z=e,r}function OP(r,e,t){return e?(r.l={Target:e},t&&(r.l.Tooltip=t)):delete r.l,r}function hte(r,e,t){return OP(r,"#"+e,t)}function fte(r,e,t){r.c||(r.c=[]),r.c.push({t:e,a:t||"SheetJS"})}function pte(r,e,t,n){for(var i=typeof e!="string"?e:Rr(e),s=typeof e=="string"?e:on(e),a=i.s.r;a<=i.e.r;++a)for(var c=i.s.c;c<=i.e.c;++c){var d=Rh(r,a,c);d.t="n",d.F=s,delete d.v,a==i.s.r&&c==i.s.c&&(d.f=t,n&&(d.D=!0))}return r}var gs={encode_col:Zn,encode_row:$n,encode_cell:br,encode_range:on,decode_col:pw,decode_row:fw,split_cell:CK,decode_cell:An,decode_range:Ji,format_cell:so,sheet_add_aoa:OI,sheet_add_json:FP,sheet_add_dom:CP,aoa_to_sheet:Dd,json_to_sheet:ate,table_to_sheet:IP,table_to_book:Mee,sheet_to_csv:Aw,sheet_to_txt:DP,sheet_to_json:xg,sheet_to_html:SP,sheet_to_formulae:ste,sheet_to_row_object_array:xg,sheet_get_cell:Rh,book_new:lte,book_append_sheet:cte,book_set_sheet_visibility:ute,cell_set_number_format:dte,cell_set_hyperlink:OP,cell_set_internal_link:hte,cell_add_comment:fte,sheet_set_array_formula:pte,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const LP=({orders:r,setOrders:e,fetchOrders:t,searchQuery:n,setSearchQuery:i,formatDate:s,handleRenewal:a,actionLoading:c,balance:d,theme:h="dark"})=>{const[p,m]=k.useState(!1),[x,v]=k.useState(null),[_,w]=k.useState(""),[E,j]=k.useState(!1),[P,V]=k.useState(!1),[L,K]=k.useState(null),[H,S]=k.useState({key:null,direction:"asc"}),N=h==="dark",I={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},R={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{backgroundColor:N?"#1F2937":"#F3F4F6",transition:{duration:.2},scale:1.005}},M={hidden:{opacity:0,scale:.95,y:20},visible:{opacity:1,scale:1,y:0,transition:{duration:.25,ease:"easeOut"}},exit:{opacity:0,scale:.95,y:20,transition:{duration:.15}}},D={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.2}},exit:{opacity:0,transition:{duration:.15}}},F=k.useMemo(()=>{let U=[...r].filter(be=>(be.productName||"").toLowerCase().includes(n.toLowerCase())||(be.orderId||"").toLowerCase().includes(n.toLowerCase()));return H.key&&U.sort((be,Ce)=>{let ke=be[H.key]||"",Ee=Ce[H.key]||"";return typeof ke=="string"&&(ke=ke.toLowerCase()),typeof Ee=="string"&&(Ee=Ee.toLowerCase()),ke<Ee?H.direction==="asc"?-1:1:ke>Ee?H.direction==="asc"?1:-1:0}),U},[r,n,H]),he=U=>{const be={netflix:{bg:N?"bg-red-900/30":"bg-red-100",text:N?"text-red-300":"text-red-800"},disney:{bg:N?"bg-blue-900/30":"bg-blue-100",text:N?"text-blue-300":"text-blue-800"},max:{bg:N?"bg-yellow-900/30":"bg-yellow-100",text:N?"text-yellow-300":"text-yellow-800"},spotify:{bg:N?"bg-green-900/30":"bg-green-100",text:N?"text-green-300":"text-green-800"},default:{bg:N?"bg-gray-900/30":"bg-gray-100",text:N?"text-gray-300":"text-gray-700"}};return be[U?.toLowerCase()]||be.default},Ae=U=>({netflix:"Netflix",disney:"Disney+",max:"Max",spotify:"Spotify"})[U?.toLowerCase()]||U||"N/A",Oe=(U,be)=>{const Ce=U.status||"pending",ke=new Date(U.endDate)>new Date;let Ee,Ke,dt;return Ce==="soporte"?(Ee="En soporte",Ke=be?"text-blue-400":"text-blue-600",dt=o.jsx(Ga,{className:Ke,title:"En Soporte"})):Ce==="rechazado"?(Ee="No aplica soporte",Ke=be?"text-amber-700":"text-amber-900",dt=o.jsx(Gi,{className:Ke,title:"No aplica soporte"})):Ce==="pending"?(Ee="Pendiente a activacion",Ke=be?"text-yellow-400":"text-yellow-600",dt=o.jsx(Rd,{className:Ke,title:"Pendiente a activacion"})):ke?(Ee="Activo",Ke=be?"text-green-400":"text-green-600",dt=o.jsx(yd,{className:Ke,title:"Activo"})):(Ee="Expirado",Ke=be?"text-red-400":"text-red-600",dt=o.jsx(Gi,{className:Ke,title:"Expirado"})),{text:Ee,color:Ke,icon:dt}},De=U=>{S(be=>({key:U,direction:be.key===U&&be.direction==="asc"?"desc":"asc"}))},we=U=>H.key!==U?null:H.direction==="asc"?o.jsx(tx,{className:"ml-1"}):o.jsx(ex,{className:"ml-1"}),_e=()=>{const U=F.map(Ee=>{const Ke=parseFloat(Ee.price)||0,dt=parseFloat(Ee.renewalPrice)||Ke,zt=Ee.status||"pending",bt=zt==="pending",tr=zt==="soporte",Et=zt==="rechazado",Pe=new Date(Ee.endDate)>new Date,Qt=Math.max(0,Ee.daysRemaining||0);let St;tr?St="En soporte":Et?St="No aplica soporte":bt?St="Pendiente a activacion":Pe?St="Activo":St="Expirado";const Be=tr||Et||bt;let ue;return Be?ue=St:ue=`${Qt} día${Qt===1?"":"s"}`,{Estado:St,Producto:Ee.productName||"Sin nombre",Categoría:Ae(Ee.category),"N° Pedido":Ee.orderId||"N/A",Precio:`S/ ${Ke.toFixed(2)}`,"Precio Renovación":dt!==Ke?`S/ ${dt.toFixed(2)}`:"N/A","Tiempo Restante":ue,"Fecha de Inicio":s(Ee.startDate),"Fecha de Vencimiento":s(Ee.endDate),Email:Ee.account?.email||"N/A",Contraseña:Ee.account?.password||"N/A",Perfil:Ee.account?.profile||"N/A",PIN:Ee.account?.pin||"N/A",Proveedor:Ee.provider||"N/A",Nombre:Ee.client?.customerName||"N/A","Teléfono Cliente":Ee.client?.phone||"N/A"}}),be=gs.json_to_sheet(U),Ce=gs.book_new();gs.book_append_sheet(Ce,be,"Pedidos");const ke=new Date().toISOString().slice(0,10).replace(/-/g,"");dx(Ce,`mis_pedidos_export_${ke}.xlsx`)},Ne=U=>{v(U),w(""),m(!0)},ae=()=>{m(!1),v(null),w(""),j(!1)},W=U=>{K(U),V(!0)},ee=()=>{V(!1),K(null)},te=async()=>{L&&typeof a=="function"&&await a(L),ee()},ie=async()=>{if(!_.trim()){alert("El mensaje es obligatorio.");return}if(!x||!x.id){alert("Error: No se encontró el ID del pedido.");return}j(!0);try{await va(vt(Fe,"sales",x.id),{status:"soporte",soporteMessage:_,soporteCreatedAt:new Date},{merge:!0}),console.log(`Documento actualizado exitosamente para order ID: ${x.id}`),typeof e=="function"&&e(U=>{const be=U.map(ke=>String(ke.id)===String(x.id)?{...ke,status:"soporte",soporteMessage:_,soporteCreatedAt:new Date}:ke);console.log("Orders actualizados localmente:",be);const Ce=be.find(ke=>String(ke.id)===String(x.id));return console.log(`Mensaje agregado localmente para ${x.id}:`,Ce?.soporteMessage),be}),typeof t=="function"&&setTimeout(async()=>{await t()},500),alert(`Soporte enviado para "${x.productName}". El pedido ahora está en estado "En soporte".`)}catch(U){console.error("Error detallado en sendSupport:",U),alert("Hubo un error al enviar a soporte. Verifica la consola del navegador para más detalles. Asegúrate de que el ID del pedido sea correcto y que tengas permisos en Firebase.")}finally{j(!1)}ae()};return o.jsxs(re.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-7xl mx-auto border ${N?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:I,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"orders-title",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 gap-4",children:[o.jsxs("h3",{id:"orders-title",className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight flex items-center bg-clip-text text-transparent bg-gradient-to-r ${N?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,children:[o.jsx(ga,{className:"mr-2"})," Mis Pedidos",o.jsx("span",{className:`ml-2 bg-gradient-to-r ${N?"from-blue-400/20 to-purple-600/20":"from-blue-600/20 to-purple-800/20"} px-2 py-1 rounded-full text-sm font-medium`,children:F.length})]}),o.jsxs("div",{className:"flex items-center gap-4 w-full lg:w-auto",children:[o.jsxs("div",{className:"relative flex-1 lg:w-80",children:[o.jsx("input",{type:"text",placeholder:"Buscar pedidos por nombre o ID...",className:`w-full pl-10 pr-4 py-3 rounded-2xl shadow-md transition-all duration-300 ${N?"bg-gray-800/70 text-white border border-gray-600/50 placeholder-gray-400 focus:border-blue-500/50":"bg-white/70 text-gray-900 border border-gray-300/50 placeholder-gray-500 focus:border-blue-500/50"} focus:ring-2 focus:ring-blue-500/30 focus:outline-none`,value:n,onChange:U=>i(U.target.value),"aria-label":"Buscar pedidos por nombre o ID"}),o.jsx(ga,{className:`absolute left-3 top-3.5 ${N?"text-gray-400":"text-gray-500"}`,size:18})]}),o.jsxs(re.button,{onClick:_e,className:`p-3 rounded-2xl shadow-lg flex items-center gap-2 ${N?"bg-green-600/80 hover:bg-green-700/90 text-white":"bg-green-500/80 hover:bg-green-600/90 text-white"} transition-all duration-300`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Descargar pedidos como Excel","aria-label":"Exportar pedidos a Excel",children:[o.jsx(rx,{size:18}),o.jsx("span",{className:"hidden sm:inline text-sm",children:"Exportar"})]})]})]}),o.jsx(Vt,{children:F.length>0?o.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:o.jsx("div",{className:"overflow-x-auto rounded-2xl border border-gray-200/50 shadow-lg",children:o.jsxs("table",{className:`min-w-full divide-y divide-gray-200/30 ${N?"bg-gray-800/50":"bg-white/50"}`,children:[o.jsx("thead",{className:`${N?"bg-gray-700/60":"bg-gray-50/60"}`,children:o.jsx("tr",{children:[{key:"status",label:"Estado"},{key:"productName",label:"Producto"},{key:"category",label:"Categoría"},{key:"orderId",label:"N° Pedido"},{key:"price",label:"Precio"},{key:"daysRemaining",label:"Tiempo Restante"},{key:"startDate",label:"Inicio"},{key:"endDate",label:"Vencimiento"},{key:"email",label:"Email"},{key:"password",label:"Contraseña"},{key:"profile",label:"Perfil"},{key:"pin",label:"PIN"},{key:"provider",label:"Proveedor"},{key:"customerName",label:"Nombre Cliente"},{key:"phone",label:"Teléfono Cliente"},{label:"Acciones"}].map(({key:U,label:be})=>o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${N?"text-gray-300":"text-gray-700"} cursor-pointer hover:text-blue-400 transition-colors`,onClick:()=>U&&De(U),children:o.jsxs("div",{className:"flex items-center justify-between",children:[be,U&&we(U)]})},U||be))})}),o.jsx("tbody",{className:"divide-y divide-gray-200/30",children:F.map(U=>{const be=parseFloat(U.price)||0,Ce=parseFloat(U.renewalPrice)||be,ke=U.status||"pending",Ee=ke==="pending",Ke=ke==="soporte",dt=ke==="rechazado",zt=new Date(U.endDate)>new Date,bt=Math.max(0,U.daysRemaining||0),tr=Math.min(U.timeElapsedPercentage||0,100),Et=Oe(U,N),Pe=he(U.category);let Qt;tr<70?Qt=N?"bg-green-500":"bg-green-600":tr<90?Qt=N?"bg-orange-500":"bg-orange-600":Qt=N?"bg-red-500":"bg-red-600";const St=!["En soporte","No aplica soporte","Pendiente a activacion"].includes(Et.text),ue=Ke||dt||Ee?Et.text:`${bt} día${bt===1?"":"s"}`,rt=St?Qt.replace("bg-","text-"):Et.color,st=Et.text,ht=encodeURIComponent(`*Consulta sobre Pedido - ${U.productName||"Sin nombre"}*

*N° Pedido:* ${U.orderId||"No especificado"}
*Producto:* ${U.productName||"Sin nombre"}
*Precio:* S/ ${be.toFixed(2)}
`+(Ce?`*Precio de Renovación:* S/ ${Ce.toFixed(2)}
`:"")+`*Estado:* ${st}
*Fecha de Inicio:* ${s(U.startDate)}
*Fecha de Vencimiento:* ${s(U.endDate)}
`+(Ee?`Hola 😊, he comprado un producto a pedido (${U.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),Tt=!(Ee||Ke||dt),lt=Ee?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:Ke?`*Nota:* Este pedido está "En Soporte". El proveedor lo está revisando.

`:dt?`*Nota:* Este pedido ha sido rechazado. No aplica soporte.

`:"",Ct=encodeURIComponent(`😊 Estimado/a ${U.client?.customerName||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${U.productName||"Sin nombre"}.
🔢 Código: ${U.orderId||"No especificado"}
`+(Tt?`📧 Correo: ${U.account?.email||"No especificado"}
🔐 Contraseña: ${U.account?.password||"No especificado"}
👤 Perfil: ${U.account?.profile||"No especificado"}
📌 PIN: ${U.account?.pin||"No especificado"}
`:"")+`🌐 URL: Sin URL
📅 Fecha de creación: ${s(U.startDate)}
📅 Fecha de vencimiento: ${s(U.endDate)}
🏁 Días contratados: ${U.durationDays||30} días.

`+lt+`*Términos y Condiciones:*
${U.termsAndConditions||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),ct=U.providerPhone?U.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999",kr=U.client?.phone?U.client.phone.replace(/^\+/,"").replace(/\D/g,""):"51999999999",ze=zt&&U.renewable&&bt<=3;return o.jsxs(re.tr,{className:`transition-colors duration-200 ${N?"text-gray-300 hover:bg-gray-700/50":"text-gray-700 hover:bg-gray-50/50"}`,variants:R,initial:"hidden",animate:"visible",whileHover:"hover","aria-labelledby":`order-${U.id}-title`,children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`p-1.5 rounded-full ${Et.color.replace("text-","bg-").replace("-600","/20").replace("-400","/20")}`,children:Et.icon}),o.jsx("span",{className:`${Et.color} font-medium`,children:Et.text})]})}),o.jsx("td",{className:"px-4 py-4",children:o.jsx("h4",{id:`order-${U.id}-title`,className:"font-semibold text-blue-500 hover:text-blue-600 transition-colors",children:U.productName||"Sin nombre"})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Pe.bg} ${Pe.text}`,children:Ae(U.category)})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap font-mono text-sm",children:U.orderId||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"space-y-1",children:[o.jsxs("p",{className:"font-bold text-lg",children:["S/ ",be.toFixed(2)]}),Ce!==be&&o.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 bg-gray-100/50 dark:bg-gray-800/50 px-2 py-1 rounded-full",children:[o.jsx(W6,{size:12,className:"text-gray-400"}),o.jsxs("span",{children:["S/ ",Ce.toFixed(2)]})]})]})}),o.jsx("td",{className:"px-4 py-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[St&&o.jsx("div",{className:"relative",children:o.jsx("div",{className:`w-20 h-2 rounded-full overflow-hidden ${N?"bg-gray-600/40":"bg-gray-300/40"}`,children:o.jsx(re.div,{className:`h-2 rounded-full ${Qt}`,initial:{width:0},animate:{width:`${tr}%`},transition:{duration:1.5,ease:"easeInOut"}})})}),o.jsx("span",{className:`text-sm font-medium ${rt}`,children:ue})]})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:s(U.startDate)}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:s(U.endDate)}),o.jsx("td",{className:"px-4 py-4 max-w-xs truncate",title:U.account?.email||"N/A",children:U.account?.email||"N/A"}),o.jsx("td",{className:"px-4 py-4 max-w-xs truncate",title:U.account?.password||"N/A",children:U.account?.password||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:U.account?.profile||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-mono",children:U.account?.pin||"N/A"}),o.jsx("td",{className:"px-4 py-4 text-sm font-medium text-teal-600",children:U.provider||"N/A"}),o.jsx("td",{className:"px-4 py-4 max-w-xs truncate",title:U.client?.customerName||"N/A",children:U.client?.customerName||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:U.client?.phone||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:["soporte","rechazado"].includes(ke)?o.jsx("div",{className:"flex gap-2",children:o.jsx("span",{className:"text-gray-400 text-xs",children:"Sin acciones"})}):o.jsxs("div",{className:"flex gap-2",children:[o.jsx(re.a,{href:`https://wa.me/51${ct}?text=${ht}`,target:"_blank",rel:"noopener noreferrer",className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-teal-500/80 hover:bg-teal-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Contactar proveedor","aria-label":`Contactar proveedor para el pedido ${U.orderId||U.productName}`,children:o.jsx(Ur,{size:16})}),ze&&o.jsx(re.button,{onClick:()=>W(U),disabled:c[`renew_${U.id}`]||d<Ce,className:`p-2.5 rounded-xl shadow-md flex items-center justify-center ${c[`renew_${U.id}`]||d<Ce?"bg-gray-300/50 text-gray-500 cursor-not-allowed":"bg-blue-500/80 hover:bg-blue-600/90 text-white"} transition-all duration-200`,whileHover:{scale:c[`renew_${U.id}`]||d<Ce?1:1.1},whileTap:{scale:c[`renew_${U.id}`]||d<Ce?1:.9},title:"Renovar pedido","aria-label":`Renovar pedido ${U.orderId||U.productName} por S/ ${Ce.toFixed(2)}`,children:c[`renew_${U.id}`]?o.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):o.jsx(F1,{size:16})}),o.jsx(re.a,{href:`https://wa.me/51${kr}?text=${Ct}`,target:"_blank",rel:"noopener noreferrer",className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-amber-500/80 hover:bg-amber-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Contactar cliente","aria-label":`Contactar cliente para el pedido ${U.orderId||U.productName}`,children:o.jsx(Ur,{size:16})}),o.jsx(re.button,{onClick:()=>Ne(U),className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-purple-500/80 hover:bg-purple-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Soporte","aria-label":`Abrir soporte para el pedido ${U.orderId||U.productName}`,children:o.jsx(Ga,{size:16})})]})})]},U.id)})})]})})}):o.jsxs(re.div,{className:"text-center py-16",variants:I,initial:"hidden",animate:"visible",children:[o.jsx(re.div,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:o.jsx(ga,{className:`mx-auto text-6xl ${N?"text-gray-400":"text-gray-500"} mb-4`,"aria-hidden":"true"})}),o.jsx("h4",{className:`text-xl font-semibold ${N?"text-gray-300":"text-gray-700"} mb-2`,children:"No hay pedidos encontrados"}),o.jsx("p",{className:`text-sm ${N?"text-gray-400":"text-gray-600"}`,children:"Intenta ajustar tu búsqueda o realiza tu primer pedido."})]})}),o.jsx(Vt,{children:p&&x&&o.jsxs(o.Fragment,{children:[o.jsx(re.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",variants:D,initial:"hidden",animate:"visible",exit:"exit",onClick:ae}),o.jsxs(re.div,{className:`relative w-full max-w-md p-6 rounded-3xl shadow-2xl border z-[10000] ${N?"bg-gray-800/95 border-gray-700/50 text-white":"bg-white/95 border-gray-200/50 text-gray-900"}`,variants:M,initial:"hidden",animate:"visible",exit:"exit",onClick:U=>U.stopPropagation(),children:[o.jsx("div",{className:"absolute top-4 right-4",children:o.jsx(re.button,{onClick:ae,className:`p-2 rounded-full ${N?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-200/50 hover:bg-gray-300/50"}`,whileHover:{scale:1.1},whileTap:{scale:.9},children:o.jsx(Gi,{size:18,className:N?"text-gray-300":"text-gray-600"})})}),o.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[o.jsx(Ga,{className:"text-purple-500"}),"Soporte para: ",x.productName||"Sin nombre"]}),o.jsx("textarea",{value:_,onChange:U=>w(U.target.value),placeholder:"Escribe tu mensaje de soporte detallado (obligatorio)...",className:`w-full p-4 rounded-2xl resize-none transition-all duration-200 ${N?"bg-gray-700/70 text-white border border-gray-600/50 placeholder-gray-400 focus:border-purple-500/50":"bg-gray-100/70 text-gray-900 border border-gray-300/50 placeholder-gray-500 focus:border-purple-500/50"} focus:ring-2 focus:ring-purple-500/30 focus:outline-none`,rows:5,required:!0,disabled:E}),o.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[o.jsx(re.button,{onClick:ae,className:`px-6 py-2.5 rounded-xl font-medium transition-all duration-200 ${N?"bg-gray-600/70 hover:bg-gray-700/80 text-white":"bg-gray-300/70 hover:bg-gray-400/80 text-gray-900"}`,whileHover:{scale:1.05},whileTap:{scale:.95},disabled:E,children:"Cancelar"}),o.jsx(re.button,{onClick:ie,className:`px-6 py-2.5 rounded-xl font-medium flex items-center gap-2 transition-all duration-200 ${!_.trim()||E?"bg-gray-400/70 cursor-not-allowed text-gray-500":"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white"}`,whileHover:!_.trim()||E?{}:{scale:1.05},whileTap:!_.trim()||E?{}:{scale:.95},disabled:!_.trim()||E,children:E?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}),"Enviando..."]}):"Enviar Soporte"})]})]})]})}),o.jsx(Vt,{children:P&&L&&o.jsxs(o.Fragment,{children:[o.jsx(re.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",variants:D,initial:"hidden",animate:"visible",exit:"exit",onClick:ee}),o.jsxs(re.div,{className:`relative w-full max-w-md p-6 rounded-3xl shadow-2xl border z-[10000] ${N?"bg-gray-800/95 border-gray-700/50 text-white":"bg-white/95 border-gray-200/50 text-gray-900"}`,variants:M,initial:"hidden",animate:"visible",exit:"exit",onClick:U=>U.stopPropagation(),children:[o.jsx("div",{className:"absolute top-4 right-4",children:o.jsx(re.button,{onClick:ee,className:`p-2 rounded-full ${N?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-200/50 hover:bg-gray-300/50"}`,whileHover:{scale:1.1},whileTap:{scale:.9},children:o.jsx(Gi,{size:18,className:N?"text-gray-300":"text-gray-600"})})}),o.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[o.jsx(F1,{className:"text-blue-500"}),"¿Estás seguro de renovar el pedido?"]}),o.jsxs("div",{className:"mb-6 text-center",children:[o.jsxs("p",{className:"text-sm mb-2",children:["Se descontará ",o.jsxs("span",{className:"font-bold text-blue-500",children:["S/ ",parseFloat(L.renewalPrice||L.price||0).toFixed(2)]})," de tu saldo actual."]}),o.jsxs("p",{className:"text-xs text-gray-500",children:["Pedido: ",L.productName||"Sin nombre"," (",L.orderId||"N/A",")"]})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(re.button,{onClick:ee,className:`px-6 py-2.5 rounded-xl font-medium transition-all duration-200 ${N?"bg-gray-600/70 hover:bg-gray-700/80 text-white":"bg-gray-300/70 hover:bg-gray-400/80 text-gray-900"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Cancelar"}),o.jsx(re.button,{onClick:te,className:`px-6 py-2.5 rounded-xl font-medium flex items-center gap-2 transition-all duration-200 ${c[`renew_${L.id}`]||d<parseFloat(L.renewalPrice||L.price||0)?"bg-gray-400/70 cursor-not-allowed text-gray-500":"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white"}`,whileHover:c[`renew_${L.id}`]||d<parseFloat(L.renewalPrice||L.price||0)?{}:{scale:1.05},whileTap:c[`renew_${L.id}`]||d<parseFloat(L.renewalPrice||L.price||0)?{}:{scale:.95},disabled:c[`renew_${L.id}`]||d<parseFloat(L.renewalPrice||L.price||0),children:c[`renew_${L.id}`]?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}),"Renovando..."]}):"Renovar"})]})]})]})})]})};LP.propTypes={orders:q.arrayOf(q.shape({id:q.string.isRequired,productName:q.string,category:q.string,orderId:q.string,price:q.oneOfType([q.string,q.number]),renewalPrice:q.oneOfType([q.string,q.number]),status:q.string,startDate:q.oneOfType([q.string,q.instanceOf(Date)]),endDate:q.oneOfType([q.string,q.instanceOf(Date)]),daysRemaining:q.number,timeElapsedPercentage:q.number,account:q.shape({email:q.string,password:q.string,profile:q.string,pin:q.string}),client:q.shape({customerName:q.string,phone:q.string}),provider:q.string,providerPhone:q.string,renewable:q.bool,termsAndConditions:q.string,durationDays:q.number,soporteMessage:q.string,soporteCreatedAt:q.oneOfType([q.string,q.instanceOf(Date)])})).isRequired,setOrders:q.func.isRequired,fetchOrders:q.func,searchQuery:q.string.isRequired,setSearchQuery:q.func.isRequired,formatDate:q.func.isRequired,handleRenewal:q.func.isRequired,actionLoading:q.object.isRequired,balance:q.number.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const MP=({userName:r,email:e,actionLoading:t,handleUpdatePassword:n,openEditProfileModal:i,handleLogout:s,theme:a="dark"})=>{const c=a==="dark",d={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}},p={hover:{scale:1.05,transition:{duration:.2}},tap:{scale:.95}};return o.jsxs(re.div,{className:`p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${c?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:d,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"settings-title",children:[o.jsx(re.h3,{id:"settings-title",className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-8 bg-clip-text text-transparent bg-gradient-to-r ${c?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"} text-center`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:"Configuración"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${c?"bg-gray-800/70 border-gray-700/50 hover:bg-gray-700/70":"bg-white/70 border-gray-200/50 hover:bg-gray-50/70"}`,variants:h,whileHover:"hover",children:[o.jsxs("h4",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${c?"text-blue-400":"text-blue-600"}`,children:[o.jsx(ki,{size:20}),"Perfil"]}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl ${c?"bg-gray-800/30":"bg-gray-100"}`,children:[o.jsx(ki,{className:"text-blue-400 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("span",{className:`font-medium ${c?"text-white":"text-gray-900"}`,children:"Nombre:"}),o.jsx("span",{className:`ml-2 ${c?"text-gray-300":"text-gray-700"}`,children:r.username})]})]}),o.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl ${c?"bg-gray-800/30":"bg-gray-100"}`,children:[o.jsx(nw,{className:"text-blue-400 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("span",{className:`font-medium ${c?"text-white":"text-gray-900"}`,children:"Correo:"}),o.jsx("span",{className:`ml-2 ${c?"text-gray-300":"text-gray-700"}`,children:e})]})]}),o.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl ${c?"bg-gray-800/30":"bg-gray-100"}`,children:[o.jsx(Ah,{className:"text-blue-400 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("span",{className:`font-medium ${c?"text-white":"text-gray-900"}`,children:"Teléfono:"}),o.jsx("span",{className:`ml-2 ${c?"text-gray-300":"text-gray-700"}`,children:r.phone||"No especificado"})]})]})]}),o.jsxs(re.button,{onClick:()=>i({id:r.id,username:r.username,phone:r.phone}),className:`w-full px-6 py-3 rounded-xl font-semibold transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 ${c?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white focus:ring-blue-400":"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white focus:ring-blue-500"}`,variants:p,whileHover:"hover",whileTap:"tap","aria-label":"Editar perfil",children:[o.jsx(Pq,{size:18,className:"inline mr-2"}),"Editar Perfil"]})]}),o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${c?"bg-gray-800/70 border-gray-700/50 hover:bg-gray-700/70":"bg-white/70 border-gray-200/50 hover:bg-gray-50/70"}`,variants:h,whileHover:"hover",children:[o.jsxs("h4",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${c?"text-green-400":"text-green-600"}`,children:[o.jsx(Zm,{size:20}),"Seguridad"]}),o.jsxs("form",{onSubmit:n,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block mb-2 font-medium ${c?"text-gray-300":"text-gray-700"}`,children:"Nueva Contraseña"}),o.jsx("input",{type:"password",name:"password",className:`w-full px-4 py-3 rounded-xl ${c?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all duration-300`,placeholder:"Ingrese nueva contraseña (mínimo 6 caracteres)","aria-label":"Nueva contraseña"})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block mb-2 font-medium ${c?"text-gray-300":"text-gray-700"}`,children:"Nuevo Teléfono"}),o.jsx("input",{type:"tel",name:"phone",className:`w-full px-4 py-3 rounded-xl ${c?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all duration-300`,placeholder:"Ingrese nuevo teléfono (ej: +51 940 505 969)",defaultValue:r.phone||"","aria-label":"Nuevo teléfono"})]}),o.jsx(re.button,{type:"submit",disabled:t.password,className:`w-full py-3 px-6 rounded-xl font-semibold transition-all duration-300 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 ${t.password?"bg-gray-300 text-gray-500 cursor-not-allowed":c?"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white focus:ring-green-400":"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white focus:ring-green-500"}`,variants:p,whileHover:t.password?{}:"hover",whileTap:t.password?{}:"tap","aria-label":"Guardar cambios de seguridad",children:t.password?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}),o.jsx("span",{children:"Guardando..."})]}):"Guardar Cambios"})]})]}),o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${c?"bg-gray-800/70 border-gray-700/50 hover:bg-gray-700/70":"bg-white/70 border-gray-200/50 hover:bg-gray-50/70"}`,variants:h,whileHover:"hover",children:[o.jsxs("h4",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${c?"text-red-400":"text-red-600"}`,children:[o.jsx(eg,{size:20}),"Sesión"]}),o.jsxs(re.button,{onClick:s,className:`w-full py-3 px-6 rounded-xl font-semibold transition-all duration-300 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 ${c?"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white focus:ring-red-400":"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white focus:ring-red-500"}`,variants:p,whileHover:"hover",whileTap:"tap","aria-label":"Cerrar sesión",children:[o.jsx(eg,{size:18}),"Cerrar Sesión"]})]})]})]})};MP.propTypes={userName:q.shape({id:q.string.isRequired,username:q.string.isRequired,phone:q.string}).isRequired,email:q.string.isRequired,actionLoading:q.shape({password:q.bool}).isRequired,handleUpdatePassword:q.func.isRequired,openEditProfileModal:q.func.isRequired,handleLogout:q.func.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const VP=({orders:r=[],setOrders:e=()=>{},fetchOrders:t,searchQuery:n="",setSearchQuery:i=()=>{},formatDate:s=p=>p?new Date(p).toLocaleDateString("es-PE"):"",handleRenewal:a=()=>{},actionLoading:c={},balance:d=0,theme:h="dark"})=>{const[p,m]=k.useState({key:null,direction:"asc"}),x=h==="dark",v={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},_={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{backgroundColor:x?"#1F2937":"#F3F4F6",transition:{duration:.2},scale:1.005}},w=k.useMemo(()=>{let S=[...r.filter(N=>N.status==="soporte")].filter(N=>(N.productName||"").toLowerCase().includes(n.toLowerCase())||(N.orderId||"").toLowerCase().includes(n.toLowerCase()));return p.key&&S.sort((N,I)=>{let R=N[p.key]||"",M=I[p.key]||"";return p.key==="soporteMessage"?(R=N.soporteMessage||"",M=I.soporteMessage||""):p.key==="category"&&(R=j(N.category),M=j(I.category)),typeof R=="string"&&(R=R.toLowerCase()),typeof M=="string"&&(M=M.toLowerCase()),R<M?p.direction==="asc"?-1:1:R>M?p.direction==="asc"?1:-1:0}),S},[r,n,p]),E=H=>{const S={netflix:{bg:x?"bg-red-900/30":"bg-red-100",text:x?"text-red-300":"text-red-800"},disney:{bg:x?"bg-blue-900/30":"bg-blue-100",text:x?"text-blue-300":"text-blue-800"},max:{bg:x?"bg-yellow-900/30":"bg-yellow-100",text:x?"text-yellow-300":"text-yellow-800"},spotify:{bg:x?"bg-green-900/30":"bg-green-100",text:x?"text-green-300":"text-green-800"},default:{bg:x?"bg-gray-900/30":"bg-gray-100",text:x?"text-gray-300":"text-gray-700"}};return S[H?.toLowerCase()]||S.default},j=H=>({netflix:"Netflix",disney:"Disney+",max:"Max",spotify:"Spotify"})[H?.toLowerCase()]||H||"N/A",P=(H,S)=>{const N=H.status||"pending",I=new Date(H.endDate)>new Date;let R,M,D;return N==="soporte"?(R="En soporte",M=S?"text-blue-400":"text-blue-600",D=o.jsx(Ga,{className:M,title:"En Soporte"})):N==="rechazado"?(R="No aplica soporte",M=S?"text-amber-700":"text-amber-900",D=o.jsx(Gi,{className:M,title:"No aplica soporte"})):I?(R="Activo",M=S?"text-green-400":"text-green-600",D=o.jsx(yd,{className:M,title:"Activo"})):N==="pending"?(R="Pendiente a activacion",M=S?"text-yellow-400":"text-yellow-600",D=o.jsx(Rd,{className:M,title:"Pendiente a activacion"})):(R="Expirado",M=S?"text-red-400":"text-red-600",D=o.jsx(Gi,{className:M,title:"Expirado"})),{text:R,color:M,icon:D}},V=H=>{m(S=>({key:H,direction:S.key===H&&S.direction==="asc"?"desc":"asc"}))},L=H=>p.key!==H?null:p.direction==="asc"?o.jsx(tx,{className:"ml-1"}):o.jsx(ex,{className:"ml-1"}),K=()=>{const H=w.map(R=>{const M=parseFloat(R.price)||0,D=parseFloat(R.renewalPrice)||M,F=R.status||"pending",he=F==="pending",Ae=F==="soporte",Oe=F==="rechazado",De=new Date(R.endDate)>new Date,we=Math.max(0,R.daysRemaining||0);let _e;Ae?_e="En Soporte":Oe?_e="No aplica soporte":De?_e="Activo":he?_e="Pendiente a activacion":_e="Expirado";const Ne=Ae||Oe||he&&!De;let ae;return Ne?ae=_e:ae=`${we} día${we===1?"":"s"}`,{Estado:_e,Producto:R.productName||"Sin nombre",Categoría:j(R.category),"N° Pedido":R.orderId||"N/A",Precio:`S/ ${M.toFixed(2)}`,"Precio Renovación":D!==M?`S/ ${D.toFixed(2)}`:"N/A","Tiempo Restante":ae,"Fecha de Inicio":s(R.startDate),"Fecha de Vencimiento":s(R.endDate),Email:R.account?.email||"N/A",Contraseña:R.account?.password||"N/A",Perfil:R.account?.profile||"N/A",PIN:R.account?.pin||"N/A",Proveedor:R.provider||"N/A","Mensaje de Soporte":R.soporteMessage||"Sin mensaje"}}),S=gs.json_to_sheet(H),N=gs.book_new();gs.book_append_sheet(N,S,"Pedidos");const I=new Date().toISOString().slice(0,10).replace(/-/g,"");dx(N,`mis_pedidos_soporte_export_${I}.xlsx`)};return o.jsxs(re.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-7xl mx-auto border ${x?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:v,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"support-title",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 gap-4",children:[o.jsxs("h3",{id:"support-title",className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight flex items-center bg-clip-text text-transparent bg-gradient-to-r ${x?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,children:[o.jsx(Ga,{className:"mr-2"})," Pedidos en Soporte",o.jsx("span",{className:`ml-2 bg-gradient-to-r ${x?"from-blue-400/20 to-purple-600/20":"from-blue-600/20 to-purple-800/20"} px-2 py-1 rounded-full text-sm font-medium`,children:w.length})]}),o.jsxs("div",{className:"flex items-center gap-4 w-full lg:w-auto",children:[o.jsxs("div",{className:"relative flex-1 lg:w-80",children:[o.jsx("input",{type:"text",placeholder:"Buscar pedidos en soporte por nombre o ID...",className:`w-full pl-10 pr-4 py-3 rounded-2xl shadow-md transition-all duration-300 ${x?"bg-gray-800/70 text-white border border-gray-600/50 placeholder-gray-400 focus:border-blue-500/50":"bg-white/70 text-gray-900 border border-gray-300/50 placeholder-gray-500 focus:border-blue-500/50"} focus:ring-2 focus:ring-blue-500/30 focus:outline-none`,value:n,onChange:H=>i(H.target.value),"aria-label":"Buscar pedidos en soporte por nombre o ID"}),o.jsx(ga,{className:`absolute left-3 top-3.5 ${x?"text-gray-400":"text-gray-500"}`,size:18})]}),o.jsxs(re.button,{onClick:K,className:`p-3 rounded-2xl shadow-lg flex items-center gap-2 ${x?"bg-green-600/80 hover:bg-green-700/90 text-white":"bg-green-500/80 hover:bg-green-600/90 text-white"} transition-all duration-300`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Descargar pedidos en soporte como Excel","aria-label":"Exportar pedidos en soporte a Excel",children:[o.jsx(rx,{size:18}),o.jsx("span",{className:"hidden sm:inline text-sm",children:"Exportar"})]})]})]}),o.jsx(Vt,{children:w.length>0?o.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:o.jsx("div",{className:"overflow-x-auto rounded-2xl border border-gray-200/50 shadow-lg",children:o.jsxs("table",{className:`min-w-full divide-y divide-gray-200/30 ${x?"bg-gray-800/50":"bg-white/50"}`,children:[o.jsx("thead",{className:`${x?"bg-gray-700/60":"bg-gray-50/60"}`,children:o.jsx("tr",{children:[{key:null,label:"Estado"},{key:"productName",label:"Producto"},{key:"category",label:"Categoría"},{key:"orderId",label:"N° Pedido"},{key:"price",label:"Precio"},{key:"daysRemaining",label:"Tiempo Restante"},{key:"startDate",label:"Inicio"},{key:"endDate",label:"Vencimiento"},{key:"email",label:"Email"},{key:"password",label:"Contraseña"},{key:"profile",label:"Perfil"},{key:"pin",label:"PIN"},{key:"provider",label:"Proveedor"},{key:"soporteMessage",label:"Mensaje de Soporte"},{label:"Acciones"}].map(({key:H,label:S})=>o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${x?"text-gray-300":"text-gray-700"} ${H?"cursor-pointer hover:text-blue-400 transition-colors":""}`,onClick:()=>H&&V(H),children:o.jsxs("div",{className:"flex items-center justify-between",children:[S,H&&L(H)]})},H||S))})}),o.jsx("tbody",{className:"divide-y divide-gray-200/30",children:w.map(H=>{const S=parseFloat(H.price)||0,N=parseFloat(H.renewalPrice)||S,I=H.status||"pending",R=I==="pending",M=I==="soporte",D=I==="rechazado",F=new Date(H.endDate)>new Date,he=Math.max(0,H.daysRemaining||0),Ae=Math.min(H.timeElapsedPercentage||0,100),Oe=P(H,x),De=E(H.category);let we;Ae<70?we=x?"bg-green-500":"bg-green-600":Ae<90?we=x?"bg-orange-500":"bg-orange-600":we=x?"bg-red-500":"bg-red-600";const _e=!["En soporte","No aplica soporte","Pendiente a activacion"].includes(Oe.text),ae=M||D||R&&!F?Oe.text:`${he} día${he===1?"":"s"}`,W=_e?we.replace("bg-","text-"):Oe.color,ee=encodeURIComponent(`*Consulta de Soporte - Pedido ${H.orderId||"N/A"}*

*Producto:* ${H.productName||"Sin nombre"}
*Cliente:* ${H.client?.customerName||"N/A"}
*Mensaje del Cliente:* ${H.soporteMessage||"Sin mensaje"}

Por favor, proporciona una solución o actualización para este soporte. ¡Gracias!`),te=H.providerPhone?H.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999";return o.jsxs(re.tr,{className:`transition-colors duration-200 ${x?"text-gray-300 hover:bg-gray-700/50":"text-gray-700 hover:bg-gray-50/50"}`,variants:_,initial:"hidden",animate:"visible",whileHover:"hover","aria-labelledby":`order-${H.id}-title`,children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`p-1.5 rounded-full ${Oe.color.replace("text-","bg-").replace("-600","/20").replace("-400","/20")}`,children:Oe.icon}),o.jsx("span",{className:`${Oe.color} font-medium`,children:Oe.text})]})}),o.jsx("td",{className:"px-4 py-4",children:o.jsx("h4",{id:`order-${H.id}-title`,className:"font-semibold text-blue-500 hover:text-blue-600 transition-colors",children:H.productName||"Sin nombre"})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${De.bg} ${De.text}`,children:j(H.category)})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap font-mono text-sm",children:H.orderId||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"space-y-1",children:[o.jsxs("p",{className:"font-bold text-lg",children:["S/ ",S.toFixed(2)]}),N!==S&&o.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 bg-gray-100/50 dark:bg-gray-800/50 px-2 py-1 rounded-full",children:[o.jsx(W6,{size:12,className:"text-gray-400"}),o.jsxs("span",{children:["S/ ",N.toFixed(2)]})]})]})}),o.jsx("td",{className:"px-4 py-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[_e&&o.jsx("div",{className:"relative",children:o.jsx("div",{className:`w-20 h-2 rounded-full overflow-hidden ${x?"bg-gray-600/40":"bg-gray-300/40"}`,children:o.jsx(re.div,{className:`h-2 rounded-full ${we}`,initial:{width:0},animate:{width:`${Ae}%`},transition:{duration:1.5,ease:"easeInOut"}})})}),o.jsx("span",{className:`text-sm font-medium ${W}`,children:ae})]})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:s(H.startDate)}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:s(H.endDate)}),o.jsx("td",{className:"px-4 py-4 max-w-xs truncate",title:H.account?.email||"N/A",children:H.account?.email||"N/A"}),o.jsx("td",{className:"px-4 py-4 max-w-xs truncate",title:H.account?.password||"N/A",children:H.account?.password||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:H.account?.profile||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-mono",children:H.account?.pin||"N/A"}),o.jsx("td",{className:"px-4 py-4 text-sm font-medium text-teal-600",children:H.provider||"N/A"}),o.jsxs("td",{className:"px-4 py-4 max-w-xs",children:[o.jsx("p",{className:"text-sm break-words line-clamp-3 bg-gray-100/30 dark:bg-gray-800/30 p-2 rounded",title:H.soporteMessage||"Sin mensaje",children:H.soporteMessage||"Sin mensaje"}),H.soporteCreatedAt&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s(H.soporteCreatedAt)})]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("div",{className:"flex gap-2",children:o.jsx(re.a,{href:`https://wa.me/51${te}?text=${ee}`,target:"_blank",rel:"noopener noreferrer",className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-teal-500/80 hover:bg-teal-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Contactar proveedor por WhatsApp","aria-label":`Contactar proveedor para el pedido ${H.orderId||H.productName}`,children:o.jsx(Ur,{size:16})})})})]},H.id)})})]})})}):o.jsxs(re.div,{className:"text-center py-16",variants:v,initial:"hidden",animate:"visible",children:[o.jsx(re.div,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:o.jsx(Ga,{className:`mx-auto text-6xl ${x?"text-gray-400":"text-gray-500"} mb-4`,"aria-hidden":"true"})}),o.jsx("h4",{className:`text-xl font-semibold ${x?"text-gray-300":"text-gray-700"} mb-2`,children:"No hay pedidos en soporte encontrados"}),o.jsx("p",{className:`text-sm ${x?"text-gray-400":"text-gray-600"}`,children:"Intenta ajustar tu búsqueda o verifica si hay pedidos en estado de soporte."})]})})]})};VP.propTypes={orders:q.arrayOf(q.shape({id:q.string.isRequired,productName:q.string,category:q.string,orderId:q.string,price:q.oneOfType([q.string,q.number]),renewalPrice:q.oneOfType([q.string,q.number]),status:q.string,startDate:q.oneOfType([q.string,q.instanceOf(Date)]),endDate:q.oneOfType([q.string,q.instanceOf(Date)]),daysRemaining:q.number,timeElapsedPercentage:q.number,account:q.shape({email:q.string,password:q.string,profile:q.string,pin:q.string}),client:q.shape({customerName:q.string}),provider:q.string,providerPhone:q.string,renewable:q.bool,termsAndConditions:q.string,durationDays:q.number,soporteMessage:q.string,soporteCreatedAt:q.oneOfType([q.string,q.instanceOf(Date)])})),setOrders:q.func,fetchOrders:q.func,searchQuery:q.string,setSearchQuery:q.func,formatDate:q.func,handleRenewal:q.func,actionLoading:q.object,balance:q.number,theme:q.oneOf(["light","dark"])};const mte=({referralCode:r,affiliates:e,formatDate:t,theme:n="dark"})=>{const[i,s]=k.useState(!1),a=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}},d={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},h=async()=>{try{await navigator.clipboard.writeText(r),s(!0),setTimeout(()=>s(!1),2e3)}catch(p){console.error("Failed to copy code:",p)}};return o.jsxs(re.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${a?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:d,initial:"hidden",animate:"visible",children:[o.jsx(re.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-6 bg-clip-text text-transparent bg-gradient-to-r ${a?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:"Afiliados"}),o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm mb-8 ${a?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:c,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${a?"text-blue-400":"text-blue-600"}`,children:[o.jsx(vd,{size:20}),"Tu Código de Referido"]}),o.jsxs("div",{className:"relative",children:[o.jsx("p",{className:`text-3xl font-bold text-center mb-4 px-4 py-3 rounded-xl bg-gradient-to-r ${a?"from-blue-500/20 to-purple-500/20 text-blue-300 border-blue-500/30":"from-blue-100/50 to-purple-100/50 text-blue-700 border-blue-300/50"} border`,children:r||"Cargando..."}),o.jsx(re.button,{onClick:h,className:`absolute -top-2 -right-2 p-2 rounded-full bg-blue-500 text-white shadow-lg hover:bg-blue-600 transition-all duration-300 ${a?"hover:shadow-blue-500/25":"hover:shadow-blue-500/50"}`,whileHover:{scale:1.1},whileTap:{scale:.95},"aria-label":"Copiar código",disabled:!r,children:o.jsx($6,{size:16})}),o.jsx(Vt,{children:i&&o.jsx(re.p,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:`absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs ${a?"text-green-400":"text-green-600"}`,children:"¡Código copiado!"})})]}),o.jsx("p",{className:`text-sm text-center mt-4 ${a?"text-gray-400":"text-gray-600"}`,children:"Comparte este código con tus amigos para que se unan a través de ti."})]}),o.jsxs(re.div,{className:`rounded-2xl p-6 shadow-xl border backdrop-blur-sm ${a?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:c,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${a?"text-white":"text-gray-900"}`,children:[o.jsx(vd,{size:20}),"Usuarios Afiliados"]}),o.jsx(Vt,{children:e.length>0?e.map((p,m)=>o.jsxs(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:m*.1},className:`mb-4 p-4 rounded-xl transition-all duration-300 border ${a?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,whileHover:{scale:1.02},children:[o.jsx("div",{className:"flex items-start justify-between mb-2",children:o.jsx("p",{className:`font-semibold flex-1 ${a?"text-white":"text-gray-900"}`,children:p.username})}),o.jsxs("div",{className:`space-y-2 ${a?"text-gray-300":"text-gray-700"}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ur,{className:"text-blue-400 flex-shrink-0",size:16}),o.jsx("span",{className:"text-sm",children:p.email})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ah,{className:"text-blue-400 flex-shrink-0",size:16}),o.jsx("span",{className:"text-sm",children:p.phone||"No especificado"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Cq,{className:"text-blue-400 flex-shrink-0",size:16}),o.jsx("span",{className:"text-sm",children:t(p.createdAt)})]})]})]},p.id)):o.jsx(re.p,{initial:{opacity:0},animate:{opacity:1},className:`py-8 text-center ${a?"text-gray-400":"text-gray-500"}`,children:"SERVICIO QUE VA A LLEGAR MUY PRONTO"})})]})]})},gte=$s.memo(({show:r,onClose:e,title:t,message:n,theme:i})=>o.jsx(Vt,{children:r&&o.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:e,role:"dialog","aria-labelledby":"modal-title",children:o.jsxs(re.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${i==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${i==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[o.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:o.jsx(ti,{size:20})}),o.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${i==="dark"?"text-white":"text-gray-900"}`,children:t}),o.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:n})]})})}));gte.propTypes={show:q.bool.isRequired,onClose:q.func.isRequired,title:q.string.isRequired,message:q.string.isRequired,theme:q.string.isRequired};const $P=()=>{const[r,e]=k.useState(!1),[t,n]=k.useState(""),[i,s]=k.useState([]),[a,c]=k.useState({username:"",phone:""}),[d,h]=k.useState(""),[p,m]=k.useState(0),[x,v]=k.useState(null),[_,w]=k.useState("inicio"),[E,j]=k.useState([]),[P,V]=k.useState({}),[L,K]=k.useState([]),[H,S]=k.useState([]),[N,I]=k.useState(""),[R,M]=k.useState(!0),[D,F]=k.useState({}),[he,Ae]=k.useState(null),[Oe,De]=k.useState({isOpen:!1,message:"",title:""}),[we,_e]=k.useState({isOpen:!1,user:null}),[Ne,ae]=k.useState({isOpen:!1,provider:null}),[W,ee]=k.useState(""),[te,ie]=k.useState([]),[U,be]=k.useState("dark"),[Ce,ke]=k.useState(!1),[Ee,Ke]=k.useState(!1),[dt,zt]=k.useState(!1),bt=Gs();k.useEffect(()=>{const xe=()=>zt(window.innerWidth<1024);return xe(),window.addEventListener("resize",xe),()=>window.removeEventListener("resize",xe)},[]);const tr=k.useCallback(()=>{be(xe=>xe==="dark"?"light":"dark")},[]),Et=k.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),Pe=k.useCallback((xe,Xe)=>{De({isOpen:!0,title:xe,message:Xe})},[]),Qt=k.useCallback(()=>{De({isOpen:!1,message:"",title:""})},[]),St=k.useCallback(xe=>{_e({isOpen:!0,user:xe})},[]),Be=k.useCallback(()=>{_e({isOpen:!1,user:null})},[]),ue=k.useCallback(xe=>{ae({isOpen:!0,provider:xe})},[]),rt=k.useCallback(()=>{ae({isOpen:!1,provider:null})},[]),st=k.useCallback(xe=>{if(!xe)return"No especificada";try{const Xe=xe instanceof Date?xe:new Date(xe);return isNaN(Xe.getTime())?"Fecha inválida":Xe.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},[]),ht=k.useCallback(async()=>{if(x)try{const xe=ur(It(Fe,"sales"),gr("customerId","==",x)),Xe=await pn(xe),et=new Set,ut=[];Xe.forEach(pt=>{const nt=pt.data();nt.providerId&&!et.has(nt.providerId)&&(et.add(nt.providerId),ut.push({id:nt.providerId,name:nt.provider||"Proveedor desconocido",phone:nt.providerPhone||"No especificado"}))});const Ot=ur(It(Fe,"ratings"),gr("userId","==",x)),Kt=(await pn(Ot)).docs.map(pt=>pt.data().providerId);ut.forEach(pt=>{pt.hasRated=Kt.includes(pt.id)}),ie(ut)}catch(xe){console.error("Error fetching providers:",xe),Ae("Error al cargar proveedores: "+xe.message)}},[x]),Tt=k.useCallback(async(xe,Xe)=>{try{F(ut=>({...ut,profile:!0}));const et=vt(Fe,"users",xe);await Pr(et,{username:Xe,updatedAt:Er()}),c(ut=>({...ut,username:Xe})),Pe("Éxito","Perfil actualizado exitosamente"),Be()}catch(et){console.error("Error al actualizar perfil:",et),Pe("Error",et.message||"Error al actualizar el perfil")}finally{F(et=>({...et,profile:!1}))}},[Pe,Be]),lt=k.useCallback(async(xe,Xe)=>{try{F(et=>({...et,[`rate_${xe}`]:!0})),await tl(It(Fe,"ratings"),{userId:x,providerId:xe,rating:Xe,ratedAt:Er()}),ie(et=>et.map(ut=>ut.id===xe?{...ut,hasRated:!0}:ut)),Pe("Éxito","Calificación enviada exitosamente"),rt()}catch(et){console.error("Error al calificar proveedor:",et),Pe("Error",et.message||"Error al enviar la calificación")}finally{F(et=>({...et,[`rate_${xe}`]:!1}))}},[x,Pe,rt]),Ct=k.useCallback(async xe=>{try{F(ut=>({...ut,[`delete_${xe.id}`]:!0}));const Xe=ur(It(Fe,"ratings"),gr("userId","==",x),gr("providerId","==",xe.id)),et=await pn(Xe);if(et.empty){Pe("Error","No se encontró la calificación para eliminar");return}await za(et.docs[0].ref),ie(ut=>ut.map(Ot=>Ot.id===xe.id?{...Ot,hasRated:!1}:Ot)),ue(xe),Pe("Éxito","Calificación anterior eliminada. Ahora puedes volver a calificar.")}catch(Xe){console.error("Error al eliminar calificación:",Xe),Pe("Error",Xe.message||"Error al eliminar la calificación")}finally{F(Xe=>({...Xe,[`delete_${xe.id}`]:!1}))}},[x,Pe,ue]),ct=k.useCallback(async xe=>{try{F(qt=>({...qt,[`renew_${xe.id}`]:!0}));const Xe=parseFloat(xe.renewalPrice)||parseFloat(xe.price)||0;if(p<Xe){Pe("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const et=parseInt(xe.durationDays)||30,ut=or.now(),Ot=ut.toDate(),Ht=Ot,Kt=new Date(Ht.getTime()+et*24*60*60*1e3),pt=or.fromDate(Kt),nt=vt(Fe,"sales",xe.id);await Pr(nt,{startDate:ut,endDate:pt,renewedAt:ut,status:"completed",updatedAt:Er()});const Lt=vt(Fe,"users",x);await Pr(Lt,{balance:p-Xe}),m(qt=>qt-Xe),j(qt=>qt.map(hr=>hr.id===xe.id?{...hr,startDate:Ht,endDate:Kt,renewedAt:Ot,status:"completed",daysRemaining:et,totalDays:et,timeElapsedPercentage:0}:hr)),Pe("Éxito",`¡Pedido renovado exitosamente! Nueva fecha de vencimiento: ${st(Kt)}`)}catch(Xe){console.error("Error al renovar el pedido:",Xe),Pe("Error","Error al renovar el pedido: "+Xe.message)}finally{F(Xe=>({...Xe,[`renew_${xe.id}`]:!1}))}},[p,x,Pe,st]);k.useEffect(()=>{(async()=>{try{const Xe=ur(It(Fe,"products")),et=await pn(Xe),ut={};et.forEach(Ot=>{ut[Ot.id]=Ot.data()}),V(ut)}catch(Xe){console.error("Error fetching products:",Xe),Ae("Error al cargar productos: "+Xe.message)}})()},[]),k.useEffect(()=>{const xe=dr(vt(Fe,"notifications","adminMessage"),Xe=>{if(Xe.exists()){const et=Xe.data();et.roles&&et.roles.includes("user")?K([{id:Xe.id,...et,timestamp:et.updatedAt?.toDate()}]):K([])}else K([])},Xe=>{console.error("Error in notifications listener:",Xe),Ae("Error al cargar notificaciones: "+Xe.message)});return()=>xe()},[]),k.useEffect(()=>{if(!x){console.log("No userId disponible para fetch affiliates");return}console.log("Iniciando fetch de affiliates para userId:",x);const xe=ur(It(Fe,"users"),gr("referredBy","==",x)),Xe=dr(xe,et=>{console.log(`Affiliates snapshot recibido. Docs length: ${et.docs.length}`);const ut=et.docs.map(Ot=>{const Ht=Ot.data();return console.log(`Affiliate doc: ID=${Ot.id}, referredBy=${Ht.referredBy}, username=${Ht.username}`),{id:Ot.id,username:Ht.username||"Desconocido",email:Ht.email||"No especificado",phone:Ht.phone||"No especificado",createdAt:Ht.createdAt?.toDate?.()||new Date}});console.log("Affiliates procesados:",ut),S(ut)},et=>{console.error("Error fetching affiliates:",et),Ae("Error al cargar afiliados: "+et.message)});return()=>{console.log("Desuscribiendo affiliates listener"),Xe()}},[x]),k.useEffect(()=>{ht()},[ht]);const kr=k.useCallback(async()=>{try{await $h(Xr),bt("/")}catch(xe){console.error("Error al cerrar sesión:",xe),Pe("Error",xe.message||"Error al cerrar sesión")}},[bt,Pe]);k.useEffect(()=>{const xe=Nc(Xr,Xe=>{Xe?(console.log("Auth user loaded:",Xe.uid),v(Xe.uid),h(Xe.email||"No especificado"),I(""),M(!1)):bt("/login")});return()=>xe()},[bt]),k.useEffect(()=>{if(!x)return;console.log("Iniciando fetch de user data para:",x);const xe=vt(Fe,"users",x),Xe=dr(xe,et=>{if(et.exists()){const ut=et.data();console.log("User data loaded:",{username:ut.username,referralCode:ut.referralCode}),c({username:ut.username||"Usuario",phone:ut.phone||""}),h(ut.email||"No especificado"),m(Number(ut.balance)||0),I(ut.referralCode||x.slice(-6).toUpperCase())}else console.error("User doc no existe para:",x),Ae("Usuario no encontrado")},et=>{console.error("Error in user data listener:",et),Ae("Error al cargar datos del usuario: "+et.message)});return()=>Xe()},[x]),k.useEffect(()=>{if(!x)return;const xe=ur(It(Fe,"sales"),gr("customerId","==",x)),Xe=dr(xe,async ut=>{if(ut.empty){j([]),M(!1);return}const Ot=new Date,Ht=7200*60*1e3;for(const pt of ut.docs){const Lt=pt.data().endDate?.toDate?.()||new Date;if(Lt<Ot&&Ot.getTime()-Lt.getTime()>Ht)try{await za(vt(Fe,"sales",pt.id)),console.log(`Deleted expired order: ${pt.id}`)}catch(qt){console.error(`Error deleting order ${pt.id}:`,qt)}}const Kt=ut.docs.map(pt=>{const nt=pt.data(),qt=nt.saleDate?.toDate?.()||nt.createdAt?.toDate?.()||new Date;let hr=nt.startDate?.toDate?.(),xn=hr||qt,yn=!1;hr||(yn=!0);const Pi=nt.durationDays||30;let tn;nt.endDate?tn=nt.endDate.toDate?nt.endDate.toDate():new Date(nt.endDate):(tn=new Date(xn.getTime()+Pi*24*60*60*1e3),yn=!0),yn&&Pr(vt(Fe,"sales",pt.id),{startDate:hr||or.fromDate(qt),endDate:or.fromDate(tn),durationDays:Pi}).catch(J=>{console.error("Error al actualizar startDate/endDate en Firestore:",J)});const Zi=tn.getTime()-xn.getTime(),wr=Ot.getTime()-xn.getTime(),es=tn.getTime()-Ot.getTime(),qr=Math.ceil(Zi/(1e3*60*60*24)),Ri=Math.max(0,Math.ceil(es/(1e3*60*60*24))),hi=Math.ceil(wr/(1e3*60*60*24)),ji=qr>0?hi/qr*100:100,z=P[nt.providerId]?.terms||"No se especificaron términos y condiciones.";return{id:pt.id,productName:nt.productName||"Producto sin nombre",category:nt.type||"netflix",price:parseFloat(nt.price)||0,renewalPrice:parseFloat(nt.renewalPrice)||0,provider:nt.provider||"No especificado",providerId:nt.providerId||"",providerPhone:nt.providerPhone||nt.providerWhatsapp||"51999999999",status:nt.status||"completed",saleDate:qt,startDate:xn,endDate:tn,durationDays:Pi,daysRemaining:Ri,totalDays:qr,timeElapsedPercentage:ji,account:{email:nt.accountDetails?.email||"No especificado",password:nt.accountDetails?.password||"No especificado",profile:nt.accountDetails?.profile||"No especificado",pin:nt.accountDetails?.pin||"No especificado"},client:{customerName:nt.customerName||"Cliente desconocido",email:nt.customerEmail||"No especificado",phone:nt.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BLK-${pt.id.slice(0,8).toUpperCase()}`,termsAndConditions:z,renewable:nt.renewable!==void 0?nt.renewable:!0}}).filter(pt=>{const nt=new Date(pt.endDate);return!(nt<Ot&&Ot.getTime()-nt.getTime()>Ht)});j(Kt),M(!1)},ut=>{console.error("Error al obtener pedidos:",ut),Ae("Error al cargar pedidos: "+ut.message),M(!1)}),et=setInterval(()=>{const ut=new Date,Ot=7200*60*1e3;j(Ht=>Ht.map(Kt=>{const pt=new Date(Kt.endDate).getTime()-new Date(Kt.startDate).getTime(),nt=ut.getTime()-new Date(Kt.startDate).getTime(),Lt=new Date(Kt.endDate).getTime()-ut.getTime(),qt=Math.ceil(pt/(1e3*60*60*24)),hr=Math.max(0,Math.ceil(Lt/(1e3*60*60*24))),xn=Math.ceil(nt/(1e3*60*60*24)),yn=qt>0?xn/qt*100:100;return{...Kt,daysRemaining:hr,totalDays:qt,timeElapsedPercentage:yn}}).filter(Kt=>{const pt=new Date(Kt.endDate);return!(pt<ut&&ut.getTime()-pt.getTime()>Ot)}))},6e4);return()=>{Xe(),clearInterval(et)}},[x,P]),k.useEffect(()=>{if(!x)return;const xe=ur(It(Fe,"pendingTopUps"),gr("userId","==",x)),Xe=dr(xe,et=>{const ut=et.docs.map(Ot=>({id:Ot.id,...Ot.data(),date:Ot.data().requestedAt?.toDate?.()||new Date,amount:parseFloat(Ot.data().amount)||0}));s(ut)},et=>{console.error("Error al obtener recargas:",et),Ae("Error al cargar recargas: "+et.message)});return()=>Xe()},[x]);const ze=k.useCallback(async()=>{try{if(F(Xe=>({...Xe,topUp:!0})),!t||isNaN(t)){Pe("Error","Ingrese un monto válido");return}const xe=parseFloat(t);if(xe<5){Pe("Error","El monto mínimo de recarga es S/ 5.00");return}await tl(It(Fe,"pendingTopUps"),{userId:x,username:a.username,amount:xe,status:"pendiente",requestedAt:Er()}),n(""),Pe("Éxito","Solicitud de recarga enviada correctamente")}catch(xe){console.error("Error al solicitar recarga:",xe),Pe("Error",xe.message||"Error al enviar solicitud de recarga")}finally{F(xe=>({...xe,topUp:!1}))}},[t,x,a.username,Pe]),at=k.useCallback(async xe=>{xe.preventDefault();try{F(Kt=>({...Kt,password:!0}));const Xe=xe.target.password.value,et=xe.target.phone.value,ut=Xr.currentUser,Ot=vt(Fe,"users",x),Ht={};if(Xe){if(Xe.length<6){Pe("Error","La contraseña debe tener al menos 6 caracteres");return}await sb(ut,Xe),Ht.updatedAt=Er()}et&&(Ht.phone=et,Ht.updatedAt=Er()),Object.keys(Ht).length>0&&await Pr(Ot,Ht),c(Kt=>({...Kt,phone:et||Kt.phone})),Pe("Éxito","Cambios guardados correctamente"),xe.target.reset()}catch(Xe){console.error("Error al actualizar los datos:",Xe),Pe("Error",Xe.message||"Error al guardar los cambios")}finally{F(Xe=>({...Xe,password:!1}))}},[x,Pe]);k.useEffect(()=>{const xe=()=>{ke(window.scrollY>300)};return window.addEventListener("scroll",xe),()=>window.removeEventListener("scroll",xe)},[]);const Mt=()=>R?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):he?o.jsxs("div",{className:`bg-${U==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${U==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsx(yc,{className:"mx-auto text-4xl text-red-400 mb-4"}),o.jsx("h3",{className:`text-xl font-bold ${U==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Error"}),o.jsx("p",{className:`text-base ${U==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:he}),o.jsx("button",{onClick:()=>Ae(null),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Aceptar"})]}):o.jsx("div",{className:`bg-${U==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${U==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:(()=>{switch(_){case"inicio":return o.jsx(TG,{userName:a,email:d,balance:p,orders:E,notifications:L,setActivePage:w,formatDate:st});case"notificaciones":return o.jsx(eI,{notifications:L,formatDate:st});case"recargar":return o.jsx(tI,{amount:t,setAmount:n,topUps:i,actionLoading:D,handleTopUpRequest:ze,formatDate:st,showModal:Pe});case"proveedores":return o.jsx(rI,{providers:te,openRateProviderModal:ue,deleteRatingProvider:Ct,theme:U});case"afiliados":return console.log("Rendering AffiliatesSection with:",{referralCode:N,affiliatesLength:H.length}),o.jsx(mte,{referralCode:N,affiliates:H,formatDate:st,theme:U});case"pedidos":return o.jsx(LP,{orders:E,setOrders:j,balance:p,searchQuery:W,setSearchQuery:ee,formatDate:st,handleRenewal:ct,actionLoading:D,theme:U});case"configuracion":return o.jsx(MP,{userName:a,email:d,actionLoading:D,handleUpdatePassword:at,openEditProfileModal:St,handleLogout:kr});case"soporte":return o.jsx(VP,{orders:E,setOrders:j,searchQuery:W,setSearchQuery:ee,formatDate:st,handleRenewal:ct,actionLoading:D,balance:p,theme:U});default:return o.jsxs("div",{className:`bg-${U==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${U==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsx(yc,{className:"mx-auto text-4xl text-red-400 mb-4"}),o.jsx("h3",{className:`text-xl font-bold ${U==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Sección no encontrada"}),o.jsx("p",{className:`text-base ${U==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:"La sección que estás buscando no existe o no está disponible."}),o.jsx("button",{onClick:()=>w("inicio"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Volver al inicio"})]})}})()});return o.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${U==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-50 to-gray-50 text-gray-900"} font-inter relative overflow-x-hidden`,children:[o.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[o.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${U==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),o.jsx("div",{className:"particles",children:[...Array(15)].map((xe,Xe)=>o.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},Xe))})]}),o.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${U==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r overflow-y-auto lg:shadow-md`,children:o.jsxs("div",{className:"p-4 flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("button",{onClick:()=>{bt("/"),e(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),o.jsx("button",{onClick:()=>e(!1),className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:o.jsx(ti,{className:"text-lg"})})]}),o.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${U==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:a.username.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("p",{className:`font-medium ${U==="dark"?"text-white":"text-gray-900"}`,children:a.username}),o.jsx("p",{className:`text-xs ${U==="dark"?"text-gray-400":"text-gray-600"}`,children:"Usuario"})]})]}),o.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Z2},{id:"notificaciones",label:"Notificaciones",icon:xc},{id:"recargar",label:"Recargar saldo",icon:ma},{id:"pedidos",label:"Mis pedidos",icon:gd},{id:"proveedores",label:"Proveedores",icon:vc},{id:"afiliados",label:"Afiliados",icon:wa},{id:"soporte",label:"Soporte",icon:kq},{id:"configuracion",label:"Configuración",icon:Jm}].map(xe=>o.jsxs("button",{onClick:()=>{w(xe.id),e(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${_===xe.id?"bg-blue-100 text-blue-600 border border-blue-300":U==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":_===xe.id?"page":void 0,children:[o.jsx(xe.icon,{className:"text-lg"}),o.jsx("span",{children:xe.label})]},xe.id))}),o.jsx("div",{className:"mt-auto pt-6",children:o.jsxs("button",{onClick:()=>{kr(),e(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${U==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[o.jsx(xd,{className:"text-lg"}),o.jsx("span",{children:"Cerrar Sesión"})]})})]})}),o.jsxs("header",{className:`${U==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md py-4 px-4 sm:px-6 lg:px-8 flex items-center justify-between shadow-md fixed top-0 left-0 right-0 z-50 lg:ml-64`,children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(re.img,{src:Dc,alt:"BlackStreaming logo",className:`h-10 w-10 rounded-full border cursor-pointer ${U==="dark"?"border-gray-700/50":"border-gray-300"} shadow-sm lg:hidden`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy",onClick:()=>bt("/")}),o.jsx("button",{onClick:()=>{dt?bt("/"):w("inicio")},className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300 cursor-pointer","aria-label":dt?"Go to BlackStreaming homepage":"Ir al inicio del dashboard",children:"BlackStreaming"})]}),o.jsx("div",{className:"flex-1 mx-4 max-w-lg",children:o.jsxs("div",{className:"relative group",children:[o.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:W,onChange:xe=>ee(xe.target.value),className:`w-full py-2.5 px-5 ${U==="dark"?"bg-gray-800/50 border-gray-600/50 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-md`,"aria-label":"Search orders",onKeyDown:xe=>xe.key==="Enter"&&w("pedidos")}),o.jsx("button",{onClick:()=>w("pedidos"),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${U==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Search",children:o.jsx(md,{size:18})})]})}),o.jsxs("nav",{className:"flex items-center space-x-4 relative",children:[o.jsx("button",{onClick:tr,className:`p-2 rounded-full ${U==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Switch to ${U==="dark"?"light":"dark"} theme`,children:U==="dark"?o.jsx(jc,{size:20}):o.jsx(Rc,{size:20})}),o.jsxs("button",{onClick:()=>Ke(!0),className:`p-2 rounded-full relative ${U==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Notifications (${L.length} new)`,children:[o.jsx(xc,{size:20}),L.length>0&&o.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:L.length})]}),o.jsx("button",{className:`lg:hidden p-2 rounded-full ${U==="dark"?"hover:bg-gray-700/50":"hover:bg-gray-100"} transition-all duration-300`,onClick:()=>e(!r),"aria-label":"Toggle mobile menu","aria-expanded":r,children:o.jsx(Zg,{size:20,className:U==="dark"?"text-gray-300":"text-gray-600"})}),o.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o.jsx("div",{className:"relative",children:o.jsxs("button",{className:`flex items-center space-x-2 ${U==="dark"?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-md transition-all duration-300`,"aria-label":"User menu",children:[o.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:a.username.charAt(0).toUpperCase()}),o.jsx("span",{className:`text-sm font-semibold ${U==="dark"?"text-gray-200":"text-gray-800"}`,children:a.username})]})})})]})]}),o.jsx(Vt,{children:Ee&&o.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>Ke(!1),role:"dialog","aria-labelledby":"notifications-title",children:o.jsxs(re.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 lg:max-w-lg ${U==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${U==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:xe=>xe.stopPropagation(),children:[o.jsx("button",{onClick:()=>Ke(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notifications",children:o.jsx(ti,{size:20})}),o.jsx("h2",{id:"notifications-title",className:`text-xl font-bold mb-4 ${U==="dark"?"text-white":"text-gray-900"}`,children:"Notificaciones"}),L.length>0?L.map(xe=>o.jsxs("div",{className:`p-4 mb-2 rounded-md ${U==="dark"?"bg-gray-800/50":"bg-gray-100/80"} border-l-4 ${U==="dark"?"border-blue-500/50":"border-blue-300/50"}`,children:[o.jsx("h3",{className:`font-semibold ${U==="dark"?"text-gray-200":"text-gray-800"}`,children:xe.title||"Nueva Notificación"}),o.jsx("p",{className:`text-sm ${U==="dark"?"text-gray-300":"text-gray-700"} mt-1`,children:xe.message}),xe.roles&&xe.roles.length>0&&o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Roles: ",xe.roles.join(", ")]}),xe.timestamp&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:st(xe.timestamp)})]},xe.id)):o.jsx("p",{className:`text-center ${U==="dark"?"text-gray-400":"text-gray-600"} mt-4`,children:"No hay notificaciones."})]})})}),o.jsx("main",{className:"lg:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start",children:Mt()}),o.jsxs("footer",{className:`${U==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md px-4 sm:px-6 lg:px-8 py-12 text-center relative z-10 lg:ml-64 max-w-6xl mx-auto rounded-2xl border ${U==="dark"?"border-gray-700/50":"border-gray-300"} mt-8 shadow-md`,children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-4",children:"BlackStreaming"}),o.jsxs("p",{className:`text-base sm:text-lg ${U==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["Todos los derechos reservados. Desarrollado por"," ",o.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Saiph"}),"."]}),o.jsxs("div",{className:"flex justify-center space-x-6 sm:space-x-8 mb-6",children:[o.jsx("a",{href:"https://twitter.com",className:`${U==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Twitter",children:o.jsx(Pc,{size:28})}),o.jsx("a",{href:"https://instagram.com",className:`${U==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Instagram",children:o.jsx(Ic,{size:28})}),o.jsx("a",{href:"https://facebook.com",className:`${U==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Facebook",children:o.jsx(Cc,{size:28})})]}),o.jsxs("div",{className:"flex justify-center space-x-4 sm:space-x-6",children:[o.jsx("a",{href:"#",className:`text-sm ${U==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Privacy Policy",children:"Política de Privacidad"}),o.jsx("a",{href:"#",className:`text-sm ${U==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Terms of Service",children:"Términos de Servicio"}),o.jsx("a",{href:"#",className:`text-sm ${U==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Contact Us",children:"Contáctanos"})]})]}),o.jsxs("p",{className:`text-sm ${U==="dark"?"text-gray-500":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Hecho con pasión."]})]}),o.jsx(Vt,{children:Ce&&o.jsx(re.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Et,className:"fixed bottom-6 right-6 bg-blue-600/90 backdrop-blur-md p-3 rounded-full hover:bg-blue-700/95 shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 lg:bottom-8 lg:right-8","aria-label":"Back to top",children:o.jsx(Jg,{size:20})})}),o.jsx(EG,{isOpen:Oe.isOpen,title:Oe.title,message:Oe.message,onClose:Qt,theme:U}),we.isOpen&&o.jsx(J6,{isOpen:we.isOpen,user:we.user,onClose:Be,onSave:Tt,theme:U}),Ne.isOpen&&o.jsx(Z6,{isOpen:Ne.isOpen,provider:Ne.provider,onClose:rt,onRate:lt,theme:U}),r&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 lg:hidden",onClick:()=>e(!1),"aria-hidden":"true"})]})};$P.propTypes={};const xte=({isOpen:r,message:e,title:t,onClose:n})=>r?o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:t}),o.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-all duration-300",children:o.jsx(Qi,{size:20})})]}),o.jsx("p",{className:"text-gray-300 mb-6",children:e}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:n,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,yte=({isOpen:r,user:e,onClose:t,onSave:n})=>{const[i,s]=k.useState(e?.username||""),[a,c]=k.useState(""),d=h=>{if(h.preventDefault(),c(""),!i.trim()){c("El nombre de usuario no puede estar vacío.");return}n(e.id,i.trim())};return r?o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Perfil"}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-all duration-300",children:o.jsx(Qi,{size:20})})]}),o.jsxs("form",{onSubmit:d,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),o.jsx("input",{type:"text",value:i,onChange:h=>s(h.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0}),a&&o.jsx("p",{className:"text-red-400 text-sm mt-2",children:a})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},vte=()=>{const[r,e]=k.useState(!1),[t,n]=k.useState("inicio"),[i,s]=k.useState(""),[a,c]=k.useState(""),[d,h]=k.useState(""),[p,m]=k.useState([]),[x,v]=k.useState(0),[_,w]=k.useState(0),[E,j]=k.useState(null),[P,V]=k.useState(!0),[L,K]=k.useState({}),[H,S]=k.useState(null),[N,I]=k.useState([]),[R,M]=k.useState(!1),[D,F]=k.useState(""),[he,Ae]=k.useState(""),[Oe,De]=k.useState([]),[we,_e]=k.useState([]),[Ne,ae]=k.useState({}),[W,ee]=k.useState([]),[te,ie]=k.useState({isOpen:!1,message:"",title:""}),[U,be]=k.useState({isOpen:!1,user:null}),Ce=Gs(),ke=(ue,rt)=>{ie({isOpen:!0,title:ue,message:rt})},Ee=()=>{ie({isOpen:!1,message:"",title:""})},Ke=ue=>{be({isOpen:!0,user:ue})},dt=()=>{be({isOpen:!1,user:null})},zt=async(ue,rt)=>{try{K(Tt=>({...Tt,profile:!0}));const st=vt(Fe,"users",ue),ht=vt(Fe,"affiliates",ue);await Pr(st,{username:rt,updatedAt:Er()}),await Pr(ht,{username:rt,updatedAt:Er()}),s(rt),ke("Éxito","Perfil actualizado exitosamente"),dt()}catch(st){console.error("Error al actualizar perfil:",st),ke("Error",st.message||"Error al actualizar el perfil")}finally{K(st=>({...st,profile:!1}))}};k.useEffect(()=>{const ue=Nc(Xr,rt=>{rt?(j(rt.uid),c(rt.email||"No especificado"),V(!1)):Ce("/login")});return()=>ue()},[Ce]),k.useEffect(()=>{(async()=>{try{const rt=ur(It(Fe,"products")),st=await pn(rt),ht={};st.forEach(Tt=>{ht[Tt.id]=Tt.data()}),ae(ht)}catch(rt){console.error("Error fetching products:",rt),S("Error al cargar productos")}})()},[]),k.useEffect(()=>{dr(vt(Fe,"notifications","adminMessage"),st=>{if(st.exists()){const ht=st.data();ht.roles&&ht.roles.includes("affiliate")?ee([{id:st.id,...ht}]):ee([])}else ee([])})},[]),k.useEffect(()=>{(async()=>{if(E)try{const rt=vt(Fe,"users",E),st=await ol(rt);if(st.exists()){const lt=st.data();s(lt.username||"Usuario"),w(Number(lt.balance)||0)}const ht=vt(Fe,"affiliates",E),Tt=await ol(ht);if(Tt.exists()){const lt=Tt.data();h(lt.affiliateCode||""),v(Number(lt.earnings)||0)}else{const lt=`AFF-${Math.random().toString(36).substring(2,8).toUpperCase()}`;await va(ht,{username:i||"Nuevo Afiliado",email:a,affiliateCode:lt,earnings:0,createdAt:Er(),updatedAt:Er()}),h(lt)}}catch(rt){console.error("Error al manejar datos:",rt),S("Error al cargar datos")}finally{V(!1)}})()},[E,a,i]),k.useEffect(()=>{if(!E)return;(()=>{const rt=ur(It(Fe,"pendingTopUps"),gr("userId","==",E));return dr(rt,ht=>{const Tt=ht.docs.map(lt=>({id:lt.id,...lt.data(),date:lt.data().requestedAt?.toDate?.()||new Date,amount:parseFloat(lt.data().amount)||0}));De(Tt)},ht=>{console.error("Error al obtener recargas:",ht),S("Error al cargar recargas")})})()},[E]),k.useEffect(()=>{if(!d)return;const ue=ur(It(Fe,"users"),gr("referrerCode","==",d),c2("createdAt","desc"),uV(5)),rt=dr(ue,st=>{const ht=st.docs.map(Tt=>({id:Tt.id,...Tt.data(),joinDate:Tt.data().createdAt?.toDate()||new Date}));I(ht)});return()=>rt()},[d]),k.useEffect(()=>{if(!d)return;const ue=ur(It(Fe,"users"),gr("referrerCode","==",d)),rt=dr(ue,st=>{const ht=st.docs.map(Tt=>({id:Tt.id,...Tt.data(),joinDate:Tt.data().createdAt?.toDate()||new Date}));m(ht)});return()=>rt()},[d]),k.useEffect(()=>{if(!E)return;(()=>{const rt=ur(It(Fe,"sales"),gr("customerId","==",E)),st=dr(rt,Tt=>{if(Tt.empty){_e([]),V(!1);return}const lt=Tt.docs.map(Ct=>{const ct=Ct.data(),ze=ct.saleDate?.toDate?.()||ct.createdAt?.toDate?.()||new Date;let at=ct.startDate?.toDate?.(),Mt=at||ze,xe=!1;at||(xe=!0);const Xe=ct.durationDays||30;let et;ct.endDate?et=new Date(ct.endDate):(et=new Date(Mt.getTime()+Xe*24*60*60*1e3),xe=!0),xe&&Pr(vt(Fe,"sales",Ct.id),{startDate:at||or.fromDate(ze),endDate:et.toISOString(),durationDays:Xe}).catch(xn=>{console.error("Error al actualizar startDate/endDate en Firestore:",xn)});const ut=new Date,Ot=et.getTime()-Mt.getTime(),Ht=ut.getTime()-Mt.getTime(),Kt=et.getTime()-ut.getTime(),pt=Math.ceil(Ot/(1e3*60*60*24)),nt=Math.max(0,Math.ceil(Kt/(1e3*60*60*24))),Lt=Math.ceil(Ht/(1e3*60*60*24)),qt=pt>0?Lt/pt*100:100,hr=Ne[ct.providerId]?.terms||"No se especificaron términos y condiciones.";return{id:Ct.id,productName:ct.productName||"Producto sin nombre",category:ct.type||"netflix",price:parseFloat(ct.price)||0,provider:ct.provider||"No especificado",providerId:ct.providerId||"",providerPhone:ct.providerPhone||ct.providerWhatsapp||"51999999999",status:ct.status||"completed",saleDate:ze,startDate:Mt,endDate:et,durationDays:Xe,daysRemaining:nt,totalDays:pt,timeElapsedPercentage:qt,account:{email:ct.accountDetails?.email||"No especificado",password:ct.accountDetails?.password||"No especificado",profile:ct.accountDetails?.profile||"No especificado",pin:ct.accountDetails?.pin||"No especificado"},client:{name:ct.customerName||"Cliente desconocido",email:ct.customerEmail||"No especificado",phone:ct.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BS-${Ct.id.slice(0,8).toUpperCase()}`,termsAndConditions:hr,renewable:ct.renewable!==void 0?ct.renewable:!0}});_e(lt),V(!1)},Tt=>{console.error("Error al obtener pedidos:",Tt),S("Error al cargar pedidos: "+Tt.message),V(!1)}),ht=setInterval(()=>{_e(Tt=>Tt.map(lt=>{const Ct=new Date,ct=new Date(lt.endDate).getTime()-new Date(lt.startDate).getTime(),kr=Ct.getTime()-new Date(lt.startDate).getTime(),ze=new Date(lt.endDate).getTime()-Ct.getTime(),at=Math.ceil(ct/(1e3*60*60*24)),Mt=Math.max(0,Math.ceil(ze/(1e3*60*60*24))),xe=Math.ceil(kr/(1e3*60*60*24)),Xe=at>0?xe/at*100:100;return{...lt,daysRemaining:Mt,totalDays:at,timeElapsedPercentage:Xe}}))},6e4);return()=>{st(),clearInterval(ht)}})()},[E,Ne]);const bt=async()=>{try{if(K(rt=>({...rt,topUp:!0})),!he||isNaN(he)){ke("Error","Ingrese un monto válido");return}const ue=parseFloat(he);if(ue<10){ke("Error","El monto mínimo de recarga es S/ 10.00");return}await tl(It(Fe,"pendingTopUps"),{userId:E,username:i,amount:ue,status:"pendiente",requestedAt:Er(),processed:!1}),Ae(""),ke("Éxito","Solicitud de recarga enviada correctamente")}catch(ue){console.error("Error al solicitar recarga:",ue),ke("Error",ue.message||"Error al enviar solicitud de recarga")}finally{K(ue=>({...ue,topUp:!1}))}},tr=async ue=>{try{K(at=>({...at,[`renew_${ue.id}`]:!0}));const rt=parseFloat(ue.price)||0;if(_<rt){ke("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const st=parseInt(ue.durationDays)||30,ht=or.now(),Tt=ht.toDate(),lt=new Date(Tt.getTime()+st*24*60*60*1e3),Ct=lt.toISOString(),ct={customerId:E,customerName:ue.client?.name||"Cliente desconocido",customerEmail:ue.client?.email||a,phoneNumber:ue.client?.phone||"No especificado",productName:ue.productName||"Producto sin nombre",type:ue.category||"netflix",price:rt,accountDetails:{email:ue.account?.email||"No especificado",password:ue.account?.password||"No especificado",profile:ue.account?.profile||"No especificado",pin:ue.account?.pin||"No especificado"},provider:ue.provider||"Proveedor desconocido",providerId:ue.providerId||"",providerPhone:ue.providerPhone||ue.providerWhatsapp||"51999999999",status:"completed",createdAt:ht,saleDate:ht,startDate:ht,endDate:Ct,durationDays:st,renewedAt:ht,renewable:ue.renewable!==void 0?ue.renewable:!0},kr=await tl(It(Fe,"sales"),ct),ze=vt(Fe,"users",E);await Pr(ze,{balance:_-rt}),w(at=>at-rt),_e(at=>[...at,{...ct,id:kr.id,saleDate:Tt,startDate:Tt,endDate:lt,account:ct.accountDetails,client:{name:ct.customerName,email:ct.customerEmail,phone:ct.phoneNumber},orderId:`BS-${kr.id.slice(0,8).toUpperCase()}`,renewable:ct.renewable,daysRemaining:st,totalDays:st,timeElapsedPercentage:0,termsAndConditions:Ne[ct.providerId]?.terms||"No se especificaron términos y condiciones."}]),ke("Éxito","¡Pedido renovado exitosamente!")}catch(rt){console.error("Error al renovar el pedido:",rt),ke("Error","Error al renovar el pedido: "+rt.message)}finally{K(rt=>({...rt,[`renew_${ue.id}`]:!1}))}},Et=()=>{d&&(navigator.clipboard.writeText(d),M(!0),setTimeout(()=>M(!1),2e3))},Pe=ue=>{if(!ue)return"No especificada";try{const rt=ue instanceof Date?ue:new Date(ue);return isNaN(rt.getTime())?"Fecha inválida":rt.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},Qt=async()=>{try{await $h(Xr),Ce("/")}catch(ue){console.error("Error al cerrar sesión:",ue),ke("Error",ue.message||"Error al cerrar sesión")}},St=async ue=>{ue.preventDefault();try{K(ht=>({...ht,password:!0}));const rt=ue.target.password.value;if(!rt){ke("Error","Por favor, ingrese una nueva contraseña");return}if(rt.length<6){ke("Error","La contraseña debe tener al menos 6 caracteres");return}const st=Xr.currentUser;st&&(await sb(st,rt),ke("Éxito","Contraseña actualizada correctamente"),ue.target.reset())}catch(rt){console.error("Error al actualizar la contraseña:",rt),ke("Error",rt.message||"Error al actualizar la contraseña")}finally{K(rt=>({...rt,password:!1}))}},Be=()=>{if(P)return o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(H)return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[o.jsx(Gi,{className:"mx-auto text-4xl text-red-400 mb-4"}),o.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),o.jsx("p",{className:"text-gray-300 mb-4",children:H}),o.jsx("button",{onClick:()=>S(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(t){case"inicio":return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[o.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",o.jsx("span",{className:"text-cyan-400",children:i})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[o.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),o.jsxs("div",{className:"space-y-2 text-gray-300",children:[o.jsxs("p",{className:"flex items-center",children:[o.jsx(ki,{className:"mr-2 text-cyan-400"}),o.jsx("span",{children:i})]}),o.jsxs("p",{className:"flex items-center",children:[o.jsx(Ur,{className:"mr-2 text-cyan-400"}),o.jsx("span",{children:a})]})]})]}),o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[o.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Saldo disponible"}),o.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",_.toFixed(2)]}),o.jsx("button",{onClick:()=>n("recargas"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Recargar"})]}),o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[o.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Ganancias totales"}),o.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",x.toFixed(2)]}),o.jsx("button",{onClick:()=>n("ganancias"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Ver ganancias"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-white",children:"Tu código de afiliado"}),o.jsxs("button",{onClick:Et,disabled:!d,className:`flex items-center gap-2 px-3 py-1 rounded-xl transition-all duration-300 ${d?"bg-cyan-900/80 text-cyan-400 hover:bg-cyan-800/80":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[o.jsx($6,{size:16}),R?"¡Copiado!":"Copiar"]})]}),o.jsx("div",{className:"bg-gray-800/50 p-4 rounded-xl mb-6 border border-gray-600/50",children:o.jsx("p",{className:"text-2xl font-bold text-center tracking-wider text-white",children:d||"Generando código..."})}),o.jsx("p",{className:"text-gray-300 mb-4",children:"Comparte este código con tus amigos para que se registren y ganes comisiones por sus compras."}),o.jsxs("div",{className:"bg-cyan-900/30 p-4 rounded-xl border border-cyan-800/50",children:[o.jsx("h4",{className:"font-medium text-cyan-400 mb-2",children:"Enlace de afiliado:"}),o.jsx("p",{className:"text-sm bg-gray-800/50 p-2 rounded-xl border border-gray-600/50 overflow-x-auto text-gray-300",children:d?`https://blackkstreaming.com/register?ref=${d}`:"Generando enlace..."})]})]}),o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[o.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Referidos recientes"}),N.length>0?N.map(ue=>o.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("p",{className:"font-medium text-white",children:ue.username||"Sin nombre"}),o.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-green-900/80 text-green-400",children:"Activo"})]}),o.jsxs("p",{className:"text-sm text-gray-400",children:["Unido: ",Pe(ue.joinDate)]})]},ue.id)):o.jsx("p",{className:"text-gray-400 py-2",children:"No tienes referidos recientes"}),N.length>0&&o.jsx("button",{onClick:()=>n("referidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los referidos"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[o.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pedidos recientes"}),we.length>0?we.slice(0,3).map(ue=>{const rt=new Date(ue.endDate)>new Date&&ue.status==="completed",st=ue.status==="pending";return o.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("p",{className:"font-medium text-white",children:ue.productName}),o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${st?"bg-yellow-900/80 text-yellow-400":rt?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:st?"A pedido":rt?"Activo":"Expirado"})]}),o.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",Pe(ue.endDate)]})]},ue.id)}):o.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),we.length>3&&o.jsx("button",{onClick:()=>n("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]}),o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[o.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Notificaciones"}),W.length>0?W.map(ue=>o.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[o.jsx("p",{className:"text-gray-300",children:ue.message}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:Pe(ue.updatedAt)})]},ue.id)):o.jsx("p",{className:"text-gray-400 py-2",children:"No hay notificaciones"})]})]})]});case"notificaciones":return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[o.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Notificaciones"}),W.length>0?o.jsx("div",{className:"space-y-4",children:W.map(ue=>o.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[o.jsx("p",{className:"text-gray-300",children:ue.message}),o.jsx("p",{className:"text-xs text-gray-400 mt-2",children:Pe(ue.updatedAt)})]},ue.id))}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Th,{className:"mx-auto text-4xl text-gray-400 mb-3"}),o.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),o.jsx("p",{className:"text-gray-400",children:"No tienes mensajes nuevos"})]})]});case"recargas":return o.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[o.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargar saldo"}),o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),o.jsx("input",{type:"number",value:he,onChange:ue=>Ae(ue.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Mínimo S/ 10.00",min:"10",step:"0.01"})]}),o.jsx("button",{onClick:bt,disabled:L.topUp||!he||parseFloat(he)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${he&&parseFloat(he)>=10&&!L.topUp?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:L.topUp?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"}),o.jsxs("div",{className:"mt-6 bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[o.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[o.jsx(Ki,{className:"mr-2"})," ¿Cómo realizar tu recarga?"]}),o.jsxs("p",{className:"text-gray-300 mb-2",children:["Realiza tu pago mediante ",o.jsx("span",{className:"font-semibold text-white",children:"Yape"})," al número:"]}),o.jsx("p",{className:"text-xl font-bold text-white mb-2",children:"📱 931757531"}),o.jsx("p",{className:"text-gray-300 mb-3",children:"Una vez realizado el pago, por favor contáctanos vía WhatsApp al mismo número para confirmar tu recarga."}),o.jsxs("a",{href:`https://wa.me/51931757531?text=${encodeURIComponent("Hola 😊, he realizado una recarga a través de Yape. Por favor, confirma mi pago.")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300",children:[o.jsx(Ur,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]})]}),o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[o.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de recargas"}),Oe.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[o.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acción"})]})}),o.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:Oe.map(ue=>{const rt=encodeURIComponent(`Hola, he pedido una recarga de S/ ${ue.amount?.toFixed(2)||"0.00"} con el nombre ${i}. Adjunto la captura de mi pago, por favor.`);return o.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",ue.amount?.toFixed(2)||"0.00"]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ue.status==="aprobado"?"bg-green-900/80 text-green-400":ue.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:ue.status})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:Pe(ue.date)}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:ue.status==="pendiente"?o.jsxs("a",{href:`https://wa.me/51940505969?text=${rt}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 text-sm",children:[o.jsx(Ur,{className:"mr-2"})," Enviar captura"]}):o.jsx("span",{className:"text-gray-400 text-sm",children:"—"})})]},ue.id)})})]})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Ki,{className:"mx-auto text-4xl text-gray-400 mb-3"}),o.jsx("p",{className:"text-gray-400",children:"No hay recargas registradas"})]})]})]});case"pedidos":return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:D,onChange:ue=>F(ue.target.value)}),o.jsx(ga,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),we.length>0?o.jsx("div",{className:"space-y-6",children:we.filter(ue=>(ue.productName||"").toLowerCase().includes(D.toLowerCase())||(ue.orderId||"").toLowerCase().includes(D.toLowerCase())).map(ue=>{const rt=parseFloat(ue.price)||0,st=new Date(ue.endDate)>new Date&&ue.status==="completed",ht=ue.status==="pending",Tt=ue.daysRemaining||0,lt=ue.timeElapsedPercentage||0;let Ct="bg-green-400";lt>70&&lt<=90?Ct="bg-yellow-400":lt>90&&(Ct="bg-red-400");const ct=ht?o.jsx(Rd,{className:"text-yellow-400"}):st?o.jsx(yd,{className:"text-green-400"}):o.jsx(Gi,{className:"text-red-400"}),kr=encodeURIComponent(`*Consulta sobre Pedido - ${ue.productName||"Sin nombre"}*

*N° Pedido:* ${ue.orderId||"No especificado"}
*Producto:* ${ue.productName||"No especificado"}
*Precio:* S/ ${rt.toFixed(2)}
*Estado:* ${ht?"A pedido":st?"Activo":"Expirado"}
*Fecha de Inicio:* ${Pe(ue.startDate)}
*Fecha de Vencimiento:* ${Pe(ue.endDate)}

`+(ht?`Hola 😊, he comprado un producto a pedido (${ue.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),ze=encodeURIComponent(`😊 Estimado/a ${ue.client?.name||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${ue.productName||"Sin nombre"}.
🔢 Código: ${ue.orderId||"No especificado"}
`+(ht?"":`📧 Correo: ${ue.account?.email||"No especificado"}
🔐 Contraseña: ${ue.account?.password||"No especificado"}
👤 Perfil: ${ue.account?.profile||"No especificado"}
📌 PIN: ${ue.account?.pin||"No especificado"}
`)+`🌐 URL: Sin URL
📅 Fecha de creación: ${Pe(ue.startDate)}
📅 Fecha de vencimiento: ${Pe(ue.endDate)}
🏁 Días contratados: ${ue.durationDays||30} días.

`+(ht?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:"")+`*Términos y Condiciones:*
${ue.termsAndConditions||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),at=ue.providerPhone?ue.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999";return o.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[ct,o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-white",children:ue.productName||"Producto sin nombre"}),ue.orderId&&o.jsxs("p",{className:"text-xs text-gray-400",children:["N° Pedido: ",ue.orderId]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",rt.toFixed(2)]}),o.jsx("p",{className:`text-xs font-medium ${ht?"text-yellow-400":Ct.replace("bg-","text-")}`,children:ht?"Pendiente de activación":`${Tt} día${Tt===1?"":"s"} restante${Tt===1?"":"s"}`})]})]}),o.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2.5",children:o.jsx("div",{className:`h-2.5 rounded-full ${Ct}`,style:{width:`${Math.min(lt,100)}%`}})}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[lt.toFixed(0),"% completado"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:[o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[o.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[o.jsx(ki,{className:"mr-2"})," Detalles de la Cuenta"]}),o.jsx("div",{className:"space-y-2 text-gray-300",children:ht?o.jsxs(o.Fragment,{children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Usuario:"}),o.jsx("span",{className:"block text-white",children:"Por completar"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),o.jsx("span",{className:"block text-white",children:"Por completar"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),o.jsx("span",{className:"block text-white",children:"Por completar"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),o.jsx("span",{className:"block text-white",children:"Por completar"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),o.jsx("span",{className:"block text-white break-all",children:ue.account?.email||"No especificado"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),o.jsx("span",{className:"block text-white break-all",children:ue.account?.password||"No especificado"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),o.jsx("span",{className:"block text-white",children:ue.account?.profile||"No especificado"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),o.jsx("span",{className:"block text-white",children:ue.account?.pin||"No especificado"})]})]})})]}),o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[o.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[o.jsx(U6,{className:"mr-2"})," Información del Pedido"]}),o.jsxs("div",{className:"space-y-2 text-gray-300",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),o.jsx("span",{className:"block text-white",children:ue.provider||"No especificado"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono del Proveedor:"}),o.jsx("span",{className:"block text-white",children:ue.providerPhone||"No especificado"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Estado:"}),o.jsx("span",{className:`block px-2 py-1 text-xs rounded-full ${ht?"bg-yellow-900/80 text-yellow-400":st?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:ht?"A pedido":st?"Activo":"Expirado"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Método de Pago:"}),o.jsx("span",{className:"block text-white",children:"BlackStreaming"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de inicio:"}),o.jsx("span",{className:"block text-white",children:Pe(ue.startDate)})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de vencimiento:"}),o.jsx("span",{className:"block text-white",children:Pe(ue.endDate)})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Días restantes:"}),o.jsx("span",{className:`block ${Ct.replace("bg-","text-")}`,children:Tt})]})]})]}),o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[o.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[o.jsx(ki,{className:"mr-2"})," Información del Cliente"]}),o.jsxs("div",{className:"space-y-2 text-gray-300",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Nombre:"}),o.jsx("span",{className:"block text-white",children:ue.client?.name||"No especificado"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono:"}),o.jsx("span",{className:"block text-white",children:ue.client?.phone||"No especificado"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),o.jsx("span",{className:"block text-white",children:ue.client?.email||"No especificado"})]})]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsxs("a",{href:`https://wa.me/51${at}?text=${kr}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[o.jsx(Ur,{size:18})," Contactar Proveedor"]}),ue.renewable&&o.jsx("button",{onClick:()=>tr(ue),disabled:L[`renew_${ue.id}`],className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${L[`renew_${ue.id}`]?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 text-white"}`,children:L[`renew_${ue.id}`]?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):o.jsxs(o.Fragment,{children:[o.jsx(F1,{size:18})," Renovar Pedido"]})}),ue.client?.phone&&o.jsxs("a",{href:`https://wa.me/${ue.client.phone.replace(/^\+/,"")}?text=${ze}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[o.jsx(Ur,{size:18})," Contactar Cliente"]})]})]})]},ue.id)})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(bc,{className:"mx-auto text-4xl text-gray-400 mb-3"}),o.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes pedidos registrados"}),o.jsx("p",{className:"text-gray-400",children:"Realiza tu primer pedido en nuestra tienda"})]})]});case"referidos":return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Todos tus referidos (",p.length,")"]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"Buscar referidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:D,onChange:ue=>F(ue.target.value)}),o.jsx(ga,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),p.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[o.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha de registro"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),o.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:p.filter(ue=>{const rt=ue.username||"",st=ue.email||"";return rt.toLowerCase().includes(D.toLowerCase())||st.toLowerCase().includes(D.toLowerCase())}).map(ue=>o.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:ue.username||"Sin nombre"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:ue.email||"Sin email"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:ue.joinDate?Pe(ue.joinDate):"No especificada"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/80 text-green-400",children:ue.status||"Activo"})})]},ue.id))})]})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(vd,{className:"mx-auto text-4xl text-gray-400 mb-3"}),o.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes referidos aún"}),o.jsx("p",{className:"text-gray-400",children:"Comparte tu código de afiliado para empezar a ganar comisiones"})]})]});case"ganancias":return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[o.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Reporte de ganancias"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[o.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias hoy"}),o.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),o.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde ayer"})]}),o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[o.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias esta semana"}),o.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),o.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde la semana pasada"})]}),o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[o.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias totales"}),o.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",x.toFixed(2)]}),o.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[p.length," referidos"]})]})]}),o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(AN,{className:"mr-2 text-cyan-400"})," Historial de comisiones"]}),p.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[o.jsx("thead",{className:"bg-gray-800/50 backdrop-blur-sm",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Referido"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Origen"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),o.jsx("tbody",{className:"bg-gray-700/50 divide-y divide-gray-600/50",children:p.map(ue=>o.jsxs("tr",{className:"hover:bg-gray-600/50 transition-all duration-300",children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:ue.username||"Usuario sin nombre"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:ue.joinDate?Pe(ue.joinDate):"No especificada"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:"S/ 0.00"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:"Registro"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-900/80 text-yellow-400",children:"Pendiente"})})]},ue.id))})]})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Ki,{className:"mx-auto text-4xl text-gray-400 mb-3"}),o.jsx("p",{className:"text-gray-400",children:"No hay comisiones registradas"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gana comisiones cuando tus referidos realicen compras"})]})]})]});case"configuracion":return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[o.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),o.jsxs("form",{onSubmit:St,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"text",value:i,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"}),o.jsx("button",{type:"button",onClick:()=>Ke({id:E,username:i}),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300",title:"Editar Nombre",children:o.jsx(Rq,{size:16})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),o.jsx("input",{type:"email",value:a,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),o.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),o.jsx("button",{type:"submit",disabled:L.password,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-cyan-800",children:L.password?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),o.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:o.jsxs("button",{onClick:Qt,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[o.jsx(eg,{})," Cerrar sesión"]})})]});default:return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[o.jsx(Gi,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),o.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),o.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),o.jsx("button",{onClick:()=>n("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[o.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:o.jsx("button",{onClick:()=>e(!r),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:o.jsx(Fq,{className:"text-xl"})})}),o.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:o.jsxs("div",{className:"p-4 flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),o.jsx("button",{onClick:()=>e(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:o.jsx(Qi,{className:"text-lg"})})]}),o.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-white",children:i}),o.jsx("p",{className:"text-xs text-gray-400",children:"Afiliador"})]})]}),o.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:jq},{id:"notificaciones",label:"Notificaciones",icon:Th},{id:"recargas",label:"Recargas",icon:Ki},{id:"pedidos",label:"Pedidos",icon:bc},{id:"referidos",label:"Referidos",icon:vd},{id:"ganancias",label:"Ganancias",icon:AN},{id:"configuracion",label:"Configuración",icon:q6}].map(ue=>o.jsxs("button",{onClick:()=>{n(ue.id),e(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${t===ue.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[o.jsx(ue.icon,{className:"text-lg"}),o.jsx("span",{children:ue.label})]},ue.id))}),o.jsx("div",{className:"mt-auto pt-6",children:o.jsxs("button",{onClick:Qt,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[o.jsx(eg,{className:"text-lg"}),o.jsx("span",{children:"Cerrar Sesión"})]})})]})}),o.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:Be()}),o.jsx(xte,{isOpen:te.isOpen,title:te.title,message:te.message,onClose:Ee}),o.jsx(yte,{isOpen:U.isOpen,user:U.user,onClose:dt,onSave:zt}),r&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>e(!1)})]})},bte=({isOpen:r,message:e,title:t,onClose:n})=>r?o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:t}),o.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-all duration-300",children:o.jsx(Qi,{size:20})})]}),o.jsx("p",{className:"text-gray-300 mb-6",children:e}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:n,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,BP=({username:r="Usuario",products:e=[],orders:t=[],providerBalance:n=0,balanceLoading:i=!1,totalStock:s=0,totalEarnings:a=0,isAdmin:c=!1,email:d="",notifications:h=[],setActiveSection:p=()=>{},formatDate:m=v=>new Date(v).toLocaleDateString(),theme:x="dark"})=>{const v=x==="dark",_={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},w={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return o.jsxs(re.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${v?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:_,initial:"hidden",animate:"visible",children:[o.jsxs(re.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-8 bg-clip-text text-transparent bg-gradient-to-r ${v?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"} text-center`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:["Bienvenido, ",o.jsx("span",{className:"text-red-400",children:r})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${v?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:w,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${v?"text-blue-400":"text-blue-600"}`,children:[o.jsx(rw,{size:20}),"Inventario"]}),o.jsx("p",{className:`text-4xl font-bold ${v?"text-white":"text-gray-900"} mb-2`,children:e.length}),o.jsx("p",{className:`text-sm ${v?"text-gray-400":"text-gray-600"} mb-1`,children:"Productos registrados"}),o.jsxs("p",{className:`text-sm ${v?"text-gray-400":"text-gray-600"}`,children:["Stock total: ",s]}),o.jsx(re.button,{onClick:()=>p("inventario"),className:`mt-6 w-full px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 ${v?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Ver Inventario"})]}),o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${v?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:w,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${v?"text-green-400":"text-green-600"}`,children:[o.jsx(Ki,{size:20}),"Ganancias"]}),i?o.jsxs("div",{className:"flex items-center justify-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"}),o.jsx("span",{className:`ml-2 ${v?"text-gray-400":"text-gray-600"}`,children:"Cargando..."})]}):o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:`text-4xl font-bold ${v?"text-white":"text-gray-900"} mb-2`,children:["S/ ",a.toFixed(2)]}),o.jsxs("p",{className:`text-sm ${v?"text-gray-400":"text-gray-600"} mb-1`,children:[t.length," ventas realizadas"]}),o.jsxs("p",{className:`text-sm ${v?"text-gray-400":"text-gray-600"}`,children:["Disponible: S/ ",n.toFixed(2)]}),o.jsx(re.button,{onClick:()=>p("ganancias"),className:`mt-6 w-full px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-green-500/50 ${v?"from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700":"from-green-600 to-emerald-700 hover:from-green-700 hover:to-emerald-800"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Ver Ganancias"})]})]}),o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${v?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:w,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${v?"text-purple-400":"text-purple-600"}`,children:[o.jsx(ki,{size:20}),"Mi Cuenta"]}),o.jsxs("div",{className:`space-y-3 ${v?"text-gray-300":"text-gray-700"} mb-6`,children:[o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-gray-800/20 dark:bg-gray-700/20",children:[o.jsx(ki,{className:"text-purple-400 flex-shrink-0",size:18}),o.jsx("span",{className:"font-medium",children:r})]}),o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-gray-800/20 dark:bg-gray-700/20",children:[o.jsx(Ur,{className:"text-purple-400 flex-shrink-0",size:18}),o.jsx("span",{className:"font-medium",children:d})]}),o.jsx("div",{className:`px-3 py-2 rounded-full text-sm font-medium ${c?v?"bg-purple-900/50 text-purple-300 border border-purple-500/30":"bg-purple-100 text-purple-800 border border-purple-300":v?"bg-gray-700/50 text-gray-300 border border-gray-500/30":"bg-gray-200 text-gray-700 border border-gray-300"}`,children:c?"Administrador":"Proveedor"})]}),o.jsx(re.button,{onClick:()=>p("configuracion"),className:`w-full px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-purple-500/50 ${v?"from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700":"from-purple-600 to-pink-800 hover:from-purple-700 hover:to-pink-900"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Editar Perfil"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[o.jsxs(re.div,{className:`rounded-2xl p-6 shadow-xl border backdrop-blur-sm ${v?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:w,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${v?"text-indigo-400":"text-indigo-600"}`,children:[o.jsx(bc,{size:20}),"Pedidos recientes"]}),o.jsx(Vt,{children:t.length===0?o.jsxs(re.div,{className:"text-center py-12",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[o.jsx(re.div,{className:"mx-auto w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center mb-4 shadow-lg",animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:o.jsx(bc,{className:"text-white",size:24})}),o.jsx("h4",{className:`text-xl font-semibold mb-2 ${v?"text-gray-300":"text-gray-700"}`,children:"No hay pedidos recientes"}),o.jsx("p",{className:`text-sm ${v?"text-gray-400":"text-gray-600"}`,children:"Tus pedidos aparecerán aquí"})]}):o.jsxs("div",{className:"overflow-x-auto rounded-xl border",children:[o.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[o.jsx("thead",{className:`${v?"bg-gray-900/80":"bg-gray-200/80"} backdrop-blur-sm`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${v?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Producto"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${v?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Comprador"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${v?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Monto"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${v?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Estado"})]})}),o.jsx("tbody",{className:`${v?"bg-gray-800/70":"bg-white/70"} divide-y divide-gray-700/50`,children:t.slice(0,3).map((E,j)=>{const P=new Date(E.endDate)>new Date&&E.status==="completed",V=E.status==="pending";return o.jsxs(re.tr,{className:"transition-all duration-300 hover:bg-indigo-500/5",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:j*.1},children:[o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm font-medium ${v?"text-white":"text-gray-900"} truncate max-w-xs`,children:E.productName}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${v?"text-gray-300":"text-gray-700"}`,children:E.buyer}),o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap text-sm font-semibold ${v?"text-indigo-400":"text-indigo-600"}`,children:["S/ ",(E.amount||0).toFixed(2)]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${V?v?"bg-yellow-900/80 text-yellow-300 border border-yellow-500/30":"bg-yellow-100 text-yellow-800 border border-yellow-300":P?v?"bg-green-900/80 text-green-300 border border-green-500/30":"bg-green-100 text-green-800 border border-green-300":v?"bg-red-900/80 text-red-300 border border-red-500/30":"bg-red-100 text-red-800 border border-red-300"}`,children:V?"A pedido":P?"Activo":"Expirado"})})]},E.id||j)})})]}),t.length>3&&o.jsx(re.button,{onClick:()=>p("pedidos"),className:`w-full mt-4 px-6 py-3 text-center text-sm transition-all duration-300 rounded-xl border-2 font-medium ${v?"border-indigo-500/50 text-indigo-400 hover:bg-indigo-500/10":"border-indigo-500/50 text-indigo-600 hover:bg-indigo-500/10"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Ver todos los pedidos"})]})})]}),o.jsxs(re.div,{className:`rounded-2xl p-6 shadow-xl border backdrop-blur-sm ${v?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:w,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${v?"text-pink-400":"text-pink-600"}`,children:[o.jsx(Ur,{size:20}),"Notificaciones"]}),o.jsx(Vt,{children:h.length>0?h.map((E,j)=>o.jsx(re.div,{className:`border-b py-4 last:border-0 hover:rounded-xl hover:px-2 transition-all duration-300 ${v?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3,delay:j*.1},whileHover:{backgroundColor:v?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.5)"},children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex-shrink-0 pt-1",children:o.jsx(Ur,{className:"text-pink-400",size:18})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:`font-medium ${v?"text-gray-300":"text-gray-700"} mb-1`,children:E.message}),o.jsx("p",{className:`text-xs ${v?"text-gray-400":"text-gray-500"}`,children:m(E.updatedAt?.toDate?.()||new Date)})]})]})},E.id)):o.jsxs(re.div,{className:"text-center py-12",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[o.jsx(re.div,{className:"mx-auto w-16 h-16 rounded-2xl bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center mb-4 shadow-lg",animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:o.jsx(Ur,{className:"text-white",size:24})}),o.jsx("h4",{className:`text-xl font-semibold mb-2 ${v?"text-gray-300":"text-gray-700"}`,children:"No hay notificaciones"}),o.jsx("p",{className:`text-sm ${v?"text-gray-400":"text-gray-600"}`,children:"Tus notificaciones aparecerán aquí"})]})})]})]})]})};BP.propTypes={username:q.string.isRequired,products:q.arrayOf(q.object).isRequired,orders:q.arrayOf(q.object).isRequired,providerBalance:q.number.isRequired,balanceLoading:q.bool.isRequired,totalStock:q.number.isRequired,totalEarnings:q.number.isRequired,isAdmin:q.bool.isRequired,email:q.string.isRequired,notifications:q.arrayOf(q.object).isRequired,setActiveSection:q.func.isRequired,formatDate:q.func.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const UP=({products:r,setActiveSection:e,handleEdit:t,handleDelete:n,getCategoryDisplayName:i,totalStock:s,theme:a="dark"})=>{const c=a==="dark",d=x=>{const v={netflix:{bg:c?"bg-red-900/30":"bg-red-100",text:c?"text-red-300":"text-red-800"},disney:{bg:c?"bg-blue-900/30":"bg-blue-100",text:c?"text-blue-300":"text-blue-800"},max:{bg:c?"bg-yellow-900/30":"bg-yellow-100",text:c?"text-yellow-300":"text-yellow-800"},spotify:{bg:c?"bg-green-900/30":"bg-green-100",text:c?"text-green-300":"text-green-800"},default:{bg:c?"bg-gray-900/30":"bg-gray-100",text:c?"text-gray-300":"text-gray-700"}};return v[x?.toLowerCase()]||v.default},h={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},p={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}},m={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3,ease:"easeOut"}},hover:{backgroundColor:c?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.5)",transition:{duration:.2}}};return o.jsxs(re.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${c?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:h,initial:"hidden",animate:"visible",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 gap-4",children:[o.jsxs(re.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${c?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:["Inventario",o.jsxs("span",{className:`ml-2 bg-gradient-to-r ${c?"from-blue-400/20 to-purple-600/20":"from-blue-600/20 to-purple-800/20"} px-2 py-1 rounded-full text-sm font-medium`,children:[r.length," productos"]})]}),o.jsxs(re.button,{onClick:()=>e("subirProducto"),className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 flex items-center ${c?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[o.jsx(TN,{className:"mr-2",size:18}),"Nuevo Producto"]})]}),r.length>0?o.jsx("div",{className:"overflow-x-auto rounded-2xl border shadow-lg",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200/30",children:[o.jsx("thead",{className:`${c?"bg-gray-700/60":"bg-gray-50/60"}`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Producto"}),o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Precio"}),o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Stock"}),o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Categoría"}),o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Estado"}),o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200/30",children:o.jsx(Vt,{children:r.map((x,v)=>{const _=d(x.category);return o.jsxs(re.tr,{className:`transition-colors duration-200 ${c?"text-gray-300 hover:bg-gray-700/50":"text-gray-700 hover:bg-gray-50/50"}`,variants:m,initial:"hidden",animate:"visible",whileHover:"hover",exit:{opacity:0,x:-20},transition:{duration:.3,delay:v*.05},children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-3",children:[x.image?o.jsx("div",{className:"flex-shrink-0",children:o.jsx("img",{className:"w-10 h-10 rounded-full object-cover shadow-md",src:x.image,alt:x.name,loading:"lazy"})}):o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-md",children:o.jsx(Oq,{className:"text-white",size:16})}),o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx("div",{className:`text-sm font-semibold ${c?"text-white":"text-gray-900"} truncate`,children:x.name})})]})}),o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[o.jsxs("div",{className:"text-sm font-semibold text-green-500",children:["S/ ",(parseFloat(x.price)||0).toFixed(2)]}),x.renewalPrice&&parseFloat(x.renewalPrice)!==parseFloat(x.price)&&o.jsxs("div",{className:`text-xs ${c?"text-gray-400":"text-gray-600"}`,children:["Ren: S/ ",parseFloat(x.renewalPrice).toFixed(2)]})]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(x.stock||0)>0?c?"bg-green-900/50 text-green-400":"bg-green-100 text-green-800":c?"bg-red-900/50 text-red-400":"bg-red-100 text-red-800"}`,children:x.stock||0})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_.bg} ${_.text}`,children:i(x.category)})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${x.status==="En stock"?c?"bg-green-900/80 text-green-400 border border-green-500/30":"bg-green-100 text-green-800 border border-green-300":x.status==="A pedido"?c?"bg-yellow-900/80 text-yellow-400 border border-yellow-500/30":"bg-yellow-100 text-yellow-800 border border-yellow-300":c?"bg-red-900/80 text-red-400 border border-red-500/30":"bg-red-100 text-red-800 border border-red-300"}`,children:x.status||"En stock"})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(re.button,{onClick:()=>t(x),className:"p-2 rounded-xl bg-blue-500/80 hover:bg-blue-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Editar","aria-label":"Editar producto",children:o.jsx(B6,{size:16})}),o.jsx(re.button,{onClick:()=>n(x.id),className:"p-2 rounded-xl bg-red-500/80 hover:bg-red-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Eliminar","aria-label":"Eliminar producto",children:o.jsx(iw,{size:16})})]})})]},x.id||v)})})})]})}):o.jsxs(re.div,{className:`text-center py-16 rounded-2xl border shadow-xl backdrop-blur-sm ${c?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:p,initial:"hidden",animate:"visible",whileHover:"hover",children:[o.jsx(re.div,{className:`mx-auto w-20 h-20 rounded-2xl bg-gradient-to-br from-gray-400 to-gray-500 flex items-center justify-center mb-6 shadow-lg ${c?"bg-gray-700/50":"bg-gray-200/50"}`,animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:o.jsx(rw,{className:"text-white",size:32})}),o.jsx("h4",{className:`text-xl font-semibold mb-2 ${c?"text-gray-300":"text-gray-700"}`,children:"No tienes productos registrados"}),o.jsx("p",{className:`text-sm ${c?"text-gray-400":"text-gray-600"} mb-6`,children:"Agrega tu primer producto para comenzar a vender"}),o.jsxs(re.button,{onClick:()=>e("subirProducto"),className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 flex items-center ${c?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[o.jsx(TN,{className:"mr-2",size:18}),"Agregar Producto"]})]})]})};UP.propTypes={products:q.arrayOf(q.shape({id:q.string.isRequired,name:q.string.isRequired,price:q.oneOfType([q.string,q.number]).isRequired,stock:q.oneOfType([q.string,q.number]),status:q.string,category:q.string,image:q.string})).isRequired,setActiveSection:q.func.isRequired,handleEdit:q.func.isRequired,handleDelete:q.func.isRequired,getCategoryDisplayName:q.func.isRequired,totalStock:q.number.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const wte=({soldAccounts:r,formatDate:e,theme:t="dark"})=>{const n=t==="dark",i={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return o.jsxs(re.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${n?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:i,initial:"hidden",animate:"visible",children:[o.jsxs(re.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-8 bg-clip-text text-transparent bg-gradient-to-r ${n?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"} text-center`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:[o.jsx(EN,{className:"inline mr-2",size:32}),"Cuentas Vendidas"]}),o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${n?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:s,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${n?"text-blue-400":"text-blue-600"}`,children:[o.jsx(rw,{size:20}),"Registro de Ventas"]}),o.jsx(Vt,{children:r.length===0?o.jsxs(re.div,{className:"text-center py-12",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[o.jsx(re.div,{className:"mx-auto w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center mb-4 shadow-lg",animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:o.jsx(EN,{className:"text-white",size:24})}),o.jsx("h4",{className:`text-xl font-semibold mb-2 ${n?"text-gray-300":"text-gray-700"}`,children:"No hay cuentas vendidas"}),o.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"Las cuentas vendidas aparecerán aquí"})]}):o.jsx("div",{className:"overflow-x-auto rounded-xl border",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[o.jsx("thead",{className:`${n?"bg-gray-900/80":"bg-gray-200/80"} backdrop-blur-sm`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${n?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Producto"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${n?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Email"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${n?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Perfil"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${n?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Fecha de Venta"})]})}),o.jsx("tbody",{className:`${n?"bg-gray-800/70":"bg-white/70"} divide-y divide-gray-700/50`,children:r.map((a,c)=>o.jsxs(re.tr,{className:"transition-all duration-300 hover:bg-blue-500/5",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:c*.1},children:[o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm font-medium ${n?"text-white":"text-gray-900"} truncate max-w-xs`,children:a.productName}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-gray-300":"text-gray-700"}`,children:a.email}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-gray-300":"text-gray-700"}`,children:a.profile||"N/A"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-gray-300":"text-gray-700"}`,children:e(a.saleDate)})]},a.id||c))})]})})})]})]})},_te=({product:r,setProduct:e,handleChange:t,handleFileChange:n,handleStockChange:i,handleAccountFieldChange:s,handleSubmit:a,setActiveSection:c,theme:d="dark"})=>{const h=d==="dark",p={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},m={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return o.jsxs(re.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${h?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:p,initial:"hidden",animate:"visible",children:[o.jsxs(re.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-8 bg-clip-text text-transparent bg-gradient-to-r ${h?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:[o.jsx(rg,{className:"inline mr-2",size:32}),"Subir Nuevo Producto"]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${h?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:m,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${h?"text-blue-400":"text-blue-600"}`,children:[o.jsx(z6,{size:20}),"Imagen del producto"]}),o.jsx("div",{className:`flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-xl ${h?"bg-gray-900/80 border-gray-700/50":"bg-gray-200/80 border-gray-300/50"}`,children:r.image?o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:r.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain",loading:"lazy"}),o.jsx(re.button,{type:"button",onClick:()=>e({...r,image:""}),className:`absolute top-0 right-0 ${h?"bg-blue-500":"bg-blue-600"} text-white rounded-full p-1 shadow-md`,whileHover:{scale:1.1},whileTap:{scale:.9},children:o.jsx(Qi,{size:16})})]}):o.jsxs(o.Fragment,{children:[o.jsx(rg,{className:`mx-auto h-12 w-12 ${h?"text-gray-400":"text-gray-500"}`}),o.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:o.jsxs("label",{htmlFor:"file-upload",className:`relative cursor-pointer rounded-xl font-medium ${h?"bg-gray-900/50 text-blue-400 hover:text-blue-500":"bg-gray-200/50 text-blue-600 hover:text-blue-700"} focus-within:outline-none`,children:[o.jsx("span",{children:"Subir una imagen"}),o.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:x=>n(x),accept:"image/*"})]})}),o.jsx("p",{className:`text-xs ${h?"text-gray-500":"text-gray-600"}`,children:"PNG, JPG, GIF hasta 10MB"})]})})]}),o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${h?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:m,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${h?"text-purple-400":"text-purple-600"}`,children:[o.jsx(G6,{size:20}),"Información Básica"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Nombre del producto*"}),o.jsx("input",{type:"text",name:"name",value:r.name,onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500`,placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Categoría*"}),o.jsxs("select",{name:"category",value:r.category,onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all`,children:[o.jsx("option",{value:"Netflix",children:"Netflix"}),o.jsx("option",{value:"Spotify",children:"Spotify"}),o.jsx("option",{value:"Disney",children:"Disney+"}),o.jsx("option",{value:"Max",children:"Max"}),o.jsx("option",{value:"Prime Video",children:"Prime Video"}),o.jsx("option",{value:"Vix",children:"Vix"}),o.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),o.jsx("option",{value:"Canva",children:"Canva"}),o.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),o.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),o.jsx("option",{value:"Dgo",children:"DGO"}),o.jsx("option",{value:"Liga Max",children:"Liga Max"}),o.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),o.jsx("option",{value:"Youtube",children:"YouTube"}),o.jsx("option",{value:"Deezer",children:"Deezer"}),o.jsx("option",{value:"Tidal",children:"Tidal"}),o.jsx("option",{value:"Vpn",children:"VPN"}),o.jsx("option",{value:"WinTv",children:"WinTV"}),o.jsx("option",{value:"Apple Music",children:"CinePlanet "}),o.jsx("option",{value:"Apple Tv",children:"Apple TV"}),o.jsx("option",{value:"Iptv",children:"IPTV"}),o.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),o.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),o.jsx("option",{value:"Pornhub",children:"Pornhub"}),o.jsx("option",{value:"Paramount",children:"Paramount"}),o.jsx("option",{value:"Licencias",children:"Licencias"}),o.jsx("option",{value:"Capcut",children:"Capcut"}),o.jsx("option",{value:"Duolingo",children:"Duolingo"}),o.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Tipo de cuenta*"}),o.jsxs("select",{name:"accountType",value:r.accountType,onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all`,children:[o.jsx("option",{value:"Premium",children:"Premium"}),o.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Estado*"}),o.jsxs("select",{name:"status",value:r.status,onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all`,children:[o.jsx("option",{value:"En stock",children:"En stock"}),o.jsx("option",{value:"A pedido",children:"A pedido"}),o.jsx("option",{value:"Agotado",children:"Agotado"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Stock*"}),o.jsx("input",{type:"number",name:"stock",value:r.status==="Agotado"?0:r.stock,onChange:i,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all ${r.status==="Agotado"?"opacity-50 cursor-not-allowed":""} placeholder-gray-500`,min:"0",required:!0,disabled:r.status==="Agotado"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Precio (S/)*"}),o.jsx("input",{type:"number",name:"price",value:r.price,onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500`,placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",name:"renewal",checked:r.renewal,onChange:t,className:`h-4 w-4 rounded ${h?"text-purple-400 focus:ring-purple-400 border-gray-600/50":"text-purple-600 focus:ring-purple-600 border-gray-300/50"}`}),o.jsx("label",{className:`ml-2 text-sm ${h?"text-gray-300":"text-gray-700"}`,children:"¿Tiene renovación?"})]})]}),r.renewal&&o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Precio de renovación (S/)*"}),o.jsx("input",{type:"number",name:"renewalPrice",value:r.renewalPrice,onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500`,placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-6 mb-8",children:[o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${h?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:m,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${h?"text-green-400":"text-green-600"}`,children:[o.jsx(Rd,{size:20}),"Duración y Contacto"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Duración (días)"}),o.jsx("input",{type:"number",name:"duration",value:r.duration,onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500`,placeholder:"Dejar vacío para ilimitado",min:"1"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:["Teléfono de contacto ",r.status==="A pedido"?"*":""]}),o.jsx("input",{type:"text",name:"providerPhone",value:r.providerPhone,onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500`,placeholder:"Ej: +51 987654321",required:r.status==="A pedido"})]})]})]}),o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${h?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:m,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${h?"text-indigo-400":"text-indigo-600"}`,children:[o.jsx(H6,{size:20}),"Enlaces y Descripciones"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"URL del producto (opcional)"}),o.jsx("input",{type:"url",name:"productUrl",value:r.productUrl||"",onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition-all placeholder-gray-500`,placeholder:"Ej: https://www.ejemplo.com/producto"})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Detalles del producto"}),o.jsx("textarea",{name:"details",value:r.details,onChange:t,rows:"3",className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition-all placeholder-gray-500`,placeholder:"Describe los detalles y características del producto"})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Términos y condiciones"}),o.jsx("textarea",{name:"terms",value:r.terms,onChange:t,rows:"3",className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition-all placeholder-gray-500`,placeholder:"Especifica los términos y condiciones de uso"})]})]})]}),r.status==="En stock"&&o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${h?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:m,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${h?"text-pink-400":"text-pink-600"}`,children:[o.jsx(vd,{size:20}),"Cuentas Asociadas"]}),o.jsx("p",{className:`text-sm mb-4 ${h?"text-gray-400":"text-gray-600"}`,children:"Debe completar todas las cuentas según el stock indicado"}),o.jsx(Vt,{children:o.jsx("div",{className:"space-y-4",children:r.accounts.map((x,v)=>o.jsxs(re.div,{className:`border rounded-xl p-4 ${h?"bg-gray-900/70 border-gray-700/50":"bg-gray-200/70 border-gray-300/50"} backdrop-blur-sm`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:v*.1},children:[o.jsxs("h4",{className:`text-sm font-medium ${h?"text-white":"text-gray-900"} mb-3 flex items-center gap-2`,children:["Cuenta ",v+1]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-medium ${h?"text-gray-400":"text-gray-600"} mb-1`,children:"Correo electrónico*"}),o.jsx("input",{type:"email",value:x.email,onChange:_=>s(v,"email",_.target.value),className:`w-full px-3 py-2 rounded-xl border ${h?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all text-sm`,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-medium ${h?"text-gray-400":"text-gray-600"} mb-1`,children:"Contraseña*"}),o.jsx("input",{type:"text",value:x.password,onChange:_=>s(v,"password",_.target.value),className:`w-full px-3 py-2 rounded-xl border ${h?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all text-sm`,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-medium ${h?"text-gray-400":"text-gray-600"} mb-1`,children:"Perfil (opcional)"}),o.jsx("input",{type:"text",value:x.profile,onChange:_=>s(v,"profile",_.target.value),className:`w-full px-3 py-2 rounded-xl border ${h?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all text-sm`,placeholder:"Ej: Perfil 1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-medium ${h?"text-gray-400":"text-gray-600"} mb-1`,children:"PIN (opcional)"}),o.jsx("input",{type:"text",value:x.pin,onChange:_=>s(v,"pin",_.target.value),className:`w-full px-3 py-2 rounded-xl border ${h?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all text-sm`,placeholder:"Ej: 1234"})]})]})]},v))})})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[o.jsx(re.button,{onClick:()=>c("inventario"),className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 ${h?"from-gray-700 to-gray-600 hover:from-gray-600 hover:to-gray-500":"from-gray-300 to-gray-400 hover:from-gray-400 hover:to-gray-500"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cancelar"}),o.jsx(re.button,{onClick:a,className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-pink-500/50 ${h?"from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700":"from-pink-600 to-purple-800 hover:from-pink-700 hover:to-purple-900"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Subir Producto"})]})]})},Ete=({orders:r,totalEarnings:e,providerBalance:t,balanceLoading:n,getCategoryDisplayName:i,formatDate:s,theme:a="dark"})=>{const c=a==="dark",d={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return o.jsxs(re.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${c?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:d,initial:"hidden",animate:"visible",children:[o.jsxs(re.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-8 bg-clip-text text-transparent bg-gradient-to-r ${c?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"} text-center`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:[o.jsx(Ki,{className:"inline mr-2",size:32}),"Ganancias"]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${c?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:h,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${c?"text-green-400":"text-green-600"}`,children:[o.jsx(Ki,{size:20}),"Resumen Financiero"]}),o.jsxs("p",{className:`text-4xl font-bold ${c?"text-white":"text-gray-900"} mb-2`,children:["S/ ",e.toFixed(2)]}),o.jsxs("p",{className:`text-sm ${c?"text-gray-400":"text-gray-600"} mb-1`,children:[r.length," ventas realizadas"]}),n?o.jsxs("div",{className:"flex items-center justify-center py-4",children:[o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-500 mr-2"}),o.jsx("span",{className:`text-sm ${c?"text-gray-400":"text-gray-600"}`,children:"Cargando saldo..."})]}):o.jsxs("p",{className:`text-sm ${c?"text-gray-400":"text-gray-600"}`,children:["Disponible: S/ ",t.toFixed(2)]})]}),o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${c?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:h,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${c?"text-indigo-400":"text-indigo-600"}`,children:[o.jsx(bc,{size:20}),"Historial de Ventas"]}),o.jsx(Vt,{children:r.length===0?o.jsxs(re.div,{className:"text-center py-12",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[o.jsx(re.div,{className:"mx-auto w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center mb-4 shadow-lg",animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:o.jsx(bc,{className:"text-white",size:24})}),o.jsx("h4",{className:`text-xl font-semibold mb-2 ${c?"text-gray-300":"text-gray-700"}`,children:"No hay ventas registradas"}),o.jsx("p",{className:`text-sm ${c?"text-gray-400":"text-gray-600"}`,children:"Tus ventas aparecerán aquí"})]}):o.jsxs("div",{className:"overflow-x-auto rounded-xl border",children:[o.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[o.jsx("thead",{className:`${c?"bg-gray-900/80":"bg-gray-200/80"} backdrop-blur-sm`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${c?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Producto"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${c?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Categoría"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${c?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Comprador"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${c?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Contacto"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${c?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Fecha"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${c?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Monto"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${c?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Estado"})]})}),o.jsx("tbody",{className:`${c?"bg-gray-800/70":"bg-white/70"} divide-y divide-gray-700/50`,children:r.slice(0,10).map((p,m)=>o.jsxs(re.tr,{className:"transition-all duration-300 hover:bg-indigo-500/5",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:m*.1},children:[o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm font-medium ${c?"text-white":"text-gray-900"} truncate max-w-xs`,children:p.productName}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${c?"text-gray-300":"text-gray-700"}`,children:i(p.category)}),o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[o.jsx("div",{className:`text-sm font-medium ${c?"text-white":"text-gray-900"}`,children:p.buyer}),o.jsx("div",{className:`text-xs ${c?"text-gray-400":"text-gray-600"}`,children:p.buyerEmail})]}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${c?"text-gray-300":"text-gray-700"}`,children:p.buyerPhone}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${c?"text-gray-300":"text-gray-700"}`,children:s(p.saleDate)}),o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap text-sm font-semibold ${c?"text-indigo-400":"text-indigo-600"}`,children:["S/ ",(p.amount||0).toFixed(2)]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${c?"bg-green-900/80 text-green-300 border border-green-500/30":"bg-green-100 text-green-800 border border-green-300"}`,children:"Completado"})})]},p.id||m))})]}),r.length>10&&o.jsxs("p",{className:`text-center mt-4 text-sm ${c?"text-gray-400":"text-gray-600"}`,children:["Mostrando las primeras 10 ventas. Hay ",r.length," en total."]})]})})]})]})]})},zP=({orders:r,searchQuery:e,setSearchQuery:t,getCategoryDisplayName:n,formatDate:i,handleEditOrder:s,handleActivateOrder:a,handleDeleteOrder:c,theme:d="dark"})=>{const[h,p]=k.useState({key:null,direction:"asc"}),m=d==="dark",x={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},v={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{backgroundColor:m?"#1F2937":"#F3F4F6",transition:{duration:.2},scale:1.005}},_=k.useMemo(()=>{let L=[...r].filter(K=>(K.productName||"").toLowerCase().includes(e.toLowerCase())||(K.category||"").toLowerCase().includes(e.toLowerCase())||(K.provider||"").toLowerCase().includes(e.toLowerCase())||(K.buyer||"").toLowerCase().includes(e.toLowerCase())||(K.accountDetails?.email||"").toLowerCase().includes(e.toLowerCase()));return h.key&&L.sort((K,H)=>{let S=K[h.key]||"",N=H[h.key]||"";return typeof S=="string"&&(S=S.toLowerCase()),typeof N=="string"&&(N=N.toLowerCase()),S<N?h.direction==="asc"?-1:1:S>N?h.direction==="asc"?1:-1:0}),L},[r,e,h]),w=L=>{const K={netflix:{bg:m?"bg-red-900/30":"bg-red-100",text:m?"text-red-300":"text-red-800"},disney:{bg:m?"bg-blue-900/30":"bg-blue-100",text:m?"text-blue-300":"text-blue-800"},max:{bg:m?"bg-yellow-900/30":"bg-yellow-100",text:m?"text-yellow-300":"text-yellow-800"},spotify:{bg:m?"bg-green-900/30":"bg-green-100",text:m?"text-green-300":"text-green-800"},default:{bg:m?"bg-gray-900/30":"bg-gray-100",text:m?"text-gray-300":"text-gray-700"}};return K[L?.toLowerCase()]||K.default},E=(L,K)=>{const H=L.status||"pending",N=(L.daysRemaining||0)>0;let I,R,M;return H==="soporte"?(I="En soporte",R=K?"text-blue-400":"text-blue-600",M=o.jsx(Ga,{className:R,title:"En Soporte"})):H==="rechazado"?(I="No aplica soporte",R=K?"text-amber-700":"text-amber-900",M=o.jsx(Gi,{className:R,title:"No aplica soporte"})):H==="refunded"?(I="Reembolsado",R=K?"text-gray-400":"text-gray-600",M=o.jsx(Gi,{className:R,title:"Reembolsado"})):H==="pending"?(I="Pendiente",R=K?"text-yellow-400":"text-yellow-600",M=o.jsx(Rd,{className:R,title:"Pendiente"})):N?(I="Activo",R=K?"text-green-400":"text-green-600",M=o.jsx(yd,{className:R,title:"Activo"})):(I="Expirado",R=K?"text-red-400":"text-red-600",M=o.jsx(Gi,{className:R,title:"Expirado"})),{text:I,color:R,icon:M}},j=L=>{p(K=>({key:L,direction:K.key===L&&K.direction==="asc"?"desc":"asc"}))},P=L=>h.key!==L?null:h.direction==="asc"?o.jsx(tx,{className:"ml-1"}):o.jsx(ex,{className:"ml-1"}),V=()=>{const L=_.map(N=>{const I=N.status||"pending",R=I==="pending",M=I==="soporte",D=I==="rechazado",F=I==="refunded",he=N.daysRemaining||0,Ae=he>0;let Oe;M?Oe="En Soporte":D?Oe="No aplica soporte":F?Oe="Reembolsado":Ae?Oe="Activo":R?Oe="Pendiente":Oe="Expirado";const De=M||D||F||R&&!Ae;let we;return De?we=Oe:we=`${he} día${he===1?"":"s"}`,{Estado:Oe,Producto:N.productName||"Sin nombre",Categoría:n(N.category),Proveedor:N.provider||"N/A",Monto:`S/ ${(N.amount||0).toFixed(2)}`,"Tiempo Restante":we,"Fecha de Inicio":N.startDate?i(N.startDate):"N/A","Fecha de Vencimiento":N.endDate?i(N.endDate):"N/A",Comprador:N.buyer||"N/A",Teléfono:N.buyerPhone||"N/A",Email:N.accountDetails?.email||"N/A",Contraseña:N.accountDetails?.password||"N/A",Perfil:N.accountDetails?.profile||"N/A",PIN:N.accountDetails?.pin||"N/A"}}),K=gs.json_to_sheet(L),H=gs.book_new();gs.book_append_sheet(H,K,"Pedidos");const S=new Date().toISOString().slice(0,10).replace(/-/g,"");dx(H,`orders_export_${S}.xlsx`)};return o.jsxs(re.div,{className:`backdrop-blur-md p-2 sm:p-4 md:p-6 lg:p-8 rounded-3xl shadow-2xl w-full border ${m?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:x,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"orders-title",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 gap-4",children:[o.jsxs("h3",{id:"orders-title",className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight flex items-center bg-clip-text text-transparent bg-gradient-to-r ${m?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,children:[o.jsx(bc,{className:"mr-2"})," Mis Pedidos",o.jsx("span",{className:`ml-2 bg-gradient-to-r ${m?"from-blue-400/20 to-purple-600/20":"from-blue-600/20 to-purple-800/20"} px-2 py-1 rounded-full text-sm font-medium`,children:_.length})]}),o.jsxs("div",{className:"flex items-center gap-4 w-full lg:w-auto",children:[o.jsxs("div",{className:"relative flex-1 md:w-64 lg:w-80",children:[o.jsx("input",{type:"text",placeholder:"Buscar pedidos por nombre, categoría, proveedor, cliente o email...",className:`w-full pl-10 pr-4 py-3 rounded-2xl shadow-md transition-all duration-300 ${m?"bg-gray-800/70 text-white border border-gray-600/50 placeholder-gray-400 focus:border-blue-500/50":"bg-white/70 text-gray-900 border border-gray-300/50 placeholder-gray-500 focus:border-blue-500/50"} focus:ring-2 focus:ring-blue-500/30 focus:outline-none`,value:e,onChange:L=>t(L.target.value),"aria-label":"Buscar pedidos por nombre, categoría, proveedor, cliente o email"}),o.jsx(ga,{className:`absolute left-3 top-3.5 ${m?"text-gray-400":"text-gray-500"}`,size:18})]}),o.jsxs(re.button,{onClick:V,className:`p-3 rounded-2xl shadow-lg flex items-center gap-2 ${m?"bg-green-600/80 hover:bg-green-700/90 text-white":"bg-green-500/80 hover:bg-green-600/90 text-white"} transition-all duration-300`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Descargar pedidos como Excel","aria-label":"Exportar pedidos a Excel",children:[o.jsx(rx,{size:18}),o.jsx("span",{className:"hidden sm:inline text-sm",children:"Exportar"})]})]})]}),o.jsx(Vt,{children:_.length>0?o.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:o.jsx("div",{className:"overflow-x-auto rounded-2xl border border-gray-200/50 shadow-lg",children:o.jsxs("table",{className:`min-w-full divide-y divide-gray-200/30 ${m?"bg-gray-800/50":"bg-white/50"}`,children:[o.jsx("thead",{className:`${m?"bg-gray-700/60":"bg-gray-50/60"}`,children:o.jsx("tr",{children:[{key:"status",label:"Estado"},{key:"productName",label:"Producto"},{key:"category",label:"Categoría"},{key:"provider",label:"Proveedor"},{key:"amount",label:"Monto"},{key:"daysRemaining",label:"Tiempo Restante"},{key:"startDate",label:"Inicio"},{key:"endDate",label:"Vencimiento"},{key:"buyer",label:"Comprador"},{key:"buyerPhone",label:"Teléfono"},{key:"email",label:"Email"},{key:"password",label:"Contraseña"},{key:"profile",label:"Perfil"},{key:"pin",label:"PIN"},{label:"Acciones"}].map(({key:L,label:K})=>o.jsx("th",{className:`px-2 sm:px-3 md:px-4 py-3 sm:py-4 text-left text-xs font-semibold uppercase tracking-wider ${m?"text-gray-300":"text-gray-700"} cursor-pointer hover:text-blue-400 transition-colors`,onClick:()=>L&&j(L),children:o.jsxs("div",{className:"flex items-center justify-between",children:[K,L&&P(L)]})},L||K))})}),o.jsx("tbody",{className:"divide-y divide-gray-200/30",children:_.map(L=>{const K=parseFloat(L.amount)||0,H=L.status||"pending",S=H==="pending",N=H==="soporte",I=H==="rechazado",R=H==="refunded",M=L.daysRemaining||0,D=Math.min(L.timeElapsedPercentage||0,100),F=E(L,m),he=w(L.category);let Ae;D<70?Ae=m?"bg-green-500":"bg-green-600":D<90?Ae=m?"bg-orange-500":"bg-orange-600":Ae=m?"bg-red-500":"bg-red-600";const Oe=!["En soporte","No aplica soporte","Reembolsado","Pendiente"].includes(F.text),De=N||I||R||S,we=De?F.text:`${M} día${M===1?"":"s"}`,_e=Oe?Ae.replace("bg-","text-"):F.color,Ne=L.provider||"BlackStreaming",ae=L.buyerPhone?L.buyerPhone.replace(/[^0-9]/g,""):null,W=L.soporteMessage?`

📝 *Nota de Soporte*: ${L.soporteMessage}`:"",ee=encodeURIComponent(`¡Hola! 👋 Soy ${Ne} de BlackStreaming.

🔧 *Necesito contactarte* sobre tu pedido de *${L.productName||"Sin nombre"}*.
🆔 *Pedido*: ${L.id||"N/A"}
📞 ¿Podrías confirmarme algunos detalles o resolver una duda rápida?

¡Gracias por tu paciencia! 🙏`),te=encodeURIComponent(`¡Hola! 👋 *${Ne}* de BlackStreaming aquí.

🎉 *¡Tu cuenta está lista!* Has adquirido:
📺 *${L.productName||"Sin nombre"}*
💰 *Precio*: S/ ${K.toFixed(2)}
⏰ *Duración*: ${L.durationDays||30} días

🍿 Tu suscripción a *${L.productName||"Sin nombre"}* (${Ne}) sigue activa! 🎬
⏳ *Te quedan*: ${De?N?"En Soporte":I?"No aplica soporte":R?"Reembolsado":"Pendiente de activación":`${M} día${M===1?"":"s"}`} para disfrutar! 🕒
📋 *Detalles*:
✉️ *Usuario*: ${L.accountDetails?.email||"N/A"}
🔐 *Contraseña*: ${L.accountDetails?.password||"N/A"}
👥 *Perfil*: ${L.accountDetails?.profile||"N/A"}
🔢 *PIN*: ${L.accountDetails?.pin||"N/A"}
🗓 *Compra*: ${L.startDate?i(L.startDate):"N/A"}
🗓 *Vencimiento*: ${L.endDate?i(L.endDate):"N/A"}
📞 *Teléfono*: ${L.buyerPhone||"N/A"}

`+W+`👤 *${Ne}* te recomienda renovar a tiempo para no perderte nada! 😊
🚀 ¡Sigue disfrutando y contáctanos si necesitas ayuda! 🎉`);return o.jsxs(re.tr,{className:`transition-colors duration-200 ${m?"text-gray-300 hover:bg-gray-700/50":"text-gray-700 hover:bg-gray-50/50"}`,variants:v,initial:"hidden",animate:"visible",whileHover:"hover","aria-labelledby":`order-${L.id}-title`,children:[o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`p-1.5 rounded-full ${F.color.replace("text-","bg-").replace("-600","/20").replace("-400","/20")}`,children:F.icon}),o.jsx("span",{className:`${F.color} font-medium`,children:F.text})]})}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4",children:o.jsx("h4",{id:`order-${L.id}-title`,className:"font-semibold text-blue-500 hover:text-blue-600 transition-colors",children:L.productName||"Sin nombre"})}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${he.bg} ${he.text}`,children:n(L.category)})}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap font-mono text-sm",children:L.provider||"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap",children:o.jsx("div",{className:"space-y-1",children:o.jsxs("p",{className:"font-bold text-lg",children:["S/ ",K.toFixed(2)]})})}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[Oe&&o.jsx("div",{className:"relative",children:o.jsx("div",{className:`w-20 h-2 rounded-full overflow-hidden ${m?"bg-gray-600/40":"bg-gray-300/40"}`,children:o.jsx(re.div,{className:`h-2 rounded-full ${Ae}`,initial:{width:0},animate:{width:`${D}%`},transition:{duration:1.5,ease:"easeInOut"}})})}),o.jsx("span",{className:`text-sm font-medium ${_e}`,children:we})]})}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap text-sm text-gray-500",children:L.startDate?i(L.startDate):"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap text-sm text-gray-500",children:L.endDate?i(L.endDate):"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 max-w-sm md:max-w-md truncate",title:L.buyer||"N/A",children:L.buyer||"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap text-sm text-gray-500",children:L.buyerPhone||"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 max-w-sm md:max-w-md truncate",title:L.accountDetails?.email||"N/A",children:L.accountDetails?.email||"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 max-w-sm md:max-w-md truncate",title:L.accountDetails?.password||"N/A",children:L.accountDetails?.password||"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap text-sm",children:L.accountDetails?.profile||"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap text-sm font-mono",children:L.accountDetails?.pin||"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(re.button,{onClick:()=>s(L),className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-blue-500/80 hover:bg-blue-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Editar cuenta","aria-label":`Editar cuenta para el pedido ${L.id}`,children:o.jsx(B6,{size:16})}),S&&o.jsx(re.button,{onClick:()=>a(L.id),className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-green-500/80 hover:bg-green-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Activar pedido","aria-label":`Activar pedido ${L.id}`,children:o.jsx(yd,{size:16})}),ae&&o.jsxs(o.Fragment,{children:[o.jsx(re.a,{href:`https://wa.me/${ae}?text=${ee}`,target:"_blank",rel:"noopener noreferrer",className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-teal-500/80 hover:bg-teal-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Contactar cliente","aria-label":`Contactar cliente para el pedido ${L.id}`,children:o.jsx(Ur,{size:16})}),!R&&!N&&!I&&o.jsx(re.a,{href:`https://wa.me/${ae}?text=${te}`,target:"_blank",rel:"noopener noreferrer",className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-amber-500/80 hover:bg-amber-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Notificar cliente sobre estado o vencimiento","aria-label":`Notificar cliente para el pedido ${L.id}`,children:o.jsx(Th,{size:16})})]}),o.jsx(re.button,{onClick:()=>c(L.id),className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-red-500/80 hover:bg-red-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Eliminar pedido","aria-label":`Eliminar pedido ${L.id}`,children:o.jsx(iw,{size:16})})]})})]},L.id)})})]})})}):o.jsxs(re.div,{className:"text-center py-16",variants:x,initial:"hidden",animate:"visible",children:[o.jsx(re.div,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:o.jsx(ga,{className:`mx-auto text-6xl ${m?"text-gray-400":"text-gray-500"} mb-4`,"aria-hidden":"true"})}),o.jsx("h4",{className:`text-xl font-semibold ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"No hay pedidos encontrados"}),o.jsx("p",{className:`text-sm ${m?"text-gray-400":"text-gray-600"}`,children:"Intenta ajustar tu búsqueda o realiza tu primer pedido."})]})})]})};zP.propTypes={orders:q.arrayOf(q.shape({id:q.string.isRequired,productName:q.string,category:q.string,provider:q.string,amount:q.oneOfType([q.string,q.number]),status:q.string,startDate:q.oneOfType([q.string,q.instanceOf(Date)]),endDate:q.oneOfType([q.string,q.instanceOf(Date)]),daysRemaining:q.number,timeElapsedPercentage:q.number,accountDetails:q.shape({email:q.string,password:q.string,profile:q.string,pin:q.string}),buyer:q.string,buyerPhone:q.string,durationDays:q.number,soporteMessage:q.string})).isRequired,searchQuery:q.string.isRequired,setSearchQuery:q.func.isRequired,getCategoryDisplayName:q.func.isRequired,formatDate:q.func.isRequired,handleEditOrder:q.func.isRequired,handleActivateOrder:q.func.isRequired,handleDeleteOrder:q.func.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const Tte=({accountDetails:r,handleAccountChange:e,handleUpdateAccount:t,theme:n="dark"})=>{const i=n==="dark",s={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},a={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return o.jsxs(re.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${i?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:s,initial:"hidden",animate:"visible",children:[o.jsxs(re.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-8 bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"} text-center`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:[o.jsx(q6,{className:"inline mr-2",size:32}),"Configuración"]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${i?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:a,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${i?"text-blue-400":"text-blue-600"}`,children:[o.jsx(nw,{size:20}),"Información de Cuenta"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${i?"text-gray-300":"text-gray-700"} mb-2`,children:"Correo electrónico"}),o.jsx("input",{type:"email",value:r.email,disabled:!0,className:`w-full px-4 py-2 rounded-xl border ${i?"bg-gray-700/50 text-gray-400 border-gray-600/50":"bg-gray-200/50 text-gray-600 border-gray-300/50"} cursor-not-allowed focus:ring-0`})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium ${i?"text-gray-300":"text-gray-700"} mb-2 flex items-center gap-2`,children:[o.jsx(Zm,{size:16}),"Nueva contraseña (opcional)"]}),o.jsx("input",{type:"password",name:"password",value:r.password,onChange:e,className:`w-full px-4 py-2 rounded-xl border ${i?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Dejar en blanco para no cambiar"})]})]})]}),o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${i?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:a,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${i?"text-purple-400":"text-purple-600"}`,children:[o.jsx(U6,{size:20}),"Preferencias"]}),o.jsx("textarea",{name:"preferences",value:r.preferences,onChange:e,rows:"6",className:`w-full px-4 py-2 rounded-xl border resize-none ${i?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500`,placeholder:"Especifica tus preferencias o notas"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx(re.button,{onClick:t,className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-pink-500/50 ${i?"from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700":"from-pink-600 to-purple-800 hover:from-pink-700 hover:to-purple-900"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Guardar Cambios"})})]})},HP=({orders:r=[],setOrders:e,fetchOrders:t,searchQuery:n,setSearchQuery:i,getCategoryDisplayName:s,formatDate:a,theme:c="dark"})=>{const[d,h]=k.useState({}),[p,m]=k.useState({key:null,direction:"asc"}),x=c==="dark",v={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},_={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{backgroundColor:x?"#1F2937":"#F3F4F6",transition:{duration:.2},scale:1.005}},w=H=>{const S={netflix:{bg:x?"bg-red-900/30":"bg-red-100",text:x?"text-red-300":"text-red-800"},disney:{bg:x?"bg-blue-900/30":"bg-blue-100",text:x?"text-blue-300":"text-blue-800"},max:{bg:x?"bg-yellow-900/30":"bg-yellow-100",text:x?"text-yellow-300":"text-yellow-800"},spotify:{bg:x?"bg-green-900/30":"bg-green-100",text:x?"text-green-300":"text-green-800"},default:{bg:x?"bg-gray-900/30":"bg-gray-100",text:x?"text-gray-300":"text-gray-700"}};return S[H?.toLowerCase()]||S.default},E=k.useMemo(()=>{let S=[...r.filter(N=>N.status==="soporte")].filter(N=>(N.productName||"").toLowerCase().includes(n.toLowerCase())||(N.customerName||N.buyerName||"").toLowerCase().includes(n.toLowerCase()));return p.key&&S.sort((N,I)=>{let R=N[p.key]||"",M=I[p.key]||"";return p.key==="soporteMessage"?(R=N.soporteMessage||"",M=I.soporteMessage||""):p.key==="category"&&(R=s(N.category),M=s(I.category)),typeof R=="string"&&(R=R.toLowerCase()),typeof M=="string"&&(M=M.toLowerCase()),R<M?p.direction==="asc"?-1:1:R>M?p.direction==="asc"?1:-1:0}),S},[r,n,p,s]),j=H=>{m(S=>({key:H,direction:S.key===H&&S.direction==="asc"?"desc":"asc"}))},P=H=>p.key!==H?null:p.direction==="asc"?o.jsx(tx,{className:"ml-1"}):o.jsx(ex,{className:"ml-1"}),V=()=>{const H=E.map(R=>{const M=R.customerName||R.buyerName||"N/A";return{Producto:R.productName||"Sin nombre",Categoría:s(R.category),Comprador:M,Teléfono:R.buyerPhone||"N/A",Email:R.accountDetails?.email||"N/A","Mensaje de Soporte":R.soporteMessage||"Sin mensaje","Fecha de Inicio":R.startDate?a(R.startDate):"N/A","Fecha de Vencimiento":R.endDate?a(R.endDate):"N/A"}}),S=gs.json_to_sheet(H),N=gs.book_new();gs.book_append_sheet(N,S,"Pedidos en Soporte");const I=new Date().toISOString().slice(0,10).replace(/-/g,"");dx(N,`pedidos_soporte_export_${I}.xlsx`)},L=async H=>{h(S=>({...S,[`reject_${H}`]:!0}));try{await va(vt(Fe,"sales",H),{status:"rechazado"},{merge:!0}),e(S=>S.map(N=>N.id===H?{...N,status:"rechazado"}:N)),t&&await t(),alert("Pedido rechazado exitosamente.")}catch(S){console.error("Error rejecting support:",S),alert("Error al rechazar el soporte.")}finally{h(S=>({...S,[`reject_${H}`]:!1}))}},K=async H=>{h(S=>({...S,[`solve_${H}`]:!0}));try{await va(vt(Fe,"sales",H),{status:"active"},{merge:!0}),e(S=>S.map(N=>N.id===H?{...N,status:"active"}:N)),t&&await t(),alert("Soporte solucionado y pedido activado exitosamente.")}catch(S){console.error("Error solving support:",S),alert("Error al solucionar el soporte.")}finally{h(S=>({...S,[`solve_${H}`]:!1}))}};return o.jsxs(re.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-7xl mx-auto border ${x?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:v,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"support-title",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 gap-4",children:[o.jsxs("h3",{id:"support-title",className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight flex items-center bg-clip-text text-transparent bg-gradient-to-r ${x?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,children:[o.jsx(Ga,{className:"mr-2"})," Pedidos en Soporte",o.jsx("span",{className:`ml-2 bg-gradient-to-r ${x?"from-blue-400/20 to-purple-600/20":"from-blue-600/20 to-purple-800/20"} px-2 py-1 rounded-full text-sm font-medium`,children:E.length})]}),o.jsxs("div",{className:"flex items-center gap-4 w-full lg:w-auto",children:[o.jsxs("div",{className:"relative flex-1 lg:w-80",children:[o.jsx("input",{type:"text",placeholder:"Buscar en soporte...",className:`w-full pl-10 pr-4 py-3 rounded-2xl shadow-md transition-all duration-300 ${x?"bg-gray-800/70 text-white border border-gray-600/50 placeholder-gray-400 focus:border-blue-500/50":"bg-white/70 text-gray-900 border border-gray-300/50 placeholder-gray-500 focus:border-blue-500/50"} focus:ring-2 focus:ring-blue-500/30 focus:outline-none`,value:n,onChange:H=>i(H.target.value),"aria-label":"Buscar en soporte"}),o.jsx(ga,{className:`absolute left-3 top-3.5 ${x?"text-gray-400":"text-gray-500"}`,size:18})]}),o.jsxs(re.button,{onClick:V,className:`p-3 rounded-2xl shadow-lg flex items-center gap-2 ${x?"bg-green-600/80 hover:bg-green-700/90 text-white":"bg-green-500/80 hover:bg-green-600/90 text-white"} transition-all duration-300`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Descargar pedidos en soporte como Excel","aria-label":"Exportar pedidos en soporte a Excel",children:[o.jsx(rx,{size:18}),o.jsx("span",{className:"hidden sm:inline text-sm",children:"Exportar"})]})]})]}),o.jsx(Vt,{children:E.length>0?o.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:o.jsx("div",{className:"overflow-x-auto rounded-2xl border border-gray-200/50 shadow-lg",children:o.jsxs("table",{className:`min-w-full divide-y divide-gray-200/30 ${x?"bg-gray-800/50":"bg-white/50"}`,children:[o.jsx("thead",{className:`${x?"bg-gray-700/60":"bg-gray-50/60"}`,children:o.jsx("tr",{children:[{key:"productName",label:"Producto"},{key:"category",label:"Categoría"},{key:null,label:"Comprador"},{key:null,label:"Teléfono"},{key:null,label:"Email"},{key:"soporteMessage",label:"Mensaje de Soporte"},{key:"startDate",label:"Fecha de Inicio"},{key:"endDate",label:"Fecha de Vencimiento"},{label:"Acciones"}].map(({key:H,label:S})=>o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${x?"text-gray-300":"text-gray-700"} ${H?"cursor-pointer hover:text-blue-400 transition-colors":""}`,onClick:()=>H&&j(H),children:o.jsxs("div",{className:"flex items-center justify-between",children:[S,H&&P(H)]})},H||S))})}),o.jsx("tbody",{className:"divide-y divide-gray-200/30",children:E.map(H=>{const S=H.buyerPhone?H.buyerPhone.replace(/^\+/,"").replace(/\D/g,""):null,N=H.customerName||H.buyerName||"N/A",I=encodeURIComponent(`Hola ${N}! 👋

📋 *Soporte para tu pedido de ${H.productName||"Sin nombre"}*:

Estamos revisando tu consulta. Por favor, describe el problema o pregunta para ayudarte mejor.

Detalles del pedido:
✉️ *Usuario*: ${H.accountDetails?.email||"N/A"}
🗓 *Inicio*: ${H.startDate?a(H.startDate):"N/A"}
🗓 *Vencimiento*: ${H.endDate?a(H.endDate):"N/A"}

¡Gracias por tu paciencia! 😊`),R=w(H.category);return o.jsxs(re.tr,{className:`transition-colors duration-200 ${x?"text-gray-300 hover:bg-gray-700/50":"text-gray-700 hover:bg-gray-50/50"}`,variants:_,initial:"hidden",animate:"visible",whileHover:"hover","aria-labelledby":`order-${H.id}-title`,children:[o.jsx("td",{className:"px-4 py-4",children:o.jsx("h4",{id:`order-${H.id}-title`,className:"font-semibold text-blue-500 hover:text-blue-600 transition-colors",children:H.productName||"Sin nombre"})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R.bg} ${R.text}`,children:s(H.category)})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap font-mono text-sm",children:N}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap font-mono text-sm",children:H.buyerPhone||"N/A"}),o.jsx("td",{className:"px-4 py-4 max-w-xs truncate",title:H.accountDetails?.email||"N/A",children:H.accountDetails?.email||"N/A"}),o.jsxs("td",{className:"px-4 py-4 max-w-xs",children:[o.jsx("p",{className:"text-sm break-words line-clamp-3 bg-gray-100/30 dark:bg-gray-800/30 p-2 rounded",title:H.soporteMessage||"Sin mensaje",children:H.soporteMessage||"Sin mensaje"}),H.soporteCreatedAt&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a(H.soporteCreatedAt)})]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:H.startDate?a(H.startDate):"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:H.endDate?a(H.endDate):"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex gap-2",children:[S&&o.jsx(re.a,{href:`https://wa.me/${S}?text=${I}`,target:"_blank",rel:"noopener noreferrer",className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-teal-500/80 hover:bg-teal-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Comunicarse con el usuario","aria-label":`Comunicarse con el usuario para el pedido ${H.productName}`,children:o.jsx(Ur,{size:16})}),o.jsx(re.button,{onClick:()=>L(H.id),disabled:d[`reject_${H.id}`],className:`p-2.5 rounded-xl shadow-md flex items-center justify-center ${d[`reject_${H.id}`]?"bg-gray-400 text-gray-500 cursor-not-allowed":"bg-red-500/80 hover:bg-red-600/90 text-white"} transition-all duration-200`,whileHover:d[`reject_${H.id}`]?{}:{scale:1.1},whileTap:d[`reject_${H.id}`]?{}:{scale:.9},title:"Rechazar soporte","aria-label":"Rechazar soporte",children:d[`reject_${H.id}`]?o.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):o.jsx(Lq,{size:16})}),o.jsx(re.button,{onClick:()=>K(H.id),disabled:d[`solve_${H.id}`],className:`p-2.5 rounded-xl shadow-md flex items-center justify-center ${d[`solve_${H.id}`]?"bg-gray-400 text-gray-500 cursor-not-allowed":"bg-green-500/80 hover:bg-green-600/90 text-white"} transition-all duration-200`,whileHover:d[`solve_${H.id}`]?{}:{scale:1.1},whileTap:d[`solve_${H.id}`]?{}:{scale:.9},title:"Solucionar soporte","aria-label":"Solucionar soporte",children:d[`solve_${H.id}`]?o.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):o.jsx(yd,{size:16})})]})})]},H.id)})})]})})}):o.jsxs(re.div,{className:"text-center py-16",variants:v,initial:"hidden",animate:"visible",children:[o.jsx(re.div,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:o.jsx(Ga,{className:`mx-auto text-6xl ${x?"text-gray-400":"text-gray-500"} mb-4`,"aria-hidden":"true"})}),o.jsx("h4",{className:`text-xl font-semibold ${x?"text-gray-300":"text-gray-700"} mb-2`,children:"No hay pedidos en soporte"}),o.jsx("p",{className:`text-sm ${x?"text-gray-400":"text-gray-600"}`,children:"Los pedidos en soporte aparecerán aquí"})]})})]})};HP.propTypes={orders:q.array.isRequired,setOrders:q.func,fetchOrders:q.func,searchQuery:q.string,setSearchQuery:q.func,getCategoryDisplayName:q.func.isRequired,formatDate:q.func.isRequired,theme:q.oneOf(["light","dark"])};const Ate=({editModalOpen:r,setEditModalOpen:e,selectedProduct:t,setSelectedProduct:n,editError:i,setEditError:s,handleFileChange:a,handleEditStockChange:c,handleEditAccountFieldChange:d,handleUpdateProduct:h,theme:p="dark"})=>{const m=p==="dark",x={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}}},v={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},_={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}},w=E=>{const{name:j,value:P,type:V,checked:L}=E.target;n(K=>({...K,[j]:V==="checkbox"?L:P,...j==="status"&&{stock:P==="Agotado"?0:K.stock||1,accounts:P==="En stock"?K.accounts.length?K.accounts:Array(K.stock||1).fill({email:"",password:"",profile:"",pin:""}):[]}}))};return r?o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(re.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl w-full max-w-6xl border max-h-[90vh] overflow-y-auto ${m?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:x,initial:"hidden",animate:"visible",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs(re.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${m?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:[o.jsx(rg,{className:"inline mr-2",size:32}),"Editar Producto"]}),o.jsx(re.button,{onClick:()=>e(!1),className:`${m?"bg-blue-500":"bg-blue-600"} text-white rounded-full p-1 shadow-md`,whileHover:{scale:1.1},whileTap:{scale:.9},children:o.jsx(Qi,{size:20})})]}),o.jsx(Vt,{children:i&&o.jsx(re.div,{className:`mb-8 p-4 border rounded-2xl ${m?"bg-red-900/30 border-red-700/50 text-red-300":"bg-red-100/30 border-red-300/50 text-red-700"}`,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:i})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",variants:v,initial:"hidden",animate:"visible",children:[o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${m?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:_,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${m?"text-blue-400":"text-blue-600"}`,children:[o.jsx(z6,{size:20}),"Imagen del producto"]}),o.jsx("div",{className:`flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-xl ${m?"bg-gray-900/80 border-gray-700/50":"bg-gray-200/80 border-gray-300/50"}`,children:t.image?o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:t.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain",loading:"lazy"}),o.jsx(re.button,{type:"button",onClick:()=>n({...t,image:""}),className:`absolute top-0 right-0 ${m?"bg-blue-500":"bg-blue-600"} text-white rounded-full p-1 shadow-md`,whileHover:{scale:1.1},whileTap:{scale:.9},children:o.jsx(Qi,{size:16})})]}):o.jsxs(o.Fragment,{children:[o.jsx(rg,{className:`mx-auto h-12 w-12 ${m?"text-gray-400":"text-gray-500"}`}),o.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:o.jsxs("label",{htmlFor:"edit-file-upload",className:`relative cursor-pointer rounded-xl font-medium ${m?"bg-gray-900/50 text-blue-400 hover:text-blue-500":"bg-gray-200/50 text-blue-600 hover:text-blue-700"} focus-within:outline-none`,children:[o.jsx("span",{children:"Subir una imagen"}),o.jsx("input",{id:"edit-file-upload",name:"edit-file-upload",type:"file",className:"sr-only",onChange:E=>a(E,!0),accept:"image/*"})]})}),o.jsx("p",{className:`text-xs ${m?"text-gray-500":"text-gray-600"}`,children:"PNG, JPG, GIF hasta 10MB"})]})})]}),o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${m?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:_,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${m?"text-purple-400":"text-purple-600"}`,children:[o.jsx(G6,{size:20}),"Información Básica"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Nombre del producto*"}),o.jsx("input",{type:"text",name:"name",value:t.name,onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500`,placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Categoría*"}),o.jsxs("select",{name:"category",value:t.category,onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all`,children:[o.jsx("option",{value:"Netflix",children:"Netflix"}),o.jsx("option",{value:"Spotify",children:"Spotify"}),o.jsx("option",{value:"Disney",children:"Disney+"}),o.jsx("option",{value:"Max",children:"Max"}),o.jsx("option",{value:"Prime Video",children:"Prime Video"}),o.jsx("option",{value:"Vix",children:"Vix"}),o.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),o.jsx("option",{value:"Canva",children:"Canva"}),o.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),o.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),o.jsx("option",{value:"Dgo",children:"DGO"}),o.jsx("option",{value:"Liga Max",children:"Liga Max"}),o.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),o.jsx("option",{value:"Youtube",children:"YouTube"}),o.jsx("option",{value:"Deezer",children:"Deezer"}),o.jsx("option",{value:"Tidal",children:"Tidal"}),o.jsx("option",{value:"Vpn",children:"VPN"}),o.jsx("option",{value:"WinTv",children:"WinTV"}),o.jsx("option",{value:"Apple Music",children:"CinePlanet"}),o.jsx("option",{value:"Apple Tv",children:"Apple TV"}),o.jsx("option",{value:"Iptv",children:"IPTV"}),o.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),o.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),o.jsx("option",{value:"Pornhub",children:"Pornhub"}),o.jsx("option",{value:"Paramount",children:"Paramount"}),o.jsx("option",{value:"Licencias",children:"Licencias"}),o.jsx("option",{value:"Capcut",children:"Capcut"}),o.jsx("option",{value:"Duolingo",children:"Duolingo"}),o.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Tipo de cuenta*"}),o.jsxs("select",{name:"accountType",value:t.accountType,onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all`,children:[o.jsx("option",{value:"Premium",children:"Premium"}),o.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Estado*"}),o.jsxs("select",{name:"status",value:t.status,onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all`,children:[o.jsx("option",{value:"En stock",children:"En stock"}),o.jsx("option",{value:"A pedido",children:"A pedido"}),o.jsx("option",{value:"Agotado",children:"Agotado"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Stock*"}),o.jsx("input",{type:"number",name:"stock",value:t.status==="Agotado"?0:t.stock,onChange:c,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all ${t.status==="Agotado"?"opacity-50 cursor-not-allowed":""} placeholder-gray-500`,min:"0",required:!0,disabled:t.status==="Agotado"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Precio (S/)*"}),o.jsx("input",{type:"number",name:"price",value:t.price,onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500`,placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",name:"renewal",checked:t.renewal,onChange:w,className:`h-4 w-4 rounded ${m?"text-purple-400 focus:ring-purple-400 border-gray-600/50":"text-purple-600 focus:ring-purple-600 border-gray-300/50"}`}),o.jsx("label",{className:`ml-2 text-sm ${m?"text-gray-300":"text-gray-700"}`,children:"¿Tiene renovación?"})]})]}),t.renewal&&o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Precio de renovación (S/)*"}),o.jsx("input",{type:"number",name:"renewalPrice",value:t.renewalPrice,onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500`,placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-6 mb-8",variants:v,initial:"hidden",animate:"visible",children:[o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${m?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:_,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${m?"text-green-400":"text-green-600"}`,children:[o.jsx(Rd,{size:20}),"Duración y Contacto"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Duración (días)"}),o.jsx("input",{type:"number",name:"duration",value:t.duration,onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500`,placeholder:"Dejar vacío para ilimitado",min:"1"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:["Teléfono de contacto ",t.status==="A pedido"?"*":""]}),o.jsx("input",{type:"text",name:"providerPhone",value:t.providerPhone,onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500`,placeholder:"Ej: +51 987654321",required:t.status==="A pedido"})]})]})]}),o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${m?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:_,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${m?"text-indigo-400":"text-indigo-600"}`,children:[o.jsx(H6,{size:20}),"Enlaces y Descripciones"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"URL del producto (opcional)"}),o.jsx("input",{type:"url",name:"productUrl",value:t.productUrl||"",onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition-all placeholder-gray-500`,placeholder:"Ej: https://www.ejemplo.com/producto"})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Detalles del producto"}),o.jsx("textarea",{name:"details",value:t.details,onChange:w,rows:"3",className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition-all placeholder-gray-500`,placeholder:"Describe los detalles y características del producto"})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Términos y condiciones"}),o.jsx("textarea",{name:"terms",value:t.terms,onChange:w,rows:"3",className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition-all placeholder-gray-500`,placeholder:"Especifica los términos y condiciones de uso"})]})]})]}),t.status==="En stock"&&o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${m?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:_,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${m?"text-pink-400":"text-pink-600"}`,children:[o.jsx(vd,{size:20}),"Cuentas Asociadas"]}),o.jsx("p",{className:`text-sm mb-4 ${m?"text-gray-400":"text-gray-600"}`,children:"Debe completar todas las cuentas según el stock indicado"}),o.jsx(Vt,{children:o.jsx("div",{className:"space-y-4",children:t.accounts.map((E,j)=>o.jsxs(re.div,{className:`border rounded-xl p-4 ${m?"bg-gray-900/70 border-gray-700/50":"bg-gray-200/70 border-gray-300/50"} backdrop-blur-sm`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:j*.1},children:[o.jsxs("h4",{className:`text-sm font-medium ${m?"text-white":"text-gray-900"} mb-3 flex items-center gap-2`,children:["Cuenta ",j+1]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-medium ${m?"text-gray-400":"text-gray-600"} mb-1`,children:"Correo electrónico*"}),o.jsx("input",{type:"email",value:E.email,onChange:P=>d(j,"email",P.target.value),className:`w-full px-3 py-2 rounded-xl border ${m?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all text-sm`,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-medium ${m?"text-gray-400":"text-gray-600"} mb-1`,children:"Contraseña*"}),o.jsx("input",{type:"text",value:E.password,onChange:P=>d(j,"password",P.target.value),className:`w-full px-3 py-2 rounded-xl border ${m?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all text-sm`,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-medium ${m?"text-gray-400":"text-gray-600"} mb-1`,children:"Perfil (opcional)"}),o.jsx("input",{type:"text",value:E.profile,onChange:P=>d(j,"profile",P.target.value),className:`w-full px-3 py-2 rounded-xl border ${m?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all text-sm`,placeholder:"Ej: Perfil 1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-medium ${m?"text-gray-400":"text-gray-600"} mb-1`,children:"PIN (opcional)"}),o.jsx("input",{type:"text",value:E.pin,onChange:P=>d(j,"pin",P.target.value),className:`w-full px-3 py-2 rounded-xl border ${m?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all text-sm`,placeholder:"Ej: 1234"})]})]})]},j))})})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[o.jsx(re.button,{onClick:()=>e(!1),className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 ${m?"from-gray-700 to-gray-600 hover:from-gray-600 hover:to-gray-500":"from-gray-300 to-gray-400 hover:from-gray-400 hover:to-gray-500"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cancelar"}),o.jsx(re.button,{onClick:h,className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-purple-500/50 ${m?"from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700":"from-purple-600 to-pink-800 hover:from-purple-700 hover:to-pink-900"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Actualizar Producto"})]})]})}):null},Nte=({editOrderModalOpen:r,setEditOrderModalOpen:e,selectedOrder:t,handleOrderAccountChange:n,editOrderError:i,setEditOrderError:s,handleUpdateOrder:a,theme:c="dark"})=>{const d=c==="dark",h={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}}},p={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},m={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return r?o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(re.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl w-full max-w-md border max-h-[90vh] overflow-y-auto ${d?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:h,initial:"hidden",animate:"visible",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs(re.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${d?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:[o.jsx(Zm,{className:"inline mr-2",size:32}),"Editar Detalles de Cuenta"]}),o.jsx(re.button,{onClick:()=>e(!1),className:`${d?"bg-blue-500":"bg-blue-600"} text-white rounded-full p-1 shadow-md`,whileHover:{scale:1.1},whileTap:{scale:.9},children:o.jsx(Qi,{size:20})})]}),o.jsx(Vt,{children:i&&o.jsx(re.div,{className:`mb-8 p-4 border rounded-2xl ${d?"bg-red-900/30 border-red-700/50 text-red-300":"bg-red-100/30 border-red-300/50 text-red-700"}`,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:i})}),o.jsx(re.div,{className:`border rounded-2xl p-6 shadow-xl backdrop-blur-sm ${d?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"} space-y-4`,variants:p,initial:"hidden",animate:"visible",children:o.jsxs(re.div,{className:"space-y-4",variants:m,whileHover:"hover",children:[o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium mb-2 flex items-center gap-2 ${d?"text-gray-300":"text-gray-700"}`,children:[o.jsx(nw,{size:16}),"Correo electrónico*"]}),o.jsx("input",{type:"email",name:"email",value:t.accountDetails.email,onChange:n,className:`w-full px-4 py-2 rounded-xl border ${d?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: usuario@ejemplo.com",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium mb-2 flex items-center gap-2 ${d?"text-gray-300":"text-gray-700"}`,children:[o.jsx(Zm,{size:16}),"Contraseña*"]}),o.jsx("input",{type:"text",name:"password",value:t.accountDetails.password,onChange:n,className:`w-full px-4 py-2 rounded-xl border ${d?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: contraseña123",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium mb-2 flex items-center gap-2 ${d?"text-gray-300":"text-gray-700"}`,children:[o.jsx(ki,{size:16}),"Perfil (opcional)"]}),o.jsx("input",{type:"text",name:"profile",value:t.accountDetails.profile,onChange:n,className:`w-full px-4 py-2 rounded-xl border ${d?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: Perfil 1"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium mb-2 flex items-center gap-2 ${d?"text-gray-300":"text-gray-700"}`,children:[o.jsx(Dq,{size:16}),"PIN (opcional)"]}),o.jsx("input",{type:"text",name:"pin",value:t.accountDetails.pin,onChange:n,className:`w-full px-4 py-2 rounded-xl border ${d?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: 1234"})]})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[o.jsx(re.button,{onClick:()=>e(!1),className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 ${d?"from-gray-700 to-gray-600 hover:from-gray-600 hover:to-gray-500":"from-gray-300 to-gray-400 hover:from-gray-400 hover:to-gray-500"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cancelar"}),o.jsx(re.button,{onClick:a,className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-purple-500/50 ${d?"from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700":"from-purple-600 to-pink-800 hover:from-purple-700 hover:to-pink-900"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Guardar Cambios"})]})]})}):null},kte=({users:r,providerBalance:e,handleRecharge:t,theme:n,userSearch:i,setUserSearch:s})=>{const a=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}},d={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},[h,p]=k.useState({}),m=(v,_)=>{p(w=>({...w,[v]:_}))},x=v=>{const _=parseFloat(h[v]);_&&_>0&&_<=e&&(t(v,_),p(w=>({...w,[v]:""})))};return o.jsxs(re.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${a?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:d,initial:"hidden",animate:"visible",children:[o.jsx(re.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-6 bg-clip-text text-transparent bg-gradient-to-r ${a?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:"Gestión de Recargas"}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"relative group",children:[o.jsx(ga,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${a?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,size:18}),o.jsx("input",{type:"text",placeholder:"Buscar usuarios por nombre o email...",value:i,onChange:v=>s(v.target.value),className:`w-full pl-10 pr-4 py-2.5 ${a?"bg-gray-800/50 border-gray-600/50 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-md`})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${a?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:c,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${a?"text-green-400":"text-green-600"}`,children:[o.jsx(Ki,{size:20}),"Tu Saldo Disponible"]}),o.jsxs("p",{className:`text-4xl font-bold ${a?"text-white":"text-gray-900"}`,children:["S/ ",e.toFixed(2)]}),o.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"} mt-2`,children:"Usa para recargar saldos de usuarios"})]}),o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${a?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:c,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${a?"text-blue-400":"text-blue-600"}`,children:[o.jsx(ki,{size:20}),"Total Usuarios"]}),o.jsx("p",{className:`text-4xl font-bold ${a?"text-white":"text-gray-900"}`,children:r.length}),o.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"} mt-2`,children:'Usuarios con rol "Usuario"'})]}),o.jsxs(re.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${a?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:c,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${a?"text-purple-400":"text-purple-600"}`,children:[o.jsx(Ki,{size:20}),"Saldo Total Distribuido"]}),o.jsxs("p",{className:`text-4xl font-bold ${a?"text-white":"text-gray-900"}`,children:["S/ ",r.reduce((v,_)=>v+(_.balance||0),0).toFixed(2)]}),o.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"} mt-2`,children:"Suma de saldos de usuarios"})]})]}),o.jsxs(re.div,{className:`bg-${a?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md border ${a?"border-gray-700/50":"border-gray-300"}`,variants:c,whileHover:"hover",children:[o.jsx("div",{className:"flex justify-between items-center mb-4",children:o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${a?"text-white":"text-gray-900"}`,children:["Lista de"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Usuarios"})," ","(",r.length,")"]})}),r.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[o.jsx("thead",{className:`${a?"bg-gray-800/50":"bg-gray-100"} backdrop-blur-sm`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${a?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(vc,{})," Usuario"]})}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${a?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(pd,{})," Email"]})}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${a?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Ki,{})," Saldo"]})}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${a?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Acciones"})]})}),o.jsx("tbody",{className:`${a?"bg-gray-800/50":"bg-white"} divide-y divide-gray-600/50`,children:r.map(v=>o.jsxs("tr",{className:`hover:bg-${a?"gray-700/50":"gray-100"} transition-all duration-300`,children:[o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${a?"text-white":"text-gray-900"}`,children:v.username||"Sin nombre"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${a?"text-gray-300":"text-gray-600"}`,children:v.email}),o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap ${a?"text-white":"text-gray-900"}`,children:["S/ ",(v.balance||0).toFixed(2)]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap flex space-x-2",children:o.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[o.jsx("input",{type:"number",placeholder:"Monto",value:h[v.id]||"",onChange:_=>m(v.id,_.target.value),className:`w-20 px-2 py-1 rounded ${a?"bg-gray-700/50 border-gray-500/50 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800"} text-sm focus:outline-none focus:ring-2 focus:ring-blue-400`,min:"0",step:"0.01",max:e}),o.jsx(re.button,{onClick:()=>x(v.id),className:`px-3 py-1 text-white rounded text-xs transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-green-500/50 ${a?"from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700":"from-green-600 to-emerald-700 hover:from-green-700 hover:to-emerald-800"}`,whileHover:{scale:1.02},whileTap:{scale:.98},disabled:!h[v.id]||parseFloat(h[v.id])<=0||parseFloat(h[v.id])>e,children:"Recargar"})]})})]},v.id))})]})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(wa,{className:`mx-auto text-4xl ${a?"text-blue-400":"text-blue-600"} mb-3`}),o.jsx("p",{className:`${a?"text-gray-300":"text-gray-600"}`,children:"No hay usuarios disponibles"})]})]})]})},Ste=$s.memo(({show:r,onClose:e,title:t,message:n,theme:i})=>o.jsx(Vt,{children:r&&o.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:e,role:"dialog","aria-labelledby":"modal-title",children:o.jsxs(re.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${i==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${i==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[o.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:o.jsx(ti,{size:20})}),o.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${i==="dark"?"text-white":"text-gray-900"}`,children:t}),o.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:n})]})})}));Ste.propTypes={show:q.bool.isRequired,onClose:q.func.isRequired,title:q.string.isRequired,message:q.string.isRequired,theme:q.string.isRequired};const WP=()=>{const[r,e]=k.useState(!1),[t,n]=k.useState("inicio"),[i,s]=k.useState("Usuario"),[a,c]=k.useState(""),[d,h]=k.useState(""),[p,m]=k.useState([]),[x,v]=k.useState([]),[_,w]=k.useState([]),[E,j]=k.useState([]),[P,V]=k.useState([]),[L,K]=k.useState(0),[H,S]=k.useState(0),[N,I]=k.useState(!0),[R,M]=k.useState(""),[D,F]=k.useState({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:Array(1).fill({email:"",password:"",profile:"",pin:""})}),[he,Ae]=k.useState(null),[Oe,De]=k.useState(!1),[we,_e]=k.useState(""),[Ne,ae]=k.useState(""),[W,ee]=k.useState(""),[te,ie]=k.useState({isOpen:!1,message:"",title:""}),[U,be]=k.useState({email:"",password:"",preferences:"",balance:0}),[Ce,ke]=k.useState(!1),[Ee,Ke]=k.useState(!0),[dt,zt]=k.useState(0),[bt,tr]=k.useState(!1),[Et,Pe]=k.useState(null),[Qt,St]=k.useState(""),[Be,ue]=k.useState("dark"),[rt,st]=k.useState(!1),[ht,Tt]=k.useState(!1),[lt,Ct]=k.useState([]),ct=Gs(),kr=lb(),ze=k.useCallback(O=>{const Q=new Date(O);return Q.setUTCHours(23,59,59,999),Q},[]),at=k.useCallback(()=>{ue(O=>O==="dark"?"light":"dark")},[]),Mt=k.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),xe=k.useCallback((O,Q)=>{ie({isOpen:!0,title:O,message:Q})},[]),Xe=k.useCallback(()=>{ie({isOpen:!1,message:"",title:""})},[]),et=k.useCallback(O=>{if(!O)return"No especificada";try{const Q=O instanceof Date?O:O?.toDate?.()||new Date(O);return isNaN(Q.getTime())?"Fecha inválida":Q.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(Q){return console.error("Error formatting date:",Q),"Fecha inválida"}},[]),ut=k.useCallback(O=>({netflix:"Netflix",spotify:"Spotify",disney:"Disney",max:"Max",primevideo:"Prime Video",vix:"Vix",crunchyroll:"Crunchyroll",canva:"Canva",chatgpt:"ChatGPT",redessociales:"Redes Sociales",dgo:"Dgo",ligamax:"Liga Max",movistarplay:"Movistar Play",youtube:"Youtube",deezer:"Deezer",tidal:"Tidal",vpn:"Vpn",wintv:"WinTv",applemusic:"Apple Music",appletv:"Apple TV",iptv:"Iptv",flujotv:"Flujo Tv",vikirakuten:"Viki Rakuten",pornhub:"Pornhub",paramount:"Paramount",licencias:"Licencias",capcut:"Capcut",duolingo:"Duolingo",buscapersonas:"BuscaPersonas"})[O?.toLowerCase()]||"Otro",[]);k.useEffect(()=>{const O=Nc(kr,Q=>{Q?(c(Q.email||""),h(Q.uid),Ot(Q.uid)):ct("/login")});return()=>O()},[kr,ct]);const Ot=async O=>{try{const Q=vt(Fe,"users",O),oe=await ol(Q);if(oe.exists()){const se=oe.data();s(se.username||"Usuario"),be({email:se.email||"",password:"",preferences:se.preferences||"",balance:se.balance||0})}I(!1)}catch(Q){M("Error al cargar datos del usuario"),console.error("Error fetching user data:",Q),I(!1)}};k.useEffect(()=>{if(!d)return;const O=vt(Fe,"users",d);return dr(O,oe=>{if(oe.exists()){const se=oe.data();be(ce=>({...ce,email:se.email||ce.email,preferences:se.preferences||ce.preferences,balance:se.balance||0})),s(se.username||prev.username),K(se.userAssignmentLimit||0),S(se.assignedUsersCount||0)}},oe=>{console.error("Error listening to user data:",oe)})},[d]),k.useEffect(()=>{a&&(async Q=>{try{const oe=await ol(vt(Fe,"admins",Q));ke(oe.exists())}catch(oe){console.error("Error checking admin status:",oe)}})(a)},[a]),k.useEffect(()=>{const O=dr(vt(Fe,"notifications","adminMessage"),Q=>{if(Q.exists()){const oe=Q.data(),se=Ce?"admin":"provider";oe.roles&&oe.roles.includes(se)?Ct([{id:Q.id,...oe,timestamp:oe.updatedAt?.toDate()}]):Ct([])}else Ct([])},Q=>{console.error("Error in notifications listener:",Q),M("Error al cargar notificaciones: "+Q.message)});return()=>O()},[Ce]),k.useEffect(()=>{const O=ur(It(Fe,"users"),gr("role","==","user")),Q=dr(O,oe=>{const se=oe.docs.map(ce=>({id:ce.id,...ce.data()}));j(se)},oe=>{console.error("Error fetching users:",oe),M("Error al cargar usuarios")});return()=>Q()},[]),k.useEffect(()=>{const O=It(Fe,"users"),Q=dr(O,oe=>{const ce=oe.docs.map(fe=>({id:fe.id,...fe.data()})).filter(fe=>!fe.role);V(ce)},oe=>{console.error("Error fetching unassigned users:",oe),M("Error al cargar usuarios sin rol")});return()=>Q()},[]),k.useEffect(()=>{if(!i)return;const O=ur(It(Fe,"products"),gr("provider","==",i)),Q=dr(O,oe=>{const se=oe.docs.map(ce=>({id:ce.id,...ce.data()}));v(se)},oe=>{console.error("Error fetching products:",oe),M("Error al cargar productos")});return()=>Q()},[i]),k.useEffect(()=>{if(!d)return;const O=ur(It(Fe,"sales"),gr("providerId","==",d)),Q=dr(O,async se=>{if(se.empty){m([]),Ke(!1);return}const ce=new Date,fe=7200*60*1e3;for(const qe of se.docs){let Le=qe.data().endDate,At=Le instanceof or?Le.toDate():typeof Le=="string"?new Date(Le):new Date(Le);const Bt=ze(At);if(Bt<ce&&ce.getTime()-Bt.getTime()>fe)try{await za(vt(Fe,"sales",qe.id)),console.log(`Deleted expired order: ${qe.id}`)}catch($t){console.error(`Error deleting order ${qe.id}:`,$t)}}const je=se.docs.map(qe=>{const Re=qe.data(),At=Re.saleDate?.toDate?.()||Re.createdAt?.toDate?.()||new Date;let Bt=Re.startDate?.toDate?.(),$t=Bt||At,nr=!Bt;const ri=Number(Re.durationDays)||30;let Un;Re.endDate?Un=typeof Re.endDate=="string"?new Date(Re.endDate):Re.endDate.toDate?.()||new Date(Re.endDate):(Un=new Date($t.getTime()+ri*24*60*60*1e3),nr=!0),nr&&Pr(vt(Fe,"sales",qe.id),{startDate:Bt||or.fromDate(At),endDate:or.fromDate(ze(Un)),durationDays:ri}).catch(fo=>{console.error("Error al actualizar startDate/endDate en Firestore:",fo)});const zn=ze(Un),Vr=zn.getTime()-$t.getTime(),Ys=ce.getTime()-$t.getTime(),Tr=zn.getTime()-ce.getTime(),Aa=Math.max(1,Math.ceil(Vr/(1e3*60*60*24))),$c=Math.max(0,Math.ceil(Tr/(1e3*60*60*24))),Bc=Math.ceil(Ys/(1e3*60*60*24)),ho=Aa>0?Math.min(100,Bc/Aa*100):100;return{id:qe.id,...Re,productName:Re.productName||"Producto sin nombre",category:Re.type||"netflix",amount:parseFloat(Re.price)||0,buyer:Re.buyerName||Re.customerName||"Comprador desconocido",buyerPhone:Re.buyerPhone||"No especificado",buyerEmail:Re.customerEmail||"No especificado",status:Re.status||"completed",saleDate:At,startDate:$t,endDate:Un,durationDays:ri,daysRemaining:$c,totalDays:Aa,timeElapsedPercentage:ho,accountDetails:Re.accountDetails||{email:"No disponible",password:"No disponible",profile:"N/A",pin:""},balance:parseFloat(Re.price)||0}}).filter(qe=>{const Re=ze(qe.endDate);return!(Re<ce&&ce.getTime()-Re.getTime()>fe)});m(je);const Ve=je.filter(qe=>qe.status==="completed"&&qe.accountDetails).map(qe=>({...qe.accountDetails,productName:qe.productName,saleDate:qe.saleDate,orderId:qe.id}));w(Ve),Ke(!1)},se=>{console.error("Error fetching sales:",se),M("Error al cargar ventas"),Ke(!1)}),oe=setInterval(()=>{m(se=>se.map(ce=>{const fe=new Date,je=ze(ce.endDate),Ve=je.getTime()-new Date(ce.startDate).getTime(),qe=fe.getTime()-new Date(ce.startDate).getTime(),Re=je.getTime()-fe.getTime(),Le=Math.max(1,Math.ceil(Ve/(1e3*60*60*24))),At=Math.max(0,Math.ceil(Re/(1e3*60*60*24))),Bt=Math.ceil(qe/(1e3*60*60*24)),$t=Le>0?Math.min(100,Bt/Le*100):100;return{...ce,daysRemaining:At,totalDays:Le,timeElapsedPercentage:$t}}).filter(ce=>{const fe=ze(ce.endDate),je=new Date,Ve=7200*60*1e3;return!(fe<je&&je.getTime()-fe.getTime()>Ve)}))},6e4);return()=>{Q(),clearInterval(oe)}},[d,ze]),k.useEffect(()=>{if(!i)return;const O=vt(Fe,"providerBalances",i),Q=dr(O,oe=>{oe.exists()?zt(oe.data().balance||0):(va(O,{balance:0,provider:i,updatedAt:Er()}),zt(0)),Ke(!1)},oe=>{console.error("Error fetching provider balance:",oe),M("Error al cargar el saldo del proveedor"),Ke(!1)});return()=>Q()},[i]);const Ht=k.useCallback(async O=>{if(H>=L){xe("Error","Has alcanzado el límite de asignaciones de roles");return}try{await HT(Fe,async Q=>{const oe=vt(Fe,"users",O),se=vt(Fe,"users",d),ce=await Q.get(oe),fe=await Q.get(se);if(!ce.exists()||ce.data().role)throw new Error("Usuario no válido o ya tiene rol");Q.update(oe,{role:"user",updatedAt:Er()}),Q.update(se,{assignedUsersCount:(fe.data().assignedUsersCount||0)+1,updatedAt:Er()})}),V(Q=>Q.filter(oe=>oe.id!==O)),S(Q=>Q+1),xe("Éxito","Rol de usuario asignado correctamente")}catch(Q){console.error("Error assigning role:",Q),xe("Error",Q.message||"Error al asignar rol")}},[d,H,L,xe]),Kt=k.useCallback(async(O,Q)=>{if(!Q||Q<=0){xe("Error","El monto debe ser mayor a 0");return}if(Q>U.balance){xe("Error","Saldo insuficiente en tu cuenta");return}try{await HT(Fe,async oe=>{const se=vt(Fe,"users",d),ce=vt(Fe,"users",O),fe=await oe.get(se),je=await oe.get(ce);if(!fe.exists())throw new Error("Cuenta no encontrada");if(!je.exists())throw new Error("Usuario destino no encontrado");const Ve=(fe.data().balance||0)-Q,qe=(je.data().balance||0)+Q;if(Ve<0)throw new Error("Saldo insuficiente");oe.update(se,{balance:Ve,updatedAt:Er()}),oe.update(ce,{balance:qe,updatedAt:Er()})}),be(oe=>({...oe,balance:oe.balance-Q})),j(oe=>oe.map(se=>se.id===O?{...se,balance:(se.balance||0)+Q}:se)),xe("Éxito",`Transferencia de S/ ${Q.toFixed(2)} exitosa`)}catch(oe){console.error("Error en recarga:",oe),xe("Error",oe.message||"Error al procesar la recarga")}},[U.balance,d,xe]),pt=k.useCallback(async()=>{try{await $h(kr),ct("/login")}catch(O){console.error("Error al cerrar sesión:",O),xe("Error",O.message||"Error al cerrar sesión")}},[ct,xe]),nt=k.useCallback(O=>{const{name:Q,value:oe,type:se,checked:ce}=O.target;F(fe=>({...fe,[Q]:se==="checkbox"?ce:oe}))},[]),Lt=k.useCallback(O=>{const{name:Q,value:oe}=O.target;be(se=>({...se,[Q]:oe}))},[]),qt=k.useCallback((O,Q=!1)=>{const oe=O.target.files[0];if(oe){if(oe.size>10485760){Q?_e("La imagen no debe exceder los 10MB"):M("La imagen no debe exceder los 10MB");return}const ce=new FileReader;ce.onloadend=()=>{Q?Ae(fe=>({...fe,image:ce.result})):F(fe=>({...fe,image:ce.result}))},ce.readAsDataURL(oe)}},[]),hr=k.useCallback(O=>{const Q=parseInt(O.target.value)||1,oe=D.accounts||[];if(Q>oe.length){const se=[...oe];for(;se.length<Q;)se.push({email:"",password:"",profile:"",pin:""});F({...D,stock:Q,accounts:se})}else if(Q<oe.length){const se=oe.slice(0,Math.max(Q,1));F({...D,stock:Q,accounts:se})}else F({...D,stock:Q})},[D]),xn=k.useCallback(O=>{const Q=parseInt(O.target.value)||1;let se=[...he.accounts||[]];if(Q>se.length)for(;se.length<Q;)se.push({email:"",password:"",profile:"",pin:""});else Q<se.length&&(se=se.slice(0,Math.max(Q,1)));Ae({...he,stock:Q,accounts:se})},[he]),yn=k.useCallback((O,Q,oe)=>{const se=[...D.accounts];se[O]={...se[O],[Q]:oe},F({...D,accounts:se})},[D]),Pi=k.useCallback((O,Q,oe)=>{Ae(se=>({...se,accounts:se.accounts.map((ce,fe)=>fe===O?{...ce,[Q]:oe}:ce)}))},[]),tn=k.useCallback(O=>{const{name:Q,value:oe}=O.target;Pe(se=>({...se,accountDetails:{...se.accountDetails,[Q]:oe}}))},[]),Zi=k.useCallback(async()=>{if(M(""),!D.name||!D.price){xe("Error","Por favor complete todos los campos obligatorios");return}if(D.renewal&&!D.renewalPrice){xe("Error","Por favor ingrese el precio de renovación");return}if(D.status==="En stock"&&D.accounts.some(Q=>!Q.email||!Q.password)){xe("Error","Por favor complete todos los campos de las cuentas");return}try{const O={...D,provider:i,providerId:d,providerPhone:D.status==="En stock"?D.providerPhone||"":D.providerPhone||"No especificado",createdAt:Er(),availableAccounts:D.status==="En stock"?D.accounts.length:0},Q=await tl(It(Fe,"products"),O);if(D.status==="En stock"){const oe=It(Fe,`products/${Q.id}/accounts`);for(const se of D.accounts)await tl(oe,{email:se.email,password:se.password,profile:se.profile||"",pin:se.pin||"",status:"available"})}F({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:[{email:"",password:"",profile:"",pin:""}]}),n("inventario"),xe("Éxito","Producto subido exitosamente!")}catch(O){console.error("Error al subir el producto:",O),xe("Error",`Error al subir el producto: ${O.message}`)}},[D,i,d,xe]),wr=k.useCallback(async O=>{_e("");try{const Q=ur(It(Fe,"sales"),gr("providerId","==",d),gr("productName","==",O.name)),se=(await pn(Q)).docs.filter(Ve=>Ve.data().status==="completed"&&Ve.data().accountDetails?.email).map(Ve=>Ve.data().accountDetails.email),ce=It(Fe,`products/${O.id}/accounts`),je=(await pn(ce)).docs.filter(Ve=>Ve.data().status==="available").map(Ve=>({email:Ve.data().email||"",password:Ve.data().password||"",profile:Ve.data().profile||"",pin:Ve.data().pin||""}));Ae({id:O.id,name:O.name||"",image:O.image||"",category:O.category||"Netflix",accountType:O.accountType||"Premium",status:O.status||"En stock",stock:je.length||O.stock||1,price:O.price||"",renewal:O.renewal||!1,renewalPrice:O.renewalPrice||"",duration:O.duration||"",providerPhone:O.providerPhone||"",details:O.details||"",terms:O.terms||"",providerId:O.providerId||d,accounts:O.status==="En stock"?je.length>0?je:Array(Math.max(O.stock||1,1)).fill({email:"",password:"",profile:"",pin:""}):[]}),De(!0)}catch(Q){console.error("Error al preparar edición del producto:",Q),_e("Error al preparar edición del producto")}},[d]),es=k.useCallback(async()=>{if(_e(""),!he.name||!he.price){_e("Por favor complete todos los campos obligatorios");return}if(he.renewal&&!he.renewalPrice){_e("Por favor ingrese el precio de renovación");return}if(he.status==="En stock"&&he.accounts.some(Q=>!Q.email||!Q.password)){_e("Por favor complete todos los campos de las cuentas");return}try{const O=vt(Fe,"products",he.id);if(await va(O,{...he,providerId:he.providerId||d,availableAccounts:he.status==="En stock"&&he.accounts?.length||0},{merge:!0}),he.status==="En stock"){const Q=It(Fe,`products/${he.id}/accounts`),oe=await pn(Q);for(const se of oe.docs)await za(se.ref);for(const se of he.accounts)await tl(Q,{email:se.email,password:se.password,profile:se.profile||"",pin:se.pin||"",status:"available"})}De(!1),xe("Éxito","Producto actualizado exitosamente!")}catch(O){console.error("Error al actualizar el producto:",O),_e(`Error al actualizar el producto: ${O.message}`)}},[he,d,xe]),qr=k.useCallback(O=>{Pe(O),tr(!0)},[]),Ri=k.useCallback(async()=>{if(Et)try{const O=vt(Fe,"sales",Et.id);await Pr(O,{...Et,updatedAt:Er()}),tr(!1),xe("Éxito","Pedido actualizado exitosamente!")}catch(O){console.error("Error al actualizar el pedido:",O),St(`Error al actualizar el pedido: ${O.message}`)}},[Et,xe]),hi=k.useCallback(async O=>{try{const Q=vt(Fe,"sales",O);await Pr(Q,{status:"completed"}),xe("Éxito","Pedido activado exitosamente!")}catch(Q){console.error("Error al activar el pedido:",Q),xe("Error",`Error al activar el pedido: ${Q.message}`)}},[xe]),ji=k.useCallback(async O=>{try{await za(vt(Fe,"sales",O)),xe("Éxito","Pedido eliminado exitosamente!")}catch(Q){console.error("Error al eliminar el pedido:",Q),xe("Error",`Error al eliminar el pedido: ${Q.message}`)}},[xe]),z=k.useCallback(async O=>{O.preventDefault();try{const Q={updatedAt:Er()};U.email&&(Q.email=U.email),U.preferences&&(Q.preferences=U.preferences),await Pr(vt(Fe,"users",d),Q),xe("Éxito","Cuenta actualizada exitosamente!")}catch(Q){console.error("Error al actualizar la cuenta:",Q),xe("Error",`Error al actualizar la cuenta: ${Q.message}`)}},[U,d,xe]),J=k.useCallback(async O=>{try{await za(vt(Fe,"products",O)),xe("Éxito","Producto eliminado exitosamente!")}catch(Q){console.error("Error al eliminar el producto:",Q),xe("Error",`Error al eliminar el producto: ${Q.message}`)}},[xe]),Y=k.useMemo(()=>x.reduce((O,Q)=>O+(Q.availableAccounts||0),0),[x]),X=k.useMemo(()=>p.reduce((O,Q)=>O+(Q.balance||0),0),[p]),Z=k.useCallback(()=>{if(N)return o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});if(R)return o.jsxs("div",{className:`bg-${Be==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${Be==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsx(yc,{className:"mx-auto text-4xl text-red-400 mb-4"}),o.jsx("h3",{className:`text-xl font-bold ${Be==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Error"}),o.jsx("p",{className:`text-base ${Be==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:R}),o.jsx("button",{onClick:()=>M(null),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Aceptar"})]});const O=E.filter(Q=>Q.username?.toLowerCase().includes(W.toLowerCase())||Q.email?.toLowerCase().includes(W.toLowerCase()));return o.jsx("div",{className:`bg-${Be==="dark"?"black/50":"white"}
    backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md 
    w-full xl:max-w-full border ${Be==="dark"?"border-gray-700/50":"border-gray-300"} overflow-x-auto`,children:(()=>{switch(t){case"inicio":return o.jsx(BP,{username:i,products:x,orders:p,providerBalance:dt,balanceLoading:Ee,totalStock:Y,totalEarnings:X,isAdmin:Ce,email:a,setActiveSection:n,formatDate:et,notifications:lt,theme:Be});case"inventario":return o.jsx(UP,{products:x,setActiveSection:n,handleEdit:wr,handleDelete:J,getCategoryDisplayName:ut,totalStock:Y,theme:Be});case"cuentas":return o.jsx(wte,{soldAccounts:_,formatDate:et});case"subirProducto":return o.jsx(_te,{product:D,setProduct:F,handleChange:nt,handleFileChange:qt,handleStockChange:hr,handleAccountFieldChange:yn,handleSubmit:Zi,setActiveSection:n});case"ganancias":return o.jsx(Ete,{orders:p,totalEarnings:X,providerBalance:dt,balanceLoading:Ee,getCategoryDisplayName:ut,formatDate:et});case"pedidos":return o.jsx(zP,{orders:p,searchQuery:Ne,setSearchQuery:ae,getCategoryDisplayName:ut,formatDate:et,handleEditOrder:qr,handleActivateOrder:hi,handleDeleteOrder:ji,theme:Be});case"recargas":return o.jsx(kte,{users:O,providerBalance:U.balance||0,handleRecharge:Kt,formatDate:et,theme:Be,userSearch:W,setUserSearch:ee});case"afiliar":return o.jsxs("div",{className:`bg-${Be==="dark"?"black/50":"white"} backdrop-blur-md p-6 rounded-2xl shadow-md border ${Be==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[o.jsx("h3",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${Be==="dark"?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Afiliar Usuarios"}),o.jsx("div",{className:"mt-4 sm:mt-0",children:o.jsxs("p",{className:`text-sm ${Be==="dark"?"text-gray-400":"text-gray-600"}`,children:["Asignados: ",H," / ",L," | Restantes: ",Math.max(0,L-H)]})})]}),P.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[o.jsx("thead",{className:`backdrop-blur-sm ${Be==="dark"?"bg-gray-900/80":"bg-gray-200/80"}`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${Be==="dark"?"text-gray-300":"text-gray-700"}`,children:"Nombre"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${Be==="dark"?"text-gray-300":"text-gray-700"}`,children:"Email"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${Be==="dark"?"text-gray-300":"text-gray-700"}`,children:"Fecha Creación"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${Be==="dark"?"text-gray-300":"text-gray-700"}`,children:"Asignar"})]})}),o.jsx("tbody",{className:`divide-y divide-gray-700/50 ${Be==="dark"?"bg-gray-800/70":"bg-gray-100/70"}`,children:P.map(Q=>o.jsxs("tr",{className:"hover:bg-blue-500/10 transition-all duration-300",children:[o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${Be==="dark"?"text-white":"text-gray-900"}`,children:Q.username||"Sin nombre"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${Be==="dark"?"text-gray-300":"text-gray-600"}`,children:Q.email||"No especificado"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${Be==="dark"?"text-gray-300":"text-gray-600"}`,children:et(Q.createdAt)}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:o.jsx("input",{type:"checkbox",onChange:oe=>{oe.target.checked&&Ht(Q.id)},disabled:H>=L,className:`h-4 w-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 ${Be==="dark"?"bg-gray-700 border-gray-600 text-blue-400":""} ${H>=L?"cursor-not-allowed opacity-50":"cursor-pointer"}`})})]},Q.id))})]})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(wa,{className:`mx-auto text-4xl ${Be==="dark"?"text-gray-400":"text-gray-500"} mb-3`}),o.jsx("h4",{className:`text-lg font-medium ${Be==="dark"?"text-gray-300":"text-gray-700"}`,children:"No hay usuarios sin rol"}),o.jsx("p",{className:`text-sm ${Be==="dark"?"text-gray-400":"text-gray-600"}`,children:"Todos los usuarios disponibles han sido afiliados."})]})]});case"configuracion":return o.jsx(Tte,{accountDetails:U,handleAccountChange:Lt,handleUpdateAccount:z});case"soporte":return o.jsx(HP,{orders:p,setOrders:m,searchQuery:Ne,setSearchQuery:ae,getCategoryDisplayName:ut,formatDate:et,theme:Be,username:i,email:a,showModal:xe});default:return o.jsxs("div",{className:`bg-${Be==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${Be==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsx(yc,{className:"mx-auto text-4xl text-red-400 mb-4"}),o.jsx("h3",{className:`text-xl font-bold ${Be==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Sección no encontrada"}),o.jsx("p",{className:`text-base ${Be==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:"La sección que estás buscando no existe o no está disponible."}),o.jsx("button",{onClick:()=>n("inicio"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Volver al inicio"})]})}})()})},[N,R,Be,t,i,x,p,dt,Ee,Y,X,Ce,a,n,et,wr,J,ut,_,D,F,nt,qt,hr,yn,Zi,Ne,ae,qr,hi,ji,U,Lt,z,xe,lt,E,W,Kt,P,H,L,Ht]);return k.useEffect(()=>{const O=()=>{st(window.scrollY>300)};return window.addEventListener("scroll",O),()=>window.removeEventListener("scroll",O)},[]),o.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${Be==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-50 to-gray-50 text-gray-900"} font-inter relative overflow-x-hidden`,children:[o.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[o.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${Be==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),o.jsx("div",{className:"particles",children:[...Array(15)].map((O,Q)=>o.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},Q))})]}),o.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${Be==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r overflow-y-auto lg:shadow-md`,children:o.jsxs("div",{className:"p-4 flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("button",{onClick:()=>{ct("/"),e(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),o.jsx("button",{onClick:()=>e(!1),className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:o.jsx(ti,{className:"text-lg"})})]}),o.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${Be==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("p",{className:`font-medium ${Be==="dark"?"text-white":"text-gray-900"}`,children:i}),o.jsx("p",{className:`text-xs ${Be==="dark"?"text-gray-400":"text-gray-600"}`,children:Ce?"Admin":"Proveedor"})]})]}),o.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Z2},{id:"inventario",label:"Inventario",icon:yq},{id:"cuentas",label:"Cuentas Vendidas",icon:gd},{id:"pedidos",label:"Pedidos",icon:gd},{id:"recargas",label:"Recargas",icon:ma},{id:"ganancias",label:"Ganancias",icon:ma},{id:"subirProducto",label:"Subir Producto",icon:Sq},{id:"afiliar",label:"Afiliar",icon:wa},{id:"soporte",label:"Soporte",icon:Nq},{id:"configuracion",label:"Configuración",icon:Jm}].map(O=>o.jsxs("button",{onClick:()=>{n(O.id),e(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${t===O.id?"bg-blue-100 text-blue-600 border border-blue-300":Be==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":t===O.id?"page":void 0,children:[o.jsx(O.icon,{className:"text-lg"}),o.jsx("span",{children:O.label})]},O.id))}),o.jsx("div",{className:"mt-auto pt-6",children:o.jsxs("button",{onClick:()=>{pt(),e(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${Be==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[o.jsx(xd,{className:"text-lg"}),o.jsx("span",{children:"Cerrar Sesión"})]})})]})}),o.jsxs("header",{className:`${Be==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md py-4 px-4 sm:px-6 lg:px-8 flex items-center justify-between shadow-md fixed top-0 left-0 right-0 z-50 lg:ml-64`,children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(re.img,{src:Dc,alt:"BlackStreaming logo",className:`h-10 w-10 rounded-full border ${Be==="dark"?"border-gray-700/50":"border-gray-300"} shadow-sm lg:hidden`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),o.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),o.jsx("div",{className:"flex-1 mx-4 max-w-lg",children:o.jsxs("div",{className:"relative group",children:[o.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:Ne,onChange:O=>ae(O.target.value),className:`w-full py-2.5 px-5 ${Be==="dark"?"bg-gray-800/50 border-gray-600/50 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-md`,"aria-label":"Search orders",onKeyDown:O=>O.key==="Enter"&&n("pedidos")}),o.jsx("button",{onClick:()=>n("pedidos"),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${Be==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Search",children:o.jsx(md,{size:18})})]})}),o.jsxs("nav",{className:"flex items-center space-x-4 relative",children:[o.jsx("button",{onClick:at,className:`p-2 rounded-full ${Be==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Switch to ${Be==="dark"?"light":"dark"} theme`,children:Be==="dark"?o.jsx(jc,{size:20}):o.jsx(Rc,{size:20})}),o.jsxs("button",{onClick:()=>Tt(!0),className:`p-2 rounded-full relative ${Be==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Notifications (${lt.length} new)`,children:[o.jsx(xc,{size:20}),lt.length>0&&o.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:lt.length})]}),o.jsx("button",{className:`lg:hidden p-2 rounded-full ${Be==="dark"?"hover:bg-gray-700/50":"hover:bg-gray-100"} transition-all duration-300`,onClick:()=>e(!r),"aria-label":"Toggle mobile menu","aria-expanded":r,children:o.jsx(Zg,{size:20,className:Be==="dark"?"text-gray-300":"text-gray-600"})}),o.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o.jsx("div",{className:"relative",children:o.jsxs("button",{className:`flex items-center space-x-2 ${Be==="dark"?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-md transition-all duration-300`,"aria-label":"User menu",children:[o.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:i.charAt(0).toUpperCase()}),o.jsx("span",{className:`text-sm font-semibold ${Be==="dark"?"text-gray-200":"text-gray-800"}`,children:i})]})})})]})]}),o.jsx(Vt,{children:ht&&o.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>Tt(!1),role:"dialog","aria-labelledby":"notifications-title",children:o.jsxs(re.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 lg:max-w-lg ${Be==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${Be==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:O=>O.stopPropagation(),children:[o.jsx("button",{onClick:()=>Tt(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notifications",children:o.jsx(ti,{size:20})}),o.jsx("h2",{id:"notifications-title",className:`text-xl font-bold mb-4 ${Be==="dark"?"text-white":"text-gray-900"}`,children:"Notificaciones"}),lt.length>0?lt.map(O=>o.jsxs("div",{className:`p-4 mb-2 rounded-md ${Be==="dark"?"bg-gray-800/50":"bg-gray-100/80"} border-l-4 ${Be==="dark"?"border-blue-500/50":"border-blue-300/50"}`,children:[o.jsx("h3",{className:`font-semibold ${Be==="dark"?"text-gray-200":"text-gray-800"}`,children:O.title||"Nueva Notificación"}),o.jsx("p",{className:`text-sm ${Be==="dark"?"text-gray-300":"text-gray-700"} mt-1`,children:O.message}),O.roles&&O.roles.length>0&&o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Roles: ",O.roles.join(", ")]}),O.timestamp&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:et(O.timestamp)})]},O.id)):o.jsx("p",{className:`text-center ${Be==="dark"?"text-gray-400":"text-gray-600"} mt-4`,children:"No hay notificaciones."})]})})}),o.jsx("main",{className:"lg:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start",children:Z()}),o.jsxs("footer",{className:`${Be==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md px-4 sm:px-6 lg:px-8 py-12 text-center relative z-10 lg:ml-64 max-w-6xl mx-auto rounded-2xl border ${Be==="dark"?"border-gray-700/50":"border-gray-300"} mt-8 shadow-md`,children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-4",children:"BlackStreaming"}),o.jsxs("p",{className:`text-base sm:text-lg ${Be==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["Todos los derechos reservados. Desarrollado por"," ",o.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Saiph"}),"."]}),o.jsxs("div",{className:"flex justify-center space-x-6 sm:space-x-8 mb-6",children:[o.jsx("a",{href:"https://twitter.com",className:`${Be==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Twitter",children:o.jsx(Pc,{size:28})}),o.jsx("a",{href:"https://instagram.com",className:`${Be==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Instagram",children:o.jsx(Ic,{size:28})}),o.jsx("a",{href:"https://facebook.com",className:`${Be==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Facebook",children:o.jsx(Cc,{size:28})})]}),o.jsxs("div",{className:"flex justify-center space-x-4 sm:space-x-6",children:[o.jsx("a",{href:"#",className:`text-sm ${Be==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Privacy Policy",children:"Política de Privacidad"}),o.jsx("a",{href:"#",className:`text-sm ${Be==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Terms of Service",children:"Términos de Servicio"}),o.jsx("a",{href:"#",className:`text-sm ${Be==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Contact Us",children:"Contáctanos"})]})]}),o.jsxs("p",{className:`text-sm ${Be==="dark"?"text-gray-500":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Hecho con pasión."]})]}),o.jsx(Vt,{children:rt&&o.jsx(re.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Mt,className:"fixed bottom-6 right-6 bg-blue-600/90 backdrop-blur-md p-3 rounded-full hover:bg-blue-700/95 shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 lg:bottom-8 lg:right-8","aria-label":"Back to top",children:o.jsx(Jg,{size:20})})}),o.jsx(bte,{isOpen:te.isOpen,title:te.title,message:te.message,onClose:Xe}),o.jsx(Ate,{editModalOpen:Oe,setEditModalOpen:De,selectedProduct:he,setSelectedProduct:Ae,editError:we,setEditError:_e,handleFileChange:qt,handleEditStockChange:xn,handleEditAccountFieldChange:Pi,handleUpdateProduct:es}),o.jsx(Nte,{editOrderModalOpen:bt,setEditOrderModalOpen:tr,selectedOrder:Et,handleOrderAccountChange:tn,editOrderError:Qt,setEditOrderError:St,handleUpdateOrder:Ri}),r&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 lg:hidden",onClick:()=>e(!1),"aria-hidden":"true"})]})};WP.propTypes={};const Cte=()=>{const[r,e]=k.useState(""),[t,n]=k.useState(""),[i,s]=k.useState(0),[a,c]=k.useState([]),[d,h]=k.useState([]),[p,m]=k.useState([]),[x,v]=k.useState([]),[_,w]=k.useState([]),[E,j]=k.useState(0),[P,V]=k.useState({day:0,week:0,month:0,total:0}),[L,K]=k.useState(!0),[H,S]=k.useState(null),[N,I]=k.useState("dark"),R=Gs();k.useEffect(()=>{const F=Nc(Xr,he=>{he?(n(he.email||"No especificado"),M(he.uid),K(!1)):R("/login")});return()=>F()},[R]);const M=async F=>{try{const he=vt(Fe,"users",F),Ae=await ol(he);if(Ae.exists()){const Oe=Ae.data();e(Oe.username||Oe.email.split("@")[0])}else S("Usuario no encontrado en la base de datos")}catch(he){console.error("Error al obtener el nombre de usuario:",he),S("Error al cargar datos del usuario")}},D=F=>{const Ae=F*5,Oe=Ae*.25,De=Ae*.05;V({day:De,week:Oe,month:Ae,total:Ae})};return k.useEffect(()=>{(async()=>{try{const _e=await pn(It(Fe,"users")),Ne=_e.size,ae=_e.docs.map(Ke=>({id:Ke.id,...Ke.data()}));s(Ne),c(ae.slice(-5)),D(Ne);const W=ur(It(Fe,"pendingRegistrations"),gr("status","==","pending")),ee=await pn(W);h(ee.docs.map(Ke=>({id:Ke.id,...Ke.data()})));const te=ur(It(Fe,"pendingTopUps"),gr("status","==","pendiente")),ie=await pn(te);m(ie.docs.map(Ke=>({id:Ke.id,...Ke.data()})));const U=ur(It(Fe,"withdrawals"),gr("status","==","pending")),be=await pn(U);v(be.docs.map(Ke=>({id:Ke.id,...Ke.data()})));const ke=(await pn(It(Fe,"sales"))).docs.map(Ke=>({id:Ke.id,...Ke.data()}));w(ke);const Ee=ke.reduce((Ke,dt)=>Ke+(parseFloat(dt.price)||0),0);j(Ee)}catch(_e){console.error("Error al obtener datos:",_e),S("Error al cargar datos")}})();const he=dr(It(Fe,"users"),_e=>{const Ne=_e.size,ae=_e.docs.map(W=>({id:W.id,...W.data()}));s(Ne),c(ae.slice(-5)),D(Ne)}),Ae=dr(ur(It(Fe,"pendingRegistrations"),gr("status","==","pending")),_e=>{h(_e.docs.map(Ne=>({id:Ne.id,...Ne.data()})))}),Oe=dr(ur(It(Fe,"pendingTopUps"),gr("status","==","pendiente")),_e=>{m(_e.docs.map(Ne=>({id:Ne.id,...Ne.data()})))}),De=dr(ur(It(Fe,"withdrawals"),gr("status","==","pending")),_e=>{v(_e.docs.map(Ne=>({id:Ne.id,...Ne.data()})))}),we=dr(It(Fe,"sales"),_e=>{const Ne=_e.docs.map(W=>({id:W.id,...W.data()}));w(Ne);const ae=Ne.reduce((W,ee)=>W+(parseFloat(ee.price)||0),0);j(ae)});return()=>{he(),Ae(),Oe(),De(),we()}},[]),L?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):H?o.jsxs("div",{className:`bg-${N==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${N==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsx(yc,{className:"mx-auto text-4xl text-blue-400 mb-4"}),o.jsx("h3",{className:`text-xl font-bold ${N==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Error"}),o.jsx("p",{className:`text-base ${N==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:H}),o.jsx("button",{onClick:()=>S(null),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Aceptar"})]}):o.jsxs("div",{className:`bg-${N==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${N==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("h2",{className:`text-2xl sm:text-3xl font-bold ${N==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Bienvenido a BlackStreaming,"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:r})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:`${N==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 border shadow-lg`,children:[o.jsxs("h3",{className:"text-lg font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-3 flex items-center",children:[o.jsx(wa,{className:"mr-2"})," Total Usuarios"]}),o.jsx("p",{className:`text-3xl font-bold ${N==="dark"?"text-white":"text-gray-900"}`,children:i}),o.jsx("button",{className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",onClick:()=>R("/usuarios"),children:"Ver usuarios"})]}),o.jsxs("div",{className:`${N==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 border shadow-lg`,children:[o.jsxs("h3",{className:"text-lg font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-3 flex items-center",children:[o.jsx(gd,{className:"mr-2"})," Total Ventas"]}),o.jsxs("p",{className:`text-3xl font-bold ${N==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",E.toFixed(2)]}),o.jsx("button",{className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",onClick:()=>R("/pedidos"),children:"Ver ventas"})]}),o.jsxs("div",{className:`${N==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 border shadow-lg`,children:[o.jsxs("h3",{className:"text-lg font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-3 flex items-center",children:[o.jsx(ma,{className:"mr-2"})," Ganancias del Mes"]}),o.jsxs("p",{className:`text-3xl font-bold ${N==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",P.month.toFixed(2)]}),o.jsx("p",{className:`text-sm ${N==="dark"?"text-gray-300":"text-gray-700"} mt-1`,children:"(5 soles por usuario)"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:`${N==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 shadow-lg border`,children:[o.jsx("h3",{className:`text-lg font-semibold ${N==="dark"?"text-white":"text-gray-900"} mb-3`,children:"Últimos Usuarios"}),a.length>0?a.map(F=>o.jsxs("div",{className:`border-b ${N==="dark"?"border-gray-600/50":"border-gray-300"} py-3 last:border-0 hover:bg-${N==="dark"?"gray-700/50":"gray-200/50"} transition-all duration-300 rounded-xl px-2`,children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("p",{className:`font-medium ${N==="dark"?"text-white":"text-gray-900"}`,children:F.username||"Sin nombre"}),o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${N==="dark"?"bg-blue-900/80 text-blue-400":"bg-blue-100/80 text-blue-600"}`,children:F.role||"usuario"})]}),o.jsx("p",{className:`text-sm ${N==="dark"?"text-gray-400":"text-gray-600"}`,children:F.email})]},F.id)):o.jsx("p",{className:`text-${N==="dark"?"gray-400":"gray-600"} py-2`,children:"No hay usuarios registrados"})]}),o.jsxs("div",{className:`${N==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 shadow-lg border`,children:[o.jsx("h3",{className:`text-lg font-semibold ${N==="dark"?"text-white":"text-gray-900"} mb-3`,children:"Solicitudes Pendientes"}),d.length>0?d.slice(0,3).map(F=>o.jsxs("div",{className:`border-b ${N==="dark"?"border-gray-600/50":"border-gray-300"} py-3 last:border-0 hover:bg-${N==="dark"?"gray-700/50":"gray-200/50"} transition-all duration-300 rounded-xl px-2`,children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("p",{className:`font-medium ${N==="dark"?"text-white":"text-gray-900"}`,children:F.username||"Sin nombre"}),o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${N==="dark"?"bg-purple-900/80 text-purple-400":"bg-purple-100/80 text-purple-600"}`,children:F.role||"usuario"})]}),o.jsx("p",{className:`text-sm ${N==="dark"?"text-gray-400":"text-gray-600"}`,children:F.email})]},F.id)):o.jsx("p",{className:`text-${N==="dark"?"gray-400":"gray-600"} py-2`,children:"No hay solicitudes pendientes"})]}),o.jsxs("div",{className:`${N==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 shadow-lg border`,children:[o.jsx("h3",{className:`text-lg font-semibold ${N==="dark"?"text-white":"text-gray-900"} mb-3`,children:"Retiros Pendientes"}),x.length>0?x.slice(0,3).map(F=>o.jsxs("div",{className:`border-b ${N==="dark"?"border-gray-600/50":"border-gray-300"} py-3 last:border-0 hover:bg-${N==="dark"?"gray-700/50":"gray-200/50"} transition-all duration-300 rounded-xl px-2`,children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("p",{className:`font-medium ${N==="dark"?"text-white":"text-gray-900"}`,children:F.provider||"Sin proveedor"}),o.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${N==="dark"?"bg-yellow-900/80 text-yellow-400":"bg-yellow-100/80 text-yellow-600"}`,children:["S/ ",(F.amount||0).toFixed(2)]})]}),o.jsxs("p",{className:`text-sm ${N==="dark"?"text-gray-400":"text-gray-600"}`,children:["Método: ",F.method||"No especificado"]})]},F.id)):o.jsx("p",{className:`text-${N==="dark"?"gray-400":"gray-600"} py-2`,children:"No hay retiros pendientes"})]})]})]})},Ite=({notificationForm:r={message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}},setNotificationForm:e=()=>{},theme:t="dark"})=>{const[n,i]=k.useState(""),[s,a]=k.useState(""),[c,d]=k.useState(!1),h=r.roles||{user:!1,affiliate:!1,provider:!1,admin:!1},p=Object.values(h).some(x=>x),m=k.useCallback(async x=>{if(x.preventDefault(),!p){i("Selecciona al menos un rol para enviar la notificación");return}if(!r.message.trim()){i("El mensaje de la notificación no puede estar vacío");return}i(""),a(""),d(!0);try{await tl(It(Fe,"notifications"),{message:r.message.trim(),roles:{user:h.user,affiliate:h.affiliate,provider:h.provider,admin:h.admin},createdAt:Er()}),e({message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}}),a("Notificación enviada exitosamente")}catch(v){i("Error al enviar la notificación. Por favor, intenta de nuevo."),console.error("Error sending notification:",v)}finally{d(!1)}},[r,h,e]);return o.jsxs("div",{className:`bg-${t==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-2xl mx-auto border ${t==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Enviar Notificación -"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),o.jsxs(Vt,{children:[n&&o.jsx(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${t==="dark"?"bg-red-900/50 border-red-600/50":"bg-red-100/50 border-red-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-red-600 border-l-4`,role:"alert",children:n}),s&&o.jsx(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${t==="dark"?"bg-green-900/50 border-green-600/50":"bg-green-100/50 border-green-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-green-600 border-l-4`,role:"alert",children:s})]}),o.jsxs("form",{onSubmit:m,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Mensaje de la Notificación"}),o.jsx("textarea",{value:r.message||"",onChange:x=>e({...r,message:x.target.value}),className:`w-full px-4 py-2 rounded-xl ${t==="dark"?"bg-gray-800/50 text-gray-200 border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-800 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all resize-y`,rows:"5",placeholder:"Escribe el mensaje para los usuarios...",required:!0,"aria-label":"Mensaje de la notificación"})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Enviar a los siguientes roles"}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:["user","affiliate","provider","admin"].map(x=>o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",checked:h[x]||!1,onChange:v=>e({...r,roles:{...h,[x]:v.target.checked}}),className:`h-4 w-4 ${t==="dark"?"text-blue-400 focus:ring-blue-400 border-gray-600":"text-blue-600 focus:ring-blue-600 border-gray-300"} rounded`,"aria-label":`Enviar a rol ${x}`}),o.jsx("span",{className:`text-sm capitalize ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:x})]},x))})]}),o.jsx(re.button,{type:"submit",disabled:c||!p,className:`w-full py-3 px-4 ${c||!p?t==="dark"?"bg-blue-800 cursor-not-allowed":"bg-blue-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"} text-white rounded-xl font-medium transition-all duration-300`,"aria-label":"Enviar notificación",whileHover:{scale:c||!p?1:1.05},whileTap:{scale:c||!p?1:.95},children:c?o.jsx(re.div,{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}):"Enviar Notificación"}),!p&&o.jsx("p",{className:`text-sm text-center ${t==="dark"?"text-blue-400":"text-blue-600"}`,children:"Selecciona al menos un rol para enviar la notificación"})]})]})},qP=[{value:"user",label:"Usuario"},{value:"affiliate",label:"Afiliador"},{value:"provider",label:"Proveedor"},{value:"admin",label:"Administrador"}],Pte=r=>{const e=qP.find(t=>t.value===r);return e?e.label:r},GP=({isOpen:r,user:e,onClose:t,onSave:n,loading:i,theme:s})=>{const[a,c]=k.useState(e?.balance||0),[d,h]=k.useState("");k.useEffect(()=>{c(e?.balance||0),h("")},[e]);const p=m=>{if(m.preventDefault(),h(""),isNaN(a)||a<0){h("Por favor, ingrese un saldo válido (número no negativo).");return}n(e.id,parseFloat(a))};return!r||!e?null:o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:`bg-${s==="dark"?"gray-900/90":"white"} backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border ${s==="dark"?"border-gray-800/50":"border-gray-300"}`,children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h2",{className:`text-xl font-bold ${s==="dark"?"text-white":"text-gray-900"}`,children:["Editar Saldo de ",e.username]}),o.jsx("button",{onClick:t,className:`${s==="dark"?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,"aria-label":"Cerrar modal",children:"✕"})]}),o.jsxs("form",{onSubmit:p,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:`block text-sm font-medium ${s==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Nuevo Saldo (S/)"}),o.jsx("input",{type:"number",value:a,onChange:m=>c(m.target.value),className:`w-full px-4 py-2 rounded-xl ${s==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,min:"0",step:"0.01",required:!0,"aria-label":"Nuevo saldo"}),d&&o.jsx("p",{className:`text-sm mt-2 ${s==="dark"?"text-blue-400":"text-blue-600"}`,children:d})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:t,className:`px-4 py-2 ${s==="dark"?"bg-gray-600 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"} rounded-xl transition-all duration-300`,"aria-label":"Cancelar",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:i,className:`px-4 py-2 ${i?s==="dark"?"bg-blue-800 cursor-not-allowed":"bg-blue-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"} rounded-xl transition-all duration-300`,"aria-label":"Guardar saldo",children:i?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar"})]})]})]})})})};GP.propTypes={isOpen:q.bool.isRequired,user:q.object,onClose:q.func.isRequired,onSave:q.func.isRequired,loading:q.bool,theme:q.oneOf(["dark","light"])};const KP=({isOpen:r,user:e,onClose:t,onSave:n,loading:i,theme:s})=>{const[a,c]=k.useState(e?.role||"user");return k.useEffect(()=>{c(e?.role||"user")},[e]),!r||!e?null:o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:`bg-${s==="dark"?"gray-900/90":"white"} backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border ${s==="dark"?"border-gray-800/50":"border-gray-300"}`,children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h2",{className:`text-xl font-bold ${s==="dark"?"text-white":"text-gray-900"}`,children:["Cambiar Rol de ",e.username]}),o.jsx("button",{onClick:t,className:`${s==="dark"?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,"aria-label":"Cerrar modal",children:"✕"})]}),o.jsxs("form",{onSubmit:d=>{d.preventDefault(),n(e.id,a)},children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:`block text-sm font-medium ${s==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Nuevo Rol"}),o.jsx("select",{value:a,onChange:d=>c(d.target.value),className:`w-full px-4 py-2 rounded-xl ${s==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,"aria-label":"Seleccionar nuevo rol",children:qP.map(d=>o.jsx("option",{value:d.value,children:d.label},d.value))})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:t,className:`px-4 py-2 ${s==="dark"?"bg-gray-600 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"} rounded-xl transition-all duration-300`,"aria-label":"Cancelar",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:i,className:`px-4 py-2 ${i?s==="dark"?"bg-blue-800 cursor-not-allowed":"bg-blue-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"} rounded-xl transition-all duration-300`,"aria-label":"Guardar rol",children:i?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar"})]})]})]})})})};KP.propTypes={isOpen:q.bool.isRequired,user:q.object,onClose:q.func.isRequired,onSave:q.func.isRequired,loading:q.bool,theme:q.oneOf(["dark","light"])};const YP=({isOpen:r,user:e,onClose:t,onSave:n,loading:i,theme:s})=>{const[a,c]=k.useState(e?.username||""),[d,h]=k.useState("");k.useEffect(()=>{c(e?.username||""),h("")},[e]);const p=m=>{m.preventDefault(),h("");const x=a.trim();if(!x){h("Por favor, ingrese un nombre de usuario válido.");return}n(e.id,x)};return!r||!e?null:o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:`bg-${s==="dark"?"gray-900/90":"white"} backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border ${s==="dark"?"border-gray-800/50":"border-gray-300"}`,children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h2",{className:`text-xl font-bold ${s==="dark"?"text-white":"text-gray-900"}`,children:["Editar Nombre de Usuario de ",e.username]}),o.jsx("button",{onClick:t,className:`${s==="dark"?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,"aria-label":"Cerrar modal",children:"✕"})]}),o.jsxs("form",{onSubmit:p,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:`block text-sm font-medium ${s==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Nuevo Nombre de Usuario"}),o.jsx("input",{type:"text",value:a,onChange:m=>c(m.target.value),className:`w-full px-4 py-2 rounded-xl ${s==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,required:!0,"aria-label":"Nuevo nombre de usuario"}),d&&o.jsx("p",{className:`text-sm mt-2 ${s==="dark"?"text-blue-400":"text-blue-600"}`,children:d})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:t,className:`px-4 py-2 ${s==="dark"?"bg-gray-600 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"} rounded-xl transition-all duration-300`,"aria-label":"Cancelar",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:i,className:`px-4 py-2 ${i?s==="dark"?"bg-blue-800 cursor-not-allowed":"bg-blue-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"} rounded-xl transition-all duration-300`,"aria-label":"Guardar nombre de usuario",children:i?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar"})]})]})]})})})};YP.propTypes={isOpen:q.bool.isRequired,user:q.object,onClose:q.func.isRequired,onSave:q.func.isRequired,loading:q.bool,theme:q.oneOf(["dark","light"])};const XP=({theme:r="dark"})=>{const[e,t]=k.useState([]),[n,i]=k.useState(""),[s,a]=k.useState({isOpen:!1,user:null}),[c,d]=k.useState({isOpen:!1,user:null}),[h,p]=k.useState({isOpen:!1,user:null}),[m,x]=k.useState(!0),[v,_]=k.useState({}),[w,E]=k.useState(null);k.useEffect(()=>{(async()=>{x(!0);try{const F=await pn(It(Fe,"users")),he=await Promise.all(F.docs.map(async Ae=>{const Oe={id:Ae.id,...Ae.data()},De=ur(It(Fe,"sales"),gr("userId","==",Ae.id)),we=await pn(De);return{...Oe,orderCount:we.size}}));t(he)}catch(F){E("No se pudieron obtener los usuarios: "+F.message)}x(!1)})()},[]);const j=D=>a({isOpen:!0,user:D}),P=()=>a({isOpen:!1,user:null}),V=D=>d({isOpen:!0,user:D}),L=()=>d({isOpen:!1,user:null}),K=D=>p({isOpen:!0,user:D}),H=()=>p({isOpen:!1,user:null}),S=async(D,F)=>{_(he=>({...he,[`balance_${D}`]:!0}));try{const he=vt(Fe,"users",D);await Pr(he,{balance:F}),t(Ae=>Ae.map(Oe=>Oe.id===D?{...Oe,balance:F}:Oe)),P()}catch(he){E("Error al actualizar saldo: "+he.message)}_(he=>({...he,[`balance_${D}`]:!1}))},N=async(D,F)=>{_(he=>({...he,[`role_${D}`]:!0}));try{const he=vt(Fe,"users",D);await Pr(he,{role:F}),t(Ae=>Ae.map(Oe=>Oe.id===D?{...Oe,role:F}:Oe)),L()}catch(he){E("Error al actualizar rol: "+he.message)}_(he=>({...he,[`role_${D}`]:!1}))},I=async(D,F)=>{_(he=>({...he,[`username_${D}`]:!0}));try{const he=vt(Fe,"users",D);await Pr(he,{username:F}),t(Ae=>Ae.map(Oe=>Oe.id===D?{...Oe,username:F}:Oe)),H()}catch(he){E("Error al actualizar nombre de usuario: "+he.message)}_(he=>({...he,[`username_${D}`]:!1}))},R=async(D,F)=>{_(he=>({...he,[`status_${D}`]:!0}));try{const he=vt(Fe,"users",D),Ae=F==="suspended"?"active":"suspended";await Pr(he,{status:Ae}),t(Oe=>Oe.map(De=>De.id===D?{...De,status:Ae}:De))}catch(he){E("Error al cambiar estado: "+he.message)}_(he=>({...he,[`status_${D}`]:!1}))},M=async D=>{_(F=>({...F,[`delete_${D}`]:!0}));try{const F=vt(Fe,"users",D);await za(F),t(he=>he.filter(Ae=>Ae.id!==D))}catch(F){E("Error al eliminar usuario: "+F.message)}_(F=>({...F,[`delete_${D}`]:!1}))};return o.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[o.jsxs("div",{className:`bg-${r==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md border ${r==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${r==="dark"?"text-white":"text-gray-900"}`,children:["Lista de"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Usuarios"})," ","(",e.length,")"]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"Buscar usuarios...",className:`px-4 py-2 rounded-xl ${r==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400 placeholder-gray-500":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600 placeholder-gray-400"} focus:ring-2 transition-all text-sm`,value:n,onChange:D=>i(D.target.value),"aria-label":"Buscar usuarios"}),o.jsx(md,{className:`absolute right-3 top-2.5 ${r==="dark"?"text-blue-400":"text-blue-600"}`})]})]}),m?o.jsx("div",{className:"flex justify-center items-center h-40",children:o.jsx("div",{className:`animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 ${r==="dark"?"border-blue-500":"border-blue-600"}`})}):w?o.jsx("div",{className:`text-center py-4 ${r==="dark"?"text-blue-400":"text-blue-600"}`,children:w}):e.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[o.jsx("thead",{className:`${r==="dark"?"bg-gray-800/50":"bg-gray-100"} backdrop-blur-sm`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(vc,{})," Usuario"]})}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(pd,{})," Email"]})}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(wa,{})," Rol"]})}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(ma,{})," Saldo"]})}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Órdenes"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Acciones"})]})}),o.jsx("tbody",{className:`${r==="dark"?"bg-gray-800/50":"bg-white"} divide-y divide-gray-600/50`,children:e.filter(D=>(D.username||"").toLowerCase().includes(n.toLowerCase())||(D.email||"").toLowerCase().includes(n.toLowerCase())).map(D=>o.jsxs("tr",{className:`${D.status==="suspended"?r==="dark"?"bg-red-900/20":"bg-red-100/50":""} hover:bg-${r==="dark"?"gray-700/50":"gray-100"} transition-all duration-300`,children:[o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap ${r==="dark"?"text-white":"text-gray-900"}`,children:[o.jsx("span",{children:D.username||"Sin nombre"}),o.jsx("button",{onClick:()=>K(D),disabled:v[`username_${D.id}`],className:`ml-2 p-1 ${r==="dark"?"bg-blue-700 hover:bg-blue-800 text-blue-200 disabled:bg-blue-900":"bg-blue-500 hover:bg-blue-600 text-white disabled:bg-blue-300"} rounded-xl transition-all duration-300`,title:"Editar Nombre de Usuario","aria-label":`Editar nombre de usuario de ${D.username}`,children:o.jsx(q0,{size:14})})]}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:D.email}),o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[o.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${r==="dark"?"bg-blue-900/80 text-blue-400":"bg-blue-100/80 text-blue-600"}`,children:Pte(D.role)}),o.jsx("button",{onClick:()=>V(D),disabled:v[`role_${D.id}`],className:`ml-2 p-1 ${r==="dark"?"bg-blue-700 hover:bg-blue-800 text-blue-200 disabled:bg-blue-900":"bg-blue-500 hover:bg-blue-600 text-white disabled:bg-blue-300"} rounded-xl transition-all duration-300`,title:"Editar Rol","aria-label":`Editar rol de ${D.username}`,children:o.jsx(q0,{size:14})})]}),o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap ${r==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",(D.balance||0).toFixed(2)]}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${r==="dark"?"text-white":"text-gray-900"}`,children:D.orderCount||0}),o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap flex space-x-2",children:[o.jsx("button",{onClick:()=>j(D),disabled:v[`balance_${D.id}`],className:`p-2 ${r==="dark"?"bg-blue-600 hover:bg-blue-700 text-white disabled:bg-blue-800":"bg-blue-500 hover:bg-blue-600 text-white disabled:bg-blue-300"} rounded-xl transition-all duration-300`,title:"Editar Saldo","aria-label":`Editar saldo de ${D.username}`,children:o.jsx(q0,{size:16})}),o.jsx("button",{onClick:()=>R(D.id,D.status),disabled:v[`status_${D.id}`],className:`p-2 ${D.status==="suspended"?r==="dark"?"bg-green-600 hover:bg-green-700 text-white disabled:bg-green-800":"bg-green-500 hover:bg-green-600 text-white disabled:bg-green-300":r==="dark"?"bg-yellow-600 hover:bg-yellow-700 text-white disabled:bg-yellow-800":"bg-yellow-500 hover:bg-yellow-600 text-white disabled:bg-yellow-300"} rounded-xl transition-all duration-300`,title:D.status==="suspended"?"Activar Cuenta":"Suspender Cuenta","aria-label":D.status==="suspended"?`Activar cuenta de ${D.username}`:`Suspender cuenta de ${D.username}`,children:D.status==="suspended"?o.jsx(bq,{size:16}):o.jsx(xq,{size:16})}),o.jsx("button",{onClick:()=>M(D.id),disabled:v[`delete_${D.id}`],className:`p-2 ${r==="dark"?"bg-red-600 hover:bg-red-700 text-white disabled:bg-red-800":"bg-red-500 hover:bg-red-600 text-white disabled:bg-red-300"} rounded-xl transition-all duration-300`,title:"Eliminar Cuenta","aria-label":`Eliminar cuenta de ${D.username}`,children:o.jsx(tw,{size:16})})]})]},D.id))})]})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(wa,{className:`mx-auto text-4xl ${r==="dark"?"text-blue-400":"text-blue-600"} mb-3`}),o.jsx("p",{className:`${r==="dark"?"text-gray-300":"text-gray-600"}`,children:"No hay usuarios registrados"})]})]}),o.jsx(GP,{isOpen:s.isOpen,user:s.user,onClose:P,onSave:S,loading:v[`balance_${s.user?.id}`],theme:r}),o.jsx(KP,{isOpen:c.isOpen,user:c.user,onClose:L,onSave:N,loading:v[`role_${c.user?.id}`],theme:r}),o.jsx(YP,{isOpen:h.isOpen,user:h.user,onClose:H,onSave:I,loading:v[`username_${h.user?.id}`],theme:r})]})};XP.propTypes={theme:q.oneOf(["dark","light"])};const QP=({isOpen:r,message:e,title:t,onClose:n})=>r?o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:t}),o.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-all duration-300",children:o.jsx(ti,{size:20})})]}),o.jsx("p",{className:"text-gray-300 mb-6",children:e}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:n,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null;QP.propTypes={isOpen:q.bool.isRequired,message:q.string.isRequired,title:q.string.isRequired,onClose:q.func.isRequired};const JP=({formatDate:r=t=>{if(!t)return"No especificada";try{const n=t.toDate?t.toDate():new Date(t);return isNaN(n.getTime())?"Fecha inválida":n.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},theme:e="dark"})=>{const[t,n]=k.useState([]),[i,s]=k.useState([]),[a,c]=k.useState({}),[d,h]=k.useState({isOpen:!1,message:"",title:""}),p=(_,w)=>{h({isOpen:!0,title:_,message:w})},m=()=>{h({isOpen:!1,message:"",title:""})};k.useEffect(()=>{const _=dr(ur(It(Fe,"pendingTopUps"),gr("status","==","pendiente")),E=>{n(E.docs.map(j=>({id:j.id,...j.data()})))}),w=dr(It(Fe,"topUpsHistory"),E=>{s(E.docs.map(j=>({id:j.id,...j.data()})))});return()=>{_(),w()}},[]);const x=async _=>{try{c(P=>({...P,[_]:!0}));const w=vt(Fe,"pendingTopUps",_),E=t.find(P=>P.id===_);if(!E?.userId)throw new Error("Usuario no encontrado para la recarga");await Pr(w,{status:"aprobado",updatedAt:Er()});const j=vt(Fe,"users",E.userId);await Pr(j,{balance:vV(E.amount||0)}),await va(vt(Fe,"topUpsHistory",_),{...E,status:"aprobado",updatedAt:Er()}),p("Éxito","Recarga aprobada exitosamente")}catch(w){console.error("Error al aprobar recarga:",w),p("Error",w.message||"Error al aprobar la recarga")}finally{c(w=>({...w,[_]:!1}))}},v=async _=>{try{c(j=>({...j,[_]:!0}));const w=vt(Fe,"pendingTopUps",_);await Pr(w,{status:"rechazado",updatedAt:Er()});const E=t.find(j=>j.id===_);await va(vt(Fe,"topUpsHistory",_),{...E,status:"rechazado",updatedAt:Er()}),p("Éxito","Recarga rechazada exitosamente")}catch(w){console.error("Error al rechazar recarga:",w),p("Error",w.message||"Error al rechazar la recarga")}finally{c(w=>({...w,[_]:!1}))}};return o.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[o.jsxs("div",{className:`bg-${e==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md border ${e==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${e==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Recargas"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Pendientes - BlackStreaming"})]}),Array.isArray(t)&&t.length>0?o.jsx("div",{className:"space-y-4",children:t.map(_=>o.jsxs("div",{className:`border ${e==="dark"?"border-gray-600/50":"border-gray-300"} rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300`,children:[o.jsxs("div",{className:`${e==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm px-4 py-3 border-b ${e==="dark"?"border-gray-600/50":"border-gray-300"} flex justify-between items-center`,children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-10 h-10 ${e==="dark"?"bg-blue-900/80":"bg-blue-100/80"} rounded-full flex items-center justify-center ${e==="dark"?"text-blue-400":"text-blue-600"}`,children:o.jsx(ma,{size:18})}),o.jsxs("div",{children:[o.jsx("h4",{className:`font-semibold ${e==="dark"?"text-white":"text-gray-900"}`,children:_.username||"Sin nombre"}),o.jsxs("p",{className:`text-xs ${e==="dark"?"text-gray-400":"text-gray-600"}`,children:["Solicitado: ",r(_.requestedAt)]})]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("p",{className:`text-lg font-medium ${e==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",(_.amount||0).toFixed(2)]})})]}),o.jsx("div",{className:`p-4 ${e==="dark"?"bg-gray-700/50":"bg-gray-50"} backdrop-blur-sm`,children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsx("button",{onClick:()=>x(_.id),disabled:a[_.id],className:`flex-1 ${e==="dark"?"bg-green-600 hover:bg-green-700 disabled:bg-green-800":"bg-green-500 hover:bg-green-600 disabled:bg-green-300"} text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300`,"aria-label":`Aprobar recarga de ${_.username}`,children:a[_.id]?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):o.jsxs(o.Fragment,{children:[o.jsx(wq,{size:18})," Aprobar Recarga"]})}),o.jsx("button",{onClick:()=>v(_.id),disabled:a[_.id],className:`flex-1 ${e==="dark"?"bg-red-600 hover:bg-red-700 disabled:bg-red-800":"bg-red-500 hover:bg-red-600 disabled:bg-red-300"} text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300`,"aria-label":`Rechazar recarga de ${_.username}`,children:a[_.id]?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):o.jsxs(o.Fragment,{children:[o.jsx(ti,{size:18})," Rechazar Recarga"]})})]})})]},_.id))}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(ma,{className:`mx-auto text-4xl ${e==="dark"?"text-blue-400":"text-blue-600"} mb-3`}),o.jsx("h4",{className:`text-lg font-medium ${e==="dark"?"text-gray-300":"text-gray-600"}`,children:"No hay recargas pendientes"}),o.jsx("p",{className:`${e==="dark"?"text-gray-400":"text-gray-500"}`,children:"Todas las solicitudes han sido procesadas"})]})]}),o.jsxs("div",{className:`bg-${e==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md border ${e==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${e==="dark"?"text-white":"text-gray-900"} mb-4`,children:["Historial de"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Recargas - BlackStreaming"})]}),Array.isArray(i)&&i.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[o.jsx("thead",{className:`${e==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${e==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Usuario"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${e==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Monto"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${e==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Estado"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${e==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Fecha"})]})}),o.jsx("tbody",{className:`${e==="dark"?"bg-gray-800/50":"bg-white"} divide-y divide-gray-600/50`,children:i.map(_=>o.jsxs("tr",{className:`hover:bg-${e==="dark"?"gray-700/50":"gray-100"} transition-all duration-300`,children:[o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${e==="dark"?"text-white":"text-gray-900"}`,children:_.username||"Sin nombre"}),o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap ${e==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",(_.amount||0).toFixed(2)]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${_.status==="aprobado"?e==="dark"?"bg-green-900/80 text-green-400":"bg-green-100/80 text-green-600":e==="dark"?"bg-red-900/80 text-red-400":"bg-red-100/80 text-red-600"}`,children:_.status||"Desconocido"})}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${e==="dark"?"text-gray-300":"text-gray-600"}`,children:r(_.updatedAt)})]},_.id))})]})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(ma,{className:`mx-auto text-4xl ${e==="dark"?"text-blue-400":"text-blue-600"} mb-3`}),o.jsx("p",{className:`${e==="dark"?"text-gray-300":"text-gray-600"}`,children:"No hay historial de recargas"})]})]}),o.jsx(QP,{isOpen:d.isOpen,title:d.title,message:d.message,onClose:m})]})};JP.propTypes={formatDate:q.func,theme:q.oneOf(["dark","light"])};const Rte=({withdrawals:r,formatDate:e,actionLoading:t,setActionLoading:n,showNotificationModal:i})=>{const s=async(a,c)=>{try{n(h=>({...h,[a]:!0}));const d=vt(Fe,"withdrawals",a);await Pr(d,{status:c==="approve"?"completed":"rejected",updatedAt:Er()}),i("Éxito",`Retiro ${c==="approve"?"aprobado":"rechazado"} exitosamente`)}catch(d){i("Error",d.message||`Error al ${c==="approve"?"aprobar":"rechazar"} el retiro`)}finally{n(d=>({...d,[a]:!1}))}};return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[o.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Retiros ",o.jsx("span",{className:"text-red-400",children:"Pendientes"})]}),r.length===0?o.jsxs("div",{className:"text-center text-gray-300 py-8",children:[o.jsx(Ki,{className:"mx-auto text-4xl text-red-400 mb-4"}),o.jsx("p",{children:"No hay retiros pendientes"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left text-gray-300",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-gray-600/50",children:[o.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Usuario"}),o.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Monto"}),o.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Fecha"}),o.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Acciones"})]})}),o.jsx("tbody",{children:r.map(a=>o.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30 transition-all duration-300",children:[o.jsx("td",{className:"py-3 px-4",children:a.userEmail||"No especificado"}),o.jsxs("td",{className:"py-3 px-4",children:["S/ ",a.amount?.toFixed(2)||"0.00"]}),o.jsx("td",{className:"py-3 px-4",children:e(a.createdAt)}),o.jsxs("td",{className:"py-3 px-4 flex space-x-2",children:[o.jsxs("button",{onClick:()=>s(a.id,"approve"),disabled:t[a.id],className:`px-3 py-1 rounded-xl text-white flex items-center space-x-1 transition-all duration-300 ${t[a.id]?"bg-gray-600 cursor-not-allowed":"bg-green-500 hover:bg-green-600"}`,children:[o.jsx(Iq,{}),o.jsx("span",{children:"Aprobar"})]}),o.jsxs("button",{onClick:()=>s(a.id,"reject"),disabled:t[a.id],className:`px-3 py-1 rounded-xl text-white flex items-center space-x-1 transition-all duration-300 ${t[a.id]?"bg-gray-600 cursor-not-allowed":"bg-red-500 hover:bg-red-600"}`,children:[o.jsx(Qi,{}),o.jsx("span",{children:"Rechazar"})]})]})]},a.id))})]})})]})},ZP=({sales:r=[],totalSales:e=0,formatDate:t=s=>"No especificada",getOrderStatus:n=()=>"Desconocido",theme:i="dark"})=>{const[s,a]=k.useState({}),[c,d]=k.useState(null),h=async p=>{a(m=>({...m,[`delete_${p}`]:!0}));try{const m=vt(Fe,"sales",p);await za(m),window.dispatchEvent(new CustomEvent("saleDeleted",{detail:{saleId:p}}))}catch(m){d("Error al eliminar pedido: "+m.message)}a(m=>({...m,[`delete_${p}`]:!1}))};return o.jsxs("div",{className:`bg-${i==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${i==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${i==="dark"?"text-white":"text-gray-900"} mb-4`,children:["Ventas"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"General - BlackStreaming"})]}),o.jsxs("div",{className:`${i==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-6 text-center mb-6 border ${i==="dark"?"border-gray-600/50":"border-gray-300"}`,children:[o.jsx("h4",{className:`text-lg font-semibold ${i==="dark"?"text-blue-400":"text-blue-600"} mb-2`,children:"Total Ventas"}),o.jsxs("p",{className:`text-3xl font-bold ${i==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",e.toFixed(2)]}),o.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-300":"text-gray-600"} mt-2`,children:"Suma de todos los pedidos realizados"})]}),o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${i==="dark"?"text-white":"text-gray-900"} mb-4`,children:["Historial de"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Pedidos - BlackStreaming"})]}),c&&o.jsx("div",{className:`text-center py-4 ${i==="dark"?"text-blue-400":"text-blue-600"}`,children:c}),r.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[o.jsx("thead",{className:`${i==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Nombre del Producto"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Precio"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Proveedor"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Usuario Comprador"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Fecha"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Estado"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Acciones"})]})}),o.jsx("tbody",{className:`${i==="dark"?"bg-gray-800/50":"bg-white"} divide-y divide-gray-600/50`,children:r.map(p=>o.jsxs("tr",{className:`hover:bg-${i==="dark"?"gray-700/50":"gray-100"} transition-all duration-300`,children:[o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${i==="dark"?"text-white":"text-gray-900"}`,children:p.productName||"Sin nombre"}),o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap ${i==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",(p.price||0).toFixed(2)]}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:p.provider||"Sin proveedor"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:p.buyerName||"Sin comprador"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:t(p.createdAt)}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${n(p)==="Pendiente"?i==="dark"?"bg-yellow-900/80 text-yellow-400":"bg-yellow-100/80 text-yellow-600":n(p)==="Activo"?i==="dark"?"bg-green-900/80 text-green-400":"bg-green-100/80 text-green-600":i==="dark"?"bg-red-900/80 text-red-400":"bg-red-100/80 text-red-600"}`,children:n(p)})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:()=>h(p.id),disabled:s[`delete_${p.id}`],className:`p-2 ${i==="dark"?"bg-red-600 hover:bg-red-700 text-white disabled:bg-red-800":"bg-red-500 hover:bg-red-600 text-white disabled:bg-red-300"} rounded-xl transition-all duration-300`,title:"Eliminar Pedido","aria-label":`Eliminar pedido ${p.productName||"sin nombre"}`,children:s[`delete_${p.id}`]?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):o.jsx(tw,{size:16})})})]},p.id))})]})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(gd,{className:`mx-auto text-4xl ${i==="dark"?"text-blue-400":"text-blue-600"} mb-3`}),o.jsx("p",{className:`${i==="dark"?"text-gray-300":"text-gray-600"}`,children:"No hay pedidos registrados"})]})]})};ZP.propTypes={sales:q.array,totalSales:q.number,formatDate:q.func,getOrderStatus:q.func,theme:q.oneOf(["dark","light"])};const eR=({earnings:r={day:0,week:0,month:0,total:0},totalUsers:e=0,theme:t="dark"})=>o.jsxs("div",{className:`bg-${t==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${t==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Ganancias -"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[o.jsxs("div",{className:`${t==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${t==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[o.jsxs("h4",{className:`text-lg font-semibold ${t==="dark"?"text-blue-400":"text-blue-600"} mb-2 flex items-center`,children:[o.jsx(P0,{className:"mr-2","aria-hidden":"true"})," Ganancias Diarias"]}),o.jsxs("p",{className:`text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancias diarias",children:["S/ ",(r.day||0).toFixed(2)]}),o.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Estimado por día"})]}),o.jsxs("div",{className:`${t==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${t==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[o.jsxs("h4",{className:`text-lg font-semibold ${t==="dark"?"text-blue-400":"text-blue-600"} mb-2 flex items-center`,children:[o.jsx(P0,{className:"mr-2","aria-hidden":"true"})," Ganancias Semanales"]}),o.jsxs("p",{className:`text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancias semanales",children:["S/ ",(r.week||0).toFixed(2)]}),o.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Estimado por semana"})]}),o.jsxs("div",{className:`${t==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${t==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[o.jsxs("h4",{className:`text-lg font-semibold ${t==="dark"?"text-blue-400":"text-blue-600"} mb-2 flex items-center`,children:[o.jsx(P0,{className:"mr-2","aria-hidden":"true"})," Ganancias Mensuales"]}),o.jsxs("p",{className:`text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancias mensuales",children:["S/ ",(r.month||0).toFixed(2)]}),o.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Estimado por mes"})]}),o.jsxs("div",{className:`${t==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${t==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[o.jsxs("h4",{className:`text-lg font-semibold ${t==="dark"?"text-blue-400":"text-blue-600"} mb-2 flex items-center`,children:[o.jsx(P0,{className:"mr-2","aria-hidden":"true"})," Ganancias Totales"]}),o.jsxs("p",{className:`text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancias totales",children:["S/ ",(r.total||0).toFixed(2)]}),o.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Total acumulado"})]})]}),o.jsxs("div",{className:`${t==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${t==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[o.jsx("h4",{className:`text-lg font-semibold ${t==="dark"?"text-blue-400":"text-blue-600"} mb-2`,children:"Resumen"}),o.jsxs("p",{className:`${t==="dark"?"text-gray-300":"text-gray-600"}`,children:["Total de usuarios registrados:"," ",o.jsx("span",{className:`font-medium ${t==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Total de usuarios registrados",children:e})]}),o.jsxs("p",{className:`${t==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:["Ganancia por usuario:"," ",o.jsx("span",{className:`font-medium ${t==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancia por usuario",children:"S/ 5.00"})]}),o.jsx("p",{className:`${t==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Las ganancias se calculan asumiendo S/ 5.00 por cada usuario registrado. Las estimaciones diarias y semanales son proporciones del total (5% y 25%, respectivamente)."})]})]});eR.propTypes={earnings:q.shape({day:q.number,week:q.number,month:q.number,total:q.number}),totalUsers:q.number,theme:q.oneOf(["dark","light"])};const tR=({userName:r="",setUserName:e=()=>{},email:t="",handleSaveChanges:n=()=>{},handleLogout:i=()=>{},actionLoading:s={},theme:a="dark"})=>o.jsxs("div",{className:`bg-${a==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-2xl mx-auto border ${a==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${a==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Configuración -"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),o.jsxs("form",{onSubmit:n,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium ${a==="dark"?"text-gray-300":"text-gray-700"} mb-2 flex items-center`,children:[o.jsx(vc,{className:`mr-2 ${a==="dark"?"text-blue-400":"text-blue-600"}`,"aria-hidden":"true"})," ","Nombre de usuario"]}),o.jsx("input",{type:"text",value:r,onChange:c=>e(c.target.value),className:`w-full px-4 py-2 rounded-xl ${a==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,placeholder:"Ingresa tu nombre de usuario",required:!0,"aria-label":"Nombre de usuario"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium ${a==="dark"?"text-gray-300":"text-gray-700"} mb-2 flex items-center`,children:[o.jsx(pd,{className:`mr-2 ${a==="dark"?"text-blue-400":"text-blue-600"}`,"aria-hidden":"true"})," ","Correo electrónico"]}),o.jsx("input",{type:"email",value:t,disabled:!0,className:`w-full px-4 py-2 rounded-xl ${a==="dark"?"bg-gray-700/50 text-gray-400 border-gray-600/50":"bg-gray-100 text-gray-500 border-gray-300"} cursor-not-allowed`,"aria-label":"Correo electrónico (solo lectura)"}),o.jsx("p",{className:`text-sm ${a==="dark"?"text-gray-400":"text-gray-500"} mt-1`,children:"El correo no puede ser modificado."})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium ${a==="dark"?"text-gray-300":"text-gray-700"} mb-2 flex items-center`,children:[o.jsx(ew,{className:`mr-2 ${a==="dark"?"text-blue-400":"text-blue-600"}`,"aria-hidden":"true"})," ","Nueva contraseña (opcional)"]}),o.jsx("input",{type:"password",name:"password",className:`w-full px-4 py-2 rounded-xl ${a==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,placeholder:"Ingresa una nueva contraseña","aria-label":"Nueva contraseña"}),o.jsx("p",{className:`text-sm ${a==="dark"?"text-gray-400":"text-gray-500"} mt-1`,children:"Mínimo 6 caracteres. Déjalo en blanco para no cambiarla."})]}),o.jsx("button",{type:"submit",disabled:s.config,className:`w-full py-3 px-4 ${a==="dark"?"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-800":"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300"} text-white rounded-xl font-medium transition-all duration-300`,"aria-label":"Guardar cambios",children:s.config?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar Cambios"})]}),o.jsx("div",{className:"mt-6",children:o.jsxs("button",{onClick:i,className:`w-full py-3 px-4 ${a==="dark"?"bg-red-600 hover:bg-red-700 disabled:bg-red-800":"bg-red-500 hover:bg-red-600 disabled:bg-red-300"} text-white rounded-xl font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Cerrar sesión",children:[o.jsx(xd,{size:18})," Cerrar Sesión"]})})]});tR.propTypes={userName:q.string,setUserName:q.func,email:q.string,handleSaveChanges:q.func,handleLogout:q.func,actionLoading:q.object,theme:q.oneOf(["dark","light"])};const rR=({isOpen:r,message:e,title:t,onClose:n,theme:i="dark"})=>r?o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:`bg-${i==="dark"?"gray-900/90":"white"} backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border ${i==="dark"?"border-gray-800/50":"border-gray-300"}`,children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h2",{className:`text-xl font-bold ${i==="dark"?"text-white":"text-gray-900"}`,children:[t||"Notificación"," -"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),o.jsx("button",{onClick:n,className:`${i==="dark"?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,"aria-label":"Cerrar notificación",children:o.jsx(ti,{size:20})})]}),o.jsx("p",{className:`mb-6 ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:e||"No se proporcionó ningún mensaje."}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:n,className:`px-4 py-2 ${i==="dark"?"bg-blue-500 hover:bg-blue-600 text-white":"bg-blue-600 hover:bg-blue-700 text-white"} rounded-xl transition-all duration-300`,"aria-label":"Aceptar notificación",children:"Aceptar"})})]})})}):null;rR.propTypes={isOpen:q.bool.isRequired,message:q.string,title:q.string,onClose:q.func.isRequired,theme:q.oneOf(["dark","light"])};const jte=({isOpen:r,user:e,onClose:t,onSave:n})=>{const[i,s]=k.useState(e?.balance||0),[a,c]=k.useState(""),d=h=>{if(h.preventDefault(),c(""),isNaN(i)||i<0){c("Por favor, ingrese un saldo válido (número no negativo).");return}n(e.id,parseFloat(i))};return r?o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-white",children:["Editar Saldo de ",e.username]}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-all duration-300",children:o.jsx(Qi,{size:20})})]}),o.jsxs("form",{onSubmit:d,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-gray-300 mb-2",children:"Nuevo Saldo (S/)"}),o.jsx("input",{type:"number",value:i,onChange:h=>s(h.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"0",step:"0.01",required:!0}),a&&o.jsx("p",{className:"text-red-400 text-sm mt-2",children:a})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},nR=({theme:r,products:e,setProducts:t,loadingProducts:n,searchQuery:i,setSearchQuery:s,handleDeleteProduct:a})=>{const c=r==="dark",[d,h]=k.useState(null),[p,m]=k.useState(""),x=e.filter(_=>_.name?.toLowerCase().includes(i.toLowerCase())||_.category?.toLowerCase().includes(i.toLowerCase())),v=async(_,w)=>{if(!w.trim()){h(null);return}try{const E=vt(Fe,"products",_);await Pr(E,{provider:w.trim()}),t(j=>j.map(P=>P.id===_?{...P,provider:w.trim()}:P)),h(null)}catch(E){console.error("Error updating provider:",E)}};return n?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o.jsxs(re.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-6xl mx-auto border ${c?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[o.jsx("h3",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${c?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Gestión de Productos"}),o.jsx("div",{className:"relative w-full sm:w-64 mt-4 sm:mt-0",children:o.jsx("input",{type:"text",placeholder:"Buscar productos...",value:i,onChange:_=>s(_.target.value),className:`w-full px-3 py-2 rounded-xl ${c?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300 text-sm placeholder-gray-500`,"aria-label":"Search products"})})]}),x.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[o.jsx("thead",{className:`backdrop-blur-sm ${c?"bg-gray-900/80":"bg-gray-200/80"}`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Imagen"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Nombre"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Categoría"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Tipo"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Proveedor"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Estado"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Stock"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Precio"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Acciones"})]})}),o.jsx("tbody",{className:`divide-y divide-gray-700/50 ${c?"bg-gray-800/70":"bg-gray-100/70"}`,children:x.map((_,w)=>o.jsxs("tr",{className:"hover:bg-blue-500/10 transition-all duration-300",children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:_.image?o.jsx("img",{src:_.image,alt:_.name,className:"h-12 w-12 rounded-lg object-cover",loading:"lazy"}):o.jsx("div",{className:"h-12 w-12 bg-gray-300 rounded-lg flex items-center justify-center",children:o.jsx(R1,{className:"text-gray-500",size:20})})}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${c?"text-white":"text-gray-900"}`,children:_.name||"Sin nombre"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${c?"text-gray-300":"text-gray-600"}`,children:_.category||"Sin categoría"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${c?"text-gray-300":"text-gray-600"}`,children:_.accountType||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:d===_.id?o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"text",value:p,onChange:E=>m(E.target.value),onBlur:()=>v(_.id,p),onKeyDown:E=>{E.key==="Enter"&&v(_.id,p),E.key==="Escape"&&(h(null),m(""))},className:`flex-1 px-2 py-1 rounded border focus:outline-none focus:ring-2 focus:ring-blue-400 ${c?"bg-gray-700/80 text-white border-gray-600":"bg-white text-gray-900 border-gray-300"}`,autoFocus:!0}),o.jsx("button",{onClick:()=>{h(null),m("")},className:`p-1 rounded-full ${c?"text-gray-400 hover:bg-gray-600/50":"text-gray-500 hover:bg-gray-200"} transition-all duration-200`,"aria-label":"Cancelar edición",children:o.jsx(ti,{size:12})})]}):o.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-100/50 rounded p-1",onClick:()=>{h(_.id),m(_.provider||"")},children:[o.jsx("span",{className:`text-sm ${c?"text-gray-300":"text-gray-600"}`,children:_.provider||"Sin proveedor"}),o.jsx(q0,{size:12,className:`${c?"text-gray-500":"text-gray-400"}`})]})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${_.status==="En stock"?"bg-green-500/20 text-green-400 border-green-500/50":_.status==="A pedido"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/50":"bg-red-500/20 text-red-400 border-red-500/50"} border`,children:_.status||"Desconocido"})}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${c?"text-gray-300":"text-gray-600"}`,children:_.stock!=null?_.stock:"0"}),o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${c?"text-white":"text-gray-900"}`,children:["S/ ",parseFloat(_.price||0).toFixed(2)]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:o.jsx("button",{onClick:()=>a(_.id),className:`p-2 rounded-full ${c?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-red-100 text-red-600 hover:bg-red-200"} transition-all duration-300`,title:"Eliminar producto","aria-label":`Eliminar producto ${_.name}`,children:o.jsx(tw,{size:14})})})]},_.id||w))})]})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(R1,{className:`mx-auto text-4xl ${c?"text-gray-400":"text-gray-500"} mb-3`}),o.jsx("h4",{className:`text-lg font-medium ${c?"text-gray-300":"text-gray-700"}`,children:"No hay productos registrados"}),o.jsx("p",{className:`text-sm ${c?"text-gray-400":"text-gray-600"}`,children:"Los productos aparecerán aquí cuando los agregues."})]})]})};nR.propTypes={theme:q.string.isRequired,products:q.array.isRequired,setProducts:q.func.isRequired,loadingProducts:q.bool.isRequired,searchQuery:q.string.isRequired,setSearchQuery:q.func.isRequired,handleDeleteProduct:q.func.isRequired};const iR=({theme:r,users:e,showNotificationModal:t})=>{const n=r==="dark",[i,s]=k.useState(null),[a,c]=k.useState(0),[d,h]=k.useState({}),p=e.filter(x=>x.role==="provider"),m=async(x,v)=>{if(v<0){s(null);return}try{h(w=>({...w,[x]:!0}));const _=vt(Fe,"users",x);await Pr(_,{userAssignmentLimit:parseInt(v)||0,updatedAt:Er()}),s(null),t("Éxito","Límite actualizado correctamente")}catch(_){console.error("Error updating limit:",_),t("Error",_.message||"Error al actualizar el límite")}finally{h(_=>({..._,[x]:!1}))}};return o.jsxs(re.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-6xl mx-auto border ${n?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},children:[o.jsx("h3",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r mb-6 ${n?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Gestión de Proveedores"}),p.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[o.jsx("thead",{className:`backdrop-blur-sm ${n?"bg-gray-900/80":"bg-gray-200/80"}`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Nombre"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Email"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Asignados"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Límite de Asignaciones"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Acciones"})]})}),o.jsx("tbody",{className:`divide-y divide-gray-700/50 ${n?"bg-gray-800/70":"bg-gray-100/70"}`,children:p.map(x=>o.jsxs("tr",{className:"hover:bg-blue-500/10 transition-all duration-300",children:[o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${n?"text-white":"text-gray-900"}`,children:x.username||"Sin nombre"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-gray-300":"text-gray-600"}`,children:x.email||"No especificado"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-gray-300":"text-gray-600"}`,children:x.assignedUsersCount||0}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:i===x.id?o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"number",value:a,onChange:v=>c(v.target.value),onBlur:()=>m(x.id,a),onKeyDown:v=>{v.key==="Enter"&&m(x.id,a),v.key==="Escape"&&(s(null),c(0))},className:`w-20 px-2 py-1 rounded border focus:outline-none focus:ring-2 focus:ring-blue-400 ${n?"bg-gray-700/80 text-white border-gray-600":"bg-white text-gray-900 border-gray-300"}`,autoFocus:!0,min:"0"}),o.jsx("button",{onClick:()=>{s(null),c(0)},className:`p-1 rounded-full ${n?"text-gray-400 hover:bg-gray-600/50":"text-gray-500 hover:bg-gray-200"} transition-all duration-200`,"aria-label":"Cancelar edición",disabled:d[x.id],children:o.jsx(ti,{size:12})})]}):o.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-100/50 rounded p-1",onClick:()=>{s(x.id),c(x.userAssignmentLimit||0)},children:[o.jsx("span",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`,children:x.userAssignmentLimit||0}),o.jsx(q0,{size:12,className:`${n?"text-gray-500":"text-gray-400"}`})]})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:d[x.id]&&o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-blue-500"})})]},x.id))})]})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(wa,{className:`mx-auto text-4xl ${n?"text-gray-400":"text-gray-500"} mb-3`}),o.jsx("h4",{className:`text-lg font-medium ${n?"text-gray-300":"text-gray-700"}`,children:"No hay proveedores"}),o.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"Los proveedores aparecerán aquí cuando se asignen."})]})]})};iR.propTypes={theme:q.string.isRequired,users:q.array.isRequired,showNotificationModal:q.func.isRequired};const Dte=$s.memo(({show:r,onClose:e,title:t,message:n,theme:i})=>o.jsx(Vt,{children:r&&o.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:e,role:"dialog","aria-labelledby":"modal-title",children:o.jsxs(re.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${i==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${i==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[o.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:o.jsx(ti,{size:20})}),o.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${i==="dark"?"text-white":"text-gray-900"}`,children:t}),o.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:n})]})})}));Dte.propTypes={show:q.bool.isRequired,onClose:q.func.isRequired,title:q.string.isRequired,message:q.string.isRequired,theme:q.string.isRequired};const sR=()=>{const[r,e]=k.useState(!1),[t,n]=k.useState("inicio"),[i,s]=k.useState(""),[a,c]=k.useState(""),[d,h]=k.useState([]),[p,m]=k.useState([]),[x,v]=k.useState([]),[_,w]=k.useState([]),[E,j]=k.useState([]),[P,V]=k.useState([]),[L,K]=k.useState(0),[H,S]=k.useState(0),[N,I]=k.useState(0),[R,M]=k.useState(0),[D,F]=k.useState({day:0,week:0,month:0,total:0}),[he,Ae]=k.useState(!0),[Oe,De]=k.useState(!0),[we,_e]=k.useState(null),[Ne,ae]=k.useState({}),[W,ee]=k.useState({isOpen:!1,message:"",title:""}),[te,ie]=k.useState({isOpen:!1,user:null}),[U,be]=k.useState("dark"),[Ce,ke]=k.useState(!1),[Ee,Ke]=k.useState(!1),[dt,zt]=k.useState(""),[bt,tr]=k.useState(""),Et=Gs(),Pe=k.useCallback(()=>{be(ze=>ze==="dark"?"light":"dark")},[]),Qt=k.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),St=k.useCallback((ze,at)=>{ee({isOpen:!0,title:ze,message:at})},[]),Be=k.useCallback(()=>{ee({isOpen:!1,message:"",title:""})},[]),ue=k.useCallback(ze=>{ie({isOpen:!0,user:ze})},[]),rt=k.useCallback(()=>{ie({isOpen:!1,user:null})},[]),st=k.useCallback(ze=>{if(!ze)return"No especificada";try{const at=ze instanceof Date?ze:new Date(ze);return isNaN(at.getTime())?"Fecha inválida":at.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},[]),ht=k.useCallback(async ze=>{if(window.confirm("¿Estás seguro de que quieres eliminar este producto?"))try{ae(at=>({...at,deleteProduct:!0})),await za(vt(Fe,"products",ze)),St("Éxito","Producto eliminado correctamente")}catch(at){console.error("Error al eliminar producto:",at),St("Error",at.message||"Error al eliminar el producto")}finally{ae(at=>({...at,deleteProduct:!1}))}},[St]),Tt=k.useCallback(async(ze,at)=>{try{ae(xe=>({...xe,balance:!0}));const Mt=vt(Fe,"users",ze);await Pr(Mt,{balance:at,updatedAt:Er()}),St("Éxito","Saldo actualizado exitosamente"),rt()}catch(Mt){console.error("Error al actualizar saldo:",Mt),St("Error",Mt.message||"Error al actualizar el saldo")}finally{ae(Mt=>({...Mt,balance:!1}))}},[St,rt]),lt=k.useCallback(async ze=>{ze.preventDefault();try{ae(Xe=>({...Xe,config:!0}));const at=ze.target.password.value,Mt=vt(Fe,"users",Xr.currentUser.uid),xe={username:i,updatedAt:Er()};if(at){if(at.length<6){St("Error","La contraseña debe tener al menos 6 caracteres");return}await sb(Xr.currentUser,at)}await Pr(Mt,xe),St("Éxito","Cambios guardados correctamente"),ze.target.reset()}catch(at){console.error("Error al guardar cambios:",at),St("Error",at.message||"Error al guardar los cambios")}finally{ae(at=>({...at,config:!1}))}},[i,St]),Ct=k.useCallback(async()=>{try{await $h(Xr),Et("/")}catch(ze){console.error("Error al cerrar sesión:",ze),St("Error",ze.message||"Error al cerrar sesión")}},[Et,St]);k.useEffect(()=>{const ze=Nc(Xr,at=>{at?(c(at.email||"No especificado"),Ae(!1)):Et("/login")});return()=>ze()},[Et]),k.useEffect(()=>{if(!Xr.currentUser)return;const ze=vt(Fe,"users",Xr.currentUser.uid),at=dr(ze,Mt=>{if(Mt.exists()){const xe=Mt.data();s(xe.username||"Admin")}else _e("Usuario no encontrado")},Mt=>{console.error("Error al cargar datos del usuario:",Mt),_e("Error al cargar datos del usuario: "+Mt.message)});return()=>at()},[]),k.useEffect(()=>{const ze=It(Fe,"users"),at=It(Fe,"sales"),Mt=ur(It(Fe,"pendingTopUps"),gr("status","==","pendiente")),xe=ur(It(Fe,"withdrawals"),gr("status","==","pendiente")),Xe=ur(It(Fe,"products"),c2("createdAt","desc")),et=dr(ze,pt=>{const nt=pt.docs.map(Lt=>({id:Lt.id,...Lt.data()}));h(nt),K(nt.length)},pt=>{console.error("Error al cargar usuarios:",pt),_e("Error al cargar usuarios: "+pt.message)}),ut=dr(at,pt=>{const nt=pt.docs.map(qt=>({id:qt.id,...qt.data()}));m(nt);const Lt=nt.reduce((qt,hr)=>qt+(parseFloat(hr.price)||0),0);S(Lt)},pt=>{console.error("Error al cargar ventas:",pt),_e("Error al cargar ventas: "+pt.message)}),Ot=dr(Mt,pt=>{const nt=pt.docs.map(Lt=>({id:Lt.id,...Lt.data(),date:Lt.data().requestedAt?.toDate?.()||new Date,amount:parseFloat(Lt.data().amount)||0}));v(nt),I(nt.length)},pt=>{console.error("Error al cargar recargas:",pt),_e("Error al cargar recargas: "+pt.message)}),Ht=dr(xe,pt=>{const nt=pt.docs.map(Lt=>({id:Lt.id,...Lt.data(),date:Lt.data().requestedAt?.toDate?.()||new Date,amount:parseFloat(Lt.data().amount)||0}));w(nt),M(nt.length)},pt=>{console.error("Error al cargar retiros:",pt),_e("Error al cargar retiros: "+pt.message)}),Kt=dr(Xe,pt=>{const nt=pt.docs.map(Lt=>({id:Lt.id,...Lt.data(),createdAt:Lt.data().createdAt?.toDate?.()||new Date}));j(nt),De(!1)},pt=>{console.error("Error al cargar productos:",pt),_e("Error al cargar productos: "+pt.message),De(!1)});return()=>{et(),ut(),Ot(),Ht(),Kt()}},[]),k.useEffect(()=>{const ze=dr(vt(Fe,"notifications","adminMessage"),at=>{if(at.exists()){const Mt=at.data();V([{id:at.id,...Mt,timestamp:Mt.updatedAt?.toDate()}])}else V([])},at=>{console.error("Error al cargar notificaciones:",at),_e("Error al cargar notificaciones: "+at.message)});return()=>ze()},[]),k.useEffect(()=>{const ze=L*5;F({day:ze*.05,week:ze*.25,month:ze,total:ze})},[L]),k.useEffect(()=>{const ze=()=>{ke(window.scrollY>300)};return window.addEventListener("scroll",ze),()=>window.removeEventListener("scroll",ze)},[]);const ct=k.useCallback(ze=>{const at=ze.endDate?.toDate?.()||new Date,Mt=new Date;return ze.status==="pending"?"Pendiente":at>Mt&&ze.status==="completed"?"Activo":"Expirado"},[]),kr=k.useCallback(()=>he?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):we?o.jsxs("div",{className:`bg-${U==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${U==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsx(yc,{className:"mx-auto text-4xl text-blue-400 mb-4"}),o.jsx("h3",{className:`text-xl font-bold ${U==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Error"}),o.jsx("p",{className:`text-base ${U==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:we}),o.jsx("button",{onClick:()=>_e(null),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Aceptar"})]}):o.jsx("div",{className:`bg-${U==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${U==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:(()=>{switch(t){case"inicio":return o.jsx(Cte,{totalUsers:L,totalSales:H,pendingTopUps:N,pendingWithdrawals:R});case"notificaciones":return o.jsx(Ite,{notifications:P,formatDate:st});case"usuarios":return o.jsx(XP,{users:d,openEditBalanceModal:ue});case"proveedores":return o.jsx(iR,{users:d,theme:U,showNotificationModal:St,actionLoading:Ne});case"recargas":return o.jsx(JP,{topUps:x,formatDate:st,actionLoading:Ne,setActionLoading:ae,showNotificationModal:St});case"retiros":return o.jsx(Rte,{withdrawals:_,formatDate:st,actionLoading:Ne,setActionLoading:ae,showNotificationModal:St});case"pedidos":return o.jsx(ZP,{sales:p,totalSales:H,formatDate:st,getOrderStatus:ct});case"productos":return o.jsx(nR,{theme:U,products:E,setProducts:j,loadingProducts:Oe,searchQuery:bt,setSearchQuery:tr,handleDeleteProduct:ht});case"ganancias":return o.jsx(eR,{earnings:D,totalUsers:L});case"configuracion":return o.jsx(tR,{userName:i,setUserName:s,email:a,handleSaveChanges:lt,handleLogout:Ct,actionLoading:Ne});default:return o.jsxs("div",{className:`bg-${U==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${U==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsx(yc,{className:"mx-auto text-4xl text-blue-400 mb-4"}),o.jsx("h3",{className:`text-xl font-bold ${U==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Sección no encontrada"}),o.jsx("p",{className:`text-base ${U==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:"La sección que estás buscando no existe o no está disponible."}),o.jsx("button",{onClick:()=>n("inicio"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Volver al inicio"})]})}})()}),[he,we,U,t,L,H,N,R,P,st,d,ue,x,Ne,St,_,p,ct,D,i,s,a,lt,Ct,E,Oe,bt,ht]);return o.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${U==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-50 to-gray-50 text-gray-900"} font-inter relative overflow-x-hidden`,children:[o.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[o.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${U==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),o.jsx("div",{className:"particles",children:[...Array(15)].map((ze,at)=>o.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},at))})]}),o.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${U==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r overflow-y-auto lg:shadow-md`,children:o.jsxs("div",{className:"p-4 flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("button",{onClick:()=>{Et("/"),e(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),o.jsx("button",{onClick:()=>e(!1),className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:o.jsx(ti,{className:"text-lg"})})]}),o.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${U==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("p",{className:`font-medium ${U==="dark"?"text-white":"text-gray-900"}`,children:i}),o.jsx("p",{className:`text-xs ${U==="dark"?"text-gray-400":"text-gray-600"}`,children:"Administrador"})]})]}),o.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Z2},{id:"notificaciones",label:"Notificaciones",icon:xc},{id:"usuarios",label:"Usuarios",icon:wa},{id:"proveedores",label:"Proveedores",icon:wa},{id:"recargas",label:"Recargas",icon:ma},{id:"retiros",label:"Retiros",icon:ma},{id:"pedidos",label:"Pedidos",icon:gd},{id:"productos",label:"Productos",icon:R1},{id:"ganancias",label:"Ganancias",icon:P0},{id:"configuracion",label:"Configuración",icon:Tq}].map(ze=>o.jsxs("button",{onClick:()=>{n(ze.id),e(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${t===ze.id?"bg-blue-100 text-blue-600 border border-blue-300":U==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":t===ze.id?"page":void 0,children:[o.jsx(ze.icon,{className:"text-lg"}),o.jsx("span",{children:ze.label})]},ze.id))}),o.jsx("div",{className:"mt-auto pt-6",children:o.jsxs("button",{onClick:()=>{Ct(),e(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${U==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[o.jsx(xd,{className:"text-lg"}),o.jsx("span",{children:"Cerrar Sesión"})]})})]})}),o.jsxs("header",{className:`${U==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md py-4 px-4 sm:px-6 lg:px-8 flex items-center justify-between shadow-md fixed top-0 left-0 right-0 z-50 lg:ml-64`,children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(re.img,{src:Dc,alt:"BlackStreaming logo",className:`h-10 w-10 rounded-full border ${U==="dark"?"border-gray-700/50":"border-gray-300"} shadow-sm lg:hidden`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),o.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),o.jsx("div",{className:"flex-1 mx-4 max-w-lg",children:o.jsxs("div",{className:"relative group",children:[o.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:dt,onChange:ze=>zt(ze.target.value),className:`w-full py-2.5 px-5 ${U==="dark"?"bg-gray-800/50 border-gray-600/50 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-md`,"aria-label":"Search orders",onKeyDown:ze=>ze.key==="Enter"&&n("pedidos")}),o.jsx("button",{onClick:()=>n("pedidos"),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${U==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Search",children:o.jsx(md,{size:18})})]})}),o.jsxs("nav",{className:"flex items-center space-x-4 relative",children:[o.jsx("button",{onClick:Pe,className:`p-2 rounded-full ${U==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Switch to ${U==="dark"?"light":"dark"} theme`,children:U==="dark"?o.jsx(jc,{size:20}):o.jsx(Rc,{size:20})}),o.jsxs("button",{onClick:()=>Ke(!0),className:`p-2 rounded-full relative ${U==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Notifications (${P.length} new)`,children:[o.jsx(xc,{size:20}),P.length>0&&o.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:P.length})]}),o.jsx("button",{className:`lg:hidden p-2 rounded-full ${U==="dark"?"hover:bg-gray-700/50":"hover:bg-gray-100"} transition-all duration-300`,onClick:()=>e(!r),"aria-label":"Toggle mobile menu","aria-expanded":r,children:o.jsx(Zg,{size:20,className:U==="dark"?"text-gray-300":"text-gray-600"})}),o.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o.jsx("div",{className:"relative",children:o.jsxs("button",{className:`flex items-center space-x-2 ${U==="dark"?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-md transition-all duration-300`,"aria-label":"User menu",children:[o.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:i.charAt(0).toUpperCase()}),o.jsx("span",{className:`text-sm font-semibold ${U==="dark"?"text-gray-200":"text-gray-800"}`,children:i})]})})})]})]}),o.jsx(Vt,{children:Ee&&o.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>Ke(!1),role:"dialog","aria-labelledby":"notifications-title",children:o.jsxs(re.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 lg:max-w-lg ${U==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${U==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:ze=>ze.stopPropagation(),children:[o.jsx("button",{onClick:()=>Ke(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notifications",children:o.jsx(ti,{size:20})}),o.jsx("h2",{id:"notifications-title",className:`text-xl font-bold mb-4 ${U==="dark"?"text-white":"text-gray-900"}`,children:"Notificaciones"}),P.length>0?P.map(ze=>o.jsxs("div",{className:`p-4 mb-2 rounded-md ${U==="dark"?"bg-gray-800/50":"bg-gray-100/80"} border-l-4 ${U==="dark"?"border-blue-500/50":"border-blue-300/50"}`,children:[o.jsx("h3",{className:`font-semibold ${U==="dark"?"text-gray-200":"text-gray-800"}`,children:ze.title||"Nueva Notificación"}),o.jsx("p",{className:`text-sm ${U==="dark"?"text-gray-300":"text-gray-700"} mt-1`,children:ze.message}),ze.roles&&ze.roles.length>0&&o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Roles: ",ze.roles.join(", ")]}),ze.timestamp&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:st(ze.timestamp)})]},ze.id)):o.jsx("p",{className:`text-center ${U==="dark"?"text-gray-400":"text-gray-600"} mt-4`,children:"No hay notificaciones."})]})})}),o.jsx("main",{className:"lg:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start",children:kr()}),o.jsxs("footer",{className:`${U==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md px-4 sm:px-6 lg:px-8 py-12 text-center relative z-10 lg:ml-64 max-w-6xl mx-auto rounded-2xl border ${U==="dark"?"border-gray-700/50":"border-gray-300"} mt-8 shadow-md`,children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-4",children:"BlackStreaming"}),o.jsxs("p",{className:`text-base sm:text-lg ${U==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["Todos los derechos reservados. Desarrollado por"," ",o.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Saiph"}),"."]}),o.jsxs("div",{className:"flex justify-center space-x-6 sm:space-x-8 mb-6",children:[o.jsx("a",{href:"https://twitter.com",className:`${U==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Twitter",children:o.jsx(Pc,{size:28})}),o.jsx("a",{href:"https://instagram.com",className:`${U==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Instagram",children:o.jsx(Ic,{size:28})}),o.jsx("a",{href:"https://facebook.com",className:`${U==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Facebook",children:o.jsx(Cc,{size:28})})]}),o.jsxs("div",{className:"flex justify-center space-x-4 sm:space-x-6",children:[o.jsx("a",{href:"#",className:`text-sm ${U==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Privacy Policy",children:"Política de Privacidad"}),o.jsx("a",{href:"#",className:`text-sm ${U==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Terms of Service",children:"Términos de Servicio"}),o.jsx("a",{href:"#",className:`text-sm ${U==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Contact Us",children:"Contáctanos"})]})]}),o.jsxs("p",{className:`text-sm ${U==="dark"?"text-gray-500":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Hecho con pasión."]})]}),o.jsx(Vt,{children:Ce&&o.jsx(re.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qt,className:"fixed bottom-6 right-6 bg-blue-600/90 backdrop-blur-md p-3 rounded-full hover:bg-blue-700/95 shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 lg:bottom-8 lg:right-8","aria-label":"Back to top",children:o.jsx(Jg,{size:20})})}),o.jsx(rR,{isOpen:W.isOpen,title:W.title,message:W.message,onClose:Be}),o.jsx(jte,{isOpen:te.isOpen,user:te.user,onClose:rt,onSave:Tt}),r&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 lg:hidden",onClick:()=>e(!1),"aria-hidden":"true"})]})};sR.propTypes={};k.lazy(()=>lr(()=>import("./Maintenance-CVkD61Vy.js"),[]));const Fte=k.lazy(()=>lr(()=>import("./NotFound-D9RNvIgl.js"),[])),Ote={netflix:k.lazy(()=>lr(()=>import("./Netflix-1XeWqlQ8.js"),[])),disney:k.lazy(()=>lr(()=>import("./Disney-CbuCBUf3.js"),[])),max:k.lazy(()=>lr(()=>import("./Max-Dv2eqjbo.js"),[])),spotify:k.lazy(()=>lr(()=>import("./Spotify-DhMoQnzt.js"),[])),primevideo:k.lazy(()=>lr(()=>import("./PrimeVideo-js4Maf0Q.js"),[])),vix:k.lazy(()=>lr(()=>import("./Vix-KeHP61vK.js"),[])),canva:k.lazy(()=>lr(()=>import("./canva-DYEiT3UM.js"),[])),chatgpt:k.lazy(()=>lr(()=>import("./ChatGPT-CdLlh0pv.js"),[])),crunchyroll:k.lazy(()=>lr(()=>import("./Crunchyroll-2lz4WwVu.js"),[])),redessociales:k.lazy(()=>lr(()=>import("./RedesSociales-B5L8Jvz1.js"),[])),applemusic:k.lazy(()=>lr(()=>import("./AppleMusic-Don4lBRB.js"),[])),appletv:k.lazy(()=>lr(()=>import("./AppleTv-BzsGM6x_.js"),[])),iptv:k.lazy(()=>lr(()=>import("./IPTV-CaOOOxmm.js"),[])),flujotv:k.lazy(()=>lr(()=>import("./FlujoTv-DSIWAP_W.js"),[])),vikirakuten:k.lazy(()=>lr(()=>import("./VikiRakuten-C1ev8y_8.js"),[])),pornhub:k.lazy(()=>lr(()=>import("./Pornhub-D-ogTeX8.js"),[])),paramount:k.lazy(()=>lr(()=>import("./Paramount-3MJ30oA4.js"),[])),licencias:k.lazy(()=>lr(()=>import("./Licencias-BDqoS9us.js"),[])),capcut:k.lazy(()=>lr(()=>import("./Capcut-B_3eAbWr.js"),[])),duolingo:k.lazy(()=>lr(()=>import("./Duolingo-BSZvvC8_.js"),[])),dgo:k.lazy(()=>lr(()=>import("./Dgo-D25pa3zM.js"),[])),ligamax:k.lazy(()=>lr(()=>import("./LigaMax-e3RqQ8AI.js"),[])),movistarplay:k.lazy(()=>lr(()=>import("./MovistarPlay-DekINFi2.js"),[])),youtube:k.lazy(()=>lr(()=>import("./Youtube-CByp_wZt.js"),[])),deezer:k.lazy(()=>lr(()=>import("./Deezer-3XvzJ2iQ.js"),[])),tidal:k.lazy(()=>lr(()=>import("./Tidal-SLAz8w03.js"),[])),vpn:k.lazy(()=>lr(()=>import("./Vpn-B8DXvYsz.js"),[])),wintv:k.lazy(()=>lr(()=>import("./WinTv-C-U8VSw_.js"),[])),buscapersonas:k.lazy(()=>lr(()=>import("./Buscapersonas-9s2IpyR6.js"),[]))},Ld=k.memo(()=>o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:o.jsx("div",{className:"text-xl",children:"Cargando..."})})),Lte=k.memo(()=>o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-lg",children:"Cargando categoría..."})}));k.memo(({children:r,redirectTo:e="/login"})=>{const{user:t,loading:n}=sf();return n?o.jsx(Ld,{}):t?r:o.jsx(Fh,{to:e,replace:!0})});const Mte=k.memo(({children:r,redirectTo:e="/login"})=>{const{user:t,role:n,loading:i}=sf();return i?o.jsx(Ld,{}):t&&n==="user"?r:o.jsx(Fh,{to:e,replace:!0})}),Vte=k.memo(({children:r,redirectTo:e="/login"})=>{const{user:t,role:n,loading:i}=sf();return i?o.jsx(Ld,{}):t&&n==="admin"?r:o.jsx(Fh,{to:e,replace:!0})}),$te=k.memo(({children:r,redirectTo:e="/login"})=>{const{user:t,role:n,loading:i}=sf();return i?o.jsx(Ld,{}):t&&n==="affiliate"?r:o.jsx(Fh,{to:e,replace:!0})}),Bte=k.memo(({children:r,redirectTo:e="/login"})=>{const{user:t,role:n,loading:i}=sf();return i?o.jsx(Ld,{}):t&&n==="provider"?r:o.jsx(Fh,{to:e,replace:!0})}),Ute=k.memo(()=>{const r=Object.entries(Ote).map(([e,t])=>o.jsx(js,{path:`/${e}`,element:o.jsx(k.Suspense,{fallback:o.jsx(Lte,{}),children:o.jsx(t,{})})},e));return o.jsxs(lD,{children:[o.jsx(js,{path:"/",element:o.jsx(Q6,{})}),o.jsx(js,{path:"/login",element:o.jsx(bG,{})}),o.jsx(js,{path:"/register",element:o.jsx(wG,{})}),o.jsx(js,{path:"/forgot-password",element:o.jsx(_G,{})}),o.jsx(js,{path:"/dashboard/user",element:o.jsx(Mte,{children:o.jsx($P,{})})}),o.jsx(js,{path:"/dashboard/affiliate",element:o.jsx($te,{children:o.jsx(vte,{})})}),o.jsx(js,{path:"/dashboard/provider",element:o.jsx(Bte,{children:o.jsx(WP,{})})}),o.jsx(js,{path:"/dashboard/admin",element:o.jsx(Vte,{children:o.jsx(sR,{})})}),r,o.jsx(js,{path:"*",element:o.jsx(k.Suspense,{fallback:o.jsx(Ld,{}),children:o.jsx(Fte,{})})})]})}),zte=o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:o.jsx("div",{className:"text-xl",children:"Inicializando aplicación..."})});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(r=>{console.log("Service Worker registrado con éxito:",r)}).catch(r=>{console.error("Error al registrar el Service Worker:",r)})});yj.createRoot(document.getElementById("root")).render(o.jsx($s.StrictMode,{children:o.jsx(PD,{children:o.jsx(xB,{children:o.jsx(k.Suspense,{fallback:zte,children:o.jsx(Ute,{})})})})}));export{qte as $,Zte as A,nre as B,sre as C,tre as D,Gte as E,rre as F,ere as G,Jte as H,Yte as I,U6 as J,Qte as K,wi as L,Gi as M,re as N,md as O,jc as P,Rc as Q,xc as R,Fq as S,vq as T,Vt as U,Jm as V,xd as W,j1 as X,D1 as Y,ti as Z,ire as _,dr as a,Xte as a0,bc as a1,Jg as a2,Pc as a3,Ic as a4,Cc as a5,q as a6,ga as b,It as c,ki as d,eg as e,Xr as f,Rd as g,ol as h,vt as i,o as j,Fe as k,Dc as l,yc as m,Z2 as n,Nc as o,tg as p,ur as q,k as r,c2 as s,pn as t,Gs as u,HT as v,gr as w,Er as x,$h as y,Kte as z};
