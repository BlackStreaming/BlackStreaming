(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function T2(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var kb={exports:{}},Xd={},Cb={exports:{}},dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var go=Symbol.for("react.element"),D2=Symbol.for("react.portal"),A2=Symbol.for("react.fragment"),R2=Symbol.for("react.strict_mode"),M2=Symbol.for("react.profiler"),O2=Symbol.for("react.provider"),z2=Symbol.for("react.context"),L2=Symbol.for("react.forward_ref"),V2=Symbol.for("react.suspense"),F2=Symbol.for("react.memo"),U2=Symbol.for("react.lazy"),hf=Symbol.iterator;function B2(s){return s===null||typeof s!="object"?null:(s=hf&&s[hf]||s["@@iterator"],typeof s=="function"?s:null)}var Ib={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Eb=Object.assign,Sb={};function Ti(s,t,r){this.props=s,this.context=t,this.refs=Sb,this.updater=r||Ib}Ti.prototype.isReactComponent={};Ti.prototype.setState=function(s,t){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,t,"setState")};Ti.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function _b(){}_b.prototype=Ti.prototype;function hh(s,t,r){this.props=s,this.context=t,this.refs=Sb,this.updater=r||Ib}var ph=hh.prototype=new _b;ph.constructor=hh;Eb(ph,Ti.prototype);ph.isPureReactComponent=!0;var pf=Array.isArray,Pb=Object.prototype.hasOwnProperty,fh={current:null},Tb={key:!0,ref:!0,__self:!0,__source:!0};function Db(s,t,r){var a,i={},o=null,l=null;if(t!=null)for(a in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)Pb.call(t,a)&&!Tb.hasOwnProperty(a)&&(i[a]=t[a]);var d=arguments.length-2;if(d===1)i.children=r;else if(1<d){for(var x=Array(d),p=0;p<d;p++)x[p]=arguments[p+2];i.children=x}if(s&&s.defaultProps)for(a in d=s.defaultProps,d)i[a]===void 0&&(i[a]=d[a]);return{$$typeof:go,type:s,key:o,ref:l,props:i,_owner:fh.current}}function $2(s,t){return{$$typeof:go,type:s.type,key:t,ref:s.ref,props:s.props,_owner:s._owner}}function gh(s){return typeof s=="object"&&s!==null&&s.$$typeof===go}function q2(s){var t={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(r){return t[r]})}var ff=/\/+/g;function ax(s,t){return typeof s=="object"&&s!==null&&s.key!=null?q2(""+s.key):t.toString(36)}function Ec(s,t,r,a,i){var o=typeof s;(o==="undefined"||o==="boolean")&&(s=null);var l=!1;if(s===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(s.$$typeof){case go:case D2:l=!0}}if(l)return l=s,i=i(l),s=a===""?"."+ax(l,0):a,pf(i)?(r="",s!=null&&(r=s.replace(ff,"$&/")+"/"),Ec(i,t,r,"",function(p){return p})):i!=null&&(gh(i)&&(i=$2(i,r+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(ff,"$&/")+"/")+s)),t.push(i)),1;if(l=0,a=a===""?".":a+":",pf(s))for(var d=0;d<s.length;d++){o=s[d];var x=a+ax(o,d);l+=Ec(o,t,r,x,i)}else if(x=B2(s),typeof x=="function")for(s=x.call(s),d=0;!(o=s.next()).done;)o=o.value,x=a+ax(o,d++),l+=Ec(o,t,r,x,i);else if(o==="object")throw t=String(s),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function tc(s,t,r){if(s==null)return s;var a=[],i=0;return Ec(s,a,"","",function(o){return t.call(r,o,i++)}),a}function W2(s){if(s._status===-1){var t=s._result;t=t(),t.then(function(r){(s._status===0||s._status===-1)&&(s._status=1,s._result=r)},function(r){(s._status===0||s._status===-1)&&(s._status=2,s._result=r)}),s._status===-1&&(s._status=0,s._result=t)}if(s._status===1)return s._result.default;throw s._result}var Ts={current:null},Sc={transition:null},G2={ReactCurrentDispatcher:Ts,ReactCurrentBatchConfig:Sc,ReactCurrentOwner:fh};function Ab(){throw Error("act(...) is not supported in production builds of React.")}dt.Children={map:tc,forEach:function(s,t,r){tc(s,function(){t.apply(this,arguments)},r)},count:function(s){var t=0;return tc(s,function(){t++}),t},toArray:function(s){return tc(s,function(t){return t})||[]},only:function(s){if(!gh(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};dt.Component=Ti;dt.Fragment=A2;dt.Profiler=M2;dt.PureComponent=hh;dt.StrictMode=R2;dt.Suspense=V2;dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G2;dt.act=Ab;dt.cloneElement=function(s,t,r){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var a=Eb({},s.props),i=s.key,o=s.ref,l=s._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=fh.current),t.key!==void 0&&(i=""+t.key),s.type&&s.type.defaultProps)var d=s.type.defaultProps;for(x in t)Pb.call(t,x)&&!Tb.hasOwnProperty(x)&&(a[x]=t[x]===void 0&&d!==void 0?d[x]:t[x])}var x=arguments.length-2;if(x===1)a.children=r;else if(1<x){d=Array(x);for(var p=0;p<x;p++)d[p]=arguments[p+2];a.children=d}return{$$typeof:go,type:s.type,key:i,ref:o,props:a,_owner:l}};dt.createContext=function(s){return s={$$typeof:z2,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:O2,_context:s},s.Consumer=s};dt.createElement=Db;dt.createFactory=function(s){var t=Db.bind(null,s);return t.type=s,t};dt.createRef=function(){return{current:null}};dt.forwardRef=function(s){return{$$typeof:L2,render:s}};dt.isValidElement=gh;dt.lazy=function(s){return{$$typeof:U2,_payload:{_status:-1,_result:s},_init:W2}};dt.memo=function(s,t){return{$$typeof:F2,type:s,compare:t===void 0?null:t}};dt.startTransition=function(s){var t=Sc.transition;Sc.transition={};try{s()}finally{Sc.transition=t}};dt.unstable_act=Ab;dt.useCallback=function(s,t){return Ts.current.useCallback(s,t)};dt.useContext=function(s){return Ts.current.useContext(s)};dt.useDebugValue=function(){};dt.useDeferredValue=function(s){return Ts.current.useDeferredValue(s)};dt.useEffect=function(s,t){return Ts.current.useEffect(s,t)};dt.useId=function(){return Ts.current.useId()};dt.useImperativeHandle=function(s,t,r){return Ts.current.useImperativeHandle(s,t,r)};dt.useInsertionEffect=function(s,t){return Ts.current.useInsertionEffect(s,t)};dt.useLayoutEffect=function(s,t){return Ts.current.useLayoutEffect(s,t)};dt.useMemo=function(s,t){return Ts.current.useMemo(s,t)};dt.useReducer=function(s,t,r){return Ts.current.useReducer(s,t,r)};dt.useRef=function(s){return Ts.current.useRef(s)};dt.useState=function(s){return Ts.current.useState(s)};dt.useSyncExternalStore=function(s,t,r){return Ts.current.useSyncExternalStore(s,t,r)};dt.useTransition=function(){return Ts.current.useTransition()};dt.version="18.3.1";Cb.exports=dt;var j=Cb.exports;const Ea=T2(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H2=j,Q2=Symbol.for("react.element"),K2=Symbol.for("react.fragment"),Y2=Object.prototype.hasOwnProperty,X2=H2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,J2={key:!0,ref:!0,__self:!0,__source:!0};function Rb(s,t,r){var a,i={},o=null,l=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(a in t)Y2.call(t,a)&&!J2.hasOwnProperty(a)&&(i[a]=t[a]);if(s&&s.defaultProps)for(a in t=s.defaultProps,t)i[a]===void 0&&(i[a]=t[a]);return{$$typeof:Q2,type:s,key:o,ref:l,props:i,_owner:X2.current}}Xd.Fragment=K2;Xd.jsx=Rb;Xd.jsxs=Rb;kb.exports=Xd;var e=kb.exports,Gx={},Mb={exports:{}},Xs={},Ob={exports:{}},zb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function t(ce,ee){var le=ce.length;ce.push(ee);e:for(;0<le;){var je=le-1>>>1,n=ce[je];if(0<i(n,ee))ce[je]=ee,ce[le]=n,le=je;else break e}}function r(ce){return ce.length===0?null:ce[0]}function a(ce){if(ce.length===0)return null;var ee=ce[0],le=ce.pop();if(le!==ee){ce[0]=le;e:for(var je=0,n=ce.length,b=n>>>1;je<b;){var g=2*(je+1)-1,O=ce[g],H=g+1,$=ce[H];if(0>i(O,le))H<n&&0>i($,O)?(ce[je]=$,ce[H]=le,je=H):(ce[je]=O,ce[g]=le,je=g);else if(H<n&&0>i($,le))ce[je]=$,ce[H]=le,je=H;else break e}}return ee}function i(ce,ee){var le=ce.sortIndex-ee.sortIndex;return le!==0?le:ce.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var l=Date,d=l.now();s.unstable_now=function(){return l.now()-d}}var x=[],p=[],N=1,I=null,T=3,A=!1,f=!1,L=!1,k=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(ce){for(var ee=r(p);ee!==null;){if(ee.callback===null)a(p);else if(ee.startTime<=ce)a(p),ee.sortIndex=ee.expirationTime,t(x,ee);else break;ee=r(p)}}function Y(ce){if(L=!1,M(ce),!f)if(r(x)!==null)f=!0,Ce(G);else{var ee=r(p);ee!==null&&Te(Y,ee.startTime-ce)}}function G(ce,ee){f=!1,L&&(L=!1,_(c),c=-1),A=!0;var le=T;try{for(M(ee),I=r(x);I!==null&&(!(I.expirationTime>ee)||ce&&!Q());){var je=I.callback;if(typeof je=="function"){I.callback=null,T=I.priorityLevel;var n=je(I.expirationTime<=ee);ee=s.unstable_now(),typeof n=="function"?I.callback=n:I===r(x)&&a(x),M(ee)}else a(x);I=r(x)}if(I!==null)var b=!0;else{var g=r(p);g!==null&&Te(Y,g.startTime-ee),b=!1}return b}finally{I=null,T=le,A=!1}}var W=!1,R=null,c=-1,F=5,V=-1;function Q(){return!(s.unstable_now()-V<F)}function E(){if(R!==null){var ce=s.unstable_now();V=ce;var ee=!0;try{ee=R(!0,ce)}finally{ee?q():(W=!1,R=null)}}else W=!1}var q;if(typeof z=="function")q=function(){z(E)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,Ie=_e.port2;_e.port1.onmessage=E,q=function(){Ie.postMessage(null)}}else q=function(){k(E,0)};function Ce(ce){R=ce,W||(W=!0,q())}function Te(ce,ee){c=k(function(){ce(s.unstable_now())},ee)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ce){ce.callback=null},s.unstable_continueExecution=function(){f||A||(f=!0,Ce(G))},s.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<ce?Math.floor(1e3/ce):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_getFirstCallbackNode=function(){return r(x)},s.unstable_next=function(ce){switch(T){case 1:case 2:case 3:var ee=3;break;default:ee=T}var le=T;T=ee;try{return ce()}finally{T=le}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ce,ee){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var le=T;T=ce;try{return ee()}finally{T=le}},s.unstable_scheduleCallback=function(ce,ee,le){var je=s.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?je+le:je):le=je,ce){case 1:var n=-1;break;case 2:n=250;break;case 5:n=1073741823;break;case 4:n=1e4;break;default:n=5e3}return n=le+n,ce={id:N++,callback:ee,priorityLevel:ce,startTime:le,expirationTime:n,sortIndex:-1},le>je?(ce.sortIndex=le,t(p,ce),r(x)===null&&ce===r(p)&&(L?(_(c),c=-1):L=!0,Te(Y,le-je))):(ce.sortIndex=n,t(x,ce),f||A||(f=!0,Ce(G))),ce},s.unstable_shouldYield=Q,s.unstable_wrapCallback=function(ce){var ee=T;return function(){var le=T;T=ee;try{return ce.apply(this,arguments)}finally{T=le}}}})(zb);Ob.exports=zb;var Z2=Ob.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e4=j,Ys=Z2;function ke(s){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+s,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lb=new Set,Vl={};function _n(s,t){fi(s,t),fi(s+"Capture",t)}function fi(s,t){for(Vl[s]=t,s=0;s<t.length;s++)Lb.add(t[s])}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hx=Object.prototype.hasOwnProperty,t4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gf={},yf={};function s4(s){return Hx.call(yf,s)?!0:Hx.call(gf,s)?!1:t4.test(s)?yf[s]=!0:(gf[s]=!0,!1)}function r4(s,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function a4(s,t,r,a){if(t===null||typeof t>"u"||r4(s,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ds(s,t,r,a,i,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=s,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var hs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){hs[s]=new Ds(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var t=s[0];hs[t]=new Ds(t,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){hs[s]=new Ds(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){hs[s]=new Ds(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){hs[s]=new Ds(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){hs[s]=new Ds(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){hs[s]=new Ds(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){hs[s]=new Ds(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){hs[s]=new Ds(s,5,!1,s.toLowerCase(),null,!1,!1)});var yh=/[\-:]([a-z])/g;function bh(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var t=s.replace(yh,bh);hs[t]=new Ds(t,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var t=s.replace(yh,bh);hs[t]=new Ds(t,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var t=s.replace(yh,bh);hs[t]=new Ds(t,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){hs[s]=new Ds(s,1,!1,s.toLowerCase(),null,!1,!1)});hs.xlinkHref=new Ds("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){hs[s]=new Ds(s,1,!1,s.toLowerCase(),null,!0,!0)});function jh(s,t,r,a){var i=hs.hasOwnProperty(t)?hs[t]:null;(i!==null?i.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(a4(t,r,i,a)&&(r=null),a||i===null?s4(t)&&(r===null?s.removeAttribute(t):s.setAttribute(t,""+r)):i.mustUseProperty?s[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,a=i.attributeNamespace,r===null?s.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,a?s.setAttributeNS(a,t,r):s.setAttribute(t,r))))}var ia=e4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sc=Symbol.for("react.element"),Gn=Symbol.for("react.portal"),Hn=Symbol.for("react.fragment"),vh=Symbol.for("react.strict_mode"),Qx=Symbol.for("react.profiler"),Vb=Symbol.for("react.provider"),Fb=Symbol.for("react.context"),Nh=Symbol.for("react.forward_ref"),Kx=Symbol.for("react.suspense"),Yx=Symbol.for("react.suspense_list"),wh=Symbol.for("react.memo"),fa=Symbol.for("react.lazy"),Ub=Symbol.for("react.offscreen"),bf=Symbol.iterator;function el(s){return s===null||typeof s!="object"?null:(s=bf&&s[bf]||s["@@iterator"],typeof s=="function"?s:null)}var Bt=Object.assign,nx;function ul(s){if(nx===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);nx=t&&t[1]||""}return`
`+nx+s}var ix=!1;function lx(s,t){if(!s||ix)return"";ix=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var a=p}Reflect.construct(s,[],t)}else{try{t.call()}catch(p){a=p}s.call(t.prototype)}else{try{throw Error()}catch(p){a=p}s()}}catch(p){if(p&&a&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),o=a.stack.split(`
`),l=i.length-1,d=o.length-1;1<=l&&0<=d&&i[l]!==o[d];)d--;for(;1<=l&&0<=d;l--,d--)if(i[l]!==o[d]){if(l!==1||d!==1)do if(l--,d--,0>d||i[l]!==o[d]){var x=`
`+i[l].replace(" at new "," at ");return s.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",s.displayName)),x}while(1<=l&&0<=d);break}}}finally{ix=!1,Error.prepareStackTrace=r}return(s=s?s.displayName||s.name:"")?ul(s):""}function n4(s){switch(s.tag){case 5:return ul(s.type);case 16:return ul("Lazy");case 13:return ul("Suspense");case 19:return ul("SuspenseList");case 0:case 2:case 15:return s=lx(s.type,!1),s;case 11:return s=lx(s.type.render,!1),s;case 1:return s=lx(s.type,!0),s;default:return""}}function Xx(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Hn:return"Fragment";case Gn:return"Portal";case Qx:return"Profiler";case vh:return"StrictMode";case Kx:return"Suspense";case Yx:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Fb:return(s.displayName||"Context")+".Consumer";case Vb:return(s._context.displayName||"Context")+".Provider";case Nh:var t=s.render;return s=s.displayName,s||(s=t.displayName||t.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case wh:return t=s.displayName||null,t!==null?t:Xx(s.type)||"Memo";case fa:t=s._payload,s=s._init;try{return Xx(s(t))}catch{}}return null}function i4(s){var t=s.type;switch(s.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=t.render,s=s.displayName||s.name||"",t.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xx(t);case 8:return t===vh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fa(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Bb(s){var t=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function l4(s){var t=Bb(s)?"checked":"value",r=Object.getOwnPropertyDescriptor(s.constructor.prototype,t),a=""+s[t];if(!s.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(s,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){a=""+l,o.call(this,l)}}),Object.defineProperty(s,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(l){a=""+l},stopTracking:function(){s._valueTracker=null,delete s[t]}}}}function rc(s){s._valueTracker||(s._valueTracker=l4(s))}function $b(s){if(!s)return!1;var t=s._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return s&&(a=Bb(s)?s.checked?"true":"false":s.value),s=a,s!==r?(t.setValue(s),!0):!1}function Xc(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Jx(s,t){var r=t.checked;return Bt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??s._wrapperState.initialChecked})}function jf(s,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Fa(t.value!=null?t.value:r),s._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qb(s,t){t=t.checked,t!=null&&jh(s,"checked",t,!1)}function Zx(s,t){qb(s,t);var r=Fa(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+r):s.value!==""+r&&(s.value=""+r);else if(a==="submit"||a==="reset"){s.removeAttribute("value");return}t.hasOwnProperty("value")?em(s,t.type,r):t.hasOwnProperty("defaultValue")&&em(s,t.type,Fa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(s.defaultChecked=!!t.defaultChecked)}function vf(s,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+s._wrapperState.initialValue,r||t===s.value||(s.value=t),s.defaultValue=t}r=s.name,r!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,r!==""&&(s.name=r)}function em(s,t,r){(t!=="number"||Xc(s.ownerDocument)!==s)&&(r==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+r&&(s.defaultValue=""+r))}var xl=Array.isArray;function ii(s,t,r,a){if(s=s.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<s.length;r++)i=t.hasOwnProperty("$"+s[r].value),s[r].selected!==i&&(s[r].selected=i),i&&a&&(s[r].defaultSelected=!0)}else{for(r=""+Fa(r),t=null,i=0;i<s.length;i++){if(s[i].value===r){s[i].selected=!0,a&&(s[i].defaultSelected=!0);return}t!==null||s[i].disabled||(t=s[i])}t!==null&&(t.selected=!0)}}function tm(s,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ke(91));return Bt({},t,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Nf(s,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ke(92));if(xl(r)){if(1<r.length)throw Error(ke(93));r=r[0]}t=r}t==null&&(t=""),r=t}s._wrapperState={initialValue:Fa(r)}}function Wb(s,t){var r=Fa(t.value),a=Fa(t.defaultValue);r!=null&&(r=""+r,r!==s.value&&(s.value=r),t.defaultValue==null&&s.defaultValue!==r&&(s.defaultValue=r)),a!=null&&(s.defaultValue=""+a)}function wf(s){var t=s.textContent;t===s._wrapperState.initialValue&&t!==""&&t!==null&&(s.value=t)}function Gb(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sm(s,t){return s==null||s==="http://www.w3.org/1999/xhtml"?Gb(t):s==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ac,Hb=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,i){MSApp.execUnsafeLocalFunction(function(){return s(t,r,a,i)})}:s}(function(s,t){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=t;else{for(ac=ac||document.createElement("div"),ac.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ac.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;t.firstChild;)s.appendChild(t.firstChild)}});function Fl(s,t){if(t){var r=s.firstChild;if(r&&r===s.lastChild&&r.nodeType===3){r.nodeValue=t;return}}s.textContent=t}var vl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o4=["Webkit","ms","Moz","O"];Object.keys(vl).forEach(function(s){o4.forEach(function(t){t=t+s.charAt(0).toUpperCase()+s.substring(1),vl[t]=vl[s]})});function Qb(s,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||vl.hasOwnProperty(s)&&vl[s]?(""+t).trim():t+"px"}function Kb(s,t){s=s.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,i=Qb(r,t[r],a);r==="float"&&(r="cssFloat"),a?s.setProperty(r,i):s[r]=i}}var c4=Bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rm(s,t){if(t){if(c4[s]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ke(137,s));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ke(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ke(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ke(62))}}function am(s,t){if(s.indexOf("-")===-1)return typeof t.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nm=null;function kh(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var im=null,li=null,oi=null;function kf(s){if(s=jo(s)){if(typeof im!="function")throw Error(ke(280));var t=s.stateNode;t&&(t=su(t),im(s.stateNode,s.type,t))}}function Yb(s){li?oi?oi.push(s):oi=[s]:li=s}function Xb(){if(li){var s=li,t=oi;if(oi=li=null,kf(s),t)for(s=0;s<t.length;s++)kf(t[s])}}function Jb(s,t){return s(t)}function Zb(){}var ox=!1;function ej(s,t,r){if(ox)return s(t,r);ox=!0;try{return Jb(s,t,r)}finally{ox=!1,(li!==null||oi!==null)&&(Zb(),Xb())}}function Ul(s,t){var r=s.stateNode;if(r===null)return null;var a=su(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(s=s.type,a=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!a;break e;default:s=!1}if(s)return null;if(r&&typeof r!="function")throw Error(ke(231,t,typeof r));return r}var lm=!1;if(Xr)try{var tl={};Object.defineProperty(tl,"passive",{get:function(){lm=!0}}),window.addEventListener("test",tl,tl),window.removeEventListener("test",tl,tl)}catch{lm=!1}function d4(s,t,r,a,i,o,l,d,x){var p=Array.prototype.slice.call(arguments,3);try{t.apply(r,p)}catch(N){this.onError(N)}}var Nl=!1,Jc=null,Zc=!1,om=null,u4={onError:function(s){Nl=!0,Jc=s}};function x4(s,t,r,a,i,o,l,d,x){Nl=!1,Jc=null,d4.apply(u4,arguments)}function m4(s,t,r,a,i,o,l,d,x){if(x4.apply(this,arguments),Nl){if(Nl){var p=Jc;Nl=!1,Jc=null}else throw Error(ke(198));Zc||(Zc=!0,om=p)}}function Pn(s){var t=s,r=s;if(s.alternate)for(;t.return;)t=t.return;else{s=t;do t=s,t.flags&4098&&(r=t.return),s=t.return;while(s)}return t.tag===3?r:null}function tj(s){if(s.tag===13){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function Cf(s){if(Pn(s)!==s)throw Error(ke(188))}function h4(s){var t=s.alternate;if(!t){if(t=Pn(s),t===null)throw Error(ke(188));return t!==s?null:s}for(var r=s,a=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(a=i.return,a!==null){r=a;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return Cf(i),s;if(o===a)return Cf(i),t;o=o.sibling}throw Error(ke(188))}if(r.return!==a.return)r=i,a=o;else{for(var l=!1,d=i.child;d;){if(d===r){l=!0,r=i,a=o;break}if(d===a){l=!0,a=i,r=o;break}d=d.sibling}if(!l){for(d=o.child;d;){if(d===r){l=!0,r=o,a=i;break}if(d===a){l=!0,a=o,r=i;break}d=d.sibling}if(!l)throw Error(ke(189))}}if(r.alternate!==a)throw Error(ke(190))}if(r.tag!==3)throw Error(ke(188));return r.stateNode.current===r?s:t}function sj(s){return s=h4(s),s!==null?rj(s):null}function rj(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var t=rj(s);if(t!==null)return t;s=s.sibling}return null}var aj=Ys.unstable_scheduleCallback,If=Ys.unstable_cancelCallback,p4=Ys.unstable_shouldYield,f4=Ys.unstable_requestPaint,Qt=Ys.unstable_now,g4=Ys.unstable_getCurrentPriorityLevel,Ch=Ys.unstable_ImmediatePriority,nj=Ys.unstable_UserBlockingPriority,ed=Ys.unstable_NormalPriority,y4=Ys.unstable_LowPriority,ij=Ys.unstable_IdlePriority,Jd=null,Er=null;function b4(s){if(Er&&typeof Er.onCommitFiberRoot=="function")try{Er.onCommitFiberRoot(Jd,s,void 0,(s.current.flags&128)===128)}catch{}}var pr=Math.clz32?Math.clz32:N4,j4=Math.log,v4=Math.LN2;function N4(s){return s>>>=0,s===0?32:31-(j4(s)/v4|0)|0}var nc=64,ic=4194304;function ml(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function td(s,t){var r=s.pendingLanes;if(r===0)return 0;var a=0,i=s.suspendedLanes,o=s.pingedLanes,l=r&268435455;if(l!==0){var d=l&~i;d!==0?a=ml(d):(o&=l,o!==0&&(a=ml(o)))}else l=r&~i,l!==0?a=ml(l):o!==0&&(a=ml(o));if(a===0)return 0;if(t!==0&&t!==a&&!(t&i)&&(i=a&-a,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(a&4&&(a|=r&16),t=s.entangledLanes,t!==0)for(s=s.entanglements,t&=a;0<t;)r=31-pr(t),i=1<<r,a|=s[r],t&=~i;return a}function w4(s,t){switch(s){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function k4(s,t){for(var r=s.suspendedLanes,a=s.pingedLanes,i=s.expirationTimes,o=s.pendingLanes;0<o;){var l=31-pr(o),d=1<<l,x=i[l];x===-1?(!(d&r)||d&a)&&(i[l]=w4(d,t)):x<=t&&(s.expiredLanes|=d),o&=~d}}function cm(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function lj(){var s=nc;return nc<<=1,!(nc&4194240)&&(nc=64),s}function cx(s){for(var t=[],r=0;31>r;r++)t.push(s);return t}function yo(s,t,r){s.pendingLanes|=t,t!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,t=31-pr(t),s[t]=r}function C4(s,t){var r=s.pendingLanes&~t;s.pendingLanes=t,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=t,s.mutableReadLanes&=t,s.entangledLanes&=t,t=s.entanglements;var a=s.eventTimes;for(s=s.expirationTimes;0<r;){var i=31-pr(r),o=1<<i;t[i]=0,a[i]=-1,s[i]=-1,r&=~o}}function Ih(s,t){var r=s.entangledLanes|=t;for(s=s.entanglements;r;){var a=31-pr(r),i=1<<a;i&t|s[a]&t&&(s[a]|=t),r&=~i}}var Ct=0;function oj(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var cj,Eh,dj,uj,xj,dm=!1,lc=[],Sa=null,_a=null,Pa=null,Bl=new Map,$l=new Map,ya=[],I4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ef(s,t){switch(s){case"focusin":case"focusout":Sa=null;break;case"dragenter":case"dragleave":_a=null;break;case"mouseover":case"mouseout":Pa=null;break;case"pointerover":case"pointerout":Bl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(t.pointerId)}}function sl(s,t,r,a,i,o){return s===null||s.nativeEvent!==o?(s={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:o,targetContainers:[i]},t!==null&&(t=jo(t),t!==null&&Eh(t)),s):(s.eventSystemFlags|=a,t=s.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),s)}function E4(s,t,r,a,i){switch(t){case"focusin":return Sa=sl(Sa,s,t,r,a,i),!0;case"dragenter":return _a=sl(_a,s,t,r,a,i),!0;case"mouseover":return Pa=sl(Pa,s,t,r,a,i),!0;case"pointerover":var o=i.pointerId;return Bl.set(o,sl(Bl.get(o)||null,s,t,r,a,i)),!0;case"gotpointercapture":return o=i.pointerId,$l.set(o,sl($l.get(o)||null,s,t,r,a,i)),!0}return!1}function mj(s){var t=cn(s.target);if(t!==null){var r=Pn(t);if(r!==null){if(t=r.tag,t===13){if(t=tj(r),t!==null){s.blockedOn=t,xj(s.priority,function(){dj(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){s.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}s.blockedOn=null}function _c(s){if(s.blockedOn!==null)return!1;for(var t=s.targetContainers;0<t.length;){var r=um(s.domEventName,s.eventSystemFlags,t[0],s.nativeEvent);if(r===null){r=s.nativeEvent;var a=new r.constructor(r.type,r);nm=a,r.target.dispatchEvent(a),nm=null}else return t=jo(r),t!==null&&Eh(t),s.blockedOn=r,!1;t.shift()}return!0}function Sf(s,t,r){_c(s)&&r.delete(t)}function S4(){dm=!1,Sa!==null&&_c(Sa)&&(Sa=null),_a!==null&&_c(_a)&&(_a=null),Pa!==null&&_c(Pa)&&(Pa=null),Bl.forEach(Sf),$l.forEach(Sf)}function rl(s,t){s.blockedOn===t&&(s.blockedOn=null,dm||(dm=!0,Ys.unstable_scheduleCallback(Ys.unstable_NormalPriority,S4)))}function ql(s){function t(i){return rl(i,s)}if(0<lc.length){rl(lc[0],s);for(var r=1;r<lc.length;r++){var a=lc[r];a.blockedOn===s&&(a.blockedOn=null)}}for(Sa!==null&&rl(Sa,s),_a!==null&&rl(_a,s),Pa!==null&&rl(Pa,s),Bl.forEach(t),$l.forEach(t),r=0;r<ya.length;r++)a=ya[r],a.blockedOn===s&&(a.blockedOn=null);for(;0<ya.length&&(r=ya[0],r.blockedOn===null);)mj(r),r.blockedOn===null&&ya.shift()}var ci=ia.ReactCurrentBatchConfig,sd=!0;function _4(s,t,r,a){var i=Ct,o=ci.transition;ci.transition=null;try{Ct=1,Sh(s,t,r,a)}finally{Ct=i,ci.transition=o}}function P4(s,t,r,a){var i=Ct,o=ci.transition;ci.transition=null;try{Ct=4,Sh(s,t,r,a)}finally{Ct=i,ci.transition=o}}function Sh(s,t,r,a){if(sd){var i=um(s,t,r,a);if(i===null)bx(s,t,a,rd,r),Ef(s,a);else if(E4(i,s,t,r,a))a.stopPropagation();else if(Ef(s,a),t&4&&-1<I4.indexOf(s)){for(;i!==null;){var o=jo(i);if(o!==null&&cj(o),o=um(s,t,r,a),o===null&&bx(s,t,a,rd,r),o===i)break;i=o}i!==null&&a.stopPropagation()}else bx(s,t,a,null,r)}}var rd=null;function um(s,t,r,a){if(rd=null,s=kh(a),s=cn(s),s!==null)if(t=Pn(s),t===null)s=null;else if(r=t.tag,r===13){if(s=tj(t),s!==null)return s;s=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;s=null}else t!==s&&(s=null);return rd=s,null}function hj(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(g4()){case Ch:return 1;case nj:return 4;case ed:case y4:return 16;case ij:return 536870912;default:return 16}default:return 16}}var ka=null,_h=null,Pc=null;function pj(){if(Pc)return Pc;var s,t=_h,r=t.length,a,i="value"in ka?ka.value:ka.textContent,o=i.length;for(s=0;s<r&&t[s]===i[s];s++);var l=r-s;for(a=1;a<=l&&t[r-a]===i[o-a];a++);return Pc=i.slice(s,1<a?1-a:void 0)}function Tc(s){var t=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&t===13&&(s=13)):s=t,s===10&&(s=13),32<=s||s===13?s:0}function oc(){return!0}function _f(){return!1}function Js(s){function t(r,a,i,o,l){this._reactName=r,this._targetInst=i,this.type=a,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var d in s)s.hasOwnProperty(d)&&(r=s[d],this[d]=r?r(o):o[d]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?oc:_f,this.isPropagationStopped=_f,this}return Bt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=oc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=oc)},persist:function(){},isPersistent:oc}),t}var Di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ph=Js(Di),bo=Bt({},Di,{view:0,detail:0}),T4=Js(bo),dx,ux,al,Zd=Bt({},bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Th,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==al&&(al&&s.type==="mousemove"?(dx=s.screenX-al.screenX,ux=s.screenY-al.screenY):ux=dx=0,al=s),dx)},movementY:function(s){return"movementY"in s?s.movementY:ux}}),Pf=Js(Zd),D4=Bt({},Zd,{dataTransfer:0}),A4=Js(D4),R4=Bt({},bo,{relatedTarget:0}),xx=Js(R4),M4=Bt({},Di,{animationName:0,elapsedTime:0,pseudoElement:0}),O4=Js(M4),z4=Bt({},Di,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),L4=Js(z4),V4=Bt({},Di,{data:0}),Tf=Js(V4),F4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $4(s){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(s):(s=B4[s])?!!t[s]:!1}function Th(){return $4}var q4=Bt({},bo,{key:function(s){if(s.key){var t=F4[s.key]||s.key;if(t!=="Unidentified")return t}return s.type==="keypress"?(s=Tc(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?U4[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Th,charCode:function(s){return s.type==="keypress"?Tc(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Tc(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),W4=Js(q4),G4=Bt({},Zd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Df=Js(G4),H4=Bt({},bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Th}),Q4=Js(H4),K4=Bt({},Di,{propertyName:0,elapsedTime:0,pseudoElement:0}),Y4=Js(K4),X4=Bt({},Zd,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),J4=Js(X4),Z4=[9,13,27,32],Dh=Xr&&"CompositionEvent"in window,wl=null;Xr&&"documentMode"in document&&(wl=document.documentMode);var ek=Xr&&"TextEvent"in window&&!wl,fj=Xr&&(!Dh||wl&&8<wl&&11>=wl),Af=String.fromCharCode(32),Rf=!1;function gj(s,t){switch(s){case"keyup":return Z4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yj(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Qn=!1;function tk(s,t){switch(s){case"compositionend":return yj(t);case"keypress":return t.which!==32?null:(Rf=!0,Af);case"textInput":return s=t.data,s===Af&&Rf?null:s;default:return null}}function sk(s,t){if(Qn)return s==="compositionend"||!Dh&&gj(s,t)?(s=pj(),Pc=_h=ka=null,Qn=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fj&&t.locale!=="ko"?null:t.data;default:return null}}var rk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mf(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t==="input"?!!rk[s.type]:t==="textarea"}function bj(s,t,r,a){Yb(a),t=ad(t,"onChange"),0<t.length&&(r=new Ph("onChange","change",null,r,a),s.push({event:r,listeners:t}))}var kl=null,Wl=null;function ak(s){Pj(s,0)}function eu(s){var t=Xn(s);if($b(t))return s}function nk(s,t){if(s==="change")return t}var jj=!1;if(Xr){var mx;if(Xr){var hx="oninput"in document;if(!hx){var Of=document.createElement("div");Of.setAttribute("oninput","return;"),hx=typeof Of.oninput=="function"}mx=hx}else mx=!1;jj=mx&&(!document.documentMode||9<document.documentMode)}function zf(){kl&&(kl.detachEvent("onpropertychange",vj),Wl=kl=null)}function vj(s){if(s.propertyName==="value"&&eu(Wl)){var t=[];bj(t,Wl,s,kh(s)),ej(ak,t)}}function ik(s,t,r){s==="focusin"?(zf(),kl=t,Wl=r,kl.attachEvent("onpropertychange",vj)):s==="focusout"&&zf()}function lk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return eu(Wl)}function ok(s,t){if(s==="click")return eu(t)}function ck(s,t){if(s==="input"||s==="change")return eu(t)}function dk(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var gr=typeof Object.is=="function"?Object.is:dk;function Gl(s,t){if(gr(s,t))return!0;if(typeof s!="object"||s===null||typeof t!="object"||t===null)return!1;var r=Object.keys(s),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var i=r[a];if(!Hx.call(t,i)||!gr(s[i],t[i]))return!1}return!0}function Lf(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Vf(s,t){var r=Lf(s);s=0;for(var a;r;){if(r.nodeType===3){if(a=s+r.textContent.length,s<=t&&a>=t)return{node:r,offset:t-s};s=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Lf(r)}}function Nj(s,t){return s&&t?s===t?!0:s&&s.nodeType===3?!1:t&&t.nodeType===3?Nj(s,t.parentNode):"contains"in s?s.contains(t):s.compareDocumentPosition?!!(s.compareDocumentPosition(t)&16):!1:!1}function wj(){for(var s=window,t=Xc();t instanceof s.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)s=t.contentWindow;else break;t=Xc(s.document)}return t}function Ah(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t&&(t==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||t==="textarea"||s.contentEditable==="true")}function uk(s){var t=wj(),r=s.focusedElem,a=s.selectionRange;if(t!==r&&r&&r.ownerDocument&&Nj(r.ownerDocument.documentElement,r)){if(a!==null&&Ah(r)){if(t=a.start,s=a.end,s===void 0&&(s=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(s,r.value.length);else if(s=(t=r.ownerDocument||document)&&t.defaultView||window,s.getSelection){s=s.getSelection();var i=r.textContent.length,o=Math.min(a.start,i);a=a.end===void 0?o:Math.min(a.end,i),!s.extend&&o>a&&(i=a,a=o,o=i),i=Vf(r,o);var l=Vf(r,a);i&&l&&(s.rangeCount!==1||s.anchorNode!==i.node||s.anchorOffset!==i.offset||s.focusNode!==l.node||s.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),s.removeAllRanges(),o>a?(s.addRange(t),s.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),s.addRange(t)))}}for(t=[],s=r;s=s.parentNode;)s.nodeType===1&&t.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)s=t[r],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var xk=Xr&&"documentMode"in document&&11>=document.documentMode,Kn=null,xm=null,Cl=null,mm=!1;function Ff(s,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;mm||Kn==null||Kn!==Xc(a)||(a=Kn,"selectionStart"in a&&Ah(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Cl&&Gl(Cl,a)||(Cl=a,a=ad(xm,"onSelect"),0<a.length&&(t=new Ph("onSelect","select",null,t,r),s.push({event:t,listeners:a}),t.target=Kn)))}function cc(s,t){var r={};return r[s.toLowerCase()]=t.toLowerCase(),r["Webkit"+s]="webkit"+t,r["Moz"+s]="moz"+t,r}var Yn={animationend:cc("Animation","AnimationEnd"),animationiteration:cc("Animation","AnimationIteration"),animationstart:cc("Animation","AnimationStart"),transitionend:cc("Transition","TransitionEnd")},px={},kj={};Xr&&(kj=document.createElement("div").style,"AnimationEvent"in window||(delete Yn.animationend.animation,delete Yn.animationiteration.animation,delete Yn.animationstart.animation),"TransitionEvent"in window||delete Yn.transitionend.transition);function tu(s){if(px[s])return px[s];if(!Yn[s])return s;var t=Yn[s],r;for(r in t)if(t.hasOwnProperty(r)&&r in kj)return px[s]=t[r];return s}var Cj=tu("animationend"),Ij=tu("animationiteration"),Ej=tu("animationstart"),Sj=tu("transitionend"),_j=new Map,Uf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ka(s,t){_j.set(s,t),_n(t,[s])}for(var fx=0;fx<Uf.length;fx++){var gx=Uf[fx],mk=gx.toLowerCase(),hk=gx[0].toUpperCase()+gx.slice(1);Ka(mk,"on"+hk)}Ka(Cj,"onAnimationEnd");Ka(Ij,"onAnimationIteration");Ka(Ej,"onAnimationStart");Ka("dblclick","onDoubleClick");Ka("focusin","onFocus");Ka("focusout","onBlur");Ka(Sj,"onTransitionEnd");fi("onMouseEnter",["mouseout","mouseover"]);fi("onMouseLeave",["mouseout","mouseover"]);fi("onPointerEnter",["pointerout","pointerover"]);fi("onPointerLeave",["pointerout","pointerover"]);_n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_n("onBeforeInput",["compositionend","keypress","textInput","paste"]);_n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pk=new Set("cancel close invalid load scroll toggle".split(" ").concat(hl));function Bf(s,t,r){var a=s.type||"unknown-event";s.currentTarget=r,m4(a,t,void 0,s),s.currentTarget=null}function Pj(s,t){t=(t&4)!==0;for(var r=0;r<s.length;r++){var a=s[r],i=a.event;a=a.listeners;e:{var o=void 0;if(t)for(var l=a.length-1;0<=l;l--){var d=a[l],x=d.instance,p=d.currentTarget;if(d=d.listener,x!==o&&i.isPropagationStopped())break e;Bf(i,d,p),o=x}else for(l=0;l<a.length;l++){if(d=a[l],x=d.instance,p=d.currentTarget,d=d.listener,x!==o&&i.isPropagationStopped())break e;Bf(i,d,p),o=x}}}if(Zc)throw s=om,Zc=!1,om=null,s}function At(s,t){var r=t[ym];r===void 0&&(r=t[ym]=new Set);var a=s+"__bubble";r.has(a)||(Tj(t,s,2,!1),r.add(a))}function yx(s,t,r){var a=0;t&&(a|=4),Tj(r,s,a,t)}var dc="_reactListening"+Math.random().toString(36).slice(2);function Hl(s){if(!s[dc]){s[dc]=!0,Lb.forEach(function(r){r!=="selectionchange"&&(pk.has(r)||yx(r,!1,s),yx(r,!0,s))});var t=s.nodeType===9?s:s.ownerDocument;t===null||t[dc]||(t[dc]=!0,yx("selectionchange",!1,t))}}function Tj(s,t,r,a){switch(hj(t)){case 1:var i=_4;break;case 4:i=P4;break;default:i=Sh}r=i.bind(null,t,r,s),i=void 0,!lm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?s.addEventListener(t,r,{capture:!0,passive:i}):s.addEventListener(t,r,!0):i!==void 0?s.addEventListener(t,r,{passive:i}):s.addEventListener(t,r,!1)}function bx(s,t,r,a,i){var o=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var l=a.tag;if(l===3||l===4){var d=a.stateNode.containerInfo;if(d===i||d.nodeType===8&&d.parentNode===i)break;if(l===4)for(l=a.return;l!==null;){var x=l.tag;if((x===3||x===4)&&(x=l.stateNode.containerInfo,x===i||x.nodeType===8&&x.parentNode===i))return;l=l.return}for(;d!==null;){if(l=cn(d),l===null)return;if(x=l.tag,x===5||x===6){a=o=l;continue e}d=d.parentNode}}a=a.return}ej(function(){var p=o,N=kh(r),I=[];e:{var T=_j.get(s);if(T!==void 0){var A=Ph,f=s;switch(s){case"keypress":if(Tc(r)===0)break e;case"keydown":case"keyup":A=W4;break;case"focusin":f="focus",A=xx;break;case"focusout":f="blur",A=xx;break;case"beforeblur":case"afterblur":A=xx;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=Pf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=A4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=Q4;break;case Cj:case Ij:case Ej:A=O4;break;case Sj:A=Y4;break;case"scroll":A=T4;break;case"wheel":A=J4;break;case"copy":case"cut":case"paste":A=L4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=Df}var L=(t&4)!==0,k=!L&&s==="scroll",_=L?T!==null?T+"Capture":null:T;L=[];for(var z=p,M;z!==null;){M=z;var Y=M.stateNode;if(M.tag===5&&Y!==null&&(M=Y,_!==null&&(Y=Ul(z,_),Y!=null&&L.push(Ql(z,Y,M)))),k)break;z=z.return}0<L.length&&(T=new A(T,f,null,r,N),I.push({event:T,listeners:L}))}}if(!(t&7)){e:{if(T=s==="mouseover"||s==="pointerover",A=s==="mouseout"||s==="pointerout",T&&r!==nm&&(f=r.relatedTarget||r.fromElement)&&(cn(f)||f[Jr]))break e;if((A||T)&&(T=N.window===N?N:(T=N.ownerDocument)?T.defaultView||T.parentWindow:window,A?(f=r.relatedTarget||r.toElement,A=p,f=f?cn(f):null,f!==null&&(k=Pn(f),f!==k||f.tag!==5&&f.tag!==6)&&(f=null)):(A=null,f=p),A!==f)){if(L=Pf,Y="onMouseLeave",_="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(L=Df,Y="onPointerLeave",_="onPointerEnter",z="pointer"),k=A==null?T:Xn(A),M=f==null?T:Xn(f),T=new L(Y,z+"leave",A,r,N),T.target=k,T.relatedTarget=M,Y=null,cn(N)===p&&(L=new L(_,z+"enter",f,r,N),L.target=M,L.relatedTarget=k,Y=L),k=Y,A&&f)t:{for(L=A,_=f,z=0,M=L;M;M=Un(M))z++;for(M=0,Y=_;Y;Y=Un(Y))M++;for(;0<z-M;)L=Un(L),z--;for(;0<M-z;)_=Un(_),M--;for(;z--;){if(L===_||_!==null&&L===_.alternate)break t;L=Un(L),_=Un(_)}L=null}else L=null;A!==null&&$f(I,T,A,L,!1),f!==null&&k!==null&&$f(I,k,f,L,!0)}}e:{if(T=p?Xn(p):window,A=T.nodeName&&T.nodeName.toLowerCase(),A==="select"||A==="input"&&T.type==="file")var G=nk;else if(Mf(T))if(jj)G=ck;else{G=lk;var W=ik}else(A=T.nodeName)&&A.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(G=ok);if(G&&(G=G(s,p))){bj(I,G,r,N);break e}W&&W(s,T,p),s==="focusout"&&(W=T._wrapperState)&&W.controlled&&T.type==="number"&&em(T,"number",T.value)}switch(W=p?Xn(p):window,s){case"focusin":(Mf(W)||W.contentEditable==="true")&&(Kn=W,xm=p,Cl=null);break;case"focusout":Cl=xm=Kn=null;break;case"mousedown":mm=!0;break;case"contextmenu":case"mouseup":case"dragend":mm=!1,Ff(I,r,N);break;case"selectionchange":if(xk)break;case"keydown":case"keyup":Ff(I,r,N)}var R;if(Dh)e:{switch(s){case"compositionstart":var c="onCompositionStart";break e;case"compositionend":c="onCompositionEnd";break e;case"compositionupdate":c="onCompositionUpdate";break e}c=void 0}else Qn?gj(s,r)&&(c="onCompositionEnd"):s==="keydown"&&r.keyCode===229&&(c="onCompositionStart");c&&(fj&&r.locale!=="ko"&&(Qn||c!=="onCompositionStart"?c==="onCompositionEnd"&&Qn&&(R=pj()):(ka=N,_h="value"in ka?ka.value:ka.textContent,Qn=!0)),W=ad(p,c),0<W.length&&(c=new Tf(c,s,null,r,N),I.push({event:c,listeners:W}),R?c.data=R:(R=yj(r),R!==null&&(c.data=R)))),(R=ek?tk(s,r):sk(s,r))&&(p=ad(p,"onBeforeInput"),0<p.length&&(N=new Tf("onBeforeInput","beforeinput",null,r,N),I.push({event:N,listeners:p}),N.data=R))}Pj(I,t)})}function Ql(s,t,r){return{instance:s,listener:t,currentTarget:r}}function ad(s,t){for(var r=t+"Capture",a=[];s!==null;){var i=s,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ul(s,r),o!=null&&a.unshift(Ql(s,o,i)),o=Ul(s,t),o!=null&&a.push(Ql(s,o,i))),s=s.return}return a}function Un(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function $f(s,t,r,a,i){for(var o=t._reactName,l=[];r!==null&&r!==a;){var d=r,x=d.alternate,p=d.stateNode;if(x!==null&&x===a)break;d.tag===5&&p!==null&&(d=p,i?(x=Ul(r,o),x!=null&&l.unshift(Ql(r,x,d))):i||(x=Ul(r,o),x!=null&&l.push(Ql(r,x,d)))),r=r.return}l.length!==0&&s.push({event:t,listeners:l})}var fk=/\r\n?/g,gk=/\u0000|\uFFFD/g;function qf(s){return(typeof s=="string"?s:""+s).replace(fk,`
`).replace(gk,"")}function uc(s,t,r){if(t=qf(t),qf(s)!==t&&r)throw Error(ke(425))}function nd(){}var hm=null,pm=null;function fm(s,t){return s==="textarea"||s==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gm=typeof setTimeout=="function"?setTimeout:void 0,yk=typeof clearTimeout=="function"?clearTimeout:void 0,Wf=typeof Promise=="function"?Promise:void 0,bk=typeof queueMicrotask=="function"?queueMicrotask:typeof Wf<"u"?function(s){return Wf.resolve(null).then(s).catch(jk)}:gm;function jk(s){setTimeout(function(){throw s})}function jx(s,t){var r=t,a=0;do{var i=r.nextSibling;if(s.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(a===0){s.removeChild(i),ql(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=i}while(r);ql(t)}function Ta(s){for(;s!=null;s=s.nextSibling){var t=s.nodeType;if(t===1||t===3)break;if(t===8){if(t=s.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return s}function Gf(s){s=s.previousSibling;for(var t=0;s;){if(s.nodeType===8){var r=s.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return s;t--}else r==="/$"&&t++}s=s.previousSibling}return null}var Ai=Math.random().toString(36).slice(2),Cr="__reactFiber$"+Ai,Kl="__reactProps$"+Ai,Jr="__reactContainer$"+Ai,ym="__reactEvents$"+Ai,vk="__reactListeners$"+Ai,Nk="__reactHandles$"+Ai;function cn(s){var t=s[Cr];if(t)return t;for(var r=s.parentNode;r;){if(t=r[Jr]||r[Cr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(s=Gf(s);s!==null;){if(r=s[Cr])return r;s=Gf(s)}return t}s=r,r=s.parentNode}return null}function jo(s){return s=s[Cr]||s[Jr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Xn(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(ke(33))}function su(s){return s[Kl]||null}var bm=[],Jn=-1;function Ya(s){return{current:s}}function Rt(s){0>Jn||(s.current=bm[Jn],bm[Jn]=null,Jn--)}function Pt(s,t){Jn++,bm[Jn]=s.current,s.current=t}var Ua={},ks=Ya(Ua),zs=Ya(!1),gn=Ua;function gi(s,t){var r=s.type.contextTypes;if(!r)return Ua;var a=s.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=t,s.__reactInternalMemoizedMaskedChildContext=i),i}function Ls(s){return s=s.childContextTypes,s!=null}function id(){Rt(zs),Rt(ks)}function Hf(s,t,r){if(ks.current!==Ua)throw Error(ke(168));Pt(ks,t),Pt(zs,r)}function Dj(s,t,r){var a=s.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var i in a)if(!(i in t))throw Error(ke(108,i4(s)||"Unknown",i));return Bt({},r,a)}function ld(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Ua,gn=ks.current,Pt(ks,s),Pt(zs,zs.current),!0}function Qf(s,t,r){var a=s.stateNode;if(!a)throw Error(ke(169));r?(s=Dj(s,t,gn),a.__reactInternalMemoizedMergedChildContext=s,Rt(zs),Rt(ks),Pt(ks,s)):Rt(zs),Pt(zs,r)}var $r=null,ru=!1,vx=!1;function Aj(s){$r===null?$r=[s]:$r.push(s)}function wk(s){ru=!0,Aj(s)}function Xa(){if(!vx&&$r!==null){vx=!0;var s=0,t=Ct;try{var r=$r;for(Ct=1;s<r.length;s++){var a=r[s];do a=a(!0);while(a!==null)}$r=null,ru=!1}catch(i){throw $r!==null&&($r=$r.slice(s+1)),aj(Ch,Xa),i}finally{Ct=t,vx=!1}}return null}var Zn=[],ei=0,od=null,cd=0,er=[],tr=0,yn=null,qr=1,Wr="";function nn(s,t){Zn[ei++]=cd,Zn[ei++]=od,od=s,cd=t}function Rj(s,t,r){er[tr++]=qr,er[tr++]=Wr,er[tr++]=yn,yn=s;var a=qr;s=Wr;var i=32-pr(a)-1;a&=~(1<<i),r+=1;var o=32-pr(t)+i;if(30<o){var l=i-i%5;o=(a&(1<<l)-1).toString(32),a>>=l,i-=l,qr=1<<32-pr(t)+i|r<<i|a,Wr=o+s}else qr=1<<o|r<<i|a,Wr=s}function Rh(s){s.return!==null&&(nn(s,1),Rj(s,1,0))}function Mh(s){for(;s===od;)od=Zn[--ei],Zn[ei]=null,cd=Zn[--ei],Zn[ei]=null;for(;s===yn;)yn=er[--tr],er[tr]=null,Wr=er[--tr],er[tr]=null,qr=er[--tr],er[tr]=null}var Hs=null,Ws=null,Ot=!1,xr=null;function Mj(s,t){var r=sr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=s,t=s.deletions,t===null?(s.deletions=[r],s.flags|=16):t.push(r)}function Kf(s,t){switch(s.tag){case 5:var r=s.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(s.stateNode=t,Hs=s,Ws=Ta(t.firstChild),!0):!1;case 6:return t=s.pendingProps===""||t.nodeType!==3?null:t,t!==null?(s.stateNode=t,Hs=s,Ws=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=yn!==null?{id:qr,overflow:Wr}:null,s.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=sr(18,null,null,0),r.stateNode=t,r.return=s,s.child=r,Hs=s,Ws=null,!0):!1;default:return!1}}function jm(s){return(s.mode&1)!==0&&(s.flags&128)===0}function vm(s){if(Ot){var t=Ws;if(t){var r=t;if(!Kf(s,t)){if(jm(s))throw Error(ke(418));t=Ta(r.nextSibling);var a=Hs;t&&Kf(s,t)?Mj(a,r):(s.flags=s.flags&-4097|2,Ot=!1,Hs=s)}}else{if(jm(s))throw Error(ke(418));s.flags=s.flags&-4097|2,Ot=!1,Hs=s}}}function Yf(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Hs=s}function xc(s){if(s!==Hs)return!1;if(!Ot)return Yf(s),Ot=!0,!1;var t;if((t=s.tag!==3)&&!(t=s.tag!==5)&&(t=s.type,t=t!=="head"&&t!=="body"&&!fm(s.type,s.memoizedProps)),t&&(t=Ws)){if(jm(s))throw Oj(),Error(ke(418));for(;t;)Mj(s,t),t=Ta(t.nextSibling)}if(Yf(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ke(317));e:{for(s=s.nextSibling,t=0;s;){if(s.nodeType===8){var r=s.data;if(r==="/$"){if(t===0){Ws=Ta(s.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}s=s.nextSibling}Ws=null}}else Ws=Hs?Ta(s.stateNode.nextSibling):null;return!0}function Oj(){for(var s=Ws;s;)s=Ta(s.nextSibling)}function yi(){Ws=Hs=null,Ot=!1}function Oh(s){xr===null?xr=[s]:xr.push(s)}var kk=ia.ReactCurrentBatchConfig;function nl(s,t,r){if(s=r.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ke(309));var a=r.stateNode}if(!a)throw Error(ke(147,s));var i=a,o=""+s;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var d=i.refs;l===null?delete d[o]:d[o]=l},t._stringRef=o,t)}if(typeof s!="string")throw Error(ke(284));if(!r._owner)throw Error(ke(290,s))}return s}function mc(s,t){throw s=Object.prototype.toString.call(t),Error(ke(31,s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s))}function Xf(s){var t=s._init;return t(s._payload)}function zj(s){function t(_,z){if(s){var M=_.deletions;M===null?(_.deletions=[z],_.flags|=16):M.push(z)}}function r(_,z){if(!s)return null;for(;z!==null;)t(_,z),z=z.sibling;return null}function a(_,z){for(_=new Map;z!==null;)z.key!==null?_.set(z.key,z):_.set(z.index,z),z=z.sibling;return _}function i(_,z){return _=Ma(_,z),_.index=0,_.sibling=null,_}function o(_,z,M){return _.index=M,s?(M=_.alternate,M!==null?(M=M.index,M<z?(_.flags|=2,z):M):(_.flags|=2,z)):(_.flags|=1048576,z)}function l(_){return s&&_.alternate===null&&(_.flags|=2),_}function d(_,z,M,Y){return z===null||z.tag!==6?(z=Sx(M,_.mode,Y),z.return=_,z):(z=i(z,M),z.return=_,z)}function x(_,z,M,Y){var G=M.type;return G===Hn?N(_,z,M.props.children,Y,M.key):z!==null&&(z.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===fa&&Xf(G)===z.type)?(Y=i(z,M.props),Y.ref=nl(_,z,M),Y.return=_,Y):(Y=Lc(M.type,M.key,M.props,null,_.mode,Y),Y.ref=nl(_,z,M),Y.return=_,Y)}function p(_,z,M,Y){return z===null||z.tag!==4||z.stateNode.containerInfo!==M.containerInfo||z.stateNode.implementation!==M.implementation?(z=_x(M,_.mode,Y),z.return=_,z):(z=i(z,M.children||[]),z.return=_,z)}function N(_,z,M,Y,G){return z===null||z.tag!==7?(z=pn(M,_.mode,Y,G),z.return=_,z):(z=i(z,M),z.return=_,z)}function I(_,z,M){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Sx(""+z,_.mode,M),z.return=_,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case sc:return M=Lc(z.type,z.key,z.props,null,_.mode,M),M.ref=nl(_,null,z),M.return=_,M;case Gn:return z=_x(z,_.mode,M),z.return=_,z;case fa:var Y=z._init;return I(_,Y(z._payload),M)}if(xl(z)||el(z))return z=pn(z,_.mode,M,null),z.return=_,z;mc(_,z)}return null}function T(_,z,M,Y){var G=z!==null?z.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return G!==null?null:d(_,z,""+M,Y);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case sc:return M.key===G?x(_,z,M,Y):null;case Gn:return M.key===G?p(_,z,M,Y):null;case fa:return G=M._init,T(_,z,G(M._payload),Y)}if(xl(M)||el(M))return G!==null?null:N(_,z,M,Y,null);mc(_,M)}return null}function A(_,z,M,Y,G){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return _=_.get(M)||null,d(z,_,""+Y,G);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case sc:return _=_.get(Y.key===null?M:Y.key)||null,x(z,_,Y,G);case Gn:return _=_.get(Y.key===null?M:Y.key)||null,p(z,_,Y,G);case fa:var W=Y._init;return A(_,z,M,W(Y._payload),G)}if(xl(Y)||el(Y))return _=_.get(M)||null,N(z,_,Y,G,null);mc(z,Y)}return null}function f(_,z,M,Y){for(var G=null,W=null,R=z,c=z=0,F=null;R!==null&&c<M.length;c++){R.index>c?(F=R,R=null):F=R.sibling;var V=T(_,R,M[c],Y);if(V===null){R===null&&(R=F);break}s&&R&&V.alternate===null&&t(_,R),z=o(V,z,c),W===null?G=V:W.sibling=V,W=V,R=F}if(c===M.length)return r(_,R),Ot&&nn(_,c),G;if(R===null){for(;c<M.length;c++)R=I(_,M[c],Y),R!==null&&(z=o(R,z,c),W===null?G=R:W.sibling=R,W=R);return Ot&&nn(_,c),G}for(R=a(_,R);c<M.length;c++)F=A(R,_,c,M[c],Y),F!==null&&(s&&F.alternate!==null&&R.delete(F.key===null?c:F.key),z=o(F,z,c),W===null?G=F:W.sibling=F,W=F);return s&&R.forEach(function(Q){return t(_,Q)}),Ot&&nn(_,c),G}function L(_,z,M,Y){var G=el(M);if(typeof G!="function")throw Error(ke(150));if(M=G.call(M),M==null)throw Error(ke(151));for(var W=G=null,R=z,c=z=0,F=null,V=M.next();R!==null&&!V.done;c++,V=M.next()){R.index>c?(F=R,R=null):F=R.sibling;var Q=T(_,R,V.value,Y);if(Q===null){R===null&&(R=F);break}s&&R&&Q.alternate===null&&t(_,R),z=o(Q,z,c),W===null?G=Q:W.sibling=Q,W=Q,R=F}if(V.done)return r(_,R),Ot&&nn(_,c),G;if(R===null){for(;!V.done;c++,V=M.next())V=I(_,V.value,Y),V!==null&&(z=o(V,z,c),W===null?G=V:W.sibling=V,W=V);return Ot&&nn(_,c),G}for(R=a(_,R);!V.done;c++,V=M.next())V=A(R,_,c,V.value,Y),V!==null&&(s&&V.alternate!==null&&R.delete(V.key===null?c:V.key),z=o(V,z,c),W===null?G=V:W.sibling=V,W=V);return s&&R.forEach(function(E){return t(_,E)}),Ot&&nn(_,c),G}function k(_,z,M,Y){if(typeof M=="object"&&M!==null&&M.type===Hn&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case sc:e:{for(var G=M.key,W=z;W!==null;){if(W.key===G){if(G=M.type,G===Hn){if(W.tag===7){r(_,W.sibling),z=i(W,M.props.children),z.return=_,_=z;break e}}else if(W.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===fa&&Xf(G)===W.type){r(_,W.sibling),z=i(W,M.props),z.ref=nl(_,W,M),z.return=_,_=z;break e}r(_,W);break}else t(_,W);W=W.sibling}M.type===Hn?(z=pn(M.props.children,_.mode,Y,M.key),z.return=_,_=z):(Y=Lc(M.type,M.key,M.props,null,_.mode,Y),Y.ref=nl(_,z,M),Y.return=_,_=Y)}return l(_);case Gn:e:{for(W=M.key;z!==null;){if(z.key===W)if(z.tag===4&&z.stateNode.containerInfo===M.containerInfo&&z.stateNode.implementation===M.implementation){r(_,z.sibling),z=i(z,M.children||[]),z.return=_,_=z;break e}else{r(_,z);break}else t(_,z);z=z.sibling}z=_x(M,_.mode,Y),z.return=_,_=z}return l(_);case fa:return W=M._init,k(_,z,W(M._payload),Y)}if(xl(M))return f(_,z,M,Y);if(el(M))return L(_,z,M,Y);mc(_,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,z!==null&&z.tag===6?(r(_,z.sibling),z=i(z,M),z.return=_,_=z):(r(_,z),z=Sx(M,_.mode,Y),z.return=_,_=z),l(_)):r(_,z)}return k}var bi=zj(!0),Lj=zj(!1),dd=Ya(null),ud=null,ti=null,zh=null;function Lh(){zh=ti=ud=null}function Vh(s){var t=dd.current;Rt(dd),s._currentValue=t}function Nm(s,t,r){for(;s!==null;){var a=s.alternate;if((s.childLanes&t)!==t?(s.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),s===r)break;s=s.return}}function di(s,t){ud=s,zh=ti=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&t&&(Os=!0),s.firstContext=null)}function ar(s){var t=s._currentValue;if(zh!==s)if(s={context:s,memoizedValue:t,next:null},ti===null){if(ud===null)throw Error(ke(308));ti=s,ud.dependencies={lanes:0,firstContext:s}}else ti=ti.next=s;return t}var dn=null;function Fh(s){dn===null?dn=[s]:dn.push(s)}function Vj(s,t,r,a){var i=t.interleaved;return i===null?(r.next=r,Fh(t)):(r.next=i.next,i.next=r),t.interleaved=r,Zr(s,a)}function Zr(s,t){s.lanes|=t;var r=s.alternate;for(r!==null&&(r.lanes|=t),r=s,s=s.return;s!==null;)s.childLanes|=t,r=s.alternate,r!==null&&(r.childLanes|=t),r=s,s=s.return;return r.tag===3?r.stateNode:null}var ga=!1;function Uh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fj(s,t){s=s.updateQueue,t.updateQueue===s&&(t.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Qr(s,t){return{eventTime:s,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(s,t,r){var a=s.updateQueue;if(a===null)return null;if(a=a.shared,bt&2){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,Zr(s,r)}return i=a.interleaved,i===null?(t.next=t,Fh(a)):(t.next=i.next,i.next=t),a.interleaved=t,Zr(s,r)}function Dc(s,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=s.pendingLanes,r|=a,t.lanes=r,Ih(s,r)}}function Jf(s,t){var r=s.updateQueue,a=s.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=l:o=o.next=l,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:a.shared,effects:a.effects},s.updateQueue=r;return}s=r.lastBaseUpdate,s===null?r.firstBaseUpdate=t:s.next=t,r.lastBaseUpdate=t}function xd(s,t,r,a){var i=s.updateQueue;ga=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,d=i.shared.pending;if(d!==null){i.shared.pending=null;var x=d,p=x.next;x.next=null,l===null?o=p:l.next=p,l=x;var N=s.alternate;N!==null&&(N=N.updateQueue,d=N.lastBaseUpdate,d!==l&&(d===null?N.firstBaseUpdate=p:d.next=p,N.lastBaseUpdate=x))}if(o!==null){var I=i.baseState;l=0,N=p=x=null,d=o;do{var T=d.lane,A=d.eventTime;if((a&T)===T){N!==null&&(N=N.next={eventTime:A,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var f=s,L=d;switch(T=t,A=r,L.tag){case 1:if(f=L.payload,typeof f=="function"){I=f.call(A,I,T);break e}I=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=L.payload,T=typeof f=="function"?f.call(A,I,T):f,T==null)break e;I=Bt({},I,T);break e;case 2:ga=!0}}d.callback!==null&&d.lane!==0&&(s.flags|=64,T=i.effects,T===null?i.effects=[d]:T.push(d))}else A={eventTime:A,lane:T,tag:d.tag,payload:d.payload,callback:d.callback,next:null},N===null?(p=N=A,x=I):N=N.next=A,l|=T;if(d=d.next,d===null){if(d=i.shared.pending,d===null)break;T=d,d=T.next,T.next=null,i.lastBaseUpdate=T,i.shared.pending=null}}while(1);if(N===null&&(x=I),i.baseState=x,i.firstBaseUpdate=p,i.lastBaseUpdate=N,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);jn|=l,s.lanes=l,s.memoizedState=I}}function Zf(s,t,r){if(s=t.effects,t.effects=null,s!==null)for(t=0;t<s.length;t++){var a=s[t],i=a.callback;if(i!==null){if(a.callback=null,a=r,typeof i!="function")throw Error(ke(191,i));i.call(a)}}}var vo={},Sr=Ya(vo),Yl=Ya(vo),Xl=Ya(vo);function un(s){if(s===vo)throw Error(ke(174));return s}function Bh(s,t){switch(Pt(Xl,t),Pt(Yl,s),Pt(Sr,vo),s=t.nodeType,s){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:sm(null,"");break;default:s=s===8?t.parentNode:t,t=s.namespaceURI||null,s=s.tagName,t=sm(t,s)}Rt(Sr),Pt(Sr,t)}function ji(){Rt(Sr),Rt(Yl),Rt(Xl)}function Uj(s){un(Xl.current);var t=un(Sr.current),r=sm(t,s.type);t!==r&&(Pt(Yl,s),Pt(Sr,r))}function $h(s){Yl.current===s&&(Rt(Sr),Rt(Yl))}var Vt=Ya(0);function md(s){for(var t=s;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Nx=[];function qh(){for(var s=0;s<Nx.length;s++)Nx[s]._workInProgressVersionPrimary=null;Nx.length=0}var Ac=ia.ReactCurrentDispatcher,wx=ia.ReactCurrentBatchConfig,bn=0,Ft=null,Zt=null,as=null,hd=!1,Il=!1,Jl=0,Ck=0;function ys(){throw Error(ke(321))}function Wh(s,t){if(t===null)return!1;for(var r=0;r<t.length&&r<s.length;r++)if(!gr(s[r],t[r]))return!1;return!0}function Gh(s,t,r,a,i,o){if(bn=o,Ft=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ac.current=s===null||s.memoizedState===null?_k:Pk,s=r(a,i),Il){o=0;do{if(Il=!1,Jl=0,25<=o)throw Error(ke(301));o+=1,as=Zt=null,t.updateQueue=null,Ac.current=Tk,s=r(a,i)}while(Il)}if(Ac.current=pd,t=Zt!==null&&Zt.next!==null,bn=0,as=Zt=Ft=null,hd=!1,t)throw Error(ke(300));return s}function Hh(){var s=Jl!==0;return Jl=0,s}function wr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return as===null?Ft.memoizedState=as=s:as=as.next=s,as}function nr(){if(Zt===null){var s=Ft.alternate;s=s!==null?s.memoizedState:null}else s=Zt.next;var t=as===null?Ft.memoizedState:as.next;if(t!==null)as=t,Zt=s;else{if(s===null)throw Error(ke(310));Zt=s,s={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},as===null?Ft.memoizedState=as=s:as=as.next=s}return as}function Zl(s,t){return typeof t=="function"?t(s):t}function kx(s){var t=nr(),r=t.queue;if(r===null)throw Error(ke(311));r.lastRenderedReducer=s;var a=Zt,i=a.baseQueue,o=r.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}a.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,a=a.baseState;var d=l=null,x=null,p=o;do{var N=p.lane;if((bn&N)===N)x!==null&&(x=x.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),a=p.hasEagerState?p.eagerState:s(a,p.action);else{var I={lane:N,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};x===null?(d=x=I,l=a):x=x.next=I,Ft.lanes|=N,jn|=N}p=p.next}while(p!==null&&p!==o);x===null?l=a:x.next=d,gr(a,t.memoizedState)||(Os=!0),t.memoizedState=a,t.baseState=l,t.baseQueue=x,r.lastRenderedState=a}if(s=r.interleaved,s!==null){i=s;do o=i.lane,Ft.lanes|=o,jn|=o,i=i.next;while(i!==s)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Cx(s){var t=nr(),r=t.queue;if(r===null)throw Error(ke(311));r.lastRenderedReducer=s;var a=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var l=i=i.next;do o=s(o,l.action),l=l.next;while(l!==i);gr(o,t.memoizedState)||(Os=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,a]}function Bj(){}function $j(s,t){var r=Ft,a=nr(),i=t(),o=!gr(a.memoizedState,i);if(o&&(a.memoizedState=i,Os=!0),a=a.queue,Qh(Gj.bind(null,r,a,s),[s]),a.getSnapshot!==t||o||as!==null&&as.memoizedState.tag&1){if(r.flags|=2048,eo(9,Wj.bind(null,r,a,i,t),void 0,null),is===null)throw Error(ke(349));bn&30||qj(r,t,i)}return i}function qj(s,t,r){s.flags|=16384,s={getSnapshot:t,value:r},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.stores=[s]):(r=t.stores,r===null?t.stores=[s]:r.push(s))}function Wj(s,t,r,a){t.value=r,t.getSnapshot=a,Hj(t)&&Qj(s)}function Gj(s,t,r){return r(function(){Hj(t)&&Qj(s)})}function Hj(s){var t=s.getSnapshot;s=s.value;try{var r=t();return!gr(s,r)}catch{return!0}}function Qj(s){var t=Zr(s,1);t!==null&&fr(t,s,1,-1)}function eg(s){var t=wr();return typeof s=="function"&&(s=s()),t.memoizedState=t.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zl,lastRenderedState:s},t.queue=s,s=s.dispatch=Sk.bind(null,Ft,s),[t.memoizedState,s]}function eo(s,t,r,a){return s={tag:s,create:t,destroy:r,deps:a,next:null},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.lastEffect=s.next=s):(r=t.lastEffect,r===null?t.lastEffect=s.next=s:(a=r.next,r.next=s,s.next=a,t.lastEffect=s)),s}function Kj(){return nr().memoizedState}function Rc(s,t,r,a){var i=wr();Ft.flags|=s,i.memoizedState=eo(1|t,r,void 0,a===void 0?null:a)}function au(s,t,r,a){var i=nr();a=a===void 0?null:a;var o=void 0;if(Zt!==null){var l=Zt.memoizedState;if(o=l.destroy,a!==null&&Wh(a,l.deps)){i.memoizedState=eo(t,r,o,a);return}}Ft.flags|=s,i.memoizedState=eo(1|t,r,o,a)}function tg(s,t){return Rc(8390656,8,s,t)}function Qh(s,t){return au(2048,8,s,t)}function Yj(s,t){return au(4,2,s,t)}function Xj(s,t){return au(4,4,s,t)}function Jj(s,t){if(typeof t=="function")return s=s(),t(s),function(){t(null)};if(t!=null)return s=s(),t.current=s,function(){t.current=null}}function Zj(s,t,r){return r=r!=null?r.concat([s]):null,au(4,4,Jj.bind(null,t,s),r)}function Kh(){}function ev(s,t){var r=nr();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Wh(t,a[1])?a[0]:(r.memoizedState=[s,t],s)}function tv(s,t){var r=nr();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Wh(t,a[1])?a[0]:(s=s(),r.memoizedState=[s,t],s)}function sv(s,t,r){return bn&21?(gr(r,t)||(r=lj(),Ft.lanes|=r,jn|=r,s.baseState=!0),t):(s.baseState&&(s.baseState=!1,Os=!0),s.memoizedState=r)}function Ik(s,t){var r=Ct;Ct=r!==0&&4>r?r:4,s(!0);var a=wx.transition;wx.transition={};try{s(!1),t()}finally{Ct=r,wx.transition=a}}function rv(){return nr().memoizedState}function Ek(s,t,r){var a=Ra(s);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},av(s))nv(t,r);else if(r=Vj(s,t,r,a),r!==null){var i=_s();fr(r,s,a,i),iv(r,t,a)}}function Sk(s,t,r){var a=Ra(s),i={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(av(s))nv(t,i);else{var o=s.alternate;if(s.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,d=o(l,r);if(i.hasEagerState=!0,i.eagerState=d,gr(d,l)){var x=t.interleaved;x===null?(i.next=i,Fh(t)):(i.next=x.next,x.next=i),t.interleaved=i;return}}catch{}finally{}r=Vj(s,t,i,a),r!==null&&(i=_s(),fr(r,s,a,i),iv(r,t,a))}}function av(s){var t=s.alternate;return s===Ft||t!==null&&t===Ft}function nv(s,t){Il=hd=!0;var r=s.pending;r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t}function iv(s,t,r){if(r&4194240){var a=t.lanes;a&=s.pendingLanes,r|=a,t.lanes=r,Ih(s,r)}}var pd={readContext:ar,useCallback:ys,useContext:ys,useEffect:ys,useImperativeHandle:ys,useInsertionEffect:ys,useLayoutEffect:ys,useMemo:ys,useReducer:ys,useRef:ys,useState:ys,useDebugValue:ys,useDeferredValue:ys,useTransition:ys,useMutableSource:ys,useSyncExternalStore:ys,useId:ys,unstable_isNewReconciler:!1},_k={readContext:ar,useCallback:function(s,t){return wr().memoizedState=[s,t===void 0?null:t],s},useContext:ar,useEffect:tg,useImperativeHandle:function(s,t,r){return r=r!=null?r.concat([s]):null,Rc(4194308,4,Jj.bind(null,t,s),r)},useLayoutEffect:function(s,t){return Rc(4194308,4,s,t)},useInsertionEffect:function(s,t){return Rc(4,2,s,t)},useMemo:function(s,t){var r=wr();return t=t===void 0?null:t,s=s(),r.memoizedState=[s,t],s},useReducer:function(s,t,r){var a=wr();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:t},a.queue=s,s=s.dispatch=Ek.bind(null,Ft,s),[a.memoizedState,s]},useRef:function(s){var t=wr();return s={current:s},t.memoizedState=s},useState:eg,useDebugValue:Kh,useDeferredValue:function(s){return wr().memoizedState=s},useTransition:function(){var s=eg(!1),t=s[0];return s=Ik.bind(null,s[1]),wr().memoizedState=s,[t,s]},useMutableSource:function(){},useSyncExternalStore:function(s,t,r){var a=Ft,i=wr();if(Ot){if(r===void 0)throw Error(ke(407));r=r()}else{if(r=t(),is===null)throw Error(ke(349));bn&30||qj(a,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,tg(Gj.bind(null,a,o,s),[s]),a.flags|=2048,eo(9,Wj.bind(null,a,o,r,t),void 0,null),r},useId:function(){var s=wr(),t=is.identifierPrefix;if(Ot){var r=Wr,a=qr;r=(a&~(1<<32-pr(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=Jl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Ck++,t=":"+t+"r"+r.toString(32)+":";return s.memoizedState=t},unstable_isNewReconciler:!1},Pk={readContext:ar,useCallback:ev,useContext:ar,useEffect:Qh,useImperativeHandle:Zj,useInsertionEffect:Yj,useLayoutEffect:Xj,useMemo:tv,useReducer:kx,useRef:Kj,useState:function(){return kx(Zl)},useDebugValue:Kh,useDeferredValue:function(s){var t=nr();return sv(t,Zt.memoizedState,s)},useTransition:function(){var s=kx(Zl)[0],t=nr().memoizedState;return[s,t]},useMutableSource:Bj,useSyncExternalStore:$j,useId:rv,unstable_isNewReconciler:!1},Tk={readContext:ar,useCallback:ev,useContext:ar,useEffect:Qh,useImperativeHandle:Zj,useInsertionEffect:Yj,useLayoutEffect:Xj,useMemo:tv,useReducer:Cx,useRef:Kj,useState:function(){return Cx(Zl)},useDebugValue:Kh,useDeferredValue:function(s){var t=nr();return Zt===null?t.memoizedState=s:sv(t,Zt.memoizedState,s)},useTransition:function(){var s=Cx(Zl)[0],t=nr().memoizedState;return[s,t]},useMutableSource:Bj,useSyncExternalStore:$j,useId:rv,unstable_isNewReconciler:!1};function dr(s,t){if(s&&s.defaultProps){t=Bt({},t),s=s.defaultProps;for(var r in s)t[r]===void 0&&(t[r]=s[r]);return t}return t}function wm(s,t,r,a){t=s.memoizedState,r=r(a,t),r=r==null?t:Bt({},t,r),s.memoizedState=r,s.lanes===0&&(s.updateQueue.baseState=r)}var nu={isMounted:function(s){return(s=s._reactInternals)?Pn(s)===s:!1},enqueueSetState:function(s,t,r){s=s._reactInternals;var a=_s(),i=Ra(s),o=Qr(a,i);o.payload=t,r!=null&&(o.callback=r),t=Da(s,o,i),t!==null&&(fr(t,s,i,a),Dc(t,s,i))},enqueueReplaceState:function(s,t,r){s=s._reactInternals;var a=_s(),i=Ra(s),o=Qr(a,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Da(s,o,i),t!==null&&(fr(t,s,i,a),Dc(t,s,i))},enqueueForceUpdate:function(s,t){s=s._reactInternals;var r=_s(),a=Ra(s),i=Qr(r,a);i.tag=2,t!=null&&(i.callback=t),t=Da(s,i,a),t!==null&&(fr(t,s,a,r),Dc(t,s,a))}};function sg(s,t,r,a,i,o,l){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(a,o,l):t.prototype&&t.prototype.isPureReactComponent?!Gl(r,a)||!Gl(i,o):!0}function lv(s,t,r){var a=!1,i=Ua,o=t.contextType;return typeof o=="object"&&o!==null?o=ar(o):(i=Ls(t)?gn:ks.current,a=t.contextTypes,o=(a=a!=null)?gi(s,i):Ua),t=new t(r,o),s.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=nu,s.stateNode=t,t._reactInternals=s,a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=o),t}function rg(s,t,r,a){s=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==s&&nu.enqueueReplaceState(t,t.state,null)}function km(s,t,r,a){var i=s.stateNode;i.props=r,i.state=s.memoizedState,i.refs={},Uh(s);var o=t.contextType;typeof o=="object"&&o!==null?i.context=ar(o):(o=Ls(t)?gn:ks.current,i.context=gi(s,o)),i.state=s.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(wm(s,t,o,r),i.state=s.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&nu.enqueueReplaceState(i,i.state,null),xd(s,r,i,a),i.state=s.memoizedState),typeof i.componentDidMount=="function"&&(s.flags|=4194308)}function vi(s,t){try{var r="",a=t;do r+=n4(a),a=a.return;while(a);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:s,source:t,stack:i,digest:null}}function Ix(s,t,r){return{value:s,source:null,stack:r??null,digest:t??null}}function Cm(s,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Dk=typeof WeakMap=="function"?WeakMap:Map;function ov(s,t,r){r=Qr(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){gd||(gd=!0,Mm=a),Cm(s,t)},r}function cv(s,t,r){r=Qr(-1,r),r.tag=3;var a=s.type.getDerivedStateFromError;if(typeof a=="function"){var i=t.value;r.payload=function(){return a(i)},r.callback=function(){Cm(s,t)}}var o=s.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Cm(s,t),typeof a!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function ag(s,t,r){var a=s.pingCache;if(a===null){a=s.pingCache=new Dk;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(r)||(i.add(r),s=Gk.bind(null,s,t,r),t.then(s,s))}function ng(s){do{var t;if((t=s.tag===13)&&(t=s.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return s;s=s.return}while(s!==null);return null}function ig(s,t,r,a,i){return s.mode&1?(s.flags|=65536,s.lanes=i,s):(s===t?s.flags|=65536:(s.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Qr(-1,1),t.tag=2,Da(r,t,1))),r.lanes|=1),s)}var Ak=ia.ReactCurrentOwner,Os=!1;function Es(s,t,r,a){t.child=s===null?Lj(t,null,r,a):bi(t,s.child,r,a)}function lg(s,t,r,a,i){r=r.render;var o=t.ref;return di(t,i),a=Gh(s,t,r,a,o,i),r=Hh(),s!==null&&!Os?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~i,ea(s,t,i)):(Ot&&r&&Rh(t),t.flags|=1,Es(s,t,a,i),t.child)}function og(s,t,r,a,i){if(s===null){var o=r.type;return typeof o=="function"&&!r0(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,dv(s,t,o,a,i)):(s=Lc(r.type,null,a,t,t.mode,i),s.ref=t.ref,s.return=t,t.child=s)}if(o=s.child,!(s.lanes&i)){var l=o.memoizedProps;if(r=r.compare,r=r!==null?r:Gl,r(l,a)&&s.ref===t.ref)return ea(s,t,i)}return t.flags|=1,s=Ma(o,a),s.ref=t.ref,s.return=t,t.child=s}function dv(s,t,r,a,i){if(s!==null){var o=s.memoizedProps;if(Gl(o,a)&&s.ref===t.ref)if(Os=!1,t.pendingProps=a=o,(s.lanes&i)!==0)s.flags&131072&&(Os=!0);else return t.lanes=s.lanes,ea(s,t,i)}return Im(s,t,r,a,i)}function uv(s,t,r){var a=t.pendingProps,i=a.children,o=s!==null?s.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(ri,$s),$s|=r;else{if(!(r&1073741824))return s=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:s,cachePool:null,transitions:null},t.updateQueue=null,Pt(ri,$s),$s|=s,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=o!==null?o.baseLanes:r,Pt(ri,$s),$s|=a}else o!==null?(a=o.baseLanes|r,t.memoizedState=null):a=r,Pt(ri,$s),$s|=a;return Es(s,t,i,r),t.child}function xv(s,t){var r=t.ref;(s===null&&r!==null||s!==null&&s.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Im(s,t,r,a,i){var o=Ls(r)?gn:ks.current;return o=gi(t,o),di(t,i),r=Gh(s,t,r,a,o,i),a=Hh(),s!==null&&!Os?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~i,ea(s,t,i)):(Ot&&a&&Rh(t),t.flags|=1,Es(s,t,r,i),t.child)}function cg(s,t,r,a,i){if(Ls(r)){var o=!0;ld(t)}else o=!1;if(di(t,i),t.stateNode===null)Mc(s,t),lv(t,r,a),km(t,r,a,i),a=!0;else if(s===null){var l=t.stateNode,d=t.memoizedProps;l.props=d;var x=l.context,p=r.contextType;typeof p=="object"&&p!==null?p=ar(p):(p=Ls(r)?gn:ks.current,p=gi(t,p));var N=r.getDerivedStateFromProps,I=typeof N=="function"||typeof l.getSnapshotBeforeUpdate=="function";I||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==a||x!==p)&&rg(t,l,a,p),ga=!1;var T=t.memoizedState;l.state=T,xd(t,a,l,i),x=t.memoizedState,d!==a||T!==x||zs.current||ga?(typeof N=="function"&&(wm(t,r,N,a),x=t.memoizedState),(d=ga||sg(t,r,d,a,T,x,p))?(I||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=x),l.props=a,l.state=x,l.context=p,a=d):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{l=t.stateNode,Fj(s,t),d=t.memoizedProps,p=t.type===t.elementType?d:dr(t.type,d),l.props=p,I=t.pendingProps,T=l.context,x=r.contextType,typeof x=="object"&&x!==null?x=ar(x):(x=Ls(r)?gn:ks.current,x=gi(t,x));var A=r.getDerivedStateFromProps;(N=typeof A=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==I||T!==x)&&rg(t,l,a,x),ga=!1,T=t.memoizedState,l.state=T,xd(t,a,l,i);var f=t.memoizedState;d!==I||T!==f||zs.current||ga?(typeof A=="function"&&(wm(t,r,A,a),f=t.memoizedState),(p=ga||sg(t,r,p,a,T,f,x)||!1)?(N||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(a,f,x),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(a,f,x)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||d===s.memoizedProps&&T===s.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===s.memoizedProps&&T===s.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=f),l.props=a,l.state=f,l.context=x,a=p):(typeof l.componentDidUpdate!="function"||d===s.memoizedProps&&T===s.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===s.memoizedProps&&T===s.memoizedState||(t.flags|=1024),a=!1)}return Em(s,t,r,a,o,i)}function Em(s,t,r,a,i,o){xv(s,t);var l=(t.flags&128)!==0;if(!a&&!l)return i&&Qf(t,r,!1),ea(s,t,o);a=t.stateNode,Ak.current=t;var d=l&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,s!==null&&l?(t.child=bi(t,s.child,null,o),t.child=bi(t,null,d,o)):Es(s,t,d,o),t.memoizedState=a.state,i&&Qf(t,r,!0),t.child}function mv(s){var t=s.stateNode;t.pendingContext?Hf(s,t.pendingContext,t.pendingContext!==t.context):t.context&&Hf(s,t.context,!1),Bh(s,t.containerInfo)}function dg(s,t,r,a,i){return yi(),Oh(i),t.flags|=256,Es(s,t,r,a),t.child}var Sm={dehydrated:null,treeContext:null,retryLane:0};function _m(s){return{baseLanes:s,cachePool:null,transitions:null}}function hv(s,t,r){var a=t.pendingProps,i=Vt.current,o=!1,l=(t.flags&128)!==0,d;if((d=l)||(d=s!==null&&s.memoizedState===null?!1:(i&2)!==0),d?(o=!0,t.flags&=-129):(s===null||s.memoizedState!==null)&&(i|=1),Pt(Vt,i&1),s===null)return vm(t),s=t.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(t.mode&1?s.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=a.children,s=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},!(a&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=ou(l,a,0,null),s=pn(s,a,r,null),o.return=t,s.return=t,o.sibling=s,t.child=o,t.child.memoizedState=_m(r),t.memoizedState=Sm,s):Yh(t,l));if(i=s.memoizedState,i!==null&&(d=i.dehydrated,d!==null))return Rk(s,t,l,a,d,i,r);if(o){o=a.fallback,l=t.mode,i=s.child,d=i.sibling;var x={mode:"hidden",children:a.children};return!(l&1)&&t.child!==i?(a=t.child,a.childLanes=0,a.pendingProps=x,t.deletions=null):(a=Ma(i,x),a.subtreeFlags=i.subtreeFlags&14680064),d!==null?o=Ma(d,o):(o=pn(o,l,r,null),o.flags|=2),o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=s.child.memoizedState,l=l===null?_m(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=s.childLanes&~r,t.memoizedState=Sm,a}return o=s.child,s=o.sibling,a=Ma(o,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,s!==null&&(r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)),t.child=a,t.memoizedState=null,a}function Yh(s,t){return t=ou({mode:"visible",children:t},s.mode,0,null),t.return=s,s.child=t}function hc(s,t,r,a){return a!==null&&Oh(a),bi(t,s.child,null,r),s=Yh(t,t.pendingProps.children),s.flags|=2,t.memoizedState=null,s}function Rk(s,t,r,a,i,o,l){if(r)return t.flags&256?(t.flags&=-257,a=Ix(Error(ke(422))),hc(s,t,l,a)):t.memoizedState!==null?(t.child=s.child,t.flags|=128,null):(o=a.fallback,i=t.mode,a=ou({mode:"visible",children:a.children},i,0,null),o=pn(o,i,l,null),o.flags|=2,a.return=t,o.return=t,a.sibling=o,t.child=a,t.mode&1&&bi(t,s.child,null,l),t.child.memoizedState=_m(l),t.memoizedState=Sm,o);if(!(t.mode&1))return hc(s,t,l,null);if(i.data==="$!"){if(a=i.nextSibling&&i.nextSibling.dataset,a)var d=a.dgst;return a=d,o=Error(ke(419)),a=Ix(o,a,void 0),hc(s,t,l,a)}if(d=(l&s.childLanes)!==0,Os||d){if(a=is,a!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(a.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Zr(s,i),fr(a,s,i,-1))}return s0(),a=Ix(Error(ke(421))),hc(s,t,l,a)}return i.data==="$?"?(t.flags|=128,t.child=s.child,t=Hk.bind(null,s),i._reactRetry=t,null):(s=o.treeContext,Ws=Ta(i.nextSibling),Hs=t,Ot=!0,xr=null,s!==null&&(er[tr++]=qr,er[tr++]=Wr,er[tr++]=yn,qr=s.id,Wr=s.overflow,yn=t),t=Yh(t,a.children),t.flags|=4096,t)}function ug(s,t,r){s.lanes|=t;var a=s.alternate;a!==null&&(a.lanes|=t),Nm(s.return,t,r)}function Ex(s,t,r,a,i){var o=s.memoizedState;o===null?s.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=a,o.tail=r,o.tailMode=i)}function pv(s,t,r){var a=t.pendingProps,i=a.revealOrder,o=a.tail;if(Es(s,t,a.children,r),a=Vt.current,a&2)a=a&1|2,t.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=t.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&ug(s,r,t);else if(s.tag===19)ug(s,r,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}a&=1}if(Pt(Vt,a),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)s=r.alternate,s!==null&&md(s)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Ex(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(s=i.alternate,s!==null&&md(s)===null){t.child=i;break}s=i.sibling,i.sibling=r,r=i,i=s}Ex(t,!0,r,null,o);break;case"together":Ex(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mc(s,t){!(t.mode&1)&&s!==null&&(s.alternate=null,t.alternate=null,t.flags|=2)}function ea(s,t,r){if(s!==null&&(t.dependencies=s.dependencies),jn|=t.lanes,!(r&t.childLanes))return null;if(s!==null&&t.child!==s.child)throw Error(ke(153));if(t.child!==null){for(s=t.child,r=Ma(s,s.pendingProps),t.child=r,r.return=t;s.sibling!==null;)s=s.sibling,r=r.sibling=Ma(s,s.pendingProps),r.return=t;r.sibling=null}return t.child}function Mk(s,t,r){switch(t.tag){case 3:mv(t),yi();break;case 5:Uj(t);break;case 1:Ls(t.type)&&ld(t);break;case 4:Bh(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,i=t.memoizedProps.value;Pt(dd,a._currentValue),a._currentValue=i;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Pt(Vt,Vt.current&1),t.flags|=128,null):r&t.child.childLanes?hv(s,t,r):(Pt(Vt,Vt.current&1),s=ea(s,t,r),s!==null?s.sibling:null);Pt(Vt,Vt.current&1);break;case 19:if(a=(r&t.childLanes)!==0,s.flags&128){if(a)return pv(s,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pt(Vt,Vt.current),a)break;return null;case 22:case 23:return t.lanes=0,uv(s,t,r)}return ea(s,t,r)}var fv,Pm,gv,yv;fv=function(s,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)s.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Pm=function(){};gv=function(s,t,r,a){var i=s.memoizedProps;if(i!==a){s=t.stateNode,un(Sr.current);var o=null;switch(r){case"input":i=Jx(s,i),a=Jx(s,a),o=[];break;case"select":i=Bt({},i,{value:void 0}),a=Bt({},a,{value:void 0}),o=[];break;case"textarea":i=tm(s,i),a=tm(s,a),o=[];break;default:typeof i.onClick!="function"&&typeof a.onClick=="function"&&(s.onclick=nd)}rm(r,a);var l;r=null;for(p in i)if(!a.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var d=i[p];for(l in d)d.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Vl.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in a){var x=a[p];if(d=i!=null?i[p]:void 0,a.hasOwnProperty(p)&&x!==d&&(x!=null||d!=null))if(p==="style")if(d){for(l in d)!d.hasOwnProperty(l)||x&&x.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in x)x.hasOwnProperty(l)&&d[l]!==x[l]&&(r||(r={}),r[l]=x[l])}else r||(o||(o=[]),o.push(p,r)),r=x;else p==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,d=d?d.__html:void 0,x!=null&&d!==x&&(o=o||[]).push(p,x)):p==="children"?typeof x!="string"&&typeof x!="number"||(o=o||[]).push(p,""+x):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Vl.hasOwnProperty(p)?(x!=null&&p==="onScroll"&&At("scroll",s),o||d===x||(o=[])):(o=o||[]).push(p,x))}r&&(o=o||[]).push("style",r);var p=o;(t.updateQueue=p)&&(t.flags|=4)}};yv=function(s,t,r,a){r!==a&&(t.flags|=4)};function il(s,t){if(!Ot)switch(s.tailMode){case"hidden":t=s.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?s.tail=null:r.sibling=null;break;case"collapsed":r=s.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||s.tail===null?s.tail=null:s.tail.sibling=null:a.sibling=null}}function bs(s){var t=s.alternate!==null&&s.alternate.child===s.child,r=0,a=0;if(t)for(var i=s.child;i!==null;)r|=i.lanes|i.childLanes,a|=i.subtreeFlags&14680064,a|=i.flags&14680064,i.return=s,i=i.sibling;else for(i=s.child;i!==null;)r|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=s,i=i.sibling;return s.subtreeFlags|=a,s.childLanes=r,t}function Ok(s,t,r){var a=t.pendingProps;switch(Mh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bs(t),null;case 1:return Ls(t.type)&&id(),bs(t),null;case 3:return a=t.stateNode,ji(),Rt(zs),Rt(ks),qh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(xc(t)?t.flags|=4:s===null||s.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xr!==null&&(Lm(xr),xr=null))),Pm(s,t),bs(t),null;case 5:$h(t);var i=un(Xl.current);if(r=t.type,s!==null&&t.stateNode!=null)gv(s,t,r,a,i),s.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(ke(166));return bs(t),null}if(s=un(Sr.current),xc(t)){a=t.stateNode,r=t.type;var o=t.memoizedProps;switch(a[Cr]=t,a[Kl]=o,s=(t.mode&1)!==0,r){case"dialog":At("cancel",a),At("close",a);break;case"iframe":case"object":case"embed":At("load",a);break;case"video":case"audio":for(i=0;i<hl.length;i++)At(hl[i],a);break;case"source":At("error",a);break;case"img":case"image":case"link":At("error",a),At("load",a);break;case"details":At("toggle",a);break;case"input":jf(a,o),At("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!o.multiple},At("invalid",a);break;case"textarea":Nf(a,o),At("invalid",a)}rm(r,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var d=o[l];l==="children"?typeof d=="string"?a.textContent!==d&&(o.suppressHydrationWarning!==!0&&uc(a.textContent,d,s),i=["children",d]):typeof d=="number"&&a.textContent!==""+d&&(o.suppressHydrationWarning!==!0&&uc(a.textContent,d,s),i=["children",""+d]):Vl.hasOwnProperty(l)&&d!=null&&l==="onScroll"&&At("scroll",a)}switch(r){case"input":rc(a),vf(a,o,!0);break;case"textarea":rc(a),wf(a);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(a.onclick=nd)}a=i,t.updateQueue=a,a!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Gb(r)),s==="http://www.w3.org/1999/xhtml"?r==="script"?(s=l.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof a.is=="string"?s=l.createElement(r,{is:a.is}):(s=l.createElement(r),r==="select"&&(l=s,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):s=l.createElementNS(s,r),s[Cr]=t,s[Kl]=a,fv(s,t,!1,!1),t.stateNode=s;e:{switch(l=am(r,a),r){case"dialog":At("cancel",s),At("close",s),i=a;break;case"iframe":case"object":case"embed":At("load",s),i=a;break;case"video":case"audio":for(i=0;i<hl.length;i++)At(hl[i],s);i=a;break;case"source":At("error",s),i=a;break;case"img":case"image":case"link":At("error",s),At("load",s),i=a;break;case"details":At("toggle",s),i=a;break;case"input":jf(s,a),i=Jx(s,a),At("invalid",s);break;case"option":i=a;break;case"select":s._wrapperState={wasMultiple:!!a.multiple},i=Bt({},a,{value:void 0}),At("invalid",s);break;case"textarea":Nf(s,a),i=tm(s,a),At("invalid",s);break;default:i=a}rm(r,i),d=i;for(o in d)if(d.hasOwnProperty(o)){var x=d[o];o==="style"?Kb(s,x):o==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&Hb(s,x)):o==="children"?typeof x=="string"?(r!=="textarea"||x!=="")&&Fl(s,x):typeof x=="number"&&Fl(s,""+x):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Vl.hasOwnProperty(o)?x!=null&&o==="onScroll"&&At("scroll",s):x!=null&&jh(s,o,x,l))}switch(r){case"input":rc(s),vf(s,a,!1);break;case"textarea":rc(s),wf(s);break;case"option":a.value!=null&&s.setAttribute("value",""+Fa(a.value));break;case"select":s.multiple=!!a.multiple,o=a.value,o!=null?ii(s,!!a.multiple,o,!1):a.defaultValue!=null&&ii(s,!!a.multiple,a.defaultValue,!0);break;default:typeof i.onClick=="function"&&(s.onclick=nd)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return bs(t),null;case 6:if(s&&t.stateNode!=null)yv(s,t,s.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(ke(166));if(r=un(Xl.current),un(Sr.current),xc(t)){if(a=t.stateNode,r=t.memoizedProps,a[Cr]=t,(o=a.nodeValue!==r)&&(s=Hs,s!==null))switch(s.tag){case 3:uc(a.nodeValue,r,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&uc(a.nodeValue,r,(s.mode&1)!==0)}o&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Cr]=t,t.stateNode=a}return bs(t),null;case 13:if(Rt(Vt),a=t.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Ot&&Ws!==null&&t.mode&1&&!(t.flags&128))Oj(),yi(),t.flags|=98560,o=!1;else if(o=xc(t),a!==null&&a.dehydrated!==null){if(s===null){if(!o)throw Error(ke(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ke(317));o[Cr]=t}else yi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;bs(t),o=!1}else xr!==null&&(Lm(xr),xr=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(s!==null&&s.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(s===null||Vt.current&1?es===0&&(es=3):s0())),t.updateQueue!==null&&(t.flags|=4),bs(t),null);case 4:return ji(),Pm(s,t),s===null&&Hl(t.stateNode.containerInfo),bs(t),null;case 10:return Vh(t.type._context),bs(t),null;case 17:return Ls(t.type)&&id(),bs(t),null;case 19:if(Rt(Vt),o=t.memoizedState,o===null)return bs(t),null;if(a=(t.flags&128)!==0,l=o.rendering,l===null)if(a)il(o,!1);else{if(es!==0||s!==null&&s.flags&128)for(s=t.child;s!==null;){if(l=md(s),l!==null){for(t.flags|=128,il(o,!1),a=l.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)o=r,s=a,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,s=l.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r=r.sibling;return Pt(Vt,Vt.current&1|2),t.child}s=s.sibling}o.tail!==null&&Qt()>Ni&&(t.flags|=128,a=!0,il(o,!1),t.lanes=4194304)}else{if(!a)if(s=md(l),s!==null){if(t.flags|=128,a=!0,r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),il(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ot)return bs(t),null}else 2*Qt()-o.renderingStartTime>Ni&&r!==1073741824&&(t.flags|=128,a=!0,il(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(r=o.last,r!==null?r.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qt(),t.sibling=null,r=Vt.current,Pt(Vt,a?r&1|2:r&1),t):(bs(t),null);case 22:case 23:return t0(),a=t.memoizedState!==null,s!==null&&s.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?$s&1073741824&&(bs(t),t.subtreeFlags&6&&(t.flags|=8192)):bs(t),null;case 24:return null;case 25:return null}throw Error(ke(156,t.tag))}function zk(s,t){switch(Mh(t),t.tag){case 1:return Ls(t.type)&&id(),s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 3:return ji(),Rt(zs),Rt(ks),qh(),s=t.flags,s&65536&&!(s&128)?(t.flags=s&-65537|128,t):null;case 5:return $h(t),null;case 13:if(Rt(Vt),s=t.memoizedState,s!==null&&s.dehydrated!==null){if(t.alternate===null)throw Error(ke(340));yi()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 19:return Rt(Vt),null;case 4:return ji(),null;case 10:return Vh(t.type._context),null;case 22:case 23:return t0(),null;case 24:return null;default:return null}}var pc=!1,Ns=!1,Lk=typeof WeakSet=="function"?WeakSet:Set,ze=null;function si(s,t){var r=s.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Wt(s,t,a)}else r.current=null}function Tm(s,t,r){try{r()}catch(a){Wt(s,t,a)}}var xg=!1;function Vk(s,t){if(hm=sd,s=wj(),Ah(s)){if("selectionStart"in s)var r={start:s.selectionStart,end:s.selectionEnd};else e:{r=(r=s.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var i=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var l=0,d=-1,x=-1,p=0,N=0,I=s,T=null;t:for(;;){for(var A;I!==r||i!==0&&I.nodeType!==3||(d=l+i),I!==o||a!==0&&I.nodeType!==3||(x=l+a),I.nodeType===3&&(l+=I.nodeValue.length),(A=I.firstChild)!==null;)T=I,I=A;for(;;){if(I===s)break t;if(T===r&&++p===i&&(d=l),T===o&&++N===a&&(x=l),(A=I.nextSibling)!==null)break;I=T,T=I.parentNode}I=A}r=d===-1||x===-1?null:{start:d,end:x}}else r=null}r=r||{start:0,end:0}}else r=null;for(pm={focusedElem:s,selectionRange:r},sd=!1,ze=t;ze!==null;)if(t=ze,s=t.child,(t.subtreeFlags&1028)!==0&&s!==null)s.return=t,ze=s;else for(;ze!==null;){t=ze;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var L=f.memoizedProps,k=f.memoizedState,_=t.stateNode,z=_.getSnapshotBeforeUpdate(t.elementType===t.type?L:dr(t.type,L),k);_.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var M=t.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(Y){Wt(t,t.return,Y)}if(s=t.sibling,s!==null){s.return=t.return,ze=s;break}ze=t.return}return f=xg,xg=!1,f}function El(s,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var i=a=a.next;do{if((i.tag&s)===s){var o=i.destroy;i.destroy=void 0,o!==void 0&&Tm(t,r,o)}i=i.next}while(i!==a)}}function iu(s,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&s)===s){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Dm(s){var t=s.ref;if(t!==null){var r=s.stateNode;switch(s.tag){case 5:s=r;break;default:s=r}typeof t=="function"?t(s):t.current=s}}function bv(s){var t=s.alternate;t!==null&&(s.alternate=null,bv(t)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(t=s.stateNode,t!==null&&(delete t[Cr],delete t[Kl],delete t[ym],delete t[vk],delete t[Nk])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function jv(s){return s.tag===5||s.tag===3||s.tag===4}function mg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||jv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Am(s,t,r){var a=s.tag;if(a===5||a===6)s=s.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(s,t):r.insertBefore(s,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(s,r)):(t=r,t.appendChild(s)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=nd));else if(a!==4&&(s=s.child,s!==null))for(Am(s,t,r),s=s.sibling;s!==null;)Am(s,t,r),s=s.sibling}function Rm(s,t,r){var a=s.tag;if(a===5||a===6)s=s.stateNode,t?r.insertBefore(s,t):r.appendChild(s);else if(a!==4&&(s=s.child,s!==null))for(Rm(s,t,r),s=s.sibling;s!==null;)Rm(s,t,r),s=s.sibling}var os=null,ur=!1;function ha(s,t,r){for(r=r.child;r!==null;)vv(s,t,r),r=r.sibling}function vv(s,t,r){if(Er&&typeof Er.onCommitFiberUnmount=="function")try{Er.onCommitFiberUnmount(Jd,r)}catch{}switch(r.tag){case 5:Ns||si(r,t);case 6:var a=os,i=ur;os=null,ha(s,t,r),os=a,ur=i,os!==null&&(ur?(s=os,r=r.stateNode,s.nodeType===8?s.parentNode.removeChild(r):s.removeChild(r)):os.removeChild(r.stateNode));break;case 18:os!==null&&(ur?(s=os,r=r.stateNode,s.nodeType===8?jx(s.parentNode,r):s.nodeType===1&&jx(s,r),ql(s)):jx(os,r.stateNode));break;case 4:a=os,i=ur,os=r.stateNode.containerInfo,ur=!0,ha(s,t,r),os=a,ur=i;break;case 0:case 11:case 14:case 15:if(!Ns&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){i=a=a.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Tm(r,t,l),i=i.next}while(i!==a)}ha(s,t,r);break;case 1:if(!Ns&&(si(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(d){Wt(r,t,d)}ha(s,t,r);break;case 21:ha(s,t,r);break;case 22:r.mode&1?(Ns=(a=Ns)||r.memoizedState!==null,ha(s,t,r),Ns=a):ha(s,t,r);break;default:ha(s,t,r)}}function hg(s){var t=s.updateQueue;if(t!==null){s.updateQueue=null;var r=s.stateNode;r===null&&(r=s.stateNode=new Lk),t.forEach(function(a){var i=Qk.bind(null,s,a);r.has(a)||(r.add(a),a.then(i,i))})}}function cr(s,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var i=r[a];try{var o=s,l=t,d=l;e:for(;d!==null;){switch(d.tag){case 5:os=d.stateNode,ur=!1;break e;case 3:os=d.stateNode.containerInfo,ur=!0;break e;case 4:os=d.stateNode.containerInfo,ur=!0;break e}d=d.return}if(os===null)throw Error(ke(160));vv(o,l,i),os=null,ur=!1;var x=i.alternate;x!==null&&(x.return=null),i.return=null}catch(p){Wt(i,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Nv(t,s),t=t.sibling}function Nv(s,t){var r=s.alternate,a=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(cr(t,s),Nr(s),a&4){try{El(3,s,s.return),iu(3,s)}catch(L){Wt(s,s.return,L)}try{El(5,s,s.return)}catch(L){Wt(s,s.return,L)}}break;case 1:cr(t,s),Nr(s),a&512&&r!==null&&si(r,r.return);break;case 5:if(cr(t,s),Nr(s),a&512&&r!==null&&si(r,r.return),s.flags&32){var i=s.stateNode;try{Fl(i,"")}catch(L){Wt(s,s.return,L)}}if(a&4&&(i=s.stateNode,i!=null)){var o=s.memoizedProps,l=r!==null?r.memoizedProps:o,d=s.type,x=s.updateQueue;if(s.updateQueue=null,x!==null)try{d==="input"&&o.type==="radio"&&o.name!=null&&qb(i,o),am(d,l);var p=am(d,o);for(l=0;l<x.length;l+=2){var N=x[l],I=x[l+1];N==="style"?Kb(i,I):N==="dangerouslySetInnerHTML"?Hb(i,I):N==="children"?Fl(i,I):jh(i,N,I,p)}switch(d){case"input":Zx(i,o);break;case"textarea":Wb(i,o);break;case"select":var T=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var A=o.value;A!=null?ii(i,!!o.multiple,A,!1):T!==!!o.multiple&&(o.defaultValue!=null?ii(i,!!o.multiple,o.defaultValue,!0):ii(i,!!o.multiple,o.multiple?[]:"",!1))}i[Kl]=o}catch(L){Wt(s,s.return,L)}}break;case 6:if(cr(t,s),Nr(s),a&4){if(s.stateNode===null)throw Error(ke(162));i=s.stateNode,o=s.memoizedProps;try{i.nodeValue=o}catch(L){Wt(s,s.return,L)}}break;case 3:if(cr(t,s),Nr(s),a&4&&r!==null&&r.memoizedState.isDehydrated)try{ql(t.containerInfo)}catch(L){Wt(s,s.return,L)}break;case 4:cr(t,s),Nr(s);break;case 13:cr(t,s),Nr(s),i=s.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Zh=Qt())),a&4&&hg(s);break;case 22:if(N=r!==null&&r.memoizedState!==null,s.mode&1?(Ns=(p=Ns)||N,cr(t,s),Ns=p):cr(t,s),Nr(s),a&8192){if(p=s.memoizedState!==null,(s.stateNode.isHidden=p)&&!N&&s.mode&1)for(ze=s,N=s.child;N!==null;){for(I=ze=N;ze!==null;){switch(T=ze,A=T.child,T.tag){case 0:case 11:case 14:case 15:El(4,T,T.return);break;case 1:si(T,T.return);var f=T.stateNode;if(typeof f.componentWillUnmount=="function"){a=T,r=T.return;try{t=a,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(L){Wt(a,r,L)}}break;case 5:si(T,T.return);break;case 22:if(T.memoizedState!==null){fg(I);continue}}A!==null?(A.return=T,ze=A):fg(I)}N=N.sibling}e:for(N=null,I=s;;){if(I.tag===5){if(N===null){N=I;try{i=I.stateNode,p?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(d=I.stateNode,x=I.memoizedProps.style,l=x!=null&&x.hasOwnProperty("display")?x.display:null,d.style.display=Qb("display",l))}catch(L){Wt(s,s.return,L)}}}else if(I.tag===6){if(N===null)try{I.stateNode.nodeValue=p?"":I.memoizedProps}catch(L){Wt(s,s.return,L)}}else if((I.tag!==22&&I.tag!==23||I.memoizedState===null||I===s)&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===s)break e;for(;I.sibling===null;){if(I.return===null||I.return===s)break e;N===I&&(N=null),I=I.return}N===I&&(N=null),I.sibling.return=I.return,I=I.sibling}}break;case 19:cr(t,s),Nr(s),a&4&&hg(s);break;case 21:break;default:cr(t,s),Nr(s)}}function Nr(s){var t=s.flags;if(t&2){try{e:{for(var r=s.return;r!==null;){if(jv(r)){var a=r;break e}r=r.return}throw Error(ke(160))}switch(a.tag){case 5:var i=a.stateNode;a.flags&32&&(Fl(i,""),a.flags&=-33);var o=mg(s);Rm(s,o,i);break;case 3:case 4:var l=a.stateNode.containerInfo,d=mg(s);Am(s,d,l);break;default:throw Error(ke(161))}}catch(x){Wt(s,s.return,x)}s.flags&=-3}t&4096&&(s.flags&=-4097)}function Fk(s,t,r){ze=s,wv(s)}function wv(s,t,r){for(var a=(s.mode&1)!==0;ze!==null;){var i=ze,o=i.child;if(i.tag===22&&a){var l=i.memoizedState!==null||pc;if(!l){var d=i.alternate,x=d!==null&&d.memoizedState!==null||Ns;d=pc;var p=Ns;if(pc=l,(Ns=x)&&!p)for(ze=i;ze!==null;)l=ze,x=l.child,l.tag===22&&l.memoizedState!==null?gg(i):x!==null?(x.return=l,ze=x):gg(i);for(;o!==null;)ze=o,wv(o),o=o.sibling;ze=i,pc=d,Ns=p}pg(s)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ze=o):pg(s)}}function pg(s){for(;ze!==null;){var t=ze;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ns||iu(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Ns)if(r===null)a.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:dr(t.type,r.memoizedProps);a.componentDidUpdate(i,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Zf(t,o,a);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Zf(t,l,r)}break;case 5:var d=t.stateNode;if(r===null&&t.flags&4){r=d;var x=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&r.focus();break;case"img":x.src&&(r.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var N=p.memoizedState;if(N!==null){var I=N.dehydrated;I!==null&&ql(I)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}Ns||t.flags&512&&Dm(t)}catch(T){Wt(t,t.return,T)}}if(t===s){ze=null;break}if(r=t.sibling,r!==null){r.return=t.return,ze=r;break}ze=t.return}}function fg(s){for(;ze!==null;){var t=ze;if(t===s){ze=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ze=r;break}ze=t.return}}function gg(s){for(;ze!==null;){var t=ze;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{iu(4,t)}catch(x){Wt(t,r,x)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var i=t.return;try{a.componentDidMount()}catch(x){Wt(t,i,x)}}var o=t.return;try{Dm(t)}catch(x){Wt(t,o,x)}break;case 5:var l=t.return;try{Dm(t)}catch(x){Wt(t,l,x)}}}catch(x){Wt(t,t.return,x)}if(t===s){ze=null;break}var d=t.sibling;if(d!==null){d.return=t.return,ze=d;break}ze=t.return}}var Uk=Math.ceil,fd=ia.ReactCurrentDispatcher,Xh=ia.ReactCurrentOwner,rr=ia.ReactCurrentBatchConfig,bt=0,is=null,Xt=null,xs=0,$s=0,ri=Ya(0),es=0,to=null,jn=0,lu=0,Jh=0,Sl=null,Ms=null,Zh=0,Ni=1/0,Br=null,gd=!1,Mm=null,Aa=null,fc=!1,Ca=null,yd=0,_l=0,Om=null,Oc=-1,zc=0;function _s(){return bt&6?Qt():Oc!==-1?Oc:Oc=Qt()}function Ra(s){return s.mode&1?bt&2&&xs!==0?xs&-xs:kk.transition!==null?(zc===0&&(zc=lj()),zc):(s=Ct,s!==0||(s=window.event,s=s===void 0?16:hj(s.type)),s):1}function fr(s,t,r,a){if(50<_l)throw _l=0,Om=null,Error(ke(185));yo(s,r,a),(!(bt&2)||s!==is)&&(s===is&&(!(bt&2)&&(lu|=r),es===4&&ba(s,xs)),Vs(s,a),r===1&&bt===0&&!(t.mode&1)&&(Ni=Qt()+500,ru&&Xa()))}function Vs(s,t){var r=s.callbackNode;k4(s,t);var a=td(s,s===is?xs:0);if(a===0)r!==null&&If(r),s.callbackNode=null,s.callbackPriority=0;else if(t=a&-a,s.callbackPriority!==t){if(r!=null&&If(r),t===1)s.tag===0?wk(yg.bind(null,s)):Aj(yg.bind(null,s)),bk(function(){!(bt&6)&&Xa()}),r=null;else{switch(oj(a)){case 1:r=Ch;break;case 4:r=nj;break;case 16:r=ed;break;case 536870912:r=ij;break;default:r=ed}r=Tv(r,kv.bind(null,s))}s.callbackPriority=t,s.callbackNode=r}}function kv(s,t){if(Oc=-1,zc=0,bt&6)throw Error(ke(327));var r=s.callbackNode;if(ui()&&s.callbackNode!==r)return null;var a=td(s,s===is?xs:0);if(a===0)return null;if(a&30||a&s.expiredLanes||t)t=bd(s,a);else{t=a;var i=bt;bt|=2;var o=Iv();(is!==s||xs!==t)&&(Br=null,Ni=Qt()+500,hn(s,t));do try{qk();break}catch(d){Cv(s,d)}while(1);Lh(),fd.current=o,bt=i,Xt!==null?t=0:(is=null,xs=0,t=es)}if(t!==0){if(t===2&&(i=cm(s),i!==0&&(a=i,t=zm(s,i))),t===1)throw r=to,hn(s,0),ba(s,a),Vs(s,Qt()),r;if(t===6)ba(s,a);else{if(i=s.current.alternate,!(a&30)&&!Bk(i)&&(t=bd(s,a),t===2&&(o=cm(s),o!==0&&(a=o,t=zm(s,o))),t===1))throw r=to,hn(s,0),ba(s,a),Vs(s,Qt()),r;switch(s.finishedWork=i,s.finishedLanes=a,t){case 0:case 1:throw Error(ke(345));case 2:ln(s,Ms,Br);break;case 3:if(ba(s,a),(a&130023424)===a&&(t=Zh+500-Qt(),10<t)){if(td(s,0)!==0)break;if(i=s.suspendedLanes,(i&a)!==a){_s(),s.pingedLanes|=s.suspendedLanes&i;break}s.timeoutHandle=gm(ln.bind(null,s,Ms,Br),t);break}ln(s,Ms,Br);break;case 4:if(ba(s,a),(a&4194240)===a)break;for(t=s.eventTimes,i=-1;0<a;){var l=31-pr(a);o=1<<l,l=t[l],l>i&&(i=l),a&=~o}if(a=i,a=Qt()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Uk(a/1960))-a,10<a){s.timeoutHandle=gm(ln.bind(null,s,Ms,Br),a);break}ln(s,Ms,Br);break;case 5:ln(s,Ms,Br);break;default:throw Error(ke(329))}}}return Vs(s,Qt()),s.callbackNode===r?kv.bind(null,s):null}function zm(s,t){var r=Sl;return s.current.memoizedState.isDehydrated&&(hn(s,t).flags|=256),s=bd(s,t),s!==2&&(t=Ms,Ms=r,t!==null&&Lm(t)),s}function Lm(s){Ms===null?Ms=s:Ms.push.apply(Ms,s)}function Bk(s){for(var t=s;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var i=r[a],o=i.getSnapshot;i=i.value;try{if(!gr(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ba(s,t){for(t&=~Jh,t&=~lu,s.suspendedLanes|=t,s.pingedLanes&=~t,s=s.expirationTimes;0<t;){var r=31-pr(t),a=1<<r;s[r]=-1,t&=~a}}function yg(s){if(bt&6)throw Error(ke(327));ui();var t=td(s,0);if(!(t&1))return Vs(s,Qt()),null;var r=bd(s,t);if(s.tag!==0&&r===2){var a=cm(s);a!==0&&(t=a,r=zm(s,a))}if(r===1)throw r=to,hn(s,0),ba(s,t),Vs(s,Qt()),r;if(r===6)throw Error(ke(345));return s.finishedWork=s.current.alternate,s.finishedLanes=t,ln(s,Ms,Br),Vs(s,Qt()),null}function e0(s,t){var r=bt;bt|=1;try{return s(t)}finally{bt=r,bt===0&&(Ni=Qt()+500,ru&&Xa())}}function vn(s){Ca!==null&&Ca.tag===0&&!(bt&6)&&ui();var t=bt;bt|=1;var r=rr.transition,a=Ct;try{if(rr.transition=null,Ct=1,s)return s()}finally{Ct=a,rr.transition=r,bt=t,!(bt&6)&&Xa()}}function t0(){$s=ri.current,Rt(ri)}function hn(s,t){s.finishedWork=null,s.finishedLanes=0;var r=s.timeoutHandle;if(r!==-1&&(s.timeoutHandle=-1,yk(r)),Xt!==null)for(r=Xt.return;r!==null;){var a=r;switch(Mh(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&id();break;case 3:ji(),Rt(zs),Rt(ks),qh();break;case 5:$h(a);break;case 4:ji();break;case 13:Rt(Vt);break;case 19:Rt(Vt);break;case 10:Vh(a.type._context);break;case 22:case 23:t0()}r=r.return}if(is=s,Xt=s=Ma(s.current,null),xs=$s=t,es=0,to=null,Jh=lu=jn=0,Ms=Sl=null,dn!==null){for(t=0;t<dn.length;t++)if(r=dn[t],a=r.interleaved,a!==null){r.interleaved=null;var i=a.next,o=r.pending;if(o!==null){var l=o.next;o.next=i,a.next=l}r.pending=a}dn=null}return s}function Cv(s,t){do{var r=Xt;try{if(Lh(),Ac.current=pd,hd){for(var a=Ft.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}hd=!1}if(bn=0,as=Zt=Ft=null,Il=!1,Jl=0,Xh.current=null,r===null||r.return===null){es=1,to=t,Xt=null;break}e:{var o=s,l=r.return,d=r,x=t;if(t=xs,d.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var p=x,N=d,I=N.tag;if(!(N.mode&1)&&(I===0||I===11||I===15)){var T=N.alternate;T?(N.updateQueue=T.updateQueue,N.memoizedState=T.memoizedState,N.lanes=T.lanes):(N.updateQueue=null,N.memoizedState=null)}var A=ng(l);if(A!==null){A.flags&=-257,ig(A,l,d,o,t),A.mode&1&&ag(o,p,t),t=A,x=p;var f=t.updateQueue;if(f===null){var L=new Set;L.add(x),t.updateQueue=L}else f.add(x);break e}else{if(!(t&1)){ag(o,p,t),s0();break e}x=Error(ke(426))}}else if(Ot&&d.mode&1){var k=ng(l);if(k!==null){!(k.flags&65536)&&(k.flags|=256),ig(k,l,d,o,t),Oh(vi(x,d));break e}}o=x=vi(x,d),es!==4&&(es=2),Sl===null?Sl=[o]:Sl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var _=ov(o,x,t);Jf(o,_);break e;case 1:d=x;var z=o.type,M=o.stateNode;if(!(o.flags&128)&&(typeof z.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Aa===null||!Aa.has(M)))){o.flags|=65536,t&=-t,o.lanes|=t;var Y=cv(o,d,t);Jf(o,Y);break e}}o=o.return}while(o!==null)}Sv(r)}catch(G){t=G,Xt===r&&r!==null&&(Xt=r=r.return);continue}break}while(1)}function Iv(){var s=fd.current;return fd.current=pd,s===null?pd:s}function s0(){(es===0||es===3||es===2)&&(es=4),is===null||!(jn&268435455)&&!(lu&268435455)||ba(is,xs)}function bd(s,t){var r=bt;bt|=2;var a=Iv();(is!==s||xs!==t)&&(Br=null,hn(s,t));do try{$k();break}catch(i){Cv(s,i)}while(1);if(Lh(),bt=r,fd.current=a,Xt!==null)throw Error(ke(261));return is=null,xs=0,es}function $k(){for(;Xt!==null;)Ev(Xt)}function qk(){for(;Xt!==null&&!p4();)Ev(Xt)}function Ev(s){var t=Pv(s.alternate,s,$s);s.memoizedProps=s.pendingProps,t===null?Sv(s):Xt=t,Xh.current=null}function Sv(s){var t=s;do{var r=t.alternate;if(s=t.return,t.flags&32768){if(r=zk(r,t),r!==null){r.flags&=32767,Xt=r;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{es=6,Xt=null;return}}else if(r=Ok(r,t,$s),r!==null){Xt=r;return}if(t=t.sibling,t!==null){Xt=t;return}Xt=t=s}while(t!==null);es===0&&(es=5)}function ln(s,t,r){var a=Ct,i=rr.transition;try{rr.transition=null,Ct=1,Wk(s,t,r,a)}finally{rr.transition=i,Ct=a}return null}function Wk(s,t,r,a){do ui();while(Ca!==null);if(bt&6)throw Error(ke(327));r=s.finishedWork;var i=s.finishedLanes;if(r===null)return null;if(s.finishedWork=null,s.finishedLanes=0,r===s.current)throw Error(ke(177));s.callbackNode=null,s.callbackPriority=0;var o=r.lanes|r.childLanes;if(C4(s,o),s===is&&(Xt=is=null,xs=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||fc||(fc=!0,Tv(ed,function(){return ui(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=rr.transition,rr.transition=null;var l=Ct;Ct=1;var d=bt;bt|=4,Xh.current=null,Vk(s,r),Nv(r,s),uk(pm),sd=!!hm,pm=hm=null,s.current=r,Fk(r),f4(),bt=d,Ct=l,rr.transition=o}else s.current=r;if(fc&&(fc=!1,Ca=s,yd=i),o=s.pendingLanes,o===0&&(Aa=null),b4(r.stateNode),Vs(s,Qt()),t!==null)for(a=s.onRecoverableError,r=0;r<t.length;r++)i=t[r],a(i.value,{componentStack:i.stack,digest:i.digest});if(gd)throw gd=!1,s=Mm,Mm=null,s;return yd&1&&s.tag!==0&&ui(),o=s.pendingLanes,o&1?s===Om?_l++:(_l=0,Om=s):_l=0,Xa(),null}function ui(){if(Ca!==null){var s=oj(yd),t=rr.transition,r=Ct;try{if(rr.transition=null,Ct=16>s?16:s,Ca===null)var a=!1;else{if(s=Ca,Ca=null,yd=0,bt&6)throw Error(ke(331));var i=bt;for(bt|=4,ze=s.current;ze!==null;){var o=ze,l=o.child;if(ze.flags&16){var d=o.deletions;if(d!==null){for(var x=0;x<d.length;x++){var p=d[x];for(ze=p;ze!==null;){var N=ze;switch(N.tag){case 0:case 11:case 15:El(8,N,o)}var I=N.child;if(I!==null)I.return=N,ze=I;else for(;ze!==null;){N=ze;var T=N.sibling,A=N.return;if(bv(N),N===p){ze=null;break}if(T!==null){T.return=A,ze=T;break}ze=A}}}var f=o.alternate;if(f!==null){var L=f.child;if(L!==null){f.child=null;do{var k=L.sibling;L.sibling=null,L=k}while(L!==null)}}ze=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ze=l;else e:for(;ze!==null;){if(o=ze,o.flags&2048)switch(o.tag){case 0:case 11:case 15:El(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,ze=_;break e}ze=o.return}}var z=s.current;for(ze=z;ze!==null;){l=ze;var M=l.child;if(l.subtreeFlags&2064&&M!==null)M.return=l,ze=M;else e:for(l=z;ze!==null;){if(d=ze,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:iu(9,d)}}catch(G){Wt(d,d.return,G)}if(d===l){ze=null;break e}var Y=d.sibling;if(Y!==null){Y.return=d.return,ze=Y;break e}ze=d.return}}if(bt=i,Xa(),Er&&typeof Er.onPostCommitFiberRoot=="function")try{Er.onPostCommitFiberRoot(Jd,s)}catch{}a=!0}return a}finally{Ct=r,rr.transition=t}}return!1}function bg(s,t,r){t=vi(r,t),t=ov(s,t,1),s=Da(s,t,1),t=_s(),s!==null&&(yo(s,1,t),Vs(s,t))}function Wt(s,t,r){if(s.tag===3)bg(s,s,r);else for(;t!==null;){if(t.tag===3){bg(t,s,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Aa===null||!Aa.has(a))){s=vi(r,s),s=cv(t,s,1),t=Da(t,s,1),s=_s(),t!==null&&(yo(t,1,s),Vs(t,s));break}}t=t.return}}function Gk(s,t,r){var a=s.pingCache;a!==null&&a.delete(t),t=_s(),s.pingedLanes|=s.suspendedLanes&r,is===s&&(xs&r)===r&&(es===4||es===3&&(xs&130023424)===xs&&500>Qt()-Zh?hn(s,0):Jh|=r),Vs(s,t)}function _v(s,t){t===0&&(s.mode&1?(t=ic,ic<<=1,!(ic&130023424)&&(ic=4194304)):t=1);var r=_s();s=Zr(s,t),s!==null&&(yo(s,t,r),Vs(s,r))}function Hk(s){var t=s.memoizedState,r=0;t!==null&&(r=t.retryLane),_v(s,r)}function Qk(s,t){var r=0;switch(s.tag){case 13:var a=s.stateNode,i=s.memoizedState;i!==null&&(r=i.retryLane);break;case 19:a=s.stateNode;break;default:throw Error(ke(314))}a!==null&&a.delete(t),_v(s,r)}var Pv;Pv=function(s,t,r){if(s!==null)if(s.memoizedProps!==t.pendingProps||zs.current)Os=!0;else{if(!(s.lanes&r)&&!(t.flags&128))return Os=!1,Mk(s,t,r);Os=!!(s.flags&131072)}else Os=!1,Ot&&t.flags&1048576&&Rj(t,cd,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Mc(s,t),s=t.pendingProps;var i=gi(t,ks.current);di(t,r),i=Gh(null,t,a,s,i,r);var o=Hh();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ls(a)?(o=!0,ld(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Uh(t),i.updater=nu,t.stateNode=i,i._reactInternals=t,km(t,a,s,r),t=Em(null,t,a,!0,o,r)):(t.tag=0,Ot&&o&&Rh(t),Es(null,t,i,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Mc(s,t),s=t.pendingProps,i=a._init,a=i(a._payload),t.type=a,i=t.tag=Yk(a),s=dr(a,s),i){case 0:t=Im(null,t,a,s,r);break e;case 1:t=cg(null,t,a,s,r);break e;case 11:t=lg(null,t,a,s,r);break e;case 14:t=og(null,t,a,dr(a.type,s),r);break e}throw Error(ke(306,a,""))}return t;case 0:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:dr(a,i),Im(s,t,a,i,r);case 1:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:dr(a,i),cg(s,t,a,i,r);case 3:e:{if(mv(t),s===null)throw Error(ke(387));a=t.pendingProps,o=t.memoizedState,i=o.element,Fj(s,t),xd(t,a,null,r);var l=t.memoizedState;if(a=l.element,o.isDehydrated)if(o={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=vi(Error(ke(423)),t),t=dg(s,t,a,r,i);break e}else if(a!==i){i=vi(Error(ke(424)),t),t=dg(s,t,a,r,i);break e}else for(Ws=Ta(t.stateNode.containerInfo.firstChild),Hs=t,Ot=!0,xr=null,r=Lj(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(yi(),a===i){t=ea(s,t,r);break e}Es(s,t,a,r)}t=t.child}return t;case 5:return Uj(t),s===null&&vm(t),a=t.type,i=t.pendingProps,o=s!==null?s.memoizedProps:null,l=i.children,fm(a,i)?l=null:o!==null&&fm(a,o)&&(t.flags|=32),xv(s,t),Es(s,t,l,r),t.child;case 6:return s===null&&vm(t),null;case 13:return hv(s,t,r);case 4:return Bh(t,t.stateNode.containerInfo),a=t.pendingProps,s===null?t.child=bi(t,null,a,r):Es(s,t,a,r),t.child;case 11:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:dr(a,i),lg(s,t,a,i,r);case 7:return Es(s,t,t.pendingProps,r),t.child;case 8:return Es(s,t,t.pendingProps.children,r),t.child;case 12:return Es(s,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,i=t.pendingProps,o=t.memoizedProps,l=i.value,Pt(dd,a._currentValue),a._currentValue=l,o!==null)if(gr(o.value,l)){if(o.children===i.children&&!zs.current){t=ea(s,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var d=o.dependencies;if(d!==null){l=o.child;for(var x=d.firstContext;x!==null;){if(x.context===a){if(o.tag===1){x=Qr(-1,r&-r),x.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var N=p.pending;N===null?x.next=x:(x.next=N.next,N.next=x),p.pending=x}}o.lanes|=r,x=o.alternate,x!==null&&(x.lanes|=r),Nm(o.return,r,t),d.lanes|=r;break}x=x.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(ke(341));l.lanes|=r,d=l.alternate,d!==null&&(d.lanes|=r),Nm(l,r,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Es(s,t,i.children,r),t=t.child}return t;case 9:return i=t.type,a=t.pendingProps.children,di(t,r),i=ar(i),a=a(i),t.flags|=1,Es(s,t,a,r),t.child;case 14:return a=t.type,i=dr(a,t.pendingProps),i=dr(a.type,i),og(s,t,a,i,r);case 15:return dv(s,t,t.type,t.pendingProps,r);case 17:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:dr(a,i),Mc(s,t),t.tag=1,Ls(a)?(s=!0,ld(t)):s=!1,di(t,r),lv(t,a,i),km(t,a,i,r),Em(null,t,a,!0,s,r);case 19:return pv(s,t,r);case 22:return uv(s,t,r)}throw Error(ke(156,t.tag))};function Tv(s,t){return aj(s,t)}function Kk(s,t,r,a){this.tag=s,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(s,t,r,a){return new Kk(s,t,r,a)}function r0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Yk(s){if(typeof s=="function")return r0(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Nh)return 11;if(s===wh)return 14}return 2}function Ma(s,t){var r=s.alternate;return r===null?(r=sr(s.tag,t,s.key,s.mode),r.elementType=s.elementType,r.type=s.type,r.stateNode=s.stateNode,r.alternate=s,s.alternate=r):(r.pendingProps=t,r.type=s.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=s.flags&14680064,r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,t=s.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=s.sibling,r.index=s.index,r.ref=s.ref,r}function Lc(s,t,r,a,i,o){var l=2;if(a=s,typeof s=="function")r0(s)&&(l=1);else if(typeof s=="string")l=5;else e:switch(s){case Hn:return pn(r.children,i,o,t);case vh:l=8,i|=8;break;case Qx:return s=sr(12,r,t,i|2),s.elementType=Qx,s.lanes=o,s;case Kx:return s=sr(13,r,t,i),s.elementType=Kx,s.lanes=o,s;case Yx:return s=sr(19,r,t,i),s.elementType=Yx,s.lanes=o,s;case Ub:return ou(r,i,o,t);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Vb:l=10;break e;case Fb:l=9;break e;case Nh:l=11;break e;case wh:l=14;break e;case fa:l=16,a=null;break e}throw Error(ke(130,s==null?s:typeof s,""))}return t=sr(l,r,t,i),t.elementType=s,t.type=a,t.lanes=o,t}function pn(s,t,r,a){return s=sr(7,s,a,t),s.lanes=r,s}function ou(s,t,r,a){return s=sr(22,s,a,t),s.elementType=Ub,s.lanes=r,s.stateNode={isHidden:!1},s}function Sx(s,t,r){return s=sr(6,s,null,t),s.lanes=r,s}function _x(s,t,r){return t=sr(4,s.children!==null?s.children:[],s.key,t),t.lanes=r,t.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},t}function Xk(s,t,r,a,i){this.tag=t,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cx(0),this.expirationTimes=cx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cx(0),this.identifierPrefix=a,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function a0(s,t,r,a,i,o,l,d,x){return s=new Xk(s,t,r,d,x),t===1?(t=1,o===!0&&(t|=8)):t=0,o=sr(3,null,null,t),s.current=o,o.stateNode=s,o.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uh(o),s}function Jk(s,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gn,key:a==null?null:""+a,children:s,containerInfo:t,implementation:r}}function Dv(s){if(!s)return Ua;s=s._reactInternals;e:{if(Pn(s)!==s||s.tag!==1)throw Error(ke(170));var t=s;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ls(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ke(171))}if(s.tag===1){var r=s.type;if(Ls(r))return Dj(s,r,t)}return t}function Av(s,t,r,a,i,o,l,d,x){return s=a0(r,a,!0,s,i,o,l,d,x),s.context=Dv(null),r=s.current,a=_s(),i=Ra(r),o=Qr(a,i),o.callback=t??null,Da(r,o,i),s.current.lanes=i,yo(s,i,a),Vs(s,a),s}function cu(s,t,r,a){var i=t.current,o=_s(),l=Ra(i);return r=Dv(r),t.context===null?t.context=r:t.pendingContext=r,t=Qr(o,l),t.payload={element:s},a=a===void 0?null:a,a!==null&&(t.callback=a),s=Da(i,t,l),s!==null&&(fr(s,i,l,o),Dc(s,i,l)),l}function jd(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function jg(s,t){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var r=s.retryLane;s.retryLane=r!==0&&r<t?r:t}}function n0(s,t){jg(s,t),(s=s.alternate)&&jg(s,t)}function Zk(){return null}var Rv=typeof reportError=="function"?reportError:function(s){console.error(s)};function i0(s){this._internalRoot=s}du.prototype.render=i0.prototype.render=function(s){var t=this._internalRoot;if(t===null)throw Error(ke(409));cu(s,t,null,null)};du.prototype.unmount=i0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var t=s.containerInfo;vn(function(){cu(null,s,null,null)}),t[Jr]=null}};function du(s){this._internalRoot=s}du.prototype.unstable_scheduleHydration=function(s){if(s){var t=uj();s={blockedOn:null,target:s,priority:t};for(var r=0;r<ya.length&&t!==0&&t<ya[r].priority;r++);ya.splice(r,0,s),r===0&&mj(s)}};function l0(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function uu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function vg(){}function e3(s,t,r,a,i){if(i){if(typeof a=="function"){var o=a;a=function(){var p=jd(l);o.call(p)}}var l=Av(t,a,s,0,null,!1,!1,"",vg);return s._reactRootContainer=l,s[Jr]=l.current,Hl(s.nodeType===8?s.parentNode:s),vn(),l}for(;i=s.lastChild;)s.removeChild(i);if(typeof a=="function"){var d=a;a=function(){var p=jd(x);d.call(p)}}var x=a0(s,0,!1,null,null,!1,!1,"",vg);return s._reactRootContainer=x,s[Jr]=x.current,Hl(s.nodeType===8?s.parentNode:s),vn(function(){cu(t,x,r,a)}),x}function xu(s,t,r,a,i){var o=r._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var d=i;i=function(){var x=jd(l);d.call(x)}}cu(t,l,s,i)}else l=e3(r,t,s,i,a);return jd(l)}cj=function(s){switch(s.tag){case 3:var t=s.stateNode;if(t.current.memoizedState.isDehydrated){var r=ml(t.pendingLanes);r!==0&&(Ih(t,r|1),Vs(t,Qt()),!(bt&6)&&(Ni=Qt()+500,Xa()))}break;case 13:vn(function(){var a=Zr(s,1);if(a!==null){var i=_s();fr(a,s,1,i)}}),n0(s,1)}};Eh=function(s){if(s.tag===13){var t=Zr(s,134217728);if(t!==null){var r=_s();fr(t,s,134217728,r)}n0(s,134217728)}};dj=function(s){if(s.tag===13){var t=Ra(s),r=Zr(s,t);if(r!==null){var a=_s();fr(r,s,t,a)}n0(s,t)}};uj=function(){return Ct};xj=function(s,t){var r=Ct;try{return Ct=s,t()}finally{Ct=r}};im=function(s,t,r){switch(t){case"input":if(Zx(s,r),t=r.name,r.type==="radio"&&t!=null){for(r=s;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==s&&a.form===s.form){var i=su(a);if(!i)throw Error(ke(90));$b(a),Zx(a,i)}}}break;case"textarea":Wb(s,r);break;case"select":t=r.value,t!=null&&ii(s,!!r.multiple,t,!1)}};Jb=e0;Zb=vn;var t3={usingClientEntryPoint:!1,Events:[jo,Xn,su,Yb,Xb,e0]},ll={findFiberByHostInstance:cn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s3={bundleType:ll.bundleType,version:ll.version,rendererPackageName:ll.rendererPackageName,rendererConfig:ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ia.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=sj(s),s===null?null:s.stateNode},findFiberByHostInstance:ll.findFiberByHostInstance||Zk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{Jd=gc.inject(s3),Er=gc}catch{}}Xs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t3;Xs.createPortal=function(s,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l0(t))throw Error(ke(200));return Jk(s,t,null,r)};Xs.createRoot=function(s,t){if(!l0(s))throw Error(ke(299));var r=!1,a="",i=Rv;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=a0(s,1,!1,null,null,r,!1,a,i),s[Jr]=t.current,Hl(s.nodeType===8?s.parentNode:s),new i0(t)};Xs.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var t=s._reactInternals;if(t===void 0)throw typeof s.render=="function"?Error(ke(188)):(s=Object.keys(s).join(","),Error(ke(268,s)));return s=sj(t),s=s===null?null:s.stateNode,s};Xs.flushSync=function(s){return vn(s)};Xs.hydrate=function(s,t,r){if(!uu(t))throw Error(ke(200));return xu(null,s,t,!0,r)};Xs.hydrateRoot=function(s,t,r){if(!l0(s))throw Error(ke(405));var a=r!=null&&r.hydratedSources||null,i=!1,o="",l=Rv;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=Av(t,null,s,1,r??null,i,!1,o,l),s[Jr]=t.current,Hl(s),a)for(s=0;s<a.length;s++)r=a[s],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new du(t)};Xs.render=function(s,t,r){if(!uu(t))throw Error(ke(200));return xu(null,s,t,!1,r)};Xs.unmountComponentAtNode=function(s){if(!uu(s))throw Error(ke(40));return s._reactRootContainer?(vn(function(){xu(null,null,s,!1,function(){s._reactRootContainer=null,s[Jr]=null})}),!0):!1};Xs.unstable_batchedUpdates=e0;Xs.unstable_renderSubtreeIntoContainer=function(s,t,r,a){if(!uu(r))throw Error(ke(200));if(s==null||s._reactInternals===void 0)throw Error(ke(38));return xu(s,t,r,!1,a)};Xs.version="18.3.1-next-f1338f8080-20240426";function Mv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mv)}catch(s){console.error(s)}}Mv(),Mb.exports=Xs;var r3=Mb.exports,Ng=r3;Gx.createRoot=Ng.createRoot,Gx.hydrateRoot=Ng.hydrateRoot;const a3="modulepreload",n3=function(s){return"/"+s},wg={},i3=function(t,r,a){if(!r||r.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=n3(o),o in wg)return;wg[o]=!0;const l=o.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(!!a)for(let N=i.length-1;N>=0;N--){const I=i[N];if(I.href===o&&(!l||I.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${d}`))return;const p=document.createElement("link");if(p.rel=l?"stylesheet":a3,l||(p.as="script",p.crossOrigin=""),p.href=o,document.head.appendChild(p),l)return new Promise((N,I)=>{p.addEventListener("load",N),p.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})};var o0={};Object.defineProperty(o0,"__esModule",{value:!0});o0.parse=m3;o0.serialize=h3;const l3=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,o3=/^[\u0021-\u003A\u003C-\u007E]*$/,c3=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,d3=/^[\u0020-\u003A\u003D-\u007E]*$/,u3=Object.prototype.toString,x3=(()=>{const s=function(){};return s.prototype=Object.create(null),s})();function m3(s,t){const r=new x3,a=s.length;if(a<2)return r;const i=(t==null?void 0:t.decode)||p3;let o=0;do{const l=s.indexOf("=",o);if(l===-1)break;const d=s.indexOf(";",o),x=d===-1?a:d;if(l>x){o=s.lastIndexOf(";",l-1)+1;continue}const p=kg(s,o,l),N=Cg(s,l,p),I=s.slice(p,N);if(r[I]===void 0){let T=kg(s,l+1,x),A=Cg(s,x,T);const f=i(s.slice(T,A));r[I]=f}o=x+1}while(o<a);return r}function kg(s,t,r){do{const a=s.charCodeAt(t);if(a!==32&&a!==9)return t}while(++t<r);return r}function Cg(s,t,r){for(;t>r;){const a=s.charCodeAt(--t);if(a!==32&&a!==9)return t+1}return r}function h3(s,t,r){const a=(r==null?void 0:r.encode)||encodeURIComponent;if(!l3.test(s))throw new TypeError(`argument name is invalid: ${s}`);const i=a(t);if(!o3.test(i))throw new TypeError(`argument val is invalid: ${t}`);let o=s+"="+i;if(!r)return o;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);o+="; Max-Age="+r.maxAge}if(r.domain){if(!c3.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);o+="; Domain="+r.domain}if(r.path){if(!d3.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);o+="; Path="+r.path}if(r.expires){if(!f3(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.partitioned&&(o+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return o}function p3(s){if(s.indexOf("%")===-1)return s;try{return decodeURIComponent(s)}catch{return s}}function f3(s){return u3.call(s)==="[object Date]"}var Ig="popstate";function g3(s={}){function t(a,i){let{pathname:o,search:l,hash:d}=a.location;return Vm("",{pathname:o,search:l,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){return typeof i=="string"?i:so(i)}return b3(t,r,null,s)}function Ut(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function Ar(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function y3(){return Math.random().toString(36).substring(2,10)}function Eg(s,t){return{usr:s.state,key:s.key,idx:t}}function Vm(s,t,r=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?Ri(t):t,state:r,key:t&&t.key||a||y3()}}function so({pathname:s="/",search:t="",hash:r=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function Ri(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substring(r),s=s.substring(0,r));let a=s.indexOf("?");a>=0&&(t.search=s.substring(a),s=s.substring(0,a)),s&&(t.pathname=s)}return t}function b3(s,t,r,a={}){let{window:i=document.defaultView,v5Compat:o=!1}=a,l=i.history,d="POP",x=null,p=N();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function N(){return(l.state||{idx:null}).idx}function I(){d="POP";let k=N(),_=k==null?null:k-p;p=k,x&&x({action:d,location:L.location,delta:_})}function T(k,_){d="PUSH";let z=Vm(L.location,k,_);r&&r(z,k),p=N()+1;let M=Eg(z,p),Y=L.createHref(z);try{l.pushState(M,"",Y)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;i.location.assign(Y)}o&&x&&x({action:d,location:L.location,delta:1})}function A(k,_){d="REPLACE";let z=Vm(L.location,k,_);r&&r(z,k),p=N();let M=Eg(z,p),Y=L.createHref(z);l.replaceState(M,"",Y),o&&x&&x({action:d,location:L.location,delta:0})}function f(k){let _=i.location.origin!=="null"?i.location.origin:i.location.href,z=typeof k=="string"?k:so(k);return z=z.replace(/ $/,"%20"),Ut(_,`No window.location.(origin|href) available to create URL for href: ${z}`),new URL(z,_)}let L={get action(){return d},get location(){return s(i,l)},listen(k){if(x)throw new Error("A history only accepts one active listener");return i.addEventListener(Ig,I),x=k,()=>{i.removeEventListener(Ig,I),x=null}},createHref(k){return t(i,k)},createURL:f,encodeLocation(k){let _=f(k);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:T,replace:A,go(k){return l.go(k)}};return L}function Ov(s,t,r="/"){return j3(s,t,r,!1)}function j3(s,t,r,a){let i=typeof t=="string"?Ri(t):t,o=ta(i.pathname||"/",r);if(o==null)return null;let l=zv(s);v3(l);let d=null;for(let x=0;d==null&&x<l.length;++x){let p=D3(o);d=P3(l[x],p,a)}return d}function zv(s,t=[],r=[],a=""){let i=(o,l,d)=>{let x={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};x.relativePath.startsWith("/")&&(Ut(x.relativePath.startsWith(a),`Absolute route path "${x.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(a.length));let p=Kr([a,x.relativePath]),N=r.concat(x);o.children&&o.children.length>0&&(Ut(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),zv(o.children,t,N,p)),!(o.path==null&&!o.index)&&t.push({path:p,score:S3(p,o.index),routesMeta:N})};return s.forEach((o,l)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))i(o,l);else for(let x of Lv(o.path))i(o,l,x)}),t}function Lv(s){let t=s.split("/");if(t.length===0)return[];let[r,...a]=t,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(a.length===0)return i?[o,""]:[o];let l=Lv(a.join("/")),d=[];return d.push(...l.map(x=>x===""?o:[o,x].join("/"))),i&&d.push(...l),d.map(x=>s.startsWith("/")&&x===""?"/":x)}function v3(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:_3(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var N3=/^:[\w-]+$/,w3=3,k3=2,C3=1,I3=10,E3=-2,Sg=s=>s==="*";function S3(s,t){let r=s.split("/"),a=r.length;return r.some(Sg)&&(a+=E3),t&&(a+=k3),r.filter(i=>!Sg(i)).reduce((i,o)=>i+(N3.test(o)?w3:o===""?C3:I3),a)}function _3(s,t){return s.length===t.length&&s.slice(0,-1).every((a,i)=>a===t[i])?s[s.length-1]-t[t.length-1]:0}function P3(s,t,r=!1){let{routesMeta:a}=s,i={},o="/",l=[];for(let d=0;d<a.length;++d){let x=a[d],p=d===a.length-1,N=o==="/"?t:t.slice(o.length)||"/",I=vd({path:x.relativePath,caseSensitive:x.caseSensitive,end:p},N),T=x.route;if(!I&&p&&r&&!a[a.length-1].route.index&&(I=vd({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},N)),!I)return null;Object.assign(i,I.params),l.push({params:i,pathname:Kr([o,I.pathname]),pathnameBase:O3(Kr([o,I.pathnameBase])),route:T}),I.pathnameBase!=="/"&&(o=Kr([o,I.pathnameBase]))}return l}function vd(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,a]=T3(s.path,s.caseSensitive,s.end),i=t.match(r);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:a.reduce((p,{paramName:N,isOptional:I},T)=>{if(N==="*"){let f=d[T]||"";l=o.slice(0,o.length-f.length).replace(/(.)\/+$/,"$1")}const A=d[T];return I&&!A?p[N]=void 0:p[N]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:s}}function T3(s,t=!1,r=!0){Ar(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],i="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,x)=>(a.push({paramName:d,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(a.push({paramName:"*"}),i+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":s!==""&&s!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),a]}function D3(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ar(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function ta(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=s.charAt(r);return a&&a!=="/"?null:s.slice(r)||"/"}function A3(s,t="/"){let{pathname:r,search:a="",hash:i=""}=typeof s=="string"?Ri(s):s;return{pathname:r?r.startsWith("/")?r:R3(r,t):t,search:z3(a),hash:L3(i)}}function R3(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Px(s,t,r,a){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function M3(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Vv(s){let t=M3(s);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function Fv(s,t,r,a=!1){let i;typeof s=="string"?i=Ri(s):(i={...s},Ut(!i.pathname||!i.pathname.includes("?"),Px("?","pathname","search",i)),Ut(!i.pathname||!i.pathname.includes("#"),Px("#","pathname","hash",i)),Ut(!i.search||!i.search.includes("#"),Px("#","search","hash",i)));let o=s===""||i.pathname==="",l=o?"/":i.pathname,d;if(l==null)d=r;else{let I=t.length-1;if(!a&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),I-=1;i.pathname=T.join("/")}d=I>=0?t[I]:"/"}let x=A3(i,d),p=l&&l!=="/"&&l.endsWith("/"),N=(o||l===".")&&r.endsWith("/");return!x.pathname.endsWith("/")&&(p||N)&&(x.pathname+="/"),x}var Kr=s=>s.join("/").replace(/\/\/+/g,"/"),O3=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),z3=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,L3=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function V3(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var Uv=["POST","PUT","PATCH","DELETE"];new Set(Uv);var F3=["GET",...Uv];new Set(F3);var Mi=j.createContext(null);Mi.displayName="DataRouter";var mu=j.createContext(null);mu.displayName="DataRouterState";var Bv=j.createContext({isTransitioning:!1});Bv.displayName="ViewTransition";var U3=j.createContext(new Map);U3.displayName="Fetchers";var B3=j.createContext(null);B3.displayName="Await";var zr=j.createContext(null);zr.displayName="Navigation";var No=j.createContext(null);No.displayName="Location";var la=j.createContext({outlet:null,matches:[],isDataRoute:!1});la.displayName="Route";var c0=j.createContext(null);c0.displayName="RouteError";function $3(s,{relative:t}={}){Ut(wo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=j.useContext(zr),{hash:i,pathname:o,search:l}=ko(s,{relative:t}),d=o;return r!=="/"&&(d=o==="/"?r:Kr([r,o])),a.createHref({pathname:d,search:l,hash:i})}function wo(){return j.useContext(No)!=null}function Tn(){return Ut(wo(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(No).location}var $v="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qv(s){j.useContext(zr).static||j.useLayoutEffect(s)}function ut(){let{isDataRoute:s}=j.useContext(la);return s?sC():q3()}function q3(){Ut(wo(),"useNavigate() may be used only in the context of a <Router> component.");let s=j.useContext(Mi),{basename:t,navigator:r}=j.useContext(zr),{matches:a}=j.useContext(la),{pathname:i}=Tn(),o=JSON.stringify(Vv(a)),l=j.useRef(!1);return qv(()=>{l.current=!0}),j.useCallback((x,p={})=>{if(Ar(l.current,$v),!l.current)return;if(typeof x=="number"){r.go(x);return}let N=Fv(x,JSON.parse(o),i,p.relative==="path");s==null&&t!=="/"&&(N.pathname=N.pathname==="/"?t:Kr([t,N.pathname])),(p.replace?r.replace:r.push)(N,p.state,p)},[t,r,o,i,s])}j.createContext(null);function ko(s,{relative:t}={}){let{matches:r}=j.useContext(la),{pathname:a}=Tn(),i=JSON.stringify(Vv(r));return j.useMemo(()=>Fv(s,JSON.parse(i),a,t==="path"),[s,i,a,t])}function W3(s,t){return Wv(s,t)}function Wv(s,t,r,a){var z;Ut(wo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=j.useContext(zr),{matches:l}=j.useContext(la),d=l[l.length-1],x=d?d.params:{},p=d?d.pathname:"/",N=d?d.pathnameBase:"/",I=d&&d.route;{let M=I&&I.path||"";Gv(p,!I||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let T=Tn(),A;if(t){let M=typeof t=="string"?Ri(t):t;Ut(N==="/"||((z=M.pathname)==null?void 0:z.startsWith(N)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${N}" but pathname "${M.pathname}" was given in the \`location\` prop.`),A=M}else A=T;let f=A.pathname||"/",L=f;if(N!=="/"){let M=N.replace(/^\//,"").split("/");L="/"+f.replace(/^\//,"").split("/").slice(M.length).join("/")}let k=!o&&r&&r.matches&&r.matches.length>0?r.matches:Ov(s,{pathname:L});Ar(I||k!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Ar(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=Y3(k&&k.map(M=>Object.assign({},M,{params:Object.assign({},x,M.params),pathname:Kr([N,i.encodeLocation?i.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?N:Kr([N,i.encodeLocation?i.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),l,r,a);return t&&_?j.createElement(No.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},_):_}function G3(){let s=tC(),t=V3(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},o={padding:"2px 4px",backgroundColor:a},l=null;return console.error("Error handled by React Router default ErrorBoundary:",s),l=j.createElement(j.Fragment,null,j.createElement("p",null,"💿 Hey developer 👋"),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:o},"ErrorBoundary")," or"," ",j.createElement("code",{style:o},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),r?j.createElement("pre",{style:i},r):null,l)}var H3=j.createElement(G3,null),Q3=class extends j.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){console.error("React Router caught the following error during render",s,t)}render(){return this.state.error!==void 0?j.createElement(la.Provider,{value:this.props.routeContext},j.createElement(c0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function K3({routeContext:s,match:t,children:r}){let a=j.useContext(Mi);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(la.Provider,{value:s},r)}function Y3(s,t=[],r=null,a=null){if(s==null){if(!r)return null;if(r.errors)s=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let i=s,o=r==null?void 0:r.errors;if(o!=null){let x=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);Ut(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,x+1))}let l=!1,d=-1;if(r)for(let x=0;x<i.length;x++){let p=i[x];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=x),p.route.id){let{loaderData:N,errors:I}=r,T=p.route.loader&&!N.hasOwnProperty(p.route.id)&&(!I||I[p.route.id]===void 0);if(p.route.lazy||T){l=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((x,p,N)=>{let I,T=!1,A=null,f=null;r&&(I=o&&p.route.id?o[p.route.id]:void 0,A=p.route.errorElement||H3,l&&(d<0&&N===0?(Gv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,f=null):d===N&&(T=!0,f=p.route.hydrateFallbackElement||null)));let L=t.concat(i.slice(0,N+1)),k=()=>{let _;return I?_=A:T?_=f:p.route.Component?_=j.createElement(p.route.Component,null):p.route.element?_=p.route.element:_=x,j.createElement(K3,{match:p,routeContext:{outlet:x,matches:L,isDataRoute:r!=null},children:_})};return r&&(p.route.ErrorBoundary||p.route.errorElement||N===0)?j.createElement(Q3,{location:r.location,revalidation:r.revalidation,component:A,error:I,children:k(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):k()},null)}function d0(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function X3(s){let t=j.useContext(Mi);return Ut(t,d0(s)),t}function J3(s){let t=j.useContext(mu);return Ut(t,d0(s)),t}function Z3(s){let t=j.useContext(la);return Ut(t,d0(s)),t}function u0(s){let t=Z3(s),r=t.matches[t.matches.length-1];return Ut(r.route.id,`${s} can only be used on routes that contain a unique "id"`),r.route.id}function eC(){return u0("useRouteId")}function tC(){var a;let s=j.useContext(c0),t=J3("useRouteError"),r=u0("useRouteError");return s!==void 0?s:(a=t.errors)==null?void 0:a[r]}function sC(){let{router:s}=X3("useNavigate"),t=u0("useNavigate"),r=j.useRef(!1);return qv(()=>{r.current=!0}),j.useCallback(async(i,o={})=>{Ar(r.current,$v),r.current&&(typeof i=="number"?s.navigate(i):await s.navigate(i,{fromRouteId:t,...o}))},[s,t])}var _g={};function Gv(s,t,r){!t&&!_g[s]&&(_g[s]=!0,Ar(!1,r))}j.memo(rC);function rC({routes:s,future:t,state:r}){return Wv(s,void 0,r,t)}function ot(s){Ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aC({basename:s="/",children:t=null,location:r,navigationType:a="POP",navigator:i,static:o=!1}){Ut(!wo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=s.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:l,navigator:i,static:o,future:{}}),[l,i,o]);typeof r=="string"&&(r=Ri(r));let{pathname:x="/",search:p="",hash:N="",state:I=null,key:T="default"}=r,A=j.useMemo(()=>{let f=ta(x,l);return f==null?null:{location:{pathname:f,search:p,hash:N,state:I,key:T},navigationType:a}},[l,x,p,N,I,T,a]);return Ar(A!=null,`<Router basename="${l}"> is not able to match the URL "${x}${p}${N}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:j.createElement(zr.Provider,{value:d},j.createElement(No.Provider,{children:t,value:A}))}function nC({children:s,location:t}){return W3(Fm(s),t)}function Fm(s,t=[]){let r=[];return j.Children.forEach(s,(a,i)=>{if(!j.isValidElement(a))return;let o=[...t,i];if(a.type===j.Fragment){r.push.apply(r,Fm(a.props.children,o));return}Ut(a.type===ot,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ut(!a.props.index||!a.props.children,"An index route cannot have child routes.");let l={id:a.props.id||o.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=Fm(a.props.children,o)),r.push(l)}),r}var Vc="get",Fc="application/x-www-form-urlencoded";function hu(s){return s!=null&&typeof s.tagName=="string"}function iC(s){return hu(s)&&s.tagName.toLowerCase()==="button"}function lC(s){return hu(s)&&s.tagName.toLowerCase()==="form"}function oC(s){return hu(s)&&s.tagName.toLowerCase()==="input"}function cC(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function dC(s,t){return s.button===0&&(!t||t==="_self")&&!cC(s)}var yc=null;function uC(){if(yc===null)try{new FormData(document.createElement("form"),0),yc=!1}catch{yc=!0}return yc}var xC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tx(s){return s!=null&&!xC.has(s)?(Ar(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fc}"`),null):s}function mC(s,t){let r,a,i,o,l;if(lC(s)){let d=s.getAttribute("action");a=d?ta(d,t):null,r=s.getAttribute("method")||Vc,i=Tx(s.getAttribute("enctype"))||Fc,o=new FormData(s)}else if(iC(s)||oC(s)&&(s.type==="submit"||s.type==="image")){let d=s.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=s.getAttribute("formaction")||d.getAttribute("action");if(a=x?ta(x,t):null,r=s.getAttribute("formmethod")||d.getAttribute("method")||Vc,i=Tx(s.getAttribute("formenctype"))||Tx(d.getAttribute("enctype"))||Fc,o=new FormData(d,s),!uC()){let{name:p,type:N,value:I}=s;if(N==="image"){let T=p?`${p}.`:"";o.append(`${T}x`,"0"),o.append(`${T}y`,"0")}else p&&o.append(p,I)}}else{if(hu(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Vc,a=null,i=Fc,l=s}return o&&i==="text/plain"&&(l=o,o=void 0),{action:a,method:r.toLowerCase(),encType:i,formData:o,body:l}}function x0(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}async function hC(s,t){if(s.id in t)return t[s.id];try{let r=await i3(()=>import(s.module),[]);return t[s.id]=r,r}catch(r){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pC(s){return s!=null&&typeof s.page=="string"}function fC(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function gC(s,t,r){let a=await Promise.all(s.map(async i=>{let o=t.routes[i.route.id];if(o){let l=await hC(o,r);return l.links?l.links():[]}return[]}));return vC(a.flat(1).filter(fC).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Pg(s,t,r,a,i,o){let l=(x,p)=>r[p]?x.route.id!==r[p].route.id:!0,d=(x,p)=>{var N;return r[p].pathname!==x.pathname||((N=r[p].route.path)==null?void 0:N.endsWith("*"))&&r[p].params["*"]!==x.params["*"]};return o==="assets"?t.filter((x,p)=>l(x,p)||d(x,p)):o==="data"?t.filter((x,p)=>{var I;let N=a.routes[x.route.id];if(!N||!N.hasLoader)return!1;if(l(x,p)||d(x,p))return!0;if(x.route.shouldRevalidate){let T=x.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((I=r[0])==null?void 0:I.params)||{},nextUrl:new URL(s,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function yC(s,t,{includeHydrateFallback:r}={}){return bC(s.map(a=>{let i=t.routes[a.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function bC(s){return[...new Set(s)]}function jC(s){let t={},r=Object.keys(s).sort();for(let a of r)t[a]=s[a];return t}function vC(s,t){let r=new Set,a=new Set(t);return s.reduce((i,o)=>{if(t&&!pC(o)&&o.as==="script"&&o.href&&a.has(o.href))return i;let d=JSON.stringify(jC(o));return r.has(d)||(r.add(d),i.push({key:d,link:o})),i},[])}function NC(s,t){let r=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return r.pathname==="/"?r.pathname="_root.data":t&&ta(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function Hv(){let s=j.useContext(Mi);return x0(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function wC(){let s=j.useContext(mu);return x0(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var m0=j.createContext(void 0);m0.displayName="FrameworkContext";function Qv(){let s=j.useContext(m0);return x0(s,"You must render this element inside a <HydratedRouter> element"),s}function kC(s,t){let r=j.useContext(m0),[a,i]=j.useState(!1),[o,l]=j.useState(!1),{onFocus:d,onBlur:x,onMouseEnter:p,onMouseLeave:N,onTouchStart:I}=t,T=j.useRef(null);j.useEffect(()=>{if(s==="render"&&l(!0),s==="viewport"){let L=_=>{_.forEach(z=>{l(z.isIntersecting)})},k=new IntersectionObserver(L,{threshold:.5});return T.current&&k.observe(T.current),()=>{k.disconnect()}}},[s]),j.useEffect(()=>{if(a){let L=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(L)}}},[a]);let A=()=>{i(!0)},f=()=>{i(!1),l(!1)};return r?s!=="intent"?[o,T,{}]:[o,T,{onFocus:ol(d,A),onBlur:ol(x,f),onMouseEnter:ol(p,A),onMouseLeave:ol(N,f),onTouchStart:ol(I,A)}]:[!1,T,{}]}function ol(s,t){return r=>{s&&s(r),r.defaultPrevented||t(r)}}function CC({page:s,...t}){let{router:r}=Hv(),a=j.useMemo(()=>Ov(r.routes,s,r.basename),[r.routes,s,r.basename]);return a?j.createElement(EC,{page:s,matches:a,...t}):null}function IC(s){let{manifest:t,routeModules:r}=Qv(),[a,i]=j.useState([]);return j.useEffect(()=>{let o=!1;return gC(s,t,r).then(l=>{o||i(l)}),()=>{o=!0}},[s,t,r]),a}function EC({page:s,matches:t,...r}){let a=Tn(),{manifest:i,routeModules:o}=Qv(),{basename:l}=Hv(),{loaderData:d,matches:x}=wC(),p=j.useMemo(()=>Pg(s,t,x,i,a,"data"),[s,t,x,i,a]),N=j.useMemo(()=>Pg(s,t,x,i,a,"assets"),[s,t,x,i,a]),I=j.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let f=new Set,L=!1;if(t.forEach(_=>{var M;let z=i.routes[_.route.id];!z||!z.hasLoader||(!p.some(Y=>Y.route.id===_.route.id)&&_.route.id in d&&((M=o[_.route.id])!=null&&M.shouldRevalidate)||z.hasClientLoader?L=!0:f.add(_.route.id))}),f.size===0)return[];let k=NC(s,l);return L&&f.size>0&&k.searchParams.set("_routes",t.filter(_=>f.has(_.route.id)).map(_=>_.route.id).join(",")),[k.pathname+k.search]},[l,d,a,i,p,t,s,o]),T=j.useMemo(()=>yC(N,i),[N,i]),A=IC(N);return j.createElement(j.Fragment,null,I.map(f=>j.createElement("link",{key:f,rel:"prefetch",as:"fetch",href:f,...r})),T.map(f=>j.createElement("link",{key:f,rel:"modulepreload",href:f,...r})),A.map(({key:f,link:L})=>j.createElement("link",{key:f,...L})))}function SC(...s){return t=>{s.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Kv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Kv&&(window.__reactRouterVersion="7.5.0")}catch{}function _C({basename:s,children:t,window:r}){let a=j.useRef();a.current==null&&(a.current=g3({window:r,v5Compat:!0}));let i=a.current,[o,l]=j.useState({action:i.action,location:i.location}),d=j.useCallback(x=>{j.startTransition(()=>l(x))},[l]);return j.useLayoutEffect(()=>i.listen(d),[i,d]),j.createElement(aC,{basename:s,children:t,location:o.location,navigationType:o.action,navigator:i})}var Yv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,h=j.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:i,reloadDocument:o,replace:l,state:d,target:x,to:p,preventScrollReset:N,viewTransition:I,...T},A){let{basename:f}=j.useContext(zr),L=typeof p=="string"&&Yv.test(p),k,_=!1;if(typeof p=="string"&&L&&(k=p,Kv))try{let F=new URL(window.location.href),V=p.startsWith("//")?new URL(F.protocol+p):new URL(p),Q=ta(V.pathname,f);V.origin===F.origin&&Q!=null?p=Q+V.search+V.hash:_=!0}catch{Ar(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=$3(p,{relative:i}),[M,Y,G]=kC(a,T),W=AC(p,{replace:l,state:d,target:x,preventScrollReset:N,relative:i,viewTransition:I});function R(F){t&&t(F),F.defaultPrevented||W(F)}let c=j.createElement("a",{...T,...G,href:k||z,onClick:_||o?t:R,ref:SC(A,Y),target:x,"data-discover":!L&&r==="render"?"true":void 0});return M&&!L?j.createElement(j.Fragment,null,c,j.createElement(CC,{page:z})):c});h.displayName="Link";var PC=j.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:i=!1,style:o,to:l,viewTransition:d,children:x,...p},N){let I=ko(l,{relative:p.relative}),T=Tn(),A=j.useContext(mu),{navigator:f,basename:L}=j.useContext(zr),k=A!=null&&LC(I)&&d===!0,_=f.encodeLocation?f.encodeLocation(I).pathname:I.pathname,z=T.pathname,M=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;r||(z=z.toLowerCase(),M=M?M.toLowerCase():null,_=_.toLowerCase()),M&&L&&(M=ta(M,L)||M);const Y=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let G=z===_||!i&&z.startsWith(_)&&z.charAt(Y)==="/",W=M!=null&&(M===_||!i&&M.startsWith(_)&&M.charAt(_.length)==="/"),R={isActive:G,isPending:W,isTransitioning:k},c=G?t:void 0,F;typeof a=="function"?F=a(R):F=[a,G?"active":null,W?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let V=typeof o=="function"?o(R):o;return j.createElement(h,{...p,"aria-current":c,className:F,ref:N,style:V,to:l,viewTransition:d},typeof x=="function"?x(R):x)});PC.displayName="NavLink";var TC=j.forwardRef(({discover:s="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:i,state:o,method:l=Vc,action:d,onSubmit:x,relative:p,preventScrollReset:N,viewTransition:I,...T},A)=>{let f=OC(),L=zC(d,{relative:p}),k=l.toLowerCase()==="get"?"get":"post",_=typeof d=="string"&&Yv.test(d),z=M=>{if(x&&x(M),M.defaultPrevented)return;M.preventDefault();let Y=M.nativeEvent.submitter,G=(Y==null?void 0:Y.getAttribute("formmethod"))||l;f(Y||M.currentTarget,{fetcherKey:t,method:G,navigate:r,replace:i,state:o,relative:p,preventScrollReset:N,viewTransition:I})};return j.createElement("form",{ref:A,method:k,action:L,onSubmit:a?x:z,...T,"data-discover":!_&&s==="render"?"true":void 0})});TC.displayName="Form";function DC(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xv(s){let t=j.useContext(Mi);return Ut(t,DC(s)),t}function AC(s,{target:t,replace:r,state:a,preventScrollReset:i,relative:o,viewTransition:l}={}){let d=ut(),x=Tn(),p=ko(s,{relative:o});return j.useCallback(N=>{if(dC(N,t)){N.preventDefault();let I=r!==void 0?r:so(x)===so(p);d(s,{replace:I,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[x,d,p,r,a,t,s,i,o,l])}var RC=0,MC=()=>`__${String(++RC)}__`;function OC(){let{router:s}=Xv("useSubmit"),{basename:t}=j.useContext(zr),r=eC();return j.useCallback(async(a,i={})=>{let{action:o,method:l,encType:d,formData:x,body:p}=mC(a,t);if(i.navigate===!1){let N=i.fetcherKey||MC();await s.fetch(N,r,i.action||o,{preventScrollReset:i.preventScrollReset,formData:x,body:p,formMethod:i.method||l,formEncType:i.encType||d,flushSync:i.flushSync})}else await s.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:x,body:p,formMethod:i.method||l,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[s,t,r])}function zC(s,{relative:t}={}){let{basename:r}=j.useContext(zr),a=j.useContext(la);Ut(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),o={...ko(s||".",{relative:t})},l=Tn();if(s==null){o.search=l.search;let d=new URLSearchParams(o.search),x=d.getAll("index");if(x.some(N=>N==="")){d.delete("index"),x.filter(I=>I).forEach(I=>d.append("index",I));let N=d.toString();o.search=N?`?${N}`:""}}return(!s||s===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:Kr([r,o.pathname])),so(o)}function LC(s,t={}){let r=j.useContext(Bv);Ut(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Xv("useViewTransitionState"),i=ko(s,{relative:t.relative});if(!r.isTransitioning)return!1;let o=ta(r.currentLocation.pathname,a)||r.currentLocation.pathname,l=ta(r.nextLocation.pathname,a)||r.nextLocation.pathname;return vd(i.pathname,l)!=null||vd(i.pathname,o)!=null}new TextEncoder;var Jv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Tg=Ea.createContext&&Ea.createContext(Jv),VC=["attr","size","title"];function FC(s,t){if(s==null)return{};var r=UC(s,t),a,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);for(i=0;i<o.length;i++)a=o[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function UC(s,t){if(s==null)return{};var r={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(t.indexOf(a)>=0)continue;r[a]=s[a]}return r}function Nd(){return Nd=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Nd.apply(this,arguments)}function Dg(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),r.push.apply(r,a)}return r}function wd(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dg(Object(r),!0).forEach(function(a){BC(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Dg(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function BC(s,t,r){return t=$C(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function $C(s){var t=qC(s,"string");return typeof t=="symbol"?t:t+""}function qC(s,t){if(typeof s!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function Zv(s){return s&&s.map((t,r)=>Ea.createElement(t.tag,wd({key:r},t.attr),Zv(t.child)))}function st(s){return t=>Ea.createElement(WC,Nd({attr:wd({},s.attr)},t),Zv(s.child))}function WC(s){var t=r=>{var{attr:a,size:i,title:o}=s,l=FC(s,VC),d=i||r.size||"1em",x;return r.className&&(x=r.className),s.className&&(x=(x?x+" ":"")+s.className),Ea.createElement("svg",Nd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,l,{className:x,style:wd(wd({color:s.color||r.color},r.style),s.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),o&&Ea.createElement("title",null,o),s.children)};return Tg!==void 0?Ea.createElement(Tg.Consumer,null,r=>t(r)):t(Jv)}function h0(s){return st({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(s)}function GC(s){return st({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(s)}function HC(s){return st({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(s)}function Ag(s){return st({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64V160h160v256zm224 0H288V160h160v256z"},child:[]}]})(s)}function p0(s){return st({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(s)}function Rg(s){return st({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(s)}function rt(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(s)}function eN(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(s)}function QC(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(s)}function Be(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(s)}function bc(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(s)}function kd(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(s)}function Pl(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(s)}function f0(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(s)}function KC(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(s)}function cl(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"},child:[]}]})(s)}function ws(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(s)}function YC(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(s)}function Fe(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(s)}function Ee(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"},child:[]},{tag:"line",attr:{x1:"7",y1:"2",x2:"7",y2:"22"},child:[]},{tag:"line",attr:{x1:"17",y1:"2",x2:"17",y2:"22"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"2",y1:"7",x2:"7",y2:"7"},child:[]},{tag:"line",attr:{x1:"2",y1:"17",x2:"7",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"17",x2:"22",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"7",x2:"22",y2:"7"},child:[]}]})(s)}function $e(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(s)}function pu(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(s)}function It(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(s)}function qe(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(s)}function tN(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(s)}function ht(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(s)}function XC(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(s)}function jt(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(s)}function Ir(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(s)}function Et(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(s)}function ge(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 18V5l12-2v13"},child:[]},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"16",r:"3"},child:[]}]})(s)}function We(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 19l7-7 3 3-7 7-3-3z"},child:[]},{tag:"path",attr:{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"},child:[]},{tag:"path",attr:{d:"M2 2l7.586 7.586"},child:[]},{tag:"circle",attr:{cx:"11",cy:"11",r:"2"},child:[]}]})(s)}function Ge(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polygon",attr:{points:"10 8 16 12 10 16 10 8"},child:[]}]})(s)}function Mg(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(s)}function sN(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(s)}function He(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(s)}function ro(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(s)}function ct(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(s)}function JC(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(s)}function Um(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(s)}function Z(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"15",rx:"2",ry:"2"},child:[]},{tag:"polyline",attr:{points:"17 2 12 7 7 2"},child:[]}]})(s)}function Og(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(s)}function Me(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(s)}function Tl(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(s)}function Se(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(s)}function ae(s){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(s)}const ZC=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=function(s){const t=[];let r=0;for(let a=0;a<s.length;a++){let i=s.charCodeAt(a);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=i&63|128):(i&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(i=65536+((i&1023)<<10)+(s.charCodeAt(++a)&1023),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=i&63|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=i&63|128)}return t},eI=function(s){const t=[];let r=0,a=0;for(;r<s.length;){const i=s[r++];if(i<128)t[a++]=String.fromCharCode(i);else if(i>191&&i<224){const o=s[r++];t[a++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=s[r++],l=s[r++],d=s[r++],x=((i&7)<<18|(o&63)<<12|(l&63)<<6|d&63)-65536;t[a++]=String.fromCharCode(55296+(x>>10)),t[a++]=String.fromCharCode(56320+(x&1023))}else{const o=s[r++],l=s[r++];t[a++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return t.join("")},aN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let i=0;i<s.length;i+=3){const o=s[i],l=i+1<s.length,d=l?s[i+1]:0,x=i+2<s.length,p=x?s[i+2]:0,N=o>>2,I=(o&3)<<4|d>>4;let T=(d&15)<<2|p>>6,A=p&63;x||(A=64,l||(T=64)),a.push(r[N],r[I],r[T],r[A])}return a.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(rN(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):eI(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let i=0;i<s.length;){const o=r[s.charAt(i++)],d=i<s.length?r[s.charAt(i)]:0;++i;const p=i<s.length?r[s.charAt(i)]:64;++i;const I=i<s.length?r[s.charAt(i)]:64;if(++i,o==null||d==null||p==null||I==null)throw new tI;const T=o<<2|d>>4;if(a.push(T),p!==64){const A=d<<4&240|p>>2;if(a.push(A),I!==64){const f=p<<6&192|I;a.push(f)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class tI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sI=function(s){const t=rN(s);return aN.encodeByteArray(t,!0)},Cd=function(s){return sI(s).replace(/\./g,"")},nN=function(s){try{return aN.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=()=>rI().__FIREBASE_DEFAULTS__,nI=()=>{if(typeof process>"u"||typeof process.env>"u")return;const s={}.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},iI=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&nN(s[1]);return t&&JSON.parse(t)},fu=()=>{try{return ZC()||aI()||nI()||iI()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},iN=s=>{var t,r;return(r=(t=fu())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[s]},lN=s=>{const t=iN(s);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),a]:[t.substring(0,r),a]},oN=()=>{var s;return(s=fu())===null||s===void 0?void 0:s.config},cN=s=>{var t;return(t=fu())===null||t===void 0?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,a)=>{r?this.reject(r):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},a=t||"demo-project",i=s.iat||0,o=s.sub||s.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},s),d="";return[Cd(JSON.stringify(r)),Cd(JSON.stringify(l)),d].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cs())}function cI(){var s;const t=(s=fu())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uN(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function uI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xI(){const s=Cs();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function mI(){return!cI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xN(){try{return typeof indexedDB=="object"}catch{return!1}}function mN(){return new Promise((s,t)=>{try{let r=!0;const a="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(a);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(a),s(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(r){t(r)}})}function hI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="FirebaseError";class lr extends Error{constructor(t,r,a){super(r),this.code=t,this.customData=a,this.name=pI,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dn.prototype.create)}}class Dn{constructor(t,r,a){this.service=t,this.serviceName=r,this.errors=a}create(t,...r){const a=r[0]||{},i=`${this.service}/${t}`,o=this.errors[t],l=o?fI(o,a):"Error",d=`${this.serviceName}: ${l} (${i}).`;return new lr(i,d,a)}}function fI(s,t){return s.replace(gI,(r,a)=>{const i=t[a];return i!=null?String(i):`<${a}?>`})}const gI=/\{\$([^}]+)}/g;function yI(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Ba(s,t){if(s===t)return!0;const r=Object.keys(s),a=Object.keys(t);for(const i of r){if(!a.includes(i))return!1;const o=s[i],l=t[i];if(zg(o)&&zg(l)){if(!Ba(o,l))return!1}else if(o!==l)return!1}for(const i of a)if(!r.includes(i))return!1;return!0}function zg(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(s){const t=[];for(const[r,a]of Object.entries(s))Array.isArray(a)?a.forEach(i=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function pl(s){const t={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[i,o]=a.split("=");t[decodeURIComponent(i)]=decodeURIComponent(o)}}),t}function fl(s){const t=s.indexOf("?");if(!t)return"";const r=s.indexOf("#",t);return s.substring(t,r>0?r:void 0)}function bI(s,t){const r=new jI(s,t);return r.subscribe.bind(r)}class jI{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,a){let i;if(t===void 0&&r===void 0&&a===void 0)throw new Error("Missing Observer.");vI(t,["next","error","complete"])?i=t:i={next:t,error:r,complete:a},i.next===void 0&&(i.next=Dx),i.error===void 0&&(i.error=Dx),i.complete===void 0&&(i.complete=Dx);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vI(s,t){if(typeof s!="object"||s===null)return!1;for(const r of t)if(r in s&&typeof s[r]=="function")return!0;return!1}function Dx(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=1e3,wI=2,kI=4*60*60*1e3,CI=.5;function Lg(s,t=NI,r=wI){const a=t*Math.pow(r,s),i=Math.round(CI*a*(Math.random()-.5)*2);return Math.min(kI,a+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(s){return s&&s._delegate?s._delegate:s}class ir{constructor(t,r,a){this.name=t,this.instanceFactory=r,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const a=new lI;if(this.instancesDeferred.set(r,a),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&a.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const a=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(r=t==null?void 0:t.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(SI(t))try{this.getOrInitializeService({instanceIdentifier:on})}catch{}for(const[r,a]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:i});a.resolve(o)}catch{}}}}clearInstance(t=on){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=on){return this.instances.has(t)}getOptions(t=on){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:a,options:r});for(const[o,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);a===d&&l.resolve(i)}return i}onInit(t,r){var a;const i=this.normalizeInstanceIdentifier(r),o=(a=this.onInitCallbacks.get(i))!==null&&a!==void 0?a:new Set;o.add(t),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&t(l,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,r){const a=this.onInitCallbacks.get(r);if(a)for(const i of a)try{i(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:EI(t),options:r}),this.instances.set(t,a),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=on){return this.component?this.component.multipleInstances?t:on:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EI(s){return s===on?void 0:s}function SI(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new II(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(xt||(xt={}));const PI={debug:xt.DEBUG,verbose:xt.VERBOSE,info:xt.INFO,warn:xt.WARN,error:xt.ERROR,silent:xt.SILENT},TI=xt.INFO,DI={[xt.DEBUG]:"log",[xt.VERBOSE]:"log",[xt.INFO]:"info",[xt.WARN]:"warn",[xt.ERROR]:"error"},AI=(s,t,...r)=>{if(t<s.logLevel)return;const a=new Date().toISOString(),i=DI[t];if(i)console[i](`[${a}]  ${s.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class gu{constructor(t){this.name=t,this._logLevel=TI,this._logHandler=AI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in xt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?PI[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,xt.DEBUG,...t),this._logHandler(this,xt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,xt.VERBOSE,...t),this._logHandler(this,xt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,xt.INFO,...t),this._logHandler(this,xt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,xt.WARN,...t),this._logHandler(this,xt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,xt.ERROR,...t),this._logHandler(this,xt.ERROR,...t)}}const RI=(s,t)=>t.some(r=>s instanceof r);let Vg,Fg;function MI(){return Vg||(Vg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OI(){return Fg||(Fg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hN=new WeakMap,Bm=new WeakMap,pN=new WeakMap,Ax=new WeakMap,g0=new WeakMap;function zI(s){const t=new Promise((r,a)=>{const i=()=>{s.removeEventListener("success",o),s.removeEventListener("error",l)},o=()=>{r(Oa(s.result)),i()},l=()=>{a(s.error),i()};s.addEventListener("success",o),s.addEventListener("error",l)});return t.then(r=>{r instanceof IDBCursor&&hN.set(r,s)}).catch(()=>{}),g0.set(t,s),t}function LI(s){if(Bm.has(s))return;const t=new Promise((r,a)=>{const i=()=>{s.removeEventListener("complete",o),s.removeEventListener("error",l),s.removeEventListener("abort",l)},o=()=>{r(),i()},l=()=>{a(s.error||new DOMException("AbortError","AbortError")),i()};s.addEventListener("complete",o),s.addEventListener("error",l),s.addEventListener("abort",l)});Bm.set(s,t)}let $m={get(s,t,r){if(s instanceof IDBTransaction){if(t==="done")return Bm.get(s);if(t==="objectStoreNames")return s.objectStoreNames||pN.get(s);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Oa(s[t])},set(s,t,r){return s[t]=r,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function VI(s){$m=s($m)}function FI(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const a=s.call(Rx(this),t,...r);return pN.set(a,t.sort?t.sort():[t]),Oa(a)}:OI().includes(s)?function(...t){return s.apply(Rx(this),t),Oa(hN.get(this))}:function(...t){return Oa(s.apply(Rx(this),t))}}function UI(s){return typeof s=="function"?FI(s):(s instanceof IDBTransaction&&LI(s),RI(s,MI())?new Proxy(s,$m):s)}function Oa(s){if(s instanceof IDBRequest)return zI(s);if(Ax.has(s))return Ax.get(s);const t=UI(s);return t!==s&&(Ax.set(s,t),g0.set(t,s)),t}const Rx=s=>g0.get(s);function fN(s,t,{blocked:r,upgrade:a,blocking:i,terminated:o}={}){const l=indexedDB.open(s,t),d=Oa(l);return a&&l.addEventListener("upgradeneeded",x=>{a(Oa(l.result),x.oldVersion,x.newVersion,Oa(l.transaction),x)}),r&&l.addEventListener("blocked",x=>r(x.oldVersion,x.newVersion,x)),d.then(x=>{o&&x.addEventListener("close",()=>o()),i&&x.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const BI=["get","getKey","getAll","getAllKeys","count"],$I=["put","add","delete","clear"],Mx=new Map;function Ug(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Mx.get(t))return Mx.get(t);const r=t.replace(/FromIndex$/,""),a=t!==r,i=$I.includes(r);if(!(r in(a?IDBIndex:IDBObjectStore).prototype)||!(i||BI.includes(r)))return;const o=async function(l,...d){const x=this.transaction(l,i?"readwrite":"readonly");let p=x.store;return a&&(p=p.index(d.shift())),(await Promise.all([p[r](...d),i&&x.done]))[0]};return Mx.set(t,o),o}VI(s=>({...s,get:(t,r,a)=>Ug(t,r)||s.get(t,r,a),has:(t,r)=>!!Ug(t,r)||s.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(WI(r)){const a=r.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(r=>r).join(" ")}}function WI(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const qm="@firebase/app",Bg="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=new gu("@firebase/app"),GI="@firebase/app-compat",HI="@firebase/analytics-compat",QI="@firebase/analytics",KI="@firebase/app-check-compat",YI="@firebase/app-check",XI="@firebase/auth",JI="@firebase/auth-compat",ZI="@firebase/database",eE="@firebase/data-connect",tE="@firebase/database-compat",sE="@firebase/functions",rE="@firebase/functions-compat",aE="@firebase/installations",nE="@firebase/installations-compat",iE="@firebase/messaging",lE="@firebase/messaging-compat",oE="@firebase/performance",cE="@firebase/performance-compat",dE="@firebase/remote-config",uE="@firebase/remote-config-compat",xE="@firebase/storage",mE="@firebase/storage-compat",hE="@firebase/firestore",pE="@firebase/vertexai",fE="@firebase/firestore-compat",gE="firebase",yE="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="[DEFAULT]",bE={[qm]:"fire-core",[GI]:"fire-core-compat",[QI]:"fire-analytics",[HI]:"fire-analytics-compat",[YI]:"fire-app-check",[KI]:"fire-app-check-compat",[XI]:"fire-auth",[JI]:"fire-auth-compat",[ZI]:"fire-rtdb",[eE]:"fire-data-connect",[tE]:"fire-rtdb-compat",[sE]:"fire-fn",[rE]:"fire-fn-compat",[aE]:"fire-iid",[nE]:"fire-iid-compat",[iE]:"fire-fcm",[lE]:"fire-fcm-compat",[oE]:"fire-perf",[cE]:"fire-perf-compat",[dE]:"fire-rc",[uE]:"fire-rc-compat",[xE]:"fire-gcs",[mE]:"fire-gcs-compat",[hE]:"fire-fst",[fE]:"fire-fst-compat",[pE]:"fire-vertex","fire-js":"fire-js",[gE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new Map,jE=new Map,Gm=new Map;function $g(s,t){try{s.container.addComponent(t)}catch(r){sa.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,r)}}function yr(s){const t=s.name;if(Gm.has(t))return sa.debug(`There were multiple attempts to register component ${t}.`),!1;Gm.set(t,s);for(const r of Id.values())$g(r,s);for(const r of jE.values())$g(r,s);return!0}function Ja(s,t){const r=s.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),s.container.getProvider(t)}function qs(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},za=new Dn("app","Firebase",vE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(t,r,a){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw za.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An=yE;function gN(s,t={}){let r=s;typeof t!="object"&&(t={name:t});const a=Object.assign({name:Wm,automaticDataCollectionEnabled:!1},t),i=a.name;if(typeof i!="string"||!i)throw za.create("bad-app-name",{appName:String(i)});if(r||(r=oN()),!r)throw za.create("no-options");const o=Id.get(i);if(o){if(Ba(r,o.options)&&Ba(a,o.config))return o;throw za.create("duplicate-app",{appName:i})}const l=new _I(i);for(const x of Gm.values())l.addComponent(x);const d=new NE(r,a,l);return Id.set(i,d),d}function yu(s=Wm){const t=Id.get(s);if(!t&&s===Wm&&oN())return gN();if(!t)throw za.create("no-app",{appName:s});return t}function Fs(s,t,r){var a;let i=(a=bE[s])!==null&&a!==void 0?a:s;r&&(i+=`-${r}`);const o=i.match(/\s|\//),l=t.match(/\s|\//);if(o||l){const d=[`Unable to register library "${i}" with version "${t}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&d.push("and"),l&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),sa.warn(d.join(" "));return}yr(new ir(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="firebase-heartbeat-database",kE=1,ao="firebase-heartbeat-store";let Ox=null;function yN(){return Ox||(Ox=fN(wE,kE,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(ao)}catch(r){console.warn(r)}}}}).catch(s=>{throw za.create("idb-open",{originalErrorMessage:s.message})})),Ox}async function CE(s){try{const r=(await yN()).transaction(ao),a=await r.objectStore(ao).get(bN(s));return await r.done,a}catch(t){if(t instanceof lr)sa.warn(t.message);else{const r=za.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});sa.warn(r.message)}}}async function qg(s,t){try{const a=(await yN()).transaction(ao,"readwrite");await a.objectStore(ao).put(t,bN(s)),await a.done}catch(r){if(r instanceof lr)sa.warn(r.message);else{const a=za.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});sa.warn(a.message)}}}function bN(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=1024,EE=30;class SE{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new PE(r),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Wg();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>EE){const l=TE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){sa.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Wg(),{heartbeatsToSend:a,unsentEntries:i}=_E(this._heartbeatsCache.heartbeats),o=Cd(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return sa.warn(r),""}}}function Wg(){return new Date().toISOString().substring(0,10)}function _E(s,t=IE){const r=[];let a=s.slice();for(const i of s){const o=r.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),Gg(r)>t){o.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),Gg(r)>t){r.pop();break}a=a.slice(1)}return{heartbeatsToSend:r,unsentEntries:a}}class PE{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xN()?mN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await CE(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return qg(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return qg(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Gg(s){return Cd(JSON.stringify({version:2,heartbeats:s})).length}function TE(s){if(s.length===0)return-1;let t=0,r=s[0].date;for(let a=1;a<s.length;a++)s[a].date<r&&(r=s[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(s){yr(new ir("platform-logger",t=>new qI(t),"PRIVATE")),yr(new ir("heartbeat",t=>new SE(t),"PRIVATE")),Fs(qm,Bg,s),Fs(qm,Bg,"esm2017"),Fs("fire-js","")}DE("");var AE="firebase",RE="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fs(AE,RE,"app");const jN="@firebase/installations",y0="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=1e4,NN=`w:${y0}`,wN="FIS_v2",ME="https://firebaseinstallations.googleapis.com/v1",OE=60*60*1e3,zE="installations",LE="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Nn=new Dn(zE,LE,VE);function kN(s){return s instanceof lr&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN({projectId:s}){return`${ME}/projects/${s}/installations`}function IN(s){return{token:s.token,requestStatus:2,expiresIn:UE(s.expiresIn),creationTime:Date.now()}}async function EN(s,t){const a=(await t.json()).error;return Nn.create("request-failed",{requestName:s,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function SN({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function FE(s,{refreshToken:t}){const r=SN(s);return r.append("Authorization",BE(t)),r}async function _N(s){const t=await s();return t.status>=500&&t.status<600?s():t}function UE(s){return Number(s.replace("s","000"))}function BE(s){return`${wN} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $E({appConfig:s,heartbeatServiceProvider:t},{fid:r}){const a=CN(s),i=SN(s),o=t.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&i.append("x-firebase-client",p)}const l={fid:r,authVersion:wN,appId:s.appId,sdkVersion:NN},d={method:"POST",headers:i,body:JSON.stringify(l)},x=await _N(()=>fetch(a,d));if(x.ok){const p=await x.json();return{fid:p.fid||r,registrationStatus:2,refreshToken:p.refreshToken,authToken:IN(p.authToken)}}else throw await EN("Create Installation",x)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(s){return new Promise(t=>{setTimeout(t,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=/^[cdef][\w-]{21}$/,Hm="";function GE(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const r=HE(s);return WE.test(r)?r:Hm}catch{return Hm}}function HE(s){return qE(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=new Map;function DN(s,t){const r=bu(s);AN(r,t),QE(r,t)}function AN(s,t){const r=TN.get(s);if(r)for(const a of r)a(t)}function QE(s,t){const r=KE();r&&r.postMessage({key:s,fid:t}),YE()}let xn=null;function KE(){return!xn&&"BroadcastChannel"in self&&(xn=new BroadcastChannel("[Firebase] FID Change"),xn.onmessage=s=>{AN(s.data.key,s.data.fid)}),xn}function YE(){TN.size===0&&xn&&(xn.close(),xn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="firebase-installations-database",JE=1,wn="firebase-installations-store";let zx=null;function b0(){return zx||(zx=fN(XE,JE,{upgrade:(s,t)=>{switch(t){case 0:s.createObjectStore(wn)}}})),zx}async function Ed(s,t){const r=bu(s),i=(await b0()).transaction(wn,"readwrite"),o=i.objectStore(wn),l=await o.get(r);return await o.put(t,r),await i.done,(!l||l.fid!==t.fid)&&DN(s,t.fid),t}async function RN(s){const t=bu(s),a=(await b0()).transaction(wn,"readwrite");await a.objectStore(wn).delete(t),await a.done}async function ju(s,t){const r=bu(s),i=(await b0()).transaction(wn,"readwrite"),o=i.objectStore(wn),l=await o.get(r),d=t(l);return d===void 0?await o.delete(r):await o.put(d,r),await i.done,d&&(!l||l.fid!==d.fid)&&DN(s,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j0(s){let t;const r=await ju(s.appConfig,a=>{const i=ZE(a),o=eS(s,i);return t=o.registrationPromise,o.installationEntry});return r.fid===Hm?{installationEntry:await t}:{installationEntry:r,registrationPromise:t}}function ZE(s){const t=s||{fid:GE(),registrationStatus:0};return MN(t)}function eS(s,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Nn.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},a=tS(s,r);return{installationEntry:r,registrationPromise:a}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:sS(s)}:{installationEntry:t}}async function tS(s,t){try{const r=await $E(s,t);return Ed(s.appConfig,r)}catch(r){throw kN(r)&&r.customData.serverCode===409?await RN(s.appConfig):await Ed(s.appConfig,{fid:t.fid,registrationStatus:0}),r}}async function sS(s){let t=await Hg(s.appConfig);for(;t.registrationStatus===1;)await PN(100),t=await Hg(s.appConfig);if(t.registrationStatus===0){const{installationEntry:r,registrationPromise:a}=await j0(s);return a||r}return t}function Hg(s){return ju(s,t=>{if(!t)throw Nn.create("installation-not-found");return MN(t)})}function MN(s){return rS(s)?{fid:s.fid,registrationStatus:0}:s}function rS(s){return s.registrationStatus===1&&s.registrationTime+vN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aS({appConfig:s,heartbeatServiceProvider:t},r){const a=nS(s,r),i=FE(s,r),o=t.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&i.append("x-firebase-client",p)}const l={installation:{sdkVersion:NN,appId:s.appId}},d={method:"POST",headers:i,body:JSON.stringify(l)},x=await _N(()=>fetch(a,d));if(x.ok){const p=await x.json();return IN(p)}else throw await EN("Generate Auth Token",x)}function nS(s,{fid:t}){return`${CN(s)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v0(s,t=!1){let r;const a=await ju(s.appConfig,o=>{if(!ON(o))throw Nn.create("not-registered");const l=o.authToken;if(!t&&oS(l))return o;if(l.requestStatus===1)return r=iS(s,t),o;{if(!navigator.onLine)throw Nn.create("app-offline");const d=dS(o);return r=lS(s,d),d}});return r?await r:a.authToken}async function iS(s,t){let r=await Qg(s.appConfig);for(;r.authToken.requestStatus===1;)await PN(100),r=await Qg(s.appConfig);const a=r.authToken;return a.requestStatus===0?v0(s,t):a}function Qg(s){return ju(s,t=>{if(!ON(t))throw Nn.create("not-registered");const r=t.authToken;return uS(r)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function lS(s,t){try{const r=await aS(s,t),a=Object.assign(Object.assign({},t),{authToken:r});return await Ed(s.appConfig,a),r}catch(r){if(kN(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await RN(s.appConfig);else{const a=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Ed(s.appConfig,a)}throw r}}function ON(s){return s!==void 0&&s.registrationStatus===2}function oS(s){return s.requestStatus===2&&!cS(s)}function cS(s){const t=Date.now();return t<s.creationTime||s.creationTime+s.expiresIn<t+OE}function dS(s){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:t})}function uS(s){return s.requestStatus===1&&s.requestTime+vN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xS(s){const t=s,{installationEntry:r,registrationPromise:a}=await j0(t);return a?a.catch(console.error):v0(t).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mS(s,t=!1){const r=s;return await hS(r),(await v0(r,t)).token}async function hS(s){const{registrationPromise:t}=await j0(s);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(s){if(!s||!s.options)throw Lx("App Configuration");if(!s.name)throw Lx("App Name");const t=["projectId","apiKey","appId"];for(const r of t)if(!s.options[r])throw Lx(r);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function Lx(s){return Nn.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="installations",fS="installations-internal",gS=s=>{const t=s.getProvider("app").getImmediate(),r=pS(t),a=Ja(t,"heartbeat");return{app:t,appConfig:r,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},yS=s=>{const t=s.getProvider("app").getImmediate(),r=Ja(t,zN).getImmediate();return{getId:()=>xS(r),getToken:i=>mS(r,i)}};function bS(){yr(new ir(zN,gS,"PUBLIC")),yr(new ir(fS,yS,"PRIVATE"))}bS();Fs(jN,y0);Fs(jN,y0,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="analytics",jS="firebase_id",vS="origin",NS=60*1e3,wS="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",N0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new gu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Qs=new Dn("analytics","Analytics",kS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(s){if(!s.startsWith(N0)){const t=Qs.create("invalid-gtag-resource",{gtagURL:s});return Us.warn(t.message),""}return s}function LN(s){return Promise.all(s.map(t=>t.catch(r=>r)))}function IS(s,t){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(s,t)),r}function ES(s,t){const r=IS("firebase-js-sdk-policy",{createScriptURL:CS}),a=document.createElement("script"),i=`${N0}?l=${s}&id=${t}`;a.src=r?r==null?void 0:r.createScriptURL(i):i,a.async=!0,document.head.appendChild(a)}function SS(s){let t=[];return Array.isArray(window[s])?t=window[s]:window[s]=t,t}async function _S(s,t,r,a,i,o){const l=a[i];try{if(l)await t[l];else{const x=(await LN(r)).find(p=>p.measurementId===i);x&&await t[x.appId]}}catch(d){Us.error(d)}s("config",i,o)}async function PS(s,t,r,a,i){try{let o=[];if(i&&i.send_to){let l=i.send_to;Array.isArray(l)||(l=[l]);const d=await LN(r);for(const x of l){const p=d.find(I=>I.measurementId===x),N=p&&t[p.appId];if(N)o.push(N);else{o=[];break}}}o.length===0&&(o=Object.values(t)),await Promise.all(o),s("event",a,i||{})}catch(o){Us.error(o)}}function TS(s,t,r,a){async function i(o,...l){try{if(o==="event"){const[d,x]=l;await PS(s,t,r,d,x)}else if(o==="config"){const[d,x]=l;await _S(s,t,r,a,d,x)}else if(o==="consent"){const[d,x]=l;s("consent",d,x)}else if(o==="get"){const[d,x,p]=l;s("get",d,x,p)}else if(o==="set"){const[d]=l;s("set",d)}else s(o,...l)}catch(d){Us.error(d)}}return i}function DS(s,t,r,a,i){let o=function(...l){window[a].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=TS(o,s,t,r),{gtagCore:o,wrappedGtag:window[i]}}function AS(s){const t=window.document.getElementsByTagName("script");for(const r of Object.values(t))if(r.src&&r.src.includes(N0)&&r.src.includes(s))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=30,MS=1e3;class OS{constructor(t={},r=MS){this.throttleMetadata=t,this.intervalMillis=r}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,r){this.throttleMetadata[t]=r}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const VN=new OS;function zS(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function LS(s){var t;const{appId:r,apiKey:a}=s,i={method:"GET",headers:zS(a)},o=wS.replace("{app-id}",r),l=await fetch(o,i);if(l.status!==200&&l.status!==304){let d="";try{const x=await l.json();!((t=x.error)===null||t===void 0)&&t.message&&(d=x.error.message)}catch{}throw Qs.create("config-fetch-failed",{httpStatus:l.status,responseMessage:d})}return l.json()}async function VS(s,t=VN,r){const{appId:a,apiKey:i,measurementId:o}=s.options;if(!a)throw Qs.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:a};throw Qs.create("no-api-key")}const l=t.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new BS;return setTimeout(async()=>{d.abort()},r!==void 0?r:NS),FN({appId:a,apiKey:i,measurementId:o},l,d,t)}async function FN(s,{throttleEndTimeMillis:t,backoffCount:r},a,i=VN){var o;const{appId:l,measurementId:d}=s;try{await FS(a,t)}catch(x){if(d)return Us.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${x==null?void 0:x.message}]`),{appId:l,measurementId:d};throw x}try{const x=await LS(s);return i.deleteThrottleMetadata(l),x}catch(x){const p=x;if(!US(p)){if(i.deleteThrottleMetadata(l),d)return Us.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:l,measurementId:d};throw x}const N=Number((o=p==null?void 0:p.customData)===null||o===void 0?void 0:o.httpStatus)===503?Lg(r,i.intervalMillis,RS):Lg(r,i.intervalMillis),I={throttleEndTimeMillis:Date.now()+N,backoffCount:r+1};return i.setThrottleMetadata(l,I),Us.debug(`Calling attemptFetch again in ${N} millis`),FN(s,I,a,i)}}function FS(s,t){return new Promise((r,a)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(r,i);s.addEventListener(()=>{clearTimeout(o),a(Qs.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function US(s){if(!(s instanceof lr)||!s.customData)return!1;const t=Number(s.customData.httpStatus);return t===429||t===500||t===503||t===504}class BS{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function $S(s,t,r,a,i){if(i&&i.global){s("event",r,a);return}else{const o=await t,l=Object.assign(Object.assign({},a),{send_to:o});s("event",r,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(){if(xN())try{await mN()}catch(s){return Us.warn(Qs.create("indexeddb-unavailable",{errorInfo:s==null?void 0:s.toString()}).message),!1}else return Us.warn(Qs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function WS(s,t,r,a,i,o,l){var d;const x=VS(s);x.then(A=>{r[A.measurementId]=A.appId,s.options.measurementId&&A.measurementId!==s.options.measurementId&&Us.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${A.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(A=>Us.error(A)),t.push(x);const p=qS().then(A=>{if(A)return a.getId()}),[N,I]=await Promise.all([x,p]);AS(o)||ES(o,N.measurementId),i("js",new Date);const T=(d=l==null?void 0:l.config)!==null&&d!==void 0?d:{};return T[vS]="firebase",T.update=!0,I!=null&&(T[jS]=I),i("config",N.measurementId,T),N.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(t){this.app=t}_delete(){return delete Dl[this.app.options.appId],Promise.resolve()}}let Dl={},Kg=[];const Yg={};let Vx="dataLayer",HS="gtag",Xg,UN,Jg=!1;function QS(){const s=[];if(uN()&&s.push("This is a browser extension environment."),hI()||s.push("Cookies are not available."),s.length>0){const t=s.map((a,i)=>`(${i+1}) ${a}`).join(" "),r=Qs.create("invalid-analytics-context",{errorInfo:t});Us.warn(r.message)}}function KS(s,t,r){QS();const a=s.options.appId;if(!a)throw Qs.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)Us.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Qs.create("no-api-key");if(Dl[a]!=null)throw Qs.create("already-exists",{id:a});if(!Jg){SS(Vx);const{wrappedGtag:o,gtagCore:l}=DS(Dl,Kg,Yg,Vx,HS);UN=o,Xg=l,Jg=!0}return Dl[a]=WS(s,Kg,Yg,t,Xg,Vx,r),new GS(s)}function YS(s=yu()){s=Tt(s);const t=Ja(s,Sd);return t.isInitialized()?t.getImmediate():XS(s)}function XS(s,t={}){const r=Ja(s,Sd);if(r.isInitialized()){const i=r.getImmediate();if(Ba(t,r.getOptions()))return i;throw Qs.create("already-initialized")}return r.initialize({options:t})}function JS(s,t,r,a){s=Tt(s),$S(UN,Dl[s.app.options.appId],t,r,a).catch(i=>Us.error(i))}const Zg="@firebase/analytics",ey="0.10.12";function ZS(){yr(new ir(Sd,(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return KS(a,i,r)},"PUBLIC")),yr(new ir("analytics-internal",s,"PRIVATE")),Fs(Zg,ey),Fs(Zg,ey,"esm2017");function s(t){try{const r=t.getProvider(Sd).getImmediate();return{logEvent:(a,i,o)=>JS(r,a,i,o)}}catch(r){throw Qs.create("interop-component-reg-failed",{reason:r})}}}ZS();var ty=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var La,BN;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(R,c){function F(){}F.prototype=c.prototype,R.D=c.prototype,R.prototype=new F,R.prototype.constructor=R,R.C=function(V,Q,E){for(var q=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)q[_e-2]=arguments[_e];return c.prototype[Q].apply(V,q)}}function r(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,r),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,c,F){F||(F=0);var V=Array(16);if(typeof c=="string")for(var Q=0;16>Q;++Q)V[Q]=c.charCodeAt(F++)|c.charCodeAt(F++)<<8|c.charCodeAt(F++)<<16|c.charCodeAt(F++)<<24;else for(Q=0;16>Q;++Q)V[Q]=c[F++]|c[F++]<<8|c[F++]<<16|c[F++]<<24;c=R.g[0],F=R.g[1],Q=R.g[2];var E=R.g[3],q=c+(E^F&(Q^E))+V[0]+3614090360&4294967295;c=F+(q<<7&4294967295|q>>>25),q=E+(Q^c&(F^Q))+V[1]+3905402710&4294967295,E=c+(q<<12&4294967295|q>>>20),q=Q+(F^E&(c^F))+V[2]+606105819&4294967295,Q=E+(q<<17&4294967295|q>>>15),q=F+(c^Q&(E^c))+V[3]+3250441966&4294967295,F=Q+(q<<22&4294967295|q>>>10),q=c+(E^F&(Q^E))+V[4]+4118548399&4294967295,c=F+(q<<7&4294967295|q>>>25),q=E+(Q^c&(F^Q))+V[5]+1200080426&4294967295,E=c+(q<<12&4294967295|q>>>20),q=Q+(F^E&(c^F))+V[6]+2821735955&4294967295,Q=E+(q<<17&4294967295|q>>>15),q=F+(c^Q&(E^c))+V[7]+4249261313&4294967295,F=Q+(q<<22&4294967295|q>>>10),q=c+(E^F&(Q^E))+V[8]+1770035416&4294967295,c=F+(q<<7&4294967295|q>>>25),q=E+(Q^c&(F^Q))+V[9]+2336552879&4294967295,E=c+(q<<12&4294967295|q>>>20),q=Q+(F^E&(c^F))+V[10]+4294925233&4294967295,Q=E+(q<<17&4294967295|q>>>15),q=F+(c^Q&(E^c))+V[11]+2304563134&4294967295,F=Q+(q<<22&4294967295|q>>>10),q=c+(E^F&(Q^E))+V[12]+1804603682&4294967295,c=F+(q<<7&4294967295|q>>>25),q=E+(Q^c&(F^Q))+V[13]+4254626195&4294967295,E=c+(q<<12&4294967295|q>>>20),q=Q+(F^E&(c^F))+V[14]+2792965006&4294967295,Q=E+(q<<17&4294967295|q>>>15),q=F+(c^Q&(E^c))+V[15]+1236535329&4294967295,F=Q+(q<<22&4294967295|q>>>10),q=c+(Q^E&(F^Q))+V[1]+4129170786&4294967295,c=F+(q<<5&4294967295|q>>>27),q=E+(F^Q&(c^F))+V[6]+3225465664&4294967295,E=c+(q<<9&4294967295|q>>>23),q=Q+(c^F&(E^c))+V[11]+643717713&4294967295,Q=E+(q<<14&4294967295|q>>>18),q=F+(E^c&(Q^E))+V[0]+3921069994&4294967295,F=Q+(q<<20&4294967295|q>>>12),q=c+(Q^E&(F^Q))+V[5]+3593408605&4294967295,c=F+(q<<5&4294967295|q>>>27),q=E+(F^Q&(c^F))+V[10]+38016083&4294967295,E=c+(q<<9&4294967295|q>>>23),q=Q+(c^F&(E^c))+V[15]+3634488961&4294967295,Q=E+(q<<14&4294967295|q>>>18),q=F+(E^c&(Q^E))+V[4]+3889429448&4294967295,F=Q+(q<<20&4294967295|q>>>12),q=c+(Q^E&(F^Q))+V[9]+568446438&4294967295,c=F+(q<<5&4294967295|q>>>27),q=E+(F^Q&(c^F))+V[14]+3275163606&4294967295,E=c+(q<<9&4294967295|q>>>23),q=Q+(c^F&(E^c))+V[3]+4107603335&4294967295,Q=E+(q<<14&4294967295|q>>>18),q=F+(E^c&(Q^E))+V[8]+1163531501&4294967295,F=Q+(q<<20&4294967295|q>>>12),q=c+(Q^E&(F^Q))+V[13]+2850285829&4294967295,c=F+(q<<5&4294967295|q>>>27),q=E+(F^Q&(c^F))+V[2]+4243563512&4294967295,E=c+(q<<9&4294967295|q>>>23),q=Q+(c^F&(E^c))+V[7]+1735328473&4294967295,Q=E+(q<<14&4294967295|q>>>18),q=F+(E^c&(Q^E))+V[12]+2368359562&4294967295,F=Q+(q<<20&4294967295|q>>>12),q=c+(F^Q^E)+V[5]+4294588738&4294967295,c=F+(q<<4&4294967295|q>>>28),q=E+(c^F^Q)+V[8]+2272392833&4294967295,E=c+(q<<11&4294967295|q>>>21),q=Q+(E^c^F)+V[11]+1839030562&4294967295,Q=E+(q<<16&4294967295|q>>>16),q=F+(Q^E^c)+V[14]+4259657740&4294967295,F=Q+(q<<23&4294967295|q>>>9),q=c+(F^Q^E)+V[1]+2763975236&4294967295,c=F+(q<<4&4294967295|q>>>28),q=E+(c^F^Q)+V[4]+1272893353&4294967295,E=c+(q<<11&4294967295|q>>>21),q=Q+(E^c^F)+V[7]+4139469664&4294967295,Q=E+(q<<16&4294967295|q>>>16),q=F+(Q^E^c)+V[10]+3200236656&4294967295,F=Q+(q<<23&4294967295|q>>>9),q=c+(F^Q^E)+V[13]+681279174&4294967295,c=F+(q<<4&4294967295|q>>>28),q=E+(c^F^Q)+V[0]+3936430074&4294967295,E=c+(q<<11&4294967295|q>>>21),q=Q+(E^c^F)+V[3]+3572445317&4294967295,Q=E+(q<<16&4294967295|q>>>16),q=F+(Q^E^c)+V[6]+76029189&4294967295,F=Q+(q<<23&4294967295|q>>>9),q=c+(F^Q^E)+V[9]+3654602809&4294967295,c=F+(q<<4&4294967295|q>>>28),q=E+(c^F^Q)+V[12]+3873151461&4294967295,E=c+(q<<11&4294967295|q>>>21),q=Q+(E^c^F)+V[15]+530742520&4294967295,Q=E+(q<<16&4294967295|q>>>16),q=F+(Q^E^c)+V[2]+3299628645&4294967295,F=Q+(q<<23&4294967295|q>>>9),q=c+(Q^(F|~E))+V[0]+4096336452&4294967295,c=F+(q<<6&4294967295|q>>>26),q=E+(F^(c|~Q))+V[7]+1126891415&4294967295,E=c+(q<<10&4294967295|q>>>22),q=Q+(c^(E|~F))+V[14]+2878612391&4294967295,Q=E+(q<<15&4294967295|q>>>17),q=F+(E^(Q|~c))+V[5]+4237533241&4294967295,F=Q+(q<<21&4294967295|q>>>11),q=c+(Q^(F|~E))+V[12]+1700485571&4294967295,c=F+(q<<6&4294967295|q>>>26),q=E+(F^(c|~Q))+V[3]+2399980690&4294967295,E=c+(q<<10&4294967295|q>>>22),q=Q+(c^(E|~F))+V[10]+4293915773&4294967295,Q=E+(q<<15&4294967295|q>>>17),q=F+(E^(Q|~c))+V[1]+2240044497&4294967295,F=Q+(q<<21&4294967295|q>>>11),q=c+(Q^(F|~E))+V[8]+1873313359&4294967295,c=F+(q<<6&4294967295|q>>>26),q=E+(F^(c|~Q))+V[15]+4264355552&4294967295,E=c+(q<<10&4294967295|q>>>22),q=Q+(c^(E|~F))+V[6]+2734768916&4294967295,Q=E+(q<<15&4294967295|q>>>17),q=F+(E^(Q|~c))+V[13]+1309151649&4294967295,F=Q+(q<<21&4294967295|q>>>11),q=c+(Q^(F|~E))+V[4]+4149444226&4294967295,c=F+(q<<6&4294967295|q>>>26),q=E+(F^(c|~Q))+V[11]+3174756917&4294967295,E=c+(q<<10&4294967295|q>>>22),q=Q+(c^(E|~F))+V[2]+718787259&4294967295,Q=E+(q<<15&4294967295|q>>>17),q=F+(E^(Q|~c))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+c&4294967295,R.g[1]=R.g[1]+(Q+(q<<21&4294967295|q>>>11))&4294967295,R.g[2]=R.g[2]+Q&4294967295,R.g[3]=R.g[3]+E&4294967295}a.prototype.u=function(R,c){c===void 0&&(c=R.length);for(var F=c-this.blockSize,V=this.B,Q=this.h,E=0;E<c;){if(Q==0)for(;E<=F;)i(this,R,E),E+=this.blockSize;if(typeof R=="string"){for(;E<c;)if(V[Q++]=R.charCodeAt(E++),Q==this.blockSize){i(this,V),Q=0;break}}else for(;E<c;)if(V[Q++]=R[E++],Q==this.blockSize){i(this,V),Q=0;break}}this.h=Q,this.o+=c},a.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var c=1;c<R.length-8;++c)R[c]=0;var F=8*this.o;for(c=R.length-8;c<R.length;++c)R[c]=F&255,F/=256;for(this.u(R),R=Array(16),c=F=0;4>c;++c)for(var V=0;32>V;V+=8)R[F++]=this.g[c]>>>V&255;return R};function o(R,c){var F=d;return Object.prototype.hasOwnProperty.call(F,R)?F[R]:F[R]=c(R)}function l(R,c){this.h=c;for(var F=[],V=!0,Q=R.length-1;0<=Q;Q--){var E=R[Q]|0;V&&E==c||(F[Q]=E,V=!1)}this.g=F}var d={};function x(R){return-128<=R&&128>R?o(R,function(c){return new l([c|0],0>c?-1:0)}):new l([R|0],0>R?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return I;if(0>R)return k(p(-R));for(var c=[],F=1,V=0;R>=F;V++)c[V]=R/F|0,F*=4294967296;return new l(c,0)}function N(R,c){if(R.length==0)throw Error("number format error: empty string");if(c=c||10,2>c||36<c)throw Error("radix out of range: "+c);if(R.charAt(0)=="-")return k(N(R.substring(1),c));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=p(Math.pow(c,8)),V=I,Q=0;Q<R.length;Q+=8){var E=Math.min(8,R.length-Q),q=parseInt(R.substring(Q,Q+E),c);8>E?(E=p(Math.pow(c,E)),V=V.j(E).add(p(q))):(V=V.j(F),V=V.add(p(q)))}return V}var I=x(0),T=x(1),A=x(16777216);s=l.prototype,s.m=function(){if(L(this))return-k(this).m();for(var R=0,c=1,F=0;F<this.g.length;F++){var V=this.i(F);R+=(0<=V?V:4294967296+V)*c,c*=4294967296}return R},s.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(f(this))return"0";if(L(this))return"-"+k(this).toString(R);for(var c=p(Math.pow(R,6)),F=this,V="";;){var Q=Y(F,c).g;F=_(F,Q.j(c));var E=((0<F.g.length?F.g[0]:F.h)>>>0).toString(R);if(F=Q,f(F))return E+V;for(;6>E.length;)E="0"+E;V=E+V}},s.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function f(R){if(R.h!=0)return!1;for(var c=0;c<R.g.length;c++)if(R.g[c]!=0)return!1;return!0}function L(R){return R.h==-1}s.l=function(R){return R=_(this,R),L(R)?-1:f(R)?0:1};function k(R){for(var c=R.g.length,F=[],V=0;V<c;V++)F[V]=~R.g[V];return new l(F,~R.h).add(T)}s.abs=function(){return L(this)?k(this):this},s.add=function(R){for(var c=Math.max(this.g.length,R.g.length),F=[],V=0,Q=0;Q<=c;Q++){var E=V+(this.i(Q)&65535)+(R.i(Q)&65535),q=(E>>>16)+(this.i(Q)>>>16)+(R.i(Q)>>>16);V=q>>>16,E&=65535,q&=65535,F[Q]=q<<16|E}return new l(F,F[F.length-1]&-2147483648?-1:0)};function _(R,c){return R.add(k(c))}s.j=function(R){if(f(this)||f(R))return I;if(L(this))return L(R)?k(this).j(k(R)):k(k(this).j(R));if(L(R))return k(this.j(k(R)));if(0>this.l(A)&&0>R.l(A))return p(this.m()*R.m());for(var c=this.g.length+R.g.length,F=[],V=0;V<2*c;V++)F[V]=0;for(V=0;V<this.g.length;V++)for(var Q=0;Q<R.g.length;Q++){var E=this.i(V)>>>16,q=this.i(V)&65535,_e=R.i(Q)>>>16,Ie=R.i(Q)&65535;F[2*V+2*Q]+=q*Ie,z(F,2*V+2*Q),F[2*V+2*Q+1]+=E*Ie,z(F,2*V+2*Q+1),F[2*V+2*Q+1]+=q*_e,z(F,2*V+2*Q+1),F[2*V+2*Q+2]+=E*_e,z(F,2*V+2*Q+2)}for(V=0;V<c;V++)F[V]=F[2*V+1]<<16|F[2*V];for(V=c;V<2*c;V++)F[V]=0;return new l(F,0)};function z(R,c){for(;(R[c]&65535)!=R[c];)R[c+1]+=R[c]>>>16,R[c]&=65535,c++}function M(R,c){this.g=R,this.h=c}function Y(R,c){if(f(c))throw Error("division by zero");if(f(R))return new M(I,I);if(L(R))return c=Y(k(R),c),new M(k(c.g),k(c.h));if(L(c))return c=Y(R,k(c)),new M(k(c.g),c.h);if(30<R.g.length){if(L(R)||L(c))throw Error("slowDivide_ only works with positive integers.");for(var F=T,V=c;0>=V.l(R);)F=G(F),V=G(V);var Q=W(F,1),E=W(V,1);for(V=W(V,2),F=W(F,2);!f(V);){var q=E.add(V);0>=q.l(R)&&(Q=Q.add(F),E=q),V=W(V,1),F=W(F,1)}return c=_(R,Q.j(c)),new M(Q,c)}for(Q=I;0<=R.l(c);){for(F=Math.max(1,Math.floor(R.m()/c.m())),V=Math.ceil(Math.log(F)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),E=p(F),q=E.j(c);L(q)||0<q.l(R);)F-=V,E=p(F),q=E.j(c);f(E)&&(E=T),Q=Q.add(E),R=_(R,q)}return new M(Q,R)}s.A=function(R){return Y(this,R).h},s.and=function(R){for(var c=Math.max(this.g.length,R.g.length),F=[],V=0;V<c;V++)F[V]=this.i(V)&R.i(V);return new l(F,this.h&R.h)},s.or=function(R){for(var c=Math.max(this.g.length,R.g.length),F=[],V=0;V<c;V++)F[V]=this.i(V)|R.i(V);return new l(F,this.h|R.h)},s.xor=function(R){for(var c=Math.max(this.g.length,R.g.length),F=[],V=0;V<c;V++)F[V]=this.i(V)^R.i(V);return new l(F,this.h^R.h)};function G(R){for(var c=R.g.length+1,F=[],V=0;V<c;V++)F[V]=R.i(V)<<1|R.i(V-1)>>>31;return new l(F,R.h)}function W(R,c){var F=c>>5;c%=32;for(var V=R.g.length-F,Q=[],E=0;E<V;E++)Q[E]=0<c?R.i(E+F)>>>c|R.i(E+F+1)<<32-c:R.i(E+F);return new l(Q,R.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,BN=a,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=N,La=l}).apply(typeof ty<"u"?ty:typeof self<"u"?self:typeof window<"u"?window:{});var jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $N,gl,qN,Uc,Qm,WN,GN,HN;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,w,P){return u==Array.prototype||u==Object.prototype||(u[w]=P.value),u};function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof jc=="object"&&jc];for(var w=0;w<u.length;++w){var P=u[w];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var a=r(this);function i(u,w){if(w)e:{var P=a;u=u.split(".");for(var B=0;B<u.length-1;B++){var oe=u[B];if(!(oe in P))break e;P=P[oe]}u=u[u.length-1],B=P[u],w=w(B),w!=B&&w!=null&&t(P,u,{configurable:!0,writable:!0,value:w})}}function o(u,w){u instanceof String&&(u+="");var P=0,B=!1,oe={next:function(){if(!B&&P<u.length){var ue=P++;return{value:w(ue,u[ue]),done:!1}}return B=!0,{done:!0,value:void 0}}};return oe[Symbol.iterator]=function(){return oe},oe}i("Array.prototype.values",function(u){return u||function(){return o(this,function(w,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function x(u){var w=typeof u;return w=w!="object"?w:u?Array.isArray(u)?"array":w:"null",w=="array"||w=="object"&&typeof u.length=="number"}function p(u){var w=typeof u;return w=="object"&&u!=null||w=="function"}function N(u,w,P){return u.call.apply(u.bind,arguments)}function I(u,w,P){if(!u)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(oe,B),u.apply(w,oe)}}return function(){return u.apply(w,arguments)}}function T(u,w,P){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?N:I,T.apply(null,arguments)}function A(u,w){var P=Array.prototype.slice.call(arguments,1);return function(){var B=P.slice();return B.push.apply(B,arguments),u.apply(this,B)}}function f(u,w){function P(){}P.prototype=w.prototype,u.aa=w.prototype,u.prototype=new P,u.prototype.constructor=u,u.Qb=function(B,oe,ue){for(var Pe=Array(arguments.length-2),St=2;St<arguments.length;St++)Pe[St-2]=arguments[St];return w.prototype[oe].apply(B,Pe)}}function L(u){const w=u.length;if(0<w){const P=Array(w);for(let B=0;B<w;B++)P[B]=u[B];return P}return[]}function k(u,w){for(let P=1;P<arguments.length;P++){const B=arguments[P];if(x(B)){const oe=u.length||0,ue=B.length||0;u.length=oe+ue;for(let Pe=0;Pe<ue;Pe++)u[oe+Pe]=B[Pe]}else u.push(B)}}class _{constructor(w,P){this.i=w,this.j=P,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function z(u){return/^[\s\xa0]*$/.test(u)}function M(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function Y(u){return Y[" "](u),u}Y[" "]=function(){};var G=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function W(u,w,P){for(const B in u)w.call(P,u[B],B,u)}function R(u,w){for(const P in u)w.call(void 0,u[P],P,u)}function c(u){const w={};for(const P in u)w[P]=u[P];return w}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(u,w){let P,B;for(let oe=1;oe<arguments.length;oe++){B=arguments[oe];for(P in B)u[P]=B[P];for(let ue=0;ue<F.length;ue++)P=F[ue],Object.prototype.hasOwnProperty.call(B,P)&&(u[P]=B[P])}}function Q(u){var w=1;u=u.split(":");const P=[];for(;0<w&&u.length;)P.push(u.shift()),w--;return u.length&&P.push(u.join(":")),P}function E(u){d.setTimeout(()=>{throw u},0)}function q(){var u=ee;let w=null;return u.g&&(w=u.g,u.g=u.g.next,u.g||(u.h=null),w.next=null),w}class _e{constructor(){this.h=this.g=null}add(w,P){const B=Ie.get();B.set(w,P),this.h?this.h.next=B:this.g=B,this.h=B}}var Ie=new _(()=>new Ce,u=>u.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(w,P){this.h=w,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,ce=!1,ee=new _e,le=()=>{const u=d.Promise.resolve(void 0);Te=()=>{u.then(je)}};var je=()=>{for(var u;u=q();){try{u.h.call(u.g)}catch(P){E(P)}var w=Ie;w.j(u),100>w.h&&(w.h++,u.next=w.g,w.g=u)}ce=!1};function n(){this.s=this.s,this.C=this.C}n.prototype.s=!1,n.prototype.ma=function(){this.s||(this.s=!0,this.N())},n.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(u,w){this.type=u,this.g=this.target=w,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var g=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,w=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const P=()=>{};d.addEventListener("test",P,w),d.removeEventListener("test",P,w)}catch{}return u}();function O(u,w){if(b.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var P=this.type=u.type,B=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=w,w=u.relatedTarget){if(G){e:{try{Y(w.nodeName);var oe=!0;break e}catch{}oe=!1}oe||(w=null)}}else P=="mouseover"?w=u.fromElement:P=="mouseout"&&(w=u.toElement);this.relatedTarget=w,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:H[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&O.aa.h.call(this)}}f(O,b);var H={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var $="closure_listenable_"+(1e6*Math.random()|0),v=0;function K(u,w,P,B,oe){this.listener=u,this.proxy=null,this.src=w,this.type=P,this.capture=!!B,this.ha=oe,this.key=++v,this.da=this.fa=!1}function S(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function y(u){this.src=u,this.g={},this.h=0}y.prototype.add=function(u,w,P,B,oe){var ue=u.toString();u=this.g[ue],u||(u=this.g[ue]=[],this.h++);var Pe=D(u,w,B,oe);return-1<Pe?(w=u[Pe],P||(w.fa=!1)):(w=new K(w,this.src,ue,!!B,oe),w.fa=P,u.push(w)),w};function m(u,w){var P=w.type;if(P in u.g){var B=u.g[P],oe=Array.prototype.indexOf.call(B,w,void 0),ue;(ue=0<=oe)&&Array.prototype.splice.call(B,oe,1),ue&&(S(w),u.g[P].length==0&&(delete u.g[P],u.h--))}}function D(u,w,P,B){for(var oe=0;oe<u.length;++oe){var ue=u[oe];if(!ue.da&&ue.listener==w&&ue.capture==!!P&&ue.ha==B)return oe}return-1}var J="closure_lm_"+(1e6*Math.random()|0),te={};function X(u,w,P,B,oe){if(B&&B.once)return be(u,w,P,B,oe);if(Array.isArray(w)){for(var ue=0;ue<w.length;ue++)X(u,w[ue],P,B,oe);return null}return P=pt(P),u&&u[$]?u.K(w,P,p(B)?!!B.capture:!!B,oe):ie(u,w,P,!1,B,oe)}function ie(u,w,P,B,oe,ue){if(!w)throw Error("Invalid event type");var Pe=p(oe)?!!oe.capture:!!oe,St=we(u);if(St||(u[J]=St=new y(u)),P=St.add(w,P,B,Pe,ue),P.proxy)return P;if(B=Xe(),P.proxy=B,B.src=u,B.listener=P,u.addEventListener)g||(oe=Pe),oe===void 0&&(oe=!1),u.addEventListener(w.toString(),B,oe);else if(u.attachEvent)u.attachEvent(pe(w.toString()),B);else if(u.addListener&&u.removeListener)u.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return P}function Xe(){function u(P){return w.call(u.src,u.listener,P)}const w=de;return u}function be(u,w,P,B,oe){if(Array.isArray(w)){for(var ue=0;ue<w.length;ue++)be(u,w[ue],P,B,oe);return null}return P=pt(P),u&&u[$]?u.L(w,P,p(B)?!!B.capture:!!B,oe):ie(u,w,P,!0,B,oe)}function re(u,w,P,B,oe){if(Array.isArray(w))for(var ue=0;ue<w.length;ue++)re(u,w[ue],P,B,oe);else B=p(B)?!!B.capture:!!B,P=pt(P),u&&u[$]?(u=u.i,w=String(w).toString(),w in u.g&&(ue=u.g[w],P=D(ue,P,B,oe),-1<P&&(S(ue[P]),Array.prototype.splice.call(ue,P,1),ue.length==0&&(delete u.g[w],u.h--)))):u&&(u=we(u))&&(w=u.g[w.toString()],u=-1,w&&(u=D(w,P,B,oe)),(P=-1<u?w[u]:null)&&xe(P))}function xe(u){if(typeof u!="number"&&u&&!u.da){var w=u.src;if(w&&w[$])m(w.i,u);else{var P=u.type,B=u.proxy;w.removeEventListener?w.removeEventListener(P,B,u.capture):w.detachEvent?w.detachEvent(pe(P),B):w.addListener&&w.removeListener&&w.removeListener(B),(P=we(w))?(m(P,u),P.h==0&&(P.src=null,w[J]=null)):S(u)}}}function pe(u){return u in te?te[u]:te[u]="on"+u}function de(u,w){if(u.da)u=!0;else{w=new O(w,this);var P=u.listener,B=u.ha||u.src;u.fa&&xe(u),u=P.call(B,w)}return u}function we(u){return u=u[J],u instanceof y?u:null}var at="__closure_events_fn_"+(1e9*Math.random()>>>0);function pt(u){return typeof u=="function"?u:(u[at]||(u[at]=function(w){return u.handleEvent(w)}),u[at])}function nt(){n.call(this),this.i=new y(this),this.M=this,this.F=null}f(nt,n),nt.prototype[$]=!0,nt.prototype.removeEventListener=function(u,w,P,B){re(this,u,w,P,B)};function it(u,w){var P,B=u.F;if(B)for(P=[];B;B=B.F)P.push(B);if(u=u.M,B=w.type||w,typeof w=="string")w=new b(w,u);else if(w instanceof b)w.target=w.target||u;else{var oe=w;w=new b(B,u),V(w,oe)}if(oe=!0,P)for(var ue=P.length-1;0<=ue;ue--){var Pe=w.g=P[ue];oe=zt(Pe,B,!0,w)&&oe}if(Pe=w.g=u,oe=zt(Pe,B,!0,w)&&oe,oe=zt(Pe,B,!1,w)&&oe,P)for(ue=0;ue<P.length;ue++)Pe=w.g=P[ue],oe=zt(Pe,B,!1,w)&&oe}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var u=this.i,w;for(w in u.g){for(var P=u.g[w],B=0;B<P.length;B++)S(P[B]);delete u.g[w],u.h--}}this.F=null},nt.prototype.K=function(u,w,P,B){return this.i.add(String(u),w,!1,P,B)},nt.prototype.L=function(u,w,P,B){return this.i.add(String(u),w,!0,P,B)};function zt(u,w,P,B){if(w=u.i.g[String(w)],!w)return!0;w=w.concat();for(var oe=!0,ue=0;ue<w.length;++ue){var Pe=w[ue];if(Pe&&!Pe.da&&Pe.capture==P){var St=Pe.listener,ls=Pe.ha||Pe.src;Pe.fa&&m(u.i,Pe),oe=St.call(ls,B)!==!1&&oe}}return oe&&!B.defaultPrevented}function ss(u,w,P){if(typeof u=="function")P&&(u=T(u,P));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:d.setTimeout(u,w||0)}function Lt(u){u.g=ss(()=>{u.g=null,u.i&&(u.i=!1,Lt(u))},u.l);const w=u.h;u.h=null,u.m.apply(null,w)}class da extends n{constructor(w,P){super(),this.m=w,this.l=P,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Lt(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vr(u){n.call(this),this.h=u,this.g={}}f(vr,n);var ne=[];function Ne(u){W(u.g,function(w,P){this.g.hasOwnProperty(P)&&xe(w)},u),u.g={}}vr.prototype.N=function(){vr.aa.N.call(this),Ne(this)},vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Re=d.JSON.stringify,et=d.JSON.parse,Mt=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function wt(){}wt.prototype.h=null;function Np(u){return u.h||(u.h=u.i())}function wp(){}var Bi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qu(){b.call(this,"d")}f(qu,b);function Wu(){b.call(this,"c")}f(Wu,b);var tn={},kp=null;function Fo(){return kp=kp||new nt}tn.La="serverreachability";function Cp(u){b.call(this,tn.La,u)}f(Cp,b);function $i(u){const w=Fo();it(w,new Cp(w))}tn.STAT_EVENT="statevent";function Ip(u,w){b.call(this,tn.STAT_EVENT,u),this.stat=w}f(Ip,b);function Is(u){const w=Fo();it(w,new Ip(w,u))}tn.Ma="timingevent";function Ep(u,w){b.call(this,tn.Ma,u),this.size=w}f(Ep,b);function qi(u,w){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},w)}function Wi(){this.g=!0}Wi.prototype.xa=function(){this.g=!1};function o2(u,w,P,B,oe,ue){u.info(function(){if(u.g)if(ue)for(var Pe="",St=ue.split("&"),ls=0;ls<St.length;ls++){var Nt=St[ls].split("=");if(1<Nt.length){var fs=Nt[0];Nt=Nt[1];var gs=fs.split("_");Pe=2<=gs.length&&gs[1]=="type"?Pe+(fs+"="+Nt+"&"):Pe+(fs+"=redacted&")}}else Pe=null;else Pe=ue;return"XMLHTTP REQ ("+B+") [attempt "+oe+"]: "+w+`
`+P+`
`+Pe})}function c2(u,w,P,B,oe,ue,Pe){u.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+oe+"]: "+w+`
`+P+`
`+ue+" "+Pe})}function zn(u,w,P,B){u.info(function(){return"XMLHTTP TEXT ("+w+"): "+u2(u,P)+(B?" "+B:"")})}function d2(u,w){u.info(function(){return"TIMEOUT: "+w})}Wi.prototype.info=function(){};function u2(u,w){if(!u.g)return w;if(!w)return null;try{var P=JSON.parse(w);if(P){for(u=0;u<P.length;u++)if(Array.isArray(P[u])){var B=P[u];if(!(2>B.length)){var oe=B[1];if(Array.isArray(oe)&&!(1>oe.length)){var ue=oe[0];if(ue!="noop"&&ue!="stop"&&ue!="close")for(var Pe=1;Pe<oe.length;Pe++)oe[Pe]=""}}}}return Re(P)}catch{return w}}var Uo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gu;function Bo(){}f(Bo,wt),Bo.prototype.g=function(){return new XMLHttpRequest},Bo.prototype.i=function(){return{}},Gu=new Bo;function ua(u,w,P,B){this.j=u,this.i=w,this.l=P,this.R=B||1,this.U=new vr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _p}function _p(){this.i=null,this.g="",this.h=!1}var Pp={},Hu={};function Qu(u,w,P){u.L=1,u.v=Go(Fr(w)),u.m=P,u.P=!0,Tp(u,null)}function Tp(u,w){u.F=Date.now(),$o(u),u.A=Fr(u.v);var P=u.A,B=u.R;Array.isArray(B)||(B=[String(B)]),Wp(P.i,"t",B),u.C=0,P=u.j.J,u.h=new _p,u.g=df(u.j,P?w:null,!u.m),0<u.O&&(u.M=new da(T(u.Y,u,u.g),u.O)),w=u.U,P=u.g,B=u.ca;var oe="readystatechange";Array.isArray(oe)||(oe&&(ne[0]=oe.toString()),oe=ne);for(var ue=0;ue<oe.length;ue++){var Pe=X(P,oe[ue],B||w.handleEvent,!1,w.h||w);if(!Pe)break;w.g[Pe.key]=Pe}w=u.H?c(u.H):{},u.m?(u.u||(u.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,w)):(u.u="GET",u.g.ea(u.A,u.u,null,w)),$i(),o2(u.i,u.u,u.A,u.l,u.R,u.m)}ua.prototype.ca=function(u){u=u.target;const w=this.M;w&&Ur(u)==3?w.j():this.Y(u)},ua.prototype.Y=function(u){try{if(u==this.g)e:{const gs=Ur(this.g);var w=this.g.Ba();const Fn=this.g.Z();if(!(3>gs)&&(gs!=3||this.g&&(this.h.h||this.g.oa()||Jp(this.g)))){this.J||gs!=4||w==7||(w==8||0>=Fn?$i(3):$i(2)),Ku(this);var P=this.g.Z();this.X=P;t:if(Dp(this)){var B=Jp(this.g);u="";var oe=B.length,ue=Ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sn(this),Gi(this);var Pe="";break t}this.h.i=new d.TextDecoder}for(w=0;w<oe;w++)this.h.h=!0,u+=this.h.i.decode(B[w],{stream:!(ue&&w==oe-1)});B.length=0,this.h.g+=u,this.C=0,Pe=this.h.g}else Pe=this.g.oa();if(this.o=P==200,c2(this.i,this.u,this.A,this.l,this.R,gs,P),this.o){if(this.T&&!this.K){t:{if(this.g){var St,ls=this.g;if((St=ls.g?ls.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(St)){var Nt=St;break t}}Nt=null}if(P=Nt)zn(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yu(this,P);else{this.o=!1,this.s=3,Is(12),sn(this),Gi(this);break e}}if(this.P){P=!0;let or;for(;!this.J&&this.C<Pe.length;)if(or=x2(this,Pe),or==Hu){gs==4&&(this.s=4,Is(14),P=!1),zn(this.i,this.l,null,"[Incomplete Response]");break}else if(or==Pp){this.s=4,Is(15),zn(this.i,this.l,Pe,"[Invalid Chunk]"),P=!1;break}else zn(this.i,this.l,or,null),Yu(this,or);if(Dp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gs!=4||Pe.length!=0||this.h.h||(this.s=1,Is(16),P=!1),this.o=this.o&&P,!P)zn(this.i,this.l,Pe,"[Invalid Chunked Response]"),sn(this),Gi(this);else if(0<Pe.length&&!this.W){this.W=!0;var fs=this.j;fs.g==this&&fs.ba&&!fs.M&&(fs.j.info("Great, no buffering proxy detected. Bytes received: "+Pe.length),sx(fs),fs.M=!0,Is(11))}}else zn(this.i,this.l,Pe,null),Yu(this,Pe);gs==4&&sn(this),this.o&&!this.J&&(gs==4?nf(this.j,this):(this.o=!1,$o(this)))}else _2(this.g),P==400&&0<Pe.indexOf("Unknown SID")?(this.s=3,Is(12)):(this.s=0,Is(13)),sn(this),Gi(this)}}}catch{}finally{}};function Dp(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function x2(u,w){var P=u.C,B=w.indexOf(`
`,P);return B==-1?Hu:(P=Number(w.substring(P,B)),isNaN(P)?Pp:(B+=1,B+P>w.length?Hu:(w=w.slice(B,B+P),u.C=B+P,w)))}ua.prototype.cancel=function(){this.J=!0,sn(this)};function $o(u){u.S=Date.now()+u.I,Ap(u,u.I)}function Ap(u,w){if(u.B!=null)throw Error("WatchDog timer not null");u.B=qi(T(u.ba,u),w)}function Ku(u){u.B&&(d.clearTimeout(u.B),u.B=null)}ua.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(d2(this.i,this.A),this.L!=2&&($i(),Is(17)),sn(this),this.s=2,Gi(this)):Ap(this,this.S-u)};function Gi(u){u.j.G==0||u.J||nf(u.j,u)}function sn(u){Ku(u);var w=u.M;w&&typeof w.ma=="function"&&w.ma(),u.M=null,Ne(u.U),u.g&&(w=u.g,u.g=null,w.abort(),w.ma())}function Yu(u,w){try{var P=u.j;if(P.G!=0&&(P.g==u||Xu(P.h,u))){if(!u.K&&Xu(P.h,u)&&P.G==3){try{var B=P.Da.g.parse(w)}catch{B=null}if(Array.isArray(B)&&B.length==3){var oe=B;if(oe[0]==0){e:if(!P.u){if(P.g)if(P.g.F+3e3<u.F)Jo(P),Yo(P);else break e;tx(P),Is(18)}}else P.za=oe[1],0<P.za-P.T&&37500>oe[2]&&P.F&&P.v==0&&!P.C&&(P.C=qi(T(P.Za,P),6e3));if(1>=Op(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else an(P,11)}else if((u.K||P.g==u)&&Jo(P),!z(w))for(oe=P.Da.g.parse(w),w=0;w<oe.length;w++){let Nt=oe[w];if(P.T=Nt[0],Nt=Nt[1],P.G==2)if(Nt[0]=="c"){P.K=Nt[1],P.ia=Nt[2];const fs=Nt[3];fs!=null&&(P.la=fs,P.j.info("VER="+P.la));const gs=Nt[4];gs!=null&&(P.Aa=gs,P.j.info("SVER="+P.Aa));const Fn=Nt[5];Fn!=null&&typeof Fn=="number"&&0<Fn&&(B=1.5*Fn,P.L=B,P.j.info("backChannelRequestTimeoutMs_="+B)),B=P;const or=u.g;if(or){const ec=or.g?or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ec){var ue=B.h;ue.g||ec.indexOf("spdy")==-1&&ec.indexOf("quic")==-1&&ec.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Ju(ue,ue.h),ue.h=null))}if(B.D){const rx=or.g?or.g.getResponseHeader("X-HTTP-Session-Id"):null;rx&&(B.ya=rx,Dt(B.I,B.D,rx))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-u.F,P.j.info("Handshake RTT: "+P.R+"ms")),B=P;var Pe=u;if(B.qa=cf(B,B.J?B.ia:null,B.W),Pe.K){zp(B.h,Pe);var St=Pe,ls=B.L;ls&&(St.I=ls),St.B&&(Ku(St),$o(St)),B.g=Pe}else rf(B);0<P.i.length&&Xo(P)}else Nt[0]!="stop"&&Nt[0]!="close"||an(P,7);else P.G==3&&(Nt[0]=="stop"||Nt[0]=="close"?Nt[0]=="stop"?an(P,7):ex(P):Nt[0]!="noop"&&P.l&&P.l.ta(Nt),P.v=0)}}$i(4)}catch{}}var m2=class{constructor(u,w){this.g=u,this.map=w}};function Rp(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mp(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Op(u){return u.h?1:u.g?u.g.size:0}function Xu(u,w){return u.h?u.h==w:u.g?u.g.has(w):!1}function Ju(u,w){u.g?u.g.add(w):u.h=w}function zp(u,w){u.h&&u.h==w?u.h=null:u.g&&u.g.has(w)&&u.g.delete(w)}Rp.prototype.cancel=function(){if(this.i=Lp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Lp(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let w=u.i;for(const P of u.g.values())w=w.concat(P.D);return w}return L(u.i)}function h2(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(x(u)){for(var w=[],P=u.length,B=0;B<P;B++)w.push(u[B]);return w}w=[],P=0;for(B in u)w[P++]=u[B];return w}function p2(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(x(u)||typeof u=="string"){var w=[];u=u.length;for(var P=0;P<u;P++)w.push(P);return w}w=[],P=0;for(const B in u)w[P++]=B;return w}}}function Vp(u,w){if(u.forEach&&typeof u.forEach=="function")u.forEach(w,void 0);else if(x(u)||typeof u=="string")Array.prototype.forEach.call(u,w,void 0);else for(var P=p2(u),B=h2(u),oe=B.length,ue=0;ue<oe;ue++)w.call(void 0,B[ue],P&&P[ue],u)}var Fp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function f2(u,w){if(u){u=u.split("&");for(var P=0;P<u.length;P++){var B=u[P].indexOf("="),oe=null;if(0<=B){var ue=u[P].substring(0,B);oe=u[P].substring(B+1)}else ue=u[P];w(ue,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}function rn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof rn){this.h=u.h,qo(this,u.j),this.o=u.o,this.g=u.g,Wo(this,u.s),this.l=u.l;var w=u.i,P=new Ki;P.i=w.i,w.g&&(P.g=new Map(w.g),P.h=w.h),Up(this,P),this.m=u.m}else u&&(w=String(u).match(Fp))?(this.h=!1,qo(this,w[1]||"",!0),this.o=Hi(w[2]||""),this.g=Hi(w[3]||"",!0),Wo(this,w[4]),this.l=Hi(w[5]||"",!0),Up(this,w[6]||"",!0),this.m=Hi(w[7]||"")):(this.h=!1,this.i=new Ki(null,this.h))}rn.prototype.toString=function(){var u=[],w=this.j;w&&u.push(Qi(w,Bp,!0),":");var P=this.g;return(P||w=="file")&&(u.push("//"),(w=this.o)&&u.push(Qi(w,Bp,!0),"@"),u.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&u.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&u.push("/"),u.push(Qi(P,P.charAt(0)=="/"?b2:y2,!0))),(P=this.i.toString())&&u.push("?",P),(P=this.m)&&u.push("#",Qi(P,v2)),u.join("")};function Fr(u){return new rn(u)}function qo(u,w,P){u.j=P?Hi(w,!0):w,u.j&&(u.j=u.j.replace(/:$/,""))}function Wo(u,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);u.s=w}else u.s=null}function Up(u,w,P){w instanceof Ki?(u.i=w,N2(u.i,u.h)):(P||(w=Qi(w,j2)),u.i=new Ki(w,u.h))}function Dt(u,w,P){u.i.set(w,P)}function Go(u){return Dt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Hi(u,w){return u?w?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qi(u,w,P){return typeof u=="string"?(u=encodeURI(u).replace(w,g2),P&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function g2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Bp=/[#\/\?@]/g,y2=/[#\?:]/g,b2=/[#\?]/g,j2=/[#\?@]/g,v2=/#/g;function Ki(u,w){this.h=this.g=null,this.i=u||null,this.j=!!w}function xa(u){u.g||(u.g=new Map,u.h=0,u.i&&f2(u.i,function(w,P){u.add(decodeURIComponent(w.replace(/\+/g," ")),P)}))}s=Ki.prototype,s.add=function(u,w){xa(this),this.i=null,u=Ln(this,u);var P=this.g.get(u);return P||this.g.set(u,P=[]),P.push(w),this.h+=1,this};function $p(u,w){xa(u),w=Ln(u,w),u.g.has(w)&&(u.i=null,u.h-=u.g.get(w).length,u.g.delete(w))}function qp(u,w){return xa(u),w=Ln(u,w),u.g.has(w)}s.forEach=function(u,w){xa(this),this.g.forEach(function(P,B){P.forEach(function(oe){u.call(w,oe,B,this)},this)},this)},s.na=function(){xa(this);const u=Array.from(this.g.values()),w=Array.from(this.g.keys()),P=[];for(let B=0;B<w.length;B++){const oe=u[B];for(let ue=0;ue<oe.length;ue++)P.push(w[B])}return P},s.V=function(u){xa(this);let w=[];if(typeof u=="string")qp(this,u)&&(w=w.concat(this.g.get(Ln(this,u))));else{u=Array.from(this.g.values());for(let P=0;P<u.length;P++)w=w.concat(u[P])}return w},s.set=function(u,w){return xa(this),this.i=null,u=Ln(this,u),qp(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[w]),this.h+=1,this},s.get=function(u,w){return u?(u=this.V(u),0<u.length?String(u[0]):w):w};function Wp(u,w,P){$p(u,w),0<P.length&&(u.i=null,u.g.set(Ln(u,w),L(P)),u.h+=P.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],w=Array.from(this.g.keys());for(var P=0;P<w.length;P++){var B=w[P];const ue=encodeURIComponent(String(B)),Pe=this.V(B);for(B=0;B<Pe.length;B++){var oe=ue;Pe[B]!==""&&(oe+="="+encodeURIComponent(String(Pe[B]))),u.push(oe)}}return this.i=u.join("&")};function Ln(u,w){return w=String(w),u.j&&(w=w.toLowerCase()),w}function N2(u,w){w&&!u.j&&(xa(u),u.i=null,u.g.forEach(function(P,B){var oe=B.toLowerCase();B!=oe&&($p(this,B),Wp(this,oe,P))},u)),u.j=w}function w2(u,w){const P=new Wi;if(d.Image){const B=new Image;B.onload=A(ma,P,"TestLoadImage: loaded",!0,w,B),B.onerror=A(ma,P,"TestLoadImage: error",!1,w,B),B.onabort=A(ma,P,"TestLoadImage: abort",!1,w,B),B.ontimeout=A(ma,P,"TestLoadImage: timeout",!1,w,B),d.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=u}else w(!1)}function k2(u,w){const P=new Wi,B=new AbortController,oe=setTimeout(()=>{B.abort(),ma(P,"TestPingServer: timeout",!1,w)},1e4);fetch(u,{signal:B.signal}).then(ue=>{clearTimeout(oe),ue.ok?ma(P,"TestPingServer: ok",!0,w):ma(P,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(oe),ma(P,"TestPingServer: error",!1,w)})}function ma(u,w,P,B,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),B(P)}catch{}}function C2(){this.g=new Mt}function I2(u,w,P){const B=P||"";try{Vp(u,function(oe,ue){let Pe=oe;p(oe)&&(Pe=Re(oe)),w.push(B+ue+"="+encodeURIComponent(Pe))})}catch(oe){throw w.push(B+"type="+encodeURIComponent("_badmap")),oe}}function Ho(u){this.l=u.Ub||null,this.j=u.eb||!1}f(Ho,wt),Ho.prototype.g=function(){return new Qo(this.l,this.j)},Ho.prototype.i=function(u){return function(){return u}}({});function Qo(u,w){nt.call(this),this.D=u,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}f(Qo,nt),s=Qo.prototype,s.open=function(u,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=w,this.readyState=1,Xi(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(w.body=u),(this.D||d).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yi(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Xi(this)),this.g&&(this.readyState=3,Xi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gp(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gp(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var w=u.value?u.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!u.done}))&&(this.response=this.responseText+=w)}u.done?Yi(this):Xi(this),this.readyState==3&&Gp(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,Yi(this))},s.Qa=function(u){this.g&&(this.response=u,Yi(this))},s.ga=function(){this.g&&Yi(this)};function Yi(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Xi(u)}s.setRequestHeader=function(u,w){this.u.append(u,w)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],w=this.h.entries();for(var P=w.next();!P.done;)P=P.value,u.push(P[0]+": "+P[1]),P=w.next();return u.join(`\r
`)};function Xi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Qo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Hp(u){let w="";return W(u,function(P,B){w+=B,w+=":",w+=P,w+=`\r
`}),w}function Zu(u,w,P){e:{for(B in P){var B=!1;break e}B=!0}B||(P=Hp(P),typeof u=="string"?P!=null&&encodeURIComponent(String(P)):Dt(u,w,P))}function qt(u){nt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}f(qt,nt);var E2=/^https?$/i,S2=["POST","PUT"];s=qt.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,w,P,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);w=w?w.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gu.g(),this.v=this.o?Np(this.o):Np(Gu),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(w,String(u),!0),this.B=!1}catch(ue){Qp(this,ue);return}if(u=P||"",P=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var oe in B)P.set(oe,B[oe]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const ue of B.keys())P.set(ue,B.get(ue));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(P.keys()).find(ue=>ue.toLowerCase()=="content-type"),oe=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(S2,w,void 0))||B||oe||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,Pe]of P)this.g.setRequestHeader(ue,Pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xp(this),this.u=!0,this.g.send(u),this.u=!1}catch(ue){Qp(this,ue)}};function Qp(u,w){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=w,u.m=5,Kp(u),Ko(u)}function Kp(u){u.A||(u.A=!0,it(u,"complete"),it(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,it(this,"complete"),it(this,"abort"),Ko(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ko(this,!0)),qt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Yp(this):this.bb())},s.bb=function(){Yp(this)};function Yp(u){if(u.h&&typeof l<"u"&&(!u.v[1]||Ur(u)!=4||u.Z()!=2)){if(u.u&&Ur(u)==4)ss(u.Ea,0,u);else if(it(u,"readystatechange"),Ur(u)==4){u.h=!1;try{const Pe=u.Z();e:switch(Pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var P;if(!(P=w)){var B;if(B=Pe===0){var oe=String(u.D).match(Fp)[1]||null;!oe&&d.self&&d.self.location&&(oe=d.self.location.protocol.slice(0,-1)),B=!E2.test(oe?oe.toLowerCase():"")}P=B}if(P)it(u,"complete"),it(u,"success");else{u.m=6;try{var ue=2<Ur(u)?u.g.statusText:""}catch{ue=""}u.l=ue+" ["+u.Z()+"]",Kp(u)}}finally{Ko(u)}}}}function Ko(u,w){if(u.g){Xp(u);const P=u.g,B=u.v[0]?()=>{}:null;u.g=null,u.v=null,w||it(u,"ready");try{P.onreadystatechange=B}catch{}}}function Xp(u){u.I&&(d.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function Ur(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<Ur(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var w=this.g.responseText;return u&&w.indexOf(u)==0&&(w=w.substring(u.length)),et(w)}};function Jp(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function _2(u){const w={};u=(u.g&&2<=Ur(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<u.length;B++){if(z(u[B]))continue;var P=Q(u[B]);const oe=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const ue=w[oe]||[];w[oe]=ue,ue.push(P)}R(w,function(B){return B.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ji(u,w,P){return P&&P.internalChannelParams&&P.internalChannelParams[u]||w}function Zp(u){this.Aa=0,this.i=[],this.j=new Wi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ji("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ji("baseRetryDelayMs",5e3,u),this.cb=Ji("retryDelaySeedMs",1e4,u),this.Wa=Ji("forwardChannelMaxRetries",2,u),this.wa=Ji("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Rp(u&&u.concurrentRequestLimit),this.Da=new C2,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Zp.prototype,s.la=8,s.G=1,s.connect=function(u,w,P,B){Is(0),this.W=u,this.H=w||{},P&&B!==void 0&&(this.H.OSID=P,this.H.OAID=B),this.F=this.X,this.I=cf(this,null,this.W),Xo(this)};function ex(u){if(ef(u),u.G==3){var w=u.U++,P=Fr(u.I);if(Dt(P,"SID",u.K),Dt(P,"RID",w),Dt(P,"TYPE","terminate"),Zi(u,P),w=new ua(u,u.j,w),w.L=2,w.v=Go(Fr(P)),P=!1,d.navigator&&d.navigator.sendBeacon)try{P=d.navigator.sendBeacon(w.v.toString(),"")}catch{}!P&&d.Image&&(new Image().src=w.v,P=!0),P||(w.g=df(w.j,null),w.g.ea(w.v)),w.F=Date.now(),$o(w)}of(u)}function Yo(u){u.g&&(sx(u),u.g.cancel(),u.g=null)}function ef(u){Yo(u),u.u&&(d.clearTimeout(u.u),u.u=null),Jo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function Xo(u){if(!Mp(u.h)&&!u.s){u.s=!0;var w=u.Ga;Te||le(),ce||(Te(),ce=!0),ee.add(w,u),u.B=0}}function P2(u,w){return Op(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=w.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=qi(T(u.Ga,u,w),lf(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const oe=new ua(this,this.j,u);let ue=this.o;if(this.S&&(ue?(ue=c(ue),V(ue,this.S)):ue=this.S),this.m!==null||this.O||(oe.H=ue,ue=null),this.P)e:{for(var w=0,P=0;P<this.i.length;P++){t:{var B=this.i[P];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(w+=B,4096<w){w=P;break e}if(w===4096||P===this.i.length-1){w=P+1;break e}}w=1e3}else w=1e3;w=sf(this,oe,w),P=Fr(this.I),Dt(P,"RID",u),Dt(P,"CVER",22),this.D&&Dt(P,"X-HTTP-Session-Id",this.D),Zi(this,P),ue&&(this.O?w="headers="+encodeURIComponent(String(Hp(ue)))+"&"+w:this.m&&Zu(P,this.m,ue)),Ju(this.h,oe),this.Ua&&Dt(P,"TYPE","init"),this.P?(Dt(P,"$req",w),Dt(P,"SID","null"),oe.T=!0,Qu(oe,P,null)):Qu(oe,P,w),this.G=2}}else this.G==3&&(u?tf(this,u):this.i.length==0||Mp(this.h)||tf(this))};function tf(u,w){var P;w?P=w.l:P=u.U++;const B=Fr(u.I);Dt(B,"SID",u.K),Dt(B,"RID",P),Dt(B,"AID",u.T),Zi(u,B),u.m&&u.o&&Zu(B,u.m,u.o),P=new ua(u,u.j,P,u.B+1),u.m===null&&(P.H=u.o),w&&(u.i=w.D.concat(u.i)),w=sf(u,P,1e3),P.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ju(u.h,P),Qu(P,B,w)}function Zi(u,w){u.H&&W(u.H,function(P,B){Dt(w,B,P)}),u.l&&Vp({},function(P,B){Dt(w,B,P)})}function sf(u,w,P){P=Math.min(u.i.length,P);var B=u.l?T(u.l.Na,u.l,u):null;e:{var oe=u.i;let ue=-1;for(;;){const Pe=["count="+P];ue==-1?0<P?(ue=oe[0].g,Pe.push("ofs="+ue)):ue=0:Pe.push("ofs="+ue);let St=!0;for(let ls=0;ls<P;ls++){let Nt=oe[ls].g;const fs=oe[ls].map;if(Nt-=ue,0>Nt)ue=Math.max(0,oe[ls].g-100),St=!1;else try{I2(fs,Pe,"req"+Nt+"_")}catch{B&&B(fs)}}if(St){B=Pe.join("&");break e}}}return u=u.i.splice(0,P),w.D=u,B}function rf(u){if(!u.g&&!u.u){u.Y=1;var w=u.Fa;Te||le(),ce||(Te(),ce=!0),ee.add(w,u),u.v=0}}function tx(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=qi(T(u.Fa,u),lf(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,af(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=qi(T(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Is(10),Yo(this),af(this))};function sx(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function af(u){u.g=new ua(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var w=Fr(u.qa);Dt(w,"RID","rpc"),Dt(w,"SID",u.K),Dt(w,"AID",u.T),Dt(w,"CI",u.F?"0":"1"),!u.F&&u.ja&&Dt(w,"TO",u.ja),Dt(w,"TYPE","xmlhttp"),Zi(u,w),u.m&&u.o&&Zu(w,u.m,u.o),u.L&&(u.g.I=u.L);var P=u.g;u=u.ia,P.L=1,P.v=Go(Fr(w)),P.m=null,P.P=!0,Tp(P,u)}s.Za=function(){this.C!=null&&(this.C=null,Yo(this),tx(this),Is(19))};function Jo(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function nf(u,w){var P=null;if(u.g==w){Jo(u),sx(u),u.g=null;var B=2}else if(Xu(u.h,w))P=w.D,zp(u.h,w),B=1;else return;if(u.G!=0){if(w.o)if(B==1){P=w.m?w.m.length:0,w=Date.now()-w.F;var oe=u.B;B=Fo(),it(B,new Ep(B,P)),Xo(u)}else rf(u);else if(oe=w.s,oe==3||oe==0&&0<w.X||!(B==1&&P2(u,w)||B==2&&tx(u)))switch(P&&0<P.length&&(w=u.h,w.i=w.i.concat(P)),oe){case 1:an(u,5);break;case 4:an(u,10);break;case 3:an(u,6);break;default:an(u,2)}}}function lf(u,w){let P=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(P*=2),P*w}function an(u,w){if(u.j.info("Error code "+w),w==2){var P=T(u.fb,u),B=u.Xa;const oe=!B;B=new rn(B||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||qo(B,"https"),Go(B),oe?w2(B.toString(),P):k2(B.toString(),P)}else Is(2);u.G=0,u.l&&u.l.sa(w),of(u),ef(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Is(2)):(this.j.info("Failed to ping google.com"),Is(1))};function of(u){if(u.G=0,u.ka=[],u.l){const w=Lp(u.h);(w.length!=0||u.i.length!=0)&&(k(u.ka,w),k(u.ka,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.ra()}}function cf(u,w,P){var B=P instanceof rn?Fr(P):new rn(P);if(B.g!="")w&&(B.g=w+"."+B.g),Wo(B,B.s);else{var oe=d.location;B=oe.protocol,w=w?w+"."+oe.hostname:oe.hostname,oe=+oe.port;var ue=new rn(null);B&&qo(ue,B),w&&(ue.g=w),oe&&Wo(ue,oe),P&&(ue.l=P),B=ue}return P=u.D,w=u.ya,P&&w&&Dt(B,P,w),Dt(B,"VER",u.la),Zi(u,B),B}function df(u,w,P){if(w&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=u.Ca&&!u.pa?new qt(new Ho({eb:P})):new qt(u.pa),w.Ha(u.J),w}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function uf(){}s=uf.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Zo(){}Zo.prototype.g=function(u,w){return new Bs(u,w)};function Bs(u,w){nt.call(this),this.g=new Zp(w),this.l=u,this.h=w&&w.messageUrlParams||null,u=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(u?u["X-WebChannel-Content-Type"]=w.messageContentType:u={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(u?u["X-WebChannel-Client-Profile"]=w.va:u={"X-WebChannel-Client-Profile":w.va}),this.g.S=u,(u=w&&w.Sb)&&!z(u)&&(this.g.m=u),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!z(w)&&(this.g.D=w,u=this.h,u!==null&&w in u&&(u=this.h,w in u&&delete u[w])),this.j=new Vn(this)}f(Bs,nt),Bs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bs.prototype.close=function(){ex(this.g)},Bs.prototype.o=function(u){var w=this.g;if(typeof u=="string"){var P={};P.__data__=u,u=P}else this.u&&(P={},P.__data__=Re(u),u=P);w.i.push(new m2(w.Ya++,u)),w.G==3&&Xo(w)},Bs.prototype.N=function(){this.g.l=null,delete this.j,ex(this.g),delete this.g,Bs.aa.N.call(this)};function xf(u){qu.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var w=u.__sm__;if(w){e:{for(const P in w){u=P;break e}u=void 0}(this.i=u)&&(u=this.i,w=w!==null&&u in w?w[u]:void 0),this.data=w}else this.data=u}f(xf,qu);function mf(){Wu.call(this),this.status=1}f(mf,Wu);function Vn(u){this.g=u}f(Vn,uf),Vn.prototype.ua=function(){it(this.g,"a")},Vn.prototype.ta=function(u){it(this.g,new xf(u))},Vn.prototype.sa=function(u){it(this.g,new mf)},Vn.prototype.ra=function(){it(this.g,"b")},Zo.prototype.createWebChannel=Zo.prototype.g,Bs.prototype.send=Bs.prototype.o,Bs.prototype.open=Bs.prototype.m,Bs.prototype.close=Bs.prototype.close,HN=function(){return new Zo},GN=function(){return Fo()},WN=tn,Qm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Uo.NO_ERROR=0,Uo.TIMEOUT=8,Uo.HTTP_ERROR=6,Uc=Uo,Sp.COMPLETE="complete",qN=Sp,wp.EventType=Bi,Bi.OPEN="a",Bi.CLOSE="b",Bi.ERROR="c",Bi.MESSAGE="d",nt.prototype.listen=nt.prototype.K,gl=wp,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,$N=qt}).apply(typeof jc<"u"?jc:typeof self<"u"?self:typeof window<"u"?window:{});const sy="@firebase/firestore",ry="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}vs.UNAUTHENTICATED=new vs(null),vs.GOOGLE_CREDENTIALS=new vs("google-credentials-uid"),vs.FIRST_PARTY=new vs("first-party-uid"),vs.MOCK_USER=new vs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oi="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn=new gu("@firebase/firestore");function Bn(){return kn.logLevel}function Oe(s,...t){if(kn.logLevel<=xt.DEBUG){const r=t.map(w0);kn.debug(`Firestore (${Oi}): ${s}`,...r)}}function ra(s,...t){if(kn.logLevel<=xt.ERROR){const r=t.map(w0);kn.error(`Firestore (${Oi}): ${s}`,...r)}}function wi(s,...t){if(kn.logLevel<=xt.WARN){const r=t.map(w0);kn.warn(`Firestore (${Oi}): ${s}`,...r)}}function w0(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(s="Unexpected state"){const t=`FIRESTORE (${Oi}) INTERNAL ASSERTION FAILED: `+s;throw ra(t),new Error(t)}function yt(s,t){s||Ye()}function tt(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends lr{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class e1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(vs.UNAUTHENTICATED))}shutdown(){}}class t1{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class s1{constructor(t){this.t=t,this.currentUser=vs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){yt(this.o===void 0);let a=this.i;const i=x=>this.i!==a?(a=this.i,r(x)):Promise.resolve();let o=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new _r,t.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const x=o;t.enqueueRetryable(async()=>{await x.promise,await i(this.currentUser)})},d=x=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(x=>d(x)),setTimeout(()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?d(x):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new _r)}},0),l()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==t?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(yt(typeof a.accessToken=="string"),new QN(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return yt(t===null||typeof t=="string"),new vs(t)}}class r1{constructor(t,r,a){this.l=t,this.h=r,this.P=a,this.type="FirstParty",this.user=vs.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class a1{constructor(t,r,a){this.l=t,this.h=r,this.P=a}getToken(){return Promise.resolve(new r1(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(vs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ay{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n1{constructor(t,r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,qs(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,r){yt(this.o===void 0);const a=o=>{o.error!=null&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,Oe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?r(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>a(o))};const i=o=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new ay(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(yt(typeof r.token=="string"),this.R=r.token,new ay(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let a=0;a<s;a++)r[a]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const i=i1(40);for(let o=0;o<i.length;++o)a.length<20&&i[o]<r&&(a+=t.charAt(i[o]%62))}return a}}function lt(s,t){return s<t?-1:s>t?1:0}function Km(s,t){let r=0;for(;r<s.length&&r<t.length;){const a=s.codePointAt(r),i=t.codePointAt(r);if(a!==i){if(a<128&&i<128)return lt(a,i);{const o=KN(),l=l1(o.encode(ny(s,r)),o.encode(ny(t,r)));return l!==0?l:lt(a,i)}}r+=a>65535?2:1}return lt(s.length,t.length)}function ny(s,t){return s.codePointAt(t)>65535?s.substring(t,t+2):s.substring(t,t+1)}function l1(s,t){for(let r=0;r<s.length&&r<t.length;++r)if(s[r]!==t[r])return lt(s[r],t[r]);return lt(s.length,t.length)}function ki(s,t,r){return s.length===t.length&&s.every((a,i)=>r(a,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=-62135596800,ly=1e6;class Kt{static now(){return Kt.fromMillis(Date.now())}static fromDate(t){return Kt.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),a=Math.floor((t-1e3*r)*ly);return new Kt(r,a)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Ae(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ae(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<iy)throw new Ae(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ae(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ly}_compareTo(t){return this.seconds===t.seconds?lt(this.nanoseconds,t.nanoseconds):lt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-iy;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{static fromTimestamp(t){return new Je(t)}static min(){return new Je(new Kt(0,0))}static max(){return new Je(new Kt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="__name__";class kr{constructor(t,r,a){r===void 0?r=0:r>t.length&&Ye(),a===void 0?a=t.length-r:a>t.length-r&&Ye(),this.segments=t,this.offset=r,this.len=a}get length(){return this.len}isEqual(t){return kr.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof kr?t.forEach(a=>{r.push(a)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,a=this.limit();r<a;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const a=Math.min(t.length,r.length);for(let i=0;i<a;i++){const o=kr.compareSegments(t.get(i),r.get(i));if(o!==0)return o}return lt(t.length,r.length)}static compareSegments(t,r){const a=kr.isNumericId(t),i=kr.isNumericId(r);return a&&!i?-1:!a&&i?1:a&&i?kr.extractNumericId(t).compare(kr.extractNumericId(r)):Km(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return La.fromString(t.substring(4,t.length-2))}}class _t extends kr{construct(t,r,a){return new _t(t,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const a of t){if(a.indexOf("//")>=0)throw new Ae(fe.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(i=>i.length>0))}return new _t(r)}static emptyPath(){return new _t([])}}const o1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ds extends kr{construct(t,r,a){return new ds(t,r,a)}static isValidIdentifier(t){return o1.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ds.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===oy}static keyField(){return new ds([oy])}static fromServerFormat(t){const r=[];let a="",i=0;const o=()=>{if(a.length===0)throw new Ae(fe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let l=!1;for(;i<t.length;){const d=t[i];if(d==="\\"){if(i+1===t.length)throw new Ae(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const x=t[i+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new Ae(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=x,i+=2}else d==="`"?(l=!l,i++):d!=="."||l?(a+=d,i++):(o(),i++)}if(o(),l)throw new Ae(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ds(r)}static emptyPath(){return new ds([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this.path=t}static fromPath(t){return new Ke(_t.fromString(t))}static fromName(t){return new Ke(_t.fromString(t).popFirst(5))}static empty(){return new Ke(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_t.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return _t.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ke(new _t(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=-1;function c1(s,t){const r=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,i=Je.fromTimestamp(a===1e9?new Kt(r+1,0):new Kt(r,a));return new $a(i,Ke.empty(),t)}function d1(s){return new $a(s.readTime,s.key,no)}class $a{constructor(t,r,a){this.readTime=t,this.documentKey=r,this.largestBatchId=a}static min(){return new $a(Je.min(),Ke.empty(),no)}static max(){return new $a(Je.max(),Ke.empty(),no)}}function u1(s,t){let r=s.readTime.compareTo(t.readTime);return r!==0?r:(r=Ke.comparator(s.documentKey,t.documentKey),r!==0?r:lt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class m1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zi(s){if(s.code!==fe.FAILED_PRECONDITION||s.message!==x1)throw s;Oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new ye((a,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(a,i)},this.catchCallback=o=>{this.wrapFailure(r,o).next(a,i)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof ye?r:ye.resolve(r)}catch(r){return ye.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):ye.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):ye.reject(r)}static resolve(t){return new ye((r,a)=>{r(t)})}static reject(t){return new ye((r,a)=>{a(t)})}static waitFor(t){return new ye((r,a)=>{let i=0,o=0,l=!1;t.forEach(d=>{++i,d.next(()=>{++o,l&&o===i&&r()},x=>a(x))}),l=!0,o===i&&r()})}static or(t){let r=ye.resolve(!1);for(const a of t)r=r.next(i=>i?ye.resolve(i):a());return r}static forEach(t,r){const a=[];return t.forEach((i,o)=>{a.push(r.call(this,i,o))}),this.waitFor(a)}static mapArray(t,r){return new ye((a,i)=>{const o=t.length,l=new Array(o);let d=0;for(let x=0;x<o;x++){const p=x;r(t[p]).next(N=>{l[p]=N,++d,d===o&&a(l)},N=>i(N))}})}static doWhile(t,r){return new ye((a,i)=>{const o=()=>{t()===!0?r().next(()=>{o()},i):a()};o()})}}function h1(s){const t=s.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Li(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=a=>this.oe(a),this._e=a=>r.writeSequenceNumber(a))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}vu.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=-1;function Io(s){return s==null}function _d(s){return s===0&&1/s==-1/0}function p1(s){return typeof s=="number"&&Number.isInteger(s)&&!_d(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="";function f1(s){let t="";for(let r=0;r<s.length;r++)t.length>0&&(t=cy(t)),t=g1(s.get(r),t);return cy(t)}function g1(s,t){let r=t;const a=s.length;for(let i=0;i<a;i++){const o=s.charAt(i);switch(o){case"\0":r+="";break;case XN:r+="";break;default:r+=o}}return r}function cy(s){return s+XN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(s){let t=0;for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&t++;return t}function Za(s,t){for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&t(r,s[r])}function JN(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t,r){this.comparator=t,this.root=r||cs.EMPTY}insert(t,r){return new $t(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,cs.BLACK,null,null))}remove(t){return new $t(this.comparator,this.root.remove(t,this.comparator).copy(null,null,cs.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(t){let r=0,a=this.root;for(;!a.isEmpty();){const i=this.comparator(t,a.key);if(i===0)return r+a.left.size;i<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,a)=>(t(r,a),!1))}toString(){const t=[];return this.inorderTraversal((r,a)=>(t.push(`${r}:${a}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new vc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new vc(this.root,t,this.comparator,!1)}getReverseIterator(){return new vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new vc(this.root,t,this.comparator,!0)}}class vc{constructor(t,r,a,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=r?a(t.key,r):1,r&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class cs{constructor(t,r,a,i,o){this.key=t,this.value=r,this.color=a??cs.RED,this.left=i??cs.EMPTY,this.right=o??cs.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,a,i,o){return new cs(t??this.key,r??this.value,a??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,a){let i=this;const o=a(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,r,a),null):o===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(t,r,a)),i.fixUp()}removeMin(){if(this.left.isEmpty())return cs.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let a,i=this;if(r(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(t,i.key)===0){if(i.right.isEmpty())return cs.EMPTY;a=i.right.min(),i=i.copy(a.key,a.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,cs.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,cs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ye();const t=this.left.check();if(t!==this.right.check())throw Ye();return t+(this.isRed()?0:1)}}cs.EMPTY=null,cs.RED=!0,cs.BLACK=!1;cs.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye()}get value(){throw Ye()}get color(){throw Ye()}get left(){throw Ye()}get right(){throw Ye()}copy(t,r,a,i,o){return this}insert(t,r,a){return new cs(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(t){this.comparator=t,this.data=new $t(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,a)=>(t(r),!1))}forEachInRange(t,r){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const i=a.getNext();if(this.comparator(i.key,t[1])>=0)return;r(i.key)}}forEachWhile(t,r){let a;for(a=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new uy(this.data.getIterator())}getIteratorFrom(t){return new uy(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(a=>{r=r.add(a)}),r}isEqual(t){if(!(t instanceof ts)||this.size!==t.size)return!1;const r=this.data.getIterator(),a=t.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=a.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new ts(this.comparator);return r.data=t,r}}class uy{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(t){this.fields=t,t.sort(ds.comparator)}static empty(){return new Gs([])}unionWith(t){let r=new ts(ds.comparator);for(const a of this.fields)r=r.add(a);for(const a of t)r=r.add(a);return new Gs(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return ki(this.fields,t.fields,(r,a)=>r.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ZN("Invalid base64 string: "+o):o}}(t);return new ps(r)}static fromUint8Array(t){const r=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(t);return new ps(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const a=new Uint8Array(r.length);for(let i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return lt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ps.EMPTY_BYTE_STRING=new ps("");const y1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qa(s){if(yt(!!s),typeof s=="string"){let t=0;const r=y1.exec(s);if(yt(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),t=Number(i)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:Ht(s.seconds),nanos:Ht(s.nanos)}}function Ht(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Wa(s){return typeof s=="string"?ps.fromBase64String(s):ps.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="server_timestamp",tw="__type__",sw="__previous_value__",rw="__local_write_time__";function C0(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[tw])===null||r===void 0?void 0:r.stringValue)===ew}function Nu(s){const t=s.mapValue.fields[sw];return C0(t)?Nu(t):t}function io(s){const t=qa(s.mapValue.fields[rw].timestampValue);return new Kt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(t,r,a,i,o,l,d,x,p){this.databaseId=t,this.appId=r,this.persistenceKey=a,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=x,this.useFetchStreams=p}}const Pd="(default)";class lo{constructor(t,r){this.projectId=t,this.database=r||Pd}static empty(){return new lo("","")}get isDefaultDatabase(){return this.database===Pd}isEqual(t){return t instanceof lo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="__type__",nw="__max__",Nc={mapValue:{fields:{__type__:{stringValue:nw}}}},iw="__vector__",Td="value";function Ga(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?C0(s)?4:v1(s)?9007199254740991:j1(s)?10:11:Ye()}function Rr(s,t){if(s===t)return!0;const r=Ga(s);if(r!==Ga(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return io(s).isEqual(io(t));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=qa(i.timestampValue),d=qa(o.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(i,o){return Wa(i.bytesValue).isEqual(Wa(o.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(i,o){return Ht(i.geoPointValue.latitude)===Ht(o.geoPointValue.latitude)&&Ht(i.geoPointValue.longitude)===Ht(o.geoPointValue.longitude)}(s,t);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ht(i.integerValue)===Ht(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=Ht(i.doubleValue),d=Ht(o.doubleValue);return l===d?_d(l)===_d(d):isNaN(l)&&isNaN(d)}return!1}(s,t);case 9:return ki(s.arrayValue.values||[],t.arrayValue.values||[],Rr);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},d=o.mapValue.fields||{};if(dy(l)!==dy(d))return!1;for(const x in l)if(l.hasOwnProperty(x)&&(d[x]===void 0||!Rr(l[x],d[x])))return!1;return!0}(s,t);default:return Ye()}}function oo(s,t){return(s.values||[]).find(r=>Rr(r,t))!==void 0}function Ci(s,t){if(s===t)return 0;const r=Ga(s),a=Ga(t);if(r!==a)return lt(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return lt(s.booleanValue,t.booleanValue);case 2:return function(o,l){const d=Ht(o.integerValue||o.doubleValue),x=Ht(l.integerValue||l.doubleValue);return d<x?-1:d>x?1:d===x?0:isNaN(d)?isNaN(x)?0:-1:1}(s,t);case 3:return xy(s.timestampValue,t.timestampValue);case 4:return xy(io(s),io(t));case 5:return Km(s.stringValue,t.stringValue);case 6:return function(o,l){const d=Wa(o),x=Wa(l);return d.compareTo(x)}(s.bytesValue,t.bytesValue);case 7:return function(o,l){const d=o.split("/"),x=l.split("/");for(let p=0;p<d.length&&p<x.length;p++){const N=lt(d[p],x[p]);if(N!==0)return N}return lt(d.length,x.length)}(s.referenceValue,t.referenceValue);case 8:return function(o,l){const d=lt(Ht(o.latitude),Ht(l.latitude));return d!==0?d:lt(Ht(o.longitude),Ht(l.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return my(s.arrayValue,t.arrayValue);case 10:return function(o,l){var d,x,p,N;const I=o.fields||{},T=l.fields||{},A=(d=I[Td])===null||d===void 0?void 0:d.arrayValue,f=(x=T[Td])===null||x===void 0?void 0:x.arrayValue,L=lt(((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0,((N=f==null?void 0:f.values)===null||N===void 0?void 0:N.length)||0);return L!==0?L:my(A,f)}(s.mapValue,t.mapValue);case 11:return function(o,l){if(o===Nc.mapValue&&l===Nc.mapValue)return 0;if(o===Nc.mapValue)return 1;if(l===Nc.mapValue)return-1;const d=o.fields||{},x=Object.keys(d),p=l.fields||{},N=Object.keys(p);x.sort(),N.sort();for(let I=0;I<x.length&&I<N.length;++I){const T=Km(x[I],N[I]);if(T!==0)return T;const A=Ci(d[x[I]],p[N[I]]);if(A!==0)return A}return lt(x.length,N.length)}(s.mapValue,t.mapValue);default:throw Ye()}}function xy(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return lt(s,t);const r=qa(s),a=qa(t),i=lt(r.seconds,a.seconds);return i!==0?i:lt(r.nanos,a.nanos)}function my(s,t){const r=s.values||[],a=t.values||[];for(let i=0;i<r.length&&i<a.length;++i){const o=Ci(r[i],a[i]);if(o)return o}return lt(r.length,a.length)}function Ii(s){return Ym(s)}function Ym(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(r){const a=qa(r);return`time(${a.seconds},${a.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(r){return Wa(r).toBase64()}(s.bytesValue):"referenceValue"in s?function(r){return Ke.fromName(r).toString()}(s.referenceValue):"geoPointValue"in s?function(r){return`geo(${r.latitude},${r.longitude})`}(s.geoPointValue):"arrayValue"in s?function(r){let a="[",i=!0;for(const o of r.values||[])i?i=!1:a+=",",a+=Ym(o);return a+"]"}(s.arrayValue):"mapValue"in s?function(r){const a=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const l of a)o?o=!1:i+=",",i+=`${l}:${Ym(r.fields[l])}`;return i+"}"}(s.mapValue):Ye()}function Bc(s){switch(Ga(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Nu(s);return t?16+Bc(t):16;case 5:return 2*s.stringValue.length;case 6:return Wa(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((i,o)=>i+Bc(o),0)}(s.arrayValue);case 10:case 11:return function(a){let i=0;return Za(a.fields,(o,l)=>{i+=o.length+Bc(l)}),i}(s.mapValue);default:throw Ye()}}function hy(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function Xm(s){return!!s&&"integerValue"in s}function I0(s){return!!s&&"arrayValue"in s}function py(s){return!!s&&"nullValue"in s}function fy(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function $c(s){return!!s&&"mapValue"in s}function j1(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[aw])===null||r===void 0?void 0:r.stringValue)===iw}function Al(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return Za(s.mapValue.fields,(r,a)=>t.mapValue.fields[r]=Al(a)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(s.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Al(s.arrayValue.values[r]);return t}return Object.assign({},s)}function v1(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===nw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(t){this.value=t}static empty(){return new Ss({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let a=0;a<t.length-1;++a)if(r=(r.mapValue.fields||{})[t.get(a)],!$c(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Al(r)}setAll(t){let r=ds.emptyPath(),a={},i=[];t.forEach((l,d)=>{if(!r.isImmediateParentOf(d)){const x=this.getFieldsMap(r);this.applyChanges(x,a,i),a={},i=[],r=d.popLast()}l?a[d.lastSegment()]=Al(l):i.push(d.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,a,i)}delete(t){const r=this.field(t.popLast());$c(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return Rr(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<t.length;++a){let i=r.mapValue.fields[t.get(a)];$c(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[t.get(a)]=i),r=i}return r.mapValue.fields}applyChanges(t,r,a){Za(r,(i,o)=>t[i]=o);for(const i of a)delete t[i]}clone(){return new Ss(Al(this.value))}}function lw(s){const t=[];return Za(s.fields,(r,a)=>{const i=new ds([r]);if($c(a)){const o=lw(a.mapValue).fields;if(o.length===0)t.push(i);else for(const l of o)t.push(i.child(l))}else t.push(i)}),new Gs(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(t,r,a,i,o,l,d){this.key=t,this.documentType=r,this.version=a,this.readTime=i,this.createTime=o,this.data=l,this.documentState=d}static newInvalidDocument(t){return new ns(t,0,Je.min(),Je.min(),Je.min(),Ss.empty(),0)}static newFoundDocument(t,r,a,i){return new ns(t,1,r,Je.min(),a,i,0)}static newNoDocument(t,r){return new ns(t,2,r,Je.min(),Je.min(),Ss.empty(),0)}static newUnknownDocument(t,r){return new ns(t,3,r,Je.min(),Je.min(),Ss.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ss.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Je.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ns&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ns(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(t,r){this.position=t,this.inclusive=r}}function gy(s,t,r){let a=0;for(let i=0;i<s.position.length;i++){const o=t[i],l=s.position[i];if(o.field.isKeyField()?a=Ke.comparator(Ke.fromName(l.referenceValue),r.key):a=Ci(l,r.data.field(o.field)),o.dir==="desc"&&(a*=-1),a!==0)break}return a}function yy(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let r=0;r<s.position.length;r++)if(!Rr(s.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(t,r="asc"){this.field=t,this.dir=r}}function N1(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{}class Jt extends ow{constructor(t,r,a){super(),this.field=t,this.op=r,this.value=a}static create(t,r,a){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,a):new k1(t,r,a):r==="array-contains"?new E1(t,a):r==="in"?new S1(t,a):r==="not-in"?new _1(t,a):r==="array-contains-any"?new P1(t,a):new Jt(t,r,a)}static createKeyFieldInFilter(t,r,a){return r==="in"?new C1(t,a):new I1(t,a)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Ci(r,this.value)):r!==null&&Ga(this.value)===Ga(r)&&this.matchesComparison(Ci(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class br extends ow{constructor(t,r){super(),this.filters=t,this.op=r,this.ce=null}static create(t,r){return new br(t,r)}matches(t){return cw(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function cw(s){return s.op==="and"}function dw(s){return w1(s)&&cw(s)}function w1(s){for(const t of s.filters)if(t instanceof br)return!1;return!0}function Jm(s){if(s instanceof Jt)return s.field.canonicalString()+s.op.toString()+Ii(s.value);if(dw(s))return s.filters.map(t=>Jm(t)).join(",");{const t=s.filters.map(r=>Jm(r)).join(",");return`${s.op}(${t})`}}function uw(s,t){return s instanceof Jt?function(a,i){return i instanceof Jt&&a.op===i.op&&a.field.isEqual(i.field)&&Rr(a.value,i.value)}(s,t):s instanceof br?function(a,i){return i instanceof br&&a.op===i.op&&a.filters.length===i.filters.length?a.filters.reduce((o,l,d)=>o&&uw(l,i.filters[d]),!0):!1}(s,t):void Ye()}function xw(s){return s instanceof Jt?function(r){return`${r.field.canonicalString()} ${r.op} ${Ii(r.value)}`}(s):s instanceof br?function(r){return r.op.toString()+" {"+r.getFilters().map(xw).join(" ,")+"}"}(s):"Filter"}class k1 extends Jt{constructor(t,r,a){super(t,r,a),this.key=Ke.fromName(a.referenceValue)}matches(t){const r=Ke.comparator(t.key,this.key);return this.matchesComparison(r)}}class C1 extends Jt{constructor(t,r){super(t,"in",r),this.keys=mw("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class I1 extends Jt{constructor(t,r){super(t,"not-in",r),this.keys=mw("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function mw(s,t){var r;return(((r=t.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(a=>Ke.fromName(a.referenceValue))}class E1 extends Jt{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return I0(r)&&oo(r.arrayValue,this.value)}}class S1 extends Jt{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&oo(this.value.arrayValue,r)}}class _1 extends Jt{constructor(t,r){super(t,"not-in",r)}matches(t){if(oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&!oo(this.value.arrayValue,r)}}class P1 extends Jt{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!I0(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>oo(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(t,r=null,a=[],i=[],o=null,l=null,d=null){this.path=t,this.collectionGroup=r,this.orderBy=a,this.filters=i,this.limit=o,this.startAt=l,this.endAt=d,this.le=null}}function by(s,t=null,r=[],a=[],i=null,o=null,l=null){return new T1(s,t,r,a,i,o,l)}function E0(s){const t=tt(s);if(t.le===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(a=>Jm(a)).join(","),r+="|ob:",r+=t.orderBy.map(a=>function(o){return o.field.canonicalString()+o.dir}(a)).join(","),Io(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>Ii(a)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>Ii(a)).join(",")),t.le=r}return t.le}function S0(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<s.orderBy.length;r++)if(!N1(s.orderBy[r],t.orderBy[r]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let r=0;r<s.filters.length;r++)if(!uw(s.filters[r],t.filters[r]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!yy(s.startAt,t.startAt)&&yy(s.endAt,t.endAt)}function Zm(s){return Ke.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t,r=null,a=[],i=[],o=null,l="F",d=null,x=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=i,this.limit=o,this.limitType=l,this.startAt=d,this.endAt=x,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function D1(s,t,r,a,i,o,l,d){return new Vi(s,t,r,a,i,o,l,d)}function wu(s){return new Vi(s)}function jy(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function hw(s){return s.collectionGroup!==null}function Rl(s){const t=tt(s);if(t.he===null){t.he=[];const r=new Set;for(const o of t.explicitOrderBy)t.he.push(o),r.add(o.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new ts(ds.comparator);return l.filters.forEach(x=>{x.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(t).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||t.he.push(new co(o,a))}),r.has(ds.keyField().canonicalString())||t.he.push(new co(ds.keyField(),a))}return t.he}function Pr(s){const t=tt(s);return t.Pe||(t.Pe=A1(t,Rl(s))),t.Pe}function A1(s,t){if(s.limitType==="F")return by(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new co(i.field,o)});const r=s.endAt?new Dd(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Dd(s.startAt.position,s.startAt.inclusive):null;return by(s.path,s.collectionGroup,t,s.filters,s.limit,r,a)}}function eh(s,t){const r=s.filters.concat([t]);return new Vi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),r,s.limit,s.limitType,s.startAt,s.endAt)}function Ad(s,t,r){return new Vi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,r,s.startAt,s.endAt)}function ku(s,t){return S0(Pr(s),Pr(t))&&s.limitType===t.limitType}function pw(s){return`${E0(Pr(s))}|lt:${s.limitType}`}function $n(s){return`Query(target=${function(r){let a=r.path.canonicalString();return r.collectionGroup!==null&&(a+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(a+=`, filters: [${r.filters.map(i=>xw(i)).join(", ")}]`),Io(r.limit)||(a+=", limit: "+r.limit),r.orderBy.length>0&&(a+=`, orderBy: [${r.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),r.startAt&&(a+=", startAt: ",a+=r.startAt.inclusive?"b:":"a:",a+=r.startAt.position.map(i=>Ii(i)).join(",")),r.endAt&&(a+=", endAt: ",a+=r.endAt.inclusive?"a:":"b:",a+=r.endAt.position.map(i=>Ii(i)).join(",")),`Target(${a})`}(Pr(s))}; limitType=${s.limitType})`}function Cu(s,t){return t.isFoundDocument()&&function(a,i){const o=i.key.path;return a.collectionGroup!==null?i.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(o):Ke.isDocumentKey(a.path)?a.path.isEqual(o):a.path.isImmediateParentOf(o)}(s,t)&&function(a,i){for(const o of Rl(a))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(s,t)&&function(a,i){for(const o of a.filters)if(!o.matches(i))return!1;return!0}(s,t)&&function(a,i){return!(a.startAt&&!function(l,d,x){const p=gy(l,d,x);return l.inclusive?p<=0:p<0}(a.startAt,Rl(a),i)||a.endAt&&!function(l,d,x){const p=gy(l,d,x);return l.inclusive?p>=0:p>0}(a.endAt,Rl(a),i))}(s,t)}function R1(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function fw(s){return(t,r)=>{let a=!1;for(const i of Rl(s)){const o=M1(i,t,r);if(o!==0)return o;a=a||i.field.isKeyField()}return 0}}function M1(s,t,r){const a=s.field.isKeyField()?Ke.comparator(t.key,r.key):function(o,l,d){const x=l.data.field(o),p=d.data.field(o);return x!==null&&p!==null?Ci(x,p):Ye()}(s.field,t,r);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a!==void 0){for(const[i,o]of a)if(this.equalsFn(i,t))return o}}has(t){return this.get(t)!==void 0}set(t,r){const a=this.mapKeyFn(t),i=this.inner[a];if(i===void 0)return this.inner[a]=[[t,r]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,r]);i.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return!1;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],t))return a.length===1?delete this.inner[r]:a.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Za(this.inner,(r,a)=>{for(const[i,o]of a)t(i,o)})}isEmpty(){return JN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=new $t(Ke.comparator);function aa(){return O1}const gw=new $t(Ke.comparator);function yl(...s){let t=gw;for(const r of s)t=t.insert(r.key,r);return t}function yw(s){let t=gw;return s.forEach((r,a)=>t=t.insert(r,a.overlayedDocument)),t}function mn(){return Ml()}function bw(){return Ml()}function Ml(){return new Rn(s=>s.toString(),(s,t)=>s.isEqual(t))}const z1=new $t(Ke.comparator),L1=new ts(Ke.comparator);function mt(...s){let t=L1;for(const r of s)t=t.add(r);return t}const V1=new ts(lt);function F1(){return V1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_d(t)?"-0":t}}function jw(s){return{integerValue:""+s}}function vw(s,t){return p1(t)?jw(t):_0(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(){this._=void 0}}function U1(s,t,r){return s instanceof uo?function(i,o){const l={fields:{[tw]:{stringValue:ew},[rw]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&C0(o)&&(o=Nu(o)),o&&(l.fields[sw]=o),{mapValue:l}}(r,t):s instanceof xo?ww(s,t):s instanceof mo?kw(s,t):function(i,o){const l=Nw(i,o),d=vy(l)+vy(i.Ie);return Xm(l)&&Xm(i.Ie)?jw(d):_0(i.serializer,d)}(s,t)}function B1(s,t,r){return s instanceof xo?ww(s,t):s instanceof mo?kw(s,t):r}function Nw(s,t){return s instanceof ho?function(a){return Xm(a)||function(o){return!!o&&"doubleValue"in o}(a)}(t)?t:{integerValue:0}:null}class uo extends Iu{}class xo extends Iu{constructor(t){super(),this.elements=t}}function ww(s,t){const r=Cw(t);for(const a of s.elements)r.some(i=>Rr(i,a))||r.push(a);return{arrayValue:{values:r}}}class mo extends Iu{constructor(t){super(),this.elements=t}}function kw(s,t){let r=Cw(t);for(const a of s.elements)r=r.filter(i=>!Rr(i,a));return{arrayValue:{values:r}}}class ho extends Iu{constructor(t,r){super(),this.serializer=t,this.Ie=r}}function vy(s){return Ht(s.integerValue||s.doubleValue)}function Cw(s){return I0(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(t,r){this.field=t,this.transform=r}}function $1(s,t){return s.field.isEqual(t.field)&&function(a,i){return a instanceof xo&&i instanceof xo||a instanceof mo&&i instanceof mo?ki(a.elements,i.elements,Rr):a instanceof ho&&i instanceof ho?Rr(a.Ie,i.Ie):a instanceof uo&&i instanceof uo}(s.transform,t.transform)}class q1{constructor(t,r){this.version=t,this.transformResults=r}}class us{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new us}static exists(t){return new us(void 0,t)}static updateTime(t){return new us(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function qc(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Eu{}function Ew(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new Su(s.key,us.none()):new Eo(s.key,s.data,us.none());{const r=s.data,a=Ss.empty();let i=new ts(ds.comparator);for(let o of t.fields)if(!i.has(o)){let l=r.field(o);l===null&&o.length>1&&(o=o.popLast(),l=r.field(o)),l===null?a.delete(o):a.set(o,l),i=i.add(o)}return new en(s.key,a,new Gs(i.toArray()),us.none())}}function W1(s,t,r){s instanceof Eo?function(i,o,l){const d=i.value.clone(),x=wy(i.fieldTransforms,o,l.transformResults);d.setAll(x),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(s,t,r):s instanceof en?function(i,o,l){if(!qc(i.precondition,o))return void o.convertToUnknownDocument(l.version);const d=wy(i.fieldTransforms,o,l.transformResults),x=o.data;x.setAll(Sw(i)),x.setAll(d),o.convertToFoundDocument(l.version,x).setHasCommittedMutations()}(s,t,r):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,t,r)}function Ol(s,t,r,a){return s instanceof Eo?function(o,l,d,x){if(!qc(o.precondition,l))return d;const p=o.value.clone(),N=ky(o.fieldTransforms,x,l);return p.setAll(N),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(s,t,r,a):s instanceof en?function(o,l,d,x){if(!qc(o.precondition,l))return d;const p=ky(o.fieldTransforms,x,l),N=l.data;return N.setAll(Sw(o)),N.setAll(p),l.convertToFoundDocument(l.version,N).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(I=>I.field))}(s,t,r,a):function(o,l,d){return qc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d}(s,t,r)}function G1(s,t){let r=null;for(const a of s.fieldTransforms){const i=t.data.field(a.field),o=Nw(a.transform,i||null);o!=null&&(r===null&&(r=Ss.empty()),r.set(a.field,o))}return r||null}function Ny(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(a,i){return a===void 0&&i===void 0||!(!a||!i)&&ki(a,i,(o,l)=>$1(o,l))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class Eo extends Eu{constructor(t,r,a,i=[]){super(),this.key=t,this.value=r,this.precondition=a,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class en extends Eu{constructor(t,r,a,i,o=[]){super(),this.key=t,this.data=r,this.fieldMask=a,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Sw(s){const t=new Map;return s.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=s.data.field(r);t.set(r,a)}}),t}function wy(s,t,r){const a=new Map;yt(s.length===r.length);for(let i=0;i<r.length;i++){const o=s[i],l=o.transform,d=t.data.field(o.field);a.set(o.field,B1(l,d,r[i]))}return a}function ky(s,t,r){const a=new Map;for(const i of s){const o=i.transform,l=r.data.field(i.field);a.set(i.field,U1(o,l,t))}return a}class Su extends Eu{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _w extends Eu{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(t,r,a,i){this.batchId=t,this.localWriteTime=r,this.baseMutations=a,this.mutations=i}applyToRemoteDocument(t,r){const a=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&W1(o,t,a[i])}}applyToLocalView(t,r){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(r=Ol(a,t,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(r=Ol(a,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const a=bw();return this.mutations.forEach(i=>{const o=t.get(i.key),l=o.overlayedDocument;let d=this.applyToLocalView(l,o.mutatedFields);d=r.has(i.key)?null:d;const x=Ew(l,d);x!==null&&a.set(i.key,x),l.isValidDocument()||l.convertToNoDocument(Je.min())}),a}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),mt())}isEqual(t){return this.batchId===t.batchId&&ki(this.mutations,t.mutations,(r,a)=>Ny(r,a))&&ki(this.baseMutations,t.baseMutations,(r,a)=>Ny(r,a))}}class P0{constructor(t,r,a,i){this.batch=t,this.commitVersion=r,this.mutationResults=a,this.docVersions=i}static from(t,r,a){yt(t.mutations.length===a.length);let i=function(){return z1}();const o=t.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,a[l].version);return new P0(t,r,a,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,gt;function Pw(s){switch(s){case fe.OK:return Ye();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return Ye()}}function Tw(s){if(s===void 0)return ra("GRPC error has no .code"),fe.UNKNOWN;switch(s){case Yt.OK:return fe.OK;case Yt.CANCELLED:return fe.CANCELLED;case Yt.UNKNOWN:return fe.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return fe.INTERNAL;case Yt.UNAVAILABLE:return fe.UNAVAILABLE;case Yt.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Yt.NOT_FOUND:return fe.NOT_FOUND;case Yt.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Yt.ABORTED:return fe.ABORTED;case Yt.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Yt.DATA_LOSS:return fe.DATA_LOSS;default:return Ye()}}(gt=Yt||(Yt={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=new La([4294967295,4294967295],0);function Cy(s){const t=KN().encode(s),r=new BN;return r.update(t),new Uint8Array(r.digest())}function Iy(s){const t=new DataView(s.buffer),r=t.getUint32(0,!0),a=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new La([r,a],0),new La([i,o],0)]}class T0{constructor(t,r,a){if(this.bitmap=t,this.padding=r,this.hashCount=a,r<0||r>=8)throw new bl(`Invalid padding: ${r}`);if(a<0)throw new bl(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new bl(`Invalid hash count: ${a}`);if(t.length===0&&r!==0)throw new bl(`Invalid padding when bitmap length is 0: ${r}`);this.Ee=8*t.length-r,this.de=La.fromNumber(this.Ee)}Ae(t,r,a){let i=t.add(r.multiply(La.fromNumber(a)));return i.compare(Y1)===1&&(i=new La([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const r=Cy(t),[a,i]=Iy(r);for(let o=0;o<this.hashCount;o++){const l=this.Ae(a,i,o);if(!this.Re(l))return!1}return!0}static create(t,r,a){const i=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),l=new T0(o,i,r);return a.forEach(d=>l.insert(d)),l}insert(t){if(this.Ee===0)return;const r=Cy(t),[a,i]=Iy(r);for(let o=0;o<this.hashCount;o++){const l=this.Ae(a,i,o);this.Ve(l)}}Ve(t){const r=Math.floor(t/8),a=t%8;this.bitmap[r]|=1<<a}}class bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(t,r,a,i,o){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,r,a){const i=new Map;return i.set(t,So.createSynthesizedTargetChangeForCurrentChange(t,r,a)),new _u(Je.min(),i,new $t(lt),aa(),mt())}}class So{constructor(t,r,a,i,o){this.resumeToken=t,this.current=r,this.addedDocuments=a,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,r,a){return new So(a,r,mt(),mt(),mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t,r,a,i){this.me=t,this.removedTargetIds=r,this.key=a,this.fe=i}}class Dw{constructor(t,r){this.targetId=t,this.ge=r}}class Aw{constructor(t,r,a=ps.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=r,this.resumeToken=a,this.cause=i}}class Ey{constructor(){this.pe=0,this.ye=Sy(),this.we=ps.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=mt(),r=mt(),a=mt();return this.ye.forEach((i,o)=>{switch(o){case 0:t=t.add(i);break;case 2:r=r.add(i);break;case 1:a=a.add(i);break;default:Ye()}}),new So(this.we,this.Se,t,r,a)}Me(){this.be=!1,this.ye=Sy()}xe(t,r){this.be=!0,this.ye=this.ye.insert(t,r)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,yt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class X1{constructor(t){this.ke=t,this.qe=new Map,this.Qe=aa(),this.$e=wc(),this.Ue=wc(),this.Ke=new $t(lt)}We(t){for(const r of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(r,t.fe):this.ze(r,t.key,t.fe);for(const r of t.removedTargetIds)this.ze(r,t.key,t.fe)}je(t){this.forEachTarget(t,r=>{const a=this.He(r);switch(t.state){case 0:this.Je(r)&&a.Ce(t.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(t.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(r);break;case 3:this.Je(r)&&(a.Le(),a.Ce(t.resumeToken));break;case 4:this.Je(r)&&(this.Ye(r),a.Ce(t.resumeToken));break;default:Ye()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.qe.forEach((a,i)=>{this.Je(i)&&r(i)})}Ze(t){const r=t.targetId,a=t.ge.count,i=this.Xe(r);if(i){const o=i.target;if(Zm(o))if(a===0){const l=new Ke(o.path);this.ze(r,l,ns.newNoDocument(l,Je.min()))}else yt(a===1);else{const l=this.et(r);if(l!==a){const d=this.tt(t),x=d?this.nt(d,t,l):1;if(x!==0){this.Ye(r);const p=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(r,p)}}}}}tt(t){const r=t.ge.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:a="",padding:i=0},hashCount:o=0}=r;let l,d;try{l=Wa(a).toUint8Array()}catch(x){if(x instanceof ZN)return wi("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{d=new T0(l,i,o)}catch(x){return wi(x instanceof bl?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return d.Ee===0?null:d}nt(t,r,a){return r.ge.count===a-this.st(t,r.targetId)?0:2}st(t,r){const a=this.ke.getRemoteKeysForTarget(r);let i=0;return a.forEach(o=>{const l=this.ke.it(),d=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;t.mightContain(d)||(this.ze(r,o,null),i++)}),i}ot(t){const r=new Map;this.qe.forEach((o,l)=>{const d=this.Xe(l);if(d){if(o.current&&Zm(d.target)){const x=new Ke(d.target.path);this._t(x).has(l)||this.ut(l,x)||this.ze(l,x,ns.newNoDocument(x,t))}o.ve&&(r.set(l,o.Fe()),o.Me())}});let a=mt();this.Ue.forEach((o,l)=>{let d=!0;l.forEachWhile(x=>{const p=this.Xe(x);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(a=a.add(o))}),this.Qe.forEach((o,l)=>l.setReadTime(t));const i=new _u(t,r,this.Ke,this.Qe,a);return this.Qe=aa(),this.$e=wc(),this.Ue=wc(),this.Ke=new $t(lt),i}Ge(t,r){if(!this.Je(t))return;const a=this.ut(t,r.key)?2:0;this.He(t).xe(r.key,a),this.Qe=this.Qe.insert(r.key,r),this.$e=this.$e.insert(r.key,this._t(r.key).add(t)),this.Ue=this.Ue.insert(r.key,this.ct(r.key).add(t))}ze(t,r,a){if(!this.Je(t))return;const i=this.He(t);this.ut(t,r)?i.xe(r,1):i.Oe(r),this.Ue=this.Ue.insert(r,this.ct(r).delete(t)),this.Ue=this.Ue.insert(r,this.ct(r).add(t)),a&&(this.Qe=this.Qe.insert(r,a))}removeTarget(t){this.qe.delete(t)}et(t){const r=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let r=this.qe.get(t);return r||(r=new Ey,this.qe.set(t,r)),r}ct(t){let r=this.Ue.get(t);return r||(r=new ts(lt),this.Ue=this.Ue.insert(t,r)),r}_t(t){let r=this.$e.get(t);return r||(r=new ts(lt),this.$e=this.$e.insert(t,r)),r}Je(t){const r=this.Xe(t)!==null;return r||Oe("WatchChangeAggregator","Detected inactive target",t),r}Xe(t){const r=this.qe.get(t);return r&&r.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new Ey),this.ke.getRemoteKeysForTarget(t).forEach(r=>{this.ze(t,r,null)})}ut(t,r){return this.ke.getRemoteKeysForTarget(t).has(r)}}function wc(){return new $t(Ke.comparator)}function Sy(){return new $t(Ke.comparator)}const J1=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Z1=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),e_=(()=>({and:"AND",or:"OR"}))();class t_{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function th(s,t){return s.useProto3Json||Io(t)?t:{value:t}}function Rd(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rw(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function s_(s,t){return Rd(s,t.toTimestamp())}function Ks(s){return yt(!!s),Je.fromTimestamp(function(r){const a=qa(r);return new Kt(a.seconds,a.nanos)}(s))}function D0(s,t){return sh(s,t).canonicalString()}function sh(s,t){const r=function(i){return new _t(["projects",i.projectId,"databases",i.database])}(s).child("documents");return t===void 0?r:r.child(t)}function Mw(s){const t=_t.fromString(s);return yt(Uw(t)),t}function Md(s,t){return D0(s.databaseId,t.path)}function zl(s,t){const r=Mw(t);if(r.get(1)!==s.databaseId.projectId)throw new Ae(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+s.databaseId.projectId);if(r.get(3)!==s.databaseId.database)throw new Ae(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+s.databaseId.database);return new Ke(zw(r))}function Ow(s,t){return D0(s.databaseId,t)}function r_(s){const t=Mw(s);return t.length===4?_t.emptyPath():zw(t)}function rh(s){return new _t(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function zw(s){return yt(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function _y(s,t,r){return{name:Md(s,t),fields:r.value.mapValue.fields}}function a_(s,t){return"found"in t?function(a,i){yt(!!i.found),i.found.name,i.found.updateTime;const o=zl(a,i.found.name),l=Ks(i.found.updateTime),d=i.found.createTime?Ks(i.found.createTime):Je.min(),x=new Ss({mapValue:{fields:i.found.fields}});return ns.newFoundDocument(o,l,d,x)}(s,t):"missing"in t?function(a,i){yt(!!i.missing),yt(!!i.readTime);const o=zl(a,i.missing),l=Ks(i.readTime);return ns.newNoDocument(o,l)}(s,t):Ye()}function n_(s,t){let r;if("targetChange"in t){t.targetChange;const a=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ye()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(p,N){return p.useProto3Json?(yt(N===void 0||typeof N=="string"),ps.fromBase64String(N||"")):(yt(N===void 0||N instanceof Buffer||N instanceof Uint8Array),ps.fromUint8Array(N||new Uint8Array))}(s,t.targetChange.resumeToken),l=t.targetChange.cause,d=l&&function(p){const N=p.code===void 0?fe.UNKNOWN:Tw(p.code);return new Ae(N,p.message||"")}(l);r=new Aw(a,i,o,d||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const i=zl(s,a.document.name),o=Ks(a.document.updateTime),l=a.document.createTime?Ks(a.document.createTime):Je.min(),d=new Ss({mapValue:{fields:a.document.fields}}),x=ns.newFoundDocument(i,o,l,d),p=a.targetIds||[],N=a.removedTargetIds||[];r=new Wc(p,N,x.key,x)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const i=zl(s,a.document),o=a.readTime?Ks(a.readTime):Je.min(),l=ns.newNoDocument(i,o),d=a.removedTargetIds||[];r=new Wc([],d,l.key,l)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const i=zl(s,a.document),o=a.removedTargetIds||[];r=new Wc([],o,i,null)}else{if(!("filter"in t))return Ye();{t.filter;const a=t.filter;a.targetId;const{count:i=0,unchangedNames:o}=a,l=new K1(i,o),d=a.targetId;r=new Dw(d,l)}}return r}function Lw(s,t){let r;if(t instanceof Eo)r={update:_y(s,t.key,t.value)};else if(t instanceof Su)r={delete:Md(s,t.key)};else if(t instanceof en)r={update:_y(s,t.key,t.data),updateMask:h_(t.fieldMask)};else{if(!(t instanceof _w))return Ye();r={verify:Md(s,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(a=>function(o,l){const d=l.transform;if(d instanceof uo)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof xo)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof mo)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ho)return{fieldPath:l.field.canonicalString(),increment:d.Ie};throw Ye()}(0,a))),t.precondition.isNone||(r.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:s_(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ye()}(s,t.precondition)),r}function i_(s,t){return s&&s.length>0?(yt(t!==void 0),s.map(r=>function(i,o){let l=i.updateTime?Ks(i.updateTime):Ks(o);return l.isEqual(Je.min())&&(l=Ks(o)),new q1(l,i.transformResults||[])}(r,t))):[]}function l_(s,t){return{documents:[Ow(s,t.path)]}}function o_(s,t){const r={structuredQuery:{}},a=t.path;let i;t.collectionGroup!==null?(i=a,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=a.popLast(),r.structuredQuery.from=[{collectionId:a.lastSegment()}]),r.parent=Ow(s,i);const o=function(p){if(p.length!==0)return Fw(br.create(p,"and"))}(t.filters);o&&(r.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(N=>function(T){return{field:qn(T.field),direction:u_(T.dir)}}(N))}(t.orderBy);l&&(r.structuredQuery.orderBy=l);const d=th(s,t.limit);return d!==null&&(r.structuredQuery.limit=d),t.startAt&&(r.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(t.endAt)),{ht:r,parent:i}}function c_(s){let t=r_(s.parent);const r=s.structuredQuery,a=r.from?r.from.length:0;let i=null;if(a>0){yt(a===1);const N=r.from[0];N.allDescendants?i=N.collectionId:t=t.child(N.collectionId)}let o=[];r.where&&(o=function(I){const T=Vw(I);return T instanceof br&&dw(T)?T.getFilters():[T]}(r.where));let l=[];r.orderBy&&(l=function(I){return I.map(T=>function(f){return new co(Wn(f.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(f.direction))}(T))}(r.orderBy));let d=null;r.limit&&(d=function(I){let T;return T=typeof I=="object"?I.value:I,Io(T)?null:T}(r.limit));let x=null;r.startAt&&(x=function(I){const T=!!I.before,A=I.values||[];return new Dd(A,T)}(r.startAt));let p=null;return r.endAt&&(p=function(I){const T=!I.before,A=I.values||[];return new Dd(A,T)}(r.endAt)),D1(t,i,l,o,d,"F",x,p)}function d_(s,t){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye()}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function Vw(s){return s.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const a=Wn(r.unaryFilter.field);return Jt.create(a,"==",{doubleValue:NaN});case"IS_NULL":const i=Wn(r.unaryFilter.field);return Jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Wn(r.unaryFilter.field);return Jt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Wn(r.unaryFilter.field);return Jt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ye()}}(s):s.fieldFilter!==void 0?function(r){return Jt.create(Wn(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ye()}}(r.fieldFilter.op),r.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(r){return br.create(r.compositeFilter.filters.map(a=>Vw(a)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ye()}}(r.compositeFilter.op))}(s):Ye()}function u_(s){return J1[s]}function x_(s){return Z1[s]}function m_(s){return e_[s]}function qn(s){return{fieldPath:s.canonicalString()}}function Wn(s){return ds.fromServerFormat(s.fieldPath)}function Fw(s){return s instanceof Jt?function(r){if(r.op==="=="){if(fy(r.value))return{unaryFilter:{field:qn(r.field),op:"IS_NAN"}};if(py(r.value))return{unaryFilter:{field:qn(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(fy(r.value))return{unaryFilter:{field:qn(r.field),op:"IS_NOT_NAN"}};if(py(r.value))return{unaryFilter:{field:qn(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qn(r.field),op:x_(r.op),value:r.value}}}(s):s instanceof br?function(r){const a=r.getFilters().map(i=>Fw(i));return a.length===1?a[0]:{compositeFilter:{op:m_(r.op),filters:a}}}(s):Ye()}function h_(s){const t=[];return s.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function Uw(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(t,r,a,i,o=Je.min(),l=Je.min(),d=ps.EMPTY_BYTE_STRING,x=null){this.target=t,this.targetId=r,this.purpose=a,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=x}withSequenceNumber(t){return new Ia(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(t){this.Tt=t}}function f_(s){const t=c_({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Ad(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(){this.Tn=new y_}addToCollectionParentIndex(t,r){return this.Tn.add(r),ye.resolve()}getCollectionParents(t,r){return ye.resolve(this.Tn.getEntries(r))}addFieldIndex(t,r){return ye.resolve()}deleteFieldIndex(t,r){return ye.resolve()}deleteAllFieldIndexes(t){return ye.resolve()}createTargetIndexes(t,r){return ye.resolve()}getDocumentsMatchingTarget(t,r){return ye.resolve(null)}getIndexType(t,r){return ye.resolve(0)}getFieldIndexes(t,r){return ye.resolve([])}getNextCollectionGroupToUpdate(t){return ye.resolve(null)}getMinOffset(t,r){return ye.resolve($a.min())}getMinOffsetFromCollectionGroup(t,r){return ye.resolve($a.min())}updateCollectionGroup(t,r,a){return ye.resolve()}updateIndexEntries(t,r){return ye.resolve()}}class y_{constructor(){this.index={}}add(t){const r=t.lastSegment(),a=t.popLast(),i=this.index[r]||new ts(_t.comparator),o=!i.has(a);return this.index[r]=i.add(a),o}has(t){const r=t.lastSegment(),a=t.popLast(),i=this.index[r];return i&&i.has(a)}getEntries(t){return(this.index[t]||new ts(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bw=41943040;class As{static withCacheSize(t){return new As(t,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As.DEFAULT_COLLECTION_PERCENTILE=10,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,As.DEFAULT=new As(Bw,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),As.DISABLED=new As(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new Ei(0)}static Kn(){return new Ei(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="LruGarbageCollector",b_=1048576;function Dy([s,t],[r,a]){const i=lt(s,r);return i===0?lt(t,a):i}class j_{constructor(t){this.Hn=t,this.buffer=new ts(Dy),this.Jn=0}Yn(){return++this.Jn}Zn(t){const r=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();Dy(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class v_{constructor(t,r,a){this.garbageCollector=t,this.asyncQueue=r,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Oe(Ty,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Li(r)?Oe(Ty,"Ignoring IndexedDB error during garbage collection: ",r):await zi(r)}await this.er(3e5)})}}class N_{constructor(t,r){this.tr=t,this.params=r}calculateTargetCount(t,r){return this.tr.nr(t).next(a=>Math.floor(r/100*a))}nthSequenceNumber(t,r){if(r===0)return ye.resolve(vu.ae);const a=new j_(r);return this.tr.forEachTarget(t,i=>a.Zn(i.sequenceNumber)).next(()=>this.tr.rr(t,i=>a.Zn(i))).next(()=>a.maxValue)}removeTargets(t,r,a){return this.tr.removeTargets(t,r,a)}removeOrphanedDocuments(t,r){return this.tr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(Py)):this.getCacheSize(t).next(a=>a<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Py):this.ir(t,r))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,r){let a,i,o,l,d,x,p;const N=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),i=this.params.maximumSequenceNumbersToCollect):i=I,l=Date.now(),this.nthSequenceNumber(t,i))).next(I=>(a=I,d=Date.now(),this.removeTargets(t,a,r))).next(I=>(o=I,x=Date.now(),this.removeOrphanedDocuments(t,a))).next(I=>(p=Date.now(),Bn()<=xt.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-N}ms
	Determined least recently used ${i} in `+(d-l)+`ms
	Removed ${o} targets in `+(x-d)+`ms
	Removed ${I} documents in `+(p-x)+`ms
Total Duration: ${p-N}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:I})))}}function w_(s,t){return new N_(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(){this.changes=new Rn(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,ns.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const a=this.changes.get(r);return a!==void 0?ye.resolve(a):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(t,r,a,i){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=i}getDocument(t,r){let a=null;return this.documentOverlayCache.getOverlay(t,r).next(i=>(a=i,this.remoteDocumentCache.getEntry(t,r))).next(i=>(a!==null&&Ol(a.mutation,i,Gs.empty(),Kt.now()),i))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.getLocalViewOfDocuments(t,a,mt()).next(()=>a))}getLocalViewOfDocuments(t,r,a=mt()){const i=mn();return this.populateOverlays(t,i,r).next(()=>this.computeViews(t,r,i,a).next(o=>{let l=yl();return o.forEach((d,x)=>{l=l.insert(d,x.overlayedDocument)}),l}))}getOverlayedDocuments(t,r){const a=mn();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,mt()))}populateOverlays(t,r,a){const i=[];return a.forEach(o=>{r.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(t,i).next(o=>{o.forEach((l,d)=>{r.set(l,d)})})}computeViews(t,r,a,i){let o=aa();const l=Ml(),d=function(){return Ml()}();return r.forEach((x,p)=>{const N=a.get(p.key);i.has(p.key)&&(N===void 0||N.mutation instanceof en)?o=o.insert(p.key,p):N!==void 0?(l.set(p.key,N.mutation.getFieldMask()),Ol(N.mutation,p,N.mutation.getFieldMask(),Kt.now())):l.set(p.key,Gs.empty())}),this.recalculateAndSaveOverlays(t,o).next(x=>(x.forEach((p,N)=>l.set(p,N)),r.forEach((p,N)=>{var I;return d.set(p,new C_(N,(I=l.get(p))!==null&&I!==void 0?I:null))}),d))}recalculateAndSaveOverlays(t,r){const a=Ml();let i=new $t((l,d)=>l-d),o=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(l=>{for(const d of l)d.keys().forEach(x=>{const p=r.get(x);if(p===null)return;let N=a.get(x)||Gs.empty();N=d.applyToLocalView(p,N),a.set(x,N);const I=(i.get(d.batchId)||mt()).add(x);i=i.insert(d.batchId,I)})}).next(()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const x=d.getNext(),p=x.key,N=x.value,I=bw();N.forEach(T=>{if(!o.has(T)){const A=Ew(r.get(T),a.get(T));A!==null&&I.set(T,A),o=o.add(T)}}),l.push(this.documentOverlayCache.saveOverlays(t,p,I))}return ye.waitFor(l)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.recalculateAndSaveOverlays(t,a))}getDocumentsMatchingQuery(t,r,a,i){return function(l){return Ke.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):hw(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,a,i):this.getDocumentsMatchingCollectionQuery(t,r,a,i)}getNextDocuments(t,r,a,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,a,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,a.largestBatchId,i-o.size):ye.resolve(mn());let d=no,x=o;return l.next(p=>ye.forEach(p,(N,I)=>(d<I.largestBatchId&&(d=I.largestBatchId),o.get(N)?ye.resolve():this.remoteDocumentCache.getEntry(t,N).next(T=>{x=x.insert(N,T)}))).next(()=>this.populateOverlays(t,p,o)).next(()=>this.computeViews(t,x,p,mt())).next(N=>({batchId:d,changes:yw(N)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new Ke(r)).next(a=>{let i=yl();return a.isFoundDocument()&&(i=i.insert(a.key,a)),i})}getDocumentsMatchingCollectionGroupQuery(t,r,a,i){const o=r.collectionGroup;let l=yl();return this.indexManager.getCollectionParents(t,o).next(d=>ye.forEach(d,x=>{const p=function(I,T){return new Vi(T,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(r,x.child(o));return this.getDocumentsMatchingCollectionQuery(t,p,a,i).next(N=>{N.forEach((I,T)=>{l=l.insert(I,T)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(t,r,a,i){let o;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,a.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,a,o,i))).next(l=>{o.forEach((x,p)=>{const N=p.getKey();l.get(N)===null&&(l=l.insert(N,ns.newInvalidDocument(N)))});let d=yl();return l.forEach((x,p)=>{const N=o.get(x);N!==void 0&&Ol(N.mutation,p,Gs.empty(),Kt.now()),Cu(r,p)&&(d=d.insert(x,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,r){return ye.resolve(this.dr.get(r))}saveBundleMetadata(t,r){return this.dr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Ks(i.createTime)}}(r)),ye.resolve()}getNamedQuery(t,r){return ye.resolve(this.Ar.get(r))}saveNamedQuery(t,r){return this.Ar.set(r.name,function(i){return{name:i.name,query:f_(i.bundledQuery),readTime:Ks(i.readTime)}}(r)),ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(){this.overlays=new $t(Ke.comparator),this.Rr=new Map}getOverlay(t,r){return ye.resolve(this.overlays.get(r))}getOverlays(t,r){const a=mn();return ye.forEach(r,i=>this.getOverlay(t,i).next(o=>{o!==null&&a.set(i,o)})).next(()=>a)}saveOverlays(t,r,a){return a.forEach((i,o)=>{this.Et(t,r,o)}),ye.resolve()}removeOverlaysForBatchId(t,r,a){const i=this.Rr.get(a);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(a)),ye.resolve()}getOverlaysForCollection(t,r,a){const i=mn(),o=r.length+1,l=new Ke(r.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const x=d.getNext().value,p=x.getKey();if(!r.isPrefixOf(p.path))break;p.path.length===o&&x.largestBatchId>a&&i.set(x.getKey(),x)}return ye.resolve(i)}getOverlaysForCollectionGroup(t,r,a,i){let o=new $t((p,N)=>p-N);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===r&&p.largestBatchId>a){let N=o.get(p.largestBatchId);N===null&&(N=mn(),o=o.insert(p.largestBatchId,N)),N.set(p.getKey(),p)}}const d=mn(),x=o.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach((p,N)=>d.set(p,N)),!(d.size()>=i)););return ye.resolve(d)}Et(t,r,a){const i=this.overlays.get(a.key);if(i!==null){const l=this.Rr.get(i.largestBatchId).delete(a.key);this.Rr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(a.key,new Q1(r,a));let o=this.Rr.get(r);o===void 0&&(o=mt(),this.Rr.set(r,o)),this.Rr.set(r,o.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(){this.sessionToken=ps.EMPTY_BYTE_STRING}getSessionToken(t){return ye.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,ye.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.Vr=new ts(rs.mr),this.gr=new ts(rs.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,r){const a=new rs(t,r);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(t,r){t.forEach(a=>this.addReference(a,r))}removeReference(t,r){this.wr(new rs(t,r))}Sr(t,r){t.forEach(a=>this.removeReference(a,r))}br(t){const r=new Ke(new _t([])),a=new rs(r,t),i=new rs(r,t+1),o=[];return this.gr.forEachInRange([a,i],l=>{this.wr(l),o.push(l.key)}),o}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const r=new Ke(new _t([])),a=new rs(r,t),i=new rs(r,t+1);let o=mt();return this.gr.forEachInRange([a,i],l=>{o=o.add(l.key)}),o}containsKey(t){const r=new rs(t,0),a=this.Vr.firstAfterOrEqual(r);return a!==null&&t.isEqual(a.key)}}class rs{constructor(t,r){this.key=t,this.Cr=r}static mr(t,r){return Ke.comparator(t.key,r.key)||lt(t.Cr,r.Cr)}static pr(t,r){return lt(t.Cr,r.Cr)||Ke.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Fr=1,this.Mr=new ts(rs.mr)}checkEmpty(t){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,a,i){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new H1(o,r,a,i);this.mutationQueue.push(l);for(const d of i)this.Mr=this.Mr.add(new rs(d.key,o)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return ye.resolve(l)}lookupMutationBatch(t,r){return ye.resolve(this.Or(r))}getNextMutationBatchAfterBatchId(t,r){const a=r+1,i=this.Nr(a),o=i<0?0:i;return ye.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?k0:this.Fr-1)}getAllMutationBatches(t){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const a=new rs(r,0),i=new rs(r,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([a,i],l=>{const d=this.Or(l.Cr);o.push(d)}),ye.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,r){let a=new ts(lt);return r.forEach(i=>{const o=new rs(i,0),l=new rs(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,l],d=>{a=a.add(d.Cr)})}),ye.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(t,r){const a=r.path,i=a.length+1;let o=a;Ke.isDocumentKey(o)||(o=o.child(""));const l=new rs(new Ke(o),0);let d=new ts(lt);return this.Mr.forEachWhile(x=>{const p=x.key.path;return!!a.isPrefixOf(p)&&(p.length===i&&(d=d.add(x.Cr)),!0)},l),ye.resolve(this.Br(d))}Br(t){const r=[];return t.forEach(a=>{const i=this.Or(a);i!==null&&r.push(i)}),r}removeMutationBatch(t,r){yt(this.Lr(r.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return ye.forEach(r.mutations,i=>{const o=new rs(i.key,r.batchId);return a=a.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Mr=a})}qn(t){}containsKey(t,r){const a=new rs(r,0),i=this.Mr.firstAfterOrEqual(a);return ye.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,ye.resolve()}Lr(t,r){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const r=this.Nr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(t){this.kr=t,this.docs=function(){return new $t(Ke.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const a=r.key,i=this.docs.get(a),o=i?i.size:0,l=this.kr(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const a=this.docs.get(r);return ye.resolve(a?a.document.mutableCopy():ns.newInvalidDocument(r))}getEntries(t,r){let a=aa();return r.forEach(i=>{const o=this.docs.get(i);a=a.insert(i,o?o.document.mutableCopy():ns.newInvalidDocument(i))}),ye.resolve(a)}getDocumentsMatchingQuery(t,r,a,i){let o=aa();const l=r.path,d=new Ke(l.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(d);for(;x.hasNext();){const{key:p,value:{document:N}}=x.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||u1(d1(N),a)<=0||(i.has(N.key)||Cu(r,N))&&(o=o.insert(N.key,N.mutableCopy()))}return ye.resolve(o)}getAllFromCollectionGroup(t,r,a,i){Ye()}qr(t,r){return ye.forEach(this.docs,a=>r(a))}newChangeBuffer(t){return new D_(this)}getSize(t){return ye.resolve(this.size)}}class D_ extends k_{constructor(t){super(),this.Ir=t}applyChanges(t){const r=[];return this.changes.forEach((a,i)=>{i.isValidDocument()?r.push(this.Ir.addEntry(t,i)):this.Ir.removeEntry(a)}),ye.waitFor(r)}getFromCache(t,r){return this.Ir.getEntry(t,r)}getAllFromCache(t,r){return this.Ir.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(t){this.persistence=t,this.Qr=new Rn(r=>E0(r),S0),this.lastRemoteSnapshotVersion=Je.min(),this.highestTargetId=0,this.$r=0,this.Ur=new A0,this.targetCount=0,this.Kr=Ei.Un()}forEachTarget(t,r){return this.Qr.forEach((a,i)=>r(i)),ye.resolve()}getLastRemoteSnapshotVersion(t){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ye.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(t,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.$r&&(this.$r=r),ye.resolve()}zn(t){this.Qr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.Kr=new Ei(r),this.highestTargetId=r),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,r){return this.zn(r),this.targetCount+=1,ye.resolve()}updateTargetData(t,r){return this.zn(r),ye.resolve()}removeTargetData(t,r){return this.Qr.delete(r.target),this.Ur.br(r.targetId),this.targetCount-=1,ye.resolve()}removeTargets(t,r,a){let i=0;const o=[];return this.Qr.forEach((l,d)=>{d.sequenceNumber<=r&&a.get(d.targetId)===null&&(this.Qr.delete(l),o.push(this.removeMatchingKeysForTargetId(t,d.targetId)),i++)}),ye.waitFor(o).next(()=>i)}getTargetCount(t){return ye.resolve(this.targetCount)}getTargetData(t,r){const a=this.Qr.get(r)||null;return ye.resolve(a)}addMatchingKeys(t,r,a){return this.Ur.yr(r,a),ye.resolve()}removeMatchingKeys(t,r,a){this.Ur.Sr(r,a);const i=this.persistence.referenceDelegate,o=[];return i&&r.forEach(l=>{o.push(i.markPotentiallyOrphaned(t,l))}),ye.waitFor(o)}removeMatchingKeysForTargetId(t,r){return this.Ur.br(r),ye.resolve()}getMatchingKeysForTargetId(t,r){const a=this.Ur.vr(r);return ye.resolve(a)}containsKey(t,r){return ye.resolve(this.Ur.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(t,r){this.Wr={},this.overlays={},this.Gr=new vu(0),this.zr=!1,this.zr=!0,this.jr=new __,this.referenceDelegate=t(this),this.Hr=new A_(this),this.indexManager=new g_,this.remoteDocumentCache=function(i){return new T_(i)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new p_(r),this.Yr=new E_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new S_,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let a=this.Wr[t.toKey()];return a||(a=new P_(r,this.referenceDelegate),this.Wr[t.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,r,a){Oe("MemoryPersistence","Starting transaction:",t);const i=new R_(this.Gr.next());return this.referenceDelegate.Zr(),a(i).next(o=>this.referenceDelegate.Xr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}ei(t,r){return ye.or(Object.values(this.Wr).map(a=>()=>a.containsKey(t,r)))}}class R_ extends m1{constructor(t){super(),this.currentSequenceNumber=t}}class R0{constructor(t){this.persistence=t,this.ti=new A0,this.ni=null}static ri(t){return new R0(t)}get ii(){if(this.ni)return this.ni;throw Ye()}addReference(t,r,a){return this.ti.addReference(a,r),this.ii.delete(a.toString()),ye.resolve()}removeReference(t,r,a){return this.ti.removeReference(a,r),this.ii.add(a.toString()),ye.resolve()}markPotentiallyOrphaned(t,r){return this.ii.add(r.toString()),ye.resolve()}removeTarget(t,r){this.ti.br(r.targetId).forEach(i=>this.ii.add(i.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,r.targetId).next(i=>{i.forEach(o=>this.ii.add(o.toString()))}).next(()=>a.removeTargetData(t,r))}Zr(){this.ni=new Set}Xr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.ii,a=>{const i=Ke.fromPath(a);return this.si(t,i).next(o=>{o||r.removeEntry(i,Je.min())})}).next(()=>(this.ni=null,r.apply(t)))}updateLimboDocument(t,r){return this.si(t,r).next(a=>{a?this.ii.delete(r.toString()):this.ii.add(r.toString())})}Jr(t){return 0}si(t,r){return ye.or([()=>ye.resolve(this.ti.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.ei(t,r)])}}class Od{constructor(t,r){this.persistence=t,this.oi=new Rn(a=>f1(a.path),(a,i)=>a.isEqual(i)),this.garbageCollector=w_(this,r)}static ri(t,r){return new Od(t,r)}Zr(){}Xr(t){return ye.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}nr(t){const r=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(a=>r.next(i=>a+i))}sr(t){let r=0;return this.rr(t,a=>{r++}).next(()=>r)}rr(t,r){return ye.forEach(this.oi,(a,i)=>this.ar(t,a,i).next(o=>o?ye.resolve():r(i)))}removeTargets(t,r,a){return this.persistence.getTargetCache().removeTargets(t,r,a)}removeOrphanedDocuments(t,r){let a=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.qr(t,l=>this.ar(t,l,r).next(d=>{d||(a++,o.removeEntry(l,Je.min()))})).next(()=>o.apply(t)).next(()=>a)}markPotentiallyOrphaned(t,r){return this.oi.set(r,t.currentSequenceNumber),ye.resolve()}removeTarget(t,r){const a=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,r,a){return this.oi.set(a,t.currentSequenceNumber),ye.resolve()}removeReference(t,r,a){return this.oi.set(a,t.currentSequenceNumber),ye.resolve()}updateLimboDocument(t,r){return this.oi.set(r,t.currentSequenceNumber),ye.resolve()}Jr(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=Bc(t.data.value)),r}ar(t,r,a){return ye.or([()=>this.persistence.ei(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const i=this.oi.get(r);return ye.resolve(i!==void 0&&i>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(t,r,a,i){this.targetId=t,this.fromCache=r,this.Hi=a,this.Ji=i}static Yi(t,r){let a=mt(),i=mt();for(const o of r.docChanges)switch(o.type){case 0:a=a.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new M0(t,r.fromCache,a,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return mI()?8:h1(Cs())>0?6:4}()}initialize(t,r){this.ns=t,this.indexManager=r,this.Zi=!0}getDocumentsMatchingQuery(t,r,a,i){const o={result:null};return this.rs(t,r).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ss(t,r,i,a).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new M_;return this._s(t,r,l).next(d=>{if(o.result=d,this.Xi)return this.us(t,r,l,d.size)})}).next(()=>o.result)}us(t,r,a,i){return a.documentReadCount<this.es?(Bn()<=xt.DEBUG&&Oe("QueryEngine","SDK will not create cache indexes for query:",$n(r),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ye.resolve()):(Bn()<=xt.DEBUG&&Oe("QueryEngine","Query:",$n(r),"scans",a.documentReadCount,"local documents and returns",i,"documents as results."),a.documentReadCount>this.ts*i?(Bn()<=xt.DEBUG&&Oe("QueryEngine","The SDK decides to create cache indexes for query:",$n(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Pr(r))):ye.resolve())}rs(t,r){if(jy(r))return ye.resolve(null);let a=Pr(r);return this.indexManager.getIndexType(t,a).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=Ad(r,null,"F"),a=Pr(r)),this.indexManager.getDocumentsMatchingTarget(t,a).next(o=>{const l=mt(...o);return this.ns.getDocuments(t,l).next(d=>this.indexManager.getMinOffset(t,a).next(x=>{const p=this.cs(r,d);return this.ls(r,p,l,x.readTime)?this.rs(t,Ad(r,null,"F")):this.hs(t,p,r,x)}))})))}ss(t,r,a,i){return jy(r)||i.isEqual(Je.min())?ye.resolve(null):this.ns.getDocuments(t,a).next(o=>{const l=this.cs(r,o);return this.ls(r,l,a,i)?ye.resolve(null):(Bn()<=xt.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$n(r)),this.hs(t,l,r,c1(i,no)).next(d=>d))})}cs(t,r){let a=new ts(fw(t));return r.forEach((i,o)=>{Cu(t,o)&&(a=a.add(o))}),a}ls(t,r,a,i){if(t.limit===null)return!1;if(a.size!==r.size)return!0;const o=t.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}_s(t,r,a){return Bn()<=xt.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",$n(r)),this.ns.getDocumentsMatchingQuery(t,r,$a.min(),a)}hs(t,r,a,i){return this.ns.getDocumentsMatchingQuery(t,a,i).next(o=>(r.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="LocalStore",z_=3e8;class L_{constructor(t,r,a,i){this.persistence=t,this.Ps=r,this.serializer=i,this.Ts=new $t(lt),this.Is=new Rn(o=>E0(o),S0),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(a)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new I_(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ts))}}function V_(s,t,r,a){return new L_(s,t,r,a)}async function qw(s,t){const r=tt(s);return await r.persistence.runTransaction("Handle user change","readonly",a=>{let i;return r.mutationQueue.getAllMutationBatches(a).next(o=>(i=o,r.As(t),r.mutationQueue.getAllMutationBatches(a))).next(o=>{const l=[],d=[];let x=mt();for(const p of i){l.push(p.batchId);for(const N of p.mutations)x=x.add(N.key)}for(const p of o){d.push(p.batchId);for(const N of p.mutations)x=x.add(N.key)}return r.localDocuments.getDocuments(a,x).next(p=>({Rs:p,removedBatchIds:l,addedBatchIds:d}))})})}function F_(s,t){const r=tt(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const i=t.batch.keys(),o=r.ds.newChangeBuffer({trackRemovals:!0});return function(d,x,p,N){const I=p.batch,T=I.keys();let A=ye.resolve();return T.forEach(f=>{A=A.next(()=>N.getEntry(x,f)).next(L=>{const k=p.docVersions.get(f);yt(k!==null),L.version.compareTo(k)<0&&(I.applyToRemoteDocument(L,p),L.isValidDocument()&&(L.setReadTime(p.commitVersion),N.addEntry(L)))})}),A.next(()=>d.mutationQueue.removeMutationBatch(x,I))}(r,a,t,o).next(()=>o.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,i,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(d){let x=mt();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(x=x.add(d.batch.mutations[p].key));return x}(t))).next(()=>r.localDocuments.getDocuments(a,i))})}function Ww(s){const t=tt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Hr.getLastRemoteSnapshotVersion(r))}function U_(s,t){const r=tt(s),a=t.snapshotVersion;let i=r.Ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=r.ds.newChangeBuffer({trackRemovals:!0});i=r.Ts;const d=[];t.targetChanges.forEach((N,I)=>{const T=i.get(I);if(!T)return;d.push(r.Hr.removeMatchingKeys(o,N.removedDocuments,I).next(()=>r.Hr.addMatchingKeys(o,N.addedDocuments,I)));let A=T.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(I)!==null?A=A.withResumeToken(ps.EMPTY_BYTE_STRING,Je.min()).withLastLimboFreeSnapshotVersion(Je.min()):N.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(N.resumeToken,a)),i=i.insert(I,A),function(L,k,_){return L.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=z_?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(T,A,N)&&d.push(r.Hr.updateTargetData(o,A))});let x=aa(),p=mt();if(t.documentUpdates.forEach(N=>{t.resolvedLimboDocuments.has(N)&&d.push(r.persistence.referenceDelegate.updateLimboDocument(o,N))}),d.push(B_(o,l,t.documentUpdates).next(N=>{x=N.Vs,p=N.fs})),!a.isEqual(Je.min())){const N=r.Hr.getLastRemoteSnapshotVersion(o).next(I=>r.Hr.setTargetsMetadata(o,o.currentSequenceNumber,a));d.push(N)}return ye.waitFor(d).next(()=>l.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,x,p)).next(()=>x)}).then(o=>(r.Ts=i,o))}function B_(s,t,r){let a=mt(),i=mt();return r.forEach(o=>a=a.add(o)),t.getEntries(s,a).next(o=>{let l=aa();return r.forEach((d,x)=>{const p=o.get(d);x.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(d)),x.isNoDocument()&&x.version.isEqual(Je.min())?(t.removeEntry(d,x.readTime),l=l.insert(d,x)):!p.isValidDocument()||x.version.compareTo(p.version)>0||x.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(x),l=l.insert(d,x)):Oe(O0,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",x.version)}),{Vs:l,fs:i}})}function $_(s,t){const r=tt(s);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(t===void 0&&(t=k0),r.mutationQueue.getNextMutationBatchAfterBatchId(a,t)))}function q_(s,t){const r=tt(s);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let i;return r.Hr.getTargetData(a,t).next(o=>o?(i=o,ye.resolve(i)):r.Hr.allocateTargetId(a).next(l=>(i=new Ia(t,l,"TargetPurposeListen",a.currentSequenceNumber),r.Hr.addTargetData(a,i).next(()=>i))))}).then(a=>{const i=r.Ts.get(a.targetId);return(i===null||a.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ts=r.Ts.insert(a.targetId,a),r.Is.set(t,a.targetId)),a})}async function ah(s,t,r){const a=tt(s),i=a.Ts.get(t),o=r?"readwrite":"readwrite-primary";try{r||await a.persistence.runTransaction("Release target",o,l=>a.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!Li(l))throw l;Oe(O0,`Failed to update sequence numbers for target ${t}: ${l}`)}a.Ts=a.Ts.remove(t),a.Is.delete(i.target)}function Ay(s,t,r){const a=tt(s);let i=Je.min(),o=mt();return a.persistence.runTransaction("Execute query","readwrite",l=>function(x,p,N){const I=tt(x),T=I.Is.get(N);return T!==void 0?ye.resolve(I.Ts.get(T)):I.Hr.getTargetData(p,N)}(a,l,Pr(t)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(l,d.targetId).next(x=>{o=x})}).next(()=>a.Ps.getDocumentsMatchingQuery(l,t,r?i:Je.min(),r?o:mt())).next(d=>(W_(a,R1(t),d),{documents:d,gs:o})))}function W_(s,t,r){let a=s.Es.get(t)||Je.min();r.forEach((i,o)=>{o.readTime.compareTo(a)>0&&(a=o.readTime)}),s.Es.set(t,a)}class Ry{constructor(){this.activeTargetIds=F1()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class G_{constructor(){this.ho=new Ry,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,a){}addLocalQueryTarget(t,r=!0){return r&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,r,a){this.Po[t]=r}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Ry,Promise.resolve()}handleUserChange(t,r,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="ConnectivityMonitor";class Oy{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Oe(My,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Oe(My,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kc=null;function nh(){return kc===null?kc=function(){return 268435456+Math.round(2147483648*Math.random())}():kc++,"0x"+kc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="RestConnection",Q_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class K_{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=r+"://"+t.host,this.yo=`projects/${a}/databases/${i}`,this.wo=this.databaseId.database===Pd?`project_id=${a}`:`project_id=${a}&database_id=${i}`}So(t,r,a,i,o){const l=nh(),d=this.bo(t,r.toUriEncodedString());Oe(Fx,`Sending RPC '${t}' ${l}:`,d,a);const x={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(x,i,o),this.vo(t,d,x,a).then(p=>(Oe(Fx,`Received RPC '${t}' ${l}: `,p),p),p=>{throw wi(Fx,`RPC '${t}' ${l} failed with error: `,p,"url: ",d,"request:",a),p})}Co(t,r,a,i,o,l){return this.So(t,r,a,i,o)}Do(t,r,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oi}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>t[o]=i),a&&a.headers.forEach((i,o)=>t[o]=i)}bo(t,r){const a=Q_[t];return`${this.po}/v1/${r}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="WebChannelConnection";class X_ extends K_{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,r,a,i){const o=nh();return new Promise((l,d)=>{const x=new $N;x.setWithCredentials(!0),x.listenOnce(qN.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case Uc.NO_ERROR:const N=x.getResponseJson();Oe(js,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(N)),l(N);break;case Uc.TIMEOUT:Oe(js,`RPC '${t}' ${o} timed out`),d(new Ae(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Uc.HTTP_ERROR:const I=x.getStatus();if(Oe(js,`RPC '${t}' ${o} failed with status:`,I,"response text:",x.getResponseText()),I>0){let T=x.getResponseJson();Array.isArray(T)&&(T=T[0]);const A=T==null?void 0:T.error;if(A&&A.status&&A.message){const f=function(k){const _=k.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(_)>=0?_:fe.UNKNOWN}(A.status);d(new Ae(f,A.message))}else d(new Ae(fe.UNKNOWN,"Server responded with status "+x.getStatus()))}else d(new Ae(fe.UNAVAILABLE,"Connection failed."));break;default:Ye()}}finally{Oe(js,`RPC '${t}' ${o} completed.`)}});const p=JSON.stringify(i);Oe(js,`RPC '${t}' ${o} sending request:`,i),x.send(r,"POST",p,a,15)})}Wo(t,r,a){const i=nh(),o=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=HN(),d=GN(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(x.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(x.useFetchStreams=!0),this.Do(x.initMessageHeaders,r,a),x.encodeInitMessageHeaders=!0;const N=o.join("");Oe(js,`Creating RPC '${t}' stream ${i}: ${N}`,x);const I=l.createWebChannel(N,x);let T=!1,A=!1;const f=new Y_({Fo:k=>{A?Oe(js,`Not sending because RPC '${t}' stream ${i} is closed:`,k):(T||(Oe(js,`Opening RPC '${t}' stream ${i} transport.`),I.open(),T=!0),Oe(js,`RPC '${t}' stream ${i} sending:`,k),I.send(k))},Mo:()=>I.close()}),L=(k,_,z)=>{k.listen(_,M=>{try{z(M)}catch(Y){setTimeout(()=>{throw Y},0)}})};return L(I,gl.EventType.OPEN,()=>{A||(Oe(js,`RPC '${t}' stream ${i} transport opened.`),f.Qo())}),L(I,gl.EventType.CLOSE,()=>{A||(A=!0,Oe(js,`RPC '${t}' stream ${i} transport closed`),f.Uo())}),L(I,gl.EventType.ERROR,k=>{A||(A=!0,wi(js,`RPC '${t}' stream ${i} transport errored:`,k),f.Uo(new Ae(fe.UNAVAILABLE,"The operation could not be completed")))}),L(I,gl.EventType.MESSAGE,k=>{var _;if(!A){const z=k.data[0];yt(!!z);const M=z,Y=(M==null?void 0:M.error)||((_=M[0])===null||_===void 0?void 0:_.error);if(Y){Oe(js,`RPC '${t}' stream ${i} received error:`,Y);const G=Y.status;let W=function(F){const V=Yt[F];if(V!==void 0)return Tw(V)}(G),R=Y.message;W===void 0&&(W=fe.INTERNAL,R="Unknown error status: "+G+" with message "+Y.message),A=!0,f.Uo(new Ae(W,R)),I.close()}else Oe(js,`RPC '${t}' stream ${i} received:`,z),f.Ko(z)}}),L(d,WN.STAT_EVENT,k=>{k.stat===Qm.PROXY?Oe(js,`RPC '${t}' stream ${i} detected buffering proxy`):k.stat===Qm.NOPROXY&&Oe(js,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{f.$o()},0),f}}function Ux(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(s){return new t_(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(t,r,a=1e3,i=1.5,o=6e4){this.Ti=t,this.timerId=r,this.Go=a,this.zo=i,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const r=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),i=Math.max(0,r-a);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="PersistentStream";class Gw{constructor(t,r,a,i,o,l,d,x){this.Ti=t,this.n_=a,this.r_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=x,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new z0(t,r)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,r){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():r&&r.code===fe.RESOURCE_EXHAUSTED?(ra(r.toString()),ra("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):r&&r.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(r)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),r=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,i])=>{this.i_===r&&this.V_(a,i)},a=>{t(()=>{const i=new Ae(fe.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(i)})})}V_(t,r){const a=this.R_(this.i_);this.stream=this.f_(t,r),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{a(()=>this.m_(i))}),this.stream.onMessage(i=>{a(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Oe(zy,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return r=>{this.Ti.enqueueAndForget(()=>this.i_===t?r():(Oe(zy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class J_ extends Gw{constructor(t,r,a,i,o,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,i,l),this.serializer=o}f_(t,r){return this.connection.Wo("Listen",t,r)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const r=n_(this.serializer,t),a=function(o){if(!("targetChange"in o))return Je.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Je.min():l.readTime?Ks(l.readTime):Je.min()}(t);return this.listener.p_(r,a)}y_(t){const r={};r.database=rh(this.serializer),r.addTarget=function(o,l){let d;const x=l.target;if(d=Zm(x)?{documents:l_(o,x)}:{query:o_(o,x).ht},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=Rw(o,l.resumeToken);const p=th(o,l.expectedCount);p!==null&&(d.expectedCount=p)}else if(l.snapshotVersion.compareTo(Je.min())>0){d.readTime=Rd(o,l.snapshotVersion.toTimestamp());const p=th(o,l.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,t);const a=d_(this.serializer,t);a&&(r.labels=a),this.I_(r)}w_(t){const r={};r.database=rh(this.serializer),r.removeTarget=t,this.I_(r)}}class Z_ extends Gw{constructor(t,r,a,i,o,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,i,l),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,r){return this.connection.Wo("Write",t,r)}g_(t){return yt(!!t.streamToken),this.lastStreamToken=t.streamToken,yt(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){yt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const r=i_(t.writeResults,t.commitTime),a=Ks(t.commitTime);return this.listener.v_(a,r)}C_(){const t={};t.database=rh(this.serializer),this.I_(t)}b_(t){const r={streamToken:this.lastStreamToken,writes:t.map(a=>Lw(this.serializer,a))};this.I_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{}class t8 extends e8{constructor(t,r,a,i){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=a,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Ae(fe.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,r,a,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.So(t,sh(r,a),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(fe.UNKNOWN,o.toString())})}Co(t,r,a,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.connection.Co(t,sh(r,a),i,l,d,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ae(fe.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class s8{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ra(r),this.N_=!1):Oe("OnlineStateTracker",r)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="RemoteStore";class r8{constructor(t,r,a,i,o){this.localStore=t,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(l=>{a.enqueueAndForget(async()=>{Mn(this)&&(Oe(Cn,"Restarting streams for network reachability change."),await async function(x){const p=tt(x);p.W_.add(4),await _o(p),p.j_.set("Unknown"),p.W_.delete(4),await Tu(p)}(this))})}),this.j_=new s8(a,i)}}async function Tu(s){if(Mn(s))for(const t of s.G_)await t(!0)}async function _o(s){for(const t of s.G_)await t(!1)}function Hw(s,t){const r=tt(s);r.K_.has(t.targetId)||(r.K_.set(t.targetId,t),U0(r)?F0(r):Fi(r).c_()&&V0(r,t))}function L0(s,t){const r=tt(s),a=Fi(r);r.K_.delete(t),a.c_()&&Qw(r,t),r.K_.size===0&&(a.c_()?a.P_():Mn(r)&&r.j_.set("Unknown"))}function V0(s,t){if(s.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Je.min())>0){const r=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Fi(s).y_(t)}function Qw(s,t){s.H_.Ne(t),Fi(s).w_(t)}function F0(s){s.H_=new X1({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>s.K_.get(t)||null,it:()=>s.datastore.serializer.databaseId}),Fi(s).start(),s.j_.B_()}function U0(s){return Mn(s)&&!Fi(s).u_()&&s.K_.size>0}function Mn(s){return tt(s).W_.size===0}function Kw(s){s.H_=void 0}async function a8(s){s.j_.set("Online")}async function n8(s){s.K_.forEach((t,r)=>{V0(s,t)})}async function i8(s,t){Kw(s),U0(s)?(s.j_.q_(t),F0(s)):s.j_.set("Unknown")}async function l8(s,t,r){if(s.j_.set("Online"),t instanceof Aw&&t.state===2&&t.cause)try{await async function(i,o){const l=o.cause;for(const d of o.targetIds)i.K_.has(d)&&(await i.remoteSyncer.rejectListen(d,l),i.K_.delete(d),i.H_.removeTarget(d))}(s,t)}catch(a){Oe(Cn,"Failed to remove targets %s: %s ",t.targetIds.join(","),a),await zd(s,a)}else if(t instanceof Wc?s.H_.We(t):t instanceof Dw?s.H_.Ze(t):s.H_.je(t),!r.isEqual(Je.min()))try{const a=await Ww(s.localStore);r.compareTo(a)>=0&&await function(o,l){const d=o.H_.ot(l);return d.targetChanges.forEach((x,p)=>{if(x.resumeToken.approximateByteSize()>0){const N=o.K_.get(p);N&&o.K_.set(p,N.withResumeToken(x.resumeToken,l))}}),d.targetMismatches.forEach((x,p)=>{const N=o.K_.get(x);if(!N)return;o.K_.set(x,N.withResumeToken(ps.EMPTY_BYTE_STRING,N.snapshotVersion)),Qw(o,x);const I=new Ia(N.target,x,p,N.sequenceNumber);V0(o,I)}),o.remoteSyncer.applyRemoteEvent(d)}(s,r)}catch(a){Oe(Cn,"Failed to raise snapshot:",a),await zd(s,a)}}async function zd(s,t,r){if(!Li(t))throw t;s.W_.add(1),await _o(s),s.j_.set("Offline"),r||(r=()=>Ww(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{Oe(Cn,"Retrying IndexedDB access"),await r(),s.W_.delete(1),await Tu(s)})}function Yw(s,t){return t().catch(r=>zd(s,r,t))}async function Du(s){const t=tt(s),r=Ha(t);let a=t.U_.length>0?t.U_[t.U_.length-1].batchId:k0;for(;o8(t);)try{const i=await $_(t.localStore,a);if(i===null){t.U_.length===0&&r.P_();break}a=i.batchId,c8(t,i)}catch(i){await zd(t,i)}Xw(t)&&Jw(t)}function o8(s){return Mn(s)&&s.U_.length<10}function c8(s,t){s.U_.push(t);const r=Ha(s);r.c_()&&r.S_&&r.b_(t.mutations)}function Xw(s){return Mn(s)&&!Ha(s).u_()&&s.U_.length>0}function Jw(s){Ha(s).start()}async function d8(s){Ha(s).C_()}async function u8(s){const t=Ha(s);for(const r of s.U_)t.b_(r.mutations)}async function x8(s,t,r){const a=s.U_.shift(),i=P0.from(a,t,r);await Yw(s,()=>s.remoteSyncer.applySuccessfulWrite(i)),await Du(s)}async function m8(s,t){t&&Ha(s).S_&&await async function(a,i){if(function(l){return Pw(l)&&l!==fe.ABORTED}(i.code)){const o=a.U_.shift();Ha(a).h_(),await Yw(a,()=>a.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Du(a)}}(s,t),Xw(s)&&Jw(s)}async function Ly(s,t){const r=tt(s);r.asyncQueue.verifyOperationInProgress(),Oe(Cn,"RemoteStore received new credentials");const a=Mn(r);r.W_.add(3),await _o(r),a&&r.j_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.W_.delete(3),await Tu(r)}async function h8(s,t){const r=tt(s);t?(r.W_.delete(2),await Tu(r)):t||(r.W_.add(2),await _o(r),r.j_.set("Unknown"))}function Fi(s){return s.J_||(s.J_=function(r,a,i){const o=tt(r);return o.M_(),new J_(a,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(s.datastore,s.asyncQueue,{xo:a8.bind(null,s),No:n8.bind(null,s),Lo:i8.bind(null,s),p_:l8.bind(null,s)}),s.G_.push(async t=>{t?(s.J_.h_(),U0(s)?F0(s):s.j_.set("Unknown")):(await s.J_.stop(),Kw(s))})),s.J_}function Ha(s){return s.Y_||(s.Y_=function(r,a,i){const o=tt(r);return o.M_(),new Z_(a,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:d8.bind(null,s),Lo:m8.bind(null,s),D_:u8.bind(null,s),v_:x8.bind(null,s)}),s.G_.push(async t=>{t?(s.Y_.h_(),await Du(s)):(await s.Y_.stop(),s.U_.length>0&&(Oe(Cn,`Stopping write stream with ${s.U_.length} pending writes`),s.U_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(t,r,a,i,o){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=a,this.op=i,this.removalCallback=o,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,a,i,o){const l=Date.now()+a,d=new B0(t,r,l,i,o);return d.start(a),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(fe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $0(s,t){if(ra("AsyncQueue",`${t}: ${s}`),Li(s))return new Ae(fe.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{static emptySet(t){return new xi(t.comparator)}constructor(t){this.comparator=t?(r,a)=>t(r,a)||Ke.comparator(r.key,a.key):(r,a)=>Ke.comparator(r.key,a.key),this.keyedMap=yl(),this.sortedSet=new $t(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,a)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof xi)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=a.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const a=new xi;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=r,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(){this.Z_=new $t(Ke.comparator)}track(t){const r=t.doc.key,a=this.Z_.get(r);a?t.type!==0&&a.type===3?this.Z_=this.Z_.insert(r,t):t.type===3&&a.type!==1?this.Z_=this.Z_.insert(r,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.Z_=this.Z_.insert(r,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.Z_=this.Z_.insert(r,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.Z_=this.Z_.remove(r):t.type===1&&a.type===2?this.Z_=this.Z_.insert(r,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.Z_=this.Z_.insert(r,{type:2,doc:t.doc}):Ye():this.Z_=this.Z_.insert(r,t)}X_(){const t=[];return this.Z_.inorderTraversal((r,a)=>{t.push(a)}),t}}class Si{constructor(t,r,a,i,o,l,d,x,p){this.query=t,this.docs=r,this.oldDocs=a,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=x,this.hasCachedResults=p}static fromInitialDocuments(t,r,a,i,o){const l=[];return r.forEach(d=>{l.push({type:0,doc:d})}),new Si(t,r,xi.emptySet(r),l,a,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ku(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,a=t.docChanges;if(r.length!==a.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==a[i].type||!r[i].doc.isEqual(a[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class f8{constructor(){this.queries=Fy(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(r,a){const i=tt(r),o=i.queries;i.queries=Fy(),o.forEach((l,d)=>{for(const x of d.ta)x.onError(a)})})(this,new Ae(fe.ABORTED,"Firestore shutting down"))}}function Fy(){return new Rn(s=>pw(s),ku)}async function q0(s,t){const r=tt(s);let a=3;const i=t.query;let o=r.queries.get(i);o?!o.na()&&t.ra()&&(a=2):(o=new p8,a=t.ra()?0:1);try{switch(a){case 0:o.ea=await r.onListen(i,!0);break;case 1:o.ea=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(l){const d=$0(l,`Initialization of query '${$n(t.query)}' failed`);return void t.onError(d)}r.queries.set(i,o),o.ta.push(t),t.sa(r.onlineState),o.ea&&t.oa(o.ea)&&G0(r)}async function W0(s,t){const r=tt(s),a=t.query;let i=3;const o=r.queries.get(a);if(o){const l=o.ta.indexOf(t);l>=0&&(o.ta.splice(l,1),o.ta.length===0?i=t.ra()?0:1:!o.na()&&t.ra()&&(i=2))}switch(i){case 0:return r.queries.delete(a),r.onUnlisten(a,!0);case 1:return r.queries.delete(a),r.onUnlisten(a,!1);case 2:return r.onLastRemoteStoreUnlisten(a);default:return}}function g8(s,t){const r=tt(s);let a=!1;for(const i of t){const o=i.query,l=r.queries.get(o);if(l){for(const d of l.ta)d.oa(i)&&(a=!0);l.ea=i}}a&&G0(r)}function y8(s,t,r){const a=tt(s),i=a.queries.get(t);if(i)for(const o of i.ta)o.onError(r);a.queries.delete(t)}function G0(s){s.ia.forEach(t=>{t.next()})}var ih,Uy;(Uy=ih||(ih={}))._a="default",Uy.Cache="cache";class H0{constructor(t,r,a){this.query=t,this.aa=r,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(t){if(!this.options.includeMetadataChanges){const a=[];for(const i of t.docChanges)i.type!==3&&a.push(i);t=new Si(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.ua?this.la(t)&&(this.aa.next(t),r=!0):this.ha(t,this.onlineState)&&(this.Pa(t),r=!0),this.ca=t,r}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let r=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),r=!0),r}ha(t,r){if(!t.fromCache||!this.ra())return!0;const a=r!=="Offline";return(!this.options.Ta||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}la(t){if(t.docChanges.length>0)return!0;const r=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Pa(t){t=Si.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==ih.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(t){this.key=t}}class e5{constructor(t){this.key=t}}class b8{constructor(t,r){this.query=t,this.fa=r,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=mt(),this.mutatedKeys=mt(),this.ya=fw(t),this.wa=new xi(this.ya)}get Sa(){return this.fa}ba(t,r){const a=r?r.Da:new Vy,i=r?r.wa:this.wa;let o=r?r.mutatedKeys:this.mutatedKeys,l=i,d=!1;const x=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((N,I)=>{const T=i.get(N),A=Cu(this.query,I)?I:null,f=!!T&&this.mutatedKeys.has(T.key),L=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let k=!1;T&&A?T.data.isEqual(A.data)?f!==L&&(a.track({type:3,doc:A}),k=!0):this.va(T,A)||(a.track({type:2,doc:A}),k=!0,(x&&this.ya(A,x)>0||p&&this.ya(A,p)<0)&&(d=!0)):!T&&A?(a.track({type:0,doc:A}),k=!0):T&&!A&&(a.track({type:1,doc:T}),k=!0,(x||p)&&(d=!0)),k&&(A?(l=l.add(A),o=L?o.add(N):o.delete(N)):(l=l.delete(N),o=o.delete(N)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const N=this.query.limitType==="F"?l.last():l.first();l=l.delete(N.key),o=o.delete(N.key),a.track({type:1,doc:N})}return{wa:l,Da:a,ls:d,mutatedKeys:o}}va(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,a,i){const o=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const l=t.Da.X_();l.sort((N,I)=>function(A,f){const L=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye()}};return L(A)-L(f)}(N.type,I.type)||this.ya(N.doc,I.doc)),this.Ca(a),i=i!=null&&i;const d=r&&!i?this.Fa():[],x=this.pa.size===0&&this.current&&!i?1:0,p=x!==this.ga;return this.ga=x,l.length!==0||p?{snapshot:new Si(this.query,t.wa,o,l,t.mutatedKeys,x===0,p,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Vy,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(r=>this.fa=this.fa.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.fa=this.fa.delete(r)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=mt(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const r=[];return t.forEach(a=>{this.pa.has(a)||r.push(new e5(a))}),this.pa.forEach(a=>{t.has(a)||r.push(new Zw(a))}),r}Oa(t){this.fa=t.gs,this.pa=mt();const r=this.ba(t.documents);return this.applyChanges(r,!0)}Na(){return Si.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Q0="SyncEngine";class j8{constructor(t,r,a){this.query=t,this.targetId=r,this.view=a}}class v8{constructor(t){this.key=t,this.Ba=!1}}class N8{constructor(t,r,a,i,o,l){this.localStore=t,this.remoteStore=r,this.eventManager=a,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new Rn(d=>pw(d),ku),this.qa=new Map,this.Qa=new Set,this.$a=new $t(Ke.comparator),this.Ua=new Map,this.Ka=new A0,this.Wa={},this.Ga=new Map,this.za=Ei.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function w8(s,t,r=!0){const a=i5(s);let i;const o=a.ka.get(t);return o?(a.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=await t5(a,t,r,!0),i}async function k8(s,t){const r=i5(s);await t5(r,t,!0,!1)}async function t5(s,t,r,a){const i=await q_(s.localStore,Pr(t)),o=i.targetId,l=s.sharedClientState.addLocalQueryTarget(o,r);let d;return a&&(d=await C8(s,t,o,l==="current",i.resumeToken)),s.isPrimaryClient&&r&&Hw(s.remoteStore,i),d}async function C8(s,t,r,a,i){s.Ha=(I,T,A)=>async function(L,k,_,z){let M=k.view.ba(_);M.ls&&(M=await Ay(L.localStore,k.query,!1).then(({documents:R})=>k.view.ba(R,M)));const Y=z&&z.targetChanges.get(k.targetId),G=z&&z.targetMismatches.get(k.targetId)!=null,W=k.view.applyChanges(M,L.isPrimaryClient,Y,G);return $y(L,k.targetId,W.Ma),W.snapshot}(s,I,T,A);const o=await Ay(s.localStore,t,!0),l=new b8(t,o.gs),d=l.ba(o.documents),x=So.createSynthesizedTargetChangeForCurrentChange(r,a&&s.onlineState!=="Offline",i),p=l.applyChanges(d,s.isPrimaryClient,x);$y(s,r,p.Ma);const N=new j8(t,r,l);return s.ka.set(t,N),s.qa.has(r)?s.qa.get(r).push(t):s.qa.set(r,[t]),p.snapshot}async function I8(s,t,r){const a=tt(s),i=a.ka.get(t),o=a.qa.get(i.targetId);if(o.length>1)return a.qa.set(i.targetId,o.filter(l=>!ku(l,t))),void a.ka.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(i.targetId),a.sharedClientState.isActiveQueryTarget(i.targetId)||await ah(a.localStore,i.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(i.targetId),r&&L0(a.remoteStore,i.targetId),lh(a,i.targetId)}).catch(zi)):(lh(a,i.targetId),await ah(a.localStore,i.targetId,!0))}async function E8(s,t){const r=tt(s),a=r.ka.get(t),i=r.qa.get(a.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(a.targetId),L0(r.remoteStore,a.targetId))}async function S8(s,t,r){const a=M8(s);try{const i=await function(l,d){const x=tt(l),p=Kt.now(),N=d.reduce((A,f)=>A.add(f.key),mt());let I,T;return x.persistence.runTransaction("Locally write mutations","readwrite",A=>{let f=aa(),L=mt();return x.ds.getEntries(A,N).next(k=>{f=k,f.forEach((_,z)=>{z.isValidDocument()||(L=L.add(_))})}).next(()=>x.localDocuments.getOverlayedDocuments(A,f)).next(k=>{I=k;const _=[];for(const z of d){const M=G1(z,I.get(z.key).overlayedDocument);M!=null&&_.push(new en(z.key,M,lw(M.value.mapValue),us.exists(!0)))}return x.mutationQueue.addMutationBatch(A,p,_,d)}).next(k=>{T=k;const _=k.applyToLocalDocumentSet(I,L);return x.documentOverlayCache.saveOverlays(A,k.batchId,_)})}).then(()=>({batchId:T.batchId,changes:yw(I)}))}(a.localStore,t);a.sharedClientState.addPendingMutation(i.batchId),function(l,d,x){let p=l.Wa[l.currentUser.toKey()];p||(p=new $t(lt)),p=p.insert(d,x),l.Wa[l.currentUser.toKey()]=p}(a,i.batchId,r),await Po(a,i.changes),await Du(a.remoteStore)}catch(i){const o=$0(i,"Failed to persist write");r.reject(o)}}async function s5(s,t){const r=tt(s);try{const a=await U_(r.localStore,t);t.targetChanges.forEach((i,o)=>{const l=r.Ua.get(o);l&&(yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Ba=!0:i.modifiedDocuments.size>0?yt(l.Ba):i.removedDocuments.size>0&&(yt(l.Ba),l.Ba=!1))}),await Po(r,a,t)}catch(a){await zi(a)}}function By(s,t,r){const a=tt(s);if(a.isPrimaryClient&&r===0||!a.isPrimaryClient&&r===1){const i=[];a.ka.forEach((o,l)=>{const d=l.view.sa(t);d.snapshot&&i.push(d.snapshot)}),function(l,d){const x=tt(l);x.onlineState=d;let p=!1;x.queries.forEach((N,I)=>{for(const T of I.ta)T.sa(d)&&(p=!0)}),p&&G0(x)}(a.eventManager,t),i.length&&a.La.p_(i),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function _8(s,t,r){const a=tt(s);a.sharedClientState.updateQueryState(t,"rejected",r);const i=a.Ua.get(t),o=i&&i.key;if(o){let l=new $t(Ke.comparator);l=l.insert(o,ns.newNoDocument(o,Je.min()));const d=mt().add(o),x=new _u(Je.min(),new Map,new $t(lt),l,d);await s5(a,x),a.$a=a.$a.remove(o),a.Ua.delete(t),K0(a)}else await ah(a.localStore,t,!1).then(()=>lh(a,t,r)).catch(zi)}async function P8(s,t){const r=tt(s),a=t.batch.batchId;try{const i=await F_(r.localStore,t);a5(r,a,null),r5(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),await Po(r,i)}catch(i){await zi(i)}}async function T8(s,t,r){const a=tt(s);try{const i=await function(l,d){const x=tt(l);return x.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let N;return x.mutationQueue.lookupMutationBatch(p,d).next(I=>(yt(I!==null),N=I.keys(),x.mutationQueue.removeMutationBatch(p,I))).next(()=>x.mutationQueue.performConsistencyCheck(p)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(p,N,d)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,N)).next(()=>x.localDocuments.getDocuments(p,N))})}(a.localStore,t);a5(a,t,r),r5(a,t),a.sharedClientState.updateMutationState(t,"rejected",r),await Po(a,i)}catch(i){await zi(i)}}function r5(s,t){(s.Ga.get(t)||[]).forEach(r=>{r.resolve()}),s.Ga.delete(t)}function a5(s,t,r){const a=tt(s);let i=a.Wa[a.currentUser.toKey()];if(i){const o=i.get(t);o&&(r?o.reject(r):o.resolve(),i=i.remove(t)),a.Wa[a.currentUser.toKey()]=i}}function lh(s,t,r=null){s.sharedClientState.removeLocalQueryTarget(t);for(const a of s.qa.get(t))s.ka.delete(a),r&&s.La.Ja(a,r);s.qa.delete(t),s.isPrimaryClient&&s.Ka.br(t).forEach(a=>{s.Ka.containsKey(a)||n5(s,a)})}function n5(s,t){s.Qa.delete(t.path.canonicalString());const r=s.$a.get(t);r!==null&&(L0(s.remoteStore,r),s.$a=s.$a.remove(t),s.Ua.delete(r),K0(s))}function $y(s,t,r){for(const a of r)a instanceof Zw?(s.Ka.addReference(a.key,t),D8(s,a)):a instanceof e5?(Oe(Q0,"Document no longer in limbo: "+a.key),s.Ka.removeReference(a.key,t),s.Ka.containsKey(a.key)||n5(s,a.key)):Ye()}function D8(s,t){const r=t.key,a=r.path.canonicalString();s.$a.get(r)||s.Qa.has(a)||(Oe(Q0,"New document in limbo: "+r),s.Qa.add(a),K0(s))}function K0(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const t=s.Qa.values().next().value;s.Qa.delete(t);const r=new Ke(_t.fromString(t)),a=s.za.next();s.Ua.set(a,new v8(r)),s.$a=s.$a.insert(r,a),Hw(s.remoteStore,new Ia(Pr(wu(r.path)),a,"TargetPurposeLimboResolution",vu.ae))}}async function Po(s,t,r){const a=tt(s),i=[],o=[],l=[];a.ka.isEmpty()||(a.ka.forEach((d,x)=>{l.push(a.Ha(x,t,r).then(p=>{var N;if((p||r)&&a.isPrimaryClient){const I=p?!p.fromCache:(N=r==null?void 0:r.targetChanges.get(x.targetId))===null||N===void 0?void 0:N.current;a.sharedClientState.updateQueryState(x.targetId,I?"current":"not-current")}if(p){i.push(p);const I=M0.Yi(x.targetId,p);o.push(I)}}))}),await Promise.all(l),a.La.p_(i),await async function(x,p){const N=tt(x);try{await N.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>ye.forEach(p,T=>ye.forEach(T.Hi,A=>N.persistence.referenceDelegate.addReference(I,T.targetId,A)).next(()=>ye.forEach(T.Ji,A=>N.persistence.referenceDelegate.removeReference(I,T.targetId,A)))))}catch(I){if(!Li(I))throw I;Oe(O0,"Failed to update sequence numbers: "+I)}for(const I of p){const T=I.targetId;if(!I.fromCache){const A=N.Ts.get(T),f=A.snapshotVersion,L=A.withLastLimboFreeSnapshotVersion(f);N.Ts=N.Ts.insert(T,L)}}}(a.localStore,o))}async function A8(s,t){const r=tt(s);if(!r.currentUser.isEqual(t)){Oe(Q0,"User change. New user:",t.toKey());const a=await qw(r.localStore,t);r.currentUser=t,function(o,l){o.Ga.forEach(d=>{d.forEach(x=>{x.reject(new Ae(fe.CANCELLED,l))})}),o.Ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await Po(r,a.Rs)}}function R8(s,t){const r=tt(s),a=r.Ua.get(t);if(a&&a.Ba)return mt().add(a.key);{let i=mt();const o=r.qa.get(t);if(!o)return i;for(const l of o){const d=r.ka.get(l);i=i.unionWith(d.view.Sa)}return i}}function i5(s){const t=tt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=s5.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=R8.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_8.bind(null,t),t.La.p_=g8.bind(null,t.eventManager),t.La.Ja=y8.bind(null,t.eventManager),t}function M8(s){const t=tt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=P8.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=T8.bind(null,t),t}class Ld{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Pu(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,r){return null}nu(t,r){return null}eu(t){return V_(this.persistence,new O_,t.initialUser,this.serializer)}Xa(t){return new $w(R0.ri,this.serializer)}Za(t){return new G_}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ld.provider={build:()=>new Ld};class O8 extends Ld{constructor(t){super(),this.cacheSizeBytes=t}tu(t,r){yt(this.persistence.referenceDelegate instanceof Od);const a=this.persistence.referenceDelegate.garbageCollector;return new v_(a,t.asyncQueue,r)}Xa(t){const r=this.cacheSizeBytes!==void 0?As.withCacheSize(this.cacheSizeBytes):As.DEFAULT;return new $w(a=>Od.ri(a,r),this.serializer)}}class oh{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>By(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=A8.bind(null,this.syncEngine),await h8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new f8}()}createDatastore(t){const r=Pu(t.databaseInfo.databaseId),a=function(o){return new X_(o)}(t.databaseInfo);return function(o,l,d,x){return new t8(o,l,d,x)}(t.authCredentials,t.appCheckCredentials,a,r)}createRemoteStore(t){return function(a,i,o,l,d){return new r8(a,i,o,l,d)}(this.localStore,this.datastore,t.asyncQueue,r=>By(this.syncEngine,r,0),function(){return Oy.D()?new Oy:new H_}())}createSyncEngine(t,r){return function(i,o,l,d,x,p,N){const I=new N8(i,o,l,d,x,p);return N&&(I.ja=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(i){const o=tt(i);Oe(Cn,"RemoteStore shutting down."),o.W_.add(5),await _o(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}oh.provider={build:()=>new oh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):ra("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ae(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(i,o){const l=tt(i),d={documents:o.map(I=>Md(l.serializer,I))},x=await l.Co("BatchGetDocuments",l.serializer.databaseId,_t.emptyPath(),d,o.length),p=new Map;x.forEach(I=>{const T=a_(l.serializer,I);p.set(T.key.toString(),T)});const N=[];return o.forEach(I=>{const T=p.get(I.toString());yt(!!T),N.push(T)}),N}(this.datastore,t);return r.forEach(a=>this.recordVersion(a)),r}set(t,r){this.write(r.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,r){try{this.write(r.toMutation(t,this.preconditionForUpdate(t)))}catch(a){this.lastTransactionError=a}this.writtenDocs.add(t.toString())}delete(t){this.write(new Su(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const i=Ke.fromPath(a);this.mutations.push(new _w(i,this.precondition(i)))}),await async function(a,i){const o=tt(a),l={writes:i.map(d=>Lw(o.serializer,d))};await o.So("Commit",o.serializer.databaseId,_t.emptyPath(),l)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let r;if(t.isFoundDocument())r=t.version;else{if(!t.isNoDocument())throw Ye();r=Je.min()}const a=this.readVersions.get(t.key.toString());if(a){if(!r.isEqual(a))throw new Ae(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),r)}precondition(t){const r=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&r?r.isEqual(Je.min())?us.exists(!1):us.updateTime(r):us.none()}preconditionForUpdate(t){const r=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&r){if(r.isEqual(Je.min()))throw new Ae(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return us.updateTime(r)}return us.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(t,r,a,i,o){this.asyncQueue=t,this.datastore=r,this.options=a,this.updateFunction=i,this.deferred=o,this.Tu=a.maxAttempts,this.a_=new z0(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new z8(this.datastore),r=this.du(t);r&&r.then(a=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(a)}).catch(i=>{this.Au(i)}))}).catch(a=>{this.Au(a)})})}du(t){try{const r=this.updateFunction(t);return!Io(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const r=t.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!Pw(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa="FirestoreClient";class V8{constructor(t,r,a,i,o){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=i,this.user=vs.UNAUTHENTICATED,this.clientId=YN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(a,async l=>{Oe(Qa,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(a,l=>(Oe(Qa,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=$0(r,"Failed to shutdown persistence");t.reject(a)}}),t.promise}}async function Bx(s,t){s.asyncQueue.verifyOperationInProgress(),Oe(Qa,"Initializing OfflineComponentProvider");const r=s.configuration;await t.initialize(r);let a=r.initialUser;s.setCredentialChangeListener(async i=>{a.isEqual(i)||(await qw(t.localStore,i),a=i)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function qy(s,t){s.asyncQueue.verifyOperationInProgress();const r=await F8(s);Oe(Qa,"Initializing OnlineComponentProvider"),await t.initialize(r,s.configuration),s.setCredentialChangeListener(a=>Ly(t.remoteStore,a)),s.setAppCheckTokenChangeListener((a,i)=>Ly(t.remoteStore,i)),s._onlineComponents=t}async function F8(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Oe(Qa,"Using user provided OfflineComponentProvider");try{await Bx(s,s._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(i){return i.name==="FirebaseError"?i.code===fe.FAILED_PRECONDITION||i.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;wi("Error using user provided cache. Falling back to memory cache: "+r),await Bx(s,new Ld)}}else Oe(Qa,"Using default OfflineComponentProvider"),await Bx(s,new O8(void 0));return s._offlineComponents}async function X0(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Oe(Qa,"Using user provided OnlineComponentProvider"),await qy(s,s._uninitializedComponentsProvider._online)):(Oe(Qa,"Using default OnlineComponentProvider"),await qy(s,new oh))),s._onlineComponents}function U8(s){return X0(s).then(t=>t.syncEngine)}function B8(s){return X0(s).then(t=>t.datastore)}async function Vd(s){const t=await X0(s),r=t.eventManager;return r.onListen=w8.bind(null,t.syncEngine),r.onUnlisten=I8.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=k8.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=E8.bind(null,t.syncEngine),r}function $8(s,t,r={}){const a=new _r;return s.asyncQueue.enqueueAndForget(async()=>function(o,l,d,x,p){const N=new Y0({next:T=>{N.su(),l.enqueueAndForget(()=>W0(o,I));const A=T.docs.has(d);!A&&T.fromCache?p.reject(new Ae(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&x&&x.source==="server"?p.reject(new Ae(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),I=new H0(wu(d.path),N,{includeMetadataChanges:!0,Ta:!0});return q0(o,I)}(await Vd(s),s.asyncQueue,t,r,a)),a.promise}function q8(s,t,r={}){const a=new _r;return s.asyncQueue.enqueueAndForget(async()=>function(o,l,d,x,p){const N=new Y0({next:T=>{N.su(),l.enqueueAndForget(()=>W0(o,I)),T.fromCache&&x.source==="server"?p.reject(new Ae(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),I=new H0(d,N,{includeMetadataChanges:!0,Ta:!0});return q0(o,I)}(await Vd(s),s.asyncQueue,t,r,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(s,t,r){if(!r)throw new Ae(fe.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function W8(s,t,r,a){if(t===!0&&a===!0)throw new Ae(fe.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function Gy(s){if(!Ke.isDocumentKey(s))throw new Ae(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Hy(s){if(Ke.isDocumentKey(s))throw new Ae(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Au(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(a){return a.constructor?a.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":Ye()}function Ps(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new Ae(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Au(s);throw new Ae(fe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return s}function G8(s,t){if(t<=0)throw new Ae(fe.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5="firestore.googleapis.com",Qy=!0;class Ky{constructor(t){var r,a;if(t.host===void 0){if(t.ssl!==void 0)throw new Ae(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=c5,this.ssl=Qy}else this.host=t.host,this.ssl=(r=t.ssl)!==null&&r!==void 0?r:Qy;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Bw;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<b_)throw new Ae(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}W8("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=l5((a=t.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ae(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ae(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ae(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(a,i){return a.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ru{constructor(t,r,a,i){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=a,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ky({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ae(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ky(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new e1;switch(a.type){case"firstParty":return new a1(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Ae(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const a=Wy.get(r);a&&(Oe("ComponentProvider","Removing Datastore"),Wy.delete(r),a.terminate())}(this),Promise.resolve()}}function H8(s,t,r,a={}){var i;const o=(s=Ps(s,Ru))._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:s._getEmulatorOptions()}),d=`${t}:${r}`;o.host!==c5&&o.host!==d&&wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x=Object.assign(Object.assign({},o),{host:d,ssl:!1,emulatorOptions:a});if(!Ba(x,l)&&(s._setSettings(x),a.mockUserToken)){let p,N;if(typeof a.mockUserToken=="string")p=a.mockUserToken,N=vs.MOCK_USER;else{p=dN(a.mockUserToken,(i=s._app)===null||i===void 0?void 0:i.options.projectId);const I=a.mockUserToken.sub||a.mockUserToken.user_id;if(!I)throw new Ae(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new vs(I)}s._authCredentials=new t1(new QN(p,N))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(t,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new oa(this.firestore,t,this._query)}}class ms{constructor(t,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Va(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ms(this.firestore,t,this._key)}}class Va extends oa{constructor(t,r,a){super(t,r,wu(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ms(this.firestore,null,new Ke(t))}withConverter(t){return new Va(this.firestore,t,this._path)}}function se(s,t,...r){if(s=Tt(s),o5("collection","path",t),s instanceof Ru){const a=_t.fromString(t,...r);return Hy(a),new Va(s,null,a)}{if(!(s instanceof ms||s instanceof Va))throw new Ae(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(_t.fromString(t,...r));return Hy(a),new Va(s.firestore,null,a)}}function U(s,t,...r){if(s=Tt(s),arguments.length===1&&(t=YN.newId()),o5("doc","path",t),s instanceof Ru){const a=_t.fromString(t,...r);return Gy(a),new ms(s,null,new Ke(a))}{if(!(s instanceof ms||s instanceof Va))throw new Ae(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(_t.fromString(t,...r));return Gy(a),new ms(s.firestore,s instanceof Va?s.converter:null,new Ke(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="AsyncQueue";class Xy{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new z0(this,"async_queue_retry"),this.Su=()=>{const a=Ux();a&&Oe(Yy,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.bu=t;const r=Ux();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const r=Ux();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const r=new _r;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Li(t))throw t;Oe(Yy,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const r=this.bu.then(()=>(this.pu=!0,t().catch(a=>{this.gu=a,this.pu=!1;const i=function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),d}(a);throw ra("INTERNAL UNHANDLED ERROR: ",i),a}).then(a=>(this.pu=!1,a))));return this.bu=r,r}enqueueAfterDelay(t,r,a){this.Du(),this.wu.indexOf(t)>-1&&(r=0);const i=B0.createAndSchedule(this,t,r,a,o=>this.Fu(o));return this.fu.push(i),i}Du(){this.gu&&Ye()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const r of this.fu)if(r.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.fu)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const r=this.fu.indexOf(t);this.fu.splice(r,1)}}function Jy(s){return function(r,a){if(typeof r!="object"||r===null)return!1;const i=r;for(const o of a)if(o in i&&typeof i[o]=="function")return!0;return!1}(s,["next","error","complete"])}class Mr extends Ru{constructor(t,r,a,i){super(t,r,a,i),this.type="firestore",this._queue=new Xy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Xy(t),this._firestoreClient=void 0,await t}}}function Q8(s,t){const r=typeof s=="object"?s:yu(),a=typeof s=="string"?s:t||Pd,i=Ja(r,"firestore").getImmediate({identifier:a});if(!i._initialized){const o=lN("firestore");o&&H8(i,...o)}return i}function To(s){if(s._terminated)throw new Ae(fe.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||K8(s),s._firestoreClient}function K8(s){var t,r,a;const i=s._freezeSettings(),o=function(d,x,p,N){return new b1(d,x,p,N.host,N.ssl,N.experimentalForceLongPolling,N.experimentalAutoDetectLongPolling,l5(N.experimentalLongPollingOptions),N.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,i);s._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((a=i.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(s._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),s._firestoreClient=new V8(s._authCredentials,s._appCheckCredentials,s._queue,o,s._componentsProvider&&function(d){const x=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(x),_online:x}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t){this._byteString=t}static fromBase64String(t){try{return new In(ps.fromBase64String(t))}catch(r){throw new Ae(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new In(ps.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Ae(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ds(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Ae(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Ae(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return lt(this._lat,t._lat)||lt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(a,i){if(a.length!==i.length)return!1;for(let o=0;o<a.length;++o)if(a[o]!==i[o])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y8=/^__.*__$/;class X8{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return this.fieldMask!==null?new en(t,this.data,this.fieldMask,r,this.fieldTransforms):new Eo(t,this.data,r,this.fieldTransforms)}}class d5{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return new en(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function u5(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye()}}class ep{constructor(t,r,a,i,o,l){this.settings=t,this.databaseId=r,this.serializer=a,this.ignoreUndefinedProperties=i,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new ep(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var r;const a=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.ku({path:a,Qu:!1});return i.$u(t),i}Uu(t){var r;const a=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.ku({path:a,Qu:!1});return i.Bu(),i}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return Fd(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(u5(this.Lu)&&Y8.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class J8{constructor(t,r,a){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=a||Pu(t)}ju(t,r,a,i=!1){return new ep({Lu:t,methodName:r,zu:a,path:ds.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ro(s){const t=s._freezeSettings(),r=Pu(s._databaseId);return new J8(s._databaseId,!!t.ignoreUndefinedProperties,r)}function tp(s,t,r,a,i,o={}){const l=s.ju(o.merge||o.mergeFields?2:0,t,r,i);ap("Data must be an object, but it was:",l,a);const d=h5(a,l);let x,p;if(o.merge)x=new Gs(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const N=[];for(const I of o.mergeFields){const T=ch(t,I,r);if(!l.contains(T))throw new Ae(fe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);f5(N,T)||N.push(T)}x=new Gs(N),p=l.fieldTransforms.filter(I=>x.covers(I.field))}else x=null,p=l.fieldTransforms;return new X8(new Ss(d),x,p)}class Mu extends Ao{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Mu}}class sp extends Ao{_toFieldTransform(t){return new Iw(t.path,new uo)}isEqual(t){return t instanceof sp}}class rp extends Ao{constructor(t,r){super(t),this.Ju=r}_toFieldTransform(t){const r=new ho(t.serializer,vw(t.serializer,this.Ju));return new Iw(t.path,r)}isEqual(t){return t instanceof rp&&this.Ju===t.Ju}}function x5(s,t,r,a){const i=s.ju(1,t,r);ap("Data must be an object, but it was:",i,a);const o=[],l=Ss.empty();Za(a,(x,p)=>{const N=np(t,x,r);p=Tt(p);const I=i.Uu(N);if(p instanceof Mu)o.push(N);else{const T=Mo(p,I);T!=null&&(o.push(N),l.set(N,T))}});const d=new Gs(o);return new d5(l,d,i.fieldTransforms)}function m5(s,t,r,a,i,o){const l=s.ju(1,t,r),d=[ch(t,a,r)],x=[i];if(o.length%2!=0)throw new Ae(fe.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)d.push(ch(t,o[T])),x.push(o[T+1]);const p=[],N=Ss.empty();for(let T=d.length-1;T>=0;--T)if(!f5(p,d[T])){const A=d[T];let f=x[T];f=Tt(f);const L=l.Uu(A);if(f instanceof Mu)p.push(A);else{const k=Mo(f,L);k!=null&&(p.push(A),N.set(A,k))}}const I=new Gs(p);return new d5(N,I,l.fieldTransforms)}function Z8(s,t,r,a=!1){return Mo(r,s.ju(a?4:3,t))}function Mo(s,t){if(p5(s=Tt(s)))return ap("Unsupported field value:",t,s),h5(s,t);if(s instanceof Ao)return function(a,i){if(!u5(i.Lu))throw i.Wu(`${a._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${a._methodName}() is not currently supported inside arrays`);const o=a._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(a,i){const o=[];let l=0;for(const d of a){let x=Mo(d,i.Ku(l));x==null&&(x={nullValue:"NULL_VALUE"}),o.push(x),l++}return{arrayValue:{values:o}}}(s,t)}return function(a,i){if((a=Tt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return vw(i.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const o=Kt.fromDate(a);return{timestampValue:Rd(i.serializer,o)}}if(a instanceof Kt){const o=new Kt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Rd(i.serializer,o)}}if(a instanceof J0)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof In)return{bytesValue:Rw(i.serializer,a._byteString)};if(a instanceof ms){const o=i.databaseId,l=a.firestore._databaseId;if(!l.isEqual(o))throw i.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:D0(a.firestore._databaseId||i.databaseId,a._key.path)}}if(a instanceof Z0)return function(l,d){return{mapValue:{fields:{[aw]:{stringValue:iw},[Td]:{arrayValue:{values:l.toArray().map(p=>{if(typeof p!="number")throw d.Wu("VectorValues must only contain numeric values.");return _0(d.serializer,p)})}}}}}}(a,i);throw i.Wu(`Unsupported field value: ${Au(a)}`)}(s,t)}function h5(s,t){const r={};return JN(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Za(s,(a,i)=>{const o=Mo(i,t.qu(a));o!=null&&(r[a]=o)}),{mapValue:{fields:r}}}function p5(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Kt||s instanceof J0||s instanceof In||s instanceof ms||s instanceof Ao||s instanceof Z0)}function ap(s,t,r){if(!p5(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const a=Au(r);throw a==="an object"?t.Wu(s+" a custom object"):t.Wu(s+" "+a)}}function ch(s,t,r){if((t=Tt(t))instanceof Do)return t._internalPath;if(typeof t=="string")return np(s,t);throw Fd("Field path arguments must be of type string or ",s,!1,void 0,r)}const eP=new RegExp("[~\\*/\\[\\]]");function np(s,t,r){if(t.search(eP)>=0)throw Fd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,r);try{return new Do(...t.split("."))._internalPath}catch{throw Fd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,r)}}function Fd(s,t,r,a,i){const o=a&&!a.isEmpty(),l=i!==void 0;let d=`Function ${t}() called with invalid data`;r&&(d+=" (via `toFirestore()`)"),d+=". ";let x="";return(o||l)&&(x+=" (found",o&&(x+=` in field ${a}`),l&&(x+=` in document ${i}`),x+=")"),new Ae(fe.INVALID_ARGUMENT,d+s+x)}function f5(s,t){return s.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(t,r,a,i,o){this._firestore=t,this._userDataWriter=r,this._key=a,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ms(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new tP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(Ou("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class tP extends Ud{data(){return super.data()}}function Ou(s,t){return typeof t=="string"?np(s,t):t instanceof Do?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ae(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ip{}class lp extends ip{}function me(s,t,...r){let a=[];t instanceof ip&&a.push(t),a=a.concat(r),function(o){const l=o.filter(x=>x instanceof op).length,d=o.filter(x=>x instanceof zu).length;if(l>1||l>0&&d>0)throw new Ae(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const i of a)s=i._apply(s);return s}class zu extends lp{constructor(t,r,a){super(),this._field=t,this._op=r,this._value=a,this.type="where"}static _create(t,r,a){return new zu(t,r,a)}_apply(t){const r=this._parse(t);return y5(t._query,r),new oa(t.firestore,t.converter,eh(t._query,r))}_parse(t){const r=Ro(t.firestore);return function(o,l,d,x,p,N,I){let T;if(p.isKeyField()){if(N==="array-contains"||N==="array-contains-any")throw new Ae(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${N}' queries on documentId().`);if(N==="in"||N==="not-in"){eb(I,N);const f=[];for(const L of I)f.push(Zy(x,o,L));T={arrayValue:{values:f}}}else T=Zy(x,o,I)}else N!=="in"&&N!=="not-in"&&N!=="array-contains-any"||eb(I,N),T=Z8(d,l,I,N==="in"||N==="not-in");return Jt.create(p,N,T)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function he(s,t,r){const a=t,i=Ou("where",s);return zu._create(i,a,r)}class op extends ip{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new op(t,r)}_parse(t){const r=this._queryConstraints.map(a=>a._parse(t)).filter(a=>a.getFilters().length>0);return r.length===1?r[0]:br.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(i,o){let l=i;const d=o.getFlattenedFilters();for(const x of d)y5(l,x),l=eh(l,x)}(t._query,r),new oa(t.firestore,t.converter,eh(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cp extends lp{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new cp(t,r)}_apply(t){const r=function(i,o,l){if(i.startAt!==null)throw new Ae(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ae(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new co(o,l)}(t._query,this._field,this._direction);return new oa(t.firestore,t.converter,function(i,o){const l=i.explicitOrderBy.concat([o]);return new Vi(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,r))}}function dh(s,t="asc"){const r=t,a=Ou("orderBy",s);return cp._create(a,r)}class dp extends lp{constructor(t,r,a){super(),this.type=t,this._limit=r,this._limitType=a}static _create(t,r,a){return new dp(t,r,a)}_apply(t){return new oa(t.firestore,t.converter,Ad(t._query,this._limit,this._limitType))}}function kt(s){return G8("limit",s),dp._create("limit",s,"F")}function Zy(s,t,r){if(typeof(r=Tt(r))=="string"){if(r==="")throw new Ae(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hw(t)&&r.indexOf("/")!==-1)throw new Ae(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=t.path.child(_t.fromString(r));if(!Ke.isDocumentKey(a))throw new Ae(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return hy(s,new Ke(a))}if(r instanceof ms)return hy(s,r._key);throw new Ae(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Au(r)}.`)}function eb(s,t){if(!Array.isArray(s)||s.length===0)throw new Ae(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function y5(s,t){const r=function(i,o){for(const l of i)for(const d of l.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null}(s.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Ae(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ae(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class b5{convertValue(t,r="none"){switch(Ga(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ht(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Wa(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Ye()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const a={};return Za(t,(i,o)=>{a[i]=this.convertValue(o,r)}),a}convertVectorValue(t){var r,a,i;const o=(i=(a=(r=t.fields)===null||r===void 0?void 0:r[Td].arrayValue)===null||a===void 0?void 0:a.values)===null||i===void 0?void 0:i.map(l=>Ht(l.doubleValue));return new Z0(o)}convertGeoPoint(t){return new J0(Ht(t.latitude),Ht(t.longitude))}convertArray(t,r){return(t.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(t,r){switch(r){case"previous":const a=Nu(t);return a==null?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(io(t));default:return null}}convertTimestamp(t){const r=qa(t);return new Kt(r.seconds,r.nanos)}convertDocumentKey(t,r){const a=_t.fromString(t);yt(Uw(a));const i=new lo(a.get(1),a.get(3)),o=new Ke(a.popFirst(5));return i.isEqual(r)||ra(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(s,t,r){let a;return a=s?r&&(r.merge||r.mergeFields)?s.toFirestore(t,r):s.toFirestore(t):t,a}class sP extends b5{constructor(t){super(),this.firestore=t}convertBytes(t){return new In(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new ms(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class xp extends Ud{constructor(t,r,a,i,o,l){super(t,r,a,i,l),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new Gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const a=this._document.data.field(Ou("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class Gc extends xp{data(t={}){return super.data(t)}}class j5{constructor(t,r,a,i){this._firestore=t,this._userDataWriter=r,this._snapshot=i,this.metadata=new ai(i.hasPendingWrites,i.fromCache),this.query=a}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(a=>{t.call(r,new Gc(this._firestore,this._userDataWriter,a.key,a,new ai(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ae(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(d=>{const x=new Gc(i._firestore,i._userDataWriter,d.doc.key,d.doc,new ai(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:x,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(d=>o||d.type!==3).map(d=>{const x=new Gc(i._firestore,i._userDataWriter,d.doc.key,d.doc,new ai(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,N=-1;return d.type!==0&&(p=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),N=l.indexOf(d.doc.key)),{type:rP(d.type),doc:x,oldIndex:p,newIndex:N}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function rP(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(s){s=Ps(s,ms);const t=Ps(s.firestore,Mr);return $8(To(t),s._key).then(r=>v5(t,s,r))}class Lu extends b5{constructor(t){super(),this.firestore=t}convertBytes(t){return new In(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new ms(this.firestore,null,r)}}function ft(s){s=Ps(s,oa);const t=Ps(s.firestore,Mr),r=To(t),a=new Lu(t);return g5(s._query),q8(r,s._query).then(i=>new j5(t,a,s,i))}function _i(s,t,r){s=Ps(s,ms);const a=Ps(s.firestore,Mr),i=up(s.converter,t,r);return Vu(a,[tp(Ro(a),"setDoc",s._key,i,s.converter!==null,r).toMutation(s._key,us.none())])}function Rs(s,t,r,...a){s=Ps(s,ms);const i=Ps(s.firestore,Mr),o=Ro(i);let l;return l=typeof(t=Tt(t))=="string"||t instanceof Do?m5(o,"updateDoc",s._key,t,r,a):x5(o,"updateDoc",s._key,t),Vu(i,[l.toMutation(s._key,us.exists(!0))])}function aP(s){return Vu(Ps(s.firestore,Mr),[new Su(s._key,us.none())])}function fn(s,t){const r=Ps(s.firestore,Mr),a=U(s),i=up(s.converter,t);return Vu(r,[tp(Ro(s.firestore),"addDoc",a._key,i,s.converter!==null,{}).toMutation(a._key,us.exists(!1))]).then(()=>a)}function ve(s,...t){var r,a,i;s=Tt(s);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof t[l]!="object"||Jy(t[l])||(o=t[l],l++);const d={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Jy(t[l])){const I=t[l];t[l]=(r=I.next)===null||r===void 0?void 0:r.bind(I),t[l+1]=(a=I.error)===null||a===void 0?void 0:a.bind(I),t[l+2]=(i=I.complete)===null||i===void 0?void 0:i.bind(I)}let x,p,N;if(s instanceof ms)p=Ps(s.firestore,Mr),N=wu(s._key.path),x={next:I=>{t[l]&&t[l](v5(p,s,I))},error:t[l+1],complete:t[l+2]};else{const I=Ps(s,oa);p=Ps(I.firestore,Mr),N=I._query;const T=new Lu(p);x={next:A=>{t[l]&&t[l](new j5(p,T,I,A))},error:t[l+1],complete:t[l+2]},g5(s._query)}return function(T,A,f,L){const k=new Y0(L),_=new H0(A,k,f);return T.asyncQueue.enqueueAndForget(async()=>q0(await Vd(T),_)),()=>{k.su(),T.asyncQueue.enqueueAndForget(async()=>W0(await Vd(T),_))}}(To(p),N,d,x)}function Vu(s,t){return function(a,i){const o=new _r;return a.asyncQueue.enqueueAndForget(async()=>S8(await U8(a),i,o)),o.promise}(To(s),t)}function v5(s,t,r){const a=r.docs.get(t._key),i=new Lu(s);return new xp(s,i,t._key,a,new ai(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP={maxAttempts:5};function jl(s,t){if((s=Tt(s)).firestore!==t)throw new Ae(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ro(t)}get(t){const r=jl(t,this._firestore),a=new sP(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return Ye();const o=i[0];if(o.isFoundDocument())return new Ud(this._firestore,a,o.key,o,r.converter);if(o.isNoDocument())return new Ud(this._firestore,a,r._key,null,r.converter);throw Ye()})}set(t,r,a){const i=jl(t,this._firestore),o=up(i.converter,r,a),l=tp(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,a);return this._transaction.set(i._key,l),this}update(t,r,a,...i){const o=jl(t,this._firestore);let l;return l=typeof(r=Tt(r))=="string"||r instanceof Do?m5(this._dataReader,"Transaction.update",o._key,r,a,i):x5(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,l),this}delete(t){const r=jl(t,this._firestore);return this._transaction.delete(r._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP extends iP{constructor(t,r){super(t,r),this._firestore=t}get(t){const r=jl(t,this._firestore),a=new Lu(this._firestore);return super.get(t).then(i=>new xp(this._firestore,a,r._key,i._document,new ai(!1,!1),r.converter))}}function Qe(s,t,r){s=Ps(s,Mr);const a=Object.assign(Object.assign({},nP),r);return function(o){if(o.maxAttempts<1)throw new Ae(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(o,l,d){const x=new _r;return o.asyncQueue.enqueueAndForget(async()=>{const p=await B8(o);new L8(o.asyncQueue,p,d,l,x).Iu()}),x.promise}(To(s),i=>t(new lP(s,i)),a)}function Gt(){return new sp("serverTimestamp")}function Ue(s){return new rp("increment",s)}(function(t,r=!0){(function(i){Oi=i})(An),yr(new ir("firestore",(a,{instanceIdentifier:i,options:o})=>{const l=a.getProvider("app").getImmediate(),d=new Mr(new s1(a.getProvider("auth-internal")),new n1(l,a.getProvider("app-check-internal")),function(p,N){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ae(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lo(p.options.projectId,N)}(l,i),l);return o=Object.assign({useFetchStreams:r},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),Fs(sy,ry,t),Fs(sy,ry,"esm2017")})();function mp(s,t){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(s);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(s,a[i])&&(r[a[i]]=s[a[i]]);return r}function N5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oP=N5,w5=new Dn("auth","Firebase",N5());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=new gu("@firebase/auth");function cP(s,...t){Bd.logLevel<=xt.WARN&&Bd.warn(`Auth (${An}): ${s}`,...t)}function Hc(s,...t){Bd.logLevel<=xt.ERROR&&Bd.error(`Auth (${An}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(s,...t){throw hp(s,...t)}function Tr(s,...t){return hp(s,...t)}function k5(s,t,r){const a=Object.assign(Object.assign({},oP()),{[t]:r});return new Dn("auth","Firebase",a).create(t,{appName:s.name})}function Yr(s){return k5(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hp(s,...t){if(typeof s!="string"){const r=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(r,...a)}return w5.create(s,...t)}function Ze(s,t,...r){if(!s)throw hp(t,...r)}function Gr(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Hc(t),new Error(t)}function na(s,t){s||Gr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function C5(){return tb()==="http:"||tb()==="https:"}function tb(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(C5()||uN()||"connection"in navigator)?navigator.onLine:!0}function uP(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(t,r){this.shortDelay=t,this.longDelay=r,na(r>t,"Short delay should be less than long delay!"),this.isMobile=oI()||uI()}get(){return dP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(s,t){na(s.emulator,"Emulator should always be set here");const{url:r}=s.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{static initialize(t,r,a){this.fetchImpl=t,r&&(this.headersImpl=r),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hP=new Oo(3e4,6e4);function ca(s,t){return s.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:s.tenantId}):t}async function Lr(s,t,r,a,i={}){return E5(s,i,async()=>{let o={},l={};a&&(t==="GET"?l=a:o={body:JSON.stringify(a)});const d=Co(Object.assign({key:s.config.apiKey},l)).slice(1),x=await s._getAdditionalHeaders();x["Content-Type"]="application/json",s.languageCode&&(x["X-Firebase-Locale"]=s.languageCode);const p=Object.assign({method:t,headers:x},o);return dI()||(p.referrerPolicy="no-referrer"),I5.fetch()(await S5(s,s.config.apiHost,r,d),p)})}async function E5(s,t,r){s._canInitEmulator=!1;const a=Object.assign(Object.assign({},xP),t);try{const i=new fP(s),o=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Cc(s,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const d=o.ok?l.errorMessage:l.error.message,[x,p]=d.split(" : ");if(x==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cc(s,"credential-already-in-use",l);if(x==="EMAIL_EXISTS")throw Cc(s,"email-already-in-use",l);if(x==="USER_DISABLED")throw Cc(s,"user-disabled",l);const N=a[x]||x.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw k5(s,N,p);jr(s,N)}}catch(i){if(i instanceof lr)throw i;jr(s,"network-request-failed",{message:String(i)})}}async function zo(s,t,r,a,i={}){const o=await Lr(s,t,r,a,i);return"mfaPendingCredential"in o&&jr(s,"multi-factor-auth-required",{_serverResponse:o}),o}async function S5(s,t,r,a){const i=`${t}${r}?${a}`,o=s,l=o.config.emulator?pp(s.config,i):`${s.config.apiScheme}://${i}`;return mP.includes(r)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function pP(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,a)=>{this.timer=setTimeout(()=>a(Tr(this.auth,"network-request-failed")),hP.get())})}}function Cc(s,t,r){const a={appName:s.name};r.email&&(a.email=r.email),r.phoneNumber&&(a.phoneNumber=r.phoneNumber);const i=Tr(s,t,a);return i.customData._tokenResponse=r,i}function sb(s){return s!==void 0&&s.enterprise!==void 0}class gP{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return pP(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function yP(s,t){return Lr(s,"GET","/v2/recaptchaConfig",ca(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bP(s,t){return Lr(s,"POST","/v1/accounts:delete",t)}async function qd(s,t){return Lr(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function jP(s,t=!1){const r=Tt(s),a=await r.getIdToken(t),i=fp(a);Ze(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:a,authTime:Ll($x(i.auth_time)),issuedAtTime:Ll($x(i.iat)),expirationTime:Ll($x(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function $x(s){return Number(s)*1e3}function fp(s){const[t,r,a]=s.split(".");if(t===void 0||r===void 0||a===void 0)return Hc("JWT malformed, contained fewer than 3 sections"),null;try{const i=nN(r);return i?JSON.parse(i):(Hc("Failed to decode base64 JWT payload"),null)}catch(i){return Hc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function rb(s){const t=fp(s);return Ze(t,"internal-error"),Ze(typeof t.exp<"u","internal-error"),Ze(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pi(s,t,r=!1){if(r)return t;try{return await t}catch(a){throw a instanceof lr&&vP(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function vP({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var r;if(t){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ll(this.lastLoginAt),this.creationTime=Ll(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wd(s){var t;const r=s.auth,a=await s.getIdToken(),i=await Pi(s,qd(r,{idToken:a}));Ze(i==null?void 0:i.users.length,r,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const l=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?_5(o.providerUserInfo):[],d=kP(s.providerData,l),x=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!(d!=null&&d.length),N=x?p:!1,I={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new uh(o.createdAt,o.lastLoginAt),isAnonymous:N};Object.assign(s,I)}async function wP(s){const t=Tt(s);await Wd(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function kP(s,t){return[...s.filter(a=>!t.some(i=>i.providerId===a.providerId)),...t]}function _5(s){return s.map(t=>{var{providerId:r}=t,a=mp(t,["providerId"]);return{providerId:r,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP(s,t){const r=await E5(s,{},async()=>{const a=Co({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=s.config,l=await S5(s,i,"/v1/token",`key=${o}`),d=await s._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",I5.fetch()(l,{method:"POST",headers:d,body:a})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function IP(s,t){return Lr(s,"POST","/v2/accounts:revokeToken",ca(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ze(t.idToken,"internal-error"),Ze(typeof t.idToken<"u","internal-error"),Ze(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):rb(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Ze(t.length!==0,"internal-error");const r=rb(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ze(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:a,refreshToken:i,expiresIn:o}=await CP(t,r);this.updateTokensAndExpiration(a,i,Number(o))}updateTokensAndExpiration(t,r,a){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,r){const{refreshToken:a,accessToken:i,expirationTime:o}=r,l=new mi;return a&&(Ze(typeof a=="string","internal-error",{appName:t}),l.refreshToken=a),i&&(Ze(typeof i=="string","internal-error",{appName:t}),l.accessToken=i),o&&(Ze(typeof o=="number","internal-error",{appName:t}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new mi,this.toJSON())}_performRefresh(){return Gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(s,t){Ze(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class mr{constructor(t){var{uid:r,auth:a,stsTokenManager:i}=t,o=mp(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=a,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new uh(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const r=await Pi(this,this.stsTokenManager.getToken(this.auth,t));return Ze(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return jP(this,t)}reload(){return wP(this)}_assign(t){this!==t&&(Ze(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>Object.assign({},r)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new mr(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(t){Ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),r&&await Wd(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qs(this.auth.app))return Promise.reject(Yr(this.auth));const t=await this.getIdToken();return await Pi(this,bP(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){var a,i,o,l,d,x,p,N;const I=(a=r.displayName)!==null&&a!==void 0?a:void 0,T=(i=r.email)!==null&&i!==void 0?i:void 0,A=(o=r.phoneNumber)!==null&&o!==void 0?o:void 0,f=(l=r.photoURL)!==null&&l!==void 0?l:void 0,L=(d=r.tenantId)!==null&&d!==void 0?d:void 0,k=(x=r._redirectEventId)!==null&&x!==void 0?x:void 0,_=(p=r.createdAt)!==null&&p!==void 0?p:void 0,z=(N=r.lastLoginAt)!==null&&N!==void 0?N:void 0,{uid:M,emailVerified:Y,isAnonymous:G,providerData:W,stsTokenManager:R}=r;Ze(M&&R,t,"internal-error");const c=mi.fromJSON(this.name,R);Ze(typeof M=="string",t,"internal-error"),pa(I,t.name),pa(T,t.name),Ze(typeof Y=="boolean",t,"internal-error"),Ze(typeof G=="boolean",t,"internal-error"),pa(A,t.name),pa(f,t.name),pa(L,t.name),pa(k,t.name),pa(_,t.name),pa(z,t.name);const F=new mr({uid:M,auth:t,email:T,emailVerified:Y,displayName:I,isAnonymous:G,photoURL:f,phoneNumber:A,tenantId:L,stsTokenManager:c,createdAt:_,lastLoginAt:z});return W&&Array.isArray(W)&&(F.providerData=W.map(V=>Object.assign({},V))),k&&(F._redirectEventId=k),F}static async _fromIdTokenResponse(t,r,a=!1){const i=new mi;i.updateFromServerResponse(r);const o=new mr({uid:r.localId,auth:t,stsTokenManager:i,isAnonymous:a});return await Wd(o),o}static async _fromGetAccountInfoResponse(t,r,a){const i=r.users[0];Ze(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?_5(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),d=new mi;d.updateFromIdToken(a);const x=new mr({uid:i.localId,auth:t,stsTokenManager:d,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new uh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(x,p),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new Map;function Hr(s){na(s instanceof Function,"Expected a class definition");let t=ab.get(s);return t?(na(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,ab.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}P5.type="NONE";const nb=P5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(s,t,r){return`firebase:${s}:${t}:${r}`}class hi{constructor(t,r,a){this.persistence=t,this.auth=r,this.userKey=a;const{config:i,name:o}=this.auth;this.fullUserKey=Qc(this.userKey,i.apiKey,o),this.fullPersistenceKey=Qc("persistence",i.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await qd(this.auth,{idToken:t}).catch(()=>{});return r?mr._fromGetAccountInfoResponse(this.auth,r,t):null}return mr._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,a="authUser"){if(!r.length)return new hi(Hr(nb),t,a);const i=(await Promise.all(r.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=i[0]||Hr(nb);const l=Qc(a,t.config.apiKey,t.name);let d=null;for(const p of r)try{const N=await p._get(l);if(N){let I;if(typeof N=="string"){const T=await qd(t,{idToken:N}).catch(()=>{});if(!T)break;I=await mr._fromGetAccountInfoResponse(t,T,N)}else I=mr._fromJSON(t,N);p!==o&&(d=I),o=p;break}}catch{}const x=i.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!x.length?new hi(o,t,a):(o=x[0],d&&await o._set(l,d.toJSON()),await Promise.all(r.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new hi(o,t,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(R5(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(T5(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(O5(t))return"Blackberry";if(z5(t))return"Webos";if(D5(t))return"Safari";if((t.includes("chrome/")||A5(t))&&!t.includes("edge/"))return"Chrome";if(M5(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(r);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function T5(s=Cs()){return/firefox\//i.test(s)}function D5(s=Cs()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function A5(s=Cs()){return/crios\//i.test(s)}function R5(s=Cs()){return/iemobile/i.test(s)}function M5(s=Cs()){return/android/i.test(s)}function O5(s=Cs()){return/blackberry/i.test(s)}function z5(s=Cs()){return/webos/i.test(s)}function gp(s=Cs()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function EP(s=Cs()){var t;return gp(s)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function SP(){return xI()&&document.documentMode===10}function L5(s=Cs()){return gp(s)||M5(s)||z5(s)||O5(s)||/windows phone/i.test(s)||R5(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(s,t=[]){let r;switch(s){case"Browser":r=ib(Cs());break;case"Worker":r=`${ib(Cs())}-${s}`;break;default:r=s}const a=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${An}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const a=o=>new Promise((l,d)=>{try{const x=t(o);l(x)}catch(x){d(x)}});a.onAbort=r,this.queue.push(a);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const a of this.queue)await a(t),a.onAbort&&r.push(a.onAbort)}catch(a){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PP(s,t={}){return Lr(s,"GET","/v2/passwordPolicy",ca(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=6;class DP{constructor(t){var r,a,i,o;const l=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=l.minPasswordLength)!==null&&r!==void 0?r:TP,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(a=t.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var r,a,i,o,l,d;const x={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,x),this.validatePasswordCharacterOptions(t,x),x.isValid&&(x.isValid=(r=x.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),x.isValid&&(x.isValid=(a=x.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),x.isValid&&(x.isValid=(i=x.containsLowercaseLetter)!==null&&i!==void 0?i:!0),x.isValid&&(x.isValid=(o=x.containsUppercaseLetter)!==null&&o!==void 0?o:!0),x.isValid&&(x.isValid=(l=x.containsNumericCharacter)!==null&&l!==void 0?l:!0),x.isValid&&(x.isValid=(d=x.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),x}validatePasswordLengthOptions(t,r){const a=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;a&&(r.meetsMinPasswordLength=t.length>=a),i&&(r.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let a;for(let i=0;i<t.length;i++)a=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,r,a,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(t,r,a,i){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=a,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lb(this),this.idTokenSubscription=new lb(this),this.beforeStateQueue=new _P(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=w5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Hr(r)),this._initializationPromise=this.queue(async()=>{var a,i,o;if(!this._deleted&&(this.persistenceManager=await hi.create(this,t),(a=this._resolvePersistenceManagerAvailable)===null||a===void 0||a.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await qd(this,{idToken:t}),a=await mr._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(a)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(qs(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let i=a,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,d=i==null?void 0:i._redirectEventId,x=await this.tryRedirectSignIn(t);(!l||l===d)&&(x!=null&&x.user)&&(i=x.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await Wd(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=uP()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(qs(this.app))return Promise.reject(Yr(this));const r=t?Tt(t):null;return r&&Ze(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Ze(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return qs(this.app)?Promise.reject(Yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return qs(this.app)?Promise.reject(Yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await PP(this),r=new DP(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Dn("auth","Firebase",t())}onAuthStateChanged(t,r,a){return this.registerStateListener(this.authStateSubscription,t,r,a)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,a){return this.registerStateListener(this.idTokenSubscription,t,r,a)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(a.tenantId=this.tenantId),await IP(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,r){const a=await this.getOrInitRedirectPersistenceManager(r);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Hr(t)||this._popupRedirectResolver;Ze(r,this,"argument-error"),this.redirectPersistenceManager=await hi.create(this,[Hr(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,a;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===t?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(r=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,a,i){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ze(d,this,"internal-error"),d.then(()=>{l||o(this.currentUser)}),typeof r=="function"){const x=t.addObserver(r,a,i);return()=>{l=!0,x()}}else{const x=t.addObserver(r);return()=>{l=!0,x()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=V5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const a=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());a&&(r["X-Firebase-Client"]=a);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var t;if(qs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return r!=null&&r.error&&cP(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function On(s){return Tt(s)}class lb{constructor(t){this.auth=t,this.observer=null,this.addObserver=bI(r=>this.observer=r)}get next(){return Ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RP(s){Fu=s}function F5(s){return Fu.loadJS(s)}function MP(){return Fu.recaptchaEnterpriseScript}function OP(){return Fu.gapiScript}function zP(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class LP{constructor(){this.enterprise=new VP}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class VP{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const FP="recaptcha-enterprise",U5="NO_RECAPTCHA";class UP{constructor(t){this.type=FP,this.auth=On(t)}async verify(t="verify",r=!1){async function a(o){if(!r){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,d)=>{yP(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(x=>{if(x.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new gP(x);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(x=>{d(x)})})}function i(o,l,d){const x=window.grecaptcha;sb(x)?x.enterprise.ready(()=>{x.enterprise.execute(o,{action:t}).then(p=>{l(p)}).catch(()=>{l(U5)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new LP().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{a(this.auth).then(d=>{if(!r&&sb(window.grecaptcha))i(d,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let x=MP();x.length!==0&&(x+=d),F5(x).then(()=>{i(d,o,l)}).catch(p=>{l(p)})}}).catch(d=>{l(d)})})}}async function dl(s,t,r,a=!1,i=!1){const o=new UP(s);let l;if(i)l=U5;else try{l=await o.verify(r)}catch{l=await o.verify(r,!0)}const d=Object.assign({},t);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const x=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:x,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const x=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:x,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return a?Object.assign(d,{captchaResp:l}):Object.assign(d,{captchaResponse:l}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function xh(s,t,r,a,i){var o,l;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=s._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await dl(s,t,r,r==="getOobCode");return a(s,d)}else return a(s,t).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const x=await dl(s,t,r,r==="getOobCode");return a(s,x)}else return Promise.reject(d)});else if(i==="PHONE_PROVIDER")if(!((l=s._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("PHONE_PROVIDER")){const d=await dl(s,t,r);return a(s,d).catch(async x=>{var p;if(((p=s._getRecaptchaConfig())===null||p===void 0?void 0:p.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(x.code==="auth/missing-recaptcha-token"||x.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${r} flow.`);const N=await dl(s,t,r,!1,!0);return a(s,N)}return Promise.reject(x)})}else{const d=await dl(s,t,r,!1,!0);return a(s,d)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(s,t){const r=Ja(s,"auth");if(r.isInitialized()){const i=r.getImmediate(),o=r.getOptions();if(Ba(o,t??{}))return i;jr(i,"already-initialized")}return r.initialize({options:t})}function $P(s,t){const r=(t==null?void 0:t.persistence)||[],a=(Array.isArray(r)?r:[r]).map(Hr);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(a,t==null?void 0:t.popupRedirectResolver)}function qP(s,t,r){const a=On(s);Ze(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const i=!!(r!=null&&r.disableWarnings),o=B5(t),{host:l,port:d}=WP(t),x=d===null?"":`:${d}`,p={url:`${o}//${l}${x}/`},N=Object.freeze({host:l,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!a._canInitEmulator){Ze(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Ze(Ba(p,a.config.emulator)&&Ba(N,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=p,a.emulatorConfig=N,a.settings.appVerificationDisabledForTesting=!0,i||GP()}function B5(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function WP(s){const t=B5(s),r=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!r)return{host:"",port:null};const a=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(a);if(i){const o=i[1];return{host:o,port:ob(a.substr(o.length+1))}}else{const[o,l]=a.split(":");return{host:o,port:ob(l)}}}function ob(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function GP(){function s(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return Gr("not implemented")}_getIdTokenResponse(t){return Gr("not implemented")}_linkToIdToken(t,r){return Gr("not implemented")}_getReauthenticationResolver(t){return Gr("not implemented")}}async function HP(s,t){return Lr(s,"POST","/v1/accounts:update",t)}async function QP(s,t){return Lr(s,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KP(s,t){return zo(s,"POST","/v1/accounts:signInWithPassword",ca(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YP(s,t){return zo(s,"POST","/v1/accounts:signInWithEmailLink",ca(s,t))}async function XP(s,t){return zo(s,"POST","/v1/accounts:signInWithEmailLink",ca(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends yp{constructor(t,r,a,i=null){super("password",a),this._email=t,this._password=r,this._tenantId=i}static _fromEmailAndPassword(t,r){return new po(t,r,"password")}static _fromEmailAndCode(t,r,a=null){return new po(t,r,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xh(t,r,"signInWithPassword",KP,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return YP(t,{email:this._email,oobCode:this._password});default:jr(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const a={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xh(t,a,"signUpPassword",QP,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return XP(t,{idToken:r,email:this._email,oobCode:this._password});default:jr(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pi(s,t){return zo(s,"POST","/v1/accounts:signInWithIdp",ca(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="http://localhost";class En extends yp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new En(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):jr("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:i}=r,o=mp(r,["providerId","signInMethod"]);if(!a||!i)return null;const l=new En(a,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(t){const r=this.buildRequest();return pi(t,r)}_linkToIdToken(t,r){const a=this.buildRequest();return a.idToken=r,pi(t,a)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,pi(t,r)}buildRequest(){const t={requestUri:JP,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=Co(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eT(s){const t=pl(fl(s)).link,r=t?pl(fl(t)).deep_link_id:null,a=pl(fl(s)).deep_link_id;return(a?pl(fl(a)).link:null)||a||r||t||s}class bp{constructor(t){var r,a,i,o,l,d;const x=pl(fl(t)),p=(r=x.apiKey)!==null&&r!==void 0?r:null,N=(a=x.oobCode)!==null&&a!==void 0?a:null,I=ZP((i=x.mode)!==null&&i!==void 0?i:null);Ze(p&&N&&I,"argument-error"),this.apiKey=p,this.operation=I,this.code=N,this.continueUrl=(o=x.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=x.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(d=x.tenantId)!==null&&d!==void 0?d:null}static parseLink(t){const r=eT(t);try{return new bp(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){this.providerId=Ui.PROVIDER_ID}static credential(t,r){return po._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const a=bp.parseLink(r);return Ze(a,"argument-error"),po._fromEmailAndCode(t,a.code,a.tenantId)}}Ui.PROVIDER_ID="password";Ui.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ui.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends $5{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends Lo{constructor(){super("facebook.com")}static credential(t){return En._fromParams({providerId:ja.PROVIDER_ID,signInMethod:ja.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ja.credentialFromTaggedObject(t)}static credentialFromError(t){return ja.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ja.credential(t.oauthAccessToken)}catch{return null}}}ja.FACEBOOK_SIGN_IN_METHOD="facebook.com";ja.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends Lo{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return En._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return va.credentialFromTaggedObject(t)}static credentialFromError(t){return va.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:a}=t;if(!r&&!a)return null;try{return va.credential(r,a)}catch{return null}}}va.GOOGLE_SIGN_IN_METHOD="google.com";va.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends Lo{constructor(){super("github.com")}static credential(t){return En._fromParams({providerId:Na.PROVIDER_ID,signInMethod:Na.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Na.credentialFromTaggedObject(t)}static credentialFromError(t){return Na.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Na.credential(t.oauthAccessToken)}catch{return null}}}Na.GITHUB_SIGN_IN_METHOD="github.com";Na.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends Lo{constructor(){super("twitter.com")}static credential(t,r){return En._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return wa.credentialFromTaggedObject(t)}static credentialFromError(t){return wa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:a}=t;if(!r||!a)return null;try{return wa.credential(r,a)}catch{return null}}}wa.TWITTER_SIGN_IN_METHOD="twitter.com";wa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tT(s,t){return zo(s,"POST","/v1/accounts:signUp",ca(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,a,i=!1){const o=await mr._fromIdTokenResponse(t,a,i),l=cb(a);return new Sn({user:o,providerId:l,_tokenResponse:a,operationType:r})}static async _forOperation(t,r,a){await t._updateTokensIfNecessary(a,!0);const i=cb(a);return new Sn({user:t,providerId:i,_tokenResponse:a,operationType:r})}}function cb(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends lr{constructor(t,r,a,i){var o;super(r.code,r.message),this.operationType=a,this.user=i,Object.setPrototypeOf(this,Gd.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:r.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,r,a,i){return new Gd(t,r,a,i)}}function q5(s,t,r,a){return(t==="reauthenticate"?r._getReauthenticationResolver(s):r._getIdTokenResponse(s)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Gd._fromErrorAndOperation(s,o,t,a):o})}async function sT(s,t,r=!1){const a=await Pi(s,t._linkToIdToken(s.auth,await s.getIdToken()),r);return Sn._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rT(s,t,r=!1){const{auth:a}=s;if(qs(a.app))return Promise.reject(Yr(a));const i="reauthenticate";try{const o=await Pi(s,q5(a,i,t,s),r);Ze(o.idToken,a,"internal-error");const l=fp(o.idToken);Ze(l,a,"internal-error");const{sub:d}=l;return Ze(s.uid===d,a,"user-mismatch"),Sn._forOperation(s,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&jr(a,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W5(s,t,r=!1){if(qs(s.app))return Promise.reject(Yr(s));const a="signIn",i=await q5(s,a,t),o=await Sn._fromIdTokenResponse(s,a,i);return r||await s._updateCurrentUser(o.user),o}async function aT(s,t){return W5(On(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G5(s){const t=On(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function nT(s,t,r){if(qs(s.app))return Promise.reject(Yr(s));const a=On(s),l=await xh(a,{returnSecureToken:!0,email:t,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tT,"EMAIL_PASSWORD_PROVIDER").catch(x=>{throw x.code==="auth/password-does-not-meet-requirements"&&G5(s),x}),d=await Sn._fromIdTokenResponse(a,"signIn",l);return await a._updateCurrentUser(d.user),d}function iT(s,t,r){return qs(s.app)?Promise.reject(Yr(s)):aT(Tt(s),Ui.credential(t,r)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&G5(s),a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lT(s,t){return Lr(s,"POST","/v1/accounts:createAuthUri",ca(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oT(s,t){const r=C5()?$d():"http://localhost",a={identifier:t,continueUri:r},{signinMethods:i}=await lT(Tt(s),a);return i||[]}function H5(s,t){return cT(Tt(s),null,t)}async function cT(s,t,r){const{auth:a}=s,o={idToken:await s.getIdToken(),returnSecureToken:!0};t&&(o.email=t),r&&(o.password=r);const l=await Pi(s,HP(a,o));await s._updateTokensIfNecessary(l,!0)}function dT(s,t,r,a){return Tt(s).onIdTokenChanged(t,r,a)}function uT(s,t,r){return Tt(s).beforeAuthStateChanged(t,r)}function vt(s,t,r,a){return Tt(s).onAuthStateChanged(t,r,a)}function fo(s){return Tt(s).signOut()}const Hd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Hd,"1"),this.storage.removeItem(Hd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=1e3,mT=10;class K5 extends Q5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=L5(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const a=this.storage.getItem(r),i=this.localCache[r];a!==i&&t(r,i,a)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((l,d,x)=>{this.notifyListeners(l,x)});return}const a=t.key;r?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(a);!r&&this.localCache[a]===l||this.notifyListeners(a,l)},o=this.storage.getItem(a);SP()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,mT):i()}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const i of Array.from(a))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:a}),!0)})},xT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}K5.type="LOCAL";const hT=K5;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5 extends Q5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}Y5.type="SESSION";const X5=Y5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(i=>i.isListeningto(t));if(r)return r;const a=new Uu(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:a,eventType:i,data:o}=r.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;r.ports[0].postMessage({status:"ack",eventId:a,eventType:i});const d=Array.from(l).map(async p=>p(r.origin,o)),x=await pT(d);r.ports[0].postMessage({status:"done",eventId:a,eventType:i,response:x})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(s="",t=10){let r="";for(let a=0;a<t;a++)r+=Math.floor(Math.random()*10);return s+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,a=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((d,x)=>{const p=jp("",20);i.port1.start();const N=setTimeout(()=>{x(new Error("unsupported_event"))},a);l={messageChannel:i,onMessage(I){const T=I;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(N),o=setTimeout(()=>{x(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(T.data.response);break;default:clearTimeout(N),clearTimeout(o),x(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:t,eventId:p,data:r},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(){return window}function gT(s){Dr().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(){return typeof Dr().WorkerGlobalScope<"u"&&typeof Dr().importScripts=="function"}async function yT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bT(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function jT(){return J5()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5="firebaseLocalStorageDb",vT=1,Qd="firebaseLocalStorage",e2="fbase_key";class Vo{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Bu(s,t){return s.transaction([Qd],t?"readwrite":"readonly").objectStore(Qd)}function NT(){const s=indexedDB.deleteDatabase(Z5);return new Vo(s).toPromise()}function mh(){const s=indexedDB.open(Z5,vT);return new Promise((t,r)=>{s.addEventListener("error",()=>{r(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(Qd,{keyPath:e2})}catch(i){r(i)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(Qd)?t(a):(a.close(),await NT(),t(await mh()))})})}async function db(s,t,r){const a=Bu(s,!0).put({[e2]:t,value:r});return new Vo(a).toPromise()}async function wT(s,t){const r=Bu(s,!1).get(t),a=await new Vo(r).toPromise();return a===void 0?null:a.value}function ub(s,t){const r=Bu(s,!0).delete(t);return new Vo(r).toPromise()}const kT=800,CT=3;class t2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mh(),this.db)}async _withRetries(t){let r=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(r++>CT)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return J5()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uu._getInstance(jT()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await yT(),!this.activeServiceWorker)return;this.sender=new fT(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((t=a[0])===null||t===void 0)&&t.fulfilled&&!((r=a[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||bT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await mh();return await db(t,Hd,"1"),await ub(t,Hd),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(a=>db(a,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(a=>wT(a,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ub(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const o=Bu(i,!1).getAll();return new Vo(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],a=new Set;if(t.length!==0)for(const{fbase_key:i,value:o}of t)a.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!a.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const i of Array.from(a))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}t2.type="LOCAL";const IT=t2;new Oo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(s,t){return t?Hr(t):(Ze(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp extends yp{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return pi(t,this._buildIdpRequest())}_linkToIdToken(t,r){return pi(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return pi(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function ST(s){return W5(s.auth,new vp(s),s.bypassAuthState)}function _T(s){const{auth:t,user:r}=s;return Ze(r,t,"internal-error"),rT(r,new vp(s),s.bypassAuthState)}async function PT(s){const{auth:t,user:r}=s;return Ze(r,t,"internal-error"),sT(r,new vp(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(t,r,a,i,o=!1){this.auth=t,this.resolver=a,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:a,postBody:i,tenantId:o,error:l,type:d}=t;if(l){this.reject(l);return}const x={auth:this.auth,requestUri:r,sessionId:a,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(x))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return ST;case"linkViaPopup":case"linkViaRedirect":return PT;case"reauthViaPopup":case"reauthViaRedirect":return _T;default:jr(this.auth,"internal-error")}}resolve(t){na(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){na(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=new Oo(2e3,1e4);class ni extends s2{constructor(t,r,a,i,o){super(t,r,i,o),this.provider=a,this.authWindow=null,this.pollId=null,ni.currentPopupAction&&ni.currentPopupAction.cancel(),ni.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ze(t,this.auth,"internal-error"),t}async onExecution(){na(this.filter.length===1,"Popup operations only handle one event");const t=jp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Tr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Tr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ni.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,a;if(!((a=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,TT.get())};t()}}ni.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="pendingRedirect",Kc=new Map;class AT extends s2{constructor(t,r,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a),this.eventId=null}async execute(){let t=Kc.get(this.auth._key());if(!t){try{const a=await RT(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(r){t=()=>Promise.reject(r)}Kc.set(this.auth._key(),t)}return this.bypassAuthState||Kc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RT(s,t){const r=zT(t),a=OT(s);if(!await a._isAvailable())return!1;const i=await a._get(r)==="true";return await a._remove(r),i}function MT(s,t){Kc.set(s._key(),t)}function OT(s){return Hr(s._redirectPersistence)}function zT(s){return Qc(DT,s.config.apiKey,s.name)}async function LT(s,t,r=!1){if(qs(s.app))return Promise.reject(Yr(s));const a=On(s),i=ET(a,t),l=await new AT(a,i,r).execute();return l&&!r&&(delete l.user._redirectEventId,await a._persistUserIfCurrent(l.user),await a._setRedirectUser(null,t)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=10*60*1e3;class FT{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(r=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!UT(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var a;if(t.error&&!r2(t)){const i=((a=t.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";r.onError(Tr(this.auth,i))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const a=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=VT&&this.cachedEventUids.clear(),this.cachedEventUids.has(xb(t))}saveEventToCache(t){this.cachedEventUids.add(xb(t)),this.lastProcessedEventTime=Date.now()}}function xb(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function r2({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function UT(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return r2(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BT(s,t={}){return Lr(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qT=/^https?/;async function WT(s){if(s.config.emulator)return;const{authorizedDomains:t}=await BT(s);for(const r of t)try{if(GT(r))return}catch{}jr(s,"unauthorized-domain")}function GT(s){const t=$d(),{protocol:r,hostname:a}=new URL(t);if(s.startsWith("chrome-extension://")){const l=new URL(s);return l.hostname===""&&a===""?r==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&l.hostname===a}if(!qT.test(r))return!1;if($T.test(s))return a===s;const i=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=new Oo(3e4,6e4);function mb(){const s=Dr().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let r=0;r<s.CP.length;r++)s.CP[r]=null}}function QT(s){return new Promise((t,r)=>{var a,i,o;function l(){mb(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{mb(),r(Tr(s,"network-request-failed"))},timeout:HT.get()})}if(!((i=(a=Dr().gapi)===null||a===void 0?void 0:a.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((o=Dr().gapi)===null||o===void 0)&&o.load)l();else{const d=zP("iframefcb");return Dr()[d]=()=>{gapi.load?l():r(Tr(s,"network-request-failed"))},F5(`${OP()}?onload=${d}`).catch(x=>r(x))}}).catch(t=>{throw Yc=null,t})}let Yc=null;function KT(s){return Yc=Yc||QT(s),Yc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=new Oo(5e3,15e3),XT="__/auth/iframe",JT="emulator/auth/iframe",ZT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t6(s){const t=s.config;Ze(t.authDomain,s,"auth-domain-config-required");const r=t.emulator?pp(t,JT):`https://${s.config.authDomain}/${XT}`,a={apiKey:t.apiKey,appName:s.name,v:An},i=e6.get(s.config.apiHost);i&&(a.eid=i);const o=s._getFrameworks();return o.length&&(a.fw=o.join(",")),`${r}?${Co(a).slice(1)}`}async function s6(s){const t=await KT(s),r=Dr().gapi;return Ze(r,s,"internal-error"),t.open({where:document.body,url:t6(s),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZT,dontclear:!0},a=>new Promise(async(i,o)=>{await a.restyle({setHideOnLeave:!1});const l=Tr(s,"network-request-failed"),d=Dr().setTimeout(()=>{o(l)},YT.get());function x(){Dr().clearTimeout(d),i(a)}a.ping(x).then(x,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},a6=500,n6=600,i6="_blank",l6="http://localhost";class hb{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function o6(s,t,r,a=a6,i=n6){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-a)/2,0).toString();let d="";const x=Object.assign(Object.assign({},r6),{width:a.toString(),height:i.toString(),top:o,left:l}),p=Cs().toLowerCase();r&&(d=A5(p)?i6:r),T5(p)&&(t=t||l6,x.scrollbars="yes");const N=Object.entries(x).reduce((T,[A,f])=>`${T}${A}=${f},`,"");if(EP(p)&&d!=="_self")return c6(t||"",d),new hb(null);const I=window.open(t||"",d,N);Ze(I,s,"popup-blocked");try{I.focus()}catch{}return new hb(I)}function c6(s,t){const r=document.createElement("a");r.href=s,r.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6="__/auth/handler",u6="emulator/auth/handler",x6=encodeURIComponent("fac");async function pb(s,t,r,a,i,o){Ze(s.config.authDomain,s,"auth-domain-config-required"),Ze(s.config.apiKey,s,"invalid-api-key");const l={apiKey:s.config.apiKey,appName:s.name,authType:r,redirectUrl:a,v:An,eventId:i};if(t instanceof $5){t.setDefaultLanguage(s.languageCode),l.providerId=t.providerId||"",yI(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[N,I]of Object.entries(o||{}))l[N]=I}if(t instanceof Lo){const N=t.getScopes().filter(I=>I!=="");N.length>0&&(l.scopes=N.join(","))}s.tenantId&&(l.tid=s.tenantId);const d=l;for(const N of Object.keys(d))d[N]===void 0&&delete d[N];const x=await s._getAppCheckToken(),p=x?`#${x6}=${encodeURIComponent(x)}`:"";return`${m6(s)}?${Co(d).slice(1)}${p}`}function m6({config:s}){return s.emulator?pp(s,u6):`https://${s.authDomain}/${d6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="webStorageSupport";class h6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=X5,this._completeRedirectFn=LT,this._overrideRedirectResult=MT}async _openPopup(t,r,a,i){var o;na((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await pb(t,r,a,$d(),i);return o6(t,l,jp())}async _openRedirect(t,r,a,i){await this._originValidation(t);const o=await pb(t,r,a,$d(),i);return gT(o),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:i,promise:o}=this.eventManagers[r];return i?Promise.resolve(i):(na(o,"If manager is not set, promise should be"),o)}const a=this.initAndGetManager(t);return this.eventManagers[r]={promise:a},a.catch(()=>{delete this.eventManagers[r]}),a}async initAndGetManager(t){const r=await s6(t),a=new FT(t);return r.register("authEvent",i=>(Ze(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:a.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=r,a}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(qx,{type:qx},i=>{var o;const l=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[qx];l!==void 0&&r(!!l),jr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=WT(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return L5()||D5()||gp()}}const p6=h6;var fb="@firebase/auth",gb="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(a=>{t((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function y6(s){yr(new ir("auth",(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=a.options;Ze(l&&!l.includes(":"),"invalid-api-key",{appName:a.name});const x={apiKey:l,authDomain:d,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:V5(s)},p=new AP(a,i,o,x);return $P(p,r),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,a)=>{t.getProvider("auth-internal").initialize()})),yr(new ir("auth-internal",t=>{const r=On(t.getProvider("auth").getImmediate());return(a=>new f6(a))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fs(fb,gb,g6(s)),Fs(fb,gb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=5*60,j6=cN("authIdTokenMaxAge")||b6;let yb=null;const v6=s=>async t=>{const r=t&&await t.getIdTokenResult(),a=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(a&&a>j6)return;const i=r==null?void 0:r.token;yb!==i&&(yb=i,await fetch(s,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function a2(s=yu()){const t=Ja(s,"auth");if(t.isInitialized())return t.getImmediate();const r=BP(s,{popupRedirectResolver:p6,persistence:[IT,hT,X5]}),a=cN("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(a,location.origin);if(location.origin===o.origin){const l=v6(o.toString());uT(r,l,()=>l(r.currentUser)),dT(r,d=>l(d))}}const i=iN("auth");return i&&qP(r,`http://${i}`),r}function N6(){var s,t;return(t=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&t!==void 0?t:document}RP({loadJS(s){return new Promise((t,r)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=t,a.onerror=i=>{const o=Tr("internal-error");o.customData=i,r(o)},a.type="text/javascript",a.charset="UTF-8",N6().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});y6("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="firebasestorage.googleapis.com",w6="storageBucket",k6=2*60*1e3,C6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends lr{constructor(t,r,a=0){super(Wx(t),`Firebase Storage: ${r} (${Wx(t)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vr.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Wx(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Or;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Or||(Or={}));function Wx(s){return"storage/"+s}function I6(){const s="An unknown error occurred, please check the error payload for server response.";return new Vr(Or.UNKNOWN,s)}function E6(){return new Vr(Or.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function S6(){return new Vr(Or.CANCELED,"User canceled the upload/download.")}function _6(s){return new Vr(Or.INVALID_URL,"Invalid URL '"+s+"'.")}function P6(s){return new Vr(Or.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function bb(s){return new Vr(Or.INVALID_ARGUMENT,s)}function i2(){return new Vr(Or.APP_DELETED,"The Firebase app was deleted.")}function T6(s){return new Vr(Or.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let a;try{a=hr.makeFromUrl(t,r)}catch{return new hr(t,"")}if(a.path==="")return a;throw P6(t)}static makeFromUrl(t,r){let a=null;const i="([A-Za-z0-9.\\-_]+)";function o(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}const l="(/(.*))?$",d=new RegExp("^gs://"+i+l,"i"),x={bucket:1,path:3};function p(Y){Y.path_=decodeURIComponent(Y.path)}const N="v[A-Za-z0-9_]+",I=r.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",A=new RegExp(`^https?://${I}/${N}/b/${i}/o${T}`,"i"),f={bucket:1,path:3},L=r===n2?"(?:storage.googleapis.com|storage.cloud.google.com)":r,k="([^?#]*)",_=new RegExp(`^https?://${L}/${i}/${k}`,"i"),M=[{regex:d,indices:x,postModify:o},{regex:A,indices:f,postModify:p},{regex:_,indices:{bucket:1,path:2},postModify:p}];for(let Y=0;Y<M.length;Y++){const G=M[Y],W=G.regex.exec(t);if(W){const R=W[G.indices.bucket];let c=W[G.indices.path];c||(c=""),a=new hr(R,c),G.postModify(a);break}}if(a==null)throw _6(t);return a}}class D6{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(s,t,r){let a=1,i=null,o=null,l=!1,d=0;function x(){return d===2}let p=!1;function N(...k){p||(p=!0,t.apply(null,k))}function I(k){i=setTimeout(()=>{i=null,s(A,x())},k)}function T(){o&&clearTimeout(o)}function A(k,..._){if(p){T();return}if(k){T(),N.call(null,k,..._);return}if(x()||l){T(),N.call(null,k,..._);return}a<64&&(a*=2);let M;d===1?(d=2,M=0):M=(a+Math.random())*1e3,I(M)}let f=!1;function L(k){f||(f=!0,T(),!p&&(i!==null?(k||(d=2),clearTimeout(i),I(0)):k||(d=1)))}return I(0),o=setTimeout(()=>{l=!0,L(!0)},r),L}function R6(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(s){return s!==void 0}function jb(s,t,r,a){if(a<t)throw bb(`Invalid value for '${s}'. Expected ${t} or greater.`);if(a>r)throw bb(`Invalid value for '${s}'. Expected ${r} or less.`)}function O6(s){const t=encodeURIComponent;let r="?";for(const a in s)if(s.hasOwnProperty(a)){const i=t(a)+"="+t(s[a]);r=r+i+"&"}return r=r.slice(0,-1),r}var Kd;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Kd||(Kd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(s,t){const r=s>=500&&s<600,i=[408,429].indexOf(s)!==-1,o=t.indexOf(s)!==-1;return r||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(t,r,a,i,o,l,d,x,p,N,I,T=!0){this.url_=t,this.method_=r,this.headers_=a,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=x,this.timeout_=p,this.progressCallback_=N,this.connectionFactory_=I,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,f)=>{this.resolve_=A,this.reject_=f,this.start_()})}start_(){const t=(a,i)=>{if(i){a(!1,new Ic(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=d=>{const x=d.loaded,p=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(x,p)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const d=o.getErrorCode()===Kd.NO_ERROR,x=o.getStatus();if(!d||z6(x,this.additionalRetryCodes_)&&this.retry){const N=o.getErrorCode()===Kd.ABORT;a(!1,new Ic(!1,null,N));return}const p=this.successCodes_.indexOf(x)!==-1;a(!0,new Ic(p,o))})},r=(a,i)=>{const o=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const x=this.callback_(d,d.getResponse());M6(x)?o(x):o()}catch(x){l(x)}else if(d!==null){const x=I6();x.serverResponse=d.getErrorText(),this.errorCallback_?l(this.errorCallback_(d,x)):l(x)}else if(i.canceled){const x=this.appDelete_?i2():S6();l(x)}else{const x=E6();l(x)}};this.canceled_?r(!1,new Ic(!1,null,!0)):this.backoffId_=A6(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&R6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ic{constructor(t,r,a){this.wasSuccessCode=t,this.connection=r,this.canceled=!!a}}function V6(s,t){t!==null&&t.length>0&&(s.Authorization="Firebase "+t)}function F6(s,t){s["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function U6(s,t){t&&(s["X-Firebase-GMPID"]=t)}function B6(s,t){t!==null&&(s["X-Firebase-AppCheck"]=t)}function $6(s,t,r,a,i,o,l=!0){const d=O6(s.urlParams),x=s.url+d,p=Object.assign({},s.headers);return U6(p,t),V6(p,r),F6(p,o),B6(p,a),new L6(x,s.method,p,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(s){if(s.length===0)return null;const t=s.lastIndexOf("/");return t===-1?"":s.slice(0,t)}function W6(s){const t=s.lastIndexOf("/",s.length-2);return t===-1?s:s.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(t,r){this._service=t,r instanceof hr?this._location=r:this._location=hr.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new Yd(t,r)}get root(){const t=new hr(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return W6(this._location.path)}get storage(){return this._service}get parent(){const t=q6(this._location.path);if(t===null)return null;const r=new hr(this._location.bucket,t);return new Yd(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw T6(t)}}function vb(s,t){const r=t==null?void 0:t[w6];return r==null?null:hr.makeFromBucketSpec(r,s)}function G6(s,t,r,a={}){s.host=`${t}:${r}`,s._protocol="http";const{mockUserToken:i}=a;i&&(s._overrideAuthToken=typeof i=="string"?i:dN(i,s.app.options.projectId))}class H6{constructor(t,r,a,i,o){this.app=t,this._authProvider=r,this._appCheckProvider=a,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=n2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=k6,this._maxUploadRetryTime=C6,this._requests=new Set,i!=null?this._bucket=hr.makeFromBucketSpec(i,this._host):this._bucket=vb(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=hr.makeFromBucketSpec(this._url,t):this._bucket=vb(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){jb("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){jb("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(qs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Yd(this,t)}_makeRequest(t,r,a,i,o=!0){if(this._deleted)return new D6(i2());{const l=$6(t,this._appId,a,i,r,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(t,r){const[a,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,a,i).getPromise()}}const Nb="@firebase/storage",wb="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="storage";function Q6(s=yu(),t){s=Tt(s);const a=Ja(s,l2).getImmediate({identifier:t}),i=lN("storage");return i&&K6(a,...i),a}function K6(s,t,r,a={}){G6(s,t,r,a)}function Y6(s,{instanceIdentifier:t}){const r=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),i=s.getProvider("app-check-internal");return new H6(r,a,i,t,An)}function X6(){yr(new ir(l2,Y6,"PUBLIC").setMultipleInstances(!0)),Fs(Nb,wb,""),Fs(Nb,wb,"esm2017")}X6();const J6={apiKey:"AIzaSyDYacL_WIzZUSP-Tjl3794P_jHocMDqN9g",authDomain:"blackkstreaming-55f0e.firebaseapp.com",projectId:"blackkstreaming-55f0e",storageBucket:"blackkstreaming-55f0e.firebasestorage.app",messagingSenderId:"998157647233",appId:"1:998157647233:web:3e5b8128a0275ae4553c80",measurementId:"G-GFM50WNMSP"},$u=gN(J6);YS($u);const C=Q8($u),De=a2($u);Q6($u);const Ve="/assets/logo-e43e9960.png",Z6="/assets/brooklyn99-7c1a6c47.png",eD="/assets/stranger-things-31a579dc.png",tD="/assets/breaking-bad-482f4098.png",sD="/assets/naruto-54b60bd0.png",rD="/assets/alice-5ff5523e.png",aD="/assets/netflix-e3c8e0d2.png",nD="/assets/spotify-d09996b4.png",iD="/assets/disney-0c4f0934.png",lD="/assets/max-c00a4c65.png",oD="/assets/prime-video-72b85c51.png",cD="/assets/vix-ee8ed6dc.png",dD="/assets/Canva-e7a7d520.png",uD="/assets/ChatGPT-b8d712b1.png",xD="/assets/crunchyroll-562435fc.png",mD="/assets/redessociales-65298696.png",hD="/assets/dgo-7ac16535.png",pD="/assets/ligamax-7ac6606f.png",fD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAB4CAYAAADblO/uAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACnFJREFUeNrsnd912zYbh+Gc3FedoPQEVSYINUHUm+bS0gS2JlA8ga0JrF7qyvYElieIMkHYCapvAn+EQEb2sUgR1AsSIJ/nHKU9jkOKIH54/+AFcPby8qIAoNucIXQAhA4ACB0AEDoAIHQAQOgAgNABAKEDAEIHQOgAgNABAKEDAEIHAIQOAAgdABA6ACB0AIQOAAgdABA6AHRX6GdnZ7RiVVZJlP45Tj+D9PM5++k2/fxIPxv1NXqgkeA1UoYYoTcj8En652X6GR75TS36Rfq5TUW/peEAoYchcG29b9JPZPkvk/QzTcW+phEROkL3V+DaNb/L3PRT0GJf0qAIHaH7KfKnCm46YgeEjsjf8CkV+4YGRugIvbsiz2P2TyToEHpdPtCUYtw4ErkmSj9XNDGEadHNvLL+xK9+qq3WJqiMs8mu3zdwp/O0XRK6LRbdf6EbF1dbpwt1fNpJF5AsvBa9eZ6fyhTBuGaZtsWU7o/Q/Rb6KvmmTOGIrSi04KdexqjmmeYN3vF3YnWE7qfQZRJV2mX9y6vsc7PWPGeWtsEtEkDofgl9lQwzkUuIQVuykTdiXyU6BLlp+K5J+vznne7dxks6FLYkCN1HobuxeP6IfZX8VPblrRJ0e159lRzqlKM+lgRLCf2j4+/5pOTdWhMGrJJ2xW4WqkQt3V0nMjeOnitWb2dB6rDeDcgU+XjDR4dCcDmvrMV+n96jzSKSixbf23gXq7tBi/zU5OI86wPbTPSPlPG2ywdHItedxXWBR6SambsuyjvELb63KKtB8J1BNijdpd/3v8wLgs4IvbnpprggceOaSw/e3TiwvjbIBH+f5W4gaKHLxHh2g4qxsE1Z84EnIvscaJ9rqooQHMfo8xaeQ6/9/tTQvSaq2Xnzsli6Scqz3vty5igbhMYl7WQ8sa/RNyQYokVvL3YdZsm/vrjtxhX2KU7Xc9x6INBJN1Omq+f6b0vbERc+WNe9zUz0VRY2uHTbY9XelNrhAc5X9GzI10jPDExLYnZW5AUq9EnLz+Paql949v6G3vcwM61WtLvtFyQYmtCNtRu03vFdZeGNmznx7P2FkpC7LnlfuO+BWXRfRmdXWfiJh+8vDJGYCrkkWK+kA0hm3WOPnku78CPha156+P5CEokWetToYPU2ZzPI2stsbJJ/p54slPko1KADzzpdvKvCkiq79C8J9/q7RYF01ucCYzAsieFt39GX7HrDygNI3TLdw/UiSe0+V3Q9vWrPI4vuo2W5SRvvQagWXjoJpzvWIvtvXoAzr2ndohK3uE9okdTJ4uftP077i34Hs4pHY8Xqfc3I+gRhSl/PSYwee/ji80MUTreYsvG57kijXWcyU1BJtpHEuXK1Ig1sBs37lsqqnSIldF+zv2OBhRSSIp8W7g5jPI86K9LiQPpaUR/xcXCbZxt+EqMfGAl9Rbvwm1pro401nwuKvNwN05Vlq2QdkHhtPaxDSC4zXqv96bTbkkEkP812XNJ373bvoiP78/VB6KdsVCG1+GJpkaR57JzQy5O1Mhbdvm7+YedBFW8Hlsfuyy68gg8CLzGETpmLfVy5Y66SOyWTZEwsXfIuxulXhW3TtsU0oVTR++lM5V6fTmrJd6W5K63GMgPXk2Bsfm3ZmW07vt/VcaatL0usavsYsScH/qYzxTwSrntojTHZffTUm5nbzS1orPbzsHIxo+28qg4vVkmXXPayfQP/8ejbPhzwPCKE/tZShshYud9A4lr1kf3mHDcl/WPt2eaR/3b5lXxU4IpNx7YnvqiQj/kt84iO/Z4OT6bevS+EDjVYdOx5JoLXmnJYZH+Ens9z+lYnL/NsbG9cbMmrlZhKhxPHvIwhQpdHi2D2KxttXsJ9wPH+oeer2yG72uHevnO3otb5gc8VwwgsuiOSd0f/moowvaz0qSNiP8Vtt31+n2PLtTIFQA+NuOqm3FlXMkZIu32hHxaBmVbShQt3gbfppuH4838N3WdmMag0u87bZPlvlJ+bg/RW6MWdRce1q0TPZYe8oODUJJyvHo3Pswh3Fn1mXdLuQ4Qux7EYbZbFVaG68KcmmobC7dltjLs+LjEqi2yQ2hy5TpyFjghdKEYs75ja5VslC9XOQRCni7z52u2+r2GfFxqMoiXBPUSi1t22Y0dHf8OsREoCbM9HgWv8SbesbM2HBf1picjlhe5KkLMA21NiftguZOlW9Z0tRS77NdKWFrp9djWueF0tmnVQIpdx222EvqULi/RJKaLuCt1gI0gb1zQkq/4odB2bZBx7zPlF54WeOOnIJlO67JHb7kvYBPXzBlGXhf7DatSza4xZAC7qpqWdUn70XFbbArGNG3nnh5l0Wei2LmRc+TeNgHxfCdbWBgp9d92LQsY6U7ORUNtfWq9XMAPTF/+Fbp/5/WJ5/W+eu6ltuO3bnmfcy85004c33h/1HM3egHq3oe/KtvTaJPwOiT3fn/Bb4ZZl5r7jbFuzn8os6HJalSdZGbe2sNRxjevPlNyurNJueyIq4GqZ9wcFmusCkeanrzxkIc7m1yBgNsiIBcS1KLj3IPMq5rutxt+GGNWPi/LQdbd1IwfWu8f6O90m/Z0eKg4GzBWbfrE88g7y467us4/+/ysRC3r83rmw41efVkq7JYX+7NR931v1rsfni0rtwA4tr/lLIF+xqeklSdx7qxznW+SEbr9ryLjGPXybbkvENzg01yvbT23K7jXv2kznKz5lXs62hsCn2b9/rnVvc0T3bc3BRb9rfe7eo8smkl69ZhOnR7vspL1QZtkg4cPqtoWjjquX62qLfaH22WCzEsu9JS9yR5vM8I9q3V8nbVeJFtxEmR1mDrnKufV8VO93ol3Wes783DyzGOv1vd8bBnP953f3drzF99nLy8tpFzg7U6++bNHxNmUuqP1IaH8fF2x3I3FHzuaCljEnuL47Nvnl7z9GvsXoqkaMU+/ccTM4tD2HvEDkEAqyQi+eWyxiWHo8Ujlt7gu+rRmTARTxRzhCN9hmoeuVK5r4pq0pphnWHISJQhO6rfte/5BAUzHXdOHIkqw3NCT0xF+h27vv8Yl3nDYYr29UmBtigM+YUt1DQv/XX6EbbKadTnNZ9vOY6wZEPsJlBwdMCn4u1qdlp9f2I5ROsOli/aqJtpHIAo1Voqfcrhy8iNv0+2HJwYU11yWy3w/8jS4C+v1Ufbq16MbqNR/HGjGOBGObdTYIIXKQFvggmzt/EvCKW7Lo+7jje0Wrfi5e8WX2+76okQPQg5RO8P3T+2WgUNerzBfMHCqprXK09K9iLCmL7k7o5qGrVLDpevFzx4kO3ah/quIVS89Z467Fa9ehj0I/JXzcZl7krh+GIXTz4E9HRi822ocuCV2743MJkUsK/UMDj66X8RUJ+RaRQ8eoG4IuM3fdiUfp3qK/d6GjX3Ewa6qhexZd9+/LLEyMVPH08UbtV7IVngngjesOAP6D0AEQOgAgdABA6ACA0AEAoQMAQgcAhA4ACB0AoQMAQgcAhA4ACB0AEDoAIHQAQOgAgNABEDoAIHQAQOgAgNABAKEDAEIHAIQOAAgdAKEjdIDu838BBgAP9Pzi++BqOAAAAABJRU5ErkJggg==",gD="/assets/youtube-49ca55e1.png",yD="/assets/deezer-17be4fc1.png",bD="/assets/tidal-d3f361cb.png",jD="/assets/vpn-62bcb4e7.png",vD="/assets/wintv-4112ccf1.png",ND="/assets/applemusic-67f0cc24.png",wD="/assets/appletv-e2fd6c55.png",kD="/assets/iptv-a55016d0.png",CD="/assets/flujotv-4d1c58b0.png",ID="/assets/vikirakuten-116faf85.png",ED="/assets/pornhub-46f32d0d.png",SD="/assets/paramount-5ab87b8f.png",_D="/assets/licencias-80ba80ab.png",PD="/assets/capcut-bc65a6c0.png",TD="/assets/duolingo-4d803f89.png",DD="/assets/buscapersonas-88e00efa.png",Zs=[{src:Z6,title:"Brooklyn Nine-Nine"},{src:eD,title:"Stranger Things"},{src:tD,title:"Breaking Bad"},{src:sD,title:"Naruto"},{src:rD,title:"Alice in Borderland"}],AD=[{name:"Netflix",logo:aD,route:"/netflix"},{name:"Spotify",logo:nD,route:"/spotify"},{name:"Disney+",logo:iD,route:"/disney"},{name:"Max",logo:lD,route:"/max"},{name:"Prime Video",logo:oD,route:"/primevideo"},{name:"Vix",logo:cD,route:"/vix"},{name:"Canva",logo:dD,route:"/canva"},{name:"ChatGPT",logo:uD,route:"/chatgpt"},{name:"Crunchyroll",logo:xD,route:"/crunchyroll"},{name:"Redes Sociales",logo:mD,route:"/redessociales"},{name:"Dgo",logo:hD,route:"/dgo"},{name:"Liga Max",logo:pD,route:"/ligamax"},{name:"Movistar Play",logo:fD,route:"/movistarplay"},{name:"Youtube",logo:gD,route:"/youtube"},{name:"Deezer",logo:yD,route:"/deezer"},{name:"Tidal",logo:bD,route:"/tidal"},{name:"Vpn",logo:jD,route:"/vpn"},{name:"Win Tv",logo:vD,route:"/wintv"},{name:"Apple Music",logo:ND,route:"/applemusic"},{name:"Apple Tv",logo:wD,route:"/appletv"},{name:"Iptv",logo:kD,route:"/iptv"},{name:"Flujo Tv",logo:CD,route:"/flujotv"},{name:"Viki Rakuten",logo:ID,route:"/vikirakuten"},{name:"Pornhub",logo:ED,route:"/pornhub"},{name:"Paramount",logo:SD,route:"/paramount"},{name:"Licencias",logo:_D,route:"/licencias"},{name:"Capcut",logo:PD,route:"/capcut"},{name:"Duolingo",logo:TD,route:"/duolingo"},{name:"Busca Personas",logo:DD,route:"/buscapersonas"}],RD=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState(0),[i,o]=j.useState(null),[l,d]=j.useState(0),[x,p]=j.useState("user"),[N,I]=j.useState(""),T=ut();j.useEffect(()=>{const k=setInterval(()=>{a(_=>(_+1)%Zs.length)},5e3);return()=>clearInterval(k)},[]),j.useEffect(()=>{(async()=>{if(De.currentUser)try{const _=se(C,"users"),z=me(_,he("email","==",De.currentUser.email)),M=await ft(z);if(!M.empty){const Y=M.docs[0].data();o({name:Y.username||"Usuario",email:De.currentUser.email}),d(Y.balance||0),p(Y.role||"user")}}catch(_){console.error("Error loading user data:",_)}})()},[De.currentUser]);const A=()=>{De.signOut().then(()=>{o(null),T("/login")}).catch(k=>{console.error("Logout error:",k)})},f=()=>{x==="user"?T("/dashboard/user"):x==="affiliate"?T("/dashboard/affiliate"):x==="provider"?T("/dashboard/provider"):x==="admin"&&T("/dashboard/admin")},L=k=>{k.preventDefault(),N.trim()&&T(`/search?q=${encodeURIComponent(N)}`)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsxs("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:[e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(h0,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar películas, series...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:N,onChange:k=>I(k.target.value)}),e.jsx("button",{onClick:L,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(p0,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:i?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:["👤 ",i.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",l.toFixed(2)]}),e.jsx("button",{onClick:f,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ag,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:A,className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(Rg,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]}),s&&e.jsx("div",{className:"fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform translate-x-0 transition-transform duration-300 ease-in-out z-50 md:hidden",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"flex flex-col space-y-2 p-4",children:i?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[e.jsxs("span",{className:"font-medium",children:["👤 ",i.name]}),e.jsxs("span",{className:"font-medium",children:["S/ ",l.toFixed(2)]})]}),e.jsxs("button",{onClick:f,className:"px-3 py-2 text-left rounded-xl hover:bg-gray-700/50 transition-colors flex items-center space-x-2",children:[e.jsx(Ag,{className:"text-cyan-400"}),e.jsx("span",{children:"Dashboard"})]}),e.jsxs("button",{onClick:A,className:"px-3 py-2 text-left rounded-xl hover:bg-gray-700/50 transition-colors flex items-center space-x-2 text-red-400",children:[e.jsx(Rg,{}),e.jsx("span",{children:"Salir"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-3 py-2 text-left rounded-xl hover:bg-gray-700/50 transition-colors",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-3 py-2 text-left rounded-xl bg-cyan-500 hover:bg-cyan-600 transition-colors",children:"Registrarse"})]})})]})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),e.jsxs("main",{className:"flex-grow",children:[e.jsx("section",{className:"py-6 px-4 text-center",children:e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white",children:"Tus plataformas favoritas al instante"})}),e.jsxs("section",{className:"relative flex justify-center items-center space-x-4 mt-6 px-4 sm:px-6",children:[e.jsx("div",{className:"hidden sm:block w-40 h-56 rounded-2xl overflow-hidden shadow-lg",children:e.jsx("img",{src:Zs[(r-1+Zs.length)%Zs.length].src,alt:"Previous show",className:"w-full h-full object-cover opacity-50 transition-all duration-500 scale-95"})}),e.jsxs("div",{className:"relative rounded-2xl overflow-hidden shadow-xl border border-gray-700/50",children:[e.jsx("img",{src:Zs[r].src,alt:"Featured show",className:"w-48 h-64 sm:w-64 sm:h-80 object-cover transition-all duration-700 scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900/80 to-transparent"}),e.jsx("h2",{className:"absolute bottom-0 w-full text-center text-base sm:text-lg font-bold text-white py-3 drop-shadow-lg",children:Zs[r].title})]}),e.jsx("div",{className:"hidden sm:block w-40 h-56 rounded-2xl overflow-hidden shadow-lg",children:e.jsx("img",{src:Zs[(r+1)%Zs.length].src,alt:"Next show",className:"w-full h-full object-cover opacity-50 transition-all duration-500 scale-95"})}),e.jsx("button",{onClick:()=>a(k=>(k-1+Zs.length)%Zs.length),className:"absolute left-4 sm:left-6 text-2xl sm:text-3xl bg-gray-900/80 backdrop-blur-sm hover:bg-gray-700/80 px-3 py-2 sm:px-4 sm:py-2 rounded-full transition-all border border-gray-700/50",children:e.jsx(GC,{})}),e.jsx("button",{onClick:()=>a(k=>(k+1)%Zs.length),className:"absolute right-4 sm:right-6 text-2xl sm:text-3xl bg-gray-900/80 backdrop-blur-sm hover:bg-gray-700/80 px-3 py-2 sm:px-4 sm:py-2 rounded-full transition-all border border-gray-700/50",children:e.jsx(HC,{})})]}),e.jsx("div",{className:"flex justify-center space-x-2 mt-4",children:Zs.map((k,_)=>e.jsx("div",{className:`w-3 h-3 rounded-full ${_===r?"bg-cyan-400":"bg-gray-600"} transition-all duration-300`},_))}),e.jsxs("section",{className:"py-12 container mx-auto px-4",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:"Plataformas de Streaming"}),e.jsx("p",{className:"text-gray-300 max-w-2xl mx-auto",children:"Acceso a todas tus plataformas favoritas en un solo lugar"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-8 sm:gap-10",children:AD.map((k,_)=>e.jsxs(h,{to:k.route,className:"group relative overflow-hidden rounded-2xl bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 p-4 flex flex-col items-center shadow-xl border border-gray-700/50",children:[e.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 mb-4 flex items-center justify-center",children:e.jsx("img",{src:k.logo,alt:k.name,className:"max-h-full max-w-full object-contain group-hover:scale-105 transition-transform duration-300"})}),e.jsx("span",{className:"font-medium text-center text-gray-200",children:k.name})]},_))})]}),!i&&e.jsx("section",{className:"py-12 bg-gradient-to-r from-gray-900/80 to-blue-950/80",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-4",children:"¿Listo para adquirir?"}),e.jsx("p",{className:"text-gray-300 max-w-2xl mx-auto mb-6",children:"Únete a miles de usuarios satisfechos accediendo a todas tus plataformas favoritas en un solo lugar."}),e.jsx("button",{onClick:()=>T("/register"),className:"px-6 py-3 rounded-xl bg-cyan-500 hover:bg-cyan-600 transition-all duration-300 font-medium text-white",children:"Regístrate - Gratis por tiempo limitado"})]})})]}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},MD=()=>{const[s,t]=j.useState(""),[r,a]=j.useState(""),[i,o]=j.useState(null),[l,d]=j.useState(!1),x=ut(),p=async N=>{N.preventDefault(),o(null);try{const I=se(C,"users"),T=me(I,he("username","==",s)),A=await ft(T);if(A.empty){o("Nombre de usuario no encontrado.");return}const k=A.docs[0].data().email,z=(await iT(De,k,r)).user;x("/")}catch{o("Usuario o contraseña incorrectos.")}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsxs("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:[e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>d(!l),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(h0,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx("button",{onClick:()=>x("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>x("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})]}),l&&e.jsx("div",{className:"fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform translate-x-0 transition-transform duration-300 ease-in-out z-50 md:hidden",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"flex flex-col space-y-2 p-4",children:[e.jsx("button",{onClick:()=>x("/login"),className:"px-3 py-2 text-left rounded-xl hover:bg-gray-700/50 transition-colors",children:"Ingresar"}),e.jsx("button",{onClick:()=>x("/register"),className:"px-3 py-2 text-left rounded-xl bg-cyan-500 hover:bg-cyan-600 transition-colors",children:"Registrarse"})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>d(!1)})]}),e.jsx("main",{className:"flex-grow flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-md rounded-2xl shadow-xl p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h1",{className:"text-2xl font-bold text-white mb-6 text-center",children:["Black",e.jsx("span",{className:"text-cyan-400",children:"Streaming"})]}),e.jsx("p",{className:"text-sm text-center text-gray-400 mb-6",children:"Bienvenido de nuevo. Inicia sesión para continuar."}),i&&e.jsxs("div",{className:"mb-4 p-3 bg-red-900/80 border-l-4 border-red-500 rounded-xl flex items-center",children:[e.jsx(rt,{className:"mr-2 text-red-400"}),e.jsx("span",{className:"text-red-300",children:i})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de Usuario"}),e.jsxs("div",{className:"relative",children:[e.jsx(Me,{className:"absolute top-3 left-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Tu nombre de usuario",value:s,onChange:N=>t(N.target.value),className:"w-full pl-10 pr-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(tN,{className:"absolute top-3 left-3 text-gray-400"}),e.jsx("input",{type:"password",placeholder:"••••••••",value:r,onChange:N=>a(N.target.value),className:"w-full pl-10 pr-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",required:!0})]})]}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Iniciar Sesión"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(h,{to:"/register",className:"text-gray-400 hover:text-cyan-400 flex items-center justify-center transition-all",children:[e.jsx(eN,{className:"mr-1"})," ¿No tienes una cuenta? Regístrate"]})})]})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},OD=({isOpen:s,message:t,type:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:`bg-gray-800/90 backdrop-blur-md p-6 rounded-2xl shadow-2xl max-w-sm w-full border transform transition-all duration-300 ${r==="success"?"border-green-500 scale-100":"border-red-500 scale-100"}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[r==="success"?e.jsx(kd,{className:"text-green-400 text-2xl mr-2"}):e.jsx(rt,{className:"text-red-400 text-2xl mr-2"}),e.jsx("h3",{className:`text-lg font-bold ${r==="success"?"text-green-400":"text-red-400"}`,children:r==="success"?"Éxito":"Error"})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("button",{onClick:a,className:`w-full py-2 rounded-xl font-medium transition-all duration-300 ${r==="success"?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"}`,children:"Cerrar"})]})}):null,zD=()=>{const[s,t]=j.useState(""),[r,a]=j.useState(""),[i,o]=j.useState(""),[l,d]=j.useState("user"),[x,p]=j.useState(""),[N,I]=j.useState(!1),[T,A]=j.useState({isOpen:!1,message:"",type:"success"}),[f,L]=j.useState(!1),k=ut(),_=async z=>{z.preventDefault(),A({isOpen:!1,message:"",type:"success"}),I(!0);try{if(!s||s.length<3)throw new Error("El nombre de usuario debe tener al menos 3 caracteres.");if(!r||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))throw new Error("Por favor, ingresa un correo electrónico válido.");if(!i||i.length<6)throw new Error("La contraseña debe tener al menos 6 caracteres.");if(!["user","affiliate","provider"].includes(l))throw new Error("Rol no válido.");await _i(U(C,"pendingRegistrations",r),{username:s,email:r,password:i,role:l,status:"pending",referrerCode:x||null,createdAt:new Date().toISOString()}),A({isOpen:!0,message:"Tu solicitud de registro ha sido enviada y está pendiente de aprobación.",type:"success"}),setTimeout(()=>{k("/login")},2e3)}catch(M){console.error("Error al registrar la solicitud:",M.message),A({isOpen:!0,message:M.message||"Error al enviar la solicitud de registro. Por favor, inténtalo de nuevo.",type:"error"})}finally{I(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsxs("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:[e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>L(!f),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(h0,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx("button",{onClick:()=>k("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:textcyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>k("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})]}),f&&e.jsx("div",{className:"fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform translate-x-0 transition-transform duration-300 ease-in-out z-50 md:hidden",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>L(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"flex flex-col space-y-2 p-4",children:[e.jsx("button",{onClick:()=>k("/login"),className:"px-3 py-2 text-left rounded-xl hover:bg-gray-700/50 transition-colors",children:"Ingresar"}),e.jsx("button",{onClick:()=>k("/register"),className:"px-3 py-2 text-left rounded-xl bg-cyan-500 hover:bg-cyan-600 transition-colors",children:"Registrarse"})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>L(!1)})]}),e.jsx("main",{className:"flex-grow flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-md rounded-2xl shadow-xl p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h1",{className:"text-2xl font-bold text-white mb-6 text-center",children:["Black",e.jsx("span",{className:"text-cyan-400",children:"Streaming"})]}),e.jsx("p",{className:"text-sm text-center text-gray-400 mb-6",children:"Regístrate para acceder al sistema."}),e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de Usuario"}),e.jsxs("div",{className:"relative",children:[e.jsx(Me,{className:"absolute top-3 left-3 text-gray-400"}),e.jsx("input",{type:"text",value:s,onChange:z=>t(z.target.value),className:"w-full pl-10 pr-4 py-2 rounded-xl bg-gray-700/50 border border-gray-600/50 text-white focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Elige un nombre de usuario",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo Electrónico"}),e.jsxs("div",{className:"relative",children:[e.jsx(XC,{className:"absolute top-3 left-3 text-gray-400"}),e.jsx("input",{type:"email",value:r,onChange:z=>a(z.target.value),className:"w-full pl-10 pr-4 py-2 rounded-xl bg-gray-700/50 border border-gray-600/50 text-white focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Tu correo electrónico",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(tN,{className:"absolute top-3 left-3 text-gray-400"}),e.jsx("input",{type:"password",value:i,onChange:z=>o(z.target.value),className:"w-full pl-10 pr-4 py-2 rounded-xl bg-gray-700/50 border border-gray-600/50 text-white focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Elige una contraseña",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Rol"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:l,onChange:z=>d(z.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 border border-gray-600/50 text-white focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all appearance-none",children:[e.jsx("option",{value:"user",children:"Usuario"}),e.jsx("option",{value:"affiliate",children:"Afiliado"}),e.jsx("option",{value:"provider",children:"Proveedor"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Código de Referido (opcional)"}),e.jsx("input",{type:"text",value:x,onChange:z=>p(z.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 border border-gray-600/50 text-white focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ingresa un código de referido (si tienes)"})]}),e.jsx("button",{type:"submit",disabled:N,className:`w-full py-3 rounded-xl font-medium transition-all duration-300 ${N?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 text-white"}`,children:N?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white mr-2",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})]}),"Registrando..."]}):"Registrarse"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(h,{to:"/login",className:"text-gray-400 hover:text-cyan-400 flex items-center justify-center transition-all",children:[e.jsx(eN,{className:"mr-1"})," ¿Ya tienes una cuenta? Inicia sesión"]})})]})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})}),e.jsx(OD,{isOpen:T.isOpen,message:T.message,type:T.type,onClose:()=>A({isOpen:!1,message:"",type:"success"})})]})},LD=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState(""),[i,o]=j.useState([]),[l,d]=j.useState(""),[x,p]=j.useState(""),[N,I]=j.useState(0),[T,A]=j.useState(null),[f,L]=j.useState("inicio"),[k,_]=j.useState([]),[z,M]=j.useState(!0),[Y,G]=j.useState(null),[W,R]=j.useState({show:!1,message:"",title:""}),[c,F]=j.useState(""),V=ut(),Q=(ee,le)=>{R({show:!0,title:ee,message:le})},E=()=>{R({show:!1,message:"",title:""})},q=async ee=>{var le,je,n,b,g,O;try{M(!0),G(null);const H=parseFloat(ee.price)||0;if(N<H){G("Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const $=parseInt(ee.durationDays)||30,v=Kt.now(),K=v.toDate(),S=new Date(K.getTime()+$*24*60*60*1e3),y=S.toISOString(),m={customerId:T,customerName:((le=ee.client)==null?void 0:le.customerName)||"Cliente desconocido",customerEmail:((je=ee.client)==null?void 0:je.email)||x,phoneNumber:((n=ee.client)==null?void 0:n.phone)||"No especificado",productName:ee.productName||"Producto sin nombre",type:ee.category||"netflix",price:H,accountDetails:{email:((b=ee.account)==null?void 0:b.email)||"No especificado",password:((g=ee.account)==null?void 0:g.password)||"No especificado",profile:((O=ee.account)==null?void 0:O.profile)||"No especificado"},provider:ee.provider||"Proveedor desconocido",providerId:ee.providerId||"",providerPhone:ee.providerPhone||ee.providerWhatsapp||"51999999999",status:"completed",createdAt:v,saleDate:v,startDate:v,endDate:y,durationDays:$,renewedAt:v},D=await fn(se(C,"sales"),m),J=U(C,"users",T);await Rs(J,{balance:N-H}),I(te=>te-H),_(te=>[...te,{...m,id:D.id,saleDate:K,startDate:K,endDate:S,account:m.accountDetails,client:{customerName:m.customerName,email:m.customerEmail,phone:m.phoneNumber},orderId:`BS-${D.id.slice(0,8).toUpperCase()}`}]),console.log("Pedido renovado:",{saleDate:K.toISOString(),startDate:K.toISOString(),endDate:S.toISOString()}),Q("Éxito","¡Pedido renovado exitosamente!")}catch(H){console.error("Error al renovar el pedido:",H),G("Error al renovar el pedido: "+H.message)}finally{M(!1)}},_e=async()=>{try{await fo(De),V("/")}catch(ee){console.error("Error al cerrar sesión:",ee),G("Error al cerrar sesión")}};j.useEffect(()=>{const ee=vt(De,le=>{le?(console.log("Usuario autenticado, userId:",le.uid),A(le.uid),p(le.email||"No especificado"),M(!1)):(console.log("Usuario no autenticado, redirigiendo a /login"),V("/login"))});return()=>ee()},[V]),j.useEffect(()=>{if(!T)return;(async()=>{try{const le=U(C,"users",T);return ve(le,n=>{if(n.exists()){const b=n.data();d(b.username||"Usuario"),p(b.email||"No especificado"),I(Number(b.balance)||0)}else G("Usuario no encontrado")},n=>{console.error("Error al obtener datos del usuario:",n),G("Error al cargar datos del usuario")})}catch(le){console.error("Error al obtener datos del usuario:",le),G("Error al cargar datos del usuario")}})()},[T]),j.useEffect(()=>{if(!T){console.log("userId no está definido, no se cargarán los pedidos.");return}console.log("Cargando pedidos para userId:",T),(()=>{const le=me(se(C,"sales"),he("customerId","==",T)),je=ve(le,b=>{if(console.log("Snapshot recibido, documentos encontrados:",b.docs.length),b.empty){console.log("No se encontraron pedidos para este usuario."),_([]),M(!1);return}const g=b.docs.map(O=>{var de,we,at,pt,nt,it,zt,ss,Lt;const H=O.data();console.log("Procesando documento:",O.id,H);const $=((we=(de=H.saleDate)==null?void 0:de.toDate)==null?void 0:we.call(de))||((pt=(at=H.createdAt)==null?void 0:at.toDate)==null?void 0:pt.call(at));$||console.warn(`Documento ${O.id} no tiene saleDate ni createdAt. Usando fecha actual como respaldo.`);const v=$||new Date;let K=(it=(nt=H.startDate)==null?void 0:nt.toDate)==null?void 0:it.call(nt),S=K||v,y=!1;K||(console.log(`Documento ${O.id} no tiene startDate. Usando saleDate:`,v),y=!0);const m=H.durationDays||30;let D;H.endDate?(D=new Date(H.endDate),console.log(`Documento ${O.id} - endDate leído de Firestore:`,D)):(D=new Date(S.getTime()+m*24*60*60*1e3),console.log(`Documento ${O.id} - endDate calculado:`,D),y=!0),y&&(console.log(`Actualizando documento ${O.id} en Firestore con startDate y/o endDate`),Rs(U(C,"sales",O.id),{startDate:K||Kt.fromDate(v),endDate:D.toISOString(),durationDays:m}).catch(da=>{console.error("Error al actualizar startDate/endDate en Firestore:",da)}));const J=new Date,te=D.getTime()-S.getTime(),X=J.getTime()-S.getTime(),ie=D.getTime()-J.getTime(),Xe=Math.ceil(te/(1e3*60*60*24)),be=Math.max(0,Math.ceil(ie/(1e3*60*60*24))),re=Math.ceil(X/(1e3*60*60*24)),xe=Xe>0?re/Xe*100:100,pe={id:O.id,productName:H.productName||"Producto sin nombre",category:H.type||"netflix",price:parseFloat(H.price)||0,provider:H.provider||"No especificado",providerId:H.providerId||"",providerPhone:H.providerPhone||H.providerWhatsapp||"51999999999",providerWhatsapp:H.providerPhone||H.providerWhatsapp||"51999999999",status:H.status||"completed",saleDate:v,startDate:S,endDate:D,durationDays:m,daysRemaining:be,totalDays:Xe,timeElapsedPercentage:xe,account:{email:((zt=H.accountDetails)==null?void 0:zt.email)||"No especificado",password:((ss=H.accountDetails)==null?void 0:ss.password)||"No especificado",profile:((Lt=H.accountDetails)==null?void 0:Lt.profile)||"No especificado"},client:{customerName:H.customerName||"Cliente desconocido",email:H.customerEmail||"No especificado",phone:H.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BS-${O.id.slice(0,8).toUpperCase()}`};return console.log(`Documento ${O.id} - Fechas procesadas:`,{saleDate:v.toISOString(),startDate:S.toISOString(),endDate:D.toISOString(),daysRemaining:be,totalDays:Xe,timeElapsedPercentage:xe}),pe});console.log("Pedidos formateados:",g),_(g),M(!1)},b=>{console.error("Error al obtener pedidos:",b),G("Error al cargar pedidos: "+b.message),M(!1)}),n=setInterval(()=>{_(b=>b.map(g=>{const O=new Date,H=new Date(g.endDate).getTime()-new Date(g.startDate).getTime(),$=O.getTime()-new Date(g.startDate).getTime(),v=new Date(g.endDate).getTime()-O.getTime(),K=Math.ceil(H/(1e3*60*60*24)),S=Math.max(0,Math.ceil(v/(1e3*60*60*24))),y=Math.ceil($/(1e3*60*60*24)),m=K>0?y/K*100:100;return{...g,daysRemaining:S,totalDays:K,timeElapsedPercentage:m}}))},6e4);return()=>{je(),clearInterval(n)}})()},[T]),j.useEffect(()=>{if(!T)return;(()=>{const le=me(se(C,"pendingTopUps"),he("userId","==",T));return ve(le,n=>{const b=n.docs.map(g=>{var O,H;return{id:g.id,...g.data(),date:((H=(O=g.data().requestedAt)==null?void 0:O.toDate)==null?void 0:H.call(O))||new Date,amount:parseFloat(g.data().amount)||0}});o(b)},n=>{console.error("Error al obtener recargas:",n),G("Error al cargar recargas")})})()},[T]);const Ie=async()=>{try{if(!r||isNaN(r)){G("Ingrese un monto válido");return}const ee=parseFloat(r);if(ee<10){G("El monto mínimo de recarga es S/ 10.00");return}await fn(se(C,"pendingTopUps"),{userId:T,username:l,amount:ee,status:"pendiente",requestedAt:Gt()}),a(""),Q("Éxito","Solicitud de recarga enviada correctamente")}catch(ee){console.error("Error al solicitar recarga:",ee),G("Error al enviar solicitud de recarga")}},Ce=ee=>{if(!ee)return"No especificada";try{const le=ee instanceof Date?ee:new Date(ee);return isNaN(le.getTime())?"Fecha inválida":le.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}catch(le){return console.error("Error formatting date:",le),"Fecha inválida"}},Te=async()=>{try{if(!c){G("Por favor, ingrese una nueva contraseña");return}const ee=De.currentUser;ee&&(await H5(ee,c),F(""),Q("Éxito","Contraseña actualizada correctamente"))}catch(ee){console.error("Error al actualizar la contraseña:",ee),G("Error al actualizar la contraseña: "+ee.message)}},ce=()=>{if(z)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(Y)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(rt,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:Y}),e.jsx("button",{onClick:()=>G(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(f){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:l})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:l})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ir,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:x})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Saldo disponible"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",N.toFixed(2)]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Pedidos activos"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:k.filter(ee=>new Date(ee.endDate)>new Date&&ee.status==="completed").length})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pedidos recientes"}),k.slice(0,3).map((ee,le)=>{const je=new Date(ee.endDate)>new Date&&ee.status==="completed",n=ee.status==="pending";return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:ee.productName}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${n?"bg-yellow-900/80 text-yellow-400":je?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:n?"A pedido":je?"Activo":"Expirado"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",Ce(ee.endDate)]})]},le)}),k.length===0&&e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),k.length>3&&e.jsx("button",{onClick:()=>L("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]})]});case"recargar":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),e.jsx("input",{type:"number",value:r,onChange:ee=>a(ee.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Mínimo S/ 10.00",min:"10",step:"0.01"})]}),e.jsx("button",{onClick:Ie,disabled:!r||parseFloat(r)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${r&&parseFloat(r)>=10?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:"Solicitar recarga"})]}),e.jsxs("div",{className:"mt-6 bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50 max-w-md mx-auto",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(ws,{className:"mr-2"})," ¿Cómo realizar tu recarga?"]}),e.jsxs("p",{className:"text-gray-300 mb-2",children:["Realiza tu pago mediante ",e.jsx("span",{className:"font-semibold text-white",children:"Yape"})," al número:"]}),e.jsx("p",{className:"text-xl font-bold text-white mb-2",children:"📱 940505969"}),e.jsx("p",{className:"text-gray-300 mb-3",children:"Una vez realizado el pago, por favor contáctanos vía WhatsApp al mismo número para confirmar tu recarga."}),e.jsxs("a",{href:"https://wa.me/51940505969?text=Hola%2C%20he%20realizado%20una%20recarga%20a%20trav%C3%A9s%20de%20Yape.%20Por%20favor%2C%20confirma%20mi%20pago.",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300",children:[e.jsx(Ir,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de recargas"}),i.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:i.map((ee,le)=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",ee.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ee.status==="aprobado"?"bg-green-900/80 text-green-400":ee.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:ee.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:Ce(ee.date)})]},le))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ws,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay recargas registradas"})]})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Mis pedidos"}),k.length>0?e.jsx("div",{className:"space-y-6",children:k.map((ee,le)=>{var y,m,D,J,te,X,ie,Xe,be,re;const je=parseFloat(ee.price)||0,n=new Date(ee.endDate)>new Date&&ee.status==="completed",b=ee.status==="pending",g=ee.daysRemaining||0,O=ee.timeElapsedPercentage||0;let H="text-green-400";O>70&&O<=90?H="text-yellow-400":O>90&&(H="text-red-400");const $=b?e.jsx(f0,{className:"text-yellow-400"}):n?e.jsx(kd,{className:"text-green-400"}):e.jsx(rt,{className:"text-red-400"}),v=encodeURIComponent(`*Consulta sobre Pedido - ${ee.productName||"Sin nombre"}*

*N° Pedido:* ${ee.orderId||"No especificado"}
*Producto:* ${ee.productName||"No especificado"}
*Precio:* S/ ${je.toFixed(2)}
*Estado:* ${b?"A pedido":n?"Activo":"Expirado"}
*Fecha de Inicio:* ${Ce(ee.startDate)}
*Fecha de Vencimiento:* ${Ce(ee.endDate)}

`+(b?`Hola, he comprado un producto a pedido (${ee.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),K=encodeURIComponent(`Hola ${((y=ee.client)==null?void 0:y.customerName)||"Cliente"},

*Aquí tienes la información de tu pedido en BlackStreaming:*
*Producto:* ${ee.productName||"Sin nombre"}
*N° Pedido:* ${ee.orderId||"No especificado"}
*Precio:* S/ ${je.toFixed(2)}
*Estado:* ${b?"A pedido":n?"Activo":"Expirado"}
*Fecha de Inicio:* ${Ce(ee.startDate)}
*Fecha de Vencimiento:* ${Ce(ee.endDate)}

`+(b?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:`*Detalles de la Cuenta:*
📧 *Email:* ${((m=ee.account)==null?void 0:m.email)||"No especificado"}
🔑 *Contraseña:* ${((D=ee.account)==null?void 0:D.password)||"No especificado "}
👤 *Perfil:* ${((J=ee.account)==null?void 0:J.profile)||"No especificado"}

`)+"Si tienes alguna duda o necesitas soporte, no dudes en contactarnos. ¡Gracias por elegir BlackStreaming!"),S=ee.providerPhone?ee.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999";return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[$,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:ee.productName||"Producto sin nombre"}),ee.orderId&&e.jsxs("p",{className:"text-xs text-gray-400",children:["N° Pedido: ",ee.orderId]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",je.toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${b?"text-yellow-400":H}`,children:b?"Pendiente de activación":`${g} día${g===1?"":"s"} restante${g===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Me,{className:"mr-2"})," Detalles de la Cuenta"]}),e.jsx("div",{className:"space-y-2 text-gray-300",children:b?e.jsx("p",{className:"text-gray-400",children:'Este pedido está "A pedido". El proveedor se contactará contigo para proporcionarte los detalles.'}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white break-all",children:((te=ee.account)==null?void 0:te.email)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white break-all",children:((X=ee.account)==null?void 0:X.password)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:((ie=ee.account)==null?void 0:ie.profile)||"No especificado"})]})]})})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Fe,{className:"mr-2"})," Información del Pedido"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"block text-white",children:ee.provider||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono del Proveedor:"}),e.jsx("span",{className:"block text-white",children:ee.providerPhone||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Estado:"}),e.jsx("span",{className:`block px-2 py-1 text-xs rounded-full ${b?"bg-yellow-900/80 text-yellow-400":n?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:b?"A pedido":n?"Activo":"Expirado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Método de Pago:"}),e.jsx("span",{className:"block text-white",children:"BlackStreaming"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de inicio:"}),e.jsx("span",{className:"block text-white",children:Ce(ee.startDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de vencimiento:"}),e.jsx("span",{className:"block text-white",children:Ce(ee.endDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Días restantes:"}),e.jsx("span",{className:`block ${H}`,children:g})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Me,{className:"mr-2"})," Información del Cliente"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Nombre:"}),e.jsx("span",{className:"block text-white",children:((Xe=ee.client)==null?void 0:Xe.customerName)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono:"}),e.jsx("span",{className:"block text-white",children:((be=ee.client)==null?void 0:be.phone)||"No especificado"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("a",{href:`https://wa.me/51${S}?text=${v}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Ir,{size:18})," Contactar Proveedor"]}),e.jsxs("button",{onClick:()=>q(ee),disabled:z,className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${z?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 text-white"}`,children:[e.jsx(sN,{size:18})," Renovar Pedido"]}),((re=ee.client)==null?void 0:re.phone)&&e.jsxs("a",{href:`https://wa.me/${ee.client.phone}?text=${K}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Ir,{size:18})," Contactar Cliente por WhatsApp"]})]})]})]},le)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ct,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Realiza tu primer pedido en nuestra tienda"})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:l,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:x,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Cambiar contraseña"}),e.jsx("input",{type:"password",value:c,onChange:ee=>F(ee.target.value),placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsx("button",{onClick:Te,disabled:!c,className:`w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 ${c?"":"opacity-50 cursor-not-allowed"}`,children:"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:_e,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(ht,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(rt,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>L("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(jt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(ae,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:l.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:l}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:x})]})]}),e.jsxs("nav",{className:"flex-1 space-y-1",children:[e.jsxs("button",{onClick:()=>{L("inicio"),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${f==="inicio"?"bg-cyan-900/80 text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:[e.jsx(pu,{})," ",e.jsx("span",{children:"Inicio"})]}),e.jsxs("button",{onClick:()=>{L("recargar"),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${f==="recargar"?"bg-cyan-900/80 text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:[e.jsx(ws,{})," ",e.jsx("span",{children:"Recargar saldo"})]}),e.jsxs("button",{onClick:()=>{L("pedidos"),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${f==="pedidos"?"bg-cyan-900/80 text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:[e.jsx(ct,{})," ",e.jsx("span",{children:"Mis pedidos"})]}),e.jsxs("button",{onClick:()=>{L("configuracion"),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${f==="configuracion"?"bg-cyan-900/80 text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:[e.jsx(ro,{})," ",e.jsx("span",{children:"Configuración"})]})]}),e.jsx("div",{className:"mt-auto pt-4",children:e.jsxs("button",{onClick:_e,className:"w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx(ht,{})," ",e.jsx("span",{children:"Cerrar sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 pt-20 md:pt-6",children:ce()}),W.show&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:W.title}),e.jsx("button",{onClick:E,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(ae,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:W.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:E,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},VD=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState("inicio"),[i,o]=j.useState(""),[l,d]=j.useState(""),[x,p]=j.useState(""),[N,I]=j.useState(""),[T,A]=j.useState(""),[f,L]=j.useState(""),[k,_]=j.useState([]),[z,M]=j.useState(0),[Y,G]=j.useState(0),[W,R]=j.useState(null),[c,F]=j.useState(!0),[V,Q]=j.useState(null),[E,q]=j.useState([]),[_e,Ie]=j.useState(!1),[Ce,Te]=j.useState(""),[ce,ee]=j.useState(""),[le,je]=j.useState([]),[n,b]=j.useState([]),[g,O]=j.useState(""),[H,$]=j.useState(""),[v,K]=j.useState({show:!1,message:"",title:""}),S=ut(),y=(re,xe)=>{K({show:!0,title:re,message:xe})},m=()=>{K({show:!1,message:"",title:""})};j.useEffect(()=>{const re=vt(De,xe=>{xe?(R(xe.uid),d(xe.email||""),p(xe.email||""),F(!1)):S("/login")});return()=>re()},[S]),j.useEffect(()=>{(async()=>{if(W)try{const xe=U(C,"users",W),pe=await Le(xe);if(pe.exists()){const at=pe.data();if(o(at.username||"Usuario"),G(Number(at.balance)||0),at.orders){const pt=at.orders.map(nt=>{var it,zt,ss,Lt;return{...nt,startDate:((zt=(it=nt.startDate)==null?void 0:it.toDate)==null?void 0:zt.call(it))||new Date,endDate:((Lt=(ss=nt.endDate)==null?void 0:ss.toDate)==null?void 0:Lt.call(ss))||new Date(Date.now()+2592e6)}});b(pt)}}const de=U(C,"affiliates",W),we=await Le(de);if(we.exists()){const at=we.data();L(at.affiliateCode||""),M(Number(at.earnings)||0)}else{const at=`AFF-${Math.random().toString(36).substring(2,8).toUpperCase()}`;await _i(de,{username:i||"Nuevo Afiliado",email:l,affiliateCode:at,earnings:0,createdAt:Gt(),updatedAt:Gt()}),L(at)}}catch(xe){console.error("Error al manejar datos:",xe),Q("Error al cargar datos")}finally{F(!1)}})()},[W,l,i]),j.useEffect(()=>{if(!W)return;const re=se(C,"pendingTopUps"),xe=me(re,he("userId","==",W)),pe=ve(xe,async de=>{const we=de.docs.map(at=>{var pt;return{id:at.id,...at.data(),date:((pt=at.data().requestedAt)==null?void 0:pt.toDate())||new Date}});je(we);for(const at of we)if(at.status==="aprobado"&&!at.processed)try{const pt=U(C,"users",W),nt=await Le(pt);if(nt.exists()){const zt=(Number(nt.data().balance)||0)+Number(at.amount||0);await Rs(pt,{balance:zt,updatedAt:Gt()}),G(zt),await Rs(U(C,"pendingTopUps",at.id),{processed:!0,updatedAt:Gt()})}}catch(pt){console.error("Error al actualizar saldo:",pt),Q("Error al actualizar saldo tras aprobación de recarga")}},de=>{console.error("Error al escuchar recargas:",de),Q("Error al cargar recargas")});return()=>pe()},[W]),j.useEffect(()=>{if(!f)return;const re=me(se(C,"users"),he("referrerCode","==",f),dh("createdAt","desc"),kt(5)),xe=ve(re,pe=>{const de=pe.docs.map(we=>{var at;return{id:we.id,...we.data(),joinDate:((at=we.data().createdAt)==null?void 0:at.toDate())||new Date}});q(de)});return()=>xe()},[f]),j.useEffect(()=>{if(!f)return;const re=me(se(C,"users"),he("referrerCode","==",f)),xe=ve(re,pe=>{const de=pe.docs.map(we=>{var at;return{id:we.id,...we.data(),joinDate:((at=we.data().createdAt)==null?void 0:at.toDate())||new Date}});_(de)});return()=>xe()},[f]);const D=async()=>{try{if(!ce||isNaN(ce)){Q("Ingrese un monto válido");return}const re=parseFloat(ce);if(re<10){Q("El monto mínimo de recarga es S/ 10.00");return}await fn(se(C,"pendingTopUps"),{userId:W,username:i,amount:re,status:"pendiente",requestedAt:Gt(),processed:!1}),ee(""),y("Éxito","Solicitud de recarga enviada correctamente")}catch(re){console.error("Error al solicitar recarga:",re),Q("Error al enviar solicitud de recarga")}},J=async re=>{var xe,pe,de,we,at,pt;try{F(!0),Q(null);const nt=parseFloat(re.price)||0;if(Y<nt){Q("Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const it={customerId:W,customerName:((xe=re.client)==null?void 0:xe.name)||"Cliente desconocido",customerEmail:((pe=re.client)==null?void 0:pe.email)||l,phoneNumber:((de=re.client)==null?void 0:de.phone)||"No especificado",productName:re.productName||"Producto sin nombre",type:re.category||"netflix",price:nt,accountDetails:{email:((we=re.account)==null?void 0:we.email)||"No especificado",password:((at=re.account)==null?void 0:at.password)||"No especificado",profile:((pt=re.account)==null?void 0:pt.profile)||"No especificado"},provider:re.provider||"Proveedor desconocido",providerId:re.providerId||"",providerPhone:re.providerPhone||re.providerWhatsapp||"51999999999",status:"completed",createdAt:Gt(),saleDate:Gt(),startDate:Gt(),endDate:new Date(Date.now()+30*24*60*60*1e3).toISOString(),renewedAt:Gt()},zt=await fn(se(C,"sales"),it),ss=U(C,"users",W);await Rs(ss,{balance:Y-nt}),G(Lt=>Lt-nt),b(Lt=>[...Lt,{...it,id:zt.id,saleDate:new Date,startDate:new Date,endDate:new Date(Date.now()+30*24*60*60*1e3),account:it.accountDetails,client:{name:it.customerName,email:it.customerEmail,phone:it.phoneNumber},orderId:`BS-${zt.id.slice(0,8).toUpperCase()}`}]),y("Éxito","¡Pedido renovado exitosamente!")}catch(nt){console.error("Error al renovar el pedido:",nt),Q("Error al renovar el pedido: "+nt.message)}finally{F(!1)}},te=()=>{f&&(navigator.clipboard.writeText(f),Ie(!0),setTimeout(()=>Ie(!1),2e3))},X=re=>{if(!re)return"No especificada";try{const xe=re instanceof Date?re:new Date(re);return isNaN(xe.getTime())?"Fecha inválida":xe.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(xe){return console.error("Error formatting date:",xe),"Fecha inválida"}},ie=async()=>{try{await fo(De),S("/")}catch(re){console.error("Error al cerrar sesión:",re),Q("Error al cerrar sesión")}},Xe=async re=>{re.preventDefault(),O(""),$("");try{if(N&&N!==T){O("Las contraseñas no coinciden");return}const xe=U(C,"users",W),pe={username:i};x!==l&&(pe.email=x),await _i(xe,pe,{merge:!0}),$(N?"Cambio de contraseña no disponible en esta versión":"Configuración actualizada correctamente"),d(x),I(""),A(""),y("Éxito",H)}catch(xe){console.error("Error al actualizar configuración:",xe),O("Error al actualizar la configuración")}},be=()=>{if(c)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(V)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(rt,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:V}),e.jsx("button",{onClick:()=>Q(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(r){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:i})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ir,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:l})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Saldo disponible"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",Y.toFixed(2)]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",z.toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Tu código de afiliado"}),e.jsxs("button",{onClick:te,disabled:!f,className:`flex items-center gap-2 px-3 py-1 rounded-xl transition-all duration-300 ${f?"bg-cyan-900/80 text-cyan-400 hover:bg-cyan-800/80":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(KC,{size:16}),_e?"¡Copiado!":"Copiar"]})]}),e.jsx("div",{className:"bg-gray-800/50 p-4 rounded-xl mb-6 border border-gray-600/50",children:e.jsx("p",{className:"text-2xl font-bold text-center tracking-wider text-white",children:f||"Generando código..."})}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Comparte este código con tus amigos para que se registren y ganes comisiones por sus compras."}),e.jsxs("div",{className:"bg-cyan-900/30 p-4 rounded-xl border border-cyan-800/50",children:[e.jsx("h4",{className:"font-medium text-cyan-400 mb-2",children:"Enlace de afiliado:"}),e.jsx("p",{className:"text-sm bg-gray-800/50 p-2 rounded-xl border border-gray-600/50 overflow-x-auto text-gray-300",children:f?`https://blackkstreaming.com/registro?ref=${f}`:"Generando enlace..."})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recargar saldo"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),e.jsx("input",{type:"number",value:ce,onChange:re=>ee(re.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Mínimo S/ 10.00",min:"10",step:"0.01"})]}),e.jsx("button",{onClick:D,disabled:!ce||parseFloat(ce)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${ce&&parseFloat(ce)>=10?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:"Solicitar recarga"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Pedidos recientes"}),n.slice(0,3).map((re,xe)=>{const pe=new Date(re.endDate)>new Date&&re.status==="completed",de=re.status==="pending";return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:re.productName}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${de?"bg-yellow-900/80 text-yellow-400":pe?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:de?"A pedido":pe?"Activo":"Expirado"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",X(re.endDate)]})]},xe)}),n.length===0&&e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),n.length>3&&e.jsx("button",{onClick:()=>a("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]})]})]});case"recargas":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),e.jsx("input",{type:"number",value:ce,onChange:re=>ee(re.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Mínimo S/ 10.00",min:"10",step:"0.01"})]}),e.jsx("button",{onClick:D,disabled:!ce||parseFloat(ce)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${ce&&parseFloat(ce)>=10?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:"Solicitar recarga"}),e.jsxs("div",{className:"mt-6 bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(ws,{className:"mr-2"})," ¿Cómo realizar tu recarga?"]}),e.jsxs("p",{className:"text-gray-300 mb-2",children:["Realiza tu pago mediante ",e.jsx("span",{className:"font-semibold text-white",children:"Yape"})," al número:"]}),e.jsx("p",{className:"text-xl font-bold text-white mb-2",children:"📱 940505969"}),e.jsx("p",{className:"text-gray-300 mb-3",children:"Una vez realizado el pago, por favor contáctanos vía WhatsApp al mismo número para confirmar tu recarga."}),e.jsxs("a",{href:"https://wa.me/51940505969?text=Hola%2C%20he%20realizado%20una%20recarga%20a%20trav%C3%A9s%20de%20Yape.%20Por%20favor%2C%20confirma%20mi%20pago.",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300",children:[e.jsx(Ir,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de recargas"}),le.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acción"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:le.map((re,xe)=>{var de,we;const pe=encodeURIComponent(`Hola, he pedido una recarga de S/ ${((de=re.amount)==null?void 0:de.toFixed(2))||"0.00"} con el nombre ${i}. Adjunto la captura de mi pago, por favor.`);return e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",((we=re.amount)==null?void 0:we.toFixed(2))||"0.00"]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${re.status==="aprobado"?"bg-green-900/80 text-green-400":re.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:re.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:X(re.date)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:re.status==="pendiente"?e.jsxs("a",{href:`https://wa.me/51940505969?text=${pe}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 text-sm",children:[e.jsx(Ir,{className:"mr-2"})," Enviar captura"]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"—"})})]},xe)})})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ws,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay recargas registradas"})]})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Mis pedidos"}),n.length>0?e.jsx("div",{className:"space-y-6",children:n.map((re,xe)=>{var it,zt,ss,Lt,da,vr,ne,Ne,Re,et,Mt;const pe=parseFloat(re.price)||0,de=new Date(re.endDate)>new Date&&re.status==="completed",we=re.status==="pending",at=we?e.jsx(f0,{className:"text-yellow-400"}):de?e.jsx(kd,{className:"text-green-400"}):e.jsx(rt,{className:"text-red-400"}),pt=encodeURIComponent(`*Consulta sobre Pedido - ${re.productName||"Sin nombre"}*

*N° Pedido:* ${re.orderId||"No especificado"}
*Producto:* ${re.productName||"No especificado"}
*Precio:* S/ ${pe.toFixed(2)}
*Estado:* ${we?"A pedido":de?"Activo":"Expirado"}
*Fecha de Inicio:* ${X(re.startDate)}
*Fecha de Vencimiento:* ${X(re.endDate)}

`+(we?`Hola, he comprado un producto a pedido (${re.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),nt=encodeURIComponent(`Hola ${((it=re.client)==null?void 0:it.name)||"Cliente"},

*Aquí tienes la información de tu pedido en BlackStreaming:*
*Producto:* ${re.productName||"Sin nombre"}
*N° Pedido:* ${re.orderId||"No especificado"}
*Precio:* S/ ${pe.toFixed(2)}
*Estado:* ${we?"A pedido":de?"Activo":"Expirado"}
*Fecha de Inicio:* ${X(re.startDate)}
*Fecha de Vencimiento:* ${X(re.endDate)}

`+(we?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:`*Detalles de la Cuenta:*
📧 *Email:* ${((zt=re.account)==null?void 0:zt.email)||"No especificado"}
🔑 *Contraseña:* ${((ss=re.account)==null?void 0:ss.password)||"No especificado"}
👤 *Perfil:* ${((Lt=re.account)==null?void 0:Lt.profile)||"No especificado"}

`)+"Si tienes alguna duda o necesitas soporte, no dudes en contactarnos. ¡Gracias por elegir BlackStreaming!");return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[at,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:re.productName||"Producto sin nombre"}),re.orderId&&e.jsxs("p",{className:"text-xs text-gray-400",children:["N° Pedido: ",re.orderId]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",pe.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-400",children:[X(re.startDate)," - ",X(re.endDate)]})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Me,{className:"mr-2"})," Detalles de la Cuenta"]}),e.jsx("div",{className:"space-y-2 text-gray-300",children:we?e.jsx("p",{className:"text-gray-400",children:'Este pedido está "A pedido". El proveedor se contactará contigo para proporcionarte los detalles.'}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white break-all",children:((da=re.account)==null?void 0:da.email)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white break-all",children:((vr=re.account)==null?void 0:vr.password)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:((ne=re.account)==null?void 0:ne.profile)||"No especificado"})]})]})})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Fe,{className:"mr-2"})," Información del Pedido"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"block text-white",children:re.provider||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono del Proveedor:"}),e.jsx("span",{className:"block text-white",children:re.providerPhone||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Estado:"}),e.jsx("span",{className:`block px-2 py-1 text-xs rounded-full ${we?"bg-yellow-900/80 text-yellow-400":de?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:we?"A pedido":de?"Activo":"Expirado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Método de Pago:"}),e.jsx("span",{className:"block text-white",children:re.paymentMethod||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de inicio:"}),e.jsx("span",{className:"block text-white",children:X(re.startDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de vencimiento:"}),e.jsx("span",{className:"block text-white",children:X(re.endDate)})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Me,{className:"mr-2"})," Información del Cliente"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Nombre:"}),e.jsx("span",{className:"block text-white",children:((Ne=re.client)==null?void 0:Ne.name)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono:"}),e.jsx("span",{className:"block text-white",children:((Re=re.client)==null?void 0:Re.phone)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white",children:((et=re.client)==null?void 0:et.email)||"No especificado"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("a",{href:`https://wa.me/${re.providerPhone||re.providerWhatsapp||"51999999999"}?text=${pt}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Ir,{size:18})," Contactar Proveedor"]}),e.jsxs("button",{onClick:()=>J(re),disabled:c,className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${c?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 text-white"}`,children:[e.jsx(sN,{size:18})," Renovar Pedido"]}),((Mt=re.client)==null?void 0:Mt.phone)&&e.jsxs("a",{href:`https://wa.me/${re.client.phone}?text=${nt}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Ir,{size:18})," Contactar Cliente por WhatsApp"]})]})]})]},xe)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ct,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Realiza tu primer pedido en nuestra tienda"})]})]});case"referidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Todos tus referidos (",k.length,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar referidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:Ce,onChange:re=>Te(re.target.value)}),e.jsx(p0,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),k.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha de registro"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:k.filter(re=>{const xe=re.username||"",pe=re.email||"";return xe.toLowerCase().includes(Ce.toLowerCase())||pe.toLowerCase().includes(Ce.toLowerCase())}).map((re,xe)=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:re.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:re.email||"Sin email"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:re.joinDate?X(re.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/80 text-green-400",children:re.status||"Activo"})})]},xe))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Tl,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes referidos aún"}),e.jsx("p",{className:"text-gray-400",children:"Comparte tu código de afiliado para empezar a ganar comisiones"})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Reporte de ganancias"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias hoy"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde ayer"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias esta semana"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde la semana pasada"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",z.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[k.length," referidos"]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx(Um,{className:"mr-2 text-cyan-400"})," Historial de comisiones"]}),k.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-800/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Referido"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Origen"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-700/50 divide-y divide-gray-600/50",children:k.map((re,xe)=>e.jsxs("tr",{className:"hover:bg-gray-600/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:re.username||"Usuario sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:re.joinDate?X(re.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:"S/ 0.00"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:"Registro"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-900/80 text-yellow-400",children:"Pendiente"})})]},xe))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ws,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay comisiones registradas"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gana comisiones cuando tus referidos realicen compras"})]})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:Xe,children:[g&&e.jsxs("div",{className:"bg-red-900/80 text-red-300 p-3 rounded-xl mb-4 flex items-center",children:[e.jsx(rt,{className:"mr-2"})," ",g]}),H&&e.jsxs("div",{className:"bg-green-900/80 text-green-300 p-3 rounded-xl mb-4 flex items-center",children:[e.jsx(kd,{className:"mr-2"})," ",H]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:re=>o(re.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:x,onChange:re=>p(re.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña"}),e.jsx("input",{type:"password",value:N,onChange:re=>I(re.target.value),placeholder:"Dejar en blanco para no cambiar",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",disabled:!0}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Cambio de contraseña no disponible en esta versión."})]}),N&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Confirmar nueva contraseña"}),e.jsx("input",{type:"password",value:T,onChange:re=>A(re.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",disabled:!0})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium transition-all duration-300",children:"Guardar cambios"})})]})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:ie,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(ht,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(rt,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(jt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(ae,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:i}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:l})]})]}),e.jsxs("nav",{className:"flex-1 space-y-1",children:[e.jsxs("button",{onClick:()=>{a("inicio"),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r==="inicio"?"bg-cyan-900/80 text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:[e.jsx(pu,{})," ",e.jsx("span",{children:"Inicio"})]}),e.jsxs("button",{onClick:()=>{a("recargas"),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r==="recargas"?"bg-cyan-900/80 text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:[e.jsx(ws,{})," ",e.jsx("span",{children:"Recargas"})]}),e.jsxs("button",{onClick:()=>{a("pedidos"),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r==="pedidos"?"bg-cyan-900/80 text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:[e.jsx(ct,{})," ",e.jsx("span",{children:"Mis pedidos"})]}),e.jsxs("button",{onClick:()=>{a("referidos"),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r==="referidos"?"bg-cyan-900/80 text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:[e.jsx(Tl,{})," ",e.jsx("span",{children:"Referidos"})]}),e.jsxs("button",{onClick:()=>{a("ganancias"),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r==="ganancias"?"bg-cyan-900/80 text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:[e.jsx(Um,{})," ",e.jsx("span",{children:"Ganancias"})]}),e.jsxs("button",{onClick:()=>{a("configuracion"),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r==="configuracion"?"bg-cyan-900/80 text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:[e.jsx(ro,{})," ",e.jsx("span",{children:"Configuración"})]})]}),e.jsx("div",{className:"mt-auto pt-4",children:e.jsxs("button",{onClick:ie,className:"w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx(ht,{})," ",e.jsx("span",{children:"Cerrar sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 pt-20 md:pt-6",children:be()}),v.show&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:v.title}),e.jsx("button",{onClick:m,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(ae,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:v.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:m,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},FD=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState("inicio"),[i,o]=j.useState("Usuario"),[l,d]=j.useState(""),[x,p]=j.useState(""),[N,I]=j.useState([]),[T,A]=j.useState([]),[f,L]=j.useState(!0),[k,_]=j.useState(""),[z,M]=j.useState({image:"",category:"Netflix",name:"",price:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:Array(1).fill({email:"",password:"",profile:""})}),[Y,G]=j.useState(null),[W,R]=j.useState(!1),[c,F]=j.useState(""),[V,Q]=j.useState({open:!1,message:""}),[E,q]=j.useState({email:"",password:"",preferences:""}),[_e,Ie]=j.useState([]),[Ce,Te]=j.useState(""),[ce,ee]=j.useState("Yape"),[le,je]=j.useState(""),[n,b]=j.useState(!1),[g,O]=j.useState([]),[H,$]=j.useState(!0),v=ut(),K=a2(),S=ne=>{var Ne;if(!ne)return"No especificada";try{const Re=ne instanceof Date?ne:((Ne=ne==null?void 0:ne.toDate)==null?void 0:Ne.call(ne))||new Date(ne);return isNaN(Re.getTime())?"Fecha inválida":Re.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(Re){return console.error("Error formatting date:",Re),"Fecha inválida"}},y=ne=>({netflix:"Netflix",spotify:"Spotify",disney:"Disney",max:"Max",primevideo:"Prime Video",vix:"Vix",crunchyroll:"Crunchyroll",canva:"Canva",chatgpt:"ChatGPT",redessociales:"Redes Sociales",dgo:"Dgo",ligamax:"Liga Max",movistarplay:"Movistar Play",youtube:"Youtube",deezer:"Deezer",tidal:"Tidal",vpn:"Vpn",wintv:"WinTv",applemusic:"Apple Music",appletv:"Apple TV",iptv:"Iptv",flujotv:"Flujo Tv",vikirakuten:"Viki Rakuten",pornhub:"Pornhub",paramount:"Paramount",licencias:"Licencias",capcut:"Capcut",duolingo:"Duolingo",buscapersonas:"BuscaPersonas"})[ne==null?void 0:ne.toLowerCase()]||"Otro";j.useEffect(()=>{const ne=vt(K,Ne=>{Ne?(d(Ne.email||""),p(Ne.uid),m(Ne.uid)):v("/login")});return()=>ne()},[K,v]);const m=async ne=>{try{const Ne=U(C,"users",ne),Re=await Le(Ne);if(Re.exists()){const et=Re.data();o(et.username||"Usuario"),q({email:et.email||"",password:"",preferences:et.preferences||""})}L(!1)}catch(Ne){_("Error al cargar datos del usuario"),console.error("Error fetching user data:",Ne),L(!1)}};j.useEffect(()=>{l&&(async Ne=>{try{const Re=await Le(U(C,"admins",Ne));b(Re.exists())}catch(Re){console.error("Error checking admin status:",Re)}})(l)},[l]),j.useEffect(()=>{if(!i)return;const ne=me(se(C,"products"),he("provider","==",i)),Ne=ve(ne,Re=>{const et=Re.docs.map(Mt=>({id:Mt.id,...Mt.data()}));A(et)},Re=>{console.error("Error fetching products:",Re),_("Error al cargar productos")});return()=>Ne()},[i]),j.useEffect(()=>{if(!x)return;const ne=me(se(C,"sales"),he("providerId","==",x)),Ne=ve(ne,Re=>{const et=Re.docs.map(Mt=>{const wt=Mt.data();return{id:Mt.id,productName:wt.productName||"Producto sin nombre",category:wt.type||"netflix",buyer:wt.customerName||wt.customerNAME||"Comprador desconocido",buyerEmail:wt.customerEmail||"Sin email",buyerPhone:wt.phoneNumber||"Sin teléfono",date:wt.saleDate?wt.saleDate:wt.createdAt||new Date,amount:parseFloat(wt.price)||0,status:wt.status||"completed",accountDetails:wt.accountDetails||{email:"No disponible",password:"No disponible",profile:"N/A"}}});I(et),$(!1)},Re=>{console.error("Error fetching sales:",Re),_("Error al cargar ventas"),$(!1)});return()=>Ne()},[x]),j.useEffect(()=>{if(!i)return;const ne=me(se(C,"withdrawals"),he("provider","==",i),dh("createdAt","desc")),Ne=ve(ne,Re=>{const et=Re.docs.map(Mt=>{const wt=Mt.data();return{id:Mt.id,...wt,amount:parseFloat(wt.amount)||0,createdAt:wt.createdAt||new Date,processedAt:wt.processedAt||null}});Ie(et),$(!1)},Re=>{});return()=>Ne()},[i]),j.useEffect(()=>{if(!n)return;const ne=me(se(C,"withdrawals"),he("status","==","pending"),dh("createdAt","desc")),Ne=ve(ne,Re=>{const et=Re.docs.map(Mt=>{const wt=Mt.data();return{id:Mt.id,...wt,amount:parseFloat(wt.amount)||0,createdAt:wt.createdAt||new Date}});O(et)},Re=>{console.error("Error fetching pending withdrawals:",Re),_("Error al cargar solicitudes de retiro pendientes")});return()=>Ne()},[n]);const D=()=>{fo(K).then(()=>v("/login")).catch(ne=>{_("Error al cerrar sesión"),console.error("Logout error:",ne)})},J=ne=>{const{name:Ne,value:Re}=ne.target;M(et=>({...et,[Ne]:Re}))},te=ne=>{const{name:Ne,value:Re}=ne.target;q(et=>({...et,[Ne]:Re}))},X=(ne,Ne=!1)=>{const Re=ne.target.files[0];if(Re){if(Re.size>10485760){Ne?F("La imagen no debe exceder los 10MB"):_("La imagen no debe exceder los 10MB");return}const Mt=new FileReader;Mt.onloadend=()=>{Ne?G(wt=>({...wt,image:Mt.result})):M(wt=>({...wt,image:Mt.result}))},Mt.readAsDataURL(Re)}},ie=ne=>{const Ne=parseInt(ne.target.value)||1,Re=z.accounts||[];if(Ne>Re.length){const et=[...Re];for(;et.length<Ne;)et.push({email:"",password:"",profile:""});M({...z,stock:Ne,accounts:et})}else if(Ne<Re.length){const et=Re.slice(0,Math.max(Ne,1));M({...z,stock:Ne,accounts:et})}else M({...z,stock:Ne})},Xe=ne=>{const Ne=parseInt(ne.target.value)||1;let et=[...Y.accounts||[]];if(Ne>et.length)for(;et.length<Ne;)et.push({email:"",password:"",profile:""});else Ne<et.length&&(et=et.slice(0,Math.max(Ne,1)));G({...Y,stock:Ne,accounts:et})},be=(ne,Ne,Re)=>{const et=[...z.accounts];et[ne]={...et[ne],[Ne]:Re},M({...z,accounts:et})},re=(ne,Ne,Re)=>{G(et=>({...et,accounts:et.accounts.map((Mt,wt)=>wt===ne?{...Mt,[Ne]:Re}:Mt)}))},xe=async()=>{if(_(""),z.status==="En stock"&&z.accounts.some(Ne=>!Ne.email||!Ne.password)){_("Por favor complete todos los campos de las cuentas");return}try{const ne={...z,provider:i,providerId:x,providerPhone:z.status==="En stock"?z.providerPhone||"":z.providerPhone||"No especificado",createdAt:Gt(),availableAccounts:z.status==="En stock"?z.accounts.length:0},Ne=await fn(se(C,"products"),ne);if(z.status==="En stock"){const Re=se(C,`products/${Ne.id}/accounts`);for(const et of z.accounts)await fn(Re,{email:et.email,password:et.password,profile:et.profile||"",status:"available"})}M({image:"",category:"Netflix",name:"",price:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:[{email:"",password:"",profile:""}]}),a("inventario"),Q({open:!0,message:"Producto subido exitosamente!"})}catch(ne){console.error("Error al subir el producto:",ne),_(`Error al subir el producto: ${ne.message}`)}},pe=ne=>{F(""),G({...ne,accounts:ne.status==="En stock"?ne.accounts||Array(Math.max(ne.stock||1,1)).fill({email:"",password:"",profile:""}):[],providerId:ne.providerId||x}),R(!0)},de=async()=>{var ne;if(F(""),Y.status==="En stock"&&Y.accounts.some(Re=>!Re.email||!Re.password)){F("Por favor complete todos los campos de las cuentas");return}try{const Ne=U(C,"products",Y.id);await _i(Ne,{...Y,providerId:Y.providerId||x,availableAccounts:Y.status==="En stock"&&((ne=Y.accounts)==null?void 0:ne.length)||0},{merge:!0}),R(!1),Q({open:!0,message:"Producto actualizado exitosamente!"})}catch(Ne){console.error("Error al actualizar el producto:",Ne),F("Error al actualizar el producto")}},we=async ne=>{try{await aP(U(C,"products",ne)),Q({open:!0,message:"Producto eliminado exitosamente!"})}catch(Ne){console.error("Error al eliminar el producto:",Ne),_("Error al eliminar el producto")}},at=async()=>{try{const ne=K.currentUser;if(ne){const Ne=U(C,"users",ne.uid);await _i(Ne,{username:i,email:E.email,preferences:E.preferences,...E.password&&{password:E.password}},{merge:!0}),Q({open:!0,message:"Configuración actualizada correctamente!"})}}catch(ne){console.error("Error al actualizar la configuración:",ne),_("Error al actualizar la configuración")}},pt=async()=>{if(!Ce||parseFloat(Ce)<=0){_("Ingrese un monto válido");return}const ne=ss();if(parseFloat(Ce)>ne){_("No tienes suficientes fondos disponibles");return}if(!le){_("Ingrese los datos de su cuenta");return}try{await fn(se(C,"withdrawals"),{provider:i,providerEmail:l,amount:parseFloat(Ce),method:ce,account:le,status:"pending",createdAt:Gt()}),Te(""),je(""),Q({open:!0,message:"Solicitud de retiro enviada correctamente"})}catch(Ne){console.error("Error al solicitar retiro:",Ne),_("Error al solicitar retiro")}},nt=async(ne,Ne)=>{try{const Re=U(C,"withdrawals",ne);await Rs(Re,{status:Ne,processedAt:Gt(),processedBy:l}),Q({open:!0,message:Ne==="approved"?"Retiro aprobado correctamente":"Retiro rechazado"})}catch(Re){console.error("Error al procesar retiro:",Re),_("Error al procesar retiro")}},it=H?0:N.reduce((ne,Ne)=>ne+(Ne.amount||0),0),zt=H?0:_e.reduce((ne,Ne)=>ne+(Ne.status==="approved"?Ne.amount:0),0),ss=()=>H?0:it-zt,Lt=ss(),da=T.reduce((ne,Ne)=>ne+(parseInt(Ne.stock)||0),0),vr=()=>{if(f)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(k)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(rt,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:k}),e.jsx("button",{onClick:()=>_(""),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(r){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(bc,{className:"mr-2"})," Inventario"]}),e.jsx("p",{className:"text-3xl font-bold text-white",children:T.length}),e.jsx("p",{className:"text-gray-400",children:"Productos registrados"}),e.jsxs("p",{className:"text-gray-400",children:["Stock total: ",da]}),e.jsx("button",{onClick:()=>a("inventario"),className:"text-cyan-400 hover:underline text-sm mt-2",children:"Ver inventario"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(ws,{className:"mr-2"})," Ganancias"]}),H?e.jsx("div",{className:"animate-pulse text-gray-400",children:"Cargando..."}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",it.toFixed(2)]}),e.jsxs("p",{className:"text-gray-400",children:[N.length," ventas realizadas"]}),e.jsxs("p",{className:"text-gray-400",children:["Disponible: S/ ",Lt.toFixed(2)]}),e.jsx("button",{onClick:()=>a("retiros"),className:"text-cyan-400 hover:underline text-sm mt-2",children:"Retirar fondos"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Me,{className:"mr-2"})," Mi Cuenta"]}),e.jsx("p",{className:"text-lg font-medium text-white",children:i}),e.jsx("p",{className:"text-sm text-gray-400 truncate",children:l}),e.jsx("p",{className:"text-xs mt-2 bg-cyan-900 text-cyan-400 py-1 px-2 rounded-full inline-block",children:n?"Administrador":"Proveedor"}),e.jsx("button",{onClick:()=>a("configuracion"),className:"text-cyan-400 hover:underline text-sm mt-2",children:"Editar perfil"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(ct,{className:"mr-2"})," Pedidos recientes"]}),N.length===0?e.jsx("p",{className:"text-gray-400 py-2 text-center",children:"No hay pedidos recientes."}):N.slice(0,3).map((ne,Ne)=>e.jsx("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"w-2/3",children:[e.jsx("p",{className:"font-medium text-white truncate",children:ne.productName}),e.jsxs("p",{className:"text-sm text-gray-400 truncate",children:["Comprador: ",ne.buyer]})]}),e.jsxs("div",{className:"text-right w-1/3",children:[e.jsxs("p",{className:"font-medium text-white",children:["S/ ",(ne.amount||0).toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-400",children:S(ne.date)})]})]})},Ne)),N.length>3&&e.jsx("button",{onClick:()=>a("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]})]});case"inventario":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white flex items-center",children:[e.jsx(bc,{className:"mr-2"})," Inventario"]}),e.jsxs("button",{onClick:()=>a("subirProducto"),className:"px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl flex items-center w-full md:w-auto justify-center transition-all duration-300",children:[e.jsx(Mg,{className:"mr-2"})," Nuevo Producto"]})]}),T.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Precio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:T.map(ne=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[ne.image&&e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:ne.image,alt:ne.name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate max-w-xs",children:ne.name}),e.jsx("div",{className:"text-xs text-gray-400",children:y(ne.category)})]})]})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:["S/ ",(parseFloat(ne.price)||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:ne.stock||0}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ne.status==="En stock"?"bg-green-900/80 text-green-400":"bg-yellow-900/80 text-yellow-400"}`,children:ne.status})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>pe(ne),className:"text-cyan-400 hover:text-cyan-500 mr-3",title:"Editar",children:e.jsx(YC,{})}),e.jsx("button",{onClick:()=>we(ne.id),className:"text-red-400 hover:text-red-500",title:"Eliminar",children:e.jsx(JC,{})})]})]},ne.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(bc,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes productos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Agrega tu primer producto para comenzar"}),e.jsxs("button",{onClick:()=>a("subirProducto"),className:"mt-4 px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl flex items-center mx-auto transition-all duration-300",children:[e.jsx(Mg,{className:"mr-2"})," Agregar Producto"]})]})]});case"subirProducto":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-4xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(Og,{className:"mr-2"})," Subir Nuevo Producto"]}),k&&e.jsx("div",{className:"bg-red-900/80 border-l-4 border-red-500 p-4 mb-6 rounded-xl",children:e.jsxs("div",{className:"flex",children:[e.jsx(rt,{className:"h-5 w-5 text-red-400"}),e.jsx("p",{className:"ml-3 text-sm text-red-300",children:k})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Imagen del producto"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600/50 border-dashed rounded-xl bg-gray-700/50 backdrop-blur-sm",children:z.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:z.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>M({...z,image:""}),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(ae,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-gray-800/50 rounded-xl font-medium text-cyan-400 hover:text-cyan-500 focus-within:outline-none",children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:ne=>X(ne),accept:"image/*"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs("div",{className:"col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:z.name,onChange:J,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Categoría*"}),e.jsxs("select",{name:"category",value:z.category,onChange:J,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"}),"                      "]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Estado*"}),e.jsxs("select",{name:"status",value:z.status,onChange:J,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:z.price,onChange:J,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:z.stock,onChange:ie,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"1",required:!0})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:z.duration,onChange:J,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Teléfono de contacto ",z.status==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:z.providerPhone,onChange:J,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: +51 987654321",required:z.status==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:z.details,onChange:J,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:z.terms,onChange:J,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Especifica los términos y condiciones de uso"})]}),z.status==="En stock"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Cuentas asociadas*"}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:z.accounts.map((ne,Ne)=>e.jsxs("div",{className:"border border-gray-600/50 rounded-xl p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("h4",{className:"text-sm font-medium text-white mb-3",children:["Cuenta ",Ne+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:ne.email,onChange:Re=>be(Ne,"email",Re.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Contraseña*"}),e.jsx("input",{type:"text",value:ne.password,onChange:Re=>be(Ne,"password",Re.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:ne.profile,onChange:Re=>be(Ne,"profile",Re.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: Perfil 1"})]})]})]},Ne))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>a("inventario"),className:"px-4 py-2 bg-gray-700/50 text-gray-300 rounded-xl hover:bg-gray-600/50 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:xe,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Subir Producto"})]})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(ws,{className:"mr-2"})," Ganancias"]}),e.jsx("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 mb-6 border border-gray-600/50 shadow-lg",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-1",children:"Ganancias totales"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[N.length," ventas realizadas"]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Retirado: S/ ",zt.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Disponible: S/ ",Lt.toFixed(2)]})]}),e.jsxs("div",{className:"text-3xl font-bold text-white mt-2 md:mt-0",children:["S/ ",it.toFixed(2)]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Categoría"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Comprador"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contacto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:N.map((ne,Ne)=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:ne.productName}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:y(ne.category)}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-white",children:ne.buyer}),e.jsx("div",{className:"text-xs text-gray-400",children:ne.buyerEmail})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:ne.buyerPhone}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:S(ne.date)}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:["S/ ",(ne.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/80 text-green-400",children:"Completado"})})]},Ne))})]})}),N.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ws,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay ventas registradas"}),e.jsx("p",{className:"text-gray-400",children:"Tus ventas aparecerán aquí."})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(ct,{className:"mr-2"})," Pedidos"]}),N.length>0?e.jsx("div",{className:"space-y-6",children:N.map((ne,Ne)=>{const et=ne.status==="pending"?e.jsx(f0,{className:"text-yellow-400"}):e.jsx(FiCheckCircle,{className:"text-green-400"});return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[et,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:ne.productName}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Categoría: ",y(ne.category)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",(ne.amount||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-400",children:S(ne.date)})]})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Me,{className:"mr-2"})," Información del Comprador"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Nombre:"}),e.jsx("span",{className:"block text-white",children:ne.buyer})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white",children:ne.buyerEmail})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono:"}),e.jsx("span",{className:"block text-white",children:ne.buyerPhone})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Me,{className:"mr-2"})," Detalles de la Cuenta"]}),e.jsx("div",{className:"space-y-2 text-gray-300",children:ne.accountDetails?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white break-all",children:ne.accountDetails.email})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white break-all",children:ne.accountDetails.password})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:ne.accountDetails.profile||"N/A"})]})]}):e.jsx("p",{className:"text-gray-400",children:"No disponible"})})]})]})})]},Ne)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ct,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Los pedidos de tus productos aparecerán aquí."})]})]});case"retiros":return e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(cl,{className:"mr-2"})," Solicitudes de Retiro Pendientes"]}),g.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Proveedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Método"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto (S/)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:g.map(ne=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate max-w-xs",children:ne.provider}),e.jsx("div",{className:"text-xs text-gray-400 truncate max-w-xs",children:ne.providerEmail})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:ne.method}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-white",children:["S/ ",(ne.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:S(ne.createdAt)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("button",{onClick:()=>nt(ne.id,"approved"),className:"text-green-400 hover:text-green-500 flex items-center text-sm",children:[e.jsx(Pl,{className:"mr-1"})," Aprobar"]}),e.jsxs("button",{onClick:()=>nt(ne.id,"rejected"),className:"text-red-400 hover:text-red-500 flex items-center text-sm",children:[e.jsx(ae,{className:"mr-1"})," Rechazar"]})]})})]},ne.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(cl,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay solicitudes pendientes"}),e.jsx("p",{className:"text-gray-400",children:"Las solicitudes de retiro aparecerán aquí"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(cl,{className:"mr-2"})," Retirar Dinero"]}),e.jsx("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 mb-6 border border-gray-600/50 shadow-lg",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-1",children:"Saldo disponible"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Ganancias totales: S/ ",it.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Retirado: S/ ",zt.toFixed(2)]})]}),e.jsxs("div",{className:"text-3xl font-bold text-white mt-2 md:mt-0",children:["S/ ",Lt.toFixed(2)]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-4",children:"Solicitar Retiro"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a retirar (S/)*"}),e.jsx("input",{type:"number",value:Ce,onChange:ne=>Te(ne.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 150.00",step:"0.01",min:"0",max:Lt}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Máximo disponible: S/ ",Lt.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Método de pago*"}),e.jsxs("select",{value:ce,onChange:ne=>ee(ne.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Yape",children:"Yape"}),e.jsx("option",{value:"Plin",children:"Plin"}),e.jsx("option",{value:"Transferencia",children:"Transferencia Bancaria"}),e.jsx("option",{value:"Otro",children:"Otro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Datos de la cuenta*"}),e.jsx("input",{type:"text",value:le,onChange:ne=>je(ne.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:ce==="Yape"?"Número de teléfono":"Número de cuenta",required:!0})]}),e.jsx("button",{onClick:pt,disabled:!Ce||parseFloat(Ce)<=0||parseFloat(Ce)>Lt||!le,className:`w-full px-6 py-3 rounded-xl font-medium transition-all duration-300 ${Ce&&parseFloat(Ce)>0&&parseFloat(Ce)<=Lt&&le?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:"Solicitar Retiro"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-4",children:"Historial de Retiros"}),_e.length>0?e.jsx("div",{className:"space-y-4",children:_e.map((ne,Ne)=>e.jsx("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-white",children:["S/ ",(ne.amount||0).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-400",children:[ne.method," - ",ne.account]}),e.jsxs("p",{className:"text-xs text-gray-400",children:[ne.status==="pending"?"Solicitado":"Procesado",": ",S(ne.status==="pending"?ne.createdAt:ne.processedAt)]})]}),e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-4 font-semibold rounded-full ${ne.status==="approved"?"bg-green-900/80 text-green-400":ne.status==="rejected"?"bg-red-900/80 text-red-400":"bg-yellow-900/80 text-yellow-400"}`,children:ne.status==="approved"?"Aprobado":ne.status==="rejected"?"Rechazado":"Pendiente"})]})},Ne))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(cl,{className:"mx-auto text-3xl text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-400",children:"No hay retiros registrados"})]})]})]})]})});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(ro,{className:"mr-2"})," Configuración de cuenta"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario*"}),e.jsx("input",{type:"text",value:i,onChange:ne=>o(ne.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico*"}),e.jsx("input",{type:"email",name:"email",value:E.email,onChange:te,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña"}),e.jsx("input",{type:"password",name:"password",value:E.password,onChange:te,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",placeholder:"Dejar vacío para no cambiar"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Preferencias"}),e.jsx("textarea",{name:"preferences",value:E.preferences,onChange:te,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",placeholder:"Tus preferencias y configuraciones"})]}),e.jsx("button",{onClick:at,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium transition-all duration-300",children:"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:D,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(ht,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(rt,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(jt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(ae,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white truncate",children:i}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:l}),e.jsx("p",{className:"text-xs mt-2 bg-cyan-900 text-cyan-400 py-1 px-2 rounded-full inline-block",children:n?"Administrador":"Proveedor"})]})]}),e.jsxs("nav",{className:"flex-1 space-y-1",children:[e.jsxs("button",{onClick:()=>{a("inicio"),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r==="inicio"?"bg-cyan-900/80 text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:[e.jsx(pu,{})," ",e.jsx("span",{children:"Inicio"})]}),e.jsxs("button",{onClick:()=>{a("inventario"),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r==="inventario"?"bg-cyan-900/80 text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:[e.jsx(bc,{})," ",e.jsx("span",{children:"Inventario"})]}),e.jsxs("button",{onClick:()=>{a("subirProducto"),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r==="subirProducto"?"bg-cyan-900/80 text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:[e.jsx(Og,{})," ",e.jsx("span",{children:"Subir Producto"})]}),e.jsxs("button",{onClick:()=>{a("ganancias"),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r==="ganancias"?"bg-cyan-900/80 text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:[e.jsx(ws,{})," ",e.jsx("span",{children:"Ganancias"})]}),e.jsxs("button",{onClick:()=>{a("pedidos"),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r==="pedidos"?"bg-cyan-900/80 text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:[e.jsx(ct,{})," ",e.jsx("span",{children:"Pedidos"})]}),e.jsxs("button",{onClick:()=>{a("retiros"),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r==="retiros"?"bg-cyan-900/80 text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:[e.jsx(cl,{})," ",e.jsx("span",{children:"Retiros"})]}),e.jsxs("button",{onClick:()=>{a("configuracion"),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r==="configuracion"?"bg-cyan-900/80 text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:[e.jsx(ro,{})," ",e.jsx("span",{children:"Configuración"})]})]}),e.jsx("div",{className:"mt-auto pt-4",children:e.jsxs("button",{onClick:D,className:"w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx(ht,{})," ",e.jsx("span",{children:"Cerrar sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 pt-20 md:pt-6",children:vr()}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Editar Producto"}),e.jsx("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(ae,{size:24})})]}),c&&e.jsx("div",{className:"bg-red-900/80 border-l-4 border-red-500 p-4 mb-6 rounded-xl",children:e.jsxs("div",{className:"flex",children:[e.jsx(rt,{className:"h-5 w-5 text-red-400"}),e.jsx("p",{className:"ml-3 text-sm text-red-300",children:c})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Imagen del producto"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600/50 border-dashed rounded-xl bg-gray-700/50 backdrop-blur-sm",children:Y.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Y.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>G({...Y,image:""}),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(ae,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"edit-file-upload",className:"relative cursor-pointer bg-gray-800/50 rounded-xl font-medium text-cyan-400 hover:text-cyan-500 focus-within:outline-none",children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"edit-file-upload",name:"edit-file-upload",type:"file",className:"sr-only",onChange:ne=>X(ne,!0),accept:"image/*"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs("div",{className:"col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:Y.name,onChange:ne=>G({...Y,name:ne.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Categoría*"}),e.jsxs("select",{name:"category",value:Y.category,onChange:ne=>G({...Y,category:ne.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Estado*"}),e.jsxs("select",{name:"status",value:Y.status,onChange:ne=>G({...Y,status:ne.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:Y.price,onChange:ne=>G({...Y,price:ne.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:Y.stock,onChange:Xe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"1",required:!0})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:Y.duration,onChange:ne=>G({...Y,duration:ne.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Teléfono de contacto ",Y.status==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:Y.providerPhone,onChange:ne=>G({...Y,providerPhone:ne.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: +51 987654321",required:Y.status==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:Y.details,onChange:ne=>G({...Y,details:ne.target.value}),rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:Y.terms,onChange:ne=>G({...Y,terms:ne.target.value}),rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Especifica los términos y condiciones de uso"})]}),Y.status==="En stock"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Cuentas asociadas*"}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:Y.accounts.map((ne,Ne)=>e.jsxs("div",{className:"border border-gray-600/50 rounded-xl p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("h4",{className:"text-sm font-medium text-white mb-3",children:["Cuenta ",Ne+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:ne.email,onChange:Re=>re(Ne,"email",Re.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Contraseña*"}),e.jsx("input",{type:"text",value:ne.password,onChange:Re=>re(Ne,"password",Re.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:ne.profile,onChange:Re=>re(Ne,"profile",Re.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: Perfil 1"})]})]})]},Ne))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-gray-700/50 text-gray-300 rounded-xl hover:bg-gray-600/50 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:de,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Actualizar Producto"})]})]})]})})}),V.open&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl p-6 max-w-md w-full border border-gray-800/50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Pl,{className:"mx-auto text-4xl text-green-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"¡Éxito!"}),e.jsx("p",{className:"text-gray-300 mb-4",children:V.message}),e.jsx("button",{onClick:()=>Q({open:!1,message:""}),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]})})})]})},UD=({isOpen:s,message:t,type:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:`bg-gray-800 p-6 rounded-lg shadow-lg max-w-sm w-full border ${r==="success"?"border-green-500":"border-red-500"}`,children:[e.jsx("h3",{className:`text-lg font-bold mb-2 ${r==="success"?"text-green-400":"text-red-400"}`,children:r==="success"?"Éxito":"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:t}),e.jsx("button",{onClick:a,className:`w-full py-2 rounded-lg ${r==="success"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"} text-white transition-colors`,children:"Cerrar"})]})}):null,BD=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState("inicio"),[i,o]=j.useState(""),[l,d]=j.useState(""),[x,p]=j.useState(0),[N,I]=j.useState([]),[T,A]=j.useState([]),[f,L]=j.useState([]),[k,_]=j.useState([]),[z,M]=j.useState([]),[Y,G]=j.useState({day:0,week:0,month:0,total:0}),[W,R]=j.useState(!0),[c,F]=j.useState({}),[V,Q]=j.useState(null),[E,q]=j.useState(""),[_e,Ie]=j.useState({isOpen:!1,message:"",type:"success"}),[Ce,Te]=j.useState(!1),ce=ut();j.useEffect(()=>{const y=vt(De,m=>{!m&&!Ce?ce("/login"):m&&(d(m.email),ee(m.uid),R(!1))});return()=>y()},[ce,Ce]);const ee=async y=>{try{const m=U(C,"users",y),D=await Le(m);if(D.exists()){const J=D.data();o(J.username||J.email.split("@")[0])}else Q("Usuario no encontrado en la base de datos")}catch(m){console.error("Error al obtener el nombre de usuario:",m),Q("Error al cargar datos del usuario")}},le=y=>{const D=y*5,J=D*.25,te=D*.05;G({day:te,week:J,month:D,total:D})};j.useEffect(()=>{(async()=>{try{const X=await ft(se(C,"users")),ie=X.size,Xe=X.docs.map(pt=>({id:pt.id,...pt.data()}));p(ie),I(Xe.slice(-5)),A(Xe),le(ie);const be=me(se(C,"pendingRegistrations"),he("status","==","pending")),re=await ft(be);L(re.docs.map(pt=>({id:pt.id,...pt.data()})));const xe=me(se(C,"pendingTopUps"),he("status","==","pendiente")),pe=await ft(xe);_(pe.docs.map(pt=>({id:pt.id,...pt.data()})));const de=me(se(C,"withdrawals"),he("status","==","pending")),at=(await ft(de)).docs.map(pt=>({id:pt.id,...pt.data()}));M(at)}catch(X){console.error("Error al obtener datos:",X),Q("Error al cargar datos")}})();const m=ve(se(C,"users"),X=>{const ie=X.size,Xe=X.docs.map(be=>({id:be.id,...be.data()}));p(ie),I(Xe.slice(-5)),A(Xe),le(ie)}),D=ve(me(se(C,"pendingRegistrations"),he("status","==","pending")),X=>{L(X.docs.map(ie=>({id:ie.id,...ie.data()})))}),J=ve(me(se(C,"pendingTopUps"),he("status","==","pendiente")),X=>{_(X.docs.map(ie=>({id:ie.id,...ie.data()})))}),te=ve(me(se(C,"withdrawals"),he("status","==","pending")),X=>{const ie=X.docs.map(Xe=>({id:Xe.id,...Xe.data()}));M(ie)});return()=>{m(),D(),J(),te()}},[]);const je=async y=>{try{F(D=>({...D,[y]:!0}));const m=U(C,"withdrawals",y);await Rs(m,{status:"approved",updatedAt:Gt()}),Q(null),Ie({isOpen:!0,message:"Retiro aprobado exitosamente",type:"success"})}catch(m){console.error("Error al aprobar retiro:",m),Q(m.message||"Error al aprobar el retiro"),Ie({isOpen:!0,message:m.message||"Error al aprobar el retiro",type:"error"})}finally{F(m=>({...m,[y]:!1}))}},n=async y=>{try{F(D=>({...D,[y]:!0}));const m=U(C,"withdrawals",y);await Rs(m,{status:"denied",updatedAt:Gt()}),Q(null),Ie({isOpen:!0,message:"Retiro rechazado exitosamente",type:"success"})}catch(m){console.error("Error al rechazar retiro:",m),Q(m.message||"Error al rechazar el retiro"),Ie({isOpen:!0,message:m.message||"Error al rechazar el retiro",type:"error"})}finally{F(m=>({...m,[y]:!1}))}},b=async y=>{try{F(te=>({...te,[y]:!0}));const m=U(C,"pendingTopUps",y),D=k.find(te=>te.id===y);if(!(D!=null&&D.userId))throw new Error("Usuario no encontrado para la recarga");await Rs(m,{status:"aprobado",updatedAt:Gt()});const J=U(C,"users",D.userId);await Rs(J,{balance:Ue(D.amount||0)}),Q(null),Ie({isOpen:!0,message:"Recarga aprobada exitosamente",type:"success"})}catch(m){console.error("Error al aprobar recarga:",m),Q(m.message||"Error al aprobar la recarga"),Ie({isOpen:!0,message:m.message||"Error al aprobar la recarga",type:"error"})}finally{F(m=>({...m,[y]:!1}))}},g=async y=>{try{F(D=>({...D,[y]:!0}));const m=U(C,"pendingTopUps",y);await Rs(m,{status:"rechazado",updatedAt:Gt()}),Q(null),Ie({isOpen:!0,message:"Recarga rechazada exitosamente",type:"success"})}catch(m){console.error("Error al rechazar recarga:",m),Q(m.message||"Error al rechazar la recarga"),Ie({isOpen:!0,message:m.message||"Error al rechazar la recarga",type:"error"})}finally{F(m=>({...m,[y]:!1}))}},O=async y=>{try{F(ie=>({...ie,[y]:!0})),Te(!0);const m=U(C,"pendingRegistrations",y),D=f.find(ie=>ie.id===y);if(!D)throw new Error("Solicitud no encontrada");if((await oT(De,D.email)).length>0)throw new Error("El correo ya está registrado");const X=(await nT(De,D.email,D.password)).user;await _i(U(C,"users",X.uid),{username:D.username,email:D.email,role:D.role||"usuario",balance:0,createdAt:Gt()}),await Rs(m,{status:"approved",updatedAt:Gt()}),await fo(De),Q(null),Ie({isOpen:!0,message:"Solicitud de registro aprobada exitosamente",type:"success"})}catch(m){console.error("Error al aceptar solicitud:",m),Q(m.message||"Error al aceptar la solicitud de registro"),Ie({isOpen:!0,message:m.message||"Error al aceptar la solicitud de registro",type:"error"})}finally{F(m=>({...m,[y]:!1})),Te(!1)}},H=async y=>{try{F(D=>({...D,[y]:!0}));const m=U(C,"pendingRegistrations",y);await Rs(m,{status:"denied",updatedAt:Gt()}),Q(null),Ie({isOpen:!0,message:"Solicitud de registro rechazada exitosamente",type:"success"})}catch(m){console.error("Error al rechazar solicitud:",m),Q(m.message||"Error al rechazar la solicitud de registro"),Ie({isOpen:!0,message:m.message||"Error al rechazar la solicitud de registro",type:"error"})}finally{F(m=>({...m,[y]:!1}))}},$=async()=>{try{await fo(De),ce("/")}catch(y){console.error("Error al cerrar sesión:",y),Q(y.message||"Error al cerrar sesión"),Ie({isOpen:!0,message:y.message||"Error al cerrar sesión",type:"error"})}},v=async y=>{y.preventDefault();try{F(te=>({...te,config:!0}));const m=De.currentUser;if(!m)throw new Error("Usuario no autenticado");const D=U(C,"users",m.uid);await Rs(D,{username:i,updatedAt:Gt()});const J=y.target.password.value;if(J){if(J.length<6)throw new Error("La contraseña debe tener al menos 6 caracteres");await H5(m,J)}Q(null),Ie({isOpen:!0,message:"Cambios guardados exitosamente",type:"success"})}catch(m){console.error("Error al guardar cambios:",m),Q(m.message||"Error al guardar cambios"),Ie({isOpen:!0,message:m.message||"Error al guardar cambios",type:"error"})}finally{F(m=>({...m,config:!1}))}},K=y=>{if(!y)return"No especificada";try{const m=y.toDate?y.toDate():new Date(y);return isNaN(m.getTime())?"Fecha inválida":m.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},S=()=>{if(W)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-500"})});if(V)return e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-md text-center max-w-2xl mx-auto",children:[e.jsx(rt,{className:"mx-auto text-4xl text-red-500 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:V}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700",children:"Recargar"})]});switch(r){case"inicio":return e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-md max-w-6xl mx-auto",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:i})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ir,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:l})]})]})]}),e.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Ganancias del mes"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",Y.month.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"(5 soles por cada usuario)"})]}),e.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Usuarios registrados"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:x}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Total ganancias: S/ ",Y.total.toFixed(2)]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-4 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Últimos usuarios"}),N.length>0?N.map(y=>e.jsxs("div",{className:"border-b border-gray-600 py-3 last:border-0 hover:bg-gray-600 transition-colors rounded-lg px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:y.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-cyan-900 text-cyan-400",children:y.role||"usuario"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:y.email})]},y.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay usuarios registrados"})]}),e.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-4 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Solicitudes pendientes"}),f.length>0?f.slice(0,3).map(y=>e.jsxs("div",{className:"border-b border-gray-600 py-3 last:border-0 hover:bg-gray-600 transition-colors rounded-lg px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:y.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-900 text-purple-400",children:y.role||"usuario"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:y.email})]},y.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay solicitudes pendientes"})]}),e.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-4 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Retiros pendientes"}),z.length>0?z.slice(0,3).map(y=>e.jsxs("div",{className:"border-b border-gray-600 py-3 last:border-0 hover:bg-gray-600 transition-colors rounded-lg px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:y.provider||"Sin proveedor"}),e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-yellow-900 text-yellow-400",children:["S/ ",(y.amount||0).toFixed(2)]})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Método: ",y.method||"No especificado"]})]},y.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay retiros pendientes"})]})]})]});case"usuarios":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Solicitudes de registro"}),f.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Rol"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-600",children:f.map(y=>e.jsxs("tr",{className:"hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:y.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:y.email}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-cyan-900 text-cyan-400",children:y.role||"usuario"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>O(y.id),disabled:c[y.id],className:"p-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors disabled:bg-green-800",title:"Aceptar",children:c[y.id]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(Pl,{size:16})}),e.jsx("button",{onClick:()=>H(y.id),disabled:c[y.id],className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors disabled:bg-red-800",title:"Rechazar",children:c[y.id]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(ae,{size:16})})]})})]},y.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Tl,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay solicitudes de registro pendientes"})]})]}),e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white",children:["Todos los usuarios (",x,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar usuarios...",className:"px-4 py-2 rounded-full bg-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 transition-all text-sm",value:E,onChange:y=>q(y.target.value)}),e.jsx(p0,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),T.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Rol"}),e.jsx("th",{className:"px | 4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Saldo"})]})}),e.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-600",children:T.filter(y=>(y.username||"").toLowerCase().includes(E.toLowerCase())||(y.email||"").toLowerCase().includes(E.toLowerCase())).map(y=>e.jsxs("tr",{className:"hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:y.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:y.email}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-cyan-900 text-cyan-400",children:y.role||"usuario"})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(y.balance||0).toFixed(2)]})]},y.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Tl,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay usuarios registrados"})]})]})]});case"recargas":return e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-md max-w-6xl mx-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Recargas pendientes"}),k.length>0?e.jsx("div",{className:"space-y-4",children:k.map(y=>e.jsxs("div",{className:"border border-gray-600 rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"bg-gray-700 px-4 py-3 border-b border-gray-600 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-cyan-900 rounded-full flex items-center justify-center text-cyan-400",children:e.jsx(ws,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:y.username||"Sin nombre"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Solicitado: ",K(y.requestedAt)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-medium text-white",children:["S/ ",(y.amount||0).toFixed(2)]})})]}),e.jsx("div",{className:"p-4 bg-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>b(y.id),disabled:c[y.id],className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg flex items-center justify-center gap-2 disabled:bg-green-800 transition-colors",children:c[y.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(Pl,{size:18})," Aprobar Recarga"]})}),e.jsx("button",{onClick:()=>g(y.id),disabled:c[y.id],className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-lg flex items-center justify-center gap-2 disabled:bg-red-800 transition-colors",children:c[y.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{size:18})," Rechazar Recarga"]})})]})})]},y.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ws,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay recargas pendientes"}),e.jsx("p",{className:"text-gray-400",children:"Todas las solicitudes han sido procesadas"})]})]});case"retiros":return e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-md max-w-6xl mx-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Solicitudes de retiro"}),z.length>0?e.jsx("div",{className:"space-y-4",children:z.map(y=>e.jsxs("div",{className:"border border-gray-600 rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"bg-gray-700 px-4 py-3 border-b border-gray-600 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-900 rounded-full flex items-center justify-center text-yellow-400",children:e.jsx(ws,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:y.provider||"Sin proveedor"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Email: ",y.providerEmail||"No disponible"]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Solicitado: ",K(y.createdAt)]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Método: ",y.method||"No especificado"]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Cuenta: ",y.account||"No especificada"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-medium text-white",children:["S/ ",(y.amount||0).toFixed(2)]})})]}),e.jsx("div",{className:"p-4 bg-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>je(y.id),disabled:c[y.id],className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg flex items-center justify-center gap-2 disabled:bg-green-800 transition-colors",children:c[y.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(Pl,{size:18})," Aprobar Retiro"]})}),e.jsx("button",{onClick:()=>n(y.id),disabled:c[y.id],className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-lg flex items-center justify-center gap-2 disabled:bg-red-800 transition-colors",children:c[y.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{size:18})," Rechazar Retiro"]})})]})})]},y.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ws,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay retiros pendientes"}),e.jsx("p",{className:"text-gray-400",children:"Todas las solicitudes han sido procesadas"})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-md max-w-6xl mx-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Reporte de ganancias"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-6 text-center",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias hoy"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",Y.day.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"(5 soles por usuario)"})]}),e.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-6 text-center",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias esta semana"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",Y.week.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"(25% del total de usuarios)"})]}),e.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-6 text-center",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias este mes"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",Y.month.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"(5 soles por cada usuario)"})]})]}),e.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Resumen de ganancias"}),e.jsxs("span",{className:"px-3 py-1 bg-cyan-900 text-cyan-400 rounded-full text-sm",children:["Total: S/ ",Y.total.toFixed(2)]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600",children:[e.jsx("thead",{className:"bg-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Concepto"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Cálculo"})]})}),e.jsxs("tbody",{className:"bg-gray-700 divide-y divide-gray-600",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-300",children:"Ganancias por usuario"}),e.jsx("td",{className:"px-4 py-3 text-white",children:"S/ 5.00"}),e.jsx("td",{className:"px-4 py-3 text-gray-400",children:"Fijo por cada usuario registrado"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-300",children:"Total usuarios"}),e.jsx("td",{className:"px-4 py-3 text-white",children:x}),e.jsx("td",{className:"px-4 py-3 text-gray-400",children:"Usuarios activos en el sistema"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-300",children:"Ganancias totales"}),e.jsxs("td",{className:"px-4 py-3 text-white",children:["S/ ",Y.total.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-gray-400",children:[x," usuarios × S/ 5.00"]})]})]})]})})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-md max-w-2xl mx-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-1",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:y=>o(y.target.value),className:"w-full px-4 py-2 border border-gray-600 bg-gray-700 text-white rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-1",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:l,readOnly:!0,className:"w-full px-4 py-2 border border-gray-600 bg-gray-700 text-gray-400 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-1",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 border border-gray-600 bg-gray-700 text-white rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500"})]}),e.jsx("button",{type:"submit",disabled:c.config,className:"w-full py-3 px-4 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg font-medium mt-4 transition-colors disabled:bg-cyan-800",children:c.config?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]})]});default:return e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-md text-center max-w-2xl mx-auto",children:[e.jsx(rt,{className:"mx-auto text-4xl text-yellow-500 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-700 focus:outline-none",children:e.jsx(jt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-800 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-lg hover:bg-gray-700",children:e.jsx(ae,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-600 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:i}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:l})]})]}),e.jsxs("nav",{className:"flex-1 space-y-1",children:[e.jsxs("button",{onClick:()=>a("inicio"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${r==="inicio"?"bg-cyan-900 text-white":"text-gray-300 hover:bg-gray-700"}`,children:[e.jsx(pu,{})," ",e.jsx("span",{children:"Inicio"})]}),e.jsxs("button",{onClick:()=>a("recargas"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${r==="recargas"?"bg-cyan-900 text-white":"text-gray-300 hover:bg-gray-700"}`,children:[e.jsx(ws,{})," ",e.jsx("span",{children:"Recargas"})]}),e.jsxs("button",{onClick:()=>a("retiros"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${r==="retiros"?"bg-cyan-900 text-white":"text-gray-300 hover:bg-gray-700"}`,children:[e.jsx(QC,{})," ",e.jsx("span",{children:"Retiros"})]}),e.jsxs("button",{onClick:()=>a("usuarios"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${r==="usuarios"?"bg-cyan-900 text-white":"text-gray-300 hover:bg-gray-700"}`,children:[e.jsx(Tl,{})," ",e.jsx("span",{children:"Usuarios"})]}),e.jsxs("button",{onClick:()=>a("ganancias"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${r==="ganancias"?"bg-cyan-900 text-white":"text-gray-300 hover:bg-gray-700"}`,children:[e.jsx(Um,{})," ",e.jsx("span",{children:"Ganancias"})]}),e.jsxs("button",{onClick:()=>a("configuracion"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${r==="configuracion"?"bg-cyan-900 text-white":"text-gray-300 hover:bg-gray-700"}`,children:[e.jsx(ro,{})," ",e.jsx("span",{children:"Configuración"})]})]}),e.jsx("div",{className:"mt-auto pt-4",children:e.jsxs("button",{onClick:$,className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-700 transition-colors",children:[e.jsx(ht,{})," ",e.jsx("span",{children:"Cerrar sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 pt-20 md:pt-4",children:S()}),s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden",onClick:()=>t(!1)}),e.jsx(UD,{isOpen:_e.isOpen,message:_e.message,type:_e.type,onClose:()=>Ie({isOpen:!1,message:"",type:"success"})})]})},$D=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Netflix")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,netflix:S.length}))},v=>{A("Error al cargar productos de Netflix"),console.error(v)}),g=me(se(C,"netflix_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"netflix"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"netflix"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Netflix`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Netflix...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522869635100-9f4c5e86aa37?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Netflix"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus series y películas favoritas con nuestras cuentas premium de Netflix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},qD=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Disney")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,disney:S.length}))},v=>{A("Error al cargar productos de Disney+"),console.error(v)}),g=me(se(C,"disney_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"disney"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"disney"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Disney`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Disney+...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1593642532973-d31b97d0e6b8?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Disney+"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de películas, series y contenido exclusivo de Disney, Pixar, Marvel, Star Wars y más con nuestras cuentas premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},WD=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Max")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,max:S.length}))},v=>{A("Error al cargar productos de Max"),console.error(v)}),g=me(se(C,"max_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"max"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"max"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Max`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Max...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Max"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de películas y series exclusivas con nuestras cuentas Premium de Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},GD=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Spotify")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,spotify:S.length}))},v=>{A("Error al cargar productos de Spotify"),console.error(v)}),g=me(se(C,"spotify_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"spotify"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"spotify"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Spotify`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Spotify...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-green-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Spotify"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de música sin anuncios, descargas offline y millones de canciones y podcasts con nuestras cuentas premium de Spotify"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},HD=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Prime Video")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,primevideo:S.length}))},v=>{A("Error al cargar productos de Prime Video"),console.error(v)}),g=me(se(C,"primevideo_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"primevideo"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"primevideo"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Prime Video`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Prime Video...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616531770192-6eaea74c2456?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Prime Video"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de películas, series exclusivas, deportes y contenido original de Amazon con nuestras cuentas premium de Prime Video"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},QD=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Vix")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,vix:S.length}))},v=>{A("Error al cargar productos de Vix"),console.error(v)}),g=me(se(C,"vix_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"vix"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"vix"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Vix`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Vix...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-0e7b5ffabd18?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-red-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Vix"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de series, películas y contenido exclusivo en español con nuestras cuentas premium de Vix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},KD=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Canva")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Pro",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,canva:S.length}))},v=>{A("Error al cargar productos de Canva"),console.error(v)}),g=me(se(C,"canva_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"canva"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"canva"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Canva`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Canva...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Pro de Canva"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Crea diseños profesionales con nuestras cuentas Pro de Canva"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Pro"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},YD=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","ChatGPT")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Plus",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,chatgpt:S.length}))},v=>{A("Error al cargar productos de ChatGPT"),console.error(v)}),g=me(se(C,"chatgpt_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"chatgpt"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"chatgpt"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=ChatGPT`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en ChatGPT...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1677442136019-21780ecad339?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Plus de ChatGPT"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a funciones avanzadas de ChatGPT con nuestras cuentas Plus"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Plus"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},XD=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Crunchyroll")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,crunchyroll:S.length}))},v=>{A("Error al cargar productos de Crunchyroll"),console.error(v)}),g=me(se(C,"crunchyroll_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"crunchyroll"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"crunchyroll"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Crunchyroll`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Crunchyroll...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1618336753974-aae8e04506aa?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Crunchyroll"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus animes y dramas asiáticos favoritos con nuestras cuentas premium de Crunchyroll"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},JD=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Redes Sociales")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,redessociales:S.length}))},v=>{A("Error al cargar productos de Redes Sociales"),console.error(v)}),g=me(se(C,"redessociales_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"redessociales"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"redessociales"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Redes Sociales`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Redes Sociales...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl text\r
\r
-gray-300 hover:bg-gray-800/50 transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1611162616305-c69b3fa7fbe0?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Redes Sociales"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a funciones premium en tus redes sociales favoritas"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},ZD=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Apple Music")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,applemusic:S.length}))},v=>{A("Error al cargar productos de Apple Music"),console.error(v)}),g=me(se(C,"applemusic_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas","Netflix"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"applemusic"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"applemusic"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Apple Music`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple Music...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Apple Music"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tu música favorita con nuestras cuentas premium de Apple Music"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:["removing duplicate code here for brevity",e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},eA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Apple Tv")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,appletv:S.length}))},v=>{A("Error al cargar productos de Apple TV"),console.error(v)}),g=me(se(C,"appletv_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"appletv"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"appletv"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Apple Tv`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-gray-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gray-500 text-white rounded-full hover:bg-gray-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple TV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-gray-400 focus:border-gray-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-gray-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-gray-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-gray-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-gray-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-gray-500 text-white hover:bg-gray-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-gray-600/30 text-white border border-gray-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-400"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-gray-700/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Apple TV"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de series originales y películas exclusivas con nuestras cuentas premium de Apple TV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-gray-400 hover:text-gray-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-gray-500 hover:bg-gray-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-gray-400 focus:border-gray-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-gray-400 focus:border-gray-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-gray-400 focus:ring-gray-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-gray-400 hover:text-gray-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-gray-400 hover:text-gray-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-gray-500 text-white rounded-xl hover:bg-gray-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sy:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-gray-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},tA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Iptv")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Suscripción",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,iptv:S.length}))},v=>{A("Error al cargar productos de IPTV"),console.error(v)}),g=me(se(C,"iptv_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"iptv"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"iptv"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Iptv`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en IPTV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:" Kyrgyz Republicflex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"IPTV"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a una amplia variedad de canales en vivo con nuestras suscripciones IPTV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Suscripción"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},sA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Flujo Tv")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,flujotv:S.length}))},v=>{A("Error al cargar productos de Flujo TV"),console.error(v)}),g=me(se(C,"flujotv_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"flujotv"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"flujotv"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Flujo Tv`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Flujo TV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1598899134739-24c46f58b8c0?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Flujo TV"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de entretenimiento en streaming con nuestras cuentas premium de Flujo TV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},rA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Viki Rakuten")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,vikirakuten:S.length}))},v=>{A("Error al cargar productos de Viki Rakuten"),console.error(v)}),g=me(se(C,"vikirakuten_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"vikirakuten"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"vikirakuten"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Viki Rakuten`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Viki Rakuten...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Viki Rakuten"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de dramas asiáticos y contenido global con nuestras cuentas premium de Viki Rakuten"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},aA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Pornhub")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,pornhub:S.length}))},v=>{A("Error al cargar productos de Pornhub"),console.error(v)}),g=me(se(C,"pornhub_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"pornhub"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"pornhub"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Pornhub`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Pornhub...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Pornhub"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a contenido exclusivo con nuestras cuentas premium de Pornhub"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},nA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Paramount")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Suscripción",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,paramount:S.length}))},v=>{A("Error al cargar productos de Paramount"),console.error(v)}),g=me(se(C,"paramount_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");Lawyer.com;const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"paramount"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"paramount"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Paramount`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Paramount...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space        		-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Paramount+"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de series y películas exclusivas con nuestras suscripciones a Paramount+"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Suscripción"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},iA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Licencias")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"Permanente",type:m.type||"Licencia",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S.filter(y=>y.name.toLowerCase().includes("microsoft"))),F(y=>({...y,licencias:S.length}))},v=>{A("Error al cargar licencias de Microsoft"),console.error(v)}),g=me(se(C,"licencias_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar licencias:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay licencias disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay licencias disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{licenseKey:D.licenseKey||"No proporcionado",email:D.email||"No proporcionado",activationInstructions:D.activationInstructions||"No proporcionado"},terms:n.terms,type:"licencias"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{licenseKey:D.licenseKey||"No proporcionado",email:D.email||"No proporcionado",activationInstructions:D.activationInstructions||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{licenseKey:D.licenseKey||"No proporcionado",email:D.email||"No proporcionado",activationInstructions:D.activationInstructions||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"licencias"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{licenseKey:(b==null?void 0:b.licenseKey)||"No proporcionado",email:(b==null?void 0:b.email)||"No proporcionado",activationInstructions:(b==null?void 0:b.activationInstructions)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de la licencia.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Licencias`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar licencias Microsoft...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Licencias Microsoft"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Adquiere licencias oficiales de Microsoft para tus necesidades personales o profesionales"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Licencias Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron licencias que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"Permanente"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Licencia"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la licencia:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los detalles de la licencia."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todas las licencias tienen una garantía de 7 días. Si tienes problemas con tu licencia durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la licencia adquirida. No nos hacemos responsables por problemas derivados de un uso indebido."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Activación"}),e.jsx("p",{children:"Las licencias deben activarse siguiendo las instrucciones proporcionadas por el proveedor. No se admiten devoluciones por errores en el proceso de activación."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},lA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Capcut")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Pro",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,capcut:S.length}))},v=>{A("Error al cargar productos de Capcut"),console.error(v)}),g=me(se(C,"capcut_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"capcut"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"capcut"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Capcut`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Capcut...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68e18?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Licencias Premium de Capcut"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Crea videos impresionantes con nuestras licencias premium de Capcut"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Pro"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},oA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Duolingo")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,duolingo:S.length}))},v=>{A("Error al cargar productos de Duolingo"),console.error(v)}),g=me(se(C,"duolingo_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"duolingo"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"duolingo"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Duolingo`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Duolingo...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Duolingo"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Aprende idiomas de forma divertida y efectiva con nuestras cuentas premium de Duolingo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},cA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Dgo")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,dgo:S.length}))},v=>{A("Error al cargar productos de Dgo"),console.error(v)}),g=me(se(C,"dgo_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"dgo"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"dgo"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Dgo`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Dgo...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Dgo"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus programas y eventos favoritos con nuestras cuentas premium de Dgo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},dA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Liga Max")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,ligamax:S.length}))},v=>{A("Error al cargar productos de Liga Max"),console.error(v)}),g=me(se(C,"ligamax_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas","Liga Max"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"ligamax"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"ligamax"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Liga Max`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Liga Max...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1541348263662-e068662d82af?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Liga Max"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de los mejores partidos y eventos deportivos con nuestras cuentas premium de Liga Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},uA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Movistar Play")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,movistarplay:S.length}))},v=>{A("Error al cargar productos de Movistar Play"),console.error(v)}),g=me(se(C,"movistarplay_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"movistarplay"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"movistarplay"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Movistar Play`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Movistar Play...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Movistar Play"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus series, películas y eventos en vivo con nuestras cuentas premium de Movistar Play"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:`mb-6 p-4 bg-gray-7\r
00/50 rounded-xl border border-gray-600/50`,children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},xA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Youtube")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,youtube:S.length}))},v=>{A("Error al cargar productos de Youtube"),console.error(v)}),g=me(se(C,"youtube_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"youtube"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"youtube"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Youtube`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Youtube...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1611162617213-7d15a376f5ac?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Youtube"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de videos sin anuncios y contenido exclusivo con nuestras cuentas premium de Youtube"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border русских-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},mA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Deezer")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,deezer:S.length}))},v=>{A("Error al cargar productos de Deezer"),console.error(v)}),g=me(se(C,"deezer_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"deezer"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"deezer"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Deezer`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-purple-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-purple-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-purple-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-purple-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-purple-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Deezer...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-purple-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-purple-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-purple-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-purple-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-purple-500 text-white hover:bg-purple-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-purple-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-purple-600/30 text-white border border-purple-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1511671786164-2bd9ebeb2088?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-purple-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Deezer"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tu música favorita sin límites con nuestras cuentas premium de Deezer"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-purple-400 hover:text-purple-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-purple-500 hover:bg-purple-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-purple-400 focus:border-purple-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-purple-400 focus:border-purple-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-purple-400 focus:ring-purple-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-purple-400 hover:text-purple-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-purple-400 hover:text-purple-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-purple-500 text-white rounded-xl hover:bg-purple-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-purple-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},hA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Tidal")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"HiFi",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,tidal:S.length}))},v=>{A("Error al cargar productos de Tidal"),console.error(v)}),g=me(se(C,"tidal_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"tidal"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"tidal"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Tidal`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Tidal...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514327605112-b887c0e61c0a?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Tidal"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de música en alta fidelidad con nuestras cuentas premium de Tidal"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"HiFi"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md consolidated-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},pA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","Vpn")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,vpn:S.length}))},v=>{A("Error al cargar productos de VPN"),console.error(v)}),g=me(se(C,"vpn_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"vpn"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"vpn"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Vpn`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en VPN...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de VPN"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Navega de forma segura y privada con nuestras cuentas premium de VPN"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},fA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","WinTv")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,wintv:S.length}))},v=>{A("Error al cargar productos de Win TV"),console.error(v)}),g=me(se(C,"wintv_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"wintv"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"wintv"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Win Tv`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Win TV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Win TV"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de entretenimiento en streaming con nuestras cuentas premium de Win TV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel~~tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu cuenta."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu cuenta durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé a la cuenta adquirida. No nos hacemos responsables por suspensiones o baneos por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},gA=()=>{const[s,t]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,d]=j.useState(null),[x,p]=j.useState(0),[N,I]=j.useState(!0),[T,A]=j.useState(null),[f,L]=j.useState(null),[k,_]=j.useState(null),[z,M]=j.useState(!1),[Y,G]=j.useState(!1),[W,R]=j.useState(null),[c,F]=j.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[V,Q]=j.useState(""),E=ut(),q=n=>{const b=Number(n);return isNaN(b)?"0.00":b.toFixed(2)};j.useEffect(()=>{const n=vt(De,async b=>{if(b)try{const g=await Le(U(C,"users",b.uid));if(g.exists()){const O=g.data();d({id:b.uid,name:O.username||"Usuario",email:b.email,orders:O.orders||[],role:O.role||"user"}),p(Number(O.balance)||0)}else A("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){A("Error al cargar datos del usuario"),console.error(g)}else d(null),p(0);I(!1)});return()=>n()},[]),j.useEffect(()=>{const n=me(se(C,"products"),he("category","==","BuscaPersonas")),b=ve(n,async v=>{const K=v.docs.map(y=>{const m=y.data();return{id:y.id,...m,price:Number(m.price)||0,stock:Number(m.availableAccounts)||0,accountDetails:m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",type:m.type||"Premium",status:m.status||"En stock"}}),S=await Promise.all(K.map(async y=>{if(!y.provider||y.provider==="Proveedor no especificado")try{if(y.providerId){const m=await Le(U(C,"users",y.providerId));if(m.exists())return{...y,provider:m.data().username||m.data().email||y.provider,providerPhone:m.data().phoneNumber||y.providerPhone}}}catch(m){console.error("Error al cargar datos del proveedor:",m)}return y}));a(S),F(y=>({...y,buscapersonas:S.length}))},v=>{A("Error al cargar productos de Busca Personas"),console.error(v)}),g=me(se(C,"buscapersonas_accounts"),he("status","==","available")),O=ve(g,v=>{const K=v.docs.map(S=>({id:S.id,...S.data(),productId:S.data().productId||"",providerId:S.data().providerId||""}));o(K)},v=>{console.error("Error al cargar cuentas:",v)}),$=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo"].map(v=>{const K=v.toLowerCase().replace(/\s+/g,""),S=me(se(C,"products"),he("category","==",v));return ve(S,y=>{F(m=>({...m,[K]:y.docs.length}))},y=>{console.error(`Error al cargar productos de ${v}:`,y)})});return()=>{b(),O(),$.forEach(v=>v())}},[]);const _e=n=>{if(!l){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>E("/login")});return}if(x<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:l.name,phoneNumber:""})},Ie=async()=>{if(!document.getElementById("termsCheck").checked){A("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(f.phoneNumber)){A("El número de WhatsApp debe tener 9 dígitos");return}try{I(!0);const n=f.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let b=null;n.status==="En stock"?b=await Qe(C,async g=>{const O=U(C,"products",n.id),H=await g.get(O);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const v=se(C,`products/${n.id}/accounts`),K=me(v,he("status","==","available"),kt(1)),S=await ft(K);if(S.empty)throw new Error("No hay cuentas disponibles en la subcolección");const y=S.docs[0],m=y.ref,D=y.data(),J=U(C,"users",l.id),te=await g.get(J);if(!te.exists())throw new Error("Usuario no encontrado");let X=null,ie=n.providerPhone||"";if(n.providerId&&!ie){const de=U(C,"users",n.providerId);X=await g.get(de),X.exists()&&(ie=X.data().phoneNumber||"")}g.update(m,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(O,{availableAccounts:Ue(-1),stock:Ue(-1)});const be=(Number(te.data().balance)||0)-n.price;if(be<0)throw new Error("Saldo insuficiente");const re=te.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:ie,status:"active",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},terms:n.terms,type:"buscapersonas"};g.update(J,{balance:be,orders:[...re,xe]});const pe=U(se(C,"sales"));if(g.set(pe,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:ie,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"}}),X&&X.exists()){const de=X.data().sales||[],we={saleId:pe.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:{email:D.email||"No proporcionado",password:D.password||"No proporcionado",profile:D.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed"};g.update(U(C,"users",n.providerId),{sales:[...de,we]})}return D}):await Qe(C,async g=>{const O=U(C,"users",l.id),H=await g.get(O);if(!H.exists())throw new Error("Usuario no encontrado");let $=null,v=n.providerPhone||"";if(n.providerId&&!v){const J=U(C,"users",n.providerId);$=await g.get(J),$.exists()&&(v=$.data().phoneNumber||"")}const S=(Number(H.data().balance)||0)-n.price;if(S<0)throw new Error("Saldo insuficiente");const y=H.data().orders||[],m={productId:n.id,productName:n.name,price:n.price,provider:n.provider,providerId:n.providerId,providerPhone:v,status:"pending",customerName:f.customerName,customerId:l.id,phoneNumber:f.phoneNumber,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"buscapersonas"};g.update(O,{balance:S,orders:[...y,m]});const D=U(se(C,"sales"));if(g.set(D,{...m,provider:n.provider,providerId:n.providerId,providerPhone:v,saleDate:new Date().toISOString(),status:"pending"}),$&&$.exists()){const J=$.data().sales||[],te={saleId:D.id,productId:n.id,productName:n.name,price:n.price,customerId:l.id,customerName:f.customerName,customerPhone:f.phoneNumber,accountDetails:null,saleDate:new Date().toISOString(),status:"pending"};g.update(U(C,"users",n.providerId),{sales:[...J,te]})}}),p(g=>g-n.price),d(g=>({...g,orders:[...g.orders,{...f,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(b==null?void 0:b.email)||"No proporcionado",password:(b==null?void 0:b.password)||"No proporcionado",profile:(b==null?void 0:b.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){A(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{I(!1)}},Ce=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms})},Te=n=>{_({name:n.name,terms:n.terms,provider:n.provider}),M(!0)},ce=()=>{if(!l){E("/login");return}(l==null?void 0:l.role)==="user"?E("/dashboard/user"):(l==null?void 0:l.role)==="affiliate"?E("/dashboard/affiliate"):(l==null?void 0:l.role)==="provider"?E("/dashboard/provider"):(l==null?void 0:l.role)==="admin"&&E("/dashboard/admin")},ee=n=>{n.preventDefault(),V.trim()&&E(`/search?q=${encodeURIComponent(V)}&category=Busca Personas`)},le=r.filter(n=>n.name.toLowerCase().includes(V.toLowerCase())),je=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:["En stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-32 h-10 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-8 translate-y-4 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Agotado"})});return N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx(qe,{className:"animate-spin text-5xl text-cyan-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 p-4",children:[e.jsx(rt,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(jt,{size:24})}),e.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-cyan-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Busca Personas...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",value:V,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:ee,className:"absolute right-3 text-gray-400 hover:text-cyan-400 transition-all",children:e.jsx(He,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:l?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Me,{className:"mr-2 text-cyan-400"})," ",l.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",x.toFixed(2)]}),e.jsx("button",{onClick:ce,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Me,{className:"text-cyan-400",size:20})}),e.jsxs("button",{onClick:()=>{De.signOut(),E("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(ht,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-cyan-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>E("/register"),className:"px-4 py-2 rounded-full bg-cyan-500 text-white hover:bg-cyan-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(h,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-cyan-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.netflix})]}),e.jsxs(h,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.spotify})]}),e.jsxs(h,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.disney})]}),e.jsxs(h,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.max})]}),e.jsxs(h,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.primevideo})]}),e.jsxs(h,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vix})]}),e.jsxs(h,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.crunchyroll})]}),e.jsxs(h,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.canva})]}),e.jsxs(h,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.chatgpt})]}),e.jsxs(h,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.redessociales})]}),e.jsxs(h,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.dgo})]}),e.jsxs(h,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.ligamax})]}),e.jsxs(h,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.movistarplay})]}),e.jsxs(h,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.youtube})]}),e.jsxs(h,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.deezer})]}),e.jsxs(h,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.tidal})]}),e.jsxs(h,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vpn})]}),e.jsxs(h,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.wintv})]}),e.jsxs(h,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.applemusic})]}),e.jsxs(h,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.appletv})]}),e.jsxs(h,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.iptv})]}),e.jsxs(h,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.flujotv})]}),e.jsxs(h,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.vikirakuten})]}),e.jsxs(h,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.pornhub})]}),e.jsxs(h,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.paramount})]}),e.jsxs(h,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.licencias})]}),e.jsxs(h,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.capcut})]}),e.jsxs(h,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.duolingo})]}),e.jsxs(h,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-cyan-600/30 text-white border border-cyan-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:c.buscapersonas})]})]}),l&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500/30 flex items-center justify-center text-white font-bold text-lg",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",x.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321497487-e288fb19713f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-blue-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Servicios de Busca Personas"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a herramientas y servicios premium para localizar personas de manera rápida y segura"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),le.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:le.map(n=>e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 w-full border border-gray-700/50 flex flex-col p-4",children:[e.jsxs("div",{className:"relative w-full aspect-square min-h-48 max-h-96 overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image||"https://via.placeholder.com/300",alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-110"}),je(n)]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-3",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-4",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.provider})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Duración:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.duration||"1 mes"})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Tipo:"}),e.jsx("span",{className:"ml-2 text-gray-200",children:n.type||"Premium"})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",q(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-3",children:[e.jsxs("button",{onClick:()=>Ce(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(It,{className:"mr-2"})," Detalles"]}),e.jsxs("button",{onClick:()=>Te(n),className:"flex-1 py-2 px-4 bg-gray-800/50 hover:bg-gray-700/50 text-white rounded-full text-sm flex items-center justify-center transition-all border border-gray-700/50",children:[e.jsx(Fe,{className:"mr-2"})," Términos"]})]}),e.jsxs("button",{onClick:()=>_e(n),disabled:n.status==="En stock"&&n.stock<=0,className:`w-full py-3 rounded-full flex items-center justify-center transition-all text-white font-medium text-sm ${n.status==="A pedido"||n.stock>0?"bg-cyan-500 hover:bg-cyan-600":"bg-red-600/50 cursor-not-allowed"}`,children:[e.jsx(ct,{className:"mr-2"}),n.status==="A pedido"?"Pedir":n.stock>0?"Comprar":"Agotado"]})]})]},n.id))})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>t(!1)})]}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"}),e.jsx("button",{onClick:()=>L(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:f.product.name}),e.jsxs("p",{className:"text-white font-bold text-xl sm:text-2xl mt-1",children:["S/ ",q(f.product.price)]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-2",children:["Proveedor: ",f.product.provider]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Estado: ",f.product.status]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre completo"}),e.jsx("input",{type:"text",value:f.customerName,onChange:n=>L(b=>({...b,customerName:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Número de WhatsApp"}),e.jsx("input",{type:"tel",value:f.phoneNumber,onChange:n=>L(b=>({...b,phoneNumber:n.target.value})),className:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600/50 rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 text-white transition-all",placeholder:"Ej. 999888777",required:!0})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"mt-1 mr-3 bg-gray-700 border-gray-600 text-cyan-400 focus:ring-cyan-400 rounded",required:!0}),e.jsxs("label",{htmlFor:"termsCheck",className:"text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Términos"})," ","y"," ",e.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-cyan-400 hover:text-cyan-300 transition-all underline underline-offset-4",children:"Condiciones Generales"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 border border-gray-600/50 rounded-xl text-gray-300 hover:bg-gray-700/50 transition-all",children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:N,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 disabled:bg-gray-700/50 disabled:text-gray-400 flex items-center transition-all",children:[N&&e.jsx(qe,{className:"animate-spin mr-2"}),e.jsx("span",{children:f.product.status==="A pedido"?"Confirmar Pedido":"Confirmar Compra"})]})]})]})})}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Notificación"}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("p",{className:"text-gray-300 text-center mb-6",children:W.message}),e.jsx("button",{onClick:()=>{W.onClose&&W.onClose(),R(null)},className:"w-full py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Aceptar"})]})})}),k&&!z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:k.name}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Proveedor:"}),e.jsx("p",{className:"text-gray-300",children:k.provider})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-medium text-white mb-2",children:"Detalles de la cuenta:"}),e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:e.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.accountDetails})})]})]}),e.jsx("button",{onClick:()=>{_(null),M(!0)},className:"w-full mt-6 py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 transition-all border border-gray-600/50",children:"Ver Términos Específicos"})]})})}),z&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-700/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:["Términos - ",k.name]}),e.jsx("button",{onClick:()=>{M(!1),_({name:k.name,accountDetails:k.accountDetails,provider:k.provider,terms:k.terms})},className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsxs("h3",{className:"font-semibold text-white mb-2",children:["Proveedor: ",k.provider]})}),e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Términos específicos:"}),e.jsx("div",{className:"bg-gray-700/50 p-4 rounded-xl mb-4 border border-gray-600/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-300",children:k.terms})}),e.jsx("button",{onClick:()=>{M(!1),G(!0)},className:"w-full py-2 bg-gray-700/50 text-white rounded-xl hover:bg-gray-600/50 mb-4 transition-all border border-gray-600/50",children:"Ver Términos Generales"})]})]})})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:e.jsx("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-600/50 animate-fadeIn",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Términos y Condiciones Generales"}),e.jsx("button",{onClick:()=>setGeneralTimeModal(!1),className:"text-gray-400 hover:text-white transition-all",children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"text-gray-300",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"1. Proceso de Compra"}),e.jsx("p",{children:"Al realizar una compra, el proveedor se contactará contigo dentro de las próximas 24 horas hábiles para entregarte los accesos a tu servicio."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"2. Garantía"}),e.jsx("p",{children:"Todos los productos tienen una garantía de 7 días. Si tienes problemas con tu servicio durante este periodo, el proveedor está obligado a resolverlos o reembolsarte."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"3. Uso Responsable"}),e.jsx("p",{children:"El cliente es responsable del uso que dé al servicio adquirido. No nos hacemos responsables por suspensiones o restricciones por mal uso."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"4. Soporte"}),e.jsx("p",{children:"El soporte se realizará directamente con el proveedor mediante el número de WhatsApp proporcionado."})]}),e.jsxs("div",{className:"bg-gray-700/50 p-4 sm:p-5 rounded-xl border border-gray-600/50",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"5. Renovaciones"}),e.jsx("p",{children:"Las renovaciones son manuales y deben solicitarse al proveedor antes de que finalice el período contratado."})]})]})}),e.jsx("button",{onClick:()=>G(!1),className:"w-full mt-6 py-3 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-900/80 backdrop-blur-md border-t border-gray-800/50 py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ve,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-400",children:"BlackStreaming"})]}),e.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:"text-sm text-gray-400 text-center",children:"Desarrollado por Saiph"})]})})})]})},yA=()=>e.jsx(nC,{children:e.jsxs(e.Fragment,{children:[e.jsx(ot,{path:"/",element:e.jsx(RD,{})}),e.jsx(ot,{path:"/login",element:e.jsx(MD,{})}),e.jsx(ot,{path:"/register",element:e.jsx(zD,{})}),e.jsx(ot,{path:"/dashboard/user",element:e.jsx(LD,{})}),e.jsx(ot,{path:"/dashboard/affiliate",element:e.jsx(VD,{})}),e.jsx(ot,{path:"/dashboard/provider",element:e.jsx(FD,{})}),e.jsx(ot,{path:"/dashboard/admin",element:e.jsx(BD,{})}),e.jsx(ot,{path:"/netflix",element:e.jsx($D,{})}),e.jsx(ot,{path:"/disney",element:e.jsx(qD,{})}),e.jsx(ot,{path:"/max",element:e.jsx(WD,{})}),e.jsx(ot,{path:"/spotify",element:e.jsx(GD,{})}),e.jsx(ot,{path:"/primevideo",element:e.jsx(HD,{})}),e.jsx(ot,{path:"/vix",element:e.jsx(QD,{})}),e.jsx(ot,{path:"/canva",element:e.jsx(KD,{})}),e.jsx(ot,{path:"/chatgpt",element:e.jsx(YD,{})}),e.jsx(ot,{path:"/crunchyroll",element:e.jsx(XD,{})}),e.jsx(ot,{path:"/redessociales",element:e.jsx(JD,{})}),e.jsx(ot,{path:"/applemusic",element:e.jsx(ZD,{})}),e.jsx(ot,{path:"/appletv",element:e.jsx(eA,{})}),e.jsx(ot,{path:"/iptv",element:e.jsx(tA,{})}),e.jsx(ot,{path:"/flujotv",element:e.jsx(sA,{})}),e.jsx(ot,{path:"/vikirakuten",element:e.jsx(rA,{})}),e.jsx(ot,{path:"/pornhub",element:e.jsx(aA,{})}),e.jsx(ot,{path:"/paramount",element:e.jsx(nA,{})}),e.jsx(ot,{path:"/licencias",element:e.jsx(iA,{})}),e.jsx(ot,{path:"/capcut",element:e.jsx(lA,{})}),e.jsx(ot,{path:"/duolingo",element:e.jsx(oA,{})}),e.jsx(ot,{path:"/dgo",element:e.jsx(cA,{})}),e.jsx(ot,{path:"/ligamax",element:e.jsx(dA,{})}),e.jsx(ot,{path:"/movistarplay",element:e.jsx(uA,{})}),e.jsx(ot,{path:"/youtube",element:e.jsx(xA,{})}),e.jsx(ot,{path:"/deezer",element:e.jsx(mA,{})}),e.jsx(ot,{path:"/tidal",element:e.jsx(hA,{})}),e.jsx(ot,{path:"/vpn",element:e.jsx(pA,{})}),e.jsx(ot,{path:"/wintv",element:e.jsx(fA,{})}),e.jsx(ot,{path:"/buscapersonas",element:e.jsx(gA,{})})]})});Gx.createRoot(document.getElementById("root")).render(e.jsx(Ea.StrictMode,{children:e.jsx(_C,{children:e.jsx(yA,{})})}));
