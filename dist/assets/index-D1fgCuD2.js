(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const l of u.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(i){if(i.ep)return;i.ep=!0;const u=s(i);fetch(i.href,u)}})();function bg(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Bh={exports:{}},Xc={},Lh={exports:{}},ur={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function AS(){if(kv)return ur;kv=1;var a=Symbol.for("react.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),l=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),k=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),$=Symbol.iterator;function D(J){return J===null||typeof J!="object"?null:(J=$&&J[$]||J["@@iterator"],typeof J=="function"?J:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,W={};function N(J,de,ve){this.props=J,this.context=de,this.refs=W,this.updater=ve||O}N.prototype.isReactComponent={},N.prototype.setState=function(J,de){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,de,"setState")},N.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function G(){}G.prototype=N.prototype;function H(J,de,ve){this.props=J,this.context=de,this.refs=W,this.updater=ve||O}var U=H.prototype=new G;U.constructor=H,Y(U,N.prototype),U.isPureReactComponent=!0;var ne=Array.isArray,oe=Object.prototype.hasOwnProperty,$e={current:null},K={key:!0,ref:!0,__self:!0,__source:!0};function V(J,de,ve){var Se,Ve={},q=null,o=null;if(de!=null)for(Se in de.ref!==void 0&&(o=de.ref),de.key!==void 0&&(q=""+de.key),de)oe.call(de,Se)&&!K.hasOwnProperty(Se)&&(Ve[Se]=de[Se]);var nt=arguments.length-2;if(nt===1)Ve.children=ve;else if(1<nt){for(var rt=Array(nt),Qe=0;Qe<nt;Qe++)rt[Qe]=arguments[Qe+2];Ve.children=rt}if(J&&J.defaultProps)for(Se in nt=J.defaultProps,nt)Ve[Se]===void 0&&(Ve[Se]=nt[Se]);return{$$typeof:a,type:J,key:q,ref:o,props:Ve,_owner:$e.current}}function L(J,de){return{$$typeof:a,type:J.type,key:de,ref:J.ref,props:J.props,_owner:J._owner}}function y(J){return typeof J=="object"&&J!==null&&J.$$typeof===a}function se(J){var de={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(ve){return de[ve]})}var ee=/\/+/g;function re(J,de){return typeof J=="object"&&J!==null&&J.key!=null?se(""+J.key):de.toString(36)}function He(J,de,ve,Se,Ve){var q=typeof J;(q==="undefined"||q==="boolean")&&(J=null);var o=!1;if(J===null)o=!0;else switch(q){case"string":case"number":o=!0;break;case"object":switch(J.$$typeof){case a:case t:o=!0}}if(o)return o=J,Ve=Ve(o),J=Se===""?"."+re(o,0):Se,ne(Ve)?(ve="",J!=null&&(ve=J.replace(ee,"$&/")+"/"),He(Ve,de,ve,"",function(Qe){return Qe})):Ve!=null&&(y(Ve)&&(Ve=L(Ve,ve+(!Ve.key||o&&o.key===Ve.key?"":(""+Ve.key).replace(ee,"$&/")+"/")+J)),de.push(Ve)),1;if(o=0,Se=Se===""?".":Se+":",ne(J))for(var nt=0;nt<J.length;nt++){q=J[nt];var rt=Se+re(q,nt);o+=He(q,de,ve,rt,Ve)}else if(rt=D(J),typeof rt=="function")for(J=rt.call(J),nt=0;!(q=J.next()).done;)q=q.value,rt=Se+re(q,nt++),o+=He(q,de,ve,rt,Ve);else if(q==="object")throw de=String(J),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.");return o}function ut(J,de,ve){if(J==null)return J;var Se=[],Ve=0;return He(J,Se,"","",function(q){return de.call(ve,q,Ve++)}),Se}function it(J){if(J._status===-1){var de=J._result;de=de(),de.then(function(ve){(J._status===0||J._status===-1)&&(J._status=1,J._result=ve)},function(ve){(J._status===0||J._status===-1)&&(J._status=2,J._result=ve)}),J._status===-1&&(J._status=0,J._result=de)}if(J._status===1)return J._result.default;throw J._result}var Je={current:null},fe={transition:null},Ne={ReactCurrentDispatcher:Je,ReactCurrentBatchConfig:fe,ReactCurrentOwner:$e};function ye(){throw Error("act(...) is not supported in production builds of React.")}return ur.Children={map:ut,forEach:function(J,de,ve){ut(J,function(){de.apply(this,arguments)},ve)},count:function(J){var de=0;return ut(J,function(){de++}),de},toArray:function(J){return ut(J,function(de){return de})||[]},only:function(J){if(!y(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},ur.Component=N,ur.Fragment=s,ur.Profiler=i,ur.PureComponent=H,ur.StrictMode=n,ur.Suspense=h,ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ne,ur.act=ye,ur.cloneElement=function(J,de,ve){if(J==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+J+".");var Se=Y({},J.props),Ve=J.key,q=J.ref,o=J._owner;if(de!=null){if(de.ref!==void 0&&(q=de.ref,o=$e.current),de.key!==void 0&&(Ve=""+de.key),J.type&&J.type.defaultProps)var nt=J.type.defaultProps;for(rt in de)oe.call(de,rt)&&!K.hasOwnProperty(rt)&&(Se[rt]=de[rt]===void 0&&nt!==void 0?nt[rt]:de[rt])}var rt=arguments.length-2;if(rt===1)Se.children=ve;else if(1<rt){nt=Array(rt);for(var Qe=0;Qe<rt;Qe++)nt[Qe]=arguments[Qe+2];Se.children=nt}return{$$typeof:a,type:J.type,key:Ve,ref:q,props:Se,_owner:o}},ur.createContext=function(J){return J={$$typeof:l,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},J.Provider={$$typeof:u,_context:J},J.Consumer=J},ur.createElement=V,ur.createFactory=function(J){var de=V.bind(null,J);return de.type=J,de},ur.createRef=function(){return{current:null}},ur.forwardRef=function(J){return{$$typeof:p,render:J}},ur.isValidElement=y,ur.lazy=function(J){return{$$typeof:S,_payload:{_status:-1,_result:J},_init:it}},ur.memo=function(J,de){return{$$typeof:k,type:J,compare:de===void 0?null:de}},ur.startTransition=function(J){var de=fe.transition;fe.transition={};try{J()}finally{fe.transition=de}},ur.unstable_act=ye,ur.useCallback=function(J,de){return Je.current.useCallback(J,de)},ur.useContext=function(J){return Je.current.useContext(J)},ur.useDebugValue=function(){},ur.useDeferredValue=function(J){return Je.current.useDeferredValue(J)},ur.useEffect=function(J,de){return Je.current.useEffect(J,de)},ur.useId=function(){return Je.current.useId()},ur.useImperativeHandle=function(J,de,ve){return Je.current.useImperativeHandle(J,de,ve)},ur.useInsertionEffect=function(J,de){return Je.current.useInsertionEffect(J,de)},ur.useLayoutEffect=function(J,de){return Je.current.useLayoutEffect(J,de)},ur.useMemo=function(J,de){return Je.current.useMemo(J,de)},ur.useReducer=function(J,de,ve){return Je.current.useReducer(J,de,ve)},ur.useRef=function(J){return Je.current.useRef(J)},ur.useState=function(J){return Je.current.useState(J)},ur.useSyncExternalStore=function(J,de,ve){return Je.current.useSyncExternalStore(J,de,ve)},ur.useTransition=function(){return Je.current.useTransition()},ur.version="18.3.1",ur}var Nv;function fg(){return Nv||(Nv=1,Lh.exports=AS()),Lh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function RS(){if(jv)return Xc;jv=1;var a=fg(),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(p,h,k){var S,$={},D=null,O=null;k!==void 0&&(D=""+k),h.key!==void 0&&(D=""+h.key),h.ref!==void 0&&(O=h.ref);for(S in h)n.call(h,S)&&!u.hasOwnProperty(S)&&($[S]=h[S]);if(p&&p.defaultProps)for(S in h=p.defaultProps,h)$[S]===void 0&&($[S]=h[S]);return{$$typeof:t,type:p,key:D,ref:O,props:$,_owner:i.current}}return Xc.Fragment=s,Xc.jsx=l,Xc.jsxs=l,Xc}var Cv;function MS(){return Cv||(Cv=1,Bh.exports=RS()),Bh.exports}var e=MS(),m=fg();const Cs=bg(m);var k0={},Oh={exports:{}},ls={},Vh={exports:{}},Fh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function zS(){return Sv||(Sv=1,(function(a){function t(fe,Ne){var ye=fe.length;fe.push(Ne);e:for(;0<ye;){var J=ye-1>>>1,de=fe[J];if(0<i(de,Ne))fe[J]=Ne,fe[ye]=de,ye=J;else break e}}function s(fe){return fe.length===0?null:fe[0]}function n(fe){if(fe.length===0)return null;var Ne=fe[0],ye=fe.pop();if(ye!==Ne){fe[0]=ye;e:for(var J=0,de=fe.length,ve=de>>>1;J<ve;){var Se=2*(J+1)-1,Ve=fe[Se],q=Se+1,o=fe[q];if(0>i(Ve,ye))q<de&&0>i(o,Ve)?(fe[J]=o,fe[q]=ye,J=q):(fe[J]=Ve,fe[Se]=ye,J=Se);else if(q<de&&0>i(o,ye))fe[J]=o,fe[q]=ye,J=q;else break e}}return Ne}function i(fe,Ne){var ye=fe.sortIndex-Ne.sortIndex;return ye!==0?ye:fe.id-Ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var l=Date,p=l.now();a.unstable_now=function(){return l.now()-p}}var h=[],k=[],S=1,$=null,D=3,O=!1,Y=!1,W=!1,N=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(fe){for(var Ne=s(k);Ne!==null;){if(Ne.callback===null)n(k);else if(Ne.startTime<=fe)n(k),Ne.sortIndex=Ne.expirationTime,t(h,Ne);else break;Ne=s(k)}}function ne(fe){if(W=!1,U(fe),!Y)if(s(h)!==null)Y=!0,it(oe);else{var Ne=s(k);Ne!==null&&Je(ne,Ne.startTime-fe)}}function oe(fe,Ne){Y=!1,W&&(W=!1,G(V),V=-1),O=!0;var ye=D;try{for(U(Ne),$=s(h);$!==null&&(!($.expirationTime>Ne)||fe&&!se());){var J=$.callback;if(typeof J=="function"){$.callback=null,D=$.priorityLevel;var de=J($.expirationTime<=Ne);Ne=a.unstable_now(),typeof de=="function"?$.callback=de:$===s(h)&&n(h),U(Ne)}else n(h);$=s(h)}if($!==null)var ve=!0;else{var Se=s(k);Se!==null&&Je(ne,Se.startTime-Ne),ve=!1}return ve}finally{$=null,D=ye,O=!1}}var $e=!1,K=null,V=-1,L=5,y=-1;function se(){return!(a.unstable_now()-y<L)}function ee(){if(K!==null){var fe=a.unstable_now();y=fe;var Ne=!0;try{Ne=K(!0,fe)}finally{Ne?re():($e=!1,K=null)}}else $e=!1}var re;if(typeof H=="function")re=function(){H(ee)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,ut=He.port2;He.port1.onmessage=ee,re=function(){ut.postMessage(null)}}else re=function(){N(ee,0)};function it(fe){K=fe,$e||($e=!0,re())}function Je(fe,Ne){V=N(function(){fe(a.unstable_now())},Ne)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(fe){fe.callback=null},a.unstable_continueExecution=function(){Y||O||(Y=!0,it(oe))},a.unstable_forceFrameRate=function(fe){0>fe||125<fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<fe?Math.floor(1e3/fe):5},a.unstable_getCurrentPriorityLevel=function(){return D},a.unstable_getFirstCallbackNode=function(){return s(h)},a.unstable_next=function(fe){switch(D){case 1:case 2:case 3:var Ne=3;break;default:Ne=D}var ye=D;D=Ne;try{return fe()}finally{D=ye}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(fe,Ne){switch(fe){case 1:case 2:case 3:case 4:case 5:break;default:fe=3}var ye=D;D=fe;try{return Ne()}finally{D=ye}},a.unstable_scheduleCallback=function(fe,Ne,ye){var J=a.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?J+ye:J):ye=J,fe){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=ye+de,fe={id:S++,callback:Ne,priorityLevel:fe,startTime:ye,expirationTime:de,sortIndex:-1},ye>J?(fe.sortIndex=ye,t(k,fe),s(h)===null&&fe===s(k)&&(W?(G(V),V=-1):W=!0,Je(ne,ye-J))):(fe.sortIndex=de,t(h,fe),Y||O||(Y=!0,it(oe))),fe},a.unstable_shouldYield=se,a.unstable_wrapCallback=function(fe){var Ne=D;return function(){var ye=D;D=Ne;try{return fe.apply(this,arguments)}finally{D=ye}}}})(Fh)),Fh}var $v;function BS(){return $v||($v=1,Vh.exports=zS()),Vh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tv;function LS(){if(Tv)return ls;Tv=1;var a=fg(),t=BS();function s(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+c,x=1;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function u(c,d){l(c,d),l(c+"Capture",d)}function l(c,d){for(i[c]=d,c=0;c<d.length;c++)n.add(d[c])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,k=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},$={};function D(c){return h.call($,c)?!0:h.call(S,c)?!1:k.test(c)?$[c]=!0:(S[c]=!0,!1)}function O(c,d,x,j){if(x!==null&&x.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return j?!1:x!==null?!x.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function Y(c,d,x,j){if(d===null||typeof d>"u"||O(c,d,x,j))return!0;if(j)return!1;if(x!==null)switch(x.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function W(c,d,x,j,T,M,te){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=j,this.attributeNamespace=T,this.mustUseProperty=x,this.propertyName=c,this.type=d,this.sanitizeURL=M,this.removeEmptyString=te}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){N[c]=new W(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var d=c[0];N[d]=new W(d,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){N[c]=new W(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){N[c]=new W(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){N[c]=new W(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){N[c]=new W(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){N[c]=new W(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){N[c]=new W(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){N[c]=new W(c,5,!1,c.toLowerCase(),null,!1,!1)});var G=/[\-:]([a-z])/g;function H(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var d=c.replace(G,H);N[d]=new W(d,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var d=c.replace(G,H);N[d]=new W(d,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var d=c.replace(G,H);N[d]=new W(d,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){N[c]=new W(c,1,!1,c.toLowerCase(),null,!1,!1)}),N.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){N[c]=new W(c,1,!1,c.toLowerCase(),null,!0,!0)});function U(c,d,x,j){var T=N.hasOwnProperty(d)?N[d]:null;(T!==null?T.type!==0:j||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(Y(d,x,T,j)&&(x=null),j||T===null?D(d)&&(x===null?c.removeAttribute(d):c.setAttribute(d,""+x)):T.mustUseProperty?c[T.propertyName]=x===null?T.type===3?!1:"":x:(d=T.attributeName,j=T.attributeNamespace,x===null?c.removeAttribute(d):(T=T.type,x=T===3||T===4&&x===!0?"":""+x,j?c.setAttributeNS(j,d,x):c.setAttribute(d,x))))}var ne=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oe=Symbol.for("react.element"),$e=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),se=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),ut=Symbol.for("react.memo"),it=Symbol.for("react.lazy"),Je=Symbol.for("react.offscreen"),fe=Symbol.iterator;function Ne(c){return c===null||typeof c!="object"?null:(c=fe&&c[fe]||c["@@iterator"],typeof c=="function"?c:null)}var ye=Object.assign,J;function de(c){if(J===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);J=d&&d[1]||""}return`
`+J+c}var ve=!1;function Se(c,d){if(!c||ve)return"";ve=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Ue){var j=Ue}Reflect.construct(c,[],d)}else{try{d.call()}catch(Ue){j=Ue}c.call(d.prototype)}else{try{throw Error()}catch(Ue){j=Ue}c()}}catch(Ue){if(Ue&&j&&typeof Ue.stack=="string"){for(var T=Ue.stack.split(`
`),M=j.stack.split(`
`),te=T.length-1,he=M.length-1;1<=te&&0<=he&&T[te]!==M[he];)he--;for(;1<=te&&0<=he;te--,he--)if(T[te]!==M[he]){if(te!==1||he!==1)do if(te--,he--,0>he||T[te]!==M[he]){var Ce=`
`+T[te].replace(" at new "," at ");return c.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",c.displayName)),Ce}while(1<=te&&0<=he);break}}}finally{ve=!1,Error.prepareStackTrace=x}return(c=c?c.displayName||c.name:"")?de(c):""}function Ve(c){switch(c.tag){case 5:return de(c.type);case 16:return de("Lazy");case 13:return de("Suspense");case 19:return de("SuspenseList");case 0:case 2:case 15:return c=Se(c.type,!1),c;case 11:return c=Se(c.type.render,!1),c;case 1:return c=Se(c.type,!0),c;default:return""}}function q(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case K:return"Fragment";case $e:return"Portal";case L:return"Profiler";case V:return"StrictMode";case re:return"Suspense";case He:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case se:return(c.displayName||"Context")+".Consumer";case y:return(c._context.displayName||"Context")+".Provider";case ee:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case ut:return d=c.displayName||null,d!==null?d:q(c.type)||"Memo";case it:d=c._payload,c=c._init;try{return q(c(d))}catch{}}return null}function o(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=d.render,c=c.displayName||c.name||"",d.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(d);case 8:return d===V?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function nt(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function rt(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Qe(c){var d=rt(c)?"checked":"value",x=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),j=""+c[d];if(!c.hasOwnProperty(d)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var T=x.get,M=x.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return T.call(this)},set:function(te){j=""+te,M.call(this,te)}}),Object.defineProperty(c,d,{enumerable:x.enumerable}),{getValue:function(){return j},setValue:function(te){j=""+te},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function Re(c){c._valueTracker||(c._valueTracker=Qe(c))}function Pt(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var x=d.getValue(),j="";return c&&(j=rt(c)?c.checked?"true":"false":c.value),c=j,c!==x?(d.setValue(c),!0):!1}function Et(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Tt(c,d){var x=d.checked;return ye({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??c._wrapperState.initialChecked})}function It(c,d){var x=d.defaultValue==null?"":d.defaultValue,j=d.checked!=null?d.checked:d.defaultChecked;x=nt(d.value!=null?d.value:x),c._wrapperState={initialChecked:j,initialValue:x,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function St(c,d){d=d.checked,d!=null&&U(c,"checked",d,!1)}function ft(c,d){St(c,d);var x=nt(d.value),j=d.type;if(x!=null)j==="number"?(x===0&&c.value===""||c.value!=x)&&(c.value=""+x):c.value!==""+x&&(c.value=""+x);else if(j==="submit"||j==="reset"){c.removeAttribute("value");return}d.hasOwnProperty("value")?Ae(c,d.type,x):d.hasOwnProperty("defaultValue")&&Ae(c,d.type,nt(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(c.defaultChecked=!!d.defaultChecked)}function ot(c,d,x){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var j=d.type;if(!(j!=="submit"&&j!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+c._wrapperState.initialValue,x||d===c.value||(c.value=d),c.defaultValue=d}x=c.name,x!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,x!==""&&(c.name=x)}function Ae(c,d,x){(d!=="number"||Et(c.ownerDocument)!==c)&&(x==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+x&&(c.defaultValue=""+x))}var Ye=Array.isArray;function ge(c,d,x,j){if(c=c.options,d){d={};for(var T=0;T<x.length;T++)d["$"+x[T]]=!0;for(x=0;x<c.length;x++)T=d.hasOwnProperty("$"+c[x].value),c[x].selected!==T&&(c[x].selected=T),T&&j&&(c[x].defaultSelected=!0)}else{for(x=""+nt(x),d=null,T=0;T<c.length;T++){if(c[T].value===x){c[T].selected=!0,j&&(c[T].defaultSelected=!0);return}d!==null||c[T].disabled||(d=c[T])}d!==null&&(d.selected=!0)}}function Le(c,d){if(d.dangerouslySetInnerHTML!=null)throw Error(s(91));return ye({},d,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Fe(c,d){var x=d.value;if(x==null){if(x=d.children,d=d.defaultValue,x!=null){if(d!=null)throw Error(s(92));if(Ye(x)){if(1<x.length)throw Error(s(93));x=x[0]}d=x}d==null&&(d=""),x=d}c._wrapperState={initialValue:nt(x)}}function et(c,d){var x=nt(d.value),j=nt(d.defaultValue);x!=null&&(x=""+x,x!==c.value&&(c.value=x),d.defaultValue==null&&c.defaultValue!==x&&(c.defaultValue=x)),j!=null&&(c.defaultValue=""+j)}function we(c){var d=c.textContent;d===c._wrapperState.initialValue&&d!==""&&d!==null&&(c.value=d)}function r(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function C(c,d){return c==null||c==="http://www.w3.org/1999/xhtml"?r(d):c==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var g,E=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,x,j,T){MSApp.execUnsafeLocalFunction(function(){return c(d,x,j,T)})}:c})(function(c,d){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=d;else{for(g=g||document.createElement("div"),g.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=g.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;d.firstChild;)c.appendChild(d.firstChild)}});function A(c,d){if(d){var x=c.firstChild;if(x&&x===c.lastChild&&x.nodeType===3){x.nodeValue=d;return}}c.textContent=d}var X={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ce=["Webkit","ms","Moz","O"];Object.keys(X).forEach(function(c){ce.forEach(function(d){d=d+c.charAt(0).toUpperCase()+c.substring(1),X[d]=X[c]})});function le(c,d,x){return d==null||typeof d=="boolean"||d===""?"":x||typeof d!="number"||d===0||X.hasOwnProperty(c)&&X[c]?(""+d).trim():d+"px"}function P(c,d){c=c.style;for(var x in d)if(d.hasOwnProperty(x)){var j=x.indexOf("--")===0,T=le(x,d[x],j);x==="float"&&(x="cssFloat"),j?c.setProperty(x,T):c[x]=T}}var B=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _(c,d){if(d){if(B[c]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(s(137,c));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(s(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(s(61))}if(d.style!=null&&typeof d.style!="object")throw Error(s(62))}}function b(c,d){if(c.indexOf("-")===-1)return typeof d.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w=null;function z(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var me=null,pe=null,je=null;function Be(c){if(c=Mc(c)){if(typeof me!="function")throw Error(s(280));var d=c.stateNode;d&&(d=zu(d),me(c.stateNode,c.type,d))}}function Ee(c){pe?je?je.push(c):je=[c]:pe=c}function xe(){if(pe){var c=pe,d=je;if(je=pe=null,Be(c),d)for(c=0;c<d.length;c++)Be(d[c])}}function dt(c,d){return c(d)}function ht(){}var Pe=!1;function _e(c,d,x){if(Pe)return c(d,x);Pe=!0;try{return dt(c,d,x)}finally{Pe=!1,(pe!==null||je!==null)&&(ht(),xe())}}function mt(c,d){var x=c.stateNode;if(x===null)return null;var j=zu(x);if(j===null)return null;x=j[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(c=c.type,j=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!j;break e;default:c=!1}if(c)return null;if(x&&typeof x!="function")throw Error(s(231,d,typeof x));return x}var Xe=!1;if(p)try{var gt={};Object.defineProperty(gt,"passive",{get:function(){Xe=!0}}),window.addEventListener("test",gt,gt),window.removeEventListener("test",gt,gt)}catch{Xe=!1}function st(c,d,x,j,T,M,te,he,Ce){var Ue=Array.prototype.slice.call(arguments,3);try{d.apply(x,Ue)}catch(ct){this.onError(ct)}}var Nt=!1,pt=null,Ja=!1,ps=null,_n={onError:function(c){Nt=!0,pt=c}};function hs(c,d,x,j,T,M,te,he,Ce){Nt=!1,pt=null,st.apply(_n,arguments)}function An(c,d,x,j,T,M,te,he,Ce){if(hs.apply(this,arguments),Nt){if(Nt){var Ue=pt;Nt=!1,pt=null}else throw Error(s(198));Ja||(Ja=!0,ps=Ue)}}function qa(c){var d=c,x=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(x=d.return),c=d.return;while(c)}return d.tag===3?x:null}function Za(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function es(c){if(qa(c)!==c)throw Error(s(188))}function tl(c){var d=c.alternate;if(!d){if(d=qa(c),d===null)throw Error(s(188));return d!==c?null:c}for(var x=c,j=d;;){var T=x.return;if(T===null)break;var M=T.alternate;if(M===null){if(j=T.return,j!==null){x=j;continue}break}if(T.child===M.child){for(M=T.child;M;){if(M===x)return es(T),c;if(M===j)return es(T),d;M=M.sibling}throw Error(s(188))}if(x.return!==j.return)x=T,j=M;else{for(var te=!1,he=T.child;he;){if(he===x){te=!0,x=T,j=M;break}if(he===j){te=!0,j=T,x=M;break}he=he.sibling}if(!te){for(he=M.child;he;){if(he===x){te=!0,x=M,j=T;break}if(he===j){te=!0,j=M,x=T;break}he=he.sibling}if(!te)throw Error(s(189))}}if(x.alternate!==j)throw Error(s(190))}if(x.tag!==3)throw Error(s(188));return x.stateNode.current===x?c:d}function ci(c){return c=tl(c),c!==null?mo(c):null}function mo(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var d=mo(c);if(d!==null)return d;c=c.sibling}return null}var cn=t.unstable_scheduleCallback,di=t.unstable_cancelCallback,rl=t.unstable_shouldYield,fc=t.unstable_requestPaint,Ur=t.unstable_now,uu=t.unstable_getCurrentPriorityLevel,ui=t.unstable_ImmediatePriority,po=t.unstable_UserBlockingPriority,Ps=t.unstable_NormalPriority,yc=t.unstable_LowPriority,mu=t.unstable_IdlePriority,mi=null,xs=null;function pu(c){if(xs&&typeof xs.onCommitFiberRoot=="function")try{xs.onCommitFiberRoot(mi,c,void 0,(c.current.flags&128)===128)}catch{}}var Ha=Math.clz32?Math.clz32:xu,vc=Math.log,hu=Math.LN2;function xu(c){return c>>>=0,c===0?32:31-(vc(c)/hu|0)|0}var al=64,sl=4194304;function ho(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function pi(c,d){var x=c.pendingLanes;if(x===0)return 0;var j=0,T=c.suspendedLanes,M=c.pingedLanes,te=x&268435455;if(te!==0){var he=te&~T;he!==0?j=ho(he):(M&=te,M!==0&&(j=ho(M)))}else te=x&~T,te!==0?j=ho(te):M!==0&&(j=ho(M));if(j===0)return 0;if(d!==0&&d!==j&&(d&T)===0&&(T=j&-j,M=d&-d,T>=M||T===16&&(M&4194240)!==0))return d;if((j&4)!==0&&(j|=x&16),d=c.entangledLanes,d!==0)for(c=c.entanglements,d&=j;0<d;)x=31-Ha(d),T=1<<x,j|=c[x],d&=~T;return j}function hp(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rn(c,d){for(var x=c.suspendedLanes,j=c.pingedLanes,T=c.expirationTimes,M=c.pendingLanes;0<M;){var te=31-Ha(M),he=1<<te,Ce=T[te];Ce===-1?((he&x)===0||(he&j)!==0)&&(T[te]=hp(he,d)):Ce<=d&&(c.expiredLanes|=he),M&=~he}}function gs(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function hi(){var c=al;return al<<=1,(al&4194240)===0&&(al=64),c}function xo(c){for(var d=[],x=0;31>x;x++)d.push(c);return d}function go(c,d,x){c.pendingLanes|=d,d!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,d=31-Ha(d),c[d]=x}function qr(c,d){var x=c.pendingLanes&~d;c.pendingLanes=d,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=d,c.mutableReadLanes&=d,c.entangledLanes&=d,d=c.entanglements;var j=c.eventTimes;for(c=c.expirationTimes;0<x;){var T=31-Ha(x),M=1<<T;d[T]=0,j[T]=-1,c[T]=-1,x&=~M}}function bo(c,d){var x=c.entangledLanes|=d;for(c=c.entanglements;x;){var j=31-Ha(x),T=1<<j;T&d|c[j]&d&&(c[j]|=d),x&=~T}}var Nr=0;function fo(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var gu,nl,bu,fu,yu,wc=!1,dn=[],Ca=null,qs=null,Hs=null,yo=new Map,Es=new Map,un=[],xp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vu(c,d){switch(c){case"focusin":case"focusout":Ca=null;break;case"dragenter":case"dragleave":qs=null;break;case"mouseover":case"mouseout":Hs=null;break;case"pointerover":case"pointerout":yo.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Es.delete(d.pointerId)}}function ts(c,d,x,j,T,M){return c===null||c.nativeEvent!==M?(c={blockedOn:d,domEventName:x,eventSystemFlags:j,nativeEvent:M,targetContainers:[T]},d!==null&&(d=Mc(d),d!==null&&nl(d)),c):(c.eventSystemFlags|=j,d=c.targetContainers,T!==null&&d.indexOf(T)===-1&&d.push(T),c)}function gp(c,d,x,j,T){switch(d){case"focusin":return Ca=ts(Ca,c,d,x,j,T),!0;case"dragenter":return qs=ts(qs,c,d,x,j,T),!0;case"mouseover":return Hs=ts(Hs,c,d,x,j,T),!0;case"pointerover":var M=T.pointerId;return yo.set(M,ts(yo.get(M)||null,c,d,x,j,T)),!0;case"gotpointercapture":return M=T.pointerId,Es.set(M,ts(Es.get(M)||null,c,d,x,j,T)),!0}return!1}function wu(c){var d=yi(c.target);if(d!==null){var x=qa(d);if(x!==null){if(d=x.tag,d===13){if(d=Za(x),d!==null){c.blockedOn=d,yu(c.priority,function(){bu(x)});return}}else if(d===3&&x.stateNode.current.memoizedState.isDehydrated){c.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Mn(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var x=ol(c.domEventName,c.eventSystemFlags,d[0],c.nativeEvent);if(x===null){x=c.nativeEvent;var j=new x.constructor(x.type,x);w=j,x.target.dispatchEvent(j),w=null}else return d=Mc(x),d!==null&&nl(d),c.blockedOn=x,!1;d.shift()}return!0}function xi(c,d,x){Mn(c)&&x.delete(d)}function ku(){wc=!1,Ca!==null&&Mn(Ca)&&(Ca=null),qs!==null&&Mn(qs)&&(qs=null),Hs!==null&&Mn(Hs)&&(Hs=null),yo.forEach(xi),Es.forEach(xi)}function Ws(c,d){c.blockedOn===d&&(c.blockedOn=null,wc||(wc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ku)))}function Gs(c){function d(T){return Ws(T,c)}if(0<dn.length){Ws(dn[0],c);for(var x=1;x<dn.length;x++){var j=dn[x];j.blockedOn===c&&(j.blockedOn=null)}}for(Ca!==null&&Ws(Ca,c),qs!==null&&Ws(qs,c),Hs!==null&&Ws(Hs,c),yo.forEach(d),Es.forEach(d),x=0;x<un.length;x++)j=un[x],j.blockedOn===c&&(j.blockedOn=null);for(;0<un.length&&(x=un[0],x.blockedOn===null);)wu(x),x.blockedOn===null&&un.shift()}var zn=ne.ReactCurrentBatchConfig,vo=!0;function Xr(c,d,x,j){var T=Nr,M=zn.transition;zn.transition=null;try{Nr=1,kc(c,d,x,j)}finally{Nr=T,zn.transition=M}}function bp(c,d,x,j){var T=Nr,M=zn.transition;zn.transition=null;try{Nr=4,kc(c,d,x,j)}finally{Nr=T,zn.transition=M}}function kc(c,d,x,j){if(vo){var T=ol(c,d,x,j);if(T===null)Tp(c,d,j,gi,x),vu(c,j);else if(gp(T,c,d,x,j))j.stopPropagation();else if(vu(c,j),d&4&&-1<xp.indexOf(c)){for(;T!==null;){var M=Mc(T);if(M!==null&&gu(M),M=ol(c,d,x,j),M===null&&Tp(c,d,j,gi,x),M===T)break;T=M}T!==null&&j.stopPropagation()}else Tp(c,d,j,null,x)}}var gi=null;function ol(c,d,x,j){if(gi=null,c=z(j),c=yi(c),c!==null)if(d=qa(c),d===null)c=null;else if(x=d.tag,x===13){if(c=Za(d),c!==null)return c;c=null}else if(x===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null);return gi=c,null}function Nc(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uu()){case ui:return 1;case po:return 4;case Ps:case yc:return 16;case mu:return 536870912;default:return 16}default:return 16}}var bs=null,il=null,rs=null;function jc(){if(rs)return rs;var c,d=il,x=d.length,j,T="value"in bs?bs.value:bs.textContent,M=T.length;for(c=0;c<x&&d[c]===T[c];c++);var te=x-c;for(j=1;j<=te&&d[x-j]===T[M-j];j++);return rs=T.slice(c,1<j?1-j:void 0)}function ll(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function mn(){return!0}function Cc(){return!1}function Sa(c){function d(x,j,T,M,te){this._reactName=x,this._targetInst=T,this.type=j,this.nativeEvent=M,this.target=te,this.currentTarget=null;for(var he in c)c.hasOwnProperty(he)&&(x=c[he],this[he]=x?x(M):M[he]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?mn:Cc,this.isPropagationStopped=Cc,this}return ye(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=mn)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=mn)},persist:function(){},isPersistent:mn}),d}var Ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cl=Sa(Ks),pn=ye({},Ks,{view:0,detail:0}),fp=Sa(pn),dl,Bn,wo,bi=ye({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hn,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==wo&&(wo&&c.type==="mousemove"?(dl=c.screenX-wo.screenX,Bn=c.screenY-wo.screenY):Bn=dl=0,wo=c),dl)},movementY:function(c){return"movementY"in c?c.movementY:Bn}}),ul=Sa(bi),Sc=ye({},bi,{dataTransfer:0}),Nu=Sa(Sc),ml=ye({},pn,{relatedTarget:0}),pl=Sa(ml),ju=ye({},Ks,{animationName:0,elapsedTime:0,pseudoElement:0}),Ln=Sa(ju),Cu=ye({},Ks,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Su=Sa(Cu),$u=ye({},Ks,{data:0}),$c=Sa($u),hl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pu(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=Tu[c])?!!d[c]:!1}function hn(){return Pu}var f=ye({},pn,{key:function(c){if(c.key){var d=hl[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=ll(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Wa[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hn,charCode:function(c){return c.type==="keypress"?ll(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?ll(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),R=Sa(f),Q=ye({},bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ie=Sa(Q),Me=ye({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hn}),Ke=Sa(Me),jt=ye({},Ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),Br=Sa(jt),xa=ye({},bi,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),jr=Sa(xa),ya=[9,13,27,32],ua=p&&"CompositionEvent"in window,Is=null;p&&"documentMode"in document&&(Is=document.documentMode);var fs=p&&"TextEvent"in window&&!Is,fi=p&&(!ua||Is&&8<Is&&11>=Is),xl=" ",gf=!1;function bf(c,d){switch(c){case"keyup":return ya.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ff(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var gl=!1;function I6(c,d){switch(c){case"compositionend":return ff(d);case"keypress":return d.which!==32?null:(gf=!0,xl);case"textInput":return c=d.data,c===xl&&gf?null:c;default:return null}}function D6(c,d){if(gl)return c==="compositionend"||!ua&&bf(c,d)?(c=jc(),rs=il=bs=null,gl=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return fi&&d.locale!=="ko"?null:d.data;default:return null}}var _6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yf(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!_6[c.type]:d==="textarea"}function vf(c,d,x,j){Ee(j),d=Au(d,"onChange"),0<d.length&&(x=new cl("onChange","change",null,x,j),c.push({event:x,listeners:d}))}var Tc=null,Pc=null;function A6(c){Bf(c,0)}function Eu(c){var d=wl(c);if(Pt(d))return c}function R6(c,d){if(c==="change")return d}var wf=!1;if(p){var yp;if(p){var vp="oninput"in document;if(!vp){var kf=document.createElement("div");kf.setAttribute("oninput","return;"),vp=typeof kf.oninput=="function"}yp=vp}else yp=!1;wf=yp&&(!document.documentMode||9<document.documentMode)}function Nf(){Tc&&(Tc.detachEvent("onpropertychange",jf),Pc=Tc=null)}function jf(c){if(c.propertyName==="value"&&Eu(Pc)){var d=[];vf(d,Pc,c,z(c)),_e(A6,d)}}function M6(c,d,x){c==="focusin"?(Nf(),Tc=d,Pc=x,Tc.attachEvent("onpropertychange",jf)):c==="focusout"&&Nf()}function z6(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Eu(Pc)}function B6(c,d){if(c==="click")return Eu(d)}function L6(c,d){if(c==="input"||c==="change")return Eu(d)}function O6(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var Qs=typeof Object.is=="function"?Object.is:O6;function Ec(c,d){if(Qs(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var x=Object.keys(c),j=Object.keys(d);if(x.length!==j.length)return!1;for(j=0;j<x.length;j++){var T=x[j];if(!h.call(d,T)||!Qs(c[T],d[T]))return!1}return!0}function Cf(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Sf(c,d){var x=Cf(c);c=0;for(var j;x;){if(x.nodeType===3){if(j=c+x.textContent.length,c<=d&&j>=d)return{node:x,offset:d-c};c=j}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Cf(x)}}function $f(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?$f(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function Tf(){for(var c=window,d=Et();d instanceof c.HTMLIFrameElement;){try{var x=typeof d.contentWindow.location.href=="string"}catch{x=!1}if(x)c=d.contentWindow;else break;d=Et(c.document)}return d}function wp(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}function V6(c){var d=Tf(),x=c.focusedElem,j=c.selectionRange;if(d!==x&&x&&x.ownerDocument&&$f(x.ownerDocument.documentElement,x)){if(j!==null&&wp(x)){if(d=j.start,c=j.end,c===void 0&&(c=d),"selectionStart"in x)x.selectionStart=d,x.selectionEnd=Math.min(c,x.value.length);else if(c=(d=x.ownerDocument||document)&&d.defaultView||window,c.getSelection){c=c.getSelection();var T=x.textContent.length,M=Math.min(j.start,T);j=j.end===void 0?M:Math.min(j.end,T),!c.extend&&M>j&&(T=j,j=M,M=T),T=Sf(x,M);var te=Sf(x,j);T&&te&&(c.rangeCount!==1||c.anchorNode!==T.node||c.anchorOffset!==T.offset||c.focusNode!==te.node||c.focusOffset!==te.offset)&&(d=d.createRange(),d.setStart(T.node,T.offset),c.removeAllRanges(),M>j?(c.addRange(d),c.extend(te.node,te.offset)):(d.setEnd(te.node,te.offset),c.addRange(d)))}}for(d=[],c=x;c=c.parentNode;)c.nodeType===1&&d.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<d.length;x++)c=d[x],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var F6=p&&"documentMode"in document&&11>=document.documentMode,bl=null,kp=null,Ic=null,Np=!1;function Pf(c,d,x){var j=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Np||bl==null||bl!==Et(j)||(j=bl,"selectionStart"in j&&wp(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),Ic&&Ec(Ic,j)||(Ic=j,j=Au(kp,"onSelect"),0<j.length&&(d=new cl("onSelect","select",null,d,x),c.push({event:d,listeners:j}),d.target=bl)))}function Iu(c,d){var x={};return x[c.toLowerCase()]=d.toLowerCase(),x["Webkit"+c]="webkit"+d,x["Moz"+c]="moz"+d,x}var fl={animationend:Iu("Animation","AnimationEnd"),animationiteration:Iu("Animation","AnimationIteration"),animationstart:Iu("Animation","AnimationStart"),transitionend:Iu("Transition","TransitionEnd")},jp={},Ef={};p&&(Ef=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function Du(c){if(jp[c])return jp[c];if(!fl[c])return c;var d=fl[c],x;for(x in d)if(d.hasOwnProperty(x)&&x in Ef)return jp[c]=d[x];return c}var If=Du("animationend"),Df=Du("animationiteration"),_f=Du("animationstart"),Af=Du("transitionend"),Rf=new Map,Mf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ko(c,d){Rf.set(c,d),u(d,[c])}for(var Cp=0;Cp<Mf.length;Cp++){var Sp=Mf[Cp],U6=Sp.toLowerCase(),q6=Sp[0].toUpperCase()+Sp.slice(1);ko(U6,"on"+q6)}ko(If,"onAnimationEnd"),ko(Df,"onAnimationIteration"),ko(_f,"onAnimationStart"),ko("dblclick","onDoubleClick"),ko("focusin","onFocus"),ko("focusout","onBlur"),ko(Af,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dc));function zf(c,d,x){var j=c.type||"unknown-event";c.currentTarget=x,An(j,d,void 0,c),c.currentTarget=null}function Bf(c,d){d=(d&4)!==0;for(var x=0;x<c.length;x++){var j=c[x],T=j.event;j=j.listeners;e:{var M=void 0;if(d)for(var te=j.length-1;0<=te;te--){var he=j[te],Ce=he.instance,Ue=he.currentTarget;if(he=he.listener,Ce!==M&&T.isPropagationStopped())break e;zf(T,he,Ue),M=Ce}else for(te=0;te<j.length;te++){if(he=j[te],Ce=he.instance,Ue=he.currentTarget,he=he.listener,Ce!==M&&T.isPropagationStopped())break e;zf(T,he,Ue),M=Ce}}}if(Ja)throw c=ps,Ja=!1,ps=null,c}function Qr(c,d){var x=d[Ap];x===void 0&&(x=d[Ap]=new Set);var j=c+"__bubble";x.has(j)||(Lf(d,c,2,!1),x.add(j))}function $p(c,d,x){var j=0;d&&(j|=4),Lf(x,c,j,d)}var _u="_reactListening"+Math.random().toString(36).slice(2);function _c(c){if(!c[_u]){c[_u]=!0,n.forEach(function(x){x!=="selectionchange"&&(H6.has(x)||$p(x,!1,c),$p(x,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[_u]||(d[_u]=!0,$p("selectionchange",!1,d))}}function Lf(c,d,x,j){switch(Nc(d)){case 1:var T=Xr;break;case 4:T=bp;break;default:T=kc}x=T.bind(null,d,x,c),T=void 0,!Xe||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(T=!0),j?T!==void 0?c.addEventListener(d,x,{capture:!0,passive:T}):c.addEventListener(d,x,!0):T!==void 0?c.addEventListener(d,x,{passive:T}):c.addEventListener(d,x,!1)}function Tp(c,d,x,j,T){var M=j;if((d&1)===0&&(d&2)===0&&j!==null)e:for(;;){if(j===null)return;var te=j.tag;if(te===3||te===4){var he=j.stateNode.containerInfo;if(he===T||he.nodeType===8&&he.parentNode===T)break;if(te===4)for(te=j.return;te!==null;){var Ce=te.tag;if((Ce===3||Ce===4)&&(Ce=te.stateNode.containerInfo,Ce===T||Ce.nodeType===8&&Ce.parentNode===T))return;te=te.return}for(;he!==null;){if(te=yi(he),te===null)return;if(Ce=te.tag,Ce===5||Ce===6){j=M=te;continue e}he=he.parentNode}}j=j.return}_e(function(){var Ue=M,ct=z(x),xt=[];e:{var lt=Rf.get(c);if(lt!==void 0){var At=cl,Lt=c;switch(c){case"keypress":if(ll(x)===0)break e;case"keydown":case"keyup":At=R;break;case"focusin":Lt="focus",At=pl;break;case"focusout":Lt="blur",At=pl;break;case"beforeblur":case"afterblur":At=pl;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":At=ul;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":At=Nu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":At=Ke;break;case If:case Df:case _f:At=Ln;break;case Af:At=Br;break;case"scroll":At=fp;break;case"wheel":At=jr;break;case"copy":case"cut":case"paste":At=Su;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":At=ie}var Vt=(d&4)!==0,ia=!Vt&&c==="scroll",ze=Vt?lt!==null?lt+"Capture":null:lt;Vt=[];for(var Ie=Ue,Oe;Ie!==null;){Oe=Ie;var yt=Oe.stateNode;if(Oe.tag===5&&yt!==null&&(Oe=yt,ze!==null&&(yt=mt(Ie,ze),yt!=null&&Vt.push(Ac(Ie,yt,Oe)))),ia)break;Ie=Ie.return}0<Vt.length&&(lt=new At(lt,Lt,null,x,ct),xt.push({event:lt,listeners:Vt}))}}if((d&7)===0){e:{if(lt=c==="mouseover"||c==="pointerover",At=c==="mouseout"||c==="pointerout",lt&&x!==w&&(Lt=x.relatedTarget||x.fromElement)&&(yi(Lt)||Lt[On]))break e;if((At||lt)&&(lt=ct.window===ct?ct:(lt=ct.ownerDocument)?lt.defaultView||lt.parentWindow:window,At?(Lt=x.relatedTarget||x.toElement,At=Ue,Lt=Lt?yi(Lt):null,Lt!==null&&(ia=qa(Lt),Lt!==ia||Lt.tag!==5&&Lt.tag!==6)&&(Lt=null)):(At=null,Lt=Ue),At!==Lt)){if(Vt=ul,yt="onMouseLeave",ze="onMouseEnter",Ie="mouse",(c==="pointerout"||c==="pointerover")&&(Vt=ie,yt="onPointerLeave",ze="onPointerEnter",Ie="pointer"),ia=At==null?lt:wl(At),Oe=Lt==null?lt:wl(Lt),lt=new Vt(yt,Ie+"leave",At,x,ct),lt.target=ia,lt.relatedTarget=Oe,yt=null,yi(ct)===Ue&&(Vt=new Vt(ze,Ie+"enter",Lt,x,ct),Vt.target=Oe,Vt.relatedTarget=ia,yt=Vt),ia=yt,At&&Lt)t:{for(Vt=At,ze=Lt,Ie=0,Oe=Vt;Oe;Oe=yl(Oe))Ie++;for(Oe=0,yt=ze;yt;yt=yl(yt))Oe++;for(;0<Ie-Oe;)Vt=yl(Vt),Ie--;for(;0<Oe-Ie;)ze=yl(ze),Oe--;for(;Ie--;){if(Vt===ze||ze!==null&&Vt===ze.alternate)break t;Vt=yl(Vt),ze=yl(ze)}Vt=null}else Vt=null;At!==null&&Of(xt,lt,At,Vt,!1),Lt!==null&&ia!==null&&Of(xt,ia,Lt,Vt,!0)}}e:{if(lt=Ue?wl(Ue):window,At=lt.nodeName&&lt.nodeName.toLowerCase(),At==="select"||At==="input"&&lt.type==="file")var Ht=R6;else if(yf(lt))if(wf)Ht=L6;else{Ht=z6;var tr=M6}else(At=lt.nodeName)&&At.toLowerCase()==="input"&&(lt.type==="checkbox"||lt.type==="radio")&&(Ht=B6);if(Ht&&(Ht=Ht(c,Ue))){vf(xt,Ht,x,ct);break e}tr&&tr(c,lt,Ue),c==="focusout"&&(tr=lt._wrapperState)&&tr.controlled&&lt.type==="number"&&Ae(lt,"number",lt.value)}switch(tr=Ue?wl(Ue):window,c){case"focusin":(yf(tr)||tr.contentEditable==="true")&&(bl=tr,kp=Ue,Ic=null);break;case"focusout":Ic=kp=bl=null;break;case"mousedown":Np=!0;break;case"contextmenu":case"mouseup":case"dragend":Np=!1,Pf(xt,x,ct);break;case"selectionchange":if(F6)break;case"keydown":case"keyup":Pf(xt,x,ct)}var rr;if(ua)e:{switch(c){case"compositionstart":var ir="onCompositionStart";break e;case"compositionend":ir="onCompositionEnd";break e;case"compositionupdate":ir="onCompositionUpdate";break e}ir=void 0}else gl?bf(c,x)&&(ir="onCompositionEnd"):c==="keydown"&&x.keyCode===229&&(ir="onCompositionStart");ir&&(fi&&x.locale!=="ko"&&(gl||ir!=="onCompositionStart"?ir==="onCompositionEnd"&&gl&&(rr=jc()):(bs=ct,il="value"in bs?bs.value:bs.textContent,gl=!0)),tr=Au(Ue,ir),0<tr.length&&(ir=new $c(ir,c,null,x,ct),xt.push({event:ir,listeners:tr}),rr?ir.data=rr:(rr=ff(x),rr!==null&&(ir.data=rr)))),(rr=fs?I6(c,x):D6(c,x))&&(Ue=Au(Ue,"onBeforeInput"),0<Ue.length&&(ct=new $c("onBeforeInput","beforeinput",null,x,ct),xt.push({event:ct,listeners:Ue}),ct.data=rr))}Bf(xt,d)})}function Ac(c,d,x){return{instance:c,listener:d,currentTarget:x}}function Au(c,d){for(var x=d+"Capture",j=[];c!==null;){var T=c,M=T.stateNode;T.tag===5&&M!==null&&(T=M,M=mt(c,x),M!=null&&j.unshift(Ac(c,M,T)),M=mt(c,d),M!=null&&j.push(Ac(c,M,T))),c=c.return}return j}function yl(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function Of(c,d,x,j,T){for(var M=d._reactName,te=[];x!==null&&x!==j;){var he=x,Ce=he.alternate,Ue=he.stateNode;if(Ce!==null&&Ce===j)break;he.tag===5&&Ue!==null&&(he=Ue,T?(Ce=mt(x,M),Ce!=null&&te.unshift(Ac(x,Ce,he))):T||(Ce=mt(x,M),Ce!=null&&te.push(Ac(x,Ce,he)))),x=x.return}te.length!==0&&c.push({event:d,listeners:te})}var W6=/\r\n?/g,G6=/\u0000|\uFFFD/g;function Vf(c){return(typeof c=="string"?c:""+c).replace(W6,`
`).replace(G6,"")}function Ru(c,d,x){if(d=Vf(d),Vf(c)!==d&&x)throw Error(s(425))}function Mu(){}var Pp=null,Ep=null;function Ip(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Dp=typeof setTimeout=="function"?setTimeout:void 0,K6=typeof clearTimeout=="function"?clearTimeout:void 0,Ff=typeof Promise=="function"?Promise:void 0,Q6=typeof queueMicrotask=="function"?queueMicrotask:typeof Ff<"u"?function(c){return Ff.resolve(null).then(c).catch(Y6)}:Dp;function Y6(c){setTimeout(function(){throw c})}function _p(c,d){var x=d,j=0;do{var T=x.nextSibling;if(c.removeChild(x),T&&T.nodeType===8)if(x=T.data,x==="/$"){if(j===0){c.removeChild(T),Gs(d);return}j--}else x!=="$"&&x!=="$?"&&x!=="$!"||j++;x=T}while(x);Gs(d)}function No(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return c}function Uf(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var x=c.data;if(x==="$"||x==="$!"||x==="$?"){if(d===0)return c;d--}else x==="/$"&&d++}c=c.previousSibling}return null}var vl=Math.random().toString(36).slice(2),xn="__reactFiber$"+vl,Rc="__reactProps$"+vl,On="__reactContainer$"+vl,Ap="__reactEvents$"+vl,X6="__reactListeners$"+vl,J6="__reactHandles$"+vl;function yi(c){var d=c[xn];if(d)return d;for(var x=c.parentNode;x;){if(d=x[On]||x[xn]){if(x=d.alternate,d.child!==null||x!==null&&x.child!==null)for(c=Uf(c);c!==null;){if(x=c[xn])return x;c=Uf(c)}return d}c=x,x=c.parentNode}return null}function Mc(c){return c=c[xn]||c[On],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function wl(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(s(33))}function zu(c){return c[Rc]||null}var Rp=[],kl=-1;function jo(c){return{current:c}}function Yr(c){0>kl||(c.current=Rp[kl],Rp[kl]=null,kl--)}function Gr(c,d){kl++,Rp[kl]=c.current,c.current=d}var Co={},Ra=jo(Co),as=jo(!1),vi=Co;function Nl(c,d){var x=c.type.contextTypes;if(!x)return Co;var j=c.stateNode;if(j&&j.__reactInternalMemoizedUnmaskedChildContext===d)return j.__reactInternalMemoizedMaskedChildContext;var T={},M;for(M in x)T[M]=d[M];return j&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=T),T}function ss(c){return c=c.childContextTypes,c!=null}function Bu(){Yr(as),Yr(Ra)}function qf(c,d,x){if(Ra.current!==Co)throw Error(s(168));Gr(Ra,d),Gr(as,x)}function Hf(c,d,x){var j=c.stateNode;if(d=d.childContextTypes,typeof j.getChildContext!="function")return x;j=j.getChildContext();for(var T in j)if(!(T in d))throw Error(s(108,o(c)||"Unknown",T));return ye({},x,j)}function Lu(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Co,vi=Ra.current,Gr(Ra,c),Gr(as,as.current),!0}function Wf(c,d,x){var j=c.stateNode;if(!j)throw Error(s(169));x?(c=Hf(c,d,vi),j.__reactInternalMemoizedMergedChildContext=c,Yr(as),Yr(Ra),Gr(Ra,c)):Yr(as),Gr(as,x)}var Vn=null,Ou=!1,Mp=!1;function Gf(c){Vn===null?Vn=[c]:Vn.push(c)}function Z6(c){Ou=!0,Gf(c)}function So(){if(!Mp&&Vn!==null){Mp=!0;var c=0,d=Nr;try{var x=Vn;for(Nr=1;c<x.length;c++){var j=x[c];do j=j(!0);while(j!==null)}Vn=null,Ou=!1}catch(T){throw Vn!==null&&(Vn=Vn.slice(c+1)),cn(ui,So),T}finally{Nr=d,Mp=!1}}return null}var jl=[],Cl=0,Vu=null,Fu=0,Ds=[],_s=0,wi=null,Fn=1,Un="";function ki(c,d){jl[Cl++]=Fu,jl[Cl++]=Vu,Vu=c,Fu=d}function Kf(c,d,x){Ds[_s++]=Fn,Ds[_s++]=Un,Ds[_s++]=wi,wi=c;var j=Fn;c=Un;var T=32-Ha(j)-1;j&=~(1<<T),x+=1;var M=32-Ha(d)+T;if(30<M){var te=T-T%5;M=(j&(1<<te)-1).toString(32),j>>=te,T-=te,Fn=1<<32-Ha(d)+T|x<<T|j,Un=M+c}else Fn=1<<M|x<<T|j,Un=c}function zp(c){c.return!==null&&(ki(c,1),Kf(c,1,0))}function Bp(c){for(;c===Vu;)Vu=jl[--Cl],jl[Cl]=null,Fu=jl[--Cl],jl[Cl]=null;for(;c===wi;)wi=Ds[--_s],Ds[_s]=null,Un=Ds[--_s],Ds[_s]=null,Fn=Ds[--_s],Ds[_s]=null}var ys=null,vs=null,Jr=!1,Ys=null;function Qf(c,d){var x=zs(5,null,null,0);x.elementType="DELETED",x.stateNode=d,x.return=c,d=c.deletions,d===null?(c.deletions=[x],c.flags|=16):d.push(x)}function Yf(c,d){switch(c.tag){case 5:var x=c.type;return d=d.nodeType!==1||x.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(c.stateNode=d,ys=c,vs=No(d.firstChild),!0):!1;case 6:return d=c.pendingProps===""||d.nodeType!==3?null:d,d!==null?(c.stateNode=d,ys=c,vs=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(x=wi!==null?{id:Fn,overflow:Un}:null,c.memoizedState={dehydrated:d,treeContext:x,retryLane:1073741824},x=zs(18,null,null,0),x.stateNode=d,x.return=c,c.child=x,ys=c,vs=null,!0):!1;default:return!1}}function Lp(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Op(c){if(Jr){var d=vs;if(d){var x=d;if(!Yf(c,d)){if(Lp(c))throw Error(s(418));d=No(x.nextSibling);var j=ys;d&&Yf(c,d)?Qf(j,x):(c.flags=c.flags&-4097|2,Jr=!1,ys=c)}}else{if(Lp(c))throw Error(s(418));c.flags=c.flags&-4097|2,Jr=!1,ys=c}}}function Xf(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;ys=c}function Uu(c){if(c!==ys)return!1;if(!Jr)return Xf(c),Jr=!0,!1;var d;if((d=c.tag!==3)&&!(d=c.tag!==5)&&(d=c.type,d=d!=="head"&&d!=="body"&&!Ip(c.type,c.memoizedProps)),d&&(d=vs)){if(Lp(c))throw Jf(),Error(s(418));for(;d;)Qf(c,d),d=No(d.nextSibling)}if(Xf(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8){var x=c.data;if(x==="/$"){if(d===0){vs=No(c.nextSibling);break e}d--}else x!=="$"&&x!=="$!"&&x!=="$?"||d++}c=c.nextSibling}vs=null}}else vs=ys?No(c.stateNode.nextSibling):null;return!0}function Jf(){for(var c=vs;c;)c=No(c.nextSibling)}function Sl(){vs=ys=null,Jr=!1}function Vp(c){Ys===null?Ys=[c]:Ys.push(c)}var eS=ne.ReactCurrentBatchConfig;function zc(c,d,x){if(c=x.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(s(309));var j=x.stateNode}if(!j)throw Error(s(147,c));var T=j,M=""+c;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===M?d.ref:(d=function(te){var he=T.refs;te===null?delete he[M]:he[M]=te},d._stringRef=M,d)}if(typeof c!="string")throw Error(s(284));if(!x._owner)throw Error(s(290,c))}return c}function qu(c,d){throw c=Object.prototype.toString.call(d),Error(s(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c))}function Zf(c){var d=c._init;return d(c._payload)}function ey(c){function d(ze,Ie){if(c){var Oe=ze.deletions;Oe===null?(ze.deletions=[Ie],ze.flags|=16):Oe.push(Ie)}}function x(ze,Ie){if(!c)return null;for(;Ie!==null;)d(ze,Ie),Ie=Ie.sibling;return null}function j(ze,Ie){for(ze=new Map;Ie!==null;)Ie.key!==null?ze.set(Ie.key,Ie):ze.set(Ie.index,Ie),Ie=Ie.sibling;return ze}function T(ze,Ie){return ze=Ao(ze,Ie),ze.index=0,ze.sibling=null,ze}function M(ze,Ie,Oe){return ze.index=Oe,c?(Oe=ze.alternate,Oe!==null?(Oe=Oe.index,Oe<Ie?(ze.flags|=2,Ie):Oe):(ze.flags|=2,Ie)):(ze.flags|=1048576,Ie)}function te(ze){return c&&ze.alternate===null&&(ze.flags|=2),ze}function he(ze,Ie,Oe,yt){return Ie===null||Ie.tag!==6?(Ie=Dh(Oe,ze.mode,yt),Ie.return=ze,Ie):(Ie=T(Ie,Oe),Ie.return=ze,Ie)}function Ce(ze,Ie,Oe,yt){var Ht=Oe.type;return Ht===K?ct(ze,Ie,Oe.props.children,yt,Oe.key):Ie!==null&&(Ie.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===it&&Zf(Ht)===Ie.type)?(yt=T(Ie,Oe.props),yt.ref=zc(ze,Ie,Oe),yt.return=ze,yt):(yt=h0(Oe.type,Oe.key,Oe.props,null,ze.mode,yt),yt.ref=zc(ze,Ie,Oe),yt.return=ze,yt)}function Ue(ze,Ie,Oe,yt){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==Oe.containerInfo||Ie.stateNode.implementation!==Oe.implementation?(Ie=_h(Oe,ze.mode,yt),Ie.return=ze,Ie):(Ie=T(Ie,Oe.children||[]),Ie.return=ze,Ie)}function ct(ze,Ie,Oe,yt,Ht){return Ie===null||Ie.tag!==7?(Ie=Ei(Oe,ze.mode,yt,Ht),Ie.return=ze,Ie):(Ie=T(Ie,Oe),Ie.return=ze,Ie)}function xt(ze,Ie,Oe){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return Ie=Dh(""+Ie,ze.mode,Oe),Ie.return=ze,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case oe:return Oe=h0(Ie.type,Ie.key,Ie.props,null,ze.mode,Oe),Oe.ref=zc(ze,null,Ie),Oe.return=ze,Oe;case $e:return Ie=_h(Ie,ze.mode,Oe),Ie.return=ze,Ie;case it:var yt=Ie._init;return xt(ze,yt(Ie._payload),Oe)}if(Ye(Ie)||Ne(Ie))return Ie=Ei(Ie,ze.mode,Oe,null),Ie.return=ze,Ie;qu(ze,Ie)}return null}function lt(ze,Ie,Oe,yt){var Ht=Ie!==null?Ie.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return Ht!==null?null:he(ze,Ie,""+Oe,yt);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case oe:return Oe.key===Ht?Ce(ze,Ie,Oe,yt):null;case $e:return Oe.key===Ht?Ue(ze,Ie,Oe,yt):null;case it:return Ht=Oe._init,lt(ze,Ie,Ht(Oe._payload),yt)}if(Ye(Oe)||Ne(Oe))return Ht!==null?null:ct(ze,Ie,Oe,yt,null);qu(ze,Oe)}return null}function At(ze,Ie,Oe,yt,Ht){if(typeof yt=="string"&&yt!==""||typeof yt=="number")return ze=ze.get(Oe)||null,he(Ie,ze,""+yt,Ht);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case oe:return ze=ze.get(yt.key===null?Oe:yt.key)||null,Ce(Ie,ze,yt,Ht);case $e:return ze=ze.get(yt.key===null?Oe:yt.key)||null,Ue(Ie,ze,yt,Ht);case it:var tr=yt._init;return At(ze,Ie,Oe,tr(yt._payload),Ht)}if(Ye(yt)||Ne(yt))return ze=ze.get(Oe)||null,ct(Ie,ze,yt,Ht,null);qu(Ie,yt)}return null}function Lt(ze,Ie,Oe,yt){for(var Ht=null,tr=null,rr=Ie,ir=Ie=0,ka=null;rr!==null&&ir<Oe.length;ir++){rr.index>ir?(ka=rr,rr=null):ka=rr.sibling;var _r=lt(ze,rr,Oe[ir],yt);if(_r===null){rr===null&&(rr=ka);break}c&&rr&&_r.alternate===null&&d(ze,rr),Ie=M(_r,Ie,ir),tr===null?Ht=_r:tr.sibling=_r,tr=_r,rr=ka}if(ir===Oe.length)return x(ze,rr),Jr&&ki(ze,ir),Ht;if(rr===null){for(;ir<Oe.length;ir++)rr=xt(ze,Oe[ir],yt),rr!==null&&(Ie=M(rr,Ie,ir),tr===null?Ht=rr:tr.sibling=rr,tr=rr);return Jr&&ki(ze,ir),Ht}for(rr=j(ze,rr);ir<Oe.length;ir++)ka=At(rr,ze,ir,Oe[ir],yt),ka!==null&&(c&&ka.alternate!==null&&rr.delete(ka.key===null?ir:ka.key),Ie=M(ka,Ie,ir),tr===null?Ht=ka:tr.sibling=ka,tr=ka);return c&&rr.forEach(function(Ro){return d(ze,Ro)}),Jr&&ki(ze,ir),Ht}function Vt(ze,Ie,Oe,yt){var Ht=Ne(Oe);if(typeof Ht!="function")throw Error(s(150));if(Oe=Ht.call(Oe),Oe==null)throw Error(s(151));for(var tr=Ht=null,rr=Ie,ir=Ie=0,ka=null,_r=Oe.next();rr!==null&&!_r.done;ir++,_r=Oe.next()){rr.index>ir?(ka=rr,rr=null):ka=rr.sibling;var Ro=lt(ze,rr,_r.value,yt);if(Ro===null){rr===null&&(rr=ka);break}c&&rr&&Ro.alternate===null&&d(ze,rr),Ie=M(Ro,Ie,ir),tr===null?Ht=Ro:tr.sibling=Ro,tr=Ro,rr=ka}if(_r.done)return x(ze,rr),Jr&&ki(ze,ir),Ht;if(rr===null){for(;!_r.done;ir++,_r=Oe.next())_r=xt(ze,_r.value,yt),_r!==null&&(Ie=M(_r,Ie,ir),tr===null?Ht=_r:tr.sibling=_r,tr=_r);return Jr&&ki(ze,ir),Ht}for(rr=j(ze,rr);!_r.done;ir++,_r=Oe.next())_r=At(rr,ze,ir,_r.value,yt),_r!==null&&(c&&_r.alternate!==null&&rr.delete(_r.key===null?ir:_r.key),Ie=M(_r,Ie,ir),tr===null?Ht=_r:tr.sibling=_r,tr=_r);return c&&rr.forEach(function(_S){return d(ze,_S)}),Jr&&ki(ze,ir),Ht}function ia(ze,Ie,Oe,yt){if(typeof Oe=="object"&&Oe!==null&&Oe.type===K&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case oe:e:{for(var Ht=Oe.key,tr=Ie;tr!==null;){if(tr.key===Ht){if(Ht=Oe.type,Ht===K){if(tr.tag===7){x(ze,tr.sibling),Ie=T(tr,Oe.props.children),Ie.return=ze,ze=Ie;break e}}else if(tr.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===it&&Zf(Ht)===tr.type){x(ze,tr.sibling),Ie=T(tr,Oe.props),Ie.ref=zc(ze,tr,Oe),Ie.return=ze,ze=Ie;break e}x(ze,tr);break}else d(ze,tr);tr=tr.sibling}Oe.type===K?(Ie=Ei(Oe.props.children,ze.mode,yt,Oe.key),Ie.return=ze,ze=Ie):(yt=h0(Oe.type,Oe.key,Oe.props,null,ze.mode,yt),yt.ref=zc(ze,Ie,Oe),yt.return=ze,ze=yt)}return te(ze);case $e:e:{for(tr=Oe.key;Ie!==null;){if(Ie.key===tr)if(Ie.tag===4&&Ie.stateNode.containerInfo===Oe.containerInfo&&Ie.stateNode.implementation===Oe.implementation){x(ze,Ie.sibling),Ie=T(Ie,Oe.children||[]),Ie.return=ze,ze=Ie;break e}else{x(ze,Ie);break}else d(ze,Ie);Ie=Ie.sibling}Ie=_h(Oe,ze.mode,yt),Ie.return=ze,ze=Ie}return te(ze);case it:return tr=Oe._init,ia(ze,Ie,tr(Oe._payload),yt)}if(Ye(Oe))return Lt(ze,Ie,Oe,yt);if(Ne(Oe))return Vt(ze,Ie,Oe,yt);qu(ze,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"?(Oe=""+Oe,Ie!==null&&Ie.tag===6?(x(ze,Ie.sibling),Ie=T(Ie,Oe),Ie.return=ze,ze=Ie):(x(ze,Ie),Ie=Dh(Oe,ze.mode,yt),Ie.return=ze,ze=Ie),te(ze)):x(ze,Ie)}return ia}var $l=ey(!0),ty=ey(!1),Hu=jo(null),Wu=null,Tl=null,Fp=null;function Up(){Fp=Tl=Wu=null}function qp(c){var d=Hu.current;Yr(Hu),c._currentValue=d}function Hp(c,d,x){for(;c!==null;){var j=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,j!==null&&(j.childLanes|=d)):j!==null&&(j.childLanes&d)!==d&&(j.childLanes|=d),c===x)break;c=c.return}}function Pl(c,d){Wu=c,Fp=Tl=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&d)!==0&&(ns=!0),c.firstContext=null)}function As(c){var d=c._currentValue;if(Fp!==c)if(c={context:c,memoizedValue:d,next:null},Tl===null){if(Wu===null)throw Error(s(308));Tl=c,Wu.dependencies={lanes:0,firstContext:c}}else Tl=Tl.next=c;return d}var Ni=null;function Wp(c){Ni===null?Ni=[c]:Ni.push(c)}function ry(c,d,x,j){var T=d.interleaved;return T===null?(x.next=x,Wp(d)):(x.next=T.next,T.next=x),d.interleaved=x,qn(c,j)}function qn(c,d){c.lanes|=d;var x=c.alternate;for(x!==null&&(x.lanes|=d),x=c,c=c.return;c!==null;)c.childLanes|=d,x=c.alternate,x!==null&&(x.childLanes|=d),x=c,c=c.return;return x.tag===3?x.stateNode:null}var $o=!1;function Gp(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ay(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Hn(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function To(c,d,x){var j=c.updateQueue;if(j===null)return null;if(j=j.shared,(Er&2)!==0){var T=j.pending;return T===null?d.next=d:(d.next=T.next,T.next=d),j.pending=d,qn(c,x)}return T=j.interleaved,T===null?(d.next=d,Wp(j)):(d.next=T.next,T.next=d),j.interleaved=d,qn(c,x)}function Gu(c,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194240)!==0)){var j=d.lanes;j&=c.pendingLanes,x|=j,d.lanes=x,bo(c,x)}}function sy(c,d){var x=c.updateQueue,j=c.alternate;if(j!==null&&(j=j.updateQueue,x===j)){var T=null,M=null;if(x=x.firstBaseUpdate,x!==null){do{var te={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};M===null?T=M=te:M=M.next=te,x=x.next}while(x!==null);M===null?T=M=d:M=M.next=d}else T=M=d;x={baseState:j.baseState,firstBaseUpdate:T,lastBaseUpdate:M,shared:j.shared,effects:j.effects},c.updateQueue=x;return}c=x.lastBaseUpdate,c===null?x.firstBaseUpdate=d:c.next=d,x.lastBaseUpdate=d}function Ku(c,d,x,j){var T=c.updateQueue;$o=!1;var M=T.firstBaseUpdate,te=T.lastBaseUpdate,he=T.shared.pending;if(he!==null){T.shared.pending=null;var Ce=he,Ue=Ce.next;Ce.next=null,te===null?M=Ue:te.next=Ue,te=Ce;var ct=c.alternate;ct!==null&&(ct=ct.updateQueue,he=ct.lastBaseUpdate,he!==te&&(he===null?ct.firstBaseUpdate=Ue:he.next=Ue,ct.lastBaseUpdate=Ce))}if(M!==null){var xt=T.baseState;te=0,ct=Ue=Ce=null,he=M;do{var lt=he.lane,At=he.eventTime;if((j&lt)===lt){ct!==null&&(ct=ct.next={eventTime:At,lane:0,tag:he.tag,payload:he.payload,callback:he.callback,next:null});e:{var Lt=c,Vt=he;switch(lt=d,At=x,Vt.tag){case 1:if(Lt=Vt.payload,typeof Lt=="function"){xt=Lt.call(At,xt,lt);break e}xt=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Vt.payload,lt=typeof Lt=="function"?Lt.call(At,xt,lt):Lt,lt==null)break e;xt=ye({},xt,lt);break e;case 2:$o=!0}}he.callback!==null&&he.lane!==0&&(c.flags|=64,lt=T.effects,lt===null?T.effects=[he]:lt.push(he))}else At={eventTime:At,lane:lt,tag:he.tag,payload:he.payload,callback:he.callback,next:null},ct===null?(Ue=ct=At,Ce=xt):ct=ct.next=At,te|=lt;if(he=he.next,he===null){if(he=T.shared.pending,he===null)break;lt=he,he=lt.next,lt.next=null,T.lastBaseUpdate=lt,T.shared.pending=null}}while(!0);if(ct===null&&(Ce=xt),T.baseState=Ce,T.firstBaseUpdate=Ue,T.lastBaseUpdate=ct,d=T.shared.interleaved,d!==null){T=d;do te|=T.lane,T=T.next;while(T!==d)}else M===null&&(T.shared.lanes=0);Si|=te,c.lanes=te,c.memoizedState=xt}}function ny(c,d,x){if(c=d.effects,d.effects=null,c!==null)for(d=0;d<c.length;d++){var j=c[d],T=j.callback;if(T!==null){if(j.callback=null,j=x,typeof T!="function")throw Error(s(191,T));T.call(j)}}}var Bc={},gn=jo(Bc),Lc=jo(Bc),Oc=jo(Bc);function ji(c){if(c===Bc)throw Error(s(174));return c}function Kp(c,d){switch(Gr(Oc,d),Gr(Lc,c),Gr(gn,Bc),c=d.nodeType,c){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:C(null,"");break;default:c=c===8?d.parentNode:d,d=c.namespaceURI||null,c=c.tagName,d=C(d,c)}Yr(gn),Gr(gn,d)}function El(){Yr(gn),Yr(Lc),Yr(Oc)}function oy(c){ji(Oc.current);var d=ji(gn.current),x=C(d,c.type);d!==x&&(Gr(Lc,c),Gr(gn,x))}function Qp(c){Lc.current===c&&(Yr(gn),Yr(Lc))}var Zr=jo(0);function Qu(c){for(var d=c;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Yp=[];function Xp(){for(var c=0;c<Yp.length;c++)Yp[c]._workInProgressVersionPrimary=null;Yp.length=0}var Yu=ne.ReactCurrentDispatcher,Jp=ne.ReactCurrentBatchConfig,Ci=0,ea=null,ga=null,va=null,Xu=!1,Vc=!1,Fc=0,tS=0;function Ma(){throw Error(s(321))}function Zp(c,d){if(d===null)return!1;for(var x=0;x<d.length&&x<c.length;x++)if(!Qs(c[x],d[x]))return!1;return!0}function eh(c,d,x,j,T,M){if(Ci=M,ea=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Yu.current=c===null||c.memoizedState===null?nS:oS,c=x(j,T),Vc){M=0;do{if(Vc=!1,Fc=0,25<=M)throw Error(s(301));M+=1,va=ga=null,d.updateQueue=null,Yu.current=iS,c=x(j,T)}while(Vc)}if(Yu.current=e0,d=ga!==null&&ga.next!==null,Ci=0,va=ga=ea=null,Xu=!1,d)throw Error(s(300));return c}function th(){var c=Fc!==0;return Fc=0,c}function bn(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return va===null?ea.memoizedState=va=c:va=va.next=c,va}function Rs(){if(ga===null){var c=ea.alternate;c=c!==null?c.memoizedState:null}else c=ga.next;var d=va===null?ea.memoizedState:va.next;if(d!==null)va=d,ga=c;else{if(c===null)throw Error(s(310));ga=c,c={memoizedState:ga.memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},va===null?ea.memoizedState=va=c:va=va.next=c}return va}function Uc(c,d){return typeof d=="function"?d(c):d}function rh(c){var d=Rs(),x=d.queue;if(x===null)throw Error(s(311));x.lastRenderedReducer=c;var j=ga,T=j.baseQueue,M=x.pending;if(M!==null){if(T!==null){var te=T.next;T.next=M.next,M.next=te}j.baseQueue=T=M,x.pending=null}if(T!==null){M=T.next,j=j.baseState;var he=te=null,Ce=null,Ue=M;do{var ct=Ue.lane;if((Ci&ct)===ct)Ce!==null&&(Ce=Ce.next={lane:0,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null}),j=Ue.hasEagerState?Ue.eagerState:c(j,Ue.action);else{var xt={lane:ct,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null};Ce===null?(he=Ce=xt,te=j):Ce=Ce.next=xt,ea.lanes|=ct,Si|=ct}Ue=Ue.next}while(Ue!==null&&Ue!==M);Ce===null?te=j:Ce.next=he,Qs(j,d.memoizedState)||(ns=!0),d.memoizedState=j,d.baseState=te,d.baseQueue=Ce,x.lastRenderedState=j}if(c=x.interleaved,c!==null){T=c;do M=T.lane,ea.lanes|=M,Si|=M,T=T.next;while(T!==c)}else T===null&&(x.lanes=0);return[d.memoizedState,x.dispatch]}function ah(c){var d=Rs(),x=d.queue;if(x===null)throw Error(s(311));x.lastRenderedReducer=c;var j=x.dispatch,T=x.pending,M=d.memoizedState;if(T!==null){x.pending=null;var te=T=T.next;do M=c(M,te.action),te=te.next;while(te!==T);Qs(M,d.memoizedState)||(ns=!0),d.memoizedState=M,d.baseQueue===null&&(d.baseState=M),x.lastRenderedState=M}return[M,j]}function iy(){}function ly(c,d){var x=ea,j=Rs(),T=d(),M=!Qs(j.memoizedState,T);if(M&&(j.memoizedState=T,ns=!0),j=j.queue,sh(uy.bind(null,x,j,c),[c]),j.getSnapshot!==d||M||va!==null&&va.memoizedState.tag&1){if(x.flags|=2048,qc(9,dy.bind(null,x,j,T,d),void 0,null),wa===null)throw Error(s(349));(Ci&30)!==0||cy(x,d,T)}return T}function cy(c,d,x){c.flags|=16384,c={getSnapshot:d,value:x},d=ea.updateQueue,d===null?(d={lastEffect:null,stores:null},ea.updateQueue=d,d.stores=[c]):(x=d.stores,x===null?d.stores=[c]:x.push(c))}function dy(c,d,x,j){d.value=x,d.getSnapshot=j,my(d)&&py(c)}function uy(c,d,x){return x(function(){my(d)&&py(c)})}function my(c){var d=c.getSnapshot;c=c.value;try{var x=d();return!Qs(c,x)}catch{return!0}}function py(c){var d=qn(c,1);d!==null&&en(d,c,1,-1)}function hy(c){var d=bn();return typeof c=="function"&&(c=c()),d.memoizedState=d.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uc,lastRenderedState:c},d.queue=c,c=c.dispatch=sS.bind(null,ea,c),[d.memoizedState,c]}function qc(c,d,x,j){return c={tag:c,create:d,destroy:x,deps:j,next:null},d=ea.updateQueue,d===null?(d={lastEffect:null,stores:null},ea.updateQueue=d,d.lastEffect=c.next=c):(x=d.lastEffect,x===null?d.lastEffect=c.next=c:(j=x.next,x.next=c,c.next=j,d.lastEffect=c)),c}function xy(){return Rs().memoizedState}function Ju(c,d,x,j){var T=bn();ea.flags|=c,T.memoizedState=qc(1|d,x,void 0,j===void 0?null:j)}function Zu(c,d,x,j){var T=Rs();j=j===void 0?null:j;var M=void 0;if(ga!==null){var te=ga.memoizedState;if(M=te.destroy,j!==null&&Zp(j,te.deps)){T.memoizedState=qc(d,x,M,j);return}}ea.flags|=c,T.memoizedState=qc(1|d,x,M,j)}function gy(c,d){return Ju(8390656,8,c,d)}function sh(c,d){return Zu(2048,8,c,d)}function by(c,d){return Zu(4,2,c,d)}function fy(c,d){return Zu(4,4,c,d)}function yy(c,d){if(typeof d=="function")return c=c(),d(c),function(){d(null)};if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function vy(c,d,x){return x=x!=null?x.concat([c]):null,Zu(4,4,yy.bind(null,d,c),x)}function nh(){}function wy(c,d){var x=Rs();d=d===void 0?null:d;var j=x.memoizedState;return j!==null&&d!==null&&Zp(d,j[1])?j[0]:(x.memoizedState=[c,d],c)}function ky(c,d){var x=Rs();d=d===void 0?null:d;var j=x.memoizedState;return j!==null&&d!==null&&Zp(d,j[1])?j[0]:(c=c(),x.memoizedState=[c,d],c)}function Ny(c,d,x){return(Ci&21)===0?(c.baseState&&(c.baseState=!1,ns=!0),c.memoizedState=x):(Qs(x,d)||(x=hi(),ea.lanes|=x,Si|=x,c.baseState=!0),d)}function rS(c,d){var x=Nr;Nr=x!==0&&4>x?x:4,c(!0);var j=Jp.transition;Jp.transition={};try{c(!1),d()}finally{Nr=x,Jp.transition=j}}function jy(){return Rs().memoizedState}function aS(c,d,x){var j=Do(c);if(x={lane:j,action:x,hasEagerState:!1,eagerState:null,next:null},Cy(c))Sy(d,x);else if(x=ry(c,d,x,j),x!==null){var T=Ka();en(x,c,j,T),$y(x,d,j)}}function sS(c,d,x){var j=Do(c),T={lane:j,action:x,hasEagerState:!1,eagerState:null,next:null};if(Cy(c))Sy(d,T);else{var M=c.alternate;if(c.lanes===0&&(M===null||M.lanes===0)&&(M=d.lastRenderedReducer,M!==null))try{var te=d.lastRenderedState,he=M(te,x);if(T.hasEagerState=!0,T.eagerState=he,Qs(he,te)){var Ce=d.interleaved;Ce===null?(T.next=T,Wp(d)):(T.next=Ce.next,Ce.next=T),d.interleaved=T;return}}catch{}finally{}x=ry(c,d,T,j),x!==null&&(T=Ka(),en(x,c,j,T),$y(x,d,j))}}function Cy(c){var d=c.alternate;return c===ea||d!==null&&d===ea}function Sy(c,d){Vc=Xu=!0;var x=c.pending;x===null?d.next=d:(d.next=x.next,x.next=d),c.pending=d}function $y(c,d,x){if((x&4194240)!==0){var j=d.lanes;j&=c.pendingLanes,x|=j,d.lanes=x,bo(c,x)}}var e0={readContext:As,useCallback:Ma,useContext:Ma,useEffect:Ma,useImperativeHandle:Ma,useInsertionEffect:Ma,useLayoutEffect:Ma,useMemo:Ma,useReducer:Ma,useRef:Ma,useState:Ma,useDebugValue:Ma,useDeferredValue:Ma,useTransition:Ma,useMutableSource:Ma,useSyncExternalStore:Ma,useId:Ma,unstable_isNewReconciler:!1},nS={readContext:As,useCallback:function(c,d){return bn().memoizedState=[c,d===void 0?null:d],c},useContext:As,useEffect:gy,useImperativeHandle:function(c,d,x){return x=x!=null?x.concat([c]):null,Ju(4194308,4,yy.bind(null,d,c),x)},useLayoutEffect:function(c,d){return Ju(4194308,4,c,d)},useInsertionEffect:function(c,d){return Ju(4,2,c,d)},useMemo:function(c,d){var x=bn();return d=d===void 0?null:d,c=c(),x.memoizedState=[c,d],c},useReducer:function(c,d,x){var j=bn();return d=x!==void 0?x(d):d,j.memoizedState=j.baseState=d,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d},j.queue=c,c=c.dispatch=aS.bind(null,ea,c),[j.memoizedState,c]},useRef:function(c){var d=bn();return c={current:c},d.memoizedState=c},useState:hy,useDebugValue:nh,useDeferredValue:function(c){return bn().memoizedState=c},useTransition:function(){var c=hy(!1),d=c[0];return c=rS.bind(null,c[1]),bn().memoizedState=c,[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,x){var j=ea,T=bn();if(Jr){if(x===void 0)throw Error(s(407));x=x()}else{if(x=d(),wa===null)throw Error(s(349));(Ci&30)!==0||cy(j,d,x)}T.memoizedState=x;var M={value:x,getSnapshot:d};return T.queue=M,gy(uy.bind(null,j,M,c),[c]),j.flags|=2048,qc(9,dy.bind(null,j,M,x,d),void 0,null),x},useId:function(){var c=bn(),d=wa.identifierPrefix;if(Jr){var x=Un,j=Fn;x=(j&~(1<<32-Ha(j)-1)).toString(32)+x,d=":"+d+"R"+x,x=Fc++,0<x&&(d+="H"+x.toString(32)),d+=":"}else x=tS++,d=":"+d+"r"+x.toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},oS={readContext:As,useCallback:wy,useContext:As,useEffect:sh,useImperativeHandle:vy,useInsertionEffect:by,useLayoutEffect:fy,useMemo:ky,useReducer:rh,useRef:xy,useState:function(){return rh(Uc)},useDebugValue:nh,useDeferredValue:function(c){var d=Rs();return Ny(d,ga.memoizedState,c)},useTransition:function(){var c=rh(Uc)[0],d=Rs().memoizedState;return[c,d]},useMutableSource:iy,useSyncExternalStore:ly,useId:jy,unstable_isNewReconciler:!1},iS={readContext:As,useCallback:wy,useContext:As,useEffect:sh,useImperativeHandle:vy,useInsertionEffect:by,useLayoutEffect:fy,useMemo:ky,useReducer:ah,useRef:xy,useState:function(){return ah(Uc)},useDebugValue:nh,useDeferredValue:function(c){var d=Rs();return ga===null?d.memoizedState=c:Ny(d,ga.memoizedState,c)},useTransition:function(){var c=ah(Uc)[0],d=Rs().memoizedState;return[c,d]},useMutableSource:iy,useSyncExternalStore:ly,useId:jy,unstable_isNewReconciler:!1};function Xs(c,d){if(c&&c.defaultProps){d=ye({},d),c=c.defaultProps;for(var x in c)d[x]===void 0&&(d[x]=c[x]);return d}return d}function oh(c,d,x,j){d=c.memoizedState,x=x(j,d),x=x==null?d:ye({},d,x),c.memoizedState=x,c.lanes===0&&(c.updateQueue.baseState=x)}var t0={isMounted:function(c){return(c=c._reactInternals)?qa(c)===c:!1},enqueueSetState:function(c,d,x){c=c._reactInternals;var j=Ka(),T=Do(c),M=Hn(j,T);M.payload=d,x!=null&&(M.callback=x),d=To(c,M,T),d!==null&&(en(d,c,T,j),Gu(d,c,T))},enqueueReplaceState:function(c,d,x){c=c._reactInternals;var j=Ka(),T=Do(c),M=Hn(j,T);M.tag=1,M.payload=d,x!=null&&(M.callback=x),d=To(c,M,T),d!==null&&(en(d,c,T,j),Gu(d,c,T))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var x=Ka(),j=Do(c),T=Hn(x,j);T.tag=2,d!=null&&(T.callback=d),d=To(c,T,j),d!==null&&(en(d,c,j,x),Gu(d,c,j))}};function Ty(c,d,x,j,T,M,te){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(j,M,te):d.prototype&&d.prototype.isPureReactComponent?!Ec(x,j)||!Ec(T,M):!0}function Py(c,d,x){var j=!1,T=Co,M=d.contextType;return typeof M=="object"&&M!==null?M=As(M):(T=ss(d)?vi:Ra.current,j=d.contextTypes,M=(j=j!=null)?Nl(c,T):Co),d=new d(x,M),c.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=t0,c.stateNode=d,d._reactInternals=c,j&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=T,c.__reactInternalMemoizedMaskedChildContext=M),d}function Ey(c,d,x,j){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,j),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,j),d.state!==c&&t0.enqueueReplaceState(d,d.state,null)}function ih(c,d,x,j){var T=c.stateNode;T.props=x,T.state=c.memoizedState,T.refs={},Gp(c);var M=d.contextType;typeof M=="object"&&M!==null?T.context=As(M):(M=ss(d)?vi:Ra.current,T.context=Nl(c,M)),T.state=c.memoizedState,M=d.getDerivedStateFromProps,typeof M=="function"&&(oh(c,d,M,x),T.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(d=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),d!==T.state&&t0.enqueueReplaceState(T,T.state,null),Ku(c,x,T,j),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308)}function Il(c,d){try{var x="",j=d;do x+=Ve(j),j=j.return;while(j);var T=x}catch(M){T=`
Error generating stack: `+M.message+`
`+M.stack}return{value:c,source:d,stack:T,digest:null}}function lh(c,d,x){return{value:c,source:null,stack:x??null,digest:d??null}}function ch(c,d){try{console.error(d.value)}catch(x){setTimeout(function(){throw x})}}var lS=typeof WeakMap=="function"?WeakMap:Map;function Iy(c,d,x){x=Hn(-1,x),x.tag=3,x.payload={element:null};var j=d.value;return x.callback=function(){l0||(l0=!0,jh=j),ch(c,d)},x}function Dy(c,d,x){x=Hn(-1,x),x.tag=3;var j=c.type.getDerivedStateFromError;if(typeof j=="function"){var T=d.value;x.payload=function(){return j(T)},x.callback=function(){ch(c,d)}}var M=c.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(x.callback=function(){ch(c,d),typeof j!="function"&&(Eo===null?Eo=new Set([this]):Eo.add(this));var te=d.stack;this.componentDidCatch(d.value,{componentStack:te!==null?te:""})}),x}function _y(c,d,x){var j=c.pingCache;if(j===null){j=c.pingCache=new lS;var T=new Set;j.set(d,T)}else T=j.get(d),T===void 0&&(T=new Set,j.set(d,T));T.has(x)||(T.add(x),c=kS.bind(null,c,d,x),d.then(c,c))}function Ay(c){do{var d;if((d=c.tag===13)&&(d=c.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return c;c=c.return}while(c!==null);return null}function Ry(c,d,x,j,T){return(c.mode&1)===0?(c===d?c.flags|=65536:(c.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(d=Hn(-1,1),d.tag=2,To(x,d,1))),x.lanes|=1),c):(c.flags|=65536,c.lanes=T,c)}var cS=ne.ReactCurrentOwner,ns=!1;function Ga(c,d,x,j){d.child=c===null?ty(d,null,x,j):$l(d,c.child,x,j)}function My(c,d,x,j,T){x=x.render;var M=d.ref;return Pl(d,T),j=eh(c,d,x,j,M,T),x=th(),c!==null&&!ns?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~T,Wn(c,d,T)):(Jr&&x&&zp(d),d.flags|=1,Ga(c,d,j,T),d.child)}function zy(c,d,x,j,T){if(c===null){var M=x.type;return typeof M=="function"&&!Ih(M)&&M.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(d.tag=15,d.type=M,By(c,d,M,j,T)):(c=h0(x.type,null,j,d,d.mode,T),c.ref=d.ref,c.return=d,d.child=c)}if(M=c.child,(c.lanes&T)===0){var te=M.memoizedProps;if(x=x.compare,x=x!==null?x:Ec,x(te,j)&&c.ref===d.ref)return Wn(c,d,T)}return d.flags|=1,c=Ao(M,j),c.ref=d.ref,c.return=d,d.child=c}function By(c,d,x,j,T){if(c!==null){var M=c.memoizedProps;if(Ec(M,j)&&c.ref===d.ref)if(ns=!1,d.pendingProps=j=M,(c.lanes&T)!==0)(c.flags&131072)!==0&&(ns=!0);else return d.lanes=c.lanes,Wn(c,d,T)}return dh(c,d,x,j,T)}function Ly(c,d,x){var j=d.pendingProps,T=j.children,M=c!==null?c.memoizedState:null;if(j.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gr(_l,ws),ws|=x;else{if((x&1073741824)===0)return c=M!==null?M.baseLanes|x:x,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null,transitions:null},d.updateQueue=null,Gr(_l,ws),ws|=c,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},j=M!==null?M.baseLanes:x,Gr(_l,ws),ws|=j}else M!==null?(j=M.baseLanes|x,d.memoizedState=null):j=x,Gr(_l,ws),ws|=j;return Ga(c,d,T,x),d.child}function Oy(c,d){var x=d.ref;(c===null&&x!==null||c!==null&&c.ref!==x)&&(d.flags|=512,d.flags|=2097152)}function dh(c,d,x,j,T){var M=ss(x)?vi:Ra.current;return M=Nl(d,M),Pl(d,T),x=eh(c,d,x,j,M,T),j=th(),c!==null&&!ns?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~T,Wn(c,d,T)):(Jr&&j&&zp(d),d.flags|=1,Ga(c,d,x,T),d.child)}function Vy(c,d,x,j,T){if(ss(x)){var M=!0;Lu(d)}else M=!1;if(Pl(d,T),d.stateNode===null)a0(c,d),Py(d,x,j),ih(d,x,j,T),j=!0;else if(c===null){var te=d.stateNode,he=d.memoizedProps;te.props=he;var Ce=te.context,Ue=x.contextType;typeof Ue=="object"&&Ue!==null?Ue=As(Ue):(Ue=ss(x)?vi:Ra.current,Ue=Nl(d,Ue));var ct=x.getDerivedStateFromProps,xt=typeof ct=="function"||typeof te.getSnapshotBeforeUpdate=="function";xt||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(he!==j||Ce!==Ue)&&Ey(d,te,j,Ue),$o=!1;var lt=d.memoizedState;te.state=lt,Ku(d,j,te,T),Ce=d.memoizedState,he!==j||lt!==Ce||as.current||$o?(typeof ct=="function"&&(oh(d,x,ct,j),Ce=d.memoizedState),(he=$o||Ty(d,x,he,j,lt,Ce,Ue))?(xt||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount()),typeof te.componentDidMount=="function"&&(d.flags|=4194308)):(typeof te.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=j,d.memoizedState=Ce),te.props=j,te.state=Ce,te.context=Ue,j=he):(typeof te.componentDidMount=="function"&&(d.flags|=4194308),j=!1)}else{te=d.stateNode,ay(c,d),he=d.memoizedProps,Ue=d.type===d.elementType?he:Xs(d.type,he),te.props=Ue,xt=d.pendingProps,lt=te.context,Ce=x.contextType,typeof Ce=="object"&&Ce!==null?Ce=As(Ce):(Ce=ss(x)?vi:Ra.current,Ce=Nl(d,Ce));var At=x.getDerivedStateFromProps;(ct=typeof At=="function"||typeof te.getSnapshotBeforeUpdate=="function")||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(he!==xt||lt!==Ce)&&Ey(d,te,j,Ce),$o=!1,lt=d.memoizedState,te.state=lt,Ku(d,j,te,T);var Lt=d.memoizedState;he!==xt||lt!==Lt||as.current||$o?(typeof At=="function"&&(oh(d,x,At,j),Lt=d.memoizedState),(Ue=$o||Ty(d,x,Ue,j,lt,Lt,Ce)||!1)?(ct||typeof te.UNSAFE_componentWillUpdate!="function"&&typeof te.componentWillUpdate!="function"||(typeof te.componentWillUpdate=="function"&&te.componentWillUpdate(j,Lt,Ce),typeof te.UNSAFE_componentWillUpdate=="function"&&te.UNSAFE_componentWillUpdate(j,Lt,Ce)),typeof te.componentDidUpdate=="function"&&(d.flags|=4),typeof te.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof te.componentDidUpdate!="function"||he===c.memoizedProps&&lt===c.memoizedState||(d.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||he===c.memoizedProps&&lt===c.memoizedState||(d.flags|=1024),d.memoizedProps=j,d.memoizedState=Lt),te.props=j,te.state=Lt,te.context=Ce,j=Ue):(typeof te.componentDidUpdate!="function"||he===c.memoizedProps&&lt===c.memoizedState||(d.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||he===c.memoizedProps&&lt===c.memoizedState||(d.flags|=1024),j=!1)}return uh(c,d,x,j,M,T)}function uh(c,d,x,j,T,M){Oy(c,d);var te=(d.flags&128)!==0;if(!j&&!te)return T&&Wf(d,x,!1),Wn(c,d,M);j=d.stateNode,cS.current=d;var he=te&&typeof x.getDerivedStateFromError!="function"?null:j.render();return d.flags|=1,c!==null&&te?(d.child=$l(d,c.child,null,M),d.child=$l(d,null,he,M)):Ga(c,d,he,M),d.memoizedState=j.state,T&&Wf(d,x,!0),d.child}function Fy(c){var d=c.stateNode;d.pendingContext?qf(c,d.pendingContext,d.pendingContext!==d.context):d.context&&qf(c,d.context,!1),Kp(c,d.containerInfo)}function Uy(c,d,x,j,T){return Sl(),Vp(T),d.flags|=256,Ga(c,d,x,j),d.child}var mh={dehydrated:null,treeContext:null,retryLane:0};function ph(c){return{baseLanes:c,cachePool:null,transitions:null}}function qy(c,d,x){var j=d.pendingProps,T=Zr.current,M=!1,te=(d.flags&128)!==0,he;if((he=te)||(he=c!==null&&c.memoizedState===null?!1:(T&2)!==0),he?(M=!0,d.flags&=-129):(c===null||c.memoizedState!==null)&&(T|=1),Gr(Zr,T&1),c===null)return Op(d),c=d.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((d.mode&1)===0?d.lanes=1:c.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(te=j.children,c=j.fallback,M?(j=d.mode,M=d.child,te={mode:"hidden",children:te},(j&1)===0&&M!==null?(M.childLanes=0,M.pendingProps=te):M=x0(te,j,0,null),c=Ei(c,j,x,null),M.return=d,c.return=d,M.sibling=c,d.child=M,d.child.memoizedState=ph(x),d.memoizedState=mh,c):hh(d,te));if(T=c.memoizedState,T!==null&&(he=T.dehydrated,he!==null))return dS(c,d,te,j,he,T,x);if(M){M=j.fallback,te=d.mode,T=c.child,he=T.sibling;var Ce={mode:"hidden",children:j.children};return(te&1)===0&&d.child!==T?(j=d.child,j.childLanes=0,j.pendingProps=Ce,d.deletions=null):(j=Ao(T,Ce),j.subtreeFlags=T.subtreeFlags&14680064),he!==null?M=Ao(he,M):(M=Ei(M,te,x,null),M.flags|=2),M.return=d,j.return=d,j.sibling=M,d.child=j,j=M,M=d.child,te=c.child.memoizedState,te=te===null?ph(x):{baseLanes:te.baseLanes|x,cachePool:null,transitions:te.transitions},M.memoizedState=te,M.childLanes=c.childLanes&~x,d.memoizedState=mh,j}return M=c.child,c=M.sibling,j=Ao(M,{mode:"visible",children:j.children}),(d.mode&1)===0&&(j.lanes=x),j.return=d,j.sibling=null,c!==null&&(x=d.deletions,x===null?(d.deletions=[c],d.flags|=16):x.push(c)),d.child=j,d.memoizedState=null,j}function hh(c,d){return d=x0({mode:"visible",children:d},c.mode,0,null),d.return=c,c.child=d}function r0(c,d,x,j){return j!==null&&Vp(j),$l(d,c.child,null,x),c=hh(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function dS(c,d,x,j,T,M,te){if(x)return d.flags&256?(d.flags&=-257,j=lh(Error(s(422))),r0(c,d,te,j)):d.memoizedState!==null?(d.child=c.child,d.flags|=128,null):(M=j.fallback,T=d.mode,j=x0({mode:"visible",children:j.children},T,0,null),M=Ei(M,T,te,null),M.flags|=2,j.return=d,M.return=d,j.sibling=M,d.child=j,(d.mode&1)!==0&&$l(d,c.child,null,te),d.child.memoizedState=ph(te),d.memoizedState=mh,M);if((d.mode&1)===0)return r0(c,d,te,null);if(T.data==="$!"){if(j=T.nextSibling&&T.nextSibling.dataset,j)var he=j.dgst;return j=he,M=Error(s(419)),j=lh(M,j,void 0),r0(c,d,te,j)}if(he=(te&c.childLanes)!==0,ns||he){if(j=wa,j!==null){switch(te&-te){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(j.suspendedLanes|te))!==0?0:T,T!==0&&T!==M.retryLane&&(M.retryLane=T,qn(c,T),en(j,c,T,-1))}return Eh(),j=lh(Error(s(421))),r0(c,d,te,j)}return T.data==="$?"?(d.flags|=128,d.child=c.child,d=NS.bind(null,c),T._reactRetry=d,null):(c=M.treeContext,vs=No(T.nextSibling),ys=d,Jr=!0,Ys=null,c!==null&&(Ds[_s++]=Fn,Ds[_s++]=Un,Ds[_s++]=wi,Fn=c.id,Un=c.overflow,wi=d),d=hh(d,j.children),d.flags|=4096,d)}function Hy(c,d,x){c.lanes|=d;var j=c.alternate;j!==null&&(j.lanes|=d),Hp(c.return,d,x)}function xh(c,d,x,j,T){var M=c.memoizedState;M===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:j,tail:x,tailMode:T}:(M.isBackwards=d,M.rendering=null,M.renderingStartTime=0,M.last=j,M.tail=x,M.tailMode=T)}function Wy(c,d,x){var j=d.pendingProps,T=j.revealOrder,M=j.tail;if(Ga(c,d,j.children,x),j=Zr.current,(j&2)!==0)j=j&1|2,d.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Hy(c,x,d);else if(c.tag===19)Hy(c,x,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}j&=1}if(Gr(Zr,j),(d.mode&1)===0)d.memoizedState=null;else switch(T){case"forwards":for(x=d.child,T=null;x!==null;)c=x.alternate,c!==null&&Qu(c)===null&&(T=x),x=x.sibling;x=T,x===null?(T=d.child,d.child=null):(T=x.sibling,x.sibling=null),xh(d,!1,T,x,M);break;case"backwards":for(x=null,T=d.child,d.child=null;T!==null;){if(c=T.alternate,c!==null&&Qu(c)===null){d.child=T;break}c=T.sibling,T.sibling=x,x=T,T=c}xh(d,!0,x,null,M);break;case"together":xh(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function a0(c,d){(d.mode&1)===0&&c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2)}function Wn(c,d,x){if(c!==null&&(d.dependencies=c.dependencies),Si|=d.lanes,(x&d.childLanes)===0)return null;if(c!==null&&d.child!==c.child)throw Error(s(153));if(d.child!==null){for(c=d.child,x=Ao(c,c.pendingProps),d.child=x,x.return=d;c.sibling!==null;)c=c.sibling,x=x.sibling=Ao(c,c.pendingProps),x.return=d;x.sibling=null}return d.child}function uS(c,d,x){switch(d.tag){case 3:Fy(d),Sl();break;case 5:oy(d);break;case 1:ss(d.type)&&Lu(d);break;case 4:Kp(d,d.stateNode.containerInfo);break;case 10:var j=d.type._context,T=d.memoizedProps.value;Gr(Hu,j._currentValue),j._currentValue=T;break;case 13:if(j=d.memoizedState,j!==null)return j.dehydrated!==null?(Gr(Zr,Zr.current&1),d.flags|=128,null):(x&d.child.childLanes)!==0?qy(c,d,x):(Gr(Zr,Zr.current&1),c=Wn(c,d,x),c!==null?c.sibling:null);Gr(Zr,Zr.current&1);break;case 19:if(j=(x&d.childLanes)!==0,(c.flags&128)!==0){if(j)return Wy(c,d,x);d.flags|=128}if(T=d.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Gr(Zr,Zr.current),j)break;return null;case 22:case 23:return d.lanes=0,Ly(c,d,x)}return Wn(c,d,x)}var Gy,gh,Ky,Qy;Gy=function(c,d){for(var x=d.child;x!==null;){if(x.tag===5||x.tag===6)c.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},gh=function(){},Ky=function(c,d,x,j){var T=c.memoizedProps;if(T!==j){c=d.stateNode,ji(gn.current);var M=null;switch(x){case"input":T=Tt(c,T),j=Tt(c,j),M=[];break;case"select":T=ye({},T,{value:void 0}),j=ye({},j,{value:void 0}),M=[];break;case"textarea":T=Le(c,T),j=Le(c,j),M=[];break;default:typeof T.onClick!="function"&&typeof j.onClick=="function"&&(c.onclick=Mu)}_(x,j);var te;x=null;for(Ue in T)if(!j.hasOwnProperty(Ue)&&T.hasOwnProperty(Ue)&&T[Ue]!=null)if(Ue==="style"){var he=T[Ue];for(te in he)he.hasOwnProperty(te)&&(x||(x={}),x[te]="")}else Ue!=="dangerouslySetInnerHTML"&&Ue!=="children"&&Ue!=="suppressContentEditableWarning"&&Ue!=="suppressHydrationWarning"&&Ue!=="autoFocus"&&(i.hasOwnProperty(Ue)?M||(M=[]):(M=M||[]).push(Ue,null));for(Ue in j){var Ce=j[Ue];if(he=T?.[Ue],j.hasOwnProperty(Ue)&&Ce!==he&&(Ce!=null||he!=null))if(Ue==="style")if(he){for(te in he)!he.hasOwnProperty(te)||Ce&&Ce.hasOwnProperty(te)||(x||(x={}),x[te]="");for(te in Ce)Ce.hasOwnProperty(te)&&he[te]!==Ce[te]&&(x||(x={}),x[te]=Ce[te])}else x||(M||(M=[]),M.push(Ue,x)),x=Ce;else Ue==="dangerouslySetInnerHTML"?(Ce=Ce?Ce.__html:void 0,he=he?he.__html:void 0,Ce!=null&&he!==Ce&&(M=M||[]).push(Ue,Ce)):Ue==="children"?typeof Ce!="string"&&typeof Ce!="number"||(M=M||[]).push(Ue,""+Ce):Ue!=="suppressContentEditableWarning"&&Ue!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ue)?(Ce!=null&&Ue==="onScroll"&&Qr("scroll",c),M||he===Ce||(M=[])):(M=M||[]).push(Ue,Ce))}x&&(M=M||[]).push("style",x);var Ue=M;(d.updateQueue=Ue)&&(d.flags|=4)}},Qy=function(c,d,x,j){x!==j&&(d.flags|=4)};function Hc(c,d){if(!Jr)switch(c.tailMode){case"hidden":d=c.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?c.tail=null:x.sibling=null;break;case"collapsed":x=c.tail;for(var j=null;x!==null;)x.alternate!==null&&(j=x),x=x.sibling;j===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:j.sibling=null}}function za(c){var d=c.alternate!==null&&c.alternate.child===c.child,x=0,j=0;if(d)for(var T=c.child;T!==null;)x|=T.lanes|T.childLanes,j|=T.subtreeFlags&14680064,j|=T.flags&14680064,T.return=c,T=T.sibling;else for(T=c.child;T!==null;)x|=T.lanes|T.childLanes,j|=T.subtreeFlags,j|=T.flags,T.return=c,T=T.sibling;return c.subtreeFlags|=j,c.childLanes=x,d}function mS(c,d,x){var j=d.pendingProps;switch(Bp(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return za(d),null;case 1:return ss(d.type)&&Bu(),za(d),null;case 3:return j=d.stateNode,El(),Yr(as),Yr(Ra),Xp(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(c===null||c.child===null)&&(Uu(d)?d.flags|=4:c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Ys!==null&&($h(Ys),Ys=null))),gh(c,d),za(d),null;case 5:Qp(d);var T=ji(Oc.current);if(x=d.type,c!==null&&d.stateNode!=null)Ky(c,d,x,j,T),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!j){if(d.stateNode===null)throw Error(s(166));return za(d),null}if(c=ji(gn.current),Uu(d)){j=d.stateNode,x=d.type;var M=d.memoizedProps;switch(j[xn]=d,j[Rc]=M,c=(d.mode&1)!==0,x){case"dialog":Qr("cancel",j),Qr("close",j);break;case"iframe":case"object":case"embed":Qr("load",j);break;case"video":case"audio":for(T=0;T<Dc.length;T++)Qr(Dc[T],j);break;case"source":Qr("error",j);break;case"img":case"image":case"link":Qr("error",j),Qr("load",j);break;case"details":Qr("toggle",j);break;case"input":It(j,M),Qr("invalid",j);break;case"select":j._wrapperState={wasMultiple:!!M.multiple},Qr("invalid",j);break;case"textarea":Fe(j,M),Qr("invalid",j)}_(x,M),T=null;for(var te in M)if(M.hasOwnProperty(te)){var he=M[te];te==="children"?typeof he=="string"?j.textContent!==he&&(M.suppressHydrationWarning!==!0&&Ru(j.textContent,he,c),T=["children",he]):typeof he=="number"&&j.textContent!==""+he&&(M.suppressHydrationWarning!==!0&&Ru(j.textContent,he,c),T=["children",""+he]):i.hasOwnProperty(te)&&he!=null&&te==="onScroll"&&Qr("scroll",j)}switch(x){case"input":Re(j),ot(j,M,!0);break;case"textarea":Re(j),we(j);break;case"select":case"option":break;default:typeof M.onClick=="function"&&(j.onclick=Mu)}j=T,d.updateQueue=j,j!==null&&(d.flags|=4)}else{te=T.nodeType===9?T:T.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=r(x)),c==="http://www.w3.org/1999/xhtml"?x==="script"?(c=te.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof j.is=="string"?c=te.createElement(x,{is:j.is}):(c=te.createElement(x),x==="select"&&(te=c,j.multiple?te.multiple=!0:j.size&&(te.size=j.size))):c=te.createElementNS(c,x),c[xn]=d,c[Rc]=j,Gy(c,d,!1,!1),d.stateNode=c;e:{switch(te=b(x,j),x){case"dialog":Qr("cancel",c),Qr("close",c),T=j;break;case"iframe":case"object":case"embed":Qr("load",c),T=j;break;case"video":case"audio":for(T=0;T<Dc.length;T++)Qr(Dc[T],c);T=j;break;case"source":Qr("error",c),T=j;break;case"img":case"image":case"link":Qr("error",c),Qr("load",c),T=j;break;case"details":Qr("toggle",c),T=j;break;case"input":It(c,j),T=Tt(c,j),Qr("invalid",c);break;case"option":T=j;break;case"select":c._wrapperState={wasMultiple:!!j.multiple},T=ye({},j,{value:void 0}),Qr("invalid",c);break;case"textarea":Fe(c,j),T=Le(c,j),Qr("invalid",c);break;default:T=j}_(x,T),he=T;for(M in he)if(he.hasOwnProperty(M)){var Ce=he[M];M==="style"?P(c,Ce):M==="dangerouslySetInnerHTML"?(Ce=Ce?Ce.__html:void 0,Ce!=null&&E(c,Ce)):M==="children"?typeof Ce=="string"?(x!=="textarea"||Ce!=="")&&A(c,Ce):typeof Ce=="number"&&A(c,""+Ce):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(i.hasOwnProperty(M)?Ce!=null&&M==="onScroll"&&Qr("scroll",c):Ce!=null&&U(c,M,Ce,te))}switch(x){case"input":Re(c),ot(c,j,!1);break;case"textarea":Re(c),we(c);break;case"option":j.value!=null&&c.setAttribute("value",""+nt(j.value));break;case"select":c.multiple=!!j.multiple,M=j.value,M!=null?ge(c,!!j.multiple,M,!1):j.defaultValue!=null&&ge(c,!!j.multiple,j.defaultValue,!0);break;default:typeof T.onClick=="function"&&(c.onclick=Mu)}switch(x){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}}j&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return za(d),null;case 6:if(c&&d.stateNode!=null)Qy(c,d,c.memoizedProps,j);else{if(typeof j!="string"&&d.stateNode===null)throw Error(s(166));if(x=ji(Oc.current),ji(gn.current),Uu(d)){if(j=d.stateNode,x=d.memoizedProps,j[xn]=d,(M=j.nodeValue!==x)&&(c=ys,c!==null))switch(c.tag){case 3:Ru(j.nodeValue,x,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Ru(j.nodeValue,x,(c.mode&1)!==0)}M&&(d.flags|=4)}else j=(x.nodeType===9?x:x.ownerDocument).createTextNode(j),j[xn]=d,d.stateNode=j}return za(d),null;case 13:if(Yr(Zr),j=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Jr&&vs!==null&&(d.mode&1)!==0&&(d.flags&128)===0)Jf(),Sl(),d.flags|=98560,M=!1;else if(M=Uu(d),j!==null&&j.dehydrated!==null){if(c===null){if(!M)throw Error(s(318));if(M=d.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(s(317));M[xn]=d}else Sl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;za(d),M=!1}else Ys!==null&&($h(Ys),Ys=null),M=!0;if(!M)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=x,d):(j=j!==null,j!==(c!==null&&c.memoizedState!==null)&&j&&(d.child.flags|=8192,(d.mode&1)!==0&&(c===null||(Zr.current&1)!==0?ba===0&&(ba=3):Eh())),d.updateQueue!==null&&(d.flags|=4),za(d),null);case 4:return El(),gh(c,d),c===null&&_c(d.stateNode.containerInfo),za(d),null;case 10:return qp(d.type._context),za(d),null;case 17:return ss(d.type)&&Bu(),za(d),null;case 19:if(Yr(Zr),M=d.memoizedState,M===null)return za(d),null;if(j=(d.flags&128)!==0,te=M.rendering,te===null)if(j)Hc(M,!1);else{if(ba!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(te=Qu(c),te!==null){for(d.flags|=128,Hc(M,!1),j=te.updateQueue,j!==null&&(d.updateQueue=j,d.flags|=4),d.subtreeFlags=0,j=x,x=d.child;x!==null;)M=x,c=j,M.flags&=14680066,te=M.alternate,te===null?(M.childLanes=0,M.lanes=c,M.child=null,M.subtreeFlags=0,M.memoizedProps=null,M.memoizedState=null,M.updateQueue=null,M.dependencies=null,M.stateNode=null):(M.childLanes=te.childLanes,M.lanes=te.lanes,M.child=te.child,M.subtreeFlags=0,M.deletions=null,M.memoizedProps=te.memoizedProps,M.memoizedState=te.memoizedState,M.updateQueue=te.updateQueue,M.type=te.type,c=te.dependencies,M.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),x=x.sibling;return Gr(Zr,Zr.current&1|2),d.child}c=c.sibling}M.tail!==null&&Ur()>Al&&(d.flags|=128,j=!0,Hc(M,!1),d.lanes=4194304)}else{if(!j)if(c=Qu(te),c!==null){if(d.flags|=128,j=!0,x=c.updateQueue,x!==null&&(d.updateQueue=x,d.flags|=4),Hc(M,!0),M.tail===null&&M.tailMode==="hidden"&&!te.alternate&&!Jr)return za(d),null}else 2*Ur()-M.renderingStartTime>Al&&x!==1073741824&&(d.flags|=128,j=!0,Hc(M,!1),d.lanes=4194304);M.isBackwards?(te.sibling=d.child,d.child=te):(x=M.last,x!==null?x.sibling=te:d.child=te,M.last=te)}return M.tail!==null?(d=M.tail,M.rendering=d,M.tail=d.sibling,M.renderingStartTime=Ur(),d.sibling=null,x=Zr.current,Gr(Zr,j?x&1|2:x&1),d):(za(d),null);case 22:case 23:return Ph(),j=d.memoizedState!==null,c!==null&&c.memoizedState!==null!==j&&(d.flags|=8192),j&&(d.mode&1)!==0?(ws&1073741824)!==0&&(za(d),d.subtreeFlags&6&&(d.flags|=8192)):za(d),null;case 24:return null;case 25:return null}throw Error(s(156,d.tag))}function pS(c,d){switch(Bp(d),d.tag){case 1:return ss(d.type)&&Bu(),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return El(),Yr(as),Yr(Ra),Xp(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 5:return Qp(d),null;case 13:if(Yr(Zr),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(s(340));Sl()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return Yr(Zr),null;case 4:return El(),null;case 10:return qp(d.type._context),null;case 22:case 23:return Ph(),null;case 24:return null;default:return null}}var s0=!1,Ba=!1,hS=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function Dl(c,d){var x=c.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(j){na(c,d,j)}else x.current=null}function bh(c,d,x){try{x()}catch(j){na(c,d,j)}}var Yy=!1;function xS(c,d){if(Pp=vo,c=Tf(),wp(c)){if("selectionStart"in c)var x={start:c.selectionStart,end:c.selectionEnd};else e:{x=(x=c.ownerDocument)&&x.defaultView||window;var j=x.getSelection&&x.getSelection();if(j&&j.rangeCount!==0){x=j.anchorNode;var T=j.anchorOffset,M=j.focusNode;j=j.focusOffset;try{x.nodeType,M.nodeType}catch{x=null;break e}var te=0,he=-1,Ce=-1,Ue=0,ct=0,xt=c,lt=null;t:for(;;){for(var At;xt!==x||T!==0&&xt.nodeType!==3||(he=te+T),xt!==M||j!==0&&xt.nodeType!==3||(Ce=te+j),xt.nodeType===3&&(te+=xt.nodeValue.length),(At=xt.firstChild)!==null;)lt=xt,xt=At;for(;;){if(xt===c)break t;if(lt===x&&++Ue===T&&(he=te),lt===M&&++ct===j&&(Ce=te),(At=xt.nextSibling)!==null)break;xt=lt,lt=xt.parentNode}xt=At}x=he===-1||Ce===-1?null:{start:he,end:Ce}}else x=null}x=x||{start:0,end:0}}else x=null;for(Ep={focusedElem:c,selectionRange:x},vo=!1,Mt=d;Mt!==null;)if(d=Mt,c=d.child,(d.subtreeFlags&1028)!==0&&c!==null)c.return=d,Mt=c;else for(;Mt!==null;){d=Mt;try{var Lt=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(Lt!==null){var Vt=Lt.memoizedProps,ia=Lt.memoizedState,ze=d.stateNode,Ie=ze.getSnapshotBeforeUpdate(d.elementType===d.type?Vt:Xs(d.type,Vt),ia);ze.__reactInternalSnapshotBeforeUpdate=Ie}break;case 3:var Oe=d.stateNode.containerInfo;Oe.nodeType===1?Oe.textContent="":Oe.nodeType===9&&Oe.documentElement&&Oe.removeChild(Oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(yt){na(d,d.return,yt)}if(c=d.sibling,c!==null){c.return=d.return,Mt=c;break}Mt=d.return}return Lt=Yy,Yy=!1,Lt}function Wc(c,d,x){var j=d.updateQueue;if(j=j!==null?j.lastEffect:null,j!==null){var T=j=j.next;do{if((T.tag&c)===c){var M=T.destroy;T.destroy=void 0,M!==void 0&&bh(d,x,M)}T=T.next}while(T!==j)}}function n0(c,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var x=d=d.next;do{if((x.tag&c)===c){var j=x.create;x.destroy=j()}x=x.next}while(x!==d)}}function fh(c){var d=c.ref;if(d!==null){var x=c.stateNode;switch(c.tag){case 5:c=x;break;default:c=x}typeof d=="function"?d(c):d.current=c}}function Xy(c){var d=c.alternate;d!==null&&(c.alternate=null,Xy(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&(delete d[xn],delete d[Rc],delete d[Ap],delete d[X6],delete d[J6])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Jy(c){return c.tag===5||c.tag===3||c.tag===4}function Zy(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Jy(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function yh(c,d,x){var j=c.tag;if(j===5||j===6)c=c.stateNode,d?x.nodeType===8?x.parentNode.insertBefore(c,d):x.insertBefore(c,d):(x.nodeType===8?(d=x.parentNode,d.insertBefore(c,x)):(d=x,d.appendChild(c)),x=x._reactRootContainer,x!=null||d.onclick!==null||(d.onclick=Mu));else if(j!==4&&(c=c.child,c!==null))for(yh(c,d,x),c=c.sibling;c!==null;)yh(c,d,x),c=c.sibling}function vh(c,d,x){var j=c.tag;if(j===5||j===6)c=c.stateNode,d?x.insertBefore(c,d):x.appendChild(c);else if(j!==4&&(c=c.child,c!==null))for(vh(c,d,x),c=c.sibling;c!==null;)vh(c,d,x),c=c.sibling}var $a=null,Js=!1;function Po(c,d,x){for(x=x.child;x!==null;)ev(c,d,x),x=x.sibling}function ev(c,d,x){if(xs&&typeof xs.onCommitFiberUnmount=="function")try{xs.onCommitFiberUnmount(mi,x)}catch{}switch(x.tag){case 5:Ba||Dl(x,d);case 6:var j=$a,T=Js;$a=null,Po(c,d,x),$a=j,Js=T,$a!==null&&(Js?(c=$a,x=x.stateNode,c.nodeType===8?c.parentNode.removeChild(x):c.removeChild(x)):$a.removeChild(x.stateNode));break;case 18:$a!==null&&(Js?(c=$a,x=x.stateNode,c.nodeType===8?_p(c.parentNode,x):c.nodeType===1&&_p(c,x),Gs(c)):_p($a,x.stateNode));break;case 4:j=$a,T=Js,$a=x.stateNode.containerInfo,Js=!0,Po(c,d,x),$a=j,Js=T;break;case 0:case 11:case 14:case 15:if(!Ba&&(j=x.updateQueue,j!==null&&(j=j.lastEffect,j!==null))){T=j=j.next;do{var M=T,te=M.destroy;M=M.tag,te!==void 0&&((M&2)!==0||(M&4)!==0)&&bh(x,d,te),T=T.next}while(T!==j)}Po(c,d,x);break;case 1:if(!Ba&&(Dl(x,d),j=x.stateNode,typeof j.componentWillUnmount=="function"))try{j.props=x.memoizedProps,j.state=x.memoizedState,j.componentWillUnmount()}catch(he){na(x,d,he)}Po(c,d,x);break;case 21:Po(c,d,x);break;case 22:x.mode&1?(Ba=(j=Ba)||x.memoizedState!==null,Po(c,d,x),Ba=j):Po(c,d,x);break;default:Po(c,d,x)}}function tv(c){var d=c.updateQueue;if(d!==null){c.updateQueue=null;var x=c.stateNode;x===null&&(x=c.stateNode=new hS),d.forEach(function(j){var T=jS.bind(null,c,j);x.has(j)||(x.add(j),j.then(T,T))})}}function Zs(c,d){var x=d.deletions;if(x!==null)for(var j=0;j<x.length;j++){var T=x[j];try{var M=c,te=d,he=te;e:for(;he!==null;){switch(he.tag){case 5:$a=he.stateNode,Js=!1;break e;case 3:$a=he.stateNode.containerInfo,Js=!0;break e;case 4:$a=he.stateNode.containerInfo,Js=!0;break e}he=he.return}if($a===null)throw Error(s(160));ev(M,te,T),$a=null,Js=!1;var Ce=T.alternate;Ce!==null&&(Ce.return=null),T.return=null}catch(Ue){na(T,d,Ue)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)rv(d,c),d=d.sibling}function rv(c,d){var x=c.alternate,j=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Zs(d,c),fn(c),j&4){try{Wc(3,c,c.return),n0(3,c)}catch(Vt){na(c,c.return,Vt)}try{Wc(5,c,c.return)}catch(Vt){na(c,c.return,Vt)}}break;case 1:Zs(d,c),fn(c),j&512&&x!==null&&Dl(x,x.return);break;case 5:if(Zs(d,c),fn(c),j&512&&x!==null&&Dl(x,x.return),c.flags&32){var T=c.stateNode;try{A(T,"")}catch(Vt){na(c,c.return,Vt)}}if(j&4&&(T=c.stateNode,T!=null)){var M=c.memoizedProps,te=x!==null?x.memoizedProps:M,he=c.type,Ce=c.updateQueue;if(c.updateQueue=null,Ce!==null)try{he==="input"&&M.type==="radio"&&M.name!=null&&St(T,M),b(he,te);var Ue=b(he,M);for(te=0;te<Ce.length;te+=2){var ct=Ce[te],xt=Ce[te+1];ct==="style"?P(T,xt):ct==="dangerouslySetInnerHTML"?E(T,xt):ct==="children"?A(T,xt):U(T,ct,xt,Ue)}switch(he){case"input":ft(T,M);break;case"textarea":et(T,M);break;case"select":var lt=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!M.multiple;var At=M.value;At!=null?ge(T,!!M.multiple,At,!1):lt!==!!M.multiple&&(M.defaultValue!=null?ge(T,!!M.multiple,M.defaultValue,!0):ge(T,!!M.multiple,M.multiple?[]:"",!1))}T[Rc]=M}catch(Vt){na(c,c.return,Vt)}}break;case 6:if(Zs(d,c),fn(c),j&4){if(c.stateNode===null)throw Error(s(162));T=c.stateNode,M=c.memoizedProps;try{T.nodeValue=M}catch(Vt){na(c,c.return,Vt)}}break;case 3:if(Zs(d,c),fn(c),j&4&&x!==null&&x.memoizedState.isDehydrated)try{Gs(d.containerInfo)}catch(Vt){na(c,c.return,Vt)}break;case 4:Zs(d,c),fn(c);break;case 13:Zs(d,c),fn(c),T=c.child,T.flags&8192&&(M=T.memoizedState!==null,T.stateNode.isHidden=M,!M||T.alternate!==null&&T.alternate.memoizedState!==null||(Nh=Ur())),j&4&&tv(c);break;case 22:if(ct=x!==null&&x.memoizedState!==null,c.mode&1?(Ba=(Ue=Ba)||ct,Zs(d,c),Ba=Ue):Zs(d,c),fn(c),j&8192){if(Ue=c.memoizedState!==null,(c.stateNode.isHidden=Ue)&&!ct&&(c.mode&1)!==0)for(Mt=c,ct=c.child;ct!==null;){for(xt=Mt=ct;Mt!==null;){switch(lt=Mt,At=lt.child,lt.tag){case 0:case 11:case 14:case 15:Wc(4,lt,lt.return);break;case 1:Dl(lt,lt.return);var Lt=lt.stateNode;if(typeof Lt.componentWillUnmount=="function"){j=lt,x=lt.return;try{d=j,Lt.props=d.memoizedProps,Lt.state=d.memoizedState,Lt.componentWillUnmount()}catch(Vt){na(j,x,Vt)}}break;case 5:Dl(lt,lt.return);break;case 22:if(lt.memoizedState!==null){nv(xt);continue}}At!==null?(At.return=lt,Mt=At):nv(xt)}ct=ct.sibling}e:for(ct=null,xt=c;;){if(xt.tag===5){if(ct===null){ct=xt;try{T=xt.stateNode,Ue?(M=T.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none"):(he=xt.stateNode,Ce=xt.memoizedProps.style,te=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null,he.style.display=le("display",te))}catch(Vt){na(c,c.return,Vt)}}}else if(xt.tag===6){if(ct===null)try{xt.stateNode.nodeValue=Ue?"":xt.memoizedProps}catch(Vt){na(c,c.return,Vt)}}else if((xt.tag!==22&&xt.tag!==23||xt.memoizedState===null||xt===c)&&xt.child!==null){xt.child.return=xt,xt=xt.child;continue}if(xt===c)break e;for(;xt.sibling===null;){if(xt.return===null||xt.return===c)break e;ct===xt&&(ct=null),xt=xt.return}ct===xt&&(ct=null),xt.sibling.return=xt.return,xt=xt.sibling}}break;case 19:Zs(d,c),fn(c),j&4&&tv(c);break;case 21:break;default:Zs(d,c),fn(c)}}function fn(c){var d=c.flags;if(d&2){try{e:{for(var x=c.return;x!==null;){if(Jy(x)){var j=x;break e}x=x.return}throw Error(s(160))}switch(j.tag){case 5:var T=j.stateNode;j.flags&32&&(A(T,""),j.flags&=-33);var M=Zy(c);vh(c,M,T);break;case 3:case 4:var te=j.stateNode.containerInfo,he=Zy(c);yh(c,he,te);break;default:throw Error(s(161))}}catch(Ce){na(c,c.return,Ce)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function gS(c,d,x){Mt=c,av(c)}function av(c,d,x){for(var j=(c.mode&1)!==0;Mt!==null;){var T=Mt,M=T.child;if(T.tag===22&&j){var te=T.memoizedState!==null||s0;if(!te){var he=T.alternate,Ce=he!==null&&he.memoizedState!==null||Ba;he=s0;var Ue=Ba;if(s0=te,(Ba=Ce)&&!Ue)for(Mt=T;Mt!==null;)te=Mt,Ce=te.child,te.tag===22&&te.memoizedState!==null?ov(T):Ce!==null?(Ce.return=te,Mt=Ce):ov(T);for(;M!==null;)Mt=M,av(M),M=M.sibling;Mt=T,s0=he,Ba=Ue}sv(c)}else(T.subtreeFlags&8772)!==0&&M!==null?(M.return=T,Mt=M):sv(c)}}function sv(c){for(;Mt!==null;){var d=Mt;if((d.flags&8772)!==0){var x=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Ba||n0(5,d);break;case 1:var j=d.stateNode;if(d.flags&4&&!Ba)if(x===null)j.componentDidMount();else{var T=d.elementType===d.type?x.memoizedProps:Xs(d.type,x.memoizedProps);j.componentDidUpdate(T,x.memoizedState,j.__reactInternalSnapshotBeforeUpdate)}var M=d.updateQueue;M!==null&&ny(d,M,j);break;case 3:var te=d.updateQueue;if(te!==null){if(x=null,d.child!==null)switch(d.child.tag){case 5:x=d.child.stateNode;break;case 1:x=d.child.stateNode}ny(d,te,x)}break;case 5:var he=d.stateNode;if(x===null&&d.flags&4){x=he;var Ce=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":Ce.autoFocus&&x.focus();break;case"img":Ce.src&&(x.src=Ce.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Ue=d.alternate;if(Ue!==null){var ct=Ue.memoizedState;if(ct!==null){var xt=ct.dehydrated;xt!==null&&Gs(xt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Ba||d.flags&512&&fh(d)}catch(lt){na(d,d.return,lt)}}if(d===c){Mt=null;break}if(x=d.sibling,x!==null){x.return=d.return,Mt=x;break}Mt=d.return}}function nv(c){for(;Mt!==null;){var d=Mt;if(d===c){Mt=null;break}var x=d.sibling;if(x!==null){x.return=d.return,Mt=x;break}Mt=d.return}}function ov(c){for(;Mt!==null;){var d=Mt;try{switch(d.tag){case 0:case 11:case 15:var x=d.return;try{n0(4,d)}catch(Ce){na(d,x,Ce)}break;case 1:var j=d.stateNode;if(typeof j.componentDidMount=="function"){var T=d.return;try{j.componentDidMount()}catch(Ce){na(d,T,Ce)}}var M=d.return;try{fh(d)}catch(Ce){na(d,M,Ce)}break;case 5:var te=d.return;try{fh(d)}catch(Ce){na(d,te,Ce)}}}catch(Ce){na(d,d.return,Ce)}if(d===c){Mt=null;break}var he=d.sibling;if(he!==null){he.return=d.return,Mt=he;break}Mt=d.return}}var bS=Math.ceil,o0=ne.ReactCurrentDispatcher,wh=ne.ReactCurrentOwner,Ms=ne.ReactCurrentBatchConfig,Er=0,wa=null,ma=null,Ta=0,ws=0,_l=jo(0),ba=0,Gc=null,Si=0,i0=0,kh=0,Kc=null,os=null,Nh=0,Al=1/0,Gn=null,l0=!1,jh=null,Eo=null,c0=!1,Io=null,d0=0,Qc=0,Ch=null,u0=-1,m0=0;function Ka(){return(Er&6)!==0?Ur():u0!==-1?u0:u0=Ur()}function Do(c){return(c.mode&1)===0?1:(Er&2)!==0&&Ta!==0?Ta&-Ta:eS.transition!==null?(m0===0&&(m0=hi()),m0):(c=Nr,c!==0||(c=window.event,c=c===void 0?16:Nc(c.type)),c)}function en(c,d,x,j){if(50<Qc)throw Qc=0,Ch=null,Error(s(185));go(c,x,j),((Er&2)===0||c!==wa)&&(c===wa&&((Er&2)===0&&(i0|=x),ba===4&&_o(c,Ta)),is(c,j),x===1&&Er===0&&(d.mode&1)===0&&(Al=Ur()+500,Ou&&So()))}function is(c,d){var x=c.callbackNode;Rn(c,d);var j=pi(c,c===wa?Ta:0);if(j===0)x!==null&&di(x),c.callbackNode=null,c.callbackPriority=0;else if(d=j&-j,c.callbackPriority!==d){if(x!=null&&di(x),d===1)c.tag===0?Z6(lv.bind(null,c)):Gf(lv.bind(null,c)),Q6(function(){(Er&6)===0&&So()}),x=null;else{switch(fo(j)){case 1:x=ui;break;case 4:x=po;break;case 16:x=Ps;break;case 536870912:x=mu;break;default:x=Ps}x=gv(x,iv.bind(null,c))}c.callbackPriority=d,c.callbackNode=x}}function iv(c,d){if(u0=-1,m0=0,(Er&6)!==0)throw Error(s(327));var x=c.callbackNode;if(Rl()&&c.callbackNode!==x)return null;var j=pi(c,c===wa?Ta:0);if(j===0)return null;if((j&30)!==0||(j&c.expiredLanes)!==0||d)d=p0(c,j);else{d=j;var T=Er;Er|=2;var M=dv();(wa!==c||Ta!==d)&&(Gn=null,Al=Ur()+500,Ti(c,d));do try{vS();break}catch(he){cv(c,he)}while(!0);Up(),o0.current=M,Er=T,ma!==null?d=0:(wa=null,Ta=0,d=ba)}if(d!==0){if(d===2&&(T=gs(c),T!==0&&(j=T,d=Sh(c,T))),d===1)throw x=Gc,Ti(c,0),_o(c,j),is(c,Ur()),x;if(d===6)_o(c,j);else{if(T=c.current.alternate,(j&30)===0&&!fS(T)&&(d=p0(c,j),d===2&&(M=gs(c),M!==0&&(j=M,d=Sh(c,M))),d===1))throw x=Gc,Ti(c,0),_o(c,j),is(c,Ur()),x;switch(c.finishedWork=T,c.finishedLanes=j,d){case 0:case 1:throw Error(s(345));case 2:Pi(c,os,Gn);break;case 3:if(_o(c,j),(j&130023424)===j&&(d=Nh+500-Ur(),10<d)){if(pi(c,0)!==0)break;if(T=c.suspendedLanes,(T&j)!==j){Ka(),c.pingedLanes|=c.suspendedLanes&T;break}c.timeoutHandle=Dp(Pi.bind(null,c,os,Gn),d);break}Pi(c,os,Gn);break;case 4:if(_o(c,j),(j&4194240)===j)break;for(d=c.eventTimes,T=-1;0<j;){var te=31-Ha(j);M=1<<te,te=d[te],te>T&&(T=te),j&=~M}if(j=T,j=Ur()-j,j=(120>j?120:480>j?480:1080>j?1080:1920>j?1920:3e3>j?3e3:4320>j?4320:1960*bS(j/1960))-j,10<j){c.timeoutHandle=Dp(Pi.bind(null,c,os,Gn),j);break}Pi(c,os,Gn);break;case 5:Pi(c,os,Gn);break;default:throw Error(s(329))}}}return is(c,Ur()),c.callbackNode===x?iv.bind(null,c):null}function Sh(c,d){var x=Kc;return c.current.memoizedState.isDehydrated&&(Ti(c,d).flags|=256),c=p0(c,d),c!==2&&(d=os,os=x,d!==null&&$h(d)),c}function $h(c){os===null?os=c:os.push.apply(os,c)}function fS(c){for(var d=c;;){if(d.flags&16384){var x=d.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var j=0;j<x.length;j++){var T=x[j],M=T.getSnapshot;T=T.value;try{if(!Qs(M(),T))return!1}catch{return!1}}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function _o(c,d){for(d&=~kh,d&=~i0,c.suspendedLanes|=d,c.pingedLanes&=~d,c=c.expirationTimes;0<d;){var x=31-Ha(d),j=1<<x;c[x]=-1,d&=~j}}function lv(c){if((Er&6)!==0)throw Error(s(327));Rl();var d=pi(c,0);if((d&1)===0)return is(c,Ur()),null;var x=p0(c,d);if(c.tag!==0&&x===2){var j=gs(c);j!==0&&(d=j,x=Sh(c,j))}if(x===1)throw x=Gc,Ti(c,0),_o(c,d),is(c,Ur()),x;if(x===6)throw Error(s(345));return c.finishedWork=c.current.alternate,c.finishedLanes=d,Pi(c,os,Gn),is(c,Ur()),null}function Th(c,d){var x=Er;Er|=1;try{return c(d)}finally{Er=x,Er===0&&(Al=Ur()+500,Ou&&So())}}function $i(c){Io!==null&&Io.tag===0&&(Er&6)===0&&Rl();var d=Er;Er|=1;var x=Ms.transition,j=Nr;try{if(Ms.transition=null,Nr=1,c)return c()}finally{Nr=j,Ms.transition=x,Er=d,(Er&6)===0&&So()}}function Ph(){ws=_l.current,Yr(_l)}function Ti(c,d){c.finishedWork=null,c.finishedLanes=0;var x=c.timeoutHandle;if(x!==-1&&(c.timeoutHandle=-1,K6(x)),ma!==null)for(x=ma.return;x!==null;){var j=x;switch(Bp(j),j.tag){case 1:j=j.type.childContextTypes,j!=null&&Bu();break;case 3:El(),Yr(as),Yr(Ra),Xp();break;case 5:Qp(j);break;case 4:El();break;case 13:Yr(Zr);break;case 19:Yr(Zr);break;case 10:qp(j.type._context);break;case 22:case 23:Ph()}x=x.return}if(wa=c,ma=c=Ao(c.current,null),Ta=ws=d,ba=0,Gc=null,kh=i0=Si=0,os=Kc=null,Ni!==null){for(d=0;d<Ni.length;d++)if(x=Ni[d],j=x.interleaved,j!==null){x.interleaved=null;var T=j.next,M=x.pending;if(M!==null){var te=M.next;M.next=T,j.next=te}x.pending=j}Ni=null}return c}function cv(c,d){do{var x=ma;try{if(Up(),Yu.current=e0,Xu){for(var j=ea.memoizedState;j!==null;){var T=j.queue;T!==null&&(T.pending=null),j=j.next}Xu=!1}if(Ci=0,va=ga=ea=null,Vc=!1,Fc=0,wh.current=null,x===null||x.return===null){ba=1,Gc=d,ma=null;break}e:{var M=c,te=x.return,he=x,Ce=d;if(d=Ta,he.flags|=32768,Ce!==null&&typeof Ce=="object"&&typeof Ce.then=="function"){var Ue=Ce,ct=he,xt=ct.tag;if((ct.mode&1)===0&&(xt===0||xt===11||xt===15)){var lt=ct.alternate;lt?(ct.updateQueue=lt.updateQueue,ct.memoizedState=lt.memoizedState,ct.lanes=lt.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var At=Ay(te);if(At!==null){At.flags&=-257,Ry(At,te,he,M,d),At.mode&1&&_y(M,Ue,d),d=At,Ce=Ue;var Lt=d.updateQueue;if(Lt===null){var Vt=new Set;Vt.add(Ce),d.updateQueue=Vt}else Lt.add(Ce);break e}else{if((d&1)===0){_y(M,Ue,d),Eh();break e}Ce=Error(s(426))}}else if(Jr&&he.mode&1){var ia=Ay(te);if(ia!==null){(ia.flags&65536)===0&&(ia.flags|=256),Ry(ia,te,he,M,d),Vp(Il(Ce,he));break e}}M=Ce=Il(Ce,he),ba!==4&&(ba=2),Kc===null?Kc=[M]:Kc.push(M),M=te;do{switch(M.tag){case 3:M.flags|=65536,d&=-d,M.lanes|=d;var ze=Iy(M,Ce,d);sy(M,ze);break e;case 1:he=Ce;var Ie=M.type,Oe=M.stateNode;if((M.flags&128)===0&&(typeof Ie.getDerivedStateFromError=="function"||Oe!==null&&typeof Oe.componentDidCatch=="function"&&(Eo===null||!Eo.has(Oe)))){M.flags|=65536,d&=-d,M.lanes|=d;var yt=Dy(M,he,d);sy(M,yt);break e}}M=M.return}while(M!==null)}mv(x)}catch(Ht){d=Ht,ma===x&&x!==null&&(ma=x=x.return);continue}break}while(!0)}function dv(){var c=o0.current;return o0.current=e0,c===null?e0:c}function Eh(){(ba===0||ba===3||ba===2)&&(ba=4),wa===null||(Si&268435455)===0&&(i0&268435455)===0||_o(wa,Ta)}function p0(c,d){var x=Er;Er|=2;var j=dv();(wa!==c||Ta!==d)&&(Gn=null,Ti(c,d));do try{yS();break}catch(T){cv(c,T)}while(!0);if(Up(),Er=x,o0.current=j,ma!==null)throw Error(s(261));return wa=null,Ta=0,ba}function yS(){for(;ma!==null;)uv(ma)}function vS(){for(;ma!==null&&!rl();)uv(ma)}function uv(c){var d=xv(c.alternate,c,ws);c.memoizedProps=c.pendingProps,d===null?mv(c):ma=d,wh.current=null}function mv(c){var d=c;do{var x=d.alternate;if(c=d.return,(d.flags&32768)===0){if(x=mS(x,d,ws),x!==null){ma=x;return}}else{if(x=pS(x,d),x!==null){x.flags&=32767,ma=x;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{ba=6,ma=null;return}}if(d=d.sibling,d!==null){ma=d;return}ma=d=c}while(d!==null);ba===0&&(ba=5)}function Pi(c,d,x){var j=Nr,T=Ms.transition;try{Ms.transition=null,Nr=1,wS(c,d,x,j)}finally{Ms.transition=T,Nr=j}return null}function wS(c,d,x,j){do Rl();while(Io!==null);if((Er&6)!==0)throw Error(s(327));x=c.finishedWork;var T=c.finishedLanes;if(x===null)return null;if(c.finishedWork=null,c.finishedLanes=0,x===c.current)throw Error(s(177));c.callbackNode=null,c.callbackPriority=0;var M=x.lanes|x.childLanes;if(qr(c,M),c===wa&&(ma=wa=null,Ta=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||c0||(c0=!0,gv(Ps,function(){return Rl(),null})),M=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||M){M=Ms.transition,Ms.transition=null;var te=Nr;Nr=1;var he=Er;Er|=4,wh.current=null,xS(c,x),rv(x,c),V6(Ep),vo=!!Pp,Ep=Pp=null,c.current=x,gS(x),fc(),Er=he,Nr=te,Ms.transition=M}else c.current=x;if(c0&&(c0=!1,Io=c,d0=T),M=c.pendingLanes,M===0&&(Eo=null),pu(x.stateNode),is(c,Ur()),d!==null)for(j=c.onRecoverableError,x=0;x<d.length;x++)T=d[x],j(T.value,{componentStack:T.stack,digest:T.digest});if(l0)throw l0=!1,c=jh,jh=null,c;return(d0&1)!==0&&c.tag!==0&&Rl(),M=c.pendingLanes,(M&1)!==0?c===Ch?Qc++:(Qc=0,Ch=c):Qc=0,So(),null}function Rl(){if(Io!==null){var c=fo(d0),d=Ms.transition,x=Nr;try{if(Ms.transition=null,Nr=16>c?16:c,Io===null)var j=!1;else{if(c=Io,Io=null,d0=0,(Er&6)!==0)throw Error(s(331));var T=Er;for(Er|=4,Mt=c.current;Mt!==null;){var M=Mt,te=M.child;if((Mt.flags&16)!==0){var he=M.deletions;if(he!==null){for(var Ce=0;Ce<he.length;Ce++){var Ue=he[Ce];for(Mt=Ue;Mt!==null;){var ct=Mt;switch(ct.tag){case 0:case 11:case 15:Wc(8,ct,M)}var xt=ct.child;if(xt!==null)xt.return=ct,Mt=xt;else for(;Mt!==null;){ct=Mt;var lt=ct.sibling,At=ct.return;if(Xy(ct),ct===Ue){Mt=null;break}if(lt!==null){lt.return=At,Mt=lt;break}Mt=At}}}var Lt=M.alternate;if(Lt!==null){var Vt=Lt.child;if(Vt!==null){Lt.child=null;do{var ia=Vt.sibling;Vt.sibling=null,Vt=ia}while(Vt!==null)}}Mt=M}}if((M.subtreeFlags&2064)!==0&&te!==null)te.return=M,Mt=te;else e:for(;Mt!==null;){if(M=Mt,(M.flags&2048)!==0)switch(M.tag){case 0:case 11:case 15:Wc(9,M,M.return)}var ze=M.sibling;if(ze!==null){ze.return=M.return,Mt=ze;break e}Mt=M.return}}var Ie=c.current;for(Mt=Ie;Mt!==null;){te=Mt;var Oe=te.child;if((te.subtreeFlags&2064)!==0&&Oe!==null)Oe.return=te,Mt=Oe;else e:for(te=Ie;Mt!==null;){if(he=Mt,(he.flags&2048)!==0)try{switch(he.tag){case 0:case 11:case 15:n0(9,he)}}catch(Ht){na(he,he.return,Ht)}if(he===te){Mt=null;break e}var yt=he.sibling;if(yt!==null){yt.return=he.return,Mt=yt;break e}Mt=he.return}}if(Er=T,So(),xs&&typeof xs.onPostCommitFiberRoot=="function")try{xs.onPostCommitFiberRoot(mi,c)}catch{}j=!0}return j}finally{Nr=x,Ms.transition=d}}return!1}function pv(c,d,x){d=Il(x,d),d=Iy(c,d,1),c=To(c,d,1),d=Ka(),c!==null&&(go(c,1,d),is(c,d))}function na(c,d,x){if(c.tag===3)pv(c,c,x);else for(;d!==null;){if(d.tag===3){pv(d,c,x);break}else if(d.tag===1){var j=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(Eo===null||!Eo.has(j))){c=Il(x,c),c=Dy(d,c,1),d=To(d,c,1),c=Ka(),d!==null&&(go(d,1,c),is(d,c));break}}d=d.return}}function kS(c,d,x){var j=c.pingCache;j!==null&&j.delete(d),d=Ka(),c.pingedLanes|=c.suspendedLanes&x,wa===c&&(Ta&x)===x&&(ba===4||ba===3&&(Ta&130023424)===Ta&&500>Ur()-Nh?Ti(c,0):kh|=x),is(c,d)}function hv(c,d){d===0&&((c.mode&1)===0?d=1:(d=sl,sl<<=1,(sl&130023424)===0&&(sl=4194304)));var x=Ka();c=qn(c,d),c!==null&&(go(c,d,x),is(c,x))}function NS(c){var d=c.memoizedState,x=0;d!==null&&(x=d.retryLane),hv(c,x)}function jS(c,d){var x=0;switch(c.tag){case 13:var j=c.stateNode,T=c.memoizedState;T!==null&&(x=T.retryLane);break;case 19:j=c.stateNode;break;default:throw Error(s(314))}j!==null&&j.delete(d),hv(c,x)}var xv;xv=function(c,d,x){if(c!==null)if(c.memoizedProps!==d.pendingProps||as.current)ns=!0;else{if((c.lanes&x)===0&&(d.flags&128)===0)return ns=!1,uS(c,d,x);ns=(c.flags&131072)!==0}else ns=!1,Jr&&(d.flags&1048576)!==0&&Kf(d,Fu,d.index);switch(d.lanes=0,d.tag){case 2:var j=d.type;a0(c,d),c=d.pendingProps;var T=Nl(d,Ra.current);Pl(d,x),T=eh(null,d,j,c,T,x);var M=th();return d.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,ss(j)?(M=!0,Lu(d)):M=!1,d.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,Gp(d),T.updater=t0,d.stateNode=T,T._reactInternals=d,ih(d,j,c,x),d=uh(null,d,j,!0,M,x)):(d.tag=0,Jr&&M&&zp(d),Ga(null,d,T,x),d=d.child),d;case 16:j=d.elementType;e:{switch(a0(c,d),c=d.pendingProps,T=j._init,j=T(j._payload),d.type=j,T=d.tag=SS(j),c=Xs(j,c),T){case 0:d=dh(null,d,j,c,x);break e;case 1:d=Vy(null,d,j,c,x);break e;case 11:d=My(null,d,j,c,x);break e;case 14:d=zy(null,d,j,Xs(j.type,c),x);break e}throw Error(s(306,j,""))}return d;case 0:return j=d.type,T=d.pendingProps,T=d.elementType===j?T:Xs(j,T),dh(c,d,j,T,x);case 1:return j=d.type,T=d.pendingProps,T=d.elementType===j?T:Xs(j,T),Vy(c,d,j,T,x);case 3:e:{if(Fy(d),c===null)throw Error(s(387));j=d.pendingProps,M=d.memoizedState,T=M.element,ay(c,d),Ku(d,j,null,x);var te=d.memoizedState;if(j=te.element,M.isDehydrated)if(M={element:j,isDehydrated:!1,cache:te.cache,pendingSuspenseBoundaries:te.pendingSuspenseBoundaries,transitions:te.transitions},d.updateQueue.baseState=M,d.memoizedState=M,d.flags&256){T=Il(Error(s(423)),d),d=Uy(c,d,j,x,T);break e}else if(j!==T){T=Il(Error(s(424)),d),d=Uy(c,d,j,x,T);break e}else for(vs=No(d.stateNode.containerInfo.firstChild),ys=d,Jr=!0,Ys=null,x=ty(d,null,j,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Sl(),j===T){d=Wn(c,d,x);break e}Ga(c,d,j,x)}d=d.child}return d;case 5:return oy(d),c===null&&Op(d),j=d.type,T=d.pendingProps,M=c!==null?c.memoizedProps:null,te=T.children,Ip(j,T)?te=null:M!==null&&Ip(j,M)&&(d.flags|=32),Oy(c,d),Ga(c,d,te,x),d.child;case 6:return c===null&&Op(d),null;case 13:return qy(c,d,x);case 4:return Kp(d,d.stateNode.containerInfo),j=d.pendingProps,c===null?d.child=$l(d,null,j,x):Ga(c,d,j,x),d.child;case 11:return j=d.type,T=d.pendingProps,T=d.elementType===j?T:Xs(j,T),My(c,d,j,T,x);case 7:return Ga(c,d,d.pendingProps,x),d.child;case 8:return Ga(c,d,d.pendingProps.children,x),d.child;case 12:return Ga(c,d,d.pendingProps.children,x),d.child;case 10:e:{if(j=d.type._context,T=d.pendingProps,M=d.memoizedProps,te=T.value,Gr(Hu,j._currentValue),j._currentValue=te,M!==null)if(Qs(M.value,te)){if(M.children===T.children&&!as.current){d=Wn(c,d,x);break e}}else for(M=d.child,M!==null&&(M.return=d);M!==null;){var he=M.dependencies;if(he!==null){te=M.child;for(var Ce=he.firstContext;Ce!==null;){if(Ce.context===j){if(M.tag===1){Ce=Hn(-1,x&-x),Ce.tag=2;var Ue=M.updateQueue;if(Ue!==null){Ue=Ue.shared;var ct=Ue.pending;ct===null?Ce.next=Ce:(Ce.next=ct.next,ct.next=Ce),Ue.pending=Ce}}M.lanes|=x,Ce=M.alternate,Ce!==null&&(Ce.lanes|=x),Hp(M.return,x,d),he.lanes|=x;break}Ce=Ce.next}}else if(M.tag===10)te=M.type===d.type?null:M.child;else if(M.tag===18){if(te=M.return,te===null)throw Error(s(341));te.lanes|=x,he=te.alternate,he!==null&&(he.lanes|=x),Hp(te,x,d),te=M.sibling}else te=M.child;if(te!==null)te.return=M;else for(te=M;te!==null;){if(te===d){te=null;break}if(M=te.sibling,M!==null){M.return=te.return,te=M;break}te=te.return}M=te}Ga(c,d,T.children,x),d=d.child}return d;case 9:return T=d.type,j=d.pendingProps.children,Pl(d,x),T=As(T),j=j(T),d.flags|=1,Ga(c,d,j,x),d.child;case 14:return j=d.type,T=Xs(j,d.pendingProps),T=Xs(j.type,T),zy(c,d,j,T,x);case 15:return By(c,d,d.type,d.pendingProps,x);case 17:return j=d.type,T=d.pendingProps,T=d.elementType===j?T:Xs(j,T),a0(c,d),d.tag=1,ss(j)?(c=!0,Lu(d)):c=!1,Pl(d,x),Py(d,j,T),ih(d,j,T,x),uh(null,d,j,!0,c,x);case 19:return Wy(c,d,x);case 22:return Ly(c,d,x)}throw Error(s(156,d.tag))};function gv(c,d){return cn(c,d)}function CS(c,d,x,j){this.tag=c,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zs(c,d,x,j){return new CS(c,d,x,j)}function Ih(c){return c=c.prototype,!(!c||!c.isReactComponent)}function SS(c){if(typeof c=="function")return Ih(c)?1:0;if(c!=null){if(c=c.$$typeof,c===ee)return 11;if(c===ut)return 14}return 2}function Ao(c,d){var x=c.alternate;return x===null?(x=zs(c.tag,d,c.key,c.mode),x.elementType=c.elementType,x.type=c.type,x.stateNode=c.stateNode,x.alternate=c,c.alternate=x):(x.pendingProps=d,x.type=c.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=c.flags&14680064,x.childLanes=c.childLanes,x.lanes=c.lanes,x.child=c.child,x.memoizedProps=c.memoizedProps,x.memoizedState=c.memoizedState,x.updateQueue=c.updateQueue,d=c.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=c.sibling,x.index=c.index,x.ref=c.ref,x}function h0(c,d,x,j,T,M){var te=2;if(j=c,typeof c=="function")Ih(c)&&(te=1);else if(typeof c=="string")te=5;else e:switch(c){case K:return Ei(x.children,T,M,d);case V:te=8,T|=8;break;case L:return c=zs(12,x,d,T|2),c.elementType=L,c.lanes=M,c;case re:return c=zs(13,x,d,T),c.elementType=re,c.lanes=M,c;case He:return c=zs(19,x,d,T),c.elementType=He,c.lanes=M,c;case Je:return x0(x,T,M,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case y:te=10;break e;case se:te=9;break e;case ee:te=11;break e;case ut:te=14;break e;case it:te=16,j=null;break e}throw Error(s(130,c==null?c:typeof c,""))}return d=zs(te,x,d,T),d.elementType=c,d.type=j,d.lanes=M,d}function Ei(c,d,x,j){return c=zs(7,c,j,d),c.lanes=x,c}function x0(c,d,x,j){return c=zs(22,c,j,d),c.elementType=Je,c.lanes=x,c.stateNode={isHidden:!1},c}function Dh(c,d,x){return c=zs(6,c,null,d),c.lanes=x,c}function _h(c,d,x){return d=zs(4,c.children!==null?c.children:[],c.key,d),d.lanes=x,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function $S(c,d,x,j,T){this.tag=d,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xo(0),this.expirationTimes=xo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xo(0),this.identifierPrefix=j,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function Ah(c,d,x,j,T,M,te,he,Ce){return c=new $S(c,d,x,he,Ce),d===1?(d=1,M===!0&&(d|=8)):d=0,M=zs(3,null,null,d),c.current=M,M.stateNode=c,M.memoizedState={element:j,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gp(M),c}function TS(c,d,x){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$e,key:j==null?null:""+j,children:c,containerInfo:d,implementation:x}}function bv(c){if(!c)return Co;c=c._reactInternals;e:{if(qa(c)!==c||c.tag!==1)throw Error(s(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(ss(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(s(171))}if(c.tag===1){var x=c.type;if(ss(x))return Hf(c,x,d)}return d}function fv(c,d,x,j,T,M,te,he,Ce){return c=Ah(x,j,!0,c,T,M,te,he,Ce),c.context=bv(null),x=c.current,j=Ka(),T=Do(x),M=Hn(j,T),M.callback=d??null,To(x,M,T),c.current.lanes=T,go(c,T,j),is(c,j),c}function g0(c,d,x,j){var T=d.current,M=Ka(),te=Do(T);return x=bv(x),d.context===null?d.context=x:d.pendingContext=x,d=Hn(M,te),d.payload={element:c},j=j===void 0?null:j,j!==null&&(d.callback=j),c=To(T,d,te),c!==null&&(en(c,T,te,M),Gu(c,T,te)),te}function b0(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function yv(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var x=c.retryLane;c.retryLane=x!==0&&x<d?x:d}}function Rh(c,d){yv(c,d),(c=c.alternate)&&yv(c,d)}function PS(){return null}var vv=typeof reportError=="function"?reportError:function(c){console.error(c)};function Mh(c){this._internalRoot=c}f0.prototype.render=Mh.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(s(409));g0(c,d,null,null)},f0.prototype.unmount=Mh.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;$i(function(){g0(null,c,null,null)}),d[On]=null}};function f0(c){this._internalRoot=c}f0.prototype.unstable_scheduleHydration=function(c){if(c){var d=fu();c={blockedOn:null,target:c,priority:d};for(var x=0;x<un.length&&d!==0&&d<un[x].priority;x++);un.splice(x,0,c),x===0&&wu(c)}};function zh(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function y0(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function wv(){}function ES(c,d,x,j,T){if(T){if(typeof j=="function"){var M=j;j=function(){var Ue=b0(te);M.call(Ue)}}var te=fv(d,j,c,0,null,!1,!1,"",wv);return c._reactRootContainer=te,c[On]=te.current,_c(c.nodeType===8?c.parentNode:c),$i(),te}for(;T=c.lastChild;)c.removeChild(T);if(typeof j=="function"){var he=j;j=function(){var Ue=b0(Ce);he.call(Ue)}}var Ce=Ah(c,0,!1,null,null,!1,!1,"",wv);return c._reactRootContainer=Ce,c[On]=Ce.current,_c(c.nodeType===8?c.parentNode:c),$i(function(){g0(d,Ce,x,j)}),Ce}function v0(c,d,x,j,T){var M=x._reactRootContainer;if(M){var te=M;if(typeof T=="function"){var he=T;T=function(){var Ce=b0(te);he.call(Ce)}}g0(d,te,c,T)}else te=ES(x,d,c,T,j);return b0(te)}gu=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var x=ho(d.pendingLanes);x!==0&&(bo(d,x|1),is(d,Ur()),(Er&6)===0&&(Al=Ur()+500,So()))}break;case 13:$i(function(){var j=qn(c,1);if(j!==null){var T=Ka();en(j,c,1,T)}}),Rh(c,1)}},nl=function(c){if(c.tag===13){var d=qn(c,134217728);if(d!==null){var x=Ka();en(d,c,134217728,x)}Rh(c,134217728)}},bu=function(c){if(c.tag===13){var d=Do(c),x=qn(c,d);if(x!==null){var j=Ka();en(x,c,d,j)}Rh(c,d)}},fu=function(){return Nr},yu=function(c,d){var x=Nr;try{return Nr=c,d()}finally{Nr=x}},me=function(c,d,x){switch(d){case"input":if(ft(c,x),d=x.name,x.type==="radio"&&d!=null){for(x=c;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<x.length;d++){var j=x[d];if(j!==c&&j.form===c.form){var T=zu(j);if(!T)throw Error(s(90));Pt(j),ft(j,T)}}}break;case"textarea":et(c,x);break;case"select":d=x.value,d!=null&&ge(c,!!x.multiple,d,!1)}},dt=Th,ht=$i;var IS={usingClientEntryPoint:!1,Events:[Mc,wl,zu,Ee,xe,Th]},Yc={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DS={bundleType:Yc.bundleType,version:Yc.version,rendererPackageName:Yc.rendererPackageName,rendererConfig:Yc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=ci(c),c===null?null:c.stateNode},findFiberByHostInstance:Yc.findFiberByHostInstance||PS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var w0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!w0.isDisabled&&w0.supportsFiber)try{mi=w0.inject(DS),xs=w0}catch{}}return ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IS,ls.createPortal=function(c,d){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zh(d))throw Error(s(200));return TS(c,d,null,x)},ls.createRoot=function(c,d){if(!zh(c))throw Error(s(299));var x=!1,j="",T=vv;return d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(j=d.identifierPrefix),d.onRecoverableError!==void 0&&(T=d.onRecoverableError)),d=Ah(c,1,!1,null,null,x,!1,j,T),c[On]=d.current,_c(c.nodeType===8?c.parentNode:c),new Mh(d)},ls.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(s(188)):(c=Object.keys(c).join(","),Error(s(268,c)));return c=ci(d),c=c===null?null:c.stateNode,c},ls.flushSync=function(c){return $i(c)},ls.hydrate=function(c,d,x){if(!y0(d))throw Error(s(200));return v0(null,c,d,!0,x)},ls.hydrateRoot=function(c,d,x){if(!zh(c))throw Error(s(405));var j=x!=null&&x.hydratedSources||null,T=!1,M="",te=vv;if(x!=null&&(x.unstable_strictMode===!0&&(T=!0),x.identifierPrefix!==void 0&&(M=x.identifierPrefix),x.onRecoverableError!==void 0&&(te=x.onRecoverableError)),d=fv(d,null,c,1,x??null,T,!1,M,te),c[On]=d.current,_c(c),j)for(c=0;c<j.length;c++)x=j[c],T=x._getVersion,T=T(x._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[x,T]:d.mutableSourceEagerHydrationData.push(x,T);return new f0(d)},ls.render=function(c,d,x){if(!y0(d))throw Error(s(200));return v0(null,c,d,!1,x)},ls.unmountComponentAtNode=function(c){if(!y0(c))throw Error(s(40));return c._reactRootContainer?($i(function(){v0(null,null,c,!1,function(){c._reactRootContainer=null,c[On]=null})}),!0):!1},ls.unstable_batchedUpdates=Th,ls.unstable_renderSubtreeIntoContainer=function(c,d,x,j){if(!y0(x))throw Error(s(200));if(c==null||c._reactInternals===void 0)throw Error(s(38));return v0(c,d,x,!1,j)},ls.version="18.3.1-next-f1338f8080-20240426",ls}var Pv;function OS(){if(Pv)return Oh.exports;Pv=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Oh.exports=LS(),Oh.exports}var Ev;function VS(){if(Ev)return k0;Ev=1;var a=OS();return k0.createRoot=a.createRoot,k0.hydrateRoot=a.hydrateRoot,k0}var FS=VS();const US=bg(FS);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Iv="popstate";function qS(a={}){function t(n,i){let{pathname:u,search:l,hash:p}=n.location;return kx("",{pathname:u,search:l,hash:p},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(n,i){return typeof i=="string"?i:wd(i)}return WS(t,s,null,a)}function ra(a,t){if(a===!1||a===null||typeof a>"u")throw new Error(t)}function $n(a,t){if(!a){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function HS(){return Math.random().toString(36).substring(2,10)}function Dv(a,t){return{usr:a.state,key:a.key,idx:t}}function kx(a,t,s=null,n){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof t=="string"?ic(t):t,state:s,key:t&&t.key||n||HS()}}function wd({pathname:a="/",search:t="",hash:s=""}){return t&&t!=="?"&&(a+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(a+=s.charAt(0)==="#"?s:"#"+s),a}function ic(a){let t={};if(a){let s=a.indexOf("#");s>=0&&(t.hash=a.substring(s),a=a.substring(0,s));let n=a.indexOf("?");n>=0&&(t.search=a.substring(n),a=a.substring(0,n)),a&&(t.pathname=a)}return t}function WS(a,t,s,n={}){let{window:i=document.defaultView,v5Compat:u=!1}=n,l=i.history,p="POP",h=null,k=S();k==null&&(k=0,l.replaceState({...l.state,idx:k},""));function S(){return(l.state||{idx:null}).idx}function $(){p="POP";let N=S(),G=N==null?null:N-k;k=N,h&&h({action:p,location:W.location,delta:G})}function D(N,G){p="PUSH";let H=kx(W.location,N,G);k=S()+1;let U=Dv(H,k),ne=W.createHref(H);try{l.pushState(U,"",ne)}catch(oe){if(oe instanceof DOMException&&oe.name==="DataCloneError")throw oe;i.location.assign(ne)}u&&h&&h({action:p,location:W.location,delta:1})}function O(N,G){p="REPLACE";let H=kx(W.location,N,G);k=S();let U=Dv(H,k),ne=W.createHref(H);l.replaceState(U,"",ne),u&&h&&h({action:p,location:W.location,delta:0})}function Y(N){return GS(N)}let W={get action(){return p},get location(){return a(i,l)},listen(N){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(Iv,$),h=N,()=>{i.removeEventListener(Iv,$),h=null}},createHref(N){return t(i,N)},createURL:Y,encodeLocation(N){let G=Y(N);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:D,replace:O,go(N){return l.go(N)}};return W}function GS(a,t=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),ra(s,"No window.location.(origin|href) available to create URL");let n=typeof a=="string"?a:wd(a);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=s+n),new URL(n,s)}function QN(a,t,s="/"){return KS(a,t,s,!1)}function KS(a,t,s,n){let i=typeof t=="string"?ic(t):t,u=to(i.pathname||"/",s);if(u==null)return null;let l=YN(a);QS(l);let p=null;for(let h=0;p==null&&h<l.length;++h){let k=o$(u);p=s$(l[h],k,n)}return p}function YN(a,t=[],s=[],n="",i=!1){let u=(l,p,h=i,k)=>{let S={relativePath:k===void 0?l.path||"":k,caseSensitive:l.caseSensitive===!0,childrenIndex:p,route:l};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(n)&&h)return;ra(S.relativePath.startsWith(n),`Absolute route path "${S.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(n.length)}let $=Jn([n,S.relativePath]),D=s.concat(S);l.children&&l.children.length>0&&(ra(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${$}".`),YN(l.children,t,D,$,h)),!(l.path==null&&!l.index)&&t.push({path:$,score:r$($,l.index),routesMeta:D})};return a.forEach((l,p)=>{if(l.path===""||!l.path?.includes("?"))u(l,p);else for(let h of XN(l.path))u(l,p,!0,h)}),t}function XN(a){let t=a.split("/");if(t.length===0)return[];let[s,...n]=t,i=s.endsWith("?"),u=s.replace(/\?$/,"");if(n.length===0)return i?[u,""]:[u];let l=XN(n.join("/")),p=[];return p.push(...l.map(h=>h===""?u:[u,h].join("/"))),i&&p.push(...l),p.map(h=>a.startsWith("/")&&h===""?"/":h)}function QS(a){a.sort((t,s)=>t.score!==s.score?s.score-t.score:a$(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}var YS=/^:[\w-]+$/,XS=3,JS=2,ZS=1,e$=10,t$=-2,_v=a=>a==="*";function r$(a,t){let s=a.split("/"),n=s.length;return s.some(_v)&&(n+=t$),t&&(n+=JS),s.filter(i=>!_v(i)).reduce((i,u)=>i+(YS.test(u)?XS:u===""?ZS:e$),n)}function a$(a,t){return a.length===t.length&&a.slice(0,-1).every((n,i)=>n===t[i])?a[a.length-1]-t[t.length-1]:0}function s$(a,t,s=!1){let{routesMeta:n}=a,i={},u="/",l=[];for(let p=0;p<n.length;++p){let h=n[p],k=p===n.length-1,S=u==="/"?t:t.slice(u.length)||"/",$=X0({path:h.relativePath,caseSensitive:h.caseSensitive,end:k},S),D=h.route;if(!$&&k&&s&&!n[n.length-1].route.index&&($=X0({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},S)),!$)return null;Object.assign(i,$.params),l.push({params:i,pathname:Jn([u,$.pathname]),pathnameBase:d$(Jn([u,$.pathnameBase])),route:D}),$.pathnameBase!=="/"&&(u=Jn([u,$.pathnameBase]))}return l}function X0(a,t){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[s,n]=n$(a.path,a.caseSensitive,a.end),i=t.match(s);if(!i)return null;let u=i[0],l=u.replace(/(.)\/+$/,"$1"),p=i.slice(1);return{params:n.reduce((k,{paramName:S,isOptional:$},D)=>{if(S==="*"){let Y=p[D]||"";l=u.slice(0,u.length-Y.length).replace(/(.)\/+$/,"$1")}const O=p[D];return $&&!O?k[S]=void 0:k[S]=(O||"").replace(/%2F/g,"/"),k},{}),pathname:u,pathnameBase:l,pattern:a}}function n$(a,t=!1,s=!0){$n(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let n=[],i="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,p,h)=>(n.push({paramName:p,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(n.push({paramName:"*"}),i+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":a!==""&&a!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function o$(a){try{return a.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return $n(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),a}}function to(a,t){if(t==="/")return a;if(!a.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=a.charAt(s);return n&&n!=="/"?null:a.slice(s)||"/"}function i$(a,t="/"){let{pathname:s,search:n="",hash:i=""}=typeof a=="string"?ic(a):a;return{pathname:s?s.startsWith("/")?s:l$(s,t):t,search:u$(n),hash:m$(i)}}function l$(a,t){let s=t.replace(/\/+$/,"").split("/");return a.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Uh(a,t,s,n){return`Cannot include a '${a}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function c$(a){return a.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function JN(a){let t=c$(a);return t.map((s,n)=>n===t.length-1?s.pathname:s.pathnameBase)}function ZN(a,t,s,n=!1){let i;typeof a=="string"?i=ic(a):(i={...a},ra(!i.pathname||!i.pathname.includes("?"),Uh("?","pathname","search",i)),ra(!i.pathname||!i.pathname.includes("#"),Uh("#","pathname","hash",i)),ra(!i.search||!i.search.includes("#"),Uh("#","search","hash",i)));let u=a===""||i.pathname==="",l=u?"/":i.pathname,p;if(l==null)p=s;else{let $=t.length-1;if(!n&&l.startsWith("..")){let D=l.split("/");for(;D[0]==="..";)D.shift(),$-=1;i.pathname=D.join("/")}p=$>=0?t[$]:"/"}let h=i$(i,p),k=l&&l!=="/"&&l.endsWith("/"),S=(u||l===".")&&s.endsWith("/");return!h.pathname.endsWith("/")&&(k||S)&&(h.pathname+="/"),h}var Jn=a=>a.join("/").replace(/\/\/+/g,"/"),d$=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),u$=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,m$=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function p$(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var ej=["POST","PUT","PATCH","DELETE"];new Set(ej);var h$=["GET",...ej];new Set(h$);var lc=m.createContext(null);lc.displayName="DataRouter";var Am=m.createContext(null);Am.displayName="DataRouterState";m.createContext(!1);var tj=m.createContext({isTransitioning:!1});tj.displayName="ViewTransition";var x$=m.createContext(new Map);x$.displayName="Fetchers";var g$=m.createContext(null);g$.displayName="Await";var In=m.createContext(null);In.displayName="Navigation";var Fd=m.createContext(null);Fd.displayName="Location";var lo=m.createContext({outlet:null,matches:[],isDataRoute:!1});lo.displayName="Route";var yg=m.createContext(null);yg.displayName="RouteError";function b$(a,{relative:t}={}){ra(Ud(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:n}=m.useContext(In),{hash:i,pathname:u,search:l}=qd(a,{relative:t}),p=u;return s!=="/"&&(p=u==="/"?s:Jn([s,u])),n.createHref({pathname:p,search:l,hash:i})}function Ud(){return m.useContext(Fd)!=null}function Yi(){return ra(Ud(),"useLocation() may be used only in the context of a <Router> component."),m.useContext(Fd).location}var rj="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function aj(a){m.useContext(In).static||m.useLayoutEffect(a)}function cr(){let{isDataRoute:a}=m.useContext(lo);return a?E$():f$()}function f$(){ra(Ud(),"useNavigate() may be used only in the context of a <Router> component.");let a=m.useContext(lc),{basename:t,navigator:s}=m.useContext(In),{matches:n}=m.useContext(lo),{pathname:i}=Yi(),u=JSON.stringify(JN(n)),l=m.useRef(!1);return aj(()=>{l.current=!0}),m.useCallback((h,k={})=>{if($n(l.current,rj),!l.current)return;if(typeof h=="number"){s.go(h);return}let S=ZN(h,JSON.parse(u),i,k.relative==="path");a==null&&t!=="/"&&(S.pathname=S.pathname==="/"?t:Jn([t,S.pathname])),(k.replace?s.replace:s.push)(S,k.state,k)},[t,s,u,i,a])}m.createContext(null);function qd(a,{relative:t}={}){let{matches:s}=m.useContext(lo),{pathname:n}=Yi(),i=JSON.stringify(JN(s));return m.useMemo(()=>ZN(a,JSON.parse(i),n,t==="path"),[a,i,n,t])}function y$(a,t){return sj(a,t)}function sj(a,t,s,n,i){ra(Ud(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=m.useContext(In),{matches:l}=m.useContext(lo),p=l[l.length-1],h=p?p.params:{},k=p?p.pathname:"/",S=p?p.pathnameBase:"/",$=p&&p.route;{let H=$&&$.path||"";nj(k,!$||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${k}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let D=Yi(),O;if(t){let H=typeof t=="string"?ic(t):t;ra(S==="/"||H.pathname?.startsWith(S),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${H.pathname}" was given in the \`location\` prop.`),O=H}else O=D;let Y=O.pathname||"/",W=Y;if(S!=="/"){let H=S.replace(/^\//,"").split("/");W="/"+Y.replace(/^\//,"").split("/").slice(H.length).join("/")}let N=QN(a,{pathname:W});$n($||N!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),$n(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let G=j$(N&&N.map(H=>Object.assign({},H,{params:Object.assign({},h,H.params),pathname:Jn([S,u.encodeLocation?u.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?S:Jn([S,u.encodeLocation?u.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),l,s,n,i);return t&&G?m.createElement(Fd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},G):G}function v$(){let a=P$(),t=p$(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),s=a instanceof Error?a.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},u={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",a),l=m.createElement(m.Fragment,null,m.createElement("p",null,"💿 Hey developer 👋"),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:u},"ErrorBoundary")," or"," ",m.createElement("code",{style:u},"errorElement")," prop on your route.")),m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),s?m.createElement("pre",{style:i},s):null,l)}var w$=m.createElement(v$,null),k$=class extends m.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,t){return t.location!==a.location||t.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:t.error,location:t.location,revalidation:a.revalidation||t.revalidation}}componentDidCatch(a,t){this.props.unstable_onError?this.props.unstable_onError(a,t):console.error("React Router caught the following error during render",a)}render(){return this.state.error!==void 0?m.createElement(lo.Provider,{value:this.props.routeContext},m.createElement(yg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function N$({routeContext:a,match:t,children:s}){let n=m.useContext(lc);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),m.createElement(lo.Provider,{value:a},s)}function j$(a,t=[],s=null,n=null,i=null){if(a==null){if(!s)return null;if(s.errors)a=s.matches;else if(t.length===0&&!s.initialized&&s.matches.length>0)a=s.matches;else return null}let u=a,l=s?.errors;if(l!=null){let k=u.findIndex(S=>S.route.id&&l?.[S.route.id]!==void 0);ra(k>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),u=u.slice(0,Math.min(u.length,k+1))}let p=!1,h=-1;if(s)for(let k=0;k<u.length;k++){let S=u[k];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(h=k),S.route.id){let{loaderData:$,errors:D}=s,O=S.route.loader&&!$.hasOwnProperty(S.route.id)&&(!D||D[S.route.id]===void 0);if(S.route.lazy||O){p=!0,h>=0?u=u.slice(0,h+1):u=[u[0]];break}}}return u.reduceRight((k,S,$)=>{let D,O=!1,Y=null,W=null;s&&(D=l&&S.route.id?l[S.route.id]:void 0,Y=S.route.errorElement||w$,p&&(h<0&&$===0?(nj("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,W=null):h===$&&(O=!0,W=S.route.hydrateFallbackElement||null)));let N=t.concat(u.slice(0,$+1)),G=()=>{let H;return D?H=Y:O?H=W:S.route.Component?H=m.createElement(S.route.Component,null):S.route.element?H=S.route.element:H=k,m.createElement(N$,{match:S,routeContext:{outlet:k,matches:N,isDataRoute:s!=null},children:H})};return s&&(S.route.ErrorBoundary||S.route.errorElement||$===0)?m.createElement(k$,{location:s.location,revalidation:s.revalidation,component:Y,error:D,children:G(),routeContext:{outlet:null,matches:N,isDataRoute:!0},unstable_onError:n}):G()},null)}function vg(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function C$(a){let t=m.useContext(lc);return ra(t,vg(a)),t}function S$(a){let t=m.useContext(Am);return ra(t,vg(a)),t}function $$(a){let t=m.useContext(lo);return ra(t,vg(a)),t}function wg(a){let t=$$(a),s=t.matches[t.matches.length-1];return ra(s.route.id,`${a} can only be used on routes that contain a unique "id"`),s.route.id}function T$(){return wg("useRouteId")}function P$(){let a=m.useContext(yg),t=S$("useRouteError"),s=wg("useRouteError");return a!==void 0?a:t.errors?.[s]}function E$(){let{router:a}=C$("useNavigate"),t=wg("useNavigate"),s=m.useRef(!1);return aj(()=>{s.current=!0}),m.useCallback(async(i,u={})=>{$n(s.current,rj),s.current&&(typeof i=="number"?a.navigate(i):await a.navigate(i,{fromRouteId:t,...u}))},[a,t])}var Av={};function nj(a,t,s){!t&&!Av[a]&&(Av[a]=!0,$n(!1,s))}m.memo(I$);function I$({routes:a,future:t,state:s,unstable_onError:n}){return sj(a,void 0,s,n,t)}function mr(a){ra(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function D$({basename:a="/",children:t=null,location:s,navigationType:n="POP",navigator:i,static:u=!1}){ra(!Ud(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=a.replace(/^\/*/,"/"),p=m.useMemo(()=>({basename:l,navigator:i,static:u,future:{}}),[l,i,u]);typeof s=="string"&&(s=ic(s));let{pathname:h="/",search:k="",hash:S="",state:$=null,key:D="default"}=s,O=m.useMemo(()=>{let Y=to(h,l);return Y==null?null:{location:{pathname:Y,search:k,hash:S,state:$,key:D},navigationType:n}},[l,h,k,S,$,D,n]);return $n(O!=null,`<Router basename="${l}"> is not able to match the URL "${h}${k}${S}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:m.createElement(In.Provider,{value:p},m.createElement(Fd.Provider,{children:t,value:O}))}function _$({children:a,location:t}){return y$(Nx(a),t)}function Nx(a,t=[]){let s=[];return m.Children.forEach(a,(n,i)=>{if(!m.isValidElement(n))return;let u=[...t,i];if(n.type===m.Fragment){s.push.apply(s,Nx(n.props.children,u));return}ra(n.type===mr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ra(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||u.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Nx(n.props.children,u)),s.push(l)}),s}var R0="get",M0="application/x-www-form-urlencoded";function Rm(a){return a!=null&&typeof a.tagName=="string"}function A$(a){return Rm(a)&&a.tagName.toLowerCase()==="button"}function R$(a){return Rm(a)&&a.tagName.toLowerCase()==="form"}function M$(a){return Rm(a)&&a.tagName.toLowerCase()==="input"}function z$(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function B$(a,t){return a.button===0&&(!t||t==="_self")&&!z$(a)}var N0=null;function L$(){if(N0===null)try{new FormData(document.createElement("form"),0),N0=!1}catch{N0=!0}return N0}var O$=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qh(a){return a!=null&&!O$.has(a)?($n(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${M0}"`),null):a}function V$(a,t){let s,n,i,u,l;if(R$(a)){let p=a.getAttribute("action");n=p?to(p,t):null,s=a.getAttribute("method")||R0,i=qh(a.getAttribute("enctype"))||M0,u=new FormData(a)}else if(A$(a)||M$(a)&&(a.type==="submit"||a.type==="image")){let p=a.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=a.getAttribute("formaction")||p.getAttribute("action");if(n=h?to(h,t):null,s=a.getAttribute("formmethod")||p.getAttribute("method")||R0,i=qh(a.getAttribute("formenctype"))||qh(p.getAttribute("enctype"))||M0,u=new FormData(p,a),!L$()){let{name:k,type:S,value:$}=a;if(S==="image"){let D=k?`${k}.`:"";u.append(`${D}x`,"0"),u.append(`${D}y`,"0")}else k&&u.append(k,$)}}else{if(Rm(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=R0,n=null,i=M0,l=a}return u&&i==="text/plain"&&(l=u,u=void 0),{action:n,method:s.toLowerCase(),encType:i,formData:u,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function kg(a,t){if(a===!1||a===null||typeof a>"u")throw new Error(t)}function F$(a,t,s){let n=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return n.pathname==="/"?n.pathname=`_root.${s}`:t&&to(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${s}`,n}async function U$(a,t){if(a.id in t)return t[a.id];try{let s=await import(a.module);return t[a.id]=s,s}catch(s){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function q$(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function H$(a,t,s){let n=await Promise.all(a.map(async i=>{let u=t.routes[i.route.id];if(u){let l=await U$(u,s);return l.links?l.links():[]}return[]}));return Q$(n.flat(1).filter(q$).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Rv(a,t,s,n,i,u){let l=(h,k)=>s[k]?h.route.id!==s[k].route.id:!0,p=(h,k)=>s[k].pathname!==h.pathname||s[k].route.path?.endsWith("*")&&s[k].params["*"]!==h.params["*"];return u==="assets"?t.filter((h,k)=>l(h,k)||p(h,k)):u==="data"?t.filter((h,k)=>{let S=n.routes[h.route.id];if(!S||!S.hasLoader)return!1;if(l(h,k)||p(h,k))return!0;if(h.route.shouldRevalidate){let $=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof $=="boolean")return $}return!0}):[]}function W$(a,t,{includeHydrateFallback:s}={}){return G$(a.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let u=[i.module];return i.clientActionModule&&(u=u.concat(i.clientActionModule)),i.clientLoaderModule&&(u=u.concat(i.clientLoaderModule)),s&&i.hydrateFallbackModule&&(u=u.concat(i.hydrateFallbackModule)),i.imports&&(u=u.concat(i.imports)),u}).flat(1))}function G$(a){return[...new Set(a)]}function K$(a){let t={},s=Object.keys(a).sort();for(let n of s)t[n]=a[n];return t}function Q$(a,t){let s=new Set;return new Set(t),a.reduce((n,i)=>{let u=JSON.stringify(K$(i));return s.has(u)||(s.add(u),n.push({key:u,link:i})),n},[])}function oj(){let a=m.useContext(lc);return kg(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function Y$(){let a=m.useContext(Am);return kg(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var Ng=m.createContext(void 0);Ng.displayName="FrameworkContext";function ij(){let a=m.useContext(Ng);return kg(a,"You must render this element inside a <HydratedRouter> element"),a}function X$(a,t){let s=m.useContext(Ng),[n,i]=m.useState(!1),[u,l]=m.useState(!1),{onFocus:p,onBlur:h,onMouseEnter:k,onMouseLeave:S,onTouchStart:$}=t,D=m.useRef(null);m.useEffect(()=>{if(a==="render"&&l(!0),a==="viewport"){let W=G=>{G.forEach(H=>{l(H.isIntersecting)})},N=new IntersectionObserver(W,{threshold:.5});return D.current&&N.observe(D.current),()=>{N.disconnect()}}},[a]),m.useEffect(()=>{if(n){let W=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(W)}}},[n]);let O=()=>{i(!0)},Y=()=>{i(!1),l(!1)};return s?a!=="intent"?[u,D,{}]:[u,D,{onFocus:Jc(p,O),onBlur:Jc(h,Y),onMouseEnter:Jc(k,O),onMouseLeave:Jc(S,Y),onTouchStart:Jc($,O)}]:[!1,D,{}]}function Jc(a,t){return s=>{a&&a(s),s.defaultPrevented||t(s)}}function J$({page:a,...t}){let{router:s}=oj(),n=m.useMemo(()=>QN(s.routes,a,s.basename),[s.routes,a,s.basename]);return n?m.createElement(eT,{page:a,matches:n,...t}):null}function Z$(a){let{manifest:t,routeModules:s}=ij(),[n,i]=m.useState([]);return m.useEffect(()=>{let u=!1;return H$(a,t,s).then(l=>{u||i(l)}),()=>{u=!0}},[a,t,s]),n}function eT({page:a,matches:t,...s}){let n=Yi(),{manifest:i,routeModules:u}=ij(),{basename:l}=oj(),{loaderData:p,matches:h}=Y$(),k=m.useMemo(()=>Rv(a,t,h,i,n,"data"),[a,t,h,i,n]),S=m.useMemo(()=>Rv(a,t,h,i,n,"assets"),[a,t,h,i,n]),$=m.useMemo(()=>{if(a===n.pathname+n.search+n.hash)return[];let Y=new Set,W=!1;if(t.forEach(G=>{let H=i.routes[G.route.id];!H||!H.hasLoader||(!k.some(U=>U.route.id===G.route.id)&&G.route.id in p&&u[G.route.id]?.shouldRevalidate||H.hasClientLoader?W=!0:Y.add(G.route.id))}),Y.size===0)return[];let N=F$(a,l,"data");return W&&Y.size>0&&N.searchParams.set("_routes",t.filter(G=>Y.has(G.route.id)).map(G=>G.route.id).join(",")),[N.pathname+N.search]},[l,p,n,i,k,t,a,u]),D=m.useMemo(()=>W$(S,i),[S,i]),O=Z$(S);return m.createElement(m.Fragment,null,$.map(Y=>m.createElement("link",{key:Y,rel:"prefetch",as:"fetch",href:Y,...s})),D.map(Y=>m.createElement("link",{key:Y,rel:"modulepreload",href:Y,...s})),O.map(({key:Y,link:W})=>m.createElement("link",{key:Y,nonce:s.nonce,...W})))}function tT(...a){return t=>{a.forEach(s=>{typeof s=="function"?s(t):s!=null&&(s.current=t)})}}var lj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lj&&(window.__reactRouterVersion="7.8.2")}catch{}function rT({basename:a,children:t,window:s}){let n=m.useRef();n.current==null&&(n.current=qS({window:s,v5Compat:!0}));let i=n.current,[u,l]=m.useState({action:i.action,location:i.location}),p=m.useCallback(h=>{m.startTransition(()=>l(h))},[l]);return m.useLayoutEffect(()=>i.listen(p),[i,p]),m.createElement(D$,{basename:a,children:t,location:u.location,navigationType:u.action,navigator:i})}var cj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=m.forwardRef(function({onClick:t,discover:s="render",prefetch:n="none",relative:i,reloadDocument:u,replace:l,state:p,target:h,to:k,preventScrollReset:S,viewTransition:$,...D},O){let{basename:Y}=m.useContext(In),W=typeof k=="string"&&cj.test(k),N,G=!1;if(typeof k=="string"&&W&&(N=k,lj))try{let L=new URL(window.location.href),y=k.startsWith("//")?new URL(L.protocol+k):new URL(k),se=to(y.pathname,Y);y.origin===L.origin&&se!=null?k=se+y.search+y.hash:G=!0}catch{$n(!1,`<Link to="${k}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=b$(k,{relative:i}),[U,ne,oe]=X$(n,D),$e=oT(k,{replace:l,state:p,target:h,preventScrollReset:S,relative:i,viewTransition:$});function K(L){t&&t(L),L.defaultPrevented||$e(L)}let V=m.createElement("a",{...D,...oe,href:N||H,onClick:G||u?t:K,ref:tT(O,ne),target:h,"data-discover":!W&&s==="render"?"true":void 0});return U&&!W?m.createElement(m.Fragment,null,V,m.createElement(J$,{page:H})):V});De.displayName="Link";var aT=m.forwardRef(function({"aria-current":t="page",caseSensitive:s=!1,className:n="",end:i=!1,style:u,to:l,viewTransition:p,children:h,...k},S){let $=qd(l,{relative:k.relative}),D=Yi(),O=m.useContext(Am),{navigator:Y,basename:W}=m.useContext(In),N=O!=null&&uT($)&&p===!0,G=Y.encodeLocation?Y.encodeLocation($).pathname:$.pathname,H=D.pathname,U=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;s||(H=H.toLowerCase(),U=U?U.toLowerCase():null,G=G.toLowerCase()),U&&W&&(U=to(U,W)||U);const ne=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let oe=H===G||!i&&H.startsWith(G)&&H.charAt(ne)==="/",$e=U!=null&&(U===G||!i&&U.startsWith(G)&&U.charAt(G.length)==="/"),K={isActive:oe,isPending:$e,isTransitioning:N},V=oe?t:void 0,L;typeof n=="function"?L=n(K):L=[n,oe?"active":null,$e?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let y=typeof u=="function"?u(K):u;return m.createElement(De,{...k,"aria-current":V,className:L,ref:S,style:y,to:l,viewTransition:p},typeof h=="function"?h(K):h)});aT.displayName="NavLink";var sT=m.forwardRef(({discover:a="render",fetcherKey:t,navigate:s,reloadDocument:n,replace:i,state:u,method:l=R0,action:p,onSubmit:h,relative:k,preventScrollReset:S,viewTransition:$,...D},O)=>{let Y=cT(),W=dT(p,{relative:k}),N=l.toLowerCase()==="get"?"get":"post",G=typeof p=="string"&&cj.test(p),H=U=>{if(h&&h(U),U.defaultPrevented)return;U.preventDefault();let ne=U.nativeEvent.submitter,oe=ne?.getAttribute("formmethod")||l;Y(ne||U.currentTarget,{fetcherKey:t,method:oe,navigate:s,replace:i,state:u,relative:k,preventScrollReset:S,viewTransition:$})};return m.createElement("form",{ref:O,method:N,action:W,onSubmit:n?h:H,...D,"data-discover":!G&&a==="render"?"true":void 0})});sT.displayName="Form";function nT(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dj(a){let t=m.useContext(lc);return ra(t,nT(a)),t}function oT(a,{target:t,replace:s,state:n,preventScrollReset:i,relative:u,viewTransition:l}={}){let p=cr(),h=Yi(),k=qd(a,{relative:u});return m.useCallback(S=>{if(B$(S,t)){S.preventDefault();let $=s!==void 0?s:wd(h)===wd(k);p(a,{replace:$,state:n,preventScrollReset:i,relative:u,viewTransition:l})}},[h,p,k,s,n,t,a,i,u,l])}var iT=0,lT=()=>`__${String(++iT)}__`;function cT(){let{router:a}=dj("useSubmit"),{basename:t}=m.useContext(In),s=T$();return m.useCallback(async(n,i={})=>{let{action:u,method:l,encType:p,formData:h,body:k}=V$(n,t);if(i.navigate===!1){let S=i.fetcherKey||lT();await a.fetch(S,s,i.action||u,{preventScrollReset:i.preventScrollReset,formData:h,body:k,formMethod:i.method||l,formEncType:i.encType||p,flushSync:i.flushSync})}else await a.navigate(i.action||u,{preventScrollReset:i.preventScrollReset,formData:h,body:k,formMethod:i.method||l,formEncType:i.encType||p,replace:i.replace,state:i.state,fromRouteId:s,flushSync:i.flushSync,viewTransition:i.viewTransition})},[a,t,s])}function dT(a,{relative:t}={}){let{basename:s}=m.useContext(In),n=m.useContext(lo);ra(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),u={...qd(a||".",{relative:t})},l=Yi();if(a==null){u.search=l.search;let p=new URLSearchParams(u.search),h=p.getAll("index");if(h.some(S=>S==="")){p.delete("index"),h.filter($=>$).forEach($=>p.append("index",$));let S=p.toString();u.search=S?`?${S}`:""}}return(!a||a===".")&&i.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(u.pathname=u.pathname==="/"?s:Jn([s,u.pathname])),wd(u)}function uT(a,{relative:t}={}){let s=m.useContext(tj);ra(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=dj("useViewTransitionState"),i=qd(a,{relative:t});if(!s.isTransitioning)return!1;let u=to(s.currentLocation.pathname,n)||s.currentLocation.pathname,l=to(s.nextLocation.pathname,n)||s.nextLocation.pathname;return X0(i.pathname,l)!=null||X0(i.pathname,u)!=null}const mT=()=>{};var Mv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=function(a){const t=[];let s=0;for(let n=0;n<a.length;n++){let i=a.charCodeAt(n);i<128?t[s++]=i:i<2048?(t[s++]=i>>6|192,t[s++]=i&63|128):(i&64512)===55296&&n+1<a.length&&(a.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(a.charCodeAt(++n)&1023),t[s++]=i>>18|240,t[s++]=i>>12&63|128,t[s++]=i>>6&63|128,t[s++]=i&63|128):(t[s++]=i>>12|224,t[s++]=i>>6&63|128,t[s++]=i&63|128)}return t},pT=function(a){const t=[];let s=0,n=0;for(;s<a.length;){const i=a[s++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){const u=a[s++];t[n++]=String.fromCharCode((i&31)<<6|u&63)}else if(i>239&&i<365){const u=a[s++],l=a[s++],p=a[s++],h=((i&7)<<18|(u&63)<<12|(l&63)<<6|p&63)-65536;t[n++]=String.fromCharCode(55296+(h>>10)),t[n++]=String.fromCharCode(56320+(h&1023))}else{const u=a[s++],l=a[s++];t[n++]=String.fromCharCode((i&15)<<12|(u&63)<<6|l&63)}}return t.join("")},mj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,t){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<a.length;i+=3){const u=a[i],l=i+1<a.length,p=l?a[i+1]:0,h=i+2<a.length,k=h?a[i+2]:0,S=u>>2,$=(u&3)<<4|p>>4;let D=(p&15)<<2|k>>6,O=k&63;h||(O=64,l||(D=64)),n.push(s[S],s[$],s[D],s[O])}return n.join("")},encodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(a):this.encodeByteArray(uj(a),t)},decodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(a):pT(this.decodeStringToByteArray(a,t))},decodeStringToByteArray(a,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<a.length;){const u=s[a.charAt(i++)],p=i<a.length?s[a.charAt(i)]:0;++i;const k=i<a.length?s[a.charAt(i)]:64;++i;const $=i<a.length?s[a.charAt(i)]:64;if(++i,u==null||p==null||k==null||$==null)throw new hT;const D=u<<2|p>>4;if(n.push(D),k!==64){const O=p<<4&240|k>>2;if(n.push(O),$!==64){const Y=k<<6&192|$;n.push(Y)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class hT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xT=function(a){const t=uj(a);return mj.encodeByteArray(t,!0)},J0=function(a){return xT(a).replace(/\./g,"")},pj=function(a){try{return mj.decodeString(a,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=()=>gT().__FIREBASE_DEFAULTS__,fT=()=>{if(typeof process>"u"||typeof Mv>"u")return;const a=Mv.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},yT=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=a&&pj(a[1]);return t&&JSON.parse(t)},Mm=()=>{try{return mT()||bT()||fT()||yT()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},hj=a=>{var t,s;return(s=(t=Mm())===null||t===void 0?void 0:t.emulatorHosts)===null||s===void 0?void 0:s[a]},xj=a=>{const t=hj(a);if(!t)return;const s=t.lastIndexOf(":");if(s<=0||s+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(s+1),10);return t[0]==="["?[t.substring(1,s-1),n]:[t.substring(0,s),n]},gj=()=>{var a;return(a=Mm())===null||a===void 0?void 0:a.config},bj=a=>{var t;return(t=Mm())===null||t===void 0?void 0:t[`_${a}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}wrapCallback(t){return(s,n)=>{s?this.reject(s):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(s):t(s,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(a,t){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},n=t||"demo-project",i=a.iat||0,u=a.sub||a.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},a);return[J0(JSON.stringify(s)),J0(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ua())}function kT(){var a;const t=(a=Mm())===null||a===void 0?void 0:a.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yj(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function jT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CT(){const a=Ua();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function ST(){return!kT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vj(){try{return typeof indexedDB=="object"}catch{return!1}}function wj(){return new Promise((a,t)=>{try{let s=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(n),a(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{var u;t(((u=i.error)===null||u===void 0?void 0:u.message)||"")}}catch(s){t(s)}})}function $T(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="FirebaseError";class Us extends Error{constructor(t,s,n){super(s),this.code=t,this.customData=n,this.name=TT,Object.setPrototypeOf(this,Us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xi.prototype.create)}}class Xi{constructor(t,s,n){this.service=t,this.serviceName=s,this.errors=n}create(t,...s){const n=s[0]||{},i=`${this.service}/${t}`,u=this.errors[t],l=u?PT(u,n):"Error",p=`${this.serviceName}: ${l} (${i}).`;return new Us(i,p,n)}}function PT(a,t){return a.replace(ET,(s,n)=>{const i=t[n];return i!=null?String(i):`<${n}?>`})}const ET=/\{\$([^}]+)}/g;function IT(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}function Qo(a,t){if(a===t)return!0;const s=Object.keys(a),n=Object.keys(t);for(const i of s){if(!n.includes(i))return!1;const u=a[i],l=t[i];if(zv(u)&&zv(l)){if(!Qo(u,l))return!1}else if(u!==l)return!1}for(const i of n)if(!s.includes(i))return!1;return!0}function zv(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(a){const t=[];for(const[s,n]of Object.entries(a))Array.isArray(n)?n.forEach(i=>{t.push(encodeURIComponent(s)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(s)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function td(a){const t={};return a.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,u]=n.split("=");t[decodeURIComponent(i)]=decodeURIComponent(u)}}),t}function rd(a){const t=a.indexOf("?");if(!t)return"";const s=a.indexOf("#",t);return a.substring(t,s>0?s:void 0)}function DT(a,t){const s=new _T(a,t);return s.subscribe.bind(s)}class _T{constructor(t,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(s=>{s.next(t)})}error(t){this.forEachObserver(s=>{s.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,s,n){let i;if(t===void 0&&s===void 0&&n===void 0)throw new Error("Missing Observer.");AT(t,["next","error","complete"])?i=t:i={next:t,error:s,complete:n},i.next===void 0&&(i.next=Hh),i.error===void 0&&(i.error=Hh),i.complete===void 0&&(i.complete=Hh);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,t)}sendOne(t,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{s(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AT(a,t){if(typeof a!="object"||a===null)return!1;for(const s of t)if(s in a&&typeof a[s]=="function")return!0;return!1}function Hh(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=1e3,MT=2,zT=14400*1e3,BT=.5;function Bv(a,t=RT,s=MT){const n=t*Math.pow(s,a),i=Math.round(BT*n*(Math.random()-.5)*2);return Math.min(zT,n+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(a){return a&&a._delegate?a._delegate:a}class Fs{constructor(t,s,n){this.name=t,this.instanceFactory=s,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(t,s){this.name=t,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const s=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(s)){const n=new vT;if(this.instancesDeferred.set(s,n),this.isInitialized(s)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:s});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(t){var s;const n=this.normalizeInstanceIdentifier(t?.identifier),i=(s=t?.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(u){if(i)return null;throw u}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(VT(t))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(const[s,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);try{const u=this.getOrInitializeService({instanceIdentifier:i});n.resolve(u)}catch{}}}}clearInstance(t=Di){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...t.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Di){return this.instances.has(t)}getOptions(t=Di){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:s={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:s});for(const[u,l]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);n===p&&l.resolve(i)}return i}onInit(t,s){var n;const i=this.normalizeInstanceIdentifier(s),u=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;u.add(t),this.onInitCallbacks.set(i,u);const l=this.instances.get(i);return l&&t(l,i),()=>{u.delete(t)}}invokeOnInitCallbacks(t,s){const n=this.onInitCallbacks.get(s);if(n)for(const i of n)try{i(t,s)}catch{}}getOrInitializeService({instanceIdentifier:t,options:s={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:OT(t),options:s}),this.instances.set(t,n),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Di){return this.component?this.component.multipleInstances?t:Di:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OT(a){return a===Di?void 0:a}function VT(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const s=this.getProvider(t.name);if(s.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);s.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const s=new LT(t,this);return this.providers.set(t,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(xr||(xr={}));const UT={debug:xr.DEBUG,verbose:xr.VERBOSE,info:xr.INFO,warn:xr.WARN,error:xr.ERROR,silent:xr.SILENT},qT=xr.INFO,HT={[xr.DEBUG]:"log",[xr.VERBOSE]:"log",[xr.INFO]:"info",[xr.WARN]:"warn",[xr.ERROR]:"error"},WT=(a,t,...s)=>{if(t<a.logLevel)return;const n=new Date().toISOString(),i=HT[t];if(i)console[i](`[${n}]  ${a.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class zm{constructor(t){this.name=t,this._logLevel=qT,this._logHandler=WT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in xr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?UT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,xr.DEBUG,...t),this._logHandler(this,xr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,xr.VERBOSE,...t),this._logHandler(this,xr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,xr.INFO,...t),this._logHandler(this,xr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,xr.WARN,...t),this._logHandler(this,xr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,xr.ERROR,...t),this._logHandler(this,xr.ERROR,...t)}}const GT=(a,t)=>t.some(s=>a instanceof s);let Lv,Ov;function KT(){return Lv||(Lv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QT(){return Ov||(Ov=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kj=new WeakMap,jx=new WeakMap,Nj=new WeakMap,Wh=new WeakMap,jg=new WeakMap;function YT(a){const t=new Promise((s,n)=>{const i=()=>{a.removeEventListener("success",u),a.removeEventListener("error",l)},u=()=>{s(Uo(a.result)),i()},l=()=>{n(a.error),i()};a.addEventListener("success",u),a.addEventListener("error",l)});return t.then(s=>{s instanceof IDBCursor&&kj.set(s,a)}).catch(()=>{}),jg.set(t,a),t}function XT(a){if(jx.has(a))return;const t=new Promise((s,n)=>{const i=()=>{a.removeEventListener("complete",u),a.removeEventListener("error",l),a.removeEventListener("abort",l)},u=()=>{s(),i()},l=()=>{n(a.error||new DOMException("AbortError","AbortError")),i()};a.addEventListener("complete",u),a.addEventListener("error",l),a.addEventListener("abort",l)});jx.set(a,t)}let Cx={get(a,t,s){if(a instanceof IDBTransaction){if(t==="done")return jx.get(a);if(t==="objectStoreNames")return a.objectStoreNames||Nj.get(a);if(t==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Uo(a[t])},set(a,t,s){return a[t]=s,!0},has(a,t){return a instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in a}};function JT(a){Cx=a(Cx)}function ZT(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...s){const n=a.call(Gh(this),t,...s);return Nj.set(n,t.sort?t.sort():[t]),Uo(n)}:QT().includes(a)?function(...t){return a.apply(Gh(this),t),Uo(kj.get(this))}:function(...t){return Uo(a.apply(Gh(this),t))}}function eP(a){return typeof a=="function"?ZT(a):(a instanceof IDBTransaction&&XT(a),GT(a,KT())?new Proxy(a,Cx):a)}function Uo(a){if(a instanceof IDBRequest)return YT(a);if(Wh.has(a))return Wh.get(a);const t=eP(a);return t!==a&&(Wh.set(a,t),jg.set(t,a)),t}const Gh=a=>jg.get(a);function jj(a,t,{blocked:s,upgrade:n,blocking:i,terminated:u}={}){const l=indexedDB.open(a,t),p=Uo(l);return n&&l.addEventListener("upgradeneeded",h=>{n(Uo(l.result),h.oldVersion,h.newVersion,Uo(l.transaction),h)}),s&&l.addEventListener("blocked",h=>s(h.oldVersion,h.newVersion,h)),p.then(h=>{u&&h.addEventListener("close",()=>u()),i&&h.addEventListener("versionchange",k=>i(k.oldVersion,k.newVersion,k))}).catch(()=>{}),p}const tP=["get","getKey","getAll","getAllKeys","count"],rP=["put","add","delete","clear"],Kh=new Map;function Vv(a,t){if(!(a instanceof IDBDatabase&&!(t in a)&&typeof t=="string"))return;if(Kh.get(t))return Kh.get(t);const s=t.replace(/FromIndex$/,""),n=t!==s,i=rP.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!(i||tP.includes(s)))return;const u=async function(l,...p){const h=this.transaction(l,i?"readwrite":"readonly");let k=h.store;return n&&(k=k.index(p.shift())),(await Promise.all([k[s](...p),i&&h.done]))[0]};return Kh.set(t,u),u}JT(a=>({...a,get:(t,s,n)=>Vv(t,s)||a.get(t,s,n),has:(t,s)=>!!Vv(t,s)||a.has(t,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(sP(s)){const n=s.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(s=>s).join(" ")}}function sP(a){const t=a.getComponent();return t?.type==="VERSION"}const Sx="@firebase/app",Fv="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new zm("@firebase/app"),nP="@firebase/app-compat",oP="@firebase/analytics-compat",iP="@firebase/analytics",lP="@firebase/app-check-compat",cP="@firebase/app-check",dP="@firebase/auth",uP="@firebase/auth-compat",mP="@firebase/database",pP="@firebase/data-connect",hP="@firebase/database-compat",xP="@firebase/functions",gP="@firebase/functions-compat",bP="@firebase/installations",fP="@firebase/installations-compat",yP="@firebase/messaging",vP="@firebase/messaging-compat",wP="@firebase/performance",kP="@firebase/performance-compat",NP="@firebase/remote-config",jP="@firebase/remote-config-compat",CP="@firebase/storage",SP="@firebase/storage-compat",$P="@firebase/firestore",TP="@firebase/vertexai",PP="@firebase/firestore-compat",EP="firebase",IP="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="[DEFAULT]",DP={[Sx]:"fire-core",[nP]:"fire-core-compat",[iP]:"fire-analytics",[oP]:"fire-analytics-compat",[cP]:"fire-app-check",[lP]:"fire-app-check-compat",[dP]:"fire-auth",[uP]:"fire-auth-compat",[mP]:"fire-rtdb",[pP]:"fire-data-connect",[hP]:"fire-rtdb-compat",[xP]:"fire-fn",[gP]:"fire-fn-compat",[bP]:"fire-iid",[fP]:"fire-iid-compat",[yP]:"fire-fcm",[vP]:"fire-fcm-compat",[wP]:"fire-perf",[kP]:"fire-perf-compat",[NP]:"fire-rc",[jP]:"fire-rc-compat",[CP]:"fire-gcs",[SP]:"fire-gcs-compat",[$P]:"fire-fst",[PP]:"fire-fst-compat",[TP]:"fire-vertex","fire-js":"fire-js",[EP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=new Map,_P=new Map,Tx=new Map;function Uv(a,t){try{a.container.addComponent(t)}catch(s){ro.debug(`Component ${t.name} failed to register with FirebaseApp ${a.name}`,s)}}function sn(a){const t=a.name;if(Tx.has(t))return ro.debug(`There were multiple attempts to register component ${t}.`),!1;Tx.set(t,a);for(const s of Z0.values())Uv(s,a);for(const s of _P.values())Uv(s,a);return!0}function si(a,t){const s=a.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),a.container.getProvider(t)}function ks(a){return a==null?!1:a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qo=new Xi("app","Firebase",AP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(t,s,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw qo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=IP;function Cj(a,t={}){let s=a;typeof t!="object"&&(t={name:t});const n=Object.assign({name:$x,automaticDataCollectionEnabled:!1},t),i=n.name;if(typeof i!="string"||!i)throw qo.create("bad-app-name",{appName:String(i)});if(s||(s=gj()),!s)throw qo.create("no-options");const u=Z0.get(i);if(u){if(Qo(s,u.options)&&Qo(n,u.config))return u;throw qo.create("duplicate-app",{appName:i})}const l=new FT(i);for(const h of Tx.values())l.addComponent(h);const p=new RP(s,n,l);return Z0.set(i,p),p}function Bm(a=$x){const t=Z0.get(a);if(!t&&a===$x&&gj())return Cj();if(!t)throw qo.create("no-app",{appName:a});return t}function us(a,t,s){var n;let i=(n=DP[a])!==null&&n!==void 0?n:a;s&&(i+=`-${s}`);const u=i.match(/\s|\//),l=t.match(/\s|\//);if(u||l){const p=[`Unable to register library "${i}" with version "${t}":`];u&&p.push(`library name "${i}" contains illegal characters (whitespace or "/")`),u&&l&&p.push("and"),l&&p.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ro.warn(p.join(" "));return}sn(new Fs(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP="firebase-heartbeat-database",zP=1,kd="firebase-heartbeat-store";let Qh=null;function Sj(){return Qh||(Qh=jj(MP,zP,{upgrade:(a,t)=>{switch(t){case 0:try{a.createObjectStore(kd)}catch(s){console.warn(s)}}}}).catch(a=>{throw qo.create("idb-open",{originalErrorMessage:a.message})})),Qh}async function BP(a){try{const s=(await Sj()).transaction(kd),n=await s.objectStore(kd).get($j(a));return await s.done,n}catch(t){if(t instanceof Us)ro.warn(t.message);else{const s=qo.create("idb-get",{originalErrorMessage:t?.message});ro.warn(s.message)}}}async function qv(a,t){try{const n=(await Sj()).transaction(kd,"readwrite");await n.objectStore(kd).put(t,$j(a)),await n.done}catch(s){if(s instanceof Us)ro.warn(s.message);else{const n=qo.create("idb-set",{originalErrorMessage:s?.message});ro.warn(n.message)}}}function $j(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=1024,OP=30;class VP{constructor(t){this.container=t,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new UP(s),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,s;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Hv();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(l=>l.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:i}),this._heartbeatsCache.heartbeats.length>OP){const l=qP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ro.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=Hv(),{heartbeatsToSend:n,unsentEntries:i}=FP(this._heartbeatsCache.heartbeats),u=J0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=s,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(s){return ro.warn(s),""}}}function Hv(){return new Date().toISOString().substring(0,10)}function FP(a,t=LP){const s=[];let n=a.slice();for(const i of a){const u=s.find(l=>l.agent===i.agent);if(u){if(u.dates.push(i.date),Wv(s)>t){u.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),Wv(s)>t){s.pop();break}n=n.slice(1)}return{heartbeatsToSend:s,unsentEntries:n}}class UP{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vj()?wj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await BP(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return qv(this.app,{lastSentHeartbeatDate:(s=t.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return qv(this.app,{lastSentHeartbeatDate:(s=t.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Wv(a){return J0(JSON.stringify({version:2,heartbeats:a})).length}function qP(a){if(a.length===0)return-1;let t=0,s=a[0].date;for(let n=1;n<a.length;n++)a[n].date<s&&(s=a[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(a){sn(new Fs("platform-logger",t=>new aP(t),"PRIVATE")),sn(new Fs("heartbeat",t=>new VP(t),"PRIVATE")),us(Sx,Fv,a),us(Sx,Fv,"esm2017"),us("fire-js","")}HP("");var WP="firebase",GP="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */us(WP,GP,"app");const Tj="@firebase/installations",Cg="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=1e4,Ej=`w:${Cg}`,Ij="FIS_v2",KP="https://firebaseinstallations.googleapis.com/v1",QP=3600*1e3,YP="installations",XP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vi=new Xi(YP,XP,JP);function Dj(a){return a instanceof Us&&a.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j({projectId:a}){return`${KP}/projects/${a}/installations`}function Aj(a){return{token:a.token,requestStatus:2,expiresIn:eE(a.expiresIn),creationTime:Date.now()}}async function Rj(a,t){const n=(await t.json()).error;return Vi.create("request-failed",{requestName:a,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Mj({apiKey:a}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":a})}function ZP(a,{refreshToken:t}){const s=Mj(a);return s.append("Authorization",tE(t)),s}async function zj(a){const t=await a();return t.status>=500&&t.status<600?a():t}function eE(a){return Number(a.replace("s","000"))}function tE(a){return`${Ij} ${a}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rE({appConfig:a,heartbeatServiceProvider:t},{fid:s}){const n=_j(a),i=Mj(a),u=t.getImmediate({optional:!0});if(u){const k=await u.getHeartbeatsHeader();k&&i.append("x-firebase-client",k)}const l={fid:s,authVersion:Ij,appId:a.appId,sdkVersion:Ej},p={method:"POST",headers:i,body:JSON.stringify(l)},h=await zj(()=>fetch(n,p));if(h.ok){const k=await h.json();return{fid:k.fid||s,registrationStatus:2,refreshToken:k.refreshToken,authToken:Aj(k.authToken)}}else throw await Rj("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(a){return new Promise(t=>{setTimeout(t,a)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(a){return btoa(String.fromCharCode(...a)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=/^[cdef][\w-]{21}$/,Px="";function nE(){try{const a=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(a),a[0]=112+a[0]%16;const s=oE(a);return sE.test(s)?s:Px}catch{return Px}}function oE(a){return aE(a).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(a){return`${a.appName}!${a.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=new Map;function Oj(a,t){const s=Lm(a);Vj(s,t),iE(s,t)}function Vj(a,t){const s=Lj.get(a);if(s)for(const n of s)n(t)}function iE(a,t){const s=lE();s&&s.postMessage({key:a,fid:t}),cE()}let Ai=null;function lE(){return!Ai&&"BroadcastChannel"in self&&(Ai=new BroadcastChannel("[Firebase] FID Change"),Ai.onmessage=a=>{Vj(a.data.key,a.data.fid)}),Ai}function cE(){Lj.size===0&&Ai&&(Ai.close(),Ai=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="firebase-installations-database",uE=1,Fi="firebase-installations-store";let Yh=null;function Sg(){return Yh||(Yh=jj(dE,uE,{upgrade:(a,t)=>{switch(t){case 0:a.createObjectStore(Fi)}}})),Yh}async function em(a,t){const s=Lm(a),i=(await Sg()).transaction(Fi,"readwrite"),u=i.objectStore(Fi),l=await u.get(s);return await u.put(t,s),await i.done,(!l||l.fid!==t.fid)&&Oj(a,t.fid),t}async function Fj(a){const t=Lm(a),n=(await Sg()).transaction(Fi,"readwrite");await n.objectStore(Fi).delete(t),await n.done}async function Om(a,t){const s=Lm(a),i=(await Sg()).transaction(Fi,"readwrite"),u=i.objectStore(Fi),l=await u.get(s),p=t(l);return p===void 0?await u.delete(s):await u.put(p,s),await i.done,p&&(!l||l.fid!==p.fid)&&Oj(a,p.fid),p}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $g(a){let t;const s=await Om(a.appConfig,n=>{const i=mE(n),u=pE(a,i);return t=u.registrationPromise,u.installationEntry});return s.fid===Px?{installationEntry:await t}:{installationEntry:s,registrationPromise:t}}function mE(a){const t=a||{fid:nE(),registrationStatus:0};return Uj(t)}function pE(a,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Vi.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const s={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=hE(a,s);return{installationEntry:s,registrationPromise:n}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:xE(a)}:{installationEntry:t}}async function hE(a,t){try{const s=await rE(a,t);return em(a.appConfig,s)}catch(s){throw Dj(s)&&s.customData.serverCode===409?await Fj(a.appConfig):await em(a.appConfig,{fid:t.fid,registrationStatus:0}),s}}async function xE(a){let t=await Gv(a.appConfig);for(;t.registrationStatus===1;)await Bj(100),t=await Gv(a.appConfig);if(t.registrationStatus===0){const{installationEntry:s,registrationPromise:n}=await $g(a);return n||s}return t}function Gv(a){return Om(a,t=>{if(!t)throw Vi.create("installation-not-found");return Uj(t)})}function Uj(a){return gE(a)?{fid:a.fid,registrationStatus:0}:a}function gE(a){return a.registrationStatus===1&&a.registrationTime+Pj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bE({appConfig:a,heartbeatServiceProvider:t},s){const n=fE(a,s),i=ZP(a,s),u=t.getImmediate({optional:!0});if(u){const k=await u.getHeartbeatsHeader();k&&i.append("x-firebase-client",k)}const l={installation:{sdkVersion:Ej,appId:a.appId}},p={method:"POST",headers:i,body:JSON.stringify(l)},h=await zj(()=>fetch(n,p));if(h.ok){const k=await h.json();return Aj(k)}else throw await Rj("Generate Auth Token",h)}function fE(a,{fid:t}){return`${_j(a)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tg(a,t=!1){let s;const n=await Om(a.appConfig,u=>{if(!qj(u))throw Vi.create("not-registered");const l=u.authToken;if(!t&&wE(l))return u;if(l.requestStatus===1)return s=yE(a,t),u;{if(!navigator.onLine)throw Vi.create("app-offline");const p=NE(u);return s=vE(a,p),p}});return s?await s:n.authToken}async function yE(a,t){let s=await Kv(a.appConfig);for(;s.authToken.requestStatus===1;)await Bj(100),s=await Kv(a.appConfig);const n=s.authToken;return n.requestStatus===0?Tg(a,t):n}function Kv(a){return Om(a,t=>{if(!qj(t))throw Vi.create("not-registered");const s=t.authToken;return jE(s)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function vE(a,t){try{const s=await bE(a,t),n=Object.assign(Object.assign({},t),{authToken:s});return await em(a.appConfig,n),s}catch(s){if(Dj(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await Fj(a.appConfig);else{const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await em(a.appConfig,n)}throw s}}function qj(a){return a!==void 0&&a.registrationStatus===2}function wE(a){return a.requestStatus===2&&!kE(a)}function kE(a){const t=Date.now();return t<a.creationTime||a.creationTime+a.expiresIn<t+QP}function NE(a){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},a),{authToken:t})}function jE(a){return a.requestStatus===1&&a.requestTime+Pj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CE(a){const t=a,{installationEntry:s,registrationPromise:n}=await $g(t);return n?n.catch(console.error):Tg(t).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SE(a,t=!1){const s=a;return await $E(s),(await Tg(s,t)).token}async function $E(a){const{registrationPromise:t}=await $g(a);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(a){if(!a||!a.options)throw Xh("App Configuration");if(!a.name)throw Xh("App Name");const t=["projectId","apiKey","appId"];for(const s of t)if(!a.options[s])throw Xh(s);return{appName:a.name,projectId:a.options.projectId,apiKey:a.options.apiKey,appId:a.options.appId}}function Xh(a){return Vi.create("missing-app-config-values",{valueName:a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj="installations",PE="installations-internal",EE=a=>{const t=a.getProvider("app").getImmediate(),s=TE(t),n=si(t,"heartbeat");return{app:t,appConfig:s,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},IE=a=>{const t=a.getProvider("app").getImmediate(),s=si(t,Hj).getImmediate();return{getId:()=>CE(s),getToken:i=>SE(s,i)}};function DE(){sn(new Fs(Hj,EE,"PUBLIC")),sn(new Fs(PE,IE,"PRIVATE"))}DE();us(Tj,Cg);us(Tj,Cg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="analytics",_E="firebase_id",AE="origin",RE=60*1e3,ME="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Pg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new zm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ss=new Xi("analytics","Analytics",zE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(a){if(!a.startsWith(Pg)){const t=Ss.create("invalid-gtag-resource",{gtagURL:a});return ms.warn(t.message),""}return a}function Wj(a){return Promise.all(a.map(t=>t.catch(s=>s)))}function LE(a,t){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(a,t)),s}function OE(a,t){const s=LE("firebase-js-sdk-policy",{createScriptURL:BE}),n=document.createElement("script"),i=`${Pg}?l=${a}&id=${t}`;n.src=s?s?.createScriptURL(i):i,n.async=!0,document.head.appendChild(n)}function VE(a){let t=[];return Array.isArray(window[a])?t=window[a]:window[a]=t,t}async function FE(a,t,s,n,i,u){const l=n[i];try{if(l)await t[l];else{const h=(await Wj(s)).find(k=>k.measurementId===i);h&&await t[h.appId]}}catch(p){ms.error(p)}a("config",i,u)}async function UE(a,t,s,n,i){try{let u=[];if(i&&i.send_to){let l=i.send_to;Array.isArray(l)||(l=[l]);const p=await Wj(s);for(const h of l){const k=p.find($=>$.measurementId===h),S=k&&t[k.appId];if(S)u.push(S);else{u=[];break}}}u.length===0&&(u=Object.values(t)),await Promise.all(u),a("event",n,i||{})}catch(u){ms.error(u)}}function qE(a,t,s,n){async function i(u,...l){try{if(u==="event"){const[p,h]=l;await UE(a,t,s,p,h)}else if(u==="config"){const[p,h]=l;await FE(a,t,s,n,p,h)}else if(u==="consent"){const[p,h]=l;a("consent",p,h)}else if(u==="get"){const[p,h,k]=l;a("get",p,h,k)}else if(u==="set"){const[p]=l;a("set",p)}else a(u,...l)}catch(p){ms.error(p)}}return i}function HE(a,t,s,n,i){let u=function(...l){window[n].push(arguments)};return window[i]&&typeof window[i]=="function"&&(u=window[i]),window[i]=qE(u,a,t,s),{gtagCore:u,wrappedGtag:window[i]}}function WE(a){const t=window.document.getElementsByTagName("script");for(const s of Object.values(t))if(s.src&&s.src.includes(Pg)&&s.src.includes(a))return s;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=30,KE=1e3;class QE{constructor(t={},s=KE){this.throttleMetadata=t,this.intervalMillis=s}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,s){this.throttleMetadata[t]=s}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const Gj=new QE;function YE(a){return new Headers({Accept:"application/json","x-goog-api-key":a})}async function XE(a){var t;const{appId:s,apiKey:n}=a,i={method:"GET",headers:YE(n)},u=ME.replace("{app-id}",s),l=await fetch(u,i);if(l.status!==200&&l.status!==304){let p="";try{const h=await l.json();!((t=h.error)===null||t===void 0)&&t.message&&(p=h.error.message)}catch{}throw Ss.create("config-fetch-failed",{httpStatus:l.status,responseMessage:p})}return l.json()}async function JE(a,t=Gj,s){const{appId:n,apiKey:i,measurementId:u}=a.options;if(!n)throw Ss.create("no-app-id");if(!i){if(u)return{measurementId:u,appId:n};throw Ss.create("no-api-key")}const l=t.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},p=new tI;return setTimeout(async()=>{p.abort()},RE),Kj({appId:n,apiKey:i,measurementId:u},l,p,t)}async function Kj(a,{throttleEndTimeMillis:t,backoffCount:s},n,i=Gj){var u;const{appId:l,measurementId:p}=a;try{await ZE(n,t)}catch(h){if(p)return ms.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:l,measurementId:p};throw h}try{const h=await XE(a);return i.deleteThrottleMetadata(l),h}catch(h){const k=h;if(!eI(k)){if(i.deleteThrottleMetadata(l),p)return ms.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${k?.message}]`),{appId:l,measurementId:p};throw h}const S=Number((u=k?.customData)===null||u===void 0?void 0:u.httpStatus)===503?Bv(s,i.intervalMillis,GE):Bv(s,i.intervalMillis),$={throttleEndTimeMillis:Date.now()+S,backoffCount:s+1};return i.setThrottleMetadata(l,$),ms.debug(`Calling attemptFetch again in ${S} millis`),Kj(a,$,n,i)}}function ZE(a,t){return new Promise((s,n)=>{const i=Math.max(t-Date.now(),0),u=setTimeout(s,i);a.addEventListener(()=>{clearTimeout(u),n(Ss.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function eI(a){if(!(a instanceof Us)||!a.customData)return!1;const t=Number(a.customData.httpStatus);return t===429||t===500||t===503||t===504}class tI{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function rI(a,t,s,n,i){if(i&&i.global){a("event",s,n);return}else{const u=await t,l=Object.assign(Object.assign({},n),{send_to:u});a("event",s,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(){if(vj())try{await wj()}catch(a){return ms.warn(Ss.create("indexeddb-unavailable",{errorInfo:a?.toString()}).message),!1}else return ms.warn(Ss.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function sI(a,t,s,n,i,u,l){var p;const h=JE(a);h.then(O=>{s[O.measurementId]=O.appId,a.options.measurementId&&O.measurementId!==a.options.measurementId&&ms.warn(`The measurement ID in the local Firebase config (${a.options.measurementId}) does not match the measurement ID fetched from the server (${O.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(O=>ms.error(O)),t.push(h);const k=aI().then(O=>{if(O)return n.getId()}),[S,$]=await Promise.all([h,k]);WE(u)||OE(u,S.measurementId),i("js",new Date);const D=(p=l?.config)!==null&&p!==void 0?p:{};return D[AE]="firebase",D.update=!0,$!=null&&(D[_E]=$),i("config",S.measurementId,D),S.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(t){this.app=t}_delete(){return delete cd[this.app.options.appId],Promise.resolve()}}let cd={},Qv=[];const Yv={};let Jh="dataLayer",oI="gtag",Xv,Qj,Jv=!1;function iI(){const a=[];if(yj()&&a.push("This is a browser extension environment."),$T()||a.push("Cookies are not available."),a.length>0){const t=a.map((n,i)=>`(${i+1}) ${n}`).join(" "),s=Ss.create("invalid-analytics-context",{errorInfo:t});ms.warn(s.message)}}function lI(a,t,s){iI();const n=a.options.appId;if(!n)throw Ss.create("no-app-id");if(!a.options.apiKey)if(a.options.measurementId)ms.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${a.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ss.create("no-api-key");if(cd[n]!=null)throw Ss.create("already-exists",{id:n});if(!Jv){VE(Jh);const{wrappedGtag:u,gtagCore:l}=HE(cd,Qv,Yv,Jh,oI);Qj=u,Xv=l,Jv=!0}return cd[n]=sI(a,Qv,Yv,t,Xv,Jh,s),new nI(a)}function cI(a=Bm()){a=Kr(a);const t=si(a,tm);return t.isInitialized()?t.getImmediate():dI(a)}function dI(a,t={}){const s=si(a,tm);if(s.isInitialized()){const i=s.getImmediate();if(Qo(t,s.getOptions()))return i;throw Ss.create("already-initialized")}return s.initialize({options:t})}function uI(a,t,s,n){a=Kr(a),rI(Qj,cd[a.app.options.appId],t,s,n).catch(i=>ms.error(i))}const Zv="@firebase/analytics",ew="0.10.12";function mI(){sn(new Fs(tm,(t,{options:s})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return lI(n,i,s)},"PUBLIC")),sn(new Fs("analytics-internal",a,"PRIVATE")),us(Zv,ew),us(Zv,ew,"esm2017");function a(t){try{const s=t.getProvider(tm).getImmediate();return{logEvent:(n,i,u)=>uI(s,n,i,u)}}catch(s){throw Ss.create("interop-component-reg-failed",{reason:s})}}}mI();var tw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ho,Yj;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(K,V){function L(){}L.prototype=V.prototype,K.D=V.prototype,K.prototype=new L,K.prototype.constructor=K,K.C=function(y,se,ee){for(var re=Array(arguments.length-2),He=2;He<arguments.length;He++)re[He-2]=arguments[He];return V.prototype[se].apply(y,re)}}function s(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,s),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(K,V,L){L||(L=0);var y=Array(16);if(typeof V=="string")for(var se=0;16>se;++se)y[se]=V.charCodeAt(L++)|V.charCodeAt(L++)<<8|V.charCodeAt(L++)<<16|V.charCodeAt(L++)<<24;else for(se=0;16>se;++se)y[se]=V[L++]|V[L++]<<8|V[L++]<<16|V[L++]<<24;V=K.g[0],L=K.g[1],se=K.g[2];var ee=K.g[3],re=V+(ee^L&(se^ee))+y[0]+3614090360&4294967295;V=L+(re<<7&4294967295|re>>>25),re=ee+(se^V&(L^se))+y[1]+3905402710&4294967295,ee=V+(re<<12&4294967295|re>>>20),re=se+(L^ee&(V^L))+y[2]+606105819&4294967295,se=ee+(re<<17&4294967295|re>>>15),re=L+(V^se&(ee^V))+y[3]+3250441966&4294967295,L=se+(re<<22&4294967295|re>>>10),re=V+(ee^L&(se^ee))+y[4]+4118548399&4294967295,V=L+(re<<7&4294967295|re>>>25),re=ee+(se^V&(L^se))+y[5]+1200080426&4294967295,ee=V+(re<<12&4294967295|re>>>20),re=se+(L^ee&(V^L))+y[6]+2821735955&4294967295,se=ee+(re<<17&4294967295|re>>>15),re=L+(V^se&(ee^V))+y[7]+4249261313&4294967295,L=se+(re<<22&4294967295|re>>>10),re=V+(ee^L&(se^ee))+y[8]+1770035416&4294967295,V=L+(re<<7&4294967295|re>>>25),re=ee+(se^V&(L^se))+y[9]+2336552879&4294967295,ee=V+(re<<12&4294967295|re>>>20),re=se+(L^ee&(V^L))+y[10]+4294925233&4294967295,se=ee+(re<<17&4294967295|re>>>15),re=L+(V^se&(ee^V))+y[11]+2304563134&4294967295,L=se+(re<<22&4294967295|re>>>10),re=V+(ee^L&(se^ee))+y[12]+1804603682&4294967295,V=L+(re<<7&4294967295|re>>>25),re=ee+(se^V&(L^se))+y[13]+4254626195&4294967295,ee=V+(re<<12&4294967295|re>>>20),re=se+(L^ee&(V^L))+y[14]+2792965006&4294967295,se=ee+(re<<17&4294967295|re>>>15),re=L+(V^se&(ee^V))+y[15]+1236535329&4294967295,L=se+(re<<22&4294967295|re>>>10),re=V+(se^ee&(L^se))+y[1]+4129170786&4294967295,V=L+(re<<5&4294967295|re>>>27),re=ee+(L^se&(V^L))+y[6]+3225465664&4294967295,ee=V+(re<<9&4294967295|re>>>23),re=se+(V^L&(ee^V))+y[11]+643717713&4294967295,se=ee+(re<<14&4294967295|re>>>18),re=L+(ee^V&(se^ee))+y[0]+3921069994&4294967295,L=se+(re<<20&4294967295|re>>>12),re=V+(se^ee&(L^se))+y[5]+3593408605&4294967295,V=L+(re<<5&4294967295|re>>>27),re=ee+(L^se&(V^L))+y[10]+38016083&4294967295,ee=V+(re<<9&4294967295|re>>>23),re=se+(V^L&(ee^V))+y[15]+3634488961&4294967295,se=ee+(re<<14&4294967295|re>>>18),re=L+(ee^V&(se^ee))+y[4]+3889429448&4294967295,L=se+(re<<20&4294967295|re>>>12),re=V+(se^ee&(L^se))+y[9]+568446438&4294967295,V=L+(re<<5&4294967295|re>>>27),re=ee+(L^se&(V^L))+y[14]+3275163606&4294967295,ee=V+(re<<9&4294967295|re>>>23),re=se+(V^L&(ee^V))+y[3]+4107603335&4294967295,se=ee+(re<<14&4294967295|re>>>18),re=L+(ee^V&(se^ee))+y[8]+1163531501&4294967295,L=se+(re<<20&4294967295|re>>>12),re=V+(se^ee&(L^se))+y[13]+2850285829&4294967295,V=L+(re<<5&4294967295|re>>>27),re=ee+(L^se&(V^L))+y[2]+4243563512&4294967295,ee=V+(re<<9&4294967295|re>>>23),re=se+(V^L&(ee^V))+y[7]+1735328473&4294967295,se=ee+(re<<14&4294967295|re>>>18),re=L+(ee^V&(se^ee))+y[12]+2368359562&4294967295,L=se+(re<<20&4294967295|re>>>12),re=V+(L^se^ee)+y[5]+4294588738&4294967295,V=L+(re<<4&4294967295|re>>>28),re=ee+(V^L^se)+y[8]+2272392833&4294967295,ee=V+(re<<11&4294967295|re>>>21),re=se+(ee^V^L)+y[11]+1839030562&4294967295,se=ee+(re<<16&4294967295|re>>>16),re=L+(se^ee^V)+y[14]+4259657740&4294967295,L=se+(re<<23&4294967295|re>>>9),re=V+(L^se^ee)+y[1]+2763975236&4294967295,V=L+(re<<4&4294967295|re>>>28),re=ee+(V^L^se)+y[4]+1272893353&4294967295,ee=V+(re<<11&4294967295|re>>>21),re=se+(ee^V^L)+y[7]+4139469664&4294967295,se=ee+(re<<16&4294967295|re>>>16),re=L+(se^ee^V)+y[10]+3200236656&4294967295,L=se+(re<<23&4294967295|re>>>9),re=V+(L^se^ee)+y[13]+681279174&4294967295,V=L+(re<<4&4294967295|re>>>28),re=ee+(V^L^se)+y[0]+3936430074&4294967295,ee=V+(re<<11&4294967295|re>>>21),re=se+(ee^V^L)+y[3]+3572445317&4294967295,se=ee+(re<<16&4294967295|re>>>16),re=L+(se^ee^V)+y[6]+76029189&4294967295,L=se+(re<<23&4294967295|re>>>9),re=V+(L^se^ee)+y[9]+3654602809&4294967295,V=L+(re<<4&4294967295|re>>>28),re=ee+(V^L^se)+y[12]+3873151461&4294967295,ee=V+(re<<11&4294967295|re>>>21),re=se+(ee^V^L)+y[15]+530742520&4294967295,se=ee+(re<<16&4294967295|re>>>16),re=L+(se^ee^V)+y[2]+3299628645&4294967295,L=se+(re<<23&4294967295|re>>>9),re=V+(se^(L|~ee))+y[0]+4096336452&4294967295,V=L+(re<<6&4294967295|re>>>26),re=ee+(L^(V|~se))+y[7]+1126891415&4294967295,ee=V+(re<<10&4294967295|re>>>22),re=se+(V^(ee|~L))+y[14]+2878612391&4294967295,se=ee+(re<<15&4294967295|re>>>17),re=L+(ee^(se|~V))+y[5]+4237533241&4294967295,L=se+(re<<21&4294967295|re>>>11),re=V+(se^(L|~ee))+y[12]+1700485571&4294967295,V=L+(re<<6&4294967295|re>>>26),re=ee+(L^(V|~se))+y[3]+2399980690&4294967295,ee=V+(re<<10&4294967295|re>>>22),re=se+(V^(ee|~L))+y[10]+4293915773&4294967295,se=ee+(re<<15&4294967295|re>>>17),re=L+(ee^(se|~V))+y[1]+2240044497&4294967295,L=se+(re<<21&4294967295|re>>>11),re=V+(se^(L|~ee))+y[8]+1873313359&4294967295,V=L+(re<<6&4294967295|re>>>26),re=ee+(L^(V|~se))+y[15]+4264355552&4294967295,ee=V+(re<<10&4294967295|re>>>22),re=se+(V^(ee|~L))+y[6]+2734768916&4294967295,se=ee+(re<<15&4294967295|re>>>17),re=L+(ee^(se|~V))+y[13]+1309151649&4294967295,L=se+(re<<21&4294967295|re>>>11),re=V+(se^(L|~ee))+y[4]+4149444226&4294967295,V=L+(re<<6&4294967295|re>>>26),re=ee+(L^(V|~se))+y[11]+3174756917&4294967295,ee=V+(re<<10&4294967295|re>>>22),re=se+(V^(ee|~L))+y[2]+718787259&4294967295,se=ee+(re<<15&4294967295|re>>>17),re=L+(ee^(se|~V))+y[9]+3951481745&4294967295,K.g[0]=K.g[0]+V&4294967295,K.g[1]=K.g[1]+(se+(re<<21&4294967295|re>>>11))&4294967295,K.g[2]=K.g[2]+se&4294967295,K.g[3]=K.g[3]+ee&4294967295}n.prototype.u=function(K,V){V===void 0&&(V=K.length);for(var L=V-this.blockSize,y=this.B,se=this.h,ee=0;ee<V;){if(se==0)for(;ee<=L;)i(this,K,ee),ee+=this.blockSize;if(typeof K=="string"){for(;ee<V;)if(y[se++]=K.charCodeAt(ee++),se==this.blockSize){i(this,y),se=0;break}}else for(;ee<V;)if(y[se++]=K[ee++],se==this.blockSize){i(this,y),se=0;break}}this.h=se,this.o+=V},n.prototype.v=function(){var K=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);K[0]=128;for(var V=1;V<K.length-8;++V)K[V]=0;var L=8*this.o;for(V=K.length-8;V<K.length;++V)K[V]=L&255,L/=256;for(this.u(K),K=Array(16),V=L=0;4>V;++V)for(var y=0;32>y;y+=8)K[L++]=this.g[V]>>>y&255;return K};function u(K,V){var L=p;return Object.prototype.hasOwnProperty.call(L,K)?L[K]:L[K]=V(K)}function l(K,V){this.h=V;for(var L=[],y=!0,se=K.length-1;0<=se;se--){var ee=K[se]|0;y&&ee==V||(L[se]=ee,y=!1)}this.g=L}var p={};function h(K){return-128<=K&&128>K?u(K,function(V){return new l([V|0],0>V?-1:0)}):new l([K|0],0>K?-1:0)}function k(K){if(isNaN(K)||!isFinite(K))return $;if(0>K)return N(k(-K));for(var V=[],L=1,y=0;K>=L;y++)V[y]=K/L|0,L*=4294967296;return new l(V,0)}function S(K,V){if(K.length==0)throw Error("number format error: empty string");if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(K.charAt(0)=="-")return N(S(K.substring(1),V));if(0<=K.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=k(Math.pow(V,8)),y=$,se=0;se<K.length;se+=8){var ee=Math.min(8,K.length-se),re=parseInt(K.substring(se,se+ee),V);8>ee?(ee=k(Math.pow(V,ee)),y=y.j(ee).add(k(re))):(y=y.j(L),y=y.add(k(re)))}return y}var $=h(0),D=h(1),O=h(16777216);a=l.prototype,a.m=function(){if(W(this))return-N(this).m();for(var K=0,V=1,L=0;L<this.g.length;L++){var y=this.i(L);K+=(0<=y?y:4294967296+y)*V,V*=4294967296}return K},a.toString=function(K){if(K=K||10,2>K||36<K)throw Error("radix out of range: "+K);if(Y(this))return"0";if(W(this))return"-"+N(this).toString(K);for(var V=k(Math.pow(K,6)),L=this,y="";;){var se=ne(L,V).g;L=G(L,se.j(V));var ee=((0<L.g.length?L.g[0]:L.h)>>>0).toString(K);if(L=se,Y(L))return ee+y;for(;6>ee.length;)ee="0"+ee;y=ee+y}},a.i=function(K){return 0>K?0:K<this.g.length?this.g[K]:this.h};function Y(K){if(K.h!=0)return!1;for(var V=0;V<K.g.length;V++)if(K.g[V]!=0)return!1;return!0}function W(K){return K.h==-1}a.l=function(K){return K=G(this,K),W(K)?-1:Y(K)?0:1};function N(K){for(var V=K.g.length,L=[],y=0;y<V;y++)L[y]=~K.g[y];return new l(L,~K.h).add(D)}a.abs=function(){return W(this)?N(this):this},a.add=function(K){for(var V=Math.max(this.g.length,K.g.length),L=[],y=0,se=0;se<=V;se++){var ee=y+(this.i(se)&65535)+(K.i(se)&65535),re=(ee>>>16)+(this.i(se)>>>16)+(K.i(se)>>>16);y=re>>>16,ee&=65535,re&=65535,L[se]=re<<16|ee}return new l(L,L[L.length-1]&-2147483648?-1:0)};function G(K,V){return K.add(N(V))}a.j=function(K){if(Y(this)||Y(K))return $;if(W(this))return W(K)?N(this).j(N(K)):N(N(this).j(K));if(W(K))return N(this.j(N(K)));if(0>this.l(O)&&0>K.l(O))return k(this.m()*K.m());for(var V=this.g.length+K.g.length,L=[],y=0;y<2*V;y++)L[y]=0;for(y=0;y<this.g.length;y++)for(var se=0;se<K.g.length;se++){var ee=this.i(y)>>>16,re=this.i(y)&65535,He=K.i(se)>>>16,ut=K.i(se)&65535;L[2*y+2*se]+=re*ut,H(L,2*y+2*se),L[2*y+2*se+1]+=ee*ut,H(L,2*y+2*se+1),L[2*y+2*se+1]+=re*He,H(L,2*y+2*se+1),L[2*y+2*se+2]+=ee*He,H(L,2*y+2*se+2)}for(y=0;y<V;y++)L[y]=L[2*y+1]<<16|L[2*y];for(y=V;y<2*V;y++)L[y]=0;return new l(L,0)};function H(K,V){for(;(K[V]&65535)!=K[V];)K[V+1]+=K[V]>>>16,K[V]&=65535,V++}function U(K,V){this.g=K,this.h=V}function ne(K,V){if(Y(V))throw Error("division by zero");if(Y(K))return new U($,$);if(W(K))return V=ne(N(K),V),new U(N(V.g),N(V.h));if(W(V))return V=ne(K,N(V)),new U(N(V.g),V.h);if(30<K.g.length){if(W(K)||W(V))throw Error("slowDivide_ only works with positive integers.");for(var L=D,y=V;0>=y.l(K);)L=oe(L),y=oe(y);var se=$e(L,1),ee=$e(y,1);for(y=$e(y,2),L=$e(L,2);!Y(y);){var re=ee.add(y);0>=re.l(K)&&(se=se.add(L),ee=re),y=$e(y,1),L=$e(L,1)}return V=G(K,se.j(V)),new U(se,V)}for(se=$;0<=K.l(V);){for(L=Math.max(1,Math.floor(K.m()/V.m())),y=Math.ceil(Math.log(L)/Math.LN2),y=48>=y?1:Math.pow(2,y-48),ee=k(L),re=ee.j(V);W(re)||0<re.l(K);)L-=y,ee=k(L),re=ee.j(V);Y(ee)&&(ee=D),se=se.add(ee),K=G(K,re)}return new U(se,K)}a.A=function(K){return ne(this,K).h},a.and=function(K){for(var V=Math.max(this.g.length,K.g.length),L=[],y=0;y<V;y++)L[y]=this.i(y)&K.i(y);return new l(L,this.h&K.h)},a.or=function(K){for(var V=Math.max(this.g.length,K.g.length),L=[],y=0;y<V;y++)L[y]=this.i(y)|K.i(y);return new l(L,this.h|K.h)},a.xor=function(K){for(var V=Math.max(this.g.length,K.g.length),L=[],y=0;y<V;y++)L[y]=this.i(y)^K.i(y);return new l(L,this.h^K.h)};function oe(K){for(var V=K.g.length+1,L=[],y=0;y<V;y++)L[y]=K.i(y)<<1|K.i(y-1)>>>31;return new l(L,K.h)}function $e(K,V){var L=V>>5;V%=32;for(var y=K.g.length-L,se=[],ee=0;ee<y;ee++)se[ee]=0<V?K.i(ee+L)>>>V|K.i(ee+L+1)<<32-V:K.i(ee+L);return new l(se,K.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Yj=n,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=k,l.fromString=S,Ho=l}).apply(typeof tw<"u"?tw:typeof self<"u"?self:typeof window<"u"?window:{});var j0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xj,ad,Jj,z0,Ex,Zj,e2,t2;(function(){var a,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,R,Q){return f==Array.prototype||f==Object.prototype||(f[R]=Q.value),f};function s(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof j0=="object"&&j0];for(var R=0;R<f.length;++R){var Q=f[R];if(Q&&Q.Math==Math)return Q}throw Error("Cannot find global object")}var n=s(this);function i(f,R){if(R)e:{var Q=n;f=f.split(".");for(var ie=0;ie<f.length-1;ie++){var Me=f[ie];if(!(Me in Q))break e;Q=Q[Me]}f=f[f.length-1],ie=Q[f],R=R(ie),R!=ie&&R!=null&&t(Q,f,{configurable:!0,writable:!0,value:R})}}function u(f,R){f instanceof String&&(f+="");var Q=0,ie=!1,Me={next:function(){if(!ie&&Q<f.length){var Ke=Q++;return{value:R(Ke,f[Ke]),done:!1}}return ie=!0,{done:!0,value:void 0}}};return Me[Symbol.iterator]=function(){return Me},Me}i("Array.prototype.values",function(f){return f||function(){return u(this,function(R,Q){return Q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},p=this||self;function h(f){var R=typeof f;return R=R!="object"?R:f?Array.isArray(f)?"array":R:"null",R=="array"||R=="object"&&typeof f.length=="number"}function k(f){var R=typeof f;return R=="object"&&f!=null||R=="function"}function S(f,R,Q){return f.call.apply(f.bind,arguments)}function $(f,R,Q){if(!f)throw Error();if(2<arguments.length){var ie=Array.prototype.slice.call(arguments,2);return function(){var Me=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Me,ie),f.apply(R,Me)}}return function(){return f.apply(R,arguments)}}function D(f,R,Q){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:$,D.apply(null,arguments)}function O(f,R){var Q=Array.prototype.slice.call(arguments,1);return function(){var ie=Q.slice();return ie.push.apply(ie,arguments),f.apply(this,ie)}}function Y(f,R){function Q(){}Q.prototype=R.prototype,f.aa=R.prototype,f.prototype=new Q,f.prototype.constructor=f,f.Qb=function(ie,Me,Ke){for(var jt=Array(arguments.length-2),Br=2;Br<arguments.length;Br++)jt[Br-2]=arguments[Br];return R.prototype[Me].apply(ie,jt)}}function W(f){const R=f.length;if(0<R){const Q=Array(R);for(let ie=0;ie<R;ie++)Q[ie]=f[ie];return Q}return[]}function N(f,R){for(let Q=1;Q<arguments.length;Q++){const ie=arguments[Q];if(h(ie)){const Me=f.length||0,Ke=ie.length||0;f.length=Me+Ke;for(let jt=0;jt<Ke;jt++)f[Me+jt]=ie[jt]}else f.push(ie)}}class G{constructor(R,Q){this.i=R,this.j=Q,this.h=0,this.g=null}get(){let R;return 0<this.h?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function H(f){return/^[\s\xa0]*$/.test(f)}function U(){var f=p.navigator;return f&&(f=f.userAgent)?f:""}function ne(f){return ne[" "](f),f}ne[" "]=function(){};var oe=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function $e(f,R,Q){for(const ie in f)R.call(Q,f[ie],ie,f)}function K(f,R){for(const Q in f)R.call(void 0,f[Q],Q,f)}function V(f){const R={};for(const Q in f)R[Q]=f[Q];return R}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function y(f,R){let Q,ie;for(let Me=1;Me<arguments.length;Me++){ie=arguments[Me];for(Q in ie)f[Q]=ie[Q];for(let Ke=0;Ke<L.length;Ke++)Q=L[Ke],Object.prototype.hasOwnProperty.call(ie,Q)&&(f[Q]=ie[Q])}}function se(f){var R=1;f=f.split(":");const Q=[];for(;0<R&&f.length;)Q.push(f.shift()),R--;return f.length&&Q.push(f.join(":")),Q}function ee(f){p.setTimeout(()=>{throw f},0)}function re(){var f=Ne;let R=null;return f.g&&(R=f.g,f.g=f.g.next,f.g||(f.h=null),R.next=null),R}class He{constructor(){this.h=this.g=null}add(R,Q){const ie=ut.get();ie.set(R,Q),this.h?this.h.next=ie:this.g=ie,this.h=ie}}var ut=new G(()=>new it,f=>f.reset());class it{constructor(){this.next=this.g=this.h=null}set(R,Q){this.h=R,this.g=Q,this.next=null}reset(){this.next=this.g=this.h=null}}let Je,fe=!1,Ne=new He,ye=()=>{const f=p.Promise.resolve(void 0);Je=()=>{f.then(J)}};var J=()=>{for(var f;f=re();){try{f.h.call(f.g)}catch(Q){ee(Q)}var R=ut;R.j(f),100>R.h&&(R.h++,f.next=R.g,R.g=f)}fe=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(f,R){this.type=f,this.g=this.target=R,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Se=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var f=!1,R=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const Q=()=>{};p.addEventListener("test",Q,R),p.removeEventListener("test",Q,R)}catch{}return f})();function Ve(f,R){if(ve.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var Q=this.type=f.type,ie=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=R,R=f.relatedTarget){if(oe){e:{try{ne(R.nodeName);var Me=!0;break e}catch{}Me=!1}Me||(R=null)}}else Q=="mouseover"?R=f.fromElement:Q=="mouseout"&&(R=f.toElement);this.relatedTarget=R,ie?(this.clientX=ie.clientX!==void 0?ie.clientX:ie.pageX,this.clientY=ie.clientY!==void 0?ie.clientY:ie.pageY,this.screenX=ie.screenX||0,this.screenY=ie.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:q[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Ve.aa.h.call(this)}}Y(Ve,ve);var q={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var o="closure_listenable_"+(1e6*Math.random()|0),nt=0;function rt(f,R,Q,ie,Me){this.listener=f,this.proxy=null,this.src=R,this.type=Q,this.capture=!!ie,this.ha=Me,this.key=++nt,this.da=this.fa=!1}function Qe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Re(f){this.src=f,this.g={},this.h=0}Re.prototype.add=function(f,R,Q,ie,Me){var Ke=f.toString();f=this.g[Ke],f||(f=this.g[Ke]=[],this.h++);var jt=Et(f,R,ie,Me);return-1<jt?(R=f[jt],Q||(R.fa=!1)):(R=new rt(R,this.src,Ke,!!ie,Me),R.fa=Q,f.push(R)),R};function Pt(f,R){var Q=R.type;if(Q in f.g){var ie=f.g[Q],Me=Array.prototype.indexOf.call(ie,R,void 0),Ke;(Ke=0<=Me)&&Array.prototype.splice.call(ie,Me,1),Ke&&(Qe(R),f.g[Q].length==0&&(delete f.g[Q],f.h--))}}function Et(f,R,Q,ie){for(var Me=0;Me<f.length;++Me){var Ke=f[Me];if(!Ke.da&&Ke.listener==R&&Ke.capture==!!Q&&Ke.ha==ie)return Me}return-1}var Tt="closure_lm_"+(1e6*Math.random()|0),It={};function St(f,R,Q,ie,Me){if(Array.isArray(R)){for(var Ke=0;Ke<R.length;Ke++)St(f,R[Ke],Q,ie,Me);return null}return Q=we(Q),f&&f[o]?f.K(R,Q,k(ie)?!!ie.capture:!1,Me):ft(f,R,Q,!1,ie,Me)}function ft(f,R,Q,ie,Me,Ke){if(!R)throw Error("Invalid event type");var jt=k(Me)?!!Me.capture:!!Me,Br=Fe(f);if(Br||(f[Tt]=Br=new Re(f)),Q=Br.add(R,Q,ie,jt,Ke),Q.proxy)return Q;if(ie=ot(),Q.proxy=ie,ie.src=f,ie.listener=Q,f.addEventListener)Se||(Me=jt),Me===void 0&&(Me=!1),f.addEventListener(R.toString(),ie,Me);else if(f.attachEvent)f.attachEvent(ge(R.toString()),ie);else if(f.addListener&&f.removeListener)f.addListener(ie);else throw Error("addEventListener and attachEvent are unavailable.");return Q}function ot(){function f(Q){return R.call(f.src,f.listener,Q)}const R=Le;return f}function Ae(f,R,Q,ie,Me){if(Array.isArray(R))for(var Ke=0;Ke<R.length;Ke++)Ae(f,R[Ke],Q,ie,Me);else ie=k(ie)?!!ie.capture:!!ie,Q=we(Q),f&&f[o]?(f=f.i,R=String(R).toString(),R in f.g&&(Ke=f.g[R],Q=Et(Ke,Q,ie,Me),-1<Q&&(Qe(Ke[Q]),Array.prototype.splice.call(Ke,Q,1),Ke.length==0&&(delete f.g[R],f.h--)))):f&&(f=Fe(f))&&(R=f.g[R.toString()],f=-1,R&&(f=Et(R,Q,ie,Me)),(Q=-1<f?R[f]:null)&&Ye(Q))}function Ye(f){if(typeof f!="number"&&f&&!f.da){var R=f.src;if(R&&R[o])Pt(R.i,f);else{var Q=f.type,ie=f.proxy;R.removeEventListener?R.removeEventListener(Q,ie,f.capture):R.detachEvent?R.detachEvent(ge(Q),ie):R.addListener&&R.removeListener&&R.removeListener(ie),(Q=Fe(R))?(Pt(Q,f),Q.h==0&&(Q.src=null,R[Tt]=null)):Qe(f)}}}function ge(f){return f in It?It[f]:It[f]="on"+f}function Le(f,R){if(f.da)f=!0;else{R=new Ve(R,this);var Q=f.listener,ie=f.ha||f.src;f.fa&&Ye(f),f=Q.call(ie,R)}return f}function Fe(f){return f=f[Tt],f instanceof Re?f:null}var et="__closure_events_fn_"+(1e9*Math.random()>>>0);function we(f){return typeof f=="function"?f:(f[et]||(f[et]=function(R){return f.handleEvent(R)}),f[et])}function r(){de.call(this),this.i=new Re(this),this.M=this,this.F=null}Y(r,de),r.prototype[o]=!0,r.prototype.removeEventListener=function(f,R,Q,ie){Ae(this,f,R,Q,ie)};function C(f,R){var Q,ie=f.F;if(ie)for(Q=[];ie;ie=ie.F)Q.push(ie);if(f=f.M,ie=R.type||R,typeof R=="string")R=new ve(R,f);else if(R instanceof ve)R.target=R.target||f;else{var Me=R;R=new ve(ie,f),y(R,Me)}if(Me=!0,Q)for(var Ke=Q.length-1;0<=Ke;Ke--){var jt=R.g=Q[Ke];Me=g(jt,ie,!0,R)&&Me}if(jt=R.g=f,Me=g(jt,ie,!0,R)&&Me,Me=g(jt,ie,!1,R)&&Me,Q)for(Ke=0;Ke<Q.length;Ke++)jt=R.g=Q[Ke],Me=g(jt,ie,!1,R)&&Me}r.prototype.N=function(){if(r.aa.N.call(this),this.i){var f=this.i,R;for(R in f.g){for(var Q=f.g[R],ie=0;ie<Q.length;ie++)Qe(Q[ie]);delete f.g[R],f.h--}}this.F=null},r.prototype.K=function(f,R,Q,ie){return this.i.add(String(f),R,!1,Q,ie)},r.prototype.L=function(f,R,Q,ie){return this.i.add(String(f),R,!0,Q,ie)};function g(f,R,Q,ie){if(R=f.i.g[String(R)],!R)return!0;R=R.concat();for(var Me=!0,Ke=0;Ke<R.length;++Ke){var jt=R[Ke];if(jt&&!jt.da&&jt.capture==Q){var Br=jt.listener,xa=jt.ha||jt.src;jt.fa&&Pt(f.i,jt),Me=Br.call(xa,ie)!==!1&&Me}}return Me&&!ie.defaultPrevented}function E(f,R,Q){if(typeof f=="function")Q&&(f=D(f,Q));else if(f&&typeof f.handleEvent=="function")f=D(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(R)?-1:p.setTimeout(f,R||0)}function A(f){f.g=E(()=>{f.g=null,f.i&&(f.i=!1,A(f))},f.l);const R=f.h;f.h=null,f.m.apply(null,R)}class X extends de{constructor(R,Q){super(),this.m=R,this.l=Q,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:A(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(f){de.call(this),this.h=f,this.g={}}Y(ce,de);var le=[];function P(f){$e(f.g,function(R,Q){this.g.hasOwnProperty(Q)&&Ye(R)},f),f.g={}}ce.prototype.N=function(){ce.aa.N.call(this),P(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var B=p.JSON.stringify,_=p.JSON.parse,b=class{stringify(f){return p.JSON.stringify(f,void 0)}parse(f){return p.JSON.parse(f,void 0)}};function w(){}w.prototype.h=null;function z(f){return f.h||(f.h=f.i())}function me(){}var pe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function je(){ve.call(this,"d")}Y(je,ve);function Be(){ve.call(this,"c")}Y(Be,ve);var Ee={},xe=null;function dt(){return xe=xe||new r}Ee.La="serverreachability";function ht(f){ve.call(this,Ee.La,f)}Y(ht,ve);function Pe(f){const R=dt();C(R,new ht(R))}Ee.STAT_EVENT="statevent";function _e(f,R){ve.call(this,Ee.STAT_EVENT,f),this.stat=R}Y(_e,ve);function mt(f){const R=dt();C(R,new _e(R,f))}Ee.Ma="timingevent";function Xe(f,R){ve.call(this,Ee.Ma,f),this.size=R}Y(Xe,ve);function gt(f,R){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){f()},R)}function st(){this.g=!0}st.prototype.xa=function(){this.g=!1};function Nt(f,R,Q,ie,Me,Ke){f.info(function(){if(f.g)if(Ke)for(var jt="",Br=Ke.split("&"),xa=0;xa<Br.length;xa++){var jr=Br[xa].split("=");if(1<jr.length){var ya=jr[0];jr=jr[1];var ua=ya.split("_");jt=2<=ua.length&&ua[1]=="type"?jt+(ya+"="+jr+"&"):jt+(ya+"=redacted&")}}else jt=null;else jt=Ke;return"XMLHTTP REQ ("+ie+") [attempt "+Me+"]: "+R+`
`+Q+`
`+jt})}function pt(f,R,Q,ie,Me,Ke,jt){f.info(function(){return"XMLHTTP RESP ("+ie+") [ attempt "+Me+"]: "+R+`
`+Q+`
`+Ke+" "+jt})}function Ja(f,R,Q,ie){f.info(function(){return"XMLHTTP TEXT ("+R+"): "+_n(f,Q)+(ie?" "+ie:"")})}function ps(f,R){f.info(function(){return"TIMEOUT: "+R})}st.prototype.info=function(){};function _n(f,R){if(!f.g)return R;if(!R)return null;try{var Q=JSON.parse(R);if(Q){for(f=0;f<Q.length;f++)if(Array.isArray(Q[f])){var ie=Q[f];if(!(2>ie.length)){var Me=ie[1];if(Array.isArray(Me)&&!(1>Me.length)){var Ke=Me[0];if(Ke!="noop"&&Ke!="stop"&&Ke!="close")for(var jt=1;jt<Me.length;jt++)Me[jt]=""}}}}return B(Q)}catch{return R}}var hs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},An={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qa;function Za(){}Y(Za,w),Za.prototype.g=function(){return new XMLHttpRequest},Za.prototype.i=function(){return{}},qa=new Za;function es(f,R,Q,ie){this.j=f,this.i=R,this.l=Q,this.R=ie||1,this.U=new ce(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tl}function tl(){this.i=null,this.g="",this.h=!1}var ci={},mo={};function cn(f,R,Q){f.L=1,f.v=bo(gs(R)),f.m=Q,f.P=!0,di(f,null)}function di(f,R){f.F=Date.now(),Ur(f),f.A=gs(f.v);var Q=f.A,ie=f.R;Array.isArray(ie)||(ie=[String(ie)]),yo(Q.i,"t",ie),f.C=0,Q=f.j.J,f.h=new tl,f.g=$u(f.j,Q?R:null,!f.m),0<f.O&&(f.M=new X(D(f.Y,f,f.g),f.O)),R=f.U,Q=f.g,ie=f.ca;var Me="readystatechange";Array.isArray(Me)||(Me&&(le[0]=Me.toString()),Me=le);for(var Ke=0;Ke<Me.length;Ke++){var jt=St(Q,Me[Ke],ie||R.handleEvent,!1,R.h||R);if(!jt)break;R.g[jt.key]=jt}R=f.H?V(f.H):{},f.m?(f.u||(f.u="POST"),R["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,R)):(f.u="GET",f.g.ea(f.A,f.u,null,R)),Pe(),Nt(f.i,f.u,f.A,f.l,f.R,f.m)}es.prototype.ca=function(f){f=f.target;const R=this.M;R&&rs(f)==3?R.j():this.Y(f)},es.prototype.Y=function(f){try{if(f==this.g)e:{const ua=rs(this.g);var R=this.g.Ba();const Is=this.g.Z();if(!(3>ua)&&(ua!=3||this.g&&(this.h.h||this.g.oa()||jc(this.g)))){this.J||ua!=4||R==7||(R==8||0>=Is?Pe(3):Pe(2)),ui(this);var Q=this.g.Z();this.X=Q;t:if(rl(this)){var ie=jc(this.g);f="";var Me=ie.length,Ke=rs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ps(this),po(this);var jt="";break t}this.h.i=new p.TextDecoder}for(R=0;R<Me;R++)this.h.h=!0,f+=this.h.i.decode(ie[R],{stream:!(Ke&&R==Me-1)});ie.length=0,this.h.g+=f,this.C=0,jt=this.h.g}else jt=this.g.oa();if(this.o=Q==200,pt(this.i,this.u,this.A,this.l,this.R,ua,Q),this.o){if(this.T&&!this.K){t:{if(this.g){var Br,xa=this.g;if((Br=xa.g?xa.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Br)){var jr=Br;break t}}jr=null}if(Q=jr)Ja(this.i,this.l,Q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yc(this,Q);else{this.o=!1,this.s=3,mt(12),Ps(this),po(this);break e}}if(this.P){Q=!0;let fs;for(;!this.J&&this.C<jt.length;)if(fs=fc(this,jt),fs==mo){ua==4&&(this.s=4,mt(14),Q=!1),Ja(this.i,this.l,null,"[Incomplete Response]");break}else if(fs==ci){this.s=4,mt(15),Ja(this.i,this.l,jt,"[Invalid Chunk]"),Q=!1;break}else Ja(this.i,this.l,fs,null),yc(this,fs);if(rl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ua!=4||jt.length!=0||this.h.h||(this.s=1,mt(16),Q=!1),this.o=this.o&&Q,!Q)Ja(this.i,this.l,jt,"[Invalid Chunked Response]"),Ps(this),po(this);else if(0<jt.length&&!this.W){this.W=!0;var ya=this.j;ya.g==this&&ya.ba&&!ya.M&&(ya.j.info("Great, no buffering proxy detected. Bytes received: "+jt.length),Sc(ya),ya.M=!0,mt(11))}}else Ja(this.i,this.l,jt,null),yc(this,jt);ua==4&&Ps(this),this.o&&!this.J&&(ua==4?pl(this.j,this):(this.o=!1,Ur(this)))}else ll(this.g),Q==400&&0<jt.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Ps(this),po(this)}}}catch{}finally{}};function rl(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function fc(f,R){var Q=f.C,ie=R.indexOf(`
`,Q);return ie==-1?mo:(Q=Number(R.substring(Q,ie)),isNaN(Q)?ci:(ie+=1,ie+Q>R.length?mo:(R=R.slice(ie,ie+Q),f.C=ie+Q,R)))}es.prototype.cancel=function(){this.J=!0,Ps(this)};function Ur(f){f.S=Date.now()+f.I,uu(f,f.I)}function uu(f,R){if(f.B!=null)throw Error("WatchDog timer not null");f.B=gt(D(f.ba,f),R)}function ui(f){f.B&&(p.clearTimeout(f.B),f.B=null)}es.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ps(this.i,this.A),this.L!=2&&(Pe(),mt(17)),Ps(this),this.s=2,po(this)):uu(this,this.S-f)};function po(f){f.j.G==0||f.J||pl(f.j,f)}function Ps(f){ui(f);var R=f.M;R&&typeof R.ma=="function"&&R.ma(),f.M=null,P(f.U),f.g&&(R=f.g,f.g=null,R.abort(),R.ma())}function yc(f,R){try{var Q=f.j;if(Q.G!=0&&(Q.g==f||Ha(Q.h,f))){if(!f.K&&Ha(Q.h,f)&&Q.G==3){try{var ie=Q.Da.g.parse(R)}catch{ie=null}if(Array.isArray(ie)&&ie.length==3){var Me=ie;if(Me[0]==0){e:if(!Q.u){if(Q.g)if(Q.g.F+3e3<f.F)ml(Q),Ks(Q);else break e;ul(Q),mt(18)}}else Q.za=Me[1],0<Q.za-Q.T&&37500>Me[2]&&Q.F&&Q.v==0&&!Q.C&&(Q.C=gt(D(Q.Za,Q),6e3));if(1>=pu(Q.h)&&Q.ca){try{Q.ca()}catch{}Q.ca=void 0}}else Ln(Q,11)}else if((f.K||Q.g==f)&&ml(Q),!H(R))for(Me=Q.Da.g.parse(R),R=0;R<Me.length;R++){let jr=Me[R];if(Q.T=jr[0],jr=jr[1],Q.G==2)if(jr[0]=="c"){Q.K=jr[1],Q.ia=jr[2];const ya=jr[3];ya!=null&&(Q.la=ya,Q.j.info("VER="+Q.la));const ua=jr[4];ua!=null&&(Q.Aa=ua,Q.j.info("SVER="+Q.Aa));const Is=jr[5];Is!=null&&typeof Is=="number"&&0<Is&&(ie=1.5*Is,Q.L=ie,Q.j.info("backChannelRequestTimeoutMs_="+ie)),ie=Q;const fs=f.g;if(fs){const fi=fs.g?fs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fi){var Ke=ie.h;Ke.g||fi.indexOf("spdy")==-1&&fi.indexOf("quic")==-1&&fi.indexOf("h2")==-1||(Ke.j=Ke.l,Ke.g=new Set,Ke.h&&(vc(Ke,Ke.h),Ke.h=null))}if(ie.D){const xl=fs.g?fs.g.getResponseHeader("X-HTTP-Session-Id"):null;xl&&(ie.ya=xl,qr(ie.I,ie.D,xl))}}Q.G=3,Q.l&&Q.l.ua(),Q.ba&&(Q.R=Date.now()-f.F,Q.j.info("Handshake RTT: "+Q.R+"ms")),ie=Q;var jt=f;if(ie.qa=Su(ie,ie.J?ie.ia:null,ie.W),jt.K){hu(ie.h,jt);var Br=jt,xa=ie.L;xa&&(Br.I=xa),Br.B&&(ui(Br),Ur(Br)),ie.g=jt}else bi(ie);0<Q.i.length&&pn(Q)}else jr[0]!="stop"&&jr[0]!="close"||Ln(Q,7);else Q.G==3&&(jr[0]=="stop"||jr[0]=="close"?jr[0]=="stop"?Ln(Q,7):Sa(Q):jr[0]!="noop"&&Q.l&&Q.l.ta(jr),Q.v=0)}}Pe(4)}catch{}}var mu=class{constructor(f,R){this.g=f,this.map=R}};function mi(f){this.l=f||10,p.PerformanceNavigationTiming?(f=p.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xs(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function pu(f){return f.h?1:f.g?f.g.size:0}function Ha(f,R){return f.h?f.h==R:f.g?f.g.has(R):!1}function vc(f,R){f.g?f.g.add(R):f.h=R}function hu(f,R){f.h&&f.h==R?f.h=null:f.g&&f.g.has(R)&&f.g.delete(R)}mi.prototype.cancel=function(){if(this.i=xu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function xu(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let R=f.i;for(const Q of f.g.values())R=R.concat(Q.D);return R}return W(f.i)}function al(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(h(f)){for(var R=[],Q=f.length,ie=0;ie<Q;ie++)R.push(f[ie]);return R}R=[],Q=0;for(ie in f)R[Q++]=f[ie];return R}function sl(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(h(f)||typeof f=="string"){var R=[];f=f.length;for(var Q=0;Q<f;Q++)R.push(Q);return R}R=[],Q=0;for(const ie in f)R[Q++]=ie;return R}}}function ho(f,R){if(f.forEach&&typeof f.forEach=="function")f.forEach(R,void 0);else if(h(f)||typeof f=="string")Array.prototype.forEach.call(f,R,void 0);else for(var Q=sl(f),ie=al(f),Me=ie.length,Ke=0;Ke<Me;Ke++)R.call(void 0,ie[Ke],Q&&Q[Ke],f)}var pi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hp(f,R){if(f){f=f.split("&");for(var Q=0;Q<f.length;Q++){var ie=f[Q].indexOf("="),Me=null;if(0<=ie){var Ke=f[Q].substring(0,ie);Me=f[Q].substring(ie+1)}else Ke=f[Q];R(Ke,Me?decodeURIComponent(Me.replace(/\+/g," ")):"")}}}function Rn(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Rn){this.h=f.h,hi(this,f.j),this.o=f.o,this.g=f.g,xo(this,f.s),this.l=f.l;var R=f.i,Q=new dn;Q.i=R.i,R.g&&(Q.g=new Map(R.g),Q.h=R.h),go(this,Q),this.m=f.m}else f&&(R=String(f).match(pi))?(this.h=!1,hi(this,R[1]||"",!0),this.o=Nr(R[2]||""),this.g=Nr(R[3]||"",!0),xo(this,R[4]),this.l=Nr(R[5]||"",!0),go(this,R[6]||"",!0),this.m=Nr(R[7]||"")):(this.h=!1,this.i=new dn(null,this.h))}Rn.prototype.toString=function(){var f=[],R=this.j;R&&f.push(fo(R,nl,!0),":");var Q=this.g;return(Q||R=="file")&&(f.push("//"),(R=this.o)&&f.push(fo(R,nl,!0),"@"),f.push(encodeURIComponent(String(Q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Q=this.s,Q!=null&&f.push(":",String(Q))),(Q=this.l)&&(this.g&&Q.charAt(0)!="/"&&f.push("/"),f.push(fo(Q,Q.charAt(0)=="/"?fu:bu,!0))),(Q=this.i.toString())&&f.push("?",Q),(Q=this.m)&&f.push("#",fo(Q,wc)),f.join("")};function gs(f){return new Rn(f)}function hi(f,R,Q){f.j=Q?Nr(R,!0):R,f.j&&(f.j=f.j.replace(/:$/,""))}function xo(f,R){if(R){if(R=Number(R),isNaN(R)||0>R)throw Error("Bad port number "+R);f.s=R}else f.s=null}function go(f,R,Q){R instanceof dn?(f.i=R,un(f.i,f.h)):(Q||(R=fo(R,yu)),f.i=new dn(R,f.h))}function qr(f,R,Q){f.i.set(R,Q)}function bo(f){return qr(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Nr(f,R){return f?R?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function fo(f,R,Q){return typeof f=="string"?(f=encodeURI(f).replace(R,gu),Q&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function gu(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var nl=/[#\/\?@]/g,bu=/[#\?:]/g,fu=/[#\?]/g,yu=/[#\?@]/g,wc=/#/g;function dn(f,R){this.h=this.g=null,this.i=f||null,this.j=!!R}function Ca(f){f.g||(f.g=new Map,f.h=0,f.i&&hp(f.i,function(R,Q){f.add(decodeURIComponent(R.replace(/\+/g," ")),Q)}))}a=dn.prototype,a.add=function(f,R){Ca(this),this.i=null,f=Es(this,f);var Q=this.g.get(f);return Q||this.g.set(f,Q=[]),Q.push(R),this.h+=1,this};function qs(f,R){Ca(f),R=Es(f,R),f.g.has(R)&&(f.i=null,f.h-=f.g.get(R).length,f.g.delete(R))}function Hs(f,R){return Ca(f),R=Es(f,R),f.g.has(R)}a.forEach=function(f,R){Ca(this),this.g.forEach(function(Q,ie){Q.forEach(function(Me){f.call(R,Me,ie,this)},this)},this)},a.na=function(){Ca(this);const f=Array.from(this.g.values()),R=Array.from(this.g.keys()),Q=[];for(let ie=0;ie<R.length;ie++){const Me=f[ie];for(let Ke=0;Ke<Me.length;Ke++)Q.push(R[ie])}return Q},a.V=function(f){Ca(this);let R=[];if(typeof f=="string")Hs(this,f)&&(R=R.concat(this.g.get(Es(this,f))));else{f=Array.from(this.g.values());for(let Q=0;Q<f.length;Q++)R=R.concat(f[Q])}return R},a.set=function(f,R){return Ca(this),this.i=null,f=Es(this,f),Hs(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[R]),this.h+=1,this},a.get=function(f,R){return f?(f=this.V(f),0<f.length?String(f[0]):R):R};function yo(f,R,Q){qs(f,R),0<Q.length&&(f.i=null,f.g.set(Es(f,R),W(Q)),f.h+=Q.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],R=Array.from(this.g.keys());for(var Q=0;Q<R.length;Q++){var ie=R[Q];const Ke=encodeURIComponent(String(ie)),jt=this.V(ie);for(ie=0;ie<jt.length;ie++){var Me=Ke;jt[ie]!==""&&(Me+="="+encodeURIComponent(String(jt[ie]))),f.push(Me)}}return this.i=f.join("&")};function Es(f,R){return R=String(R),f.j&&(R=R.toLowerCase()),R}function un(f,R){R&&!f.j&&(Ca(f),f.i=null,f.g.forEach(function(Q,ie){var Me=ie.toLowerCase();ie!=Me&&(qs(this,ie),yo(this,Me,Q))},f)),f.j=R}function xp(f,R){const Q=new st;if(p.Image){const ie=new Image;ie.onload=O(ts,Q,"TestLoadImage: loaded",!0,R,ie),ie.onerror=O(ts,Q,"TestLoadImage: error",!1,R,ie),ie.onabort=O(ts,Q,"TestLoadImage: abort",!1,R,ie),ie.ontimeout=O(ts,Q,"TestLoadImage: timeout",!1,R,ie),p.setTimeout(function(){ie.ontimeout&&ie.ontimeout()},1e4),ie.src=f}else R(!1)}function vu(f,R){const Q=new st,ie=new AbortController,Me=setTimeout(()=>{ie.abort(),ts(Q,"TestPingServer: timeout",!1,R)},1e4);fetch(f,{signal:ie.signal}).then(Ke=>{clearTimeout(Me),Ke.ok?ts(Q,"TestPingServer: ok",!0,R):ts(Q,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(Me),ts(Q,"TestPingServer: error",!1,R)})}function ts(f,R,Q,ie,Me){try{Me&&(Me.onload=null,Me.onerror=null,Me.onabort=null,Me.ontimeout=null),ie(Q)}catch{}}function gp(){this.g=new b}function wu(f,R,Q){const ie=Q||"";try{ho(f,function(Me,Ke){let jt=Me;k(Me)&&(jt=B(Me)),R.push(ie+Ke+"="+encodeURIComponent(jt))})}catch(Me){throw R.push(ie+"type="+encodeURIComponent("_badmap")),Me}}function Mn(f){this.l=f.Ub||null,this.j=f.eb||!1}Y(Mn,w),Mn.prototype.g=function(){return new xi(this.l,this.j)},Mn.prototype.i=(function(f){return function(){return f}})({});function xi(f,R){r.call(this),this.D=f,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Y(xi,r),a=xi.prototype,a.open=function(f,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=R,this.readyState=1,Gs(this)},a.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const R={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(R.body=f),(this.D||p).fetch(new Request(this.A,R)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ws(this)),this.readyState=0},a.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Gs(this)),this.g&&(this.readyState=3,Gs(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ku(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function ku(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}a.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var R=f.value?f.value:new Uint8Array(0);(R=this.v.decode(R,{stream:!f.done}))&&(this.response=this.responseText+=R)}f.done?Ws(this):Gs(this),this.readyState==3&&ku(this)}},a.Ra=function(f){this.g&&(this.response=this.responseText=f,Ws(this))},a.Qa=function(f){this.g&&(this.response=f,Ws(this))},a.ga=function(){this.g&&Ws(this)};function Ws(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Gs(f)}a.setRequestHeader=function(f,R){this.u.append(f,R)},a.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],R=this.h.entries();for(var Q=R.next();!Q.done;)Q=Q.value,f.push(Q[0]+": "+Q[1]),Q=R.next();return f.join(`\r
`)};function Gs(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function zn(f){let R="";return $e(f,function(Q,ie){R+=ie,R+=":",R+=Q,R+=`\r
`}),R}function vo(f,R,Q){e:{for(ie in Q){var ie=!1;break e}ie=!0}ie||(Q=zn(Q),typeof f=="string"?Q!=null&&encodeURIComponent(String(Q)):qr(f,R,Q))}function Xr(f){r.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Y(Xr,r);var bp=/^https?$/i,kc=["POST","PUT"];a=Xr.prototype,a.Ha=function(f){this.J=f},a.ea=function(f,R,Q,ie){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);R=R?R.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qa.g(),this.v=this.o?z(this.o):z(qa),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(R,String(f),!0),this.B=!1}catch(Ke){gi(this,Ke);return}if(f=Q||"",Q=new Map(this.headers),ie)if(Object.getPrototypeOf(ie)===Object.prototype)for(var Me in ie)Q.set(Me,ie[Me]);else if(typeof ie.keys=="function"&&typeof ie.get=="function")for(const Ke of ie.keys())Q.set(Ke,ie.get(Ke));else throw Error("Unknown input type for opt_headers: "+String(ie));ie=Array.from(Q.keys()).find(Ke=>Ke.toLowerCase()=="content-type"),Me=p.FormData&&f instanceof p.FormData,!(0<=Array.prototype.indexOf.call(kc,R,void 0))||ie||Me||Q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ke,jt]of Q)this.g.setRequestHeader(Ke,jt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{il(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ke){gi(this,Ke)}};function gi(f,R){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=R,f.m=5,ol(f),bs(f)}function ol(f){f.A||(f.A=!0,C(f,"complete"),C(f,"error"))}a.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,C(this,"complete"),C(this,"abort"),bs(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bs(this,!0)),Xr.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?Nc(this):this.bb())},a.bb=function(){Nc(this)};function Nc(f){if(f.h&&typeof l<"u"&&(!f.v[1]||rs(f)!=4||f.Z()!=2)){if(f.u&&rs(f)==4)E(f.Ea,0,f);else if(C(f,"readystatechange"),rs(f)==4){f.h=!1;try{const jt=f.Z();e:switch(jt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var Q;if(!(Q=R)){var ie;if(ie=jt===0){var Me=String(f.D).match(pi)[1]||null;!Me&&p.self&&p.self.location&&(Me=p.self.location.protocol.slice(0,-1)),ie=!bp.test(Me?Me.toLowerCase():"")}Q=ie}if(Q)C(f,"complete"),C(f,"success");else{f.m=6;try{var Ke=2<rs(f)?f.g.statusText:""}catch{Ke=""}f.l=Ke+" ["+f.Z()+"]",ol(f)}}finally{bs(f)}}}}function bs(f,R){if(f.g){il(f);const Q=f.g,ie=f.v[0]?()=>{}:null;f.g=null,f.v=null,R||C(f,"ready");try{Q.onreadystatechange=ie}catch{}}}function il(f){f.I&&(p.clearTimeout(f.I),f.I=null)}a.isActive=function(){return!!this.g};function rs(f){return f.g?f.g.readyState:0}a.Z=function(){try{return 2<rs(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(f){if(this.g){var R=this.g.responseText;return f&&R.indexOf(f)==0&&(R=R.substring(f.length)),_(R)}};function jc(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ll(f){const R={};f=(f.g&&2<=rs(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let ie=0;ie<f.length;ie++){if(H(f[ie]))continue;var Q=se(f[ie]);const Me=Q[0];if(Q=Q[1],typeof Q!="string")continue;Q=Q.trim();const Ke=R[Me]||[];R[Me]=Ke,Ke.push(Q)}K(R,function(ie){return ie.join(", ")})}a.Ba=function(){return this.m},a.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mn(f,R,Q){return Q&&Q.internalChannelParams&&Q.internalChannelParams[f]||R}function Cc(f){this.Aa=0,this.i=[],this.j=new st,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mn("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mn("baseRetryDelayMs",5e3,f),this.cb=mn("retryDelaySeedMs",1e4,f),this.Wa=mn("forwardChannelMaxRetries",2,f),this.wa=mn("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new mi(f&&f.concurrentRequestLimit),this.Da=new gp,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}a=Cc.prototype,a.la=8,a.G=1,a.connect=function(f,R,Q,ie){mt(0),this.W=f,this.H=R||{},Q&&ie!==void 0&&(this.H.OSID=Q,this.H.OAID=ie),this.F=this.X,this.I=Su(this,null,this.W),pn(this)};function Sa(f){if(cl(f),f.G==3){var R=f.U++,Q=gs(f.I);if(qr(Q,"SID",f.K),qr(Q,"RID",R),qr(Q,"TYPE","terminate"),Bn(f,Q),R=new es(f,f.j,R),R.L=2,R.v=bo(gs(Q)),Q=!1,p.navigator&&p.navigator.sendBeacon)try{Q=p.navigator.sendBeacon(R.v.toString(),"")}catch{}!Q&&p.Image&&(new Image().src=R.v,Q=!0),Q||(R.g=$u(R.j,null),R.g.ea(R.v)),R.F=Date.now(),Ur(R)}Cu(f)}function Ks(f){f.g&&(Sc(f),f.g.cancel(),f.g=null)}function cl(f){Ks(f),f.u&&(p.clearTimeout(f.u),f.u=null),ml(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&p.clearTimeout(f.s),f.s=null)}function pn(f){if(!xs(f.h)&&!f.s){f.s=!0;var R=f.Ga;Je||ye(),fe||(Je(),fe=!0),Ne.add(R,f),f.B=0}}function fp(f,R){return pu(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=R.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=gt(D(f.Ga,f,R),ju(f,f.B)),f.B++,!0)}a.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const Me=new es(this,this.j,f);let Ke=this.o;if(this.S&&(Ke?(Ke=V(Ke),y(Ke,this.S)):Ke=this.S),this.m!==null||this.O||(Me.H=Ke,Ke=null),this.P)e:{for(var R=0,Q=0;Q<this.i.length;Q++){t:{var ie=this.i[Q];if("__data__"in ie.map&&(ie=ie.map.__data__,typeof ie=="string")){ie=ie.length;break t}ie=void 0}if(ie===void 0)break;if(R+=ie,4096<R){R=Q;break e}if(R===4096||Q===this.i.length-1){R=Q+1;break e}}R=1e3}else R=1e3;R=wo(this,Me,R),Q=gs(this.I),qr(Q,"RID",f),qr(Q,"CVER",22),this.D&&qr(Q,"X-HTTP-Session-Id",this.D),Bn(this,Q),Ke&&(this.O?R="headers="+encodeURIComponent(String(zn(Ke)))+"&"+R:this.m&&vo(Q,this.m,Ke)),vc(this.h,Me),this.Ua&&qr(Q,"TYPE","init"),this.P?(qr(Q,"$req",R),qr(Q,"SID","null"),Me.T=!0,cn(Me,Q,null)):cn(Me,Q,R),this.G=2}}else this.G==3&&(f?dl(this,f):this.i.length==0||xs(this.h)||dl(this))};function dl(f,R){var Q;R?Q=R.l:Q=f.U++;const ie=gs(f.I);qr(ie,"SID",f.K),qr(ie,"RID",Q),qr(ie,"AID",f.T),Bn(f,ie),f.m&&f.o&&vo(ie,f.m,f.o),Q=new es(f,f.j,Q,f.B+1),f.m===null&&(Q.H=f.o),R&&(f.i=R.D.concat(f.i)),R=wo(f,Q,1e3),Q.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),vc(f.h,Q),cn(Q,ie,R)}function Bn(f,R){f.H&&$e(f.H,function(Q,ie){qr(R,ie,Q)}),f.l&&ho({},function(Q,ie){qr(R,ie,Q)})}function wo(f,R,Q){Q=Math.min(f.i.length,Q);var ie=f.l?D(f.l.Na,f.l,f):null;e:{var Me=f.i;let Ke=-1;for(;;){const jt=["count="+Q];Ke==-1?0<Q?(Ke=Me[0].g,jt.push("ofs="+Ke)):Ke=0:jt.push("ofs="+Ke);let Br=!0;for(let xa=0;xa<Q;xa++){let jr=Me[xa].g;const ya=Me[xa].map;if(jr-=Ke,0>jr)Ke=Math.max(0,Me[xa].g-100),Br=!1;else try{wu(ya,jt,"req"+jr+"_")}catch{ie&&ie(ya)}}if(Br){ie=jt.join("&");break e}}}return f=f.i.splice(0,Q),R.D=f,ie}function bi(f){if(!f.g&&!f.u){f.Y=1;var R=f.Fa;Je||ye(),fe||(Je(),fe=!0),Ne.add(R,f),f.v=0}}function ul(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=gt(D(f.Fa,f),ju(f,f.v)),f.v++,!0)}a.Fa=function(){if(this.u=null,Nu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=gt(D(this.ab,this),f)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Ks(this),Nu(this))};function Sc(f){f.A!=null&&(p.clearTimeout(f.A),f.A=null)}function Nu(f){f.g=new es(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var R=gs(f.qa);qr(R,"RID","rpc"),qr(R,"SID",f.K),qr(R,"AID",f.T),qr(R,"CI",f.F?"0":"1"),!f.F&&f.ja&&qr(R,"TO",f.ja),qr(R,"TYPE","xmlhttp"),Bn(f,R),f.m&&f.o&&vo(R,f.m,f.o),f.L&&(f.g.I=f.L);var Q=f.g;f=f.ia,Q.L=1,Q.v=bo(gs(R)),Q.m=null,Q.P=!0,di(Q,f)}a.Za=function(){this.C!=null&&(this.C=null,Ks(this),ul(this),mt(19))};function ml(f){f.C!=null&&(p.clearTimeout(f.C),f.C=null)}function pl(f,R){var Q=null;if(f.g==R){ml(f),Sc(f),f.g=null;var ie=2}else if(Ha(f.h,R))Q=R.D,hu(f.h,R),ie=1;else return;if(f.G!=0){if(R.o)if(ie==1){Q=R.m?R.m.length:0,R=Date.now()-R.F;var Me=f.B;ie=dt(),C(ie,new Xe(ie,Q)),pn(f)}else bi(f);else if(Me=R.s,Me==3||Me==0&&0<R.X||!(ie==1&&fp(f,R)||ie==2&&ul(f)))switch(Q&&0<Q.length&&(R=f.h,R.i=R.i.concat(Q)),Me){case 1:Ln(f,5);break;case 4:Ln(f,10);break;case 3:Ln(f,6);break;default:Ln(f,2)}}}function ju(f,R){let Q=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(Q*=2),Q*R}function Ln(f,R){if(f.j.info("Error code "+R),R==2){var Q=D(f.fb,f),ie=f.Xa;const Me=!ie;ie=new Rn(ie||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||hi(ie,"https"),bo(ie),Me?xp(ie.toString(),Q):vu(ie.toString(),Q)}else mt(2);f.G=0,f.l&&f.l.sa(R),Cu(f),cl(f)}a.fb=function(f){f?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Cu(f){if(f.G=0,f.ka=[],f.l){const R=xu(f.h);(R.length!=0||f.i.length!=0)&&(N(f.ka,R),N(f.ka,f.i),f.h.i.length=0,W(f.i),f.i.length=0),f.l.ra()}}function Su(f,R,Q){var ie=Q instanceof Rn?gs(Q):new Rn(Q);if(ie.g!="")R&&(ie.g=R+"."+ie.g),xo(ie,ie.s);else{var Me=p.location;ie=Me.protocol,R=R?R+"."+Me.hostname:Me.hostname,Me=+Me.port;var Ke=new Rn(null);ie&&hi(Ke,ie),R&&(Ke.g=R),Me&&xo(Ke,Me),Q&&(Ke.l=Q),ie=Ke}return Q=f.D,R=f.ya,Q&&R&&qr(ie,Q,R),qr(ie,"VER",f.la),Bn(f,ie),ie}function $u(f,R,Q){if(R&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return R=f.Ca&&!f.pa?new Xr(new Mn({eb:Q})):new Xr(f.pa),R.Ha(f.J),R}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function $c(){}a=$c.prototype,a.ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){};function hl(){}hl.prototype.g=function(f,R){return new Wa(f,R)};function Wa(f,R){r.call(this),this.g=new Cc(R),this.l=f,this.h=R&&R.messageUrlParams||null,f=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(f?f["X-WebChannel-Content-Type"]=R.messageContentType:f={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.va&&(f?f["X-WebChannel-Client-Profile"]=R.va:f={"X-WebChannel-Client-Profile":R.va}),this.g.S=f,(f=R&&R.Sb)&&!H(f)&&(this.g.m=f),this.v=R&&R.supportsCrossDomainXhr||!1,this.u=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!H(R)&&(this.g.D=R,f=this.h,f!==null&&R in f&&(f=this.h,R in f&&delete f[R])),this.j=new hn(this)}Y(Wa,r),Wa.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wa.prototype.close=function(){Sa(this.g)},Wa.prototype.o=function(f){var R=this.g;if(typeof f=="string"){var Q={};Q.__data__=f,f=Q}else this.u&&(Q={},Q.__data__=B(f),f=Q);R.i.push(new mu(R.Ya++,f)),R.G==3&&pn(R)},Wa.prototype.N=function(){this.g.l=null,delete this.j,Sa(this.g),delete this.g,Wa.aa.N.call(this)};function Tu(f){je.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var R=f.__sm__;if(R){e:{for(const Q in R){f=Q;break e}f=void 0}(this.i=f)&&(f=this.i,R=R!==null&&f in R?R[f]:void 0),this.data=R}else this.data=f}Y(Tu,je);function Pu(){Be.call(this),this.status=1}Y(Pu,Be);function hn(f){this.g=f}Y(hn,$c),hn.prototype.ua=function(){C(this.g,"a")},hn.prototype.ta=function(f){C(this.g,new Tu(f))},hn.prototype.sa=function(f){C(this.g,new Pu)},hn.prototype.ra=function(){C(this.g,"b")},hl.prototype.createWebChannel=hl.prototype.g,Wa.prototype.send=Wa.prototype.o,Wa.prototype.open=Wa.prototype.m,Wa.prototype.close=Wa.prototype.close,t2=function(){return new hl},e2=function(){return dt()},Zj=Ee,Ex={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hs.NO_ERROR=0,hs.TIMEOUT=8,hs.HTTP_ERROR=6,z0=hs,An.COMPLETE="complete",Jj=An,me.EventType=pe,pe.OPEN="a",pe.CLOSE="b",pe.ERROR="c",pe.MESSAGE="d",r.prototype.listen=r.prototype.K,ad=me,Xr.prototype.listenOnce=Xr.prototype.L,Xr.prototype.getLastError=Xr.prototype.Ka,Xr.prototype.getLastErrorCode=Xr.prototype.Ba,Xr.prototype.getStatus=Xr.prototype.Z,Xr.prototype.getResponseJson=Xr.prototype.Oa,Xr.prototype.getResponseText=Xr.prototype.oa,Xr.prototype.send=Xr.prototype.ea,Xr.prototype.setWithCredentials=Xr.prototype.Ha,Xj=Xr}).apply(typeof j0<"u"?j0:typeof self<"u"?self:typeof window<"u"?window:{});const rw="@firebase/firestore",aw="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Va.UNAUTHENTICATED=new Va(null),Va.GOOGLE_CREDENTIALS=new Va("google-credentials-uid"),Va.FIRST_PARTY=new Va("first-party-uid"),Va.MOCK_USER=new Va("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cc="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new zm("@firebase/firestore");function Ml(){return Ui.logLevel}function Rt(a,...t){if(Ui.logLevel<=xr.DEBUG){const s=t.map(Eg);Ui.debug(`Firestore (${cc}): ${a}`,...s)}}function ao(a,...t){if(Ui.logLevel<=xr.ERROR){const s=t.map(Eg);Ui.error(`Firestore (${cc}): ${a}`,...s)}}function Xl(a,...t){if(Ui.logLevel<=xr.WARN){const s=t.map(Eg);Ui.warn(`Firestore (${cc}): ${a}`,...s)}}function Eg(a){if(typeof a=="string")return a;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(a="Unexpected state"){const t=`FIRESTORE (${cc}) INTERNAL ASSERTION FAILED: `+a;throw ao(t),new Error(t)}function Sr(a,t){a||ar()}function lr(a,t){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Dt extends Us{constructor(t,s){super(t,s),this.code=t,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(){this.promise=new Promise(((t,s)=>{this.resolve=t,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(t,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class pI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,s){t.enqueueRetryable((()=>s(Va.UNAUTHENTICATED)))}shutdown(){}}class hI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,s){this.changeListener=s,t.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class xI{constructor(t){this.t=t,this.currentUser=Va.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,s){Sr(this.o===void 0);let n=this.i;const i=h=>this.i!==n?(n=this.i,s(h)):Promise.resolve();let u=new vn;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new vn,t.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const h=u;t.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},p=h=>{Rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>p(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?p(h):(Rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new vn)}}),0),l()}getToken(){const t=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((n=>this.i!==t?(Rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Sr(typeof n.accessToken=="string"),new r2(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Sr(t===null||typeof t=="string"),new Va(t)}}class gI{constructor(t,s,n){this.l=t,this.h=s,this.P=n,this.type="FirstParty",this.user=Va.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class bI{constructor(t,s,n){this.l=t,this.h=s,this.P=n}getToken(){return Promise.resolve(new gI(this.l,this.h,this.P))}start(t,s){t.enqueueRetryable((()=>s(Va.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sw{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fI{constructor(t,s){this.A=s,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ks(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,s){Sr(this.o===void 0);const n=u=>{u.error!=null&&Rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.R;return this.R=u.token,Rt("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?s(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>n(u)))};const i=u=>{Rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((u=>i(u))),setTimeout((()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?i(u):Rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new sw(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((s=>s?(Sr(typeof s.token=="string"),this.R=s.token,new sw(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(a){const t=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(a);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(s);else for(let n=0;n<a;n++)s[n]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=yI(40);for(let u=0;u<i.length;++u)n.length<20&&i[u]<s&&(n+=t.charAt(i[u]%62))}return n}}function dr(a,t){return a<t?-1:a>t?1:0}function Ix(a,t){let s=0;for(;s<a.length&&s<t.length;){const n=a.codePointAt(s),i=t.codePointAt(s);if(n!==i){if(n<128&&i<128)return dr(n,i);{const u=a2(),l=vI(u.encode(nw(a,s)),u.encode(nw(t,s)));return l!==0?l:dr(n,i)}}s+=n>65535?2:1}return dr(a.length,t.length)}function nw(a,t){return a.codePointAt(t)>65535?a.substring(t,t+2):a.substring(t,t+1)}function vI(a,t){for(let s=0;s<a.length&&s<t.length;++s)if(a[s]!==t[s])return dr(a[s],t[s]);return dr(a.length,t.length)}function Jl(a,t,s){return a.length===t.length&&a.every(((n,i)=>s(n,t[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=-62135596800,iw=1e6;class Wr{static now(){return Wr.fromMillis(Date.now())}static fromDate(t){return Wr.fromMillis(t.getTime())}static fromMillis(t){const s=Math.floor(t/1e3),n=Math.floor((t-1e3*s)*iw);return new Wr(s,n)}constructor(t,s){if(this.seconds=t,this.nanoseconds=s,s<0)throw new Dt(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Dt(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(t<ow)throw new Dt(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Dt(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iw}_compareTo(t){return this.seconds===t.seconds?dr(this.nanoseconds,t.nanoseconds):dr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-ow;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{static fromTimestamp(t){return new sr(t)}static min(){return new sr(new Wr(0,0))}static max(){return new sr(new Wr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="__name__";class yn{constructor(t,s,n){s===void 0?s=0:s>t.length&&ar(),n===void 0?n=t.length-s:n>t.length-s&&ar(),this.segments=t,this.offset=s,this.len=n}get length(){return this.len}isEqual(t){return yn.comparator(this,t)===0}child(t){const s=this.segments.slice(this.offset,this.limit());return t instanceof yn?t.forEach((n=>{s.push(n)})):s.push(t),this.construct(s)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}forEach(t){for(let s=this.offset,n=this.limit();s<n;s++)t(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,s){const n=Math.min(t.length,s.length);for(let i=0;i<n;i++){const u=yn.compareSegments(t.get(i),s.get(i));if(u!==0)return u}return dr(t.length,s.length)}static compareSegments(t,s){const n=yn.isNumericId(t),i=yn.isNumericId(s);return n&&!i?-1:!n&&i?1:n&&i?yn.extractNumericId(t).compare(yn.extractNumericId(s)):Ix(t,s)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ho.fromString(t.substring(4,t.length-2))}}class Hr extends yn{construct(t,s,n){return new Hr(t,s,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const s=[];for(const n of t){if(n.indexOf("//")>=0)throw new Dt(Ze.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);s.push(...n.split("/").filter((i=>i.length>0)))}return new Hr(s)}static emptyPath(){return new Hr([])}}const wI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ia extends yn{construct(t,s,n){return new Ia(t,s,n)}static isValidIdentifier(t){return wI.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ia.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lw}static keyField(){return new Ia([lw])}static fromServerFormat(t){const s=[];let n="",i=0;const u=()=>{if(n.length===0)throw new Dt(Ze.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(n),n=""};let l=!1;for(;i<t.length;){const p=t[i];if(p==="\\"){if(i+1===t.length)throw new Dt(Ze.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const h=t[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Dt(Ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=h,i+=2}else p==="`"?(l=!l,i++):p!=="."||l?(n+=p,i++):(u(),i++)}if(u(),l)throw new Dt(Ze.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ia(s)}static emptyPath(){return new Ia([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(t){this.path=t}static fromPath(t){return new er(Hr.fromString(t))}static fromName(t){return new er(Hr.fromString(t).popFirst(5))}static empty(){return new er(Hr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Hr.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,s){return Hr.comparator(t.path,s.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new er(new Hr(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=-1;function kI(a,t){const s=a.toTimestamp().seconds,n=a.toTimestamp().nanoseconds+1,i=sr.fromTimestamp(n===1e9?new Wr(s+1,0):new Wr(s,n));return new Yo(i,er.empty(),t)}function NI(a){return new Yo(a.readTime,a.key,Nd)}class Yo{constructor(t,s,n){this.readTime=t,this.documentKey=s,this.largestBatchId=n}static min(){return new Yo(sr.min(),er.empty(),Nd)}static max(){return new Yo(sr.max(),er.empty(),Nd)}}function jI(a,t){let s=a.readTime.compareTo(t.readTime);return s!==0?s:(s=er.comparator(a.documentKey,t.documentKey),s!==0?s:dr(a.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(a){if(a.code!==Ze.FAILED_PRECONDITION||a.message!==CI)throw a;Rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(t){return this.next(void 0,t)}next(t,s){return this.callbackAttached&&ar(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(t,this.result):new at(((n,i)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(n,i)},this.catchCallback=u=>{this.wrapFailure(s,u).next(n,i)}}))}toPromise(){return new Promise(((t,s)=>{this.next(t,s)}))}wrapUserFunction(t){try{const s=t();return s instanceof at?s:at.resolve(s)}catch(s){return at.reject(s)}}wrapSuccess(t,s){return t?this.wrapUserFunction((()=>t(s))):at.resolve(s)}wrapFailure(t,s){return t?this.wrapUserFunction((()=>t(s))):at.reject(s)}static resolve(t){return new at(((s,n)=>{s(t)}))}static reject(t){return new at(((s,n)=>{n(t)}))}static waitFor(t){return new at(((s,n)=>{let i=0,u=0,l=!1;t.forEach((p=>{++i,p.next((()=>{++u,l&&u===i&&s()}),(h=>n(h)))})),l=!0,u===i&&s()}))}static or(t){let s=at.resolve(!1);for(const n of t)s=s.next((i=>i?at.resolve(i):n()));return s}static forEach(t,s){const n=[];return t.forEach(((i,u)=>{n.push(s.call(this,i,u))})),this.waitFor(n)}static mapArray(t,s){return new at(((n,i)=>{const u=t.length,l=new Array(u);let p=0;for(let h=0;h<u;h++){const k=h;s(t[k]).next((S=>{l[k]=S,++p,p===u&&n(l)}),(S=>i(S)))}}))}static doWhile(t,s){return new at(((n,i)=>{const u=()=>{t()===!0?s().next((()=>{u()}),i):n()};u()}))}}function $I(a){const t=a.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function uc(a){return a.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=n=>this.oe(n),this._e=n=>s.writeSequenceNumber(n))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}Vm.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig=-1;function Wd(a){return a==null}function rm(a){return a===0&&1/a==-1/0}function TI(a){return typeof a=="number"&&Number.isInteger(a)&&!rm(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="";function PI(a){let t="";for(let s=0;s<a.length;s++)t.length>0&&(t=cw(t)),t=EI(a.get(s),t);return cw(t)}function EI(a,t){let s=t;const n=a.length;for(let i=0;i<n;i++){const u=a.charAt(i);switch(u){case"\0":s+="";break;case n2:s+="";break;default:s+=u}}return s}function cw(a){return a+n2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(a){let t=0;for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&t++;return t}function ni(a,t){for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&t(s,a[s])}function o2(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(t,s){this.comparator=t,this.root=s||Ea.EMPTY}insert(t,s){return new sa(this.comparator,this.root.insert(t,s,this.comparator).copy(null,null,Ea.BLACK,null,null))}remove(t){return new sa(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ea.BLACK,null,null))}get(t){let s=this.root;for(;!s.isEmpty();){const n=this.comparator(t,s.key);if(n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}indexOf(t){let s=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return s+n.left.size;i<0?n=n.left:(s+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((s,n)=>(t(s,n),!1)))}toString(){const t=[];return this.inorderTraversal(((s,n)=>(t.push(`${s}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new C0(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new C0(this.root,t,this.comparator,!1)}getReverseIterator(){return new C0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new C0(this.root,t,this.comparator,!0)}}class C0{constructor(t,s,n,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=s?n(t.key,s):1,s&&i&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const s={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ea{constructor(t,s,n,i,u){this.key=t,this.value=s,this.color=n??Ea.RED,this.left=i??Ea.EMPTY,this.right=u??Ea.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,s,n,i,u){return new Ea(t??this.key,s??this.value,n??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,s,n){let i=this;const u=n(t,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(t,s,n),null):u===0?i.copy(null,s,null,null,null):i.copy(null,null,null,null,i.right.insert(t,s,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ea.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,s){let n,i=this;if(s(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,s),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),s(t,i.key)===0){if(i.right.isEmpty())return Ea.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,s))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ea.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ea.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ar();const t=this.left.check();if(t!==this.right.check())throw ar();return t+(this.isRed()?0:1)}}Ea.EMPTY=null,Ea.RED=!0,Ea.BLACK=!1;Ea.EMPTY=new class{constructor(){this.size=0}get key(){throw ar()}get value(){throw ar()}get color(){throw ar()}get left(){throw ar()}get right(){throw ar()}copy(t,s,n,i,u){return this}insert(t,s,n){return new Ea(t,s)}remove(t,s){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t){this.comparator=t,this.data=new sa(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((s,n)=>(t(s),!1)))}forEachInRange(t,s){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;s(i.key)}}forEachWhile(t,s){let n;for(n=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const s=this.data.getIteratorFrom(t);return s.hasNext()?s.getNext().key:null}getIterator(){return new uw(this.data.getIterator())}getIteratorFrom(t){return new uw(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let s=this;return s.size<t.size&&(s=t,t=this),t.forEach((n=>{s=s.add(n)})),s}isEqual(t){if(!(t instanceof fa)||this.size!==t.size)return!1;const s=this.data.getIterator(),n=t.data.getIterator();for(;s.hasNext();){const i=s.getNext().key,u=n.getNext().key;if(this.comparator(i,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((s=>{t.push(s)})),t}toString(){const t=[];return this.forEach((s=>t.push(s))),"SortedSet("+t.toString()+")"}copy(t){const s=new fa(this.comparator);return s.data=t,s}}class uw{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(t){this.fields=t,t.sort(Ia.comparator)}static empty(){return new js([])}unionWith(t){let s=new fa(Ia.comparator);for(const n of this.fields)s=s.add(n);for(const n of t)s=s.add(n);return new js(s.toArray())}covers(t){for(const s of this.fields)if(s.isPrefixOf(t))return!0;return!1}isEqual(t){return Jl(this.fields,t.fields,((s,n)=>s.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(t){this.binaryString=t}static fromBase64String(t){const s=(function(i){try{return atob(i)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new i2("Invalid base64 string: "+u):u}})(t);return new Aa(s)}static fromUint8Array(t){const s=(function(i){let u="";for(let l=0;l<i.length;++l)u+=String.fromCharCode(i[l]);return u})(t);return new Aa(s)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const n=new Uint8Array(s.length);for(let i=0;i<s.length;i++)n[i]=s.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return dr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Aa.EMPTY_BYTE_STRING=new Aa("");const II=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xo(a){if(Sr(!!a),typeof a=="string"){let t=0;const s=II.exec(a);if(Sr(!!s),s[1]){let i=s[1];i=(i+"000000000").substr(0,9),t=Number(i)}const n=new Date(a);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:ca(a.seconds),nanos:ca(a.nanos)}}function ca(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function Jo(a){return typeof a=="string"?Aa.fromBase64String(a):Aa.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="server_timestamp",c2="__type__",d2="__previous_value__",u2="__local_write_time__";function Dg(a){var t,s;return((s=(((t=a?.mapValue)===null||t===void 0?void 0:t.fields)||{})[c2])===null||s===void 0?void 0:s.stringValue)===l2}function Fm(a){const t=a.mapValue.fields[d2];return Dg(t)?Fm(t):t}function jd(a){const t=Xo(a.mapValue.fields[u2].timestampValue);return new Wr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(t,s,n,i,u,l,p,h,k){this.databaseId=t,this.appId=s,this.persistenceKey=n,this.host=i,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=p,this.longPollingOptions=h,this.useFetchStreams=k}}const am="(default)";class Cd{constructor(t,s){this.projectId=t,this.database=s||am}static empty(){return new Cd("","")}get isDefaultDatabase(){return this.database===am}isEqual(t){return t instanceof Cd&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2="__type__",_I="__max__",S0={mapValue:{}},p2="__vector__",sm="value";function Zo(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Dg(a)?4:RI(a)?9007199254740991:AI(a)?10:11:ar()}function Tn(a,t){if(a===t)return!0;const s=Zo(a);if(s!==Zo(t))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===t.booleanValue;case 4:return jd(a).isEqual(jd(t));case 3:return(function(i,u){if(typeof i.timestampValue=="string"&&typeof u.timestampValue=="string"&&i.timestampValue.length===u.timestampValue.length)return i.timestampValue===u.timestampValue;const l=Xo(i.timestampValue),p=Xo(u.timestampValue);return l.seconds===p.seconds&&l.nanos===p.nanos})(a,t);case 5:return a.stringValue===t.stringValue;case 6:return(function(i,u){return Jo(i.bytesValue).isEqual(Jo(u.bytesValue))})(a,t);case 7:return a.referenceValue===t.referenceValue;case 8:return(function(i,u){return ca(i.geoPointValue.latitude)===ca(u.geoPointValue.latitude)&&ca(i.geoPointValue.longitude)===ca(u.geoPointValue.longitude)})(a,t);case 2:return(function(i,u){if("integerValue"in i&&"integerValue"in u)return ca(i.integerValue)===ca(u.integerValue);if("doubleValue"in i&&"doubleValue"in u){const l=ca(i.doubleValue),p=ca(u.doubleValue);return l===p?rm(l)===rm(p):isNaN(l)&&isNaN(p)}return!1})(a,t);case 9:return Jl(a.arrayValue.values||[],t.arrayValue.values||[],Tn);case 10:case 11:return(function(i,u){const l=i.mapValue.fields||{},p=u.mapValue.fields||{};if(dw(l)!==dw(p))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(p[h]===void 0||!Tn(l[h],p[h])))return!1;return!0})(a,t);default:return ar()}}function Sd(a,t){return(a.values||[]).find((s=>Tn(s,t)))!==void 0}function Zl(a,t){if(a===t)return 0;const s=Zo(a),n=Zo(t);if(s!==n)return dr(s,n);switch(s){case 0:case 9007199254740991:return 0;case 1:return dr(a.booleanValue,t.booleanValue);case 2:return(function(u,l){const p=ca(u.integerValue||u.doubleValue),h=ca(l.integerValue||l.doubleValue);return p<h?-1:p>h?1:p===h?0:isNaN(p)?isNaN(h)?0:-1:1})(a,t);case 3:return mw(a.timestampValue,t.timestampValue);case 4:return mw(jd(a),jd(t));case 5:return Ix(a.stringValue,t.stringValue);case 6:return(function(u,l){const p=Jo(u),h=Jo(l);return p.compareTo(h)})(a.bytesValue,t.bytesValue);case 7:return(function(u,l){const p=u.split("/"),h=l.split("/");for(let k=0;k<p.length&&k<h.length;k++){const S=dr(p[k],h[k]);if(S!==0)return S}return dr(p.length,h.length)})(a.referenceValue,t.referenceValue);case 8:return(function(u,l){const p=dr(ca(u.latitude),ca(l.latitude));return p!==0?p:dr(ca(u.longitude),ca(l.longitude))})(a.geoPointValue,t.geoPointValue);case 9:return pw(a.arrayValue,t.arrayValue);case 10:return(function(u,l){var p,h,k,S;const $=u.fields||{},D=l.fields||{},O=(p=$[sm])===null||p===void 0?void 0:p.arrayValue,Y=(h=D[sm])===null||h===void 0?void 0:h.arrayValue,W=dr(((k=O?.values)===null||k===void 0?void 0:k.length)||0,((S=Y?.values)===null||S===void 0?void 0:S.length)||0);return W!==0?W:pw(O,Y)})(a.mapValue,t.mapValue);case 11:return(function(u,l){if(u===S0.mapValue&&l===S0.mapValue)return 0;if(u===S0.mapValue)return 1;if(l===S0.mapValue)return-1;const p=u.fields||{},h=Object.keys(p),k=l.fields||{},S=Object.keys(k);h.sort(),S.sort();for(let $=0;$<h.length&&$<S.length;++$){const D=Ix(h[$],S[$]);if(D!==0)return D;const O=Zl(p[h[$]],k[S[$]]);if(O!==0)return O}return dr(h.length,S.length)})(a.mapValue,t.mapValue);default:throw ar()}}function mw(a,t){if(typeof a=="string"&&typeof t=="string"&&a.length===t.length)return dr(a,t);const s=Xo(a),n=Xo(t),i=dr(s.seconds,n.seconds);return i!==0?i:dr(s.nanos,n.nanos)}function pw(a,t){const s=a.values||[],n=t.values||[];for(let i=0;i<s.length&&i<n.length;++i){const u=Zl(s[i],n[i]);if(u)return u}return dr(s.length,n.length)}function ec(a){return Dx(a)}function Dx(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(s){const n=Xo(s);return`time(${n.seconds},${n.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(s){return Jo(s).toBase64()})(a.bytesValue):"referenceValue"in a?(function(s){return er.fromName(s).toString()})(a.referenceValue):"geoPointValue"in a?(function(s){return`geo(${s.latitude},${s.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(s){let n="[",i=!0;for(const u of s.values||[])i?i=!1:n+=",",n+=Dx(u);return n+"]"})(a.arrayValue):"mapValue"in a?(function(s){const n=Object.keys(s.fields||{}).sort();let i="{",u=!0;for(const l of n)u?u=!1:i+=",",i+=`${l}:${Dx(s.fields[l])}`;return i+"}"})(a.mapValue):ar()}function B0(a){switch(Zo(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Fm(a);return t?16+B0(t):16;case 5:return 2*a.stringValue.length;case 6:return Jo(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,u)=>i+B0(u)),0)})(a.arrayValue);case 10:case 11:return(function(n){let i=0;return ni(n.fields,((u,l)=>{i+=u.length+B0(l)})),i})(a.mapValue);default:throw ar()}}function hw(a,t){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${t.path.canonicalString()}`}}function _x(a){return!!a&&"integerValue"in a}function _g(a){return!!a&&"arrayValue"in a}function xw(a){return!!a&&"nullValue"in a}function gw(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function L0(a){return!!a&&"mapValue"in a}function AI(a){var t,s;return((s=(((t=a?.mapValue)===null||t===void 0?void 0:t.fields)||{})[m2])===null||s===void 0?void 0:s.stringValue)===p2}function dd(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const t={mapValue:{fields:{}}};return ni(a.mapValue.fields,((s,n)=>t.mapValue.fields[s]=dd(n))),t}if(a.arrayValue){const t={arrayValue:{values:[]}};for(let s=0;s<(a.arrayValue.values||[]).length;++s)t.arrayValue.values[s]=dd(a.arrayValue.values[s]);return t}return Object.assign({},a)}function RI(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===_I}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(t){this.value=t}static empty(){return new Qa({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let s=this.value;for(let n=0;n<t.length-1;++n)if(s=(s.mapValue.fields||{})[t.get(n)],!L0(s))return null;return s=(s.mapValue.fields||{})[t.lastSegment()],s||null}}set(t,s){this.getFieldsMap(t.popLast())[t.lastSegment()]=dd(s)}setAll(t){let s=Ia.emptyPath(),n={},i=[];t.forEach(((l,p)=>{if(!s.isImmediateParentOf(p)){const h=this.getFieldsMap(s);this.applyChanges(h,n,i),n={},i=[],s=p.popLast()}l?n[p.lastSegment()]=dd(l):i.push(p.lastSegment())}));const u=this.getFieldsMap(s);this.applyChanges(u,n,i)}delete(t){const s=this.field(t.popLast());L0(s)&&s.mapValue.fields&&delete s.mapValue.fields[t.lastSegment()]}isEqual(t){return Tn(this.value,t.value)}getFieldsMap(t){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=s.mapValue.fields[t.get(n)];L0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},s.mapValue.fields[t.get(n)]=i),s=i}return s.mapValue.fields}applyChanges(t,s,n){ni(s,((i,u)=>t[i]=u));for(const i of n)delete t[i]}clone(){return new Qa(dd(this.value))}}function h2(a){const t=[];return ni(a.fields,((s,n)=>{const i=new Ia([s]);if(L0(n)){const u=h2(n.mapValue).fields;if(u.length===0)t.push(i);else for(const l of u)t.push(i.child(l))}else t.push(i)})),new js(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(t,s,n,i,u,l,p){this.key=t,this.documentType=s,this.version=n,this.readTime=i,this.createTime=u,this.data=l,this.documentState=p}static newInvalidDocument(t){return new ja(t,0,sr.min(),sr.min(),sr.min(),Qa.empty(),0)}static newFoundDocument(t,s,n,i){return new ja(t,1,s,sr.min(),n,i,0)}static newNoDocument(t,s){return new ja(t,2,s,sr.min(),sr.min(),Qa.empty(),0)}static newUnknownDocument(t,s){return new ja(t,3,s,sr.min(),sr.min(),Qa.empty(),2)}convertToFoundDocument(t,s){return!this.createTime.isEqual(sr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Qa.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Qa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ja&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ja(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(t,s){this.position=t,this.inclusive=s}}function bw(a,t,s){let n=0;for(let i=0;i<a.position.length;i++){const u=t[i],l=a.position[i];if(u.field.isKeyField()?n=er.comparator(er.fromName(l.referenceValue),s.key):n=Zl(l,s.data.field(u.field)),u.dir==="desc"&&(n*=-1),n!==0)break}return n}function fw(a,t){if(a===null)return t===null;if(t===null||a.inclusive!==t.inclusive||a.position.length!==t.position.length)return!1;for(let s=0;s<a.position.length;s++)if(!Tn(a.position[s],t.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(t,s="asc"){this.field=t,this.dir=s}}function MI(a,t){return a.dir===t.dir&&a.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{}class ha extends x2{constructor(t,s,n){super(),this.field=t,this.op=s,this.value=n}static create(t,s,n){return t.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(t,s,n):new BI(t,s,n):s==="array-contains"?new VI(t,n):s==="in"?new FI(t,n):s==="not-in"?new UI(t,n):s==="array-contains-any"?new qI(t,n):new ha(t,s,n)}static createKeyFieldInFilter(t,s,n){return s==="in"?new LI(t,n):new OI(t,n)}matches(t){const s=t.data.field(this.field);return this.op==="!="?s!==null&&this.matchesComparison(Zl(s,this.value)):s!==null&&Zo(this.value)===Zo(s)&&this.matchesComparison(Zl(s,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ar()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nn extends x2{constructor(t,s){super(),this.filters=t,this.op=s,this.ce=null}static create(t,s){return new nn(t,s)}matches(t){return g2(this)?this.filters.find((s=>!s.matches(t)))===void 0:this.filters.find((s=>s.matches(t)))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce(((t,s)=>t.concat(s.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function g2(a){return a.op==="and"}function b2(a){return zI(a)&&g2(a)}function zI(a){for(const t of a.filters)if(t instanceof nn)return!1;return!0}function Ax(a){if(a instanceof ha)return a.field.canonicalString()+a.op.toString()+ec(a.value);if(b2(a))return a.filters.map((t=>Ax(t))).join(",");{const t=a.filters.map((s=>Ax(s))).join(",");return`${a.op}(${t})`}}function f2(a,t){return a instanceof ha?(function(n,i){return i instanceof ha&&n.op===i.op&&n.field.isEqual(i.field)&&Tn(n.value,i.value)})(a,t):a instanceof nn?(function(n,i){return i instanceof nn&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((u,l,p)=>u&&f2(l,i.filters[p])),!0):!1})(a,t):void ar()}function y2(a){return a instanceof ha?(function(s){return`${s.field.canonicalString()} ${s.op} ${ec(s.value)}`})(a):a instanceof nn?(function(s){return s.op.toString()+" {"+s.getFilters().map(y2).join(" ,")+"}"})(a):"Filter"}class BI extends ha{constructor(t,s,n){super(t,s,n),this.key=er.fromName(n.referenceValue)}matches(t){const s=er.comparator(t.key,this.key);return this.matchesComparison(s)}}class LI extends ha{constructor(t,s){super(t,"in",s),this.keys=v2("in",s)}matches(t){return this.keys.some((s=>s.isEqual(t.key)))}}class OI extends ha{constructor(t,s){super(t,"not-in",s),this.keys=v2("not-in",s)}matches(t){return!this.keys.some((s=>s.isEqual(t.key)))}}function v2(a,t){var s;return(((s=t.arrayValue)===null||s===void 0?void 0:s.values)||[]).map((n=>er.fromName(n.referenceValue)))}class VI extends ha{constructor(t,s){super(t,"array-contains",s)}matches(t){const s=t.data.field(this.field);return _g(s)&&Sd(s.arrayValue,this.value)}}class FI extends ha{constructor(t,s){super(t,"in",s)}matches(t){const s=t.data.field(this.field);return s!==null&&Sd(this.value.arrayValue,s)}}class UI extends ha{constructor(t,s){super(t,"not-in",s)}matches(t){if(Sd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=t.data.field(this.field);return s!==null&&!Sd(this.value.arrayValue,s)}}class qI extends ha{constructor(t,s){super(t,"array-contains-any",s)}matches(t){const s=t.data.field(this.field);return!(!_g(s)||!s.arrayValue.values)&&s.arrayValue.values.some((n=>Sd(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(t,s=null,n=[],i=[],u=null,l=null,p=null){this.path=t,this.collectionGroup=s,this.orderBy=n,this.filters=i,this.limit=u,this.startAt=l,this.endAt=p,this.le=null}}function yw(a,t=null,s=[],n=[],i=null,u=null,l=null){return new HI(a,t,s,n,i,u,l)}function Ag(a){const t=lr(a);if(t.le===null){let s=t.path.canonicalString();t.collectionGroup!==null&&(s+="|cg:"+t.collectionGroup),s+="|f:",s+=t.filters.map((n=>Ax(n))).join(","),s+="|ob:",s+=t.orderBy.map((n=>(function(u){return u.field.canonicalString()+u.dir})(n))).join(","),Wd(t.limit)||(s+="|l:",s+=t.limit),t.startAt&&(s+="|lb:",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((n=>ec(n))).join(",")),t.endAt&&(s+="|ub:",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((n=>ec(n))).join(",")),t.le=s}return t.le}function Rg(a,t){if(a.limit!==t.limit||a.orderBy.length!==t.orderBy.length)return!1;for(let s=0;s<a.orderBy.length;s++)if(!MI(a.orderBy[s],t.orderBy[s]))return!1;if(a.filters.length!==t.filters.length)return!1;for(let s=0;s<a.filters.length;s++)if(!f2(a.filters[s],t.filters[s]))return!1;return a.collectionGroup===t.collectionGroup&&!!a.path.isEqual(t.path)&&!!fw(a.startAt,t.startAt)&&fw(a.endAt,t.endAt)}function Rx(a){return er.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(t,s=null,n=[],i=[],u=null,l="F",p=null,h=null){this.path=t,this.collectionGroup=s,this.explicitOrderBy=n,this.filters=i,this.limit=u,this.limitType=l,this.startAt=p,this.endAt=h,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function WI(a,t,s,n,i,u,l,p){return new mc(a,t,s,n,i,u,l,p)}function Um(a){return new mc(a)}function vw(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function w2(a){return a.collectionGroup!==null}function ud(a){const t=lr(a);if(t.he===null){t.he=[];const s=new Set;for(const u of t.explicitOrderBy)t.he.push(u),s.add(u.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(l){let p=new fa(Ia.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((k=>{k.isInequality()&&(p=p.add(k.field))}))})),p})(t).forEach((u=>{s.has(u.canonicalString())||u.isKeyField()||t.he.push(new $d(u,n))})),s.has(Ia.keyField().canonicalString())||t.he.push(new $d(Ia.keyField(),n))}return t.he}function wn(a){const t=lr(a);return t.Pe||(t.Pe=GI(t,ud(a))),t.Pe}function GI(a,t){if(a.limitType==="F")return yw(a.path,a.collectionGroup,t,a.filters,a.limit,a.startAt,a.endAt);{t=t.map((i=>{const u=i.dir==="desc"?"asc":"desc";return new $d(i.field,u)}));const s=a.endAt?new nm(a.endAt.position,a.endAt.inclusive):null,n=a.startAt?new nm(a.startAt.position,a.startAt.inclusive):null;return yw(a.path,a.collectionGroup,t,a.filters,a.limit,s,n)}}function Mx(a,t){const s=a.filters.concat([t]);return new mc(a.path,a.collectionGroup,a.explicitOrderBy.slice(),s,a.limit,a.limitType,a.startAt,a.endAt)}function om(a,t,s){return new mc(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),t,s,a.startAt,a.endAt)}function qm(a,t){return Rg(wn(a),wn(t))&&a.limitType===t.limitType}function k2(a){return`${Ag(wn(a))}|lt:${a.limitType}`}function zl(a){return`Query(target=${(function(s){let n=s.path.canonicalString();return s.collectionGroup!==null&&(n+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(n+=`, filters: [${s.filters.map((i=>y2(i))).join(", ")}]`),Wd(s.limit)||(n+=", limit: "+s.limit),s.orderBy.length>0&&(n+=`, orderBy: [${s.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),s.startAt&&(n+=", startAt: ",n+=s.startAt.inclusive?"b:":"a:",n+=s.startAt.position.map((i=>ec(i))).join(",")),s.endAt&&(n+=", endAt: ",n+=s.endAt.inclusive?"a:":"b:",n+=s.endAt.position.map((i=>ec(i))).join(",")),`Target(${n})`})(wn(a))}; limitType=${a.limitType})`}function Hm(a,t){return t.isFoundDocument()&&(function(n,i){const u=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(u):er.isDocumentKey(n.path)?n.path.isEqual(u):n.path.isImmediateParentOf(u)})(a,t)&&(function(n,i){for(const u of ud(n))if(!u.field.isKeyField()&&i.data.field(u.field)===null)return!1;return!0})(a,t)&&(function(n,i){for(const u of n.filters)if(!u.matches(i))return!1;return!0})(a,t)&&(function(n,i){return!(n.startAt&&!(function(l,p,h){const k=bw(l,p,h);return l.inclusive?k<=0:k<0})(n.startAt,ud(n),i)||n.endAt&&!(function(l,p,h){const k=bw(l,p,h);return l.inclusive?k>=0:k>0})(n.endAt,ud(n),i))})(a,t)}function KI(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function N2(a){return(t,s)=>{let n=!1;for(const i of ud(a)){const u=QI(i,t,s);if(u!==0)return u;n=n||i.field.isKeyField()}return 0}}function QI(a,t,s){const n=a.field.isKeyField()?er.comparator(t.key,s.key):(function(u,l,p){const h=l.data.field(u),k=p.data.field(u);return h!==null&&k!==null?Zl(h,k):ar()})(a.field,t,s);switch(a.dir){case"asc":return n;case"desc":return-1*n;default:return ar()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t,s){this.mapKeyFn=t,this.equalsFn=s,this.inner={},this.innerSize=0}get(t){const s=this.mapKeyFn(t),n=this.inner[s];if(n!==void 0){for(const[i,u]of n)if(this.equalsFn(i,t))return u}}has(t){return this.get(t)!==void 0}set(t,s){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return this.inner[n]=[[t,s]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],t))return void(i[u]=[t,s]);i.push([t,s]),this.innerSize++}delete(t){const s=this.mapKeyFn(t),n=this.inner[s];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return n.length===1?delete this.inner[s]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){ni(this.inner,((s,n)=>{for(const[i,u]of n)t(i,u)}))}isEmpty(){return o2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=new sa(er.comparator);function so(){return YI}const j2=new sa(er.comparator);function sd(...a){let t=j2;for(const s of a)t=t.insert(s.key,s);return t}function C2(a){let t=j2;return a.forEach(((s,n)=>t=t.insert(s,n.overlayedDocument))),t}function Ri(){return md()}function S2(){return md()}function md(){return new Zi((a=>a.toString()),((a,t)=>a.isEqual(t)))}const XI=new sa(er.comparator),JI=new fa(er.comparator);function gr(...a){let t=JI;for(const s of a)t=t.add(s);return t}const ZI=new fa(dr);function e9(){return ZI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(a,t){if(a.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rm(t)?"-0":t}}function $2(a){return{integerValue:""+a}}function T2(a,t){return TI(t)?$2(t):Mg(a,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(){this._=void 0}}function t9(a,t,s){return a instanceof Td?(function(i,u){const l={fields:{[c2]:{stringValue:l2},[u2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return u&&Dg(u)&&(u=Fm(u)),u&&(l.fields[d2]=u),{mapValue:l}})(s,t):a instanceof Pd?E2(a,t):a instanceof Ed?I2(a,t):(function(i,u){const l=P2(i,u),p=ww(l)+ww(i.Ie);return _x(l)&&_x(i.Ie)?$2(p):Mg(i.serializer,p)})(a,t)}function r9(a,t,s){return a instanceof Pd?E2(a,t):a instanceof Ed?I2(a,t):s}function P2(a,t){return a instanceof Id?(function(n){return _x(n)||(function(u){return!!u&&"doubleValue"in u})(n)})(t)?t:{integerValue:0}:null}class Td extends Wm{}class Pd extends Wm{constructor(t){super(),this.elements=t}}function E2(a,t){const s=D2(t);for(const n of a.elements)s.some((i=>Tn(i,n)))||s.push(n);return{arrayValue:{values:s}}}class Ed extends Wm{constructor(t){super(),this.elements=t}}function I2(a,t){let s=D2(t);for(const n of a.elements)s=s.filter((i=>!Tn(i,n)));return{arrayValue:{values:s}}}class Id extends Wm{constructor(t,s){super(),this.serializer=t,this.Ie=s}}function ww(a){return ca(a.integerValue||a.doubleValue)}function D2(a){return _g(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(t,s){this.field=t,this.transform=s}}function a9(a,t){return a.field.isEqual(t.field)&&(function(n,i){return n instanceof Pd&&i instanceof Pd||n instanceof Ed&&i instanceof Ed?Jl(n.elements,i.elements,Tn):n instanceof Id&&i instanceof Id?Tn(n.Ie,i.Ie):n instanceof Td&&i instanceof Td})(a.transform,t.transform)}class s9{constructor(t,s){this.version=t,this.transformResults=s}}class Da{constructor(t,s){this.updateTime=t,this.exists=s}static none(){return new Da}static exists(t){return new Da(void 0,t)}static updateTime(t){return new Da(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function O0(a,t){return a.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(a.updateTime):a.exists===void 0||a.exists===t.isFoundDocument()}class Gm{}function A2(a,t){if(!a.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return a.isNoDocument()?new Km(a.key,Da.none()):new Gd(a.key,a.data,Da.none());{const s=a.data,n=Qa.empty();let i=new fa(Ia.comparator);for(let u of t.fields)if(!i.has(u)){let l=s.field(u);l===null&&u.length>1&&(u=u.popLast(),l=s.field(u)),l===null?n.delete(u):n.set(u,l),i=i.add(u)}return new oi(a.key,n,new js(i.toArray()),Da.none())}}function n9(a,t,s){a instanceof Gd?(function(i,u,l){const p=i.value.clone(),h=Nw(i.fieldTransforms,u,l.transformResults);p.setAll(h),u.convertToFoundDocument(l.version,p).setHasCommittedMutations()})(a,t,s):a instanceof oi?(function(i,u,l){if(!O0(i.precondition,u))return void u.convertToUnknownDocument(l.version);const p=Nw(i.fieldTransforms,u,l.transformResults),h=u.data;h.setAll(R2(i)),h.setAll(p),u.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(a,t,s):(function(i,u,l){u.convertToNoDocument(l.version).setHasCommittedMutations()})(0,t,s)}function pd(a,t,s,n){return a instanceof Gd?(function(u,l,p,h){if(!O0(u.precondition,l))return p;const k=u.value.clone(),S=jw(u.fieldTransforms,h,l);return k.setAll(S),l.convertToFoundDocument(l.version,k).setHasLocalMutations(),null})(a,t,s,n):a instanceof oi?(function(u,l,p,h){if(!O0(u.precondition,l))return p;const k=jw(u.fieldTransforms,h,l),S=l.data;return S.setAll(R2(u)),S.setAll(k),l.convertToFoundDocument(l.version,S).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(($=>$.field)))})(a,t,s,n):(function(u,l,p){return O0(u.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):p})(a,t,s)}function o9(a,t){let s=null;for(const n of a.fieldTransforms){const i=t.data.field(n.field),u=P2(n.transform,i||null);u!=null&&(s===null&&(s=Qa.empty()),s.set(n.field,u))}return s||null}function kw(a,t){return a.type===t.type&&!!a.key.isEqual(t.key)&&!!a.precondition.isEqual(t.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Jl(n,i,((u,l)=>a9(u,l)))})(a.fieldTransforms,t.fieldTransforms)&&(a.type===0?a.value.isEqual(t.value):a.type!==1||a.data.isEqual(t.data)&&a.fieldMask.isEqual(t.fieldMask))}class Gd extends Gm{constructor(t,s,n,i=[]){super(),this.key=t,this.value=s,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class oi extends Gm{constructor(t,s,n,i,u=[]){super(),this.key=t,this.data=s,this.fieldMask=n,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function R2(a){const t=new Map;return a.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const n=a.data.field(s);t.set(s,n)}})),t}function Nw(a,t,s){const n=new Map;Sr(a.length===s.length);for(let i=0;i<s.length;i++){const u=a[i],l=u.transform,p=t.data.field(u.field);n.set(u.field,r9(l,p,s[i]))}return n}function jw(a,t,s){const n=new Map;for(const i of a){const u=i.transform,l=s.data.field(i.field);n.set(i.field,t9(u,l,t))}return n}class Km extends Gm{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class M2 extends Gm{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(t,s,n,i){this.batchId=t,this.localWriteTime=s,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,s){const n=s.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(t.key)&&n9(u,t,n[i])}}applyToLocalView(t,s){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(s=pd(n,t,s,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(s=pd(n,t,s,this.localWriteTime));return s}applyToLocalDocumentSet(t,s){const n=S2();return this.mutations.forEach((i=>{const u=t.get(i.key),l=u.overlayedDocument;let p=this.applyToLocalView(l,u.mutatedFields);p=s.has(i.key)?null:p;const h=A2(l,p);h!==null&&n.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(sr.min())})),n}keys(){return this.mutations.reduce(((t,s)=>t.add(s.key)),gr())}isEqual(t){return this.batchId===t.batchId&&Jl(this.mutations,t.mutations,((s,n)=>kw(s,n)))&&Jl(this.baseMutations,t.baseMutations,((s,n)=>kw(s,n)))}}class zg{constructor(t,s,n,i){this.batch=t,this.commitVersion=s,this.mutationResults=n,this.docVersions=i}static from(t,s,n){Sr(t.mutations.length===n.length);let i=(function(){return XI})();const u=t.mutations;for(let l=0;l<u.length;l++)i=i.insert(u[l].key,n[l].version);return new zg(t,s,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(t,s){this.largestBatchId=t,this.mutation=s}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(t,s){this.count=t,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pa,Cr;function z2(a){switch(a){case Ze.OK:return ar();case Ze.CANCELLED:case Ze.UNKNOWN:case Ze.DEADLINE_EXCEEDED:case Ze.RESOURCE_EXHAUSTED:case Ze.INTERNAL:case Ze.UNAVAILABLE:case Ze.UNAUTHENTICATED:return!1;case Ze.INVALID_ARGUMENT:case Ze.NOT_FOUND:case Ze.ALREADY_EXISTS:case Ze.PERMISSION_DENIED:case Ze.FAILED_PRECONDITION:case Ze.ABORTED:case Ze.OUT_OF_RANGE:case Ze.UNIMPLEMENTED:case Ze.DATA_LOSS:return!0;default:return ar()}}function B2(a){if(a===void 0)return ao("GRPC error has no .code"),Ze.UNKNOWN;switch(a){case pa.OK:return Ze.OK;case pa.CANCELLED:return Ze.CANCELLED;case pa.UNKNOWN:return Ze.UNKNOWN;case pa.DEADLINE_EXCEEDED:return Ze.DEADLINE_EXCEEDED;case pa.RESOURCE_EXHAUSTED:return Ze.RESOURCE_EXHAUSTED;case pa.INTERNAL:return Ze.INTERNAL;case pa.UNAVAILABLE:return Ze.UNAVAILABLE;case pa.UNAUTHENTICATED:return Ze.UNAUTHENTICATED;case pa.INVALID_ARGUMENT:return Ze.INVALID_ARGUMENT;case pa.NOT_FOUND:return Ze.NOT_FOUND;case pa.ALREADY_EXISTS:return Ze.ALREADY_EXISTS;case pa.PERMISSION_DENIED:return Ze.PERMISSION_DENIED;case pa.FAILED_PRECONDITION:return Ze.FAILED_PRECONDITION;case pa.ABORTED:return Ze.ABORTED;case pa.OUT_OF_RANGE:return Ze.OUT_OF_RANGE;case pa.UNIMPLEMENTED:return Ze.UNIMPLEMENTED;case pa.DATA_LOSS:return Ze.DATA_LOSS;default:return ar()}}(Cr=pa||(pa={}))[Cr.OK=0]="OK",Cr[Cr.CANCELLED=1]="CANCELLED",Cr[Cr.UNKNOWN=2]="UNKNOWN",Cr[Cr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cr[Cr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cr[Cr.NOT_FOUND=5]="NOT_FOUND",Cr[Cr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cr[Cr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cr[Cr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cr[Cr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cr[Cr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cr[Cr.ABORTED=10]="ABORTED",Cr[Cr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cr[Cr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cr[Cr.INTERNAL=13]="INTERNAL",Cr[Cr.UNAVAILABLE=14]="UNAVAILABLE",Cr[Cr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9=new Ho([4294967295,4294967295],0);function Cw(a){const t=a2().encode(a),s=new Yj;return s.update(t),new Uint8Array(s.digest())}function Sw(a){const t=new DataView(a.buffer),s=t.getUint32(0,!0),n=t.getUint32(4,!0),i=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Ho([s,n],0),new Ho([i,u],0)]}class Bg{constructor(t,s,n){if(this.bitmap=t,this.padding=s,this.hashCount=n,s<0||s>=8)throw new nd(`Invalid padding: ${s}`);if(n<0)throw new nd(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new nd(`Invalid hash count: ${n}`);if(t.length===0&&s!==0)throw new nd(`Invalid padding when bitmap length is 0: ${s}`);this.Ee=8*t.length-s,this.de=Ho.fromNumber(this.Ee)}Ae(t,s,n){let i=t.add(s.multiply(Ho.fromNumber(n)));return i.compare(d9)===1&&(i=new Ho([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const s=Cw(t),[n,i]=Sw(s);for(let u=0;u<this.hashCount;u++){const l=this.Ae(n,i,u);if(!this.Re(l))return!1}return!0}static create(t,s,n){const i=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),l=new Bg(u,i,s);return n.forEach((p=>l.insert(p))),l}insert(t){if(this.Ee===0)return;const s=Cw(t),[n,i]=Sw(s);for(let u=0;u<this.hashCount;u++){const l=this.Ae(n,i,u);this.Ve(l)}}Ve(t){const s=Math.floor(t/8),n=t%8;this.bitmap[s]|=1<<n}}class nd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(t,s,n,i,u){this.snapshotVersion=t,this.targetChanges=s,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,s,n){const i=new Map;return i.set(t,Kd.createSynthesizedTargetChangeForCurrentChange(t,s,n)),new Qm(sr.min(),i,new sa(dr),so(),gr())}}class Kd{constructor(t,s,n,i,u){this.resumeToken=t,this.current=s,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,s,n){return new Kd(n,s,gr(),gr(),gr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(t,s,n,i){this.me=t,this.removedTargetIds=s,this.key=n,this.fe=i}}class L2{constructor(t,s){this.targetId=t,this.ge=s}}class O2{constructor(t,s,n=Aa.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=s,this.resumeToken=n,this.cause=i}}class $w{constructor(){this.pe=0,this.ye=Tw(),this.we=Aa.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=gr(),s=gr(),n=gr();return this.ye.forEach(((i,u)=>{switch(u){case 0:t=t.add(i);break;case 2:s=s.add(i);break;case 1:n=n.add(i);break;default:ar()}})),new Kd(this.we,this.Se,t,s,n)}Me(){this.be=!1,this.ye=Tw()}xe(t,s){this.be=!0,this.ye=this.ye.insert(t,s)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Sr(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class u9{constructor(t){this.ke=t,this.qe=new Map,this.Qe=so(),this.$e=$0(),this.Ue=$0(),this.Ke=new sa(dr)}We(t){for(const s of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(s,t.fe):this.ze(s,t.key,t.fe);for(const s of t.removedTargetIds)this.ze(s,t.key,t.fe)}je(t){this.forEachTarget(t,(s=>{const n=this.He(s);switch(t.state){case 0:this.Je(s)&&n.Ce(t.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(t.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(s);break;case 3:this.Je(s)&&(n.Le(),n.Ce(t.resumeToken));break;case 4:this.Je(s)&&(this.Ye(s),n.Ce(t.resumeToken));break;default:ar()}}))}forEachTarget(t,s){t.targetIds.length>0?t.targetIds.forEach(s):this.qe.forEach(((n,i)=>{this.Je(i)&&s(i)}))}Ze(t){const s=t.targetId,n=t.ge.count,i=this.Xe(s);if(i){const u=i.target;if(Rx(u))if(n===0){const l=new er(u.path);this.ze(s,l,ja.newNoDocument(l,sr.min()))}else Sr(n===1);else{const l=this.et(s);if(l!==n){const p=this.tt(t),h=p?this.nt(p,t,l):1;if(h!==0){this.Ye(s);const k=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(s,k)}}}}}tt(t){const s=t.ge.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:u=0}=s;let l,p;try{l=Jo(n).toUint8Array()}catch(h){if(h instanceof i2)return Xl("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{p=new Bg(l,i,u)}catch(h){return Xl(h instanceof nd?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return p.Ee===0?null:p}nt(t,s,n){return s.ge.count===n-this.st(t,s.targetId)?0:2}st(t,s){const n=this.ke.getRemoteKeysForTarget(s);let i=0;return n.forEach((u=>{const l=this.ke.it(),p=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.mightContain(p)||(this.ze(s,u,null),i++)})),i}ot(t){const s=new Map;this.qe.forEach(((u,l)=>{const p=this.Xe(l);if(p){if(u.current&&Rx(p.target)){const h=new er(p.target.path);this._t(h).has(l)||this.ut(l,h)||this.ze(l,h,ja.newNoDocument(h,t))}u.ve&&(s.set(l,u.Fe()),u.Me())}}));let n=gr();this.Ue.forEach(((u,l)=>{let p=!0;l.forEachWhile((h=>{const k=this.Xe(h);return!k||k.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(n=n.add(u))})),this.Qe.forEach(((u,l)=>l.setReadTime(t)));const i=new Qm(t,s,this.Ke,this.Qe,n);return this.Qe=so(),this.$e=$0(),this.Ue=$0(),this.Ke=new sa(dr),i}Ge(t,s){if(!this.Je(t))return;const n=this.ut(t,s.key)?2:0;this.He(t).xe(s.key,n),this.Qe=this.Qe.insert(s.key,s),this.$e=this.$e.insert(s.key,this._t(s.key).add(t)),this.Ue=this.Ue.insert(s.key,this.ct(s.key).add(t))}ze(t,s,n){if(!this.Je(t))return;const i=this.He(t);this.ut(t,s)?i.xe(s,1):i.Oe(s),this.Ue=this.Ue.insert(s,this.ct(s).delete(t)),this.Ue=this.Ue.insert(s,this.ct(s).add(t)),n&&(this.Qe=this.Qe.insert(s,n))}removeTarget(t){this.qe.delete(t)}et(t){const s=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+s.addedDocuments.size-s.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let s=this.qe.get(t);return s||(s=new $w,this.qe.set(t,s)),s}ct(t){let s=this.Ue.get(t);return s||(s=new fa(dr),this.Ue=this.Ue.insert(t,s)),s}_t(t){let s=this.$e.get(t);return s||(s=new fa(dr),this.$e=this.$e.insert(t,s)),s}Je(t){const s=this.Xe(t)!==null;return s||Rt("WatchChangeAggregator","Detected inactive target",t),s}Xe(t){const s=this.qe.get(t);return s&&s.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new $w),this.ke.getRemoteKeysForTarget(t).forEach((s=>{this.ze(t,s,null)}))}ut(t,s){return this.ke.getRemoteKeysForTarget(t).has(s)}}function $0(){return new sa(er.comparator)}function Tw(){return new sa(er.comparator)}const m9={asc:"ASCENDING",desc:"DESCENDING"},p9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h9={and:"AND",or:"OR"};class x9{constructor(t,s){this.databaseId=t,this.useProto3Json=s}}function zx(a,t){return a.useProto3Json||Wd(t)?t:{value:t}}function im(a,t){return a.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function V2(a,t){return a.useProto3Json?t.toBase64():t.toUint8Array()}function g9(a,t){return im(a,t.toTimestamp())}function $s(a){return Sr(!!a),sr.fromTimestamp((function(s){const n=Xo(s);return new Wr(n.seconds,n.nanos)})(a))}function Lg(a,t){return Bx(a,t).canonicalString()}function Bx(a,t){const s=(function(i){return new Hr(["projects",i.projectId,"databases",i.database])})(a).child("documents");return t===void 0?s:s.child(t)}function F2(a){const t=Hr.fromString(a);return Sr(K2(t)),t}function lm(a,t){return Lg(a.databaseId,t.path)}function hd(a,t){const s=F2(t);if(s.get(1)!==a.databaseId.projectId)throw new Dt(Ze.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+a.databaseId.projectId);if(s.get(3)!==a.databaseId.database)throw new Dt(Ze.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+a.databaseId.database);return new er(q2(s))}function U2(a,t){return Lg(a.databaseId,t)}function b9(a){const t=F2(a);return t.length===4?Hr.emptyPath():q2(t)}function Lx(a){return new Hr(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function q2(a){return Sr(a.length>4&&a.get(4)==="documents"),a.popFirst(5)}function Pw(a,t,s){return{name:lm(a,t),fields:s.value.mapValue.fields}}function f9(a,t){return"found"in t?(function(n,i){Sr(!!i.found),i.found.name,i.found.updateTime;const u=hd(n,i.found.name),l=$s(i.found.updateTime),p=i.found.createTime?$s(i.found.createTime):sr.min(),h=new Qa({mapValue:{fields:i.found.fields}});return ja.newFoundDocument(u,l,p,h)})(a,t):"missing"in t?(function(n,i){Sr(!!i.missing),Sr(!!i.readTime);const u=hd(n,i.missing),l=$s(i.readTime);return ja.newNoDocument(u,l)})(a,t):ar()}function y9(a,t){let s;if("targetChange"in t){t.targetChange;const n=(function(k){return k==="NO_CHANGE"?0:k==="ADD"?1:k==="REMOVE"?2:k==="CURRENT"?3:k==="RESET"?4:ar()})(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],u=(function(k,S){return k.useProto3Json?(Sr(S===void 0||typeof S=="string"),Aa.fromBase64String(S||"")):(Sr(S===void 0||S instanceof Buffer||S instanceof Uint8Array),Aa.fromUint8Array(S||new Uint8Array))})(a,t.targetChange.resumeToken),l=t.targetChange.cause,p=l&&(function(k){const S=k.code===void 0?Ze.UNKNOWN:B2(k.code);return new Dt(S,k.message||"")})(l);s=new O2(n,i,u,p||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const i=hd(a,n.document.name),u=$s(n.document.updateTime),l=n.document.createTime?$s(n.document.createTime):sr.min(),p=new Qa({mapValue:{fields:n.document.fields}}),h=ja.newFoundDocument(i,u,l,p),k=n.targetIds||[],S=n.removedTargetIds||[];s=new V0(k,S,h.key,h)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const i=hd(a,n.document),u=n.readTime?$s(n.readTime):sr.min(),l=ja.newNoDocument(i,u),p=n.removedTargetIds||[];s=new V0([],p,l.key,l)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const i=hd(a,n.document),u=n.removedTargetIds||[];s=new V0([],u,i,null)}else{if(!("filter"in t))return ar();{t.filter;const n=t.filter;n.targetId;const{count:i=0,unchangedNames:u}=n,l=new c9(i,u),p=n.targetId;s=new L2(p,l)}}return s}function H2(a,t){let s;if(t instanceof Gd)s={update:Pw(a,t.key,t.value)};else if(t instanceof Km)s={delete:lm(a,t.key)};else if(t instanceof oi)s={update:Pw(a,t.key,t.data),updateMask:T9(t.fieldMask)};else{if(!(t instanceof M2))return ar();s={verify:lm(a,t.key)}}return t.fieldTransforms.length>0&&(s.updateTransforms=t.fieldTransforms.map((n=>(function(u,l){const p=l.transform;if(p instanceof Td)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Pd)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Ed)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Id)return{fieldPath:l.field.canonicalString(),increment:p.Ie};throw ar()})(0,n)))),t.precondition.isNone||(s.currentDocument=(function(i,u){return u.updateTime!==void 0?{updateTime:g9(i,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ar()})(a,t.precondition)),s}function v9(a,t){return a&&a.length>0?(Sr(t!==void 0),a.map((s=>(function(i,u){let l=i.updateTime?$s(i.updateTime):$s(u);return l.isEqual(sr.min())&&(l=$s(u)),new s9(l,i.transformResults||[])})(s,t)))):[]}function w9(a,t){return{documents:[U2(a,t.path)]}}function k9(a,t){const s={structuredQuery:{}},n=t.path;let i;t.collectionGroup!==null?(i=n,s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=n.popLast(),s.structuredQuery.from=[{collectionId:n.lastSegment()}]),s.parent=U2(a,i);const u=(function(k){if(k.length!==0)return G2(nn.create(k,"and"))})(t.filters);u&&(s.structuredQuery.where=u);const l=(function(k){if(k.length!==0)return k.map((S=>(function(D){return{field:Bl(D.field),direction:C9(D.dir)}})(S)))})(t.orderBy);l&&(s.structuredQuery.orderBy=l);const p=zx(a,t.limit);return p!==null&&(s.structuredQuery.limit=p),t.startAt&&(s.structuredQuery.startAt=(function(k){return{before:k.inclusive,values:k.position}})(t.startAt)),t.endAt&&(s.structuredQuery.endAt=(function(k){return{before:!k.inclusive,values:k.position}})(t.endAt)),{ht:s,parent:i}}function N9(a){let t=b9(a.parent);const s=a.structuredQuery,n=s.from?s.from.length:0;let i=null;if(n>0){Sr(n===1);const S=s.from[0];S.allDescendants?i=S.collectionId:t=t.child(S.collectionId)}let u=[];s.where&&(u=(function($){const D=W2($);return D instanceof nn&&b2(D)?D.getFilters():[D]})(s.where));let l=[];s.orderBy&&(l=(function($){return $.map((D=>(function(Y){return new $d(Ll(Y.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Y.direction))})(D)))})(s.orderBy));let p=null;s.limit&&(p=(function($){let D;return D=typeof $=="object"?$.value:$,Wd(D)?null:D})(s.limit));let h=null;s.startAt&&(h=(function($){const D=!!$.before,O=$.values||[];return new nm(O,D)})(s.startAt));let k=null;return s.endAt&&(k=(function($){const D=!$.before,O=$.values||[];return new nm(O,D)})(s.endAt)),WI(t,i,l,u,p,"F",h,k)}function j9(a,t){const s=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ar()}})(t.purpose);return s==null?null:{"goog-listen-tags":s}}function W2(a){return a.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const n=Ll(s.unaryFilter.field);return ha.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Ll(s.unaryFilter.field);return ha.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ll(s.unaryFilter.field);return ha.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ll(s.unaryFilter.field);return ha.create(l,"!=",{nullValue:"NULL_VALUE"});default:return ar()}})(a):a.fieldFilter!==void 0?(function(s){return ha.create(Ll(s.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ar()}})(s.fieldFilter.op),s.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(s){return nn.create(s.compositeFilter.filters.map((n=>W2(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ar()}})(s.compositeFilter.op))})(a):ar()}function C9(a){return m9[a]}function S9(a){return p9[a]}function $9(a){return h9[a]}function Bl(a){return{fieldPath:a.canonicalString()}}function Ll(a){return Ia.fromServerFormat(a.fieldPath)}function G2(a){return a instanceof ha?(function(s){if(s.op==="=="){if(gw(s.value))return{unaryFilter:{field:Bl(s.field),op:"IS_NAN"}};if(xw(s.value))return{unaryFilter:{field:Bl(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(gw(s.value))return{unaryFilter:{field:Bl(s.field),op:"IS_NOT_NAN"}};if(xw(s.value))return{unaryFilter:{field:Bl(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bl(s.field),op:S9(s.op),value:s.value}}})(a):a instanceof nn?(function(s){const n=s.getFilters().map((i=>G2(i)));return n.length===1?n[0]:{compositeFilter:{op:$9(s.op),filters:n}}})(a):ar()}function T9(a){const t=[];return a.fields.forEach((s=>t.push(s.canonicalString()))),{fieldPaths:t}}function K2(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(t,s,n,i,u=sr.min(),l=sr.min(),p=Aa.EMPTY_BYTE_STRING,h=null){this.target=t,this.targetId=s,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=p,this.expectedCount=h}withSequenceNumber(t){return new Fo(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,s){return new Fo(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(t){this.Tt=t}}function E9(a){const t=N9({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?om(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(){this.Tn=new D9}addToCollectionParentIndex(t,s){return this.Tn.add(s),at.resolve()}getCollectionParents(t,s){return at.resolve(this.Tn.getEntries(s))}addFieldIndex(t,s){return at.resolve()}deleteFieldIndex(t,s){return at.resolve()}deleteAllFieldIndexes(t){return at.resolve()}createTargetIndexes(t,s){return at.resolve()}getDocumentsMatchingTarget(t,s){return at.resolve(null)}getIndexType(t,s){return at.resolve(0)}getFieldIndexes(t,s){return at.resolve([])}getNextCollectionGroupToUpdate(t){return at.resolve(null)}getMinOffset(t,s){return at.resolve(Yo.min())}getMinOffsetFromCollectionGroup(t,s){return at.resolve(Yo.min())}updateCollectionGroup(t,s,n){return at.resolve()}updateIndexEntries(t,s){return at.resolve()}}class D9{constructor(){this.index={}}add(t){const s=t.lastSegment(),n=t.popLast(),i=this.index[s]||new fa(Hr.comparator),u=!i.has(n);return this.index[s]=i.add(n),u}has(t){const s=t.lastSegment(),n=t.popLast(),i=this.index[s];return i&&i.has(n)}getEntries(t){return(this.index[t]||new fa(Hr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Q2=41943040;class cs{static withCacheSize(t){return new cs(t,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,s,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cs.DEFAULT_COLLECTION_PERCENTILE=10,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cs.DEFAULT=new cs(Q2,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cs.DISABLED=new cs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new tc(0)}static Kn(){return new tc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="LruGarbageCollector",_9=1048576;function Dw([a,t],[s,n]){const i=dr(a,s);return i===0?dr(t,n):i}class A9{constructor(t){this.Hn=t,this.buffer=new fa(Dw),this.Jn=0}Yn(){return++this.Jn}Zn(t){const s=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(s);else{const n=this.buffer.last();Dw(s,n)<0&&(this.buffer=this.buffer.delete(n).add(s))}}get maxValue(){return this.buffer.last()[0]}}class R9{constructor(t,s,n){this.garbageCollector=t,this.asyncQueue=s,this.localStore=n,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Rt(Iw,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){uc(s)?Rt(Iw,"Ignoring IndexedDB error during garbage collection: ",s):await dc(s)}await this.er(3e5)}))}}class M9{constructor(t,s){this.tr=t,this.params=s}calculateTargetCount(t,s){return this.tr.nr(t).next((n=>Math.floor(s/100*n)))}nthSequenceNumber(t,s){if(s===0)return at.resolve(Vm.ae);const n=new A9(s);return this.tr.forEachTarget(t,(i=>n.Zn(i.sequenceNumber))).next((()=>this.tr.rr(t,(i=>n.Zn(i))))).next((()=>n.maxValue))}removeTargets(t,s,n){return this.tr.removeTargets(t,s,n)}removeOrphanedDocuments(t,s){return this.tr.removeOrphanedDocuments(t,s)}collect(t,s){return this.params.cacheSizeCollectionThreshold===-1?(Rt("LruGarbageCollector","Garbage collection skipped; disabled"),at.resolve(Ew)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(Rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ew):this.ir(t,s)))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,s){let n,i,u,l,p,h,k;const S=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(($=>($>this.params.maximumSequenceNumbersToCollect?(Rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${$}`),i=this.params.maximumSequenceNumbersToCollect):i=$,l=Date.now(),this.nthSequenceNumber(t,i)))).next(($=>(n=$,p=Date.now(),this.removeTargets(t,n,s)))).next(($=>(u=$,h=Date.now(),this.removeOrphanedDocuments(t,n)))).next(($=>(k=Date.now(),Ml()<=xr.DEBUG&&Rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-S}ms
	Determined least recently used ${i} in `+(p-l)+`ms
	Removed ${u} targets in `+(h-p)+`ms
	Removed ${$} documents in `+(k-h)+`ms
Total Duration: ${k-S}ms`),at.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:$}))))}}function z9(a,t){return new M9(a,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(){this.changes=new Zi((t=>t.toString()),((t,s)=>t.isEqual(s))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,s){this.assertNotApplied(),this.changes.set(t,ja.newInvalidDocument(t).setReadTime(s))}getEntry(t,s){this.assertNotApplied();const n=this.changes.get(s);return n!==void 0?at.resolve(n):this.getFromCache(t,s)}getEntries(t,s){return this.getAllFromCache(t,s)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(t,s){this.overlayedDocument=t,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(t,s,n,i){this.remoteDocumentCache=t,this.mutationQueue=s,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,s){let n=null;return this.documentOverlayCache.getOverlay(t,s).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,s)))).next((i=>(n!==null&&pd(n.mutation,i,js.empty(),Wr.now()),i)))}getDocuments(t,s){return this.remoteDocumentCache.getEntries(t,s).next((n=>this.getLocalViewOfDocuments(t,n,gr()).next((()=>n))))}getLocalViewOfDocuments(t,s,n=gr()){const i=Ri();return this.populateOverlays(t,i,s).next((()=>this.computeViews(t,s,i,n).next((u=>{let l=sd();return u.forEach(((p,h)=>{l=l.insert(p,h.overlayedDocument)})),l}))))}getOverlayedDocuments(t,s){const n=Ri();return this.populateOverlays(t,n,s).next((()=>this.computeViews(t,s,n,gr())))}populateOverlays(t,s,n){const i=[];return n.forEach((u=>{s.has(u)||i.push(u)})),this.documentOverlayCache.getOverlays(t,i).next((u=>{u.forEach(((l,p)=>{s.set(l,p)}))}))}computeViews(t,s,n,i){let u=so();const l=md(),p=(function(){return md()})();return s.forEach(((h,k)=>{const S=n.get(k.key);i.has(k.key)&&(S===void 0||S.mutation instanceof oi)?u=u.insert(k.key,k):S!==void 0?(l.set(k.key,S.mutation.getFieldMask()),pd(S.mutation,k,S.mutation.getFieldMask(),Wr.now())):l.set(k.key,js.empty())})),this.recalculateAndSaveOverlays(t,u).next((h=>(h.forEach(((k,S)=>l.set(k,S))),s.forEach(((k,S)=>{var $;return p.set(k,new L9(S,($=l.get(k))!==null&&$!==void 0?$:null))})),p)))}recalculateAndSaveOverlays(t,s){const n=md();let i=new sa(((l,p)=>l-p)),u=gr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,s).next((l=>{for(const p of l)p.keys().forEach((h=>{const k=s.get(h);if(k===null)return;let S=n.get(h)||js.empty();S=p.applyToLocalView(k,S),n.set(h,S);const $=(i.get(p.batchId)||gr()).add(h);i=i.insert(p.batchId,$)}))})).next((()=>{const l=[],p=i.getReverseIterator();for(;p.hasNext();){const h=p.getNext(),k=h.key,S=h.value,$=S2();S.forEach((D=>{if(!u.has(D)){const O=A2(s.get(D),n.get(D));O!==null&&$.set(D,O),u=u.add(D)}})),l.push(this.documentOverlayCache.saveOverlays(t,k,$))}return at.waitFor(l)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,s){return this.remoteDocumentCache.getEntries(t,s).next((n=>this.recalculateAndSaveOverlays(t,n)))}getDocumentsMatchingQuery(t,s,n,i){return(function(l){return er.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(t,s.path):w2(s)?this.getDocumentsMatchingCollectionGroupQuery(t,s,n,i):this.getDocumentsMatchingCollectionQuery(t,s,n,i)}getNextDocuments(t,s,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,s,n,i).next((u=>{const l=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,s,n.largestBatchId,i-u.size):at.resolve(Ri());let p=Nd,h=u;return l.next((k=>at.forEach(k,((S,$)=>(p<$.largestBatchId&&(p=$.largestBatchId),u.get(S)?at.resolve():this.remoteDocumentCache.getEntry(t,S).next((D=>{h=h.insert(S,D)}))))).next((()=>this.populateOverlays(t,k,u))).next((()=>this.computeViews(t,h,k,gr()))).next((S=>({batchId:p,changes:C2(S)})))))}))}getDocumentsMatchingDocumentQuery(t,s){return this.getDocument(t,new er(s)).next((n=>{let i=sd();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(t,s,n,i){const u=s.collectionGroup;let l=sd();return this.indexManager.getCollectionParents(t,u).next((p=>at.forEach(p,(h=>{const k=(function($,D){return new mc(D,null,$.explicitOrderBy.slice(),$.filters.slice(),$.limit,$.limitType,$.startAt,$.endAt)})(s,h.child(u));return this.getDocumentsMatchingCollectionQuery(t,k,n,i).next((S=>{S.forEach((($,D)=>{l=l.insert($,D)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(t,s,n,i){let u;return this.documentOverlayCache.getOverlaysForCollection(t,s.path,n.largestBatchId).next((l=>(u=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,s,n,u,i)))).next((l=>{u.forEach(((h,k)=>{const S=k.getKey();l.get(S)===null&&(l=l.insert(S,ja.newInvalidDocument(S)))}));let p=sd();return l.forEach(((h,k)=>{const S=u.get(h);S!==void 0&&pd(S.mutation,k,js.empty(),Wr.now()),Hm(s,k)&&(p=p.insert(h,k))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,s){return at.resolve(this.dr.get(s))}saveBundleMetadata(t,s){return this.dr.set(s.id,(function(i){return{id:i.id,version:i.version,createTime:$s(i.createTime)}})(s)),at.resolve()}getNamedQuery(t,s){return at.resolve(this.Ar.get(s))}saveNamedQuery(t,s){return this.Ar.set(s.name,(function(i){return{name:i.name,query:E9(i.bundledQuery),readTime:$s(i.readTime)}})(s)),at.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(){this.overlays=new sa(er.comparator),this.Rr=new Map}getOverlay(t,s){return at.resolve(this.overlays.get(s))}getOverlays(t,s){const n=Ri();return at.forEach(s,(i=>this.getOverlay(t,i).next((u=>{u!==null&&n.set(i,u)})))).next((()=>n))}saveOverlays(t,s,n){return n.forEach(((i,u)=>{this.Et(t,s,u)})),at.resolve()}removeOverlaysForBatchId(t,s,n){const i=this.Rr.get(n);return i!==void 0&&(i.forEach((u=>this.overlays=this.overlays.remove(u))),this.Rr.delete(n)),at.resolve()}getOverlaysForCollection(t,s,n){const i=Ri(),u=s.length+1,l=new er(s.child("")),p=this.overlays.getIteratorFrom(l);for(;p.hasNext();){const h=p.getNext().value,k=h.getKey();if(!s.isPrefixOf(k.path))break;k.path.length===u&&h.largestBatchId>n&&i.set(h.getKey(),h)}return at.resolve(i)}getOverlaysForCollectionGroup(t,s,n,i){let u=new sa(((k,S)=>k-S));const l=this.overlays.getIterator();for(;l.hasNext();){const k=l.getNext().value;if(k.getKey().getCollectionGroup()===s&&k.largestBatchId>n){let S=u.get(k.largestBatchId);S===null&&(S=Ri(),u=u.insert(k.largestBatchId,S)),S.set(k.getKey(),k)}}const p=Ri(),h=u.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((k,S)=>p.set(k,S))),!(p.size()>=i)););return at.resolve(p)}Et(t,s,n){const i=this.overlays.get(n.key);if(i!==null){const l=this.Rr.get(i.largestBatchId).delete(n.key);this.Rr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new l9(s,n));let u=this.Rr.get(s);u===void 0&&(u=gr(),this.Rr.set(s,u)),this.Rr.set(s,u.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(){this.sessionToken=Aa.EMPTY_BYTE_STRING}getSessionToken(t){return at.resolve(this.sessionToken)}setSessionToken(t,s){return this.sessionToken=s,at.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.Vr=new fa(Na.mr),this.gr=new fa(Na.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,s){const n=new Na(t,s);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(t,s){t.forEach((n=>this.addReference(n,s)))}removeReference(t,s){this.wr(new Na(t,s))}Sr(t,s){t.forEach((n=>this.removeReference(n,s)))}br(t){const s=new er(new Hr([])),n=new Na(s,t),i=new Na(s,t+1),u=[];return this.gr.forEachInRange([n,i],(l=>{this.wr(l),u.push(l.key)})),u}Dr(){this.Vr.forEach((t=>this.wr(t)))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const s=new er(new Hr([])),n=new Na(s,t),i=new Na(s,t+1);let u=gr();return this.gr.forEachInRange([n,i],(l=>{u=u.add(l.key)})),u}containsKey(t){const s=new Na(t,0),n=this.Vr.firstAfterOrEqual(s);return n!==null&&t.isEqual(n.key)}}class Na{constructor(t,s){this.key=t,this.Cr=s}static mr(t,s){return er.comparator(t.key,s.key)||dr(t.Cr,s.Cr)}static pr(t,s){return dr(t.Cr,s.Cr)||er.comparator(t.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(t,s){this.indexManager=t,this.referenceDelegate=s,this.mutationQueue=[],this.Fr=1,this.Mr=new fa(Na.mr)}checkEmpty(t){return at.resolve(this.mutationQueue.length===0)}addMutationBatch(t,s,n,i){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new i9(u,s,n,i);this.mutationQueue.push(l);for(const p of i)this.Mr=this.Mr.add(new Na(p.key,u)),this.indexManager.addToCollectionParentIndex(t,p.key.path.popLast());return at.resolve(l)}lookupMutationBatch(t,s){return at.resolve(this.Or(s))}getNextMutationBatchAfterBatchId(t,s){const n=s+1,i=this.Nr(n),u=i<0?0:i;return at.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return at.resolve(this.mutationQueue.length===0?Ig:this.Fr-1)}getAllMutationBatches(t){return at.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,s){const n=new Na(s,0),i=new Na(s,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([n,i],(l=>{const p=this.Or(l.Cr);u.push(p)})),at.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,s){let n=new fa(dr);return s.forEach((i=>{const u=new Na(i,0),l=new Na(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,l],(p=>{n=n.add(p.Cr)}))})),at.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(t,s){const n=s.path,i=n.length+1;let u=n;er.isDocumentKey(u)||(u=u.child(""));const l=new Na(new er(u),0);let p=new fa(dr);return this.Mr.forEachWhile((h=>{const k=h.key.path;return!!n.isPrefixOf(k)&&(k.length===i&&(p=p.add(h.Cr)),!0)}),l),at.resolve(this.Br(p))}Br(t){const s=[];return t.forEach((n=>{const i=this.Or(n);i!==null&&s.push(i)})),s}removeMutationBatch(t,s){Sr(this.Lr(s.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Mr;return at.forEach(s.mutations,(i=>{const u=new Na(i.key,s.batchId);return n=n.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Mr=n}))}qn(t){}containsKey(t,s){const n=new Na(s,0),i=this.Mr.firstAfterOrEqual(n);return at.resolve(s.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,at.resolve()}Lr(t,s){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const s=this.Nr(t);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(t){this.kr=t,this.docs=(function(){return new sa(er.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,s){const n=s.key,i=this.docs.get(n),u=i?i.size:0,l=this.kr(s);return this.docs=this.docs.insert(n,{document:s.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const s=this.docs.get(t);s&&(this.docs=this.docs.remove(t),this.size-=s.size)}getEntry(t,s){const n=this.docs.get(s);return at.resolve(n?n.document.mutableCopy():ja.newInvalidDocument(s))}getEntries(t,s){let n=so();return s.forEach((i=>{const u=this.docs.get(i);n=n.insert(i,u?u.document.mutableCopy():ja.newInvalidDocument(i))})),at.resolve(n)}getDocumentsMatchingQuery(t,s,n,i){let u=so();const l=s.path,p=new er(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(p);for(;h.hasNext();){const{key:k,value:{document:S}}=h.getNext();if(!l.isPrefixOf(k.path))break;k.path.length>l.length+1||jI(NI(S),n)<=0||(i.has(S.key)||Hm(s,S))&&(u=u.insert(S.key,S.mutableCopy()))}return at.resolve(u)}getAllFromCollectionGroup(t,s,n,i){ar()}qr(t,s){return at.forEach(this.docs,(n=>s(n)))}newChangeBuffer(t){return new W9(this)}getSize(t){return at.resolve(this.size)}}class W9 extends B9{constructor(t){super(),this.Ir=t}applyChanges(t){const s=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?s.push(this.Ir.addEntry(t,i)):this.Ir.removeEntry(n)})),at.waitFor(s)}getFromCache(t,s){return this.Ir.getEntry(t,s)}getAllFromCache(t,s){return this.Ir.getEntries(t,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(t){this.persistence=t,this.Qr=new Zi((s=>Ag(s)),Rg),this.lastRemoteSnapshotVersion=sr.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Og,this.targetCount=0,this.Kr=tc.Un()}forEachTarget(t,s){return this.Qr.forEach(((n,i)=>s(i))),at.resolve()}getLastRemoteSnapshotVersion(t){return at.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return at.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),at.resolve(this.highestTargetId)}setTargetsMetadata(t,s,n){return n&&(this.lastRemoteSnapshotVersion=n),s>this.$r&&(this.$r=s),at.resolve()}zn(t){this.Qr.set(t.target,t);const s=t.targetId;s>this.highestTargetId&&(this.Kr=new tc(s),this.highestTargetId=s),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,s){return this.zn(s),this.targetCount+=1,at.resolve()}updateTargetData(t,s){return this.zn(s),at.resolve()}removeTargetData(t,s){return this.Qr.delete(s.target),this.Ur.br(s.targetId),this.targetCount-=1,at.resolve()}removeTargets(t,s,n){let i=0;const u=[];return this.Qr.forEach(((l,p)=>{p.sequenceNumber<=s&&n.get(p.targetId)===null&&(this.Qr.delete(l),u.push(this.removeMatchingKeysForTargetId(t,p.targetId)),i++)})),at.waitFor(u).next((()=>i))}getTargetCount(t){return at.resolve(this.targetCount)}getTargetData(t,s){const n=this.Qr.get(s)||null;return at.resolve(n)}addMatchingKeys(t,s,n){return this.Ur.yr(s,n),at.resolve()}removeMatchingKeys(t,s,n){this.Ur.Sr(s,n);const i=this.persistence.referenceDelegate,u=[];return i&&s.forEach((l=>{u.push(i.markPotentiallyOrphaned(t,l))})),at.waitFor(u)}removeMatchingKeysForTargetId(t,s){return this.Ur.br(s),at.resolve()}getMatchingKeysForTargetId(t,s){const n=this.Ur.vr(s);return at.resolve(n)}containsKey(t,s){return at.resolve(this.Ur.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(t,s){this.Wr={},this.overlays={},this.Gr=new Vm(0),this.zr=!1,this.zr=!0,this.jr=new U9,this.referenceDelegate=t(this),this.Hr=new G9(this),this.indexManager=new I9,this.remoteDocumentCache=(function(i){return new H9(i)})((n=>this.referenceDelegate.Jr(n))),this.serializer=new P9(s),this.Yr=new V9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let s=this.overlays[t.toKey()];return s||(s=new F9,this.overlays[t.toKey()]=s),s}getMutationQueue(t,s){let n=this.Wr[t.toKey()];return n||(n=new q9(s,this.referenceDelegate),this.Wr[t.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,s,n){Rt("MemoryPersistence","Starting transaction:",t);const i=new K9(this.Gr.next());return this.referenceDelegate.Zr(),n(i).next((u=>this.referenceDelegate.Xr(i).next((()=>u)))).toPromise().then((u=>(i.raiseOnCommittedEvent(),u)))}ei(t,s){return at.or(Object.values(this.Wr).map((n=>()=>n.containsKey(t,s))))}}class K9 extends SI{constructor(t){super(),this.currentSequenceNumber=t}}class Vg{constructor(t){this.persistence=t,this.ti=new Og,this.ni=null}static ri(t){return new Vg(t)}get ii(){if(this.ni)return this.ni;throw ar()}addReference(t,s,n){return this.ti.addReference(n,s),this.ii.delete(n.toString()),at.resolve()}removeReference(t,s,n){return this.ti.removeReference(n,s),this.ii.add(n.toString()),at.resolve()}markPotentiallyOrphaned(t,s){return this.ii.add(s.toString()),at.resolve()}removeTarget(t,s){this.ti.br(s.targetId).forEach((i=>this.ii.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,s.targetId).next((i=>{i.forEach((u=>this.ii.add(u.toString())))})).next((()=>n.removeTargetData(t,s)))}Zr(){this.ni=new Set}Xr(t){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return at.forEach(this.ii,(n=>{const i=er.fromPath(n);return this.si(t,i).next((u=>{u||s.removeEntry(i,sr.min())}))})).next((()=>(this.ni=null,s.apply(t))))}updateLimboDocument(t,s){return this.si(t,s).next((n=>{n?this.ii.delete(s.toString()):this.ii.add(s.toString())}))}Jr(t){return 0}si(t,s){return at.or([()=>at.resolve(this.ti.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(t,s),()=>this.persistence.ei(t,s)])}}class cm{constructor(t,s){this.persistence=t,this.oi=new Zi((n=>PI(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=z9(this,s)}static ri(t,s){return new cm(t,s)}Zr(){}Xr(t){return at.resolve()}forEachTarget(t,s){return this.persistence.getTargetCache().forEachTarget(t,s)}nr(t){const s=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next((n=>s.next((i=>n+i))))}sr(t){let s=0;return this.rr(t,(n=>{s++})).next((()=>s))}rr(t,s){return at.forEach(this.oi,((n,i)=>this.ar(t,n,i).next((u=>u?at.resolve():s(i)))))}removeTargets(t,s,n){return this.persistence.getTargetCache().removeTargets(t,s,n)}removeOrphanedDocuments(t,s){let n=0;const i=this.persistence.getRemoteDocumentCache(),u=i.newChangeBuffer();return i.qr(t,(l=>this.ar(t,l,s).next((p=>{p||(n++,u.removeEntry(l,sr.min()))})))).next((()=>u.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,s){return this.oi.set(s,t.currentSequenceNumber),at.resolve()}removeTarget(t,s){const n=s.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,s,n){return this.oi.set(n,t.currentSequenceNumber),at.resolve()}removeReference(t,s,n){return this.oi.set(n,t.currentSequenceNumber),at.resolve()}updateLimboDocument(t,s){return this.oi.set(s,t.currentSequenceNumber),at.resolve()}Jr(t){let s=t.key.toString().length;return t.isFoundDocument()&&(s+=B0(t.data.value)),s}ar(t,s,n){return at.or([()=>this.persistence.ei(t,s),()=>this.persistence.getTargetCache().containsKey(t,s),()=>{const i=this.oi.get(s);return at.resolve(i!==void 0&&i>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(t,s,n,i){this.targetId=t,this.fromCache=s,this.Hi=n,this.Ji=i}static Yi(t,s){let n=gr(),i=gr();for(const u of s.docChanges)switch(u.type){case 0:n=n.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new Fg(t,s.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=(function(){return ST()?8:$I(Ua())>0?6:4})()}initialize(t,s){this.ns=t,this.indexManager=s,this.Zi=!0}getDocumentsMatchingQuery(t,s,n,i){const u={result:null};return this.rs(t,s).next((l=>{u.result=l})).next((()=>{if(!u.result)return this.ss(t,s,i,n).next((l=>{u.result=l}))})).next((()=>{if(u.result)return;const l=new Q9;return this._s(t,s,l).next((p=>{if(u.result=p,this.Xi)return this.us(t,s,l,p.size)}))})).next((()=>u.result))}us(t,s,n,i){return n.documentReadCount<this.es?(Ml()<=xr.DEBUG&&Rt("QueryEngine","SDK will not create cache indexes for query:",zl(s),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),at.resolve()):(Ml()<=xr.DEBUG&&Rt("QueryEngine","Query:",zl(s),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ts*i?(Ml()<=xr.DEBUG&&Rt("QueryEngine","The SDK decides to create cache indexes for query:",zl(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,wn(s))):at.resolve())}rs(t,s){if(vw(s))return at.resolve(null);let n=wn(s);return this.indexManager.getIndexType(t,n).next((i=>i===0?null:(s.limit!==null&&i===1&&(s=om(s,null,"F"),n=wn(s)),this.indexManager.getDocumentsMatchingTarget(t,n).next((u=>{const l=gr(...u);return this.ns.getDocuments(t,l).next((p=>this.indexManager.getMinOffset(t,n).next((h=>{const k=this.cs(s,p);return this.ls(s,k,l,h.readTime)?this.rs(t,om(s,null,"F")):this.hs(t,k,s,h)}))))})))))}ss(t,s,n,i){return vw(s)||i.isEqual(sr.min())?at.resolve(null):this.ns.getDocuments(t,n).next((u=>{const l=this.cs(s,u);return this.ls(s,l,n,i)?at.resolve(null):(Ml()<=xr.DEBUG&&Rt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zl(s)),this.hs(t,l,s,kI(i,Nd)).next((p=>p)))}))}cs(t,s){let n=new fa(N2(t));return s.forEach(((i,u)=>{Hm(t,u)&&(n=n.add(u))})),n}ls(t,s,n,i){if(t.limit===null)return!1;if(n.size!==s.size)return!0;const u=t.limitType==="F"?s.last():s.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}_s(t,s,n){return Ml()<=xr.DEBUG&&Rt("QueryEngine","Using full collection scan to execute query:",zl(s)),this.ns.getDocumentsMatchingQuery(t,s,Yo.min(),n)}hs(t,s,n,i){return this.ns.getDocumentsMatchingQuery(t,n,i).next((u=>(s.forEach((l=>{u=u.insert(l.key,l)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="LocalStore",X9=3e8;class J9{constructor(t,s,n,i){this.persistence=t,this.Ps=s,this.serializer=i,this.Ts=new sa(dr),this.Is=new Zi((u=>Ag(u)),Rg),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(n)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new O9(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>t.collect(s,this.Ts)))}}function Z9(a,t,s,n){return new J9(a,t,s,n)}async function X2(a,t){const s=lr(a);return await s.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return s.mutationQueue.getAllMutationBatches(n).next((u=>(i=u,s.As(t),s.mutationQueue.getAllMutationBatches(n)))).next((u=>{const l=[],p=[];let h=gr();for(const k of i){l.push(k.batchId);for(const S of k.mutations)h=h.add(S.key)}for(const k of u){p.push(k.batchId);for(const S of k.mutations)h=h.add(S.key)}return s.localDocuments.getDocuments(n,h).next((k=>({Rs:k,removedBatchIds:l,addedBatchIds:p})))}))}))}function eD(a,t){const s=lr(a);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=t.batch.keys(),u=s.ds.newChangeBuffer({trackRemovals:!0});return(function(p,h,k,S){const $=k.batch,D=$.keys();let O=at.resolve();return D.forEach((Y=>{O=O.next((()=>S.getEntry(h,Y))).next((W=>{const N=k.docVersions.get(Y);Sr(N!==null),W.version.compareTo(N)<0&&($.applyToRemoteDocument(W,k),W.isValidDocument()&&(W.setReadTime(k.commitVersion),S.addEntry(W)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(h,$)))})(s,n,t,u).next((()=>u.apply(n))).next((()=>s.mutationQueue.performConsistencyCheck(n))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(n,i,t.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(p){let h=gr();for(let k=0;k<p.mutationResults.length;++k)p.mutationResults[k].transformResults.length>0&&(h=h.add(p.batch.mutations[k].key));return h})(t)))).next((()=>s.localDocuments.getDocuments(n,i)))}))}function J2(a){const t=lr(a);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>t.Hr.getLastRemoteSnapshotVersion(s)))}function tD(a,t){const s=lr(a),n=t.snapshotVersion;let i=s.Ts;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const l=s.ds.newChangeBuffer({trackRemovals:!0});i=s.Ts;const p=[];t.targetChanges.forEach(((S,$)=>{const D=i.get($);if(!D)return;p.push(s.Hr.removeMatchingKeys(u,S.removedDocuments,$).next((()=>s.Hr.addMatchingKeys(u,S.addedDocuments,$))));let O=D.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get($)!==null?O=O.withResumeToken(Aa.EMPTY_BYTE_STRING,sr.min()).withLastLimboFreeSnapshotVersion(sr.min()):S.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(S.resumeToken,n)),i=i.insert($,O),(function(W,N,G){return W.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=X9?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(D,O,S)&&p.push(s.Hr.updateTargetData(u,O))}));let h=so(),k=gr();if(t.documentUpdates.forEach((S=>{t.resolvedLimboDocuments.has(S)&&p.push(s.persistence.referenceDelegate.updateLimboDocument(u,S))})),p.push(rD(u,l,t.documentUpdates).next((S=>{h=S.Vs,k=S.fs}))),!n.isEqual(sr.min())){const S=s.Hr.getLastRemoteSnapshotVersion(u).next(($=>s.Hr.setTargetsMetadata(u,u.currentSequenceNumber,n)));p.push(S)}return at.waitFor(p).next((()=>l.apply(u))).next((()=>s.localDocuments.getLocalViewOfDocuments(u,h,k))).next((()=>h))})).then((u=>(s.Ts=i,u)))}function rD(a,t,s){let n=gr(),i=gr();return s.forEach((u=>n=n.add(u))),t.getEntries(a,n).next((u=>{let l=so();return s.forEach(((p,h)=>{const k=u.get(p);h.isFoundDocument()!==k.isFoundDocument()&&(i=i.add(p)),h.isNoDocument()&&h.version.isEqual(sr.min())?(t.removeEntry(p,h.readTime),l=l.insert(p,h)):!k.isValidDocument()||h.version.compareTo(k.version)>0||h.version.compareTo(k.version)===0&&k.hasPendingWrites?(t.addEntry(h),l=l.insert(p,h)):Rt(Ug,"Ignoring outdated watch update for ",p,". Current version:",k.version," Watch version:",h.version)})),{Vs:l,fs:i}}))}function aD(a,t){const s=lr(a);return s.persistence.runTransaction("Get next mutation batch","readonly",(n=>(t===void 0&&(t=Ig),s.mutationQueue.getNextMutationBatchAfterBatchId(n,t))))}function sD(a,t){const s=lr(a);return s.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return s.Hr.getTargetData(n,t).next((u=>u?(i=u,at.resolve(i)):s.Hr.allocateTargetId(n).next((l=>(i=new Fo(t,l,"TargetPurposeListen",n.currentSequenceNumber),s.Hr.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=s.Ts.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(s.Ts=s.Ts.insert(n.targetId,n),s.Is.set(t,n.targetId)),n}))}async function Ox(a,t,s){const n=lr(a),i=n.Ts.get(t),u=s?"readwrite":"readwrite-primary";try{s||await n.persistence.runTransaction("Release target",u,(l=>n.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!uc(l))throw l;Rt(Ug,`Failed to update sequence numbers for target ${t}: ${l}`)}n.Ts=n.Ts.remove(t),n.Is.delete(i.target)}function _w(a,t,s){const n=lr(a);let i=sr.min(),u=gr();return n.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,k,S){const $=lr(h),D=$.Is.get(S);return D!==void 0?at.resolve($.Ts.get(D)):$.Hr.getTargetData(k,S)})(n,l,wn(t)).next((p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,n.Hr.getMatchingKeysForTargetId(l,p.targetId).next((h=>{u=h}))})).next((()=>n.Ps.getDocumentsMatchingQuery(l,t,s?i:sr.min(),s?u:gr()))).next((p=>(nD(n,KI(t),p),{documents:p,gs:u})))))}function nD(a,t,s){let n=a.Es.get(t)||sr.min();s.forEach(((i,u)=>{u.readTime.compareTo(n)>0&&(n=u.readTime)})),a.Es.set(t,n)}class Aw{constructor(){this.activeTargetIds=e9()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class oD{constructor(){this.ho=new Aw,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,s,n){}addLocalQueryTarget(t,s=!0){return s&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,s,n){this.Po[t]=s}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Aw,Promise.resolve()}handleUserChange(t,s,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="ConnectivityMonitor";class Mw{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Rt(Rw,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Rt(Rw,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T0=null;function Vx(){return T0===null?T0=(function(){return 268435456+Math.round(2147483648*Math.random())})():T0++,"0x"+T0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="RestConnection",lD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cD{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=s+"://"+t.host,this.yo=`projects/${n}/databases/${i}`,this.wo=this.databaseId.database===am?`project_id=${n}`:`project_id=${n}&database_id=${i}`}So(t,s,n,i,u){const l=Vx(),p=this.bo(t,s.toUriEncodedString());Rt(Zh,`Sending RPC '${t}' ${l}:`,p,n);const h={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(h,i,u),this.vo(t,p,h,n).then((k=>(Rt(Zh,`Received RPC '${t}' ${l}: `,k),k)),(k=>{throw Xl(Zh,`RPC '${t}' ${l} failed with error: `,k,"url: ",p,"request:",n),k}))}Co(t,s,n,i,u,l){return this.So(t,s,n,i,u)}Do(t,s,n){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+cc})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((i,u)=>t[u]=i)),n&&n.headers.forEach(((i,u)=>t[u]=i))}bo(t,s){const n=lD[t];return`${this.po}/v1/${s}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="WebChannelConnection";class uD extends cD{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,s,n,i){const u=Vx();return new Promise(((l,p)=>{const h=new Xj;h.setWithCredentials(!0),h.listenOnce(Jj.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case z0.NO_ERROR:const S=h.getResponseJson();Rt(La,`XHR for RPC '${t}' ${u} received:`,JSON.stringify(S)),l(S);break;case z0.TIMEOUT:Rt(La,`RPC '${t}' ${u} timed out`),p(new Dt(Ze.DEADLINE_EXCEEDED,"Request time out"));break;case z0.HTTP_ERROR:const $=h.getStatus();if(Rt(La,`RPC '${t}' ${u} failed with status:`,$,"response text:",h.getResponseText()),$>0){let D=h.getResponseJson();Array.isArray(D)&&(D=D[0]);const O=D?.error;if(O&&O.status&&O.message){const Y=(function(N){const G=N.toLowerCase().replace(/_/g,"-");return Object.values(Ze).indexOf(G)>=0?G:Ze.UNKNOWN})(O.status);p(new Dt(Y,O.message))}else p(new Dt(Ze.UNKNOWN,"Server responded with status "+h.getStatus()))}else p(new Dt(Ze.UNAVAILABLE,"Connection failed."));break;default:ar()}}finally{Rt(La,`RPC '${t}' ${u} completed.`)}}));const k=JSON.stringify(i);Rt(La,`RPC '${t}' ${u} sending request:`,i),h.send(s,"POST",k,n,15)}))}Wo(t,s,n){const i=Vx(),u=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=t2(),p=e2(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},k=this.longPollingOptions.timeoutSeconds;k!==void 0&&(h.longPollingTimeout=Math.round(1e3*k)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Do(h.initMessageHeaders,s,n),h.encodeInitMessageHeaders=!0;const S=u.join("");Rt(La,`Creating RPC '${t}' stream ${i}: ${S}`,h);const $=l.createWebChannel(S,h);let D=!1,O=!1;const Y=new dD({Fo:N=>{O?Rt(La,`Not sending because RPC '${t}' stream ${i} is closed:`,N):(D||(Rt(La,`Opening RPC '${t}' stream ${i} transport.`),$.open(),D=!0),Rt(La,`RPC '${t}' stream ${i} sending:`,N),$.send(N))},Mo:()=>$.close()}),W=(N,G,H)=>{N.listen(G,(U=>{try{H(U)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return W($,ad.EventType.OPEN,(()=>{O||(Rt(La,`RPC '${t}' stream ${i} transport opened.`),Y.Qo())})),W($,ad.EventType.CLOSE,(()=>{O||(O=!0,Rt(La,`RPC '${t}' stream ${i} transport closed`),Y.Uo())})),W($,ad.EventType.ERROR,(N=>{O||(O=!0,Xl(La,`RPC '${t}' stream ${i} transport errored:`,N),Y.Uo(new Dt(Ze.UNAVAILABLE,"The operation could not be completed")))})),W($,ad.EventType.MESSAGE,(N=>{var G;if(!O){const H=N.data[0];Sr(!!H);const U=H,ne=U?.error||((G=U[0])===null||G===void 0?void 0:G.error);if(ne){Rt(La,`RPC '${t}' stream ${i} received error:`,ne);const oe=ne.status;let $e=(function(L){const y=pa[L];if(y!==void 0)return B2(y)})(oe),K=ne.message;$e===void 0&&($e=Ze.INTERNAL,K="Unknown error status: "+oe+" with message "+ne.message),O=!0,Y.Uo(new Dt($e,K)),$.close()}else Rt(La,`RPC '${t}' stream ${i} received:`,H),Y.Ko(H)}})),W(p,Zj.STAT_EVENT,(N=>{N.stat===Ex.PROXY?Rt(La,`RPC '${t}' stream ${i} detected buffering proxy`):N.stat===Ex.NOPROXY&&Rt(La,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{Y.$o()}),0),Y}}function ex(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(a){return new x9(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(t,s,n=1e3,i=1.5,u=6e4){this.Ti=t,this.timerId=s,this.Go=n,this.zo=i,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const s=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),i=Math.max(0,s-n);i>0&&Rt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${s} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,(()=>(this.Yo=Date.now(),t()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="PersistentStream";class Z2{constructor(t,s,n,i,u,l,p,h){this.Ti=t,this.n_=n,this.r_=i,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=p,this.listener=h,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new qg(t,s)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,s){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():s&&s.code===Ze.RESOURCE_EXHAUSTED?(ao(s.toString()),ao("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):s&&s.code===Ze.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(s)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),s=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.i_===s&&this.V_(n,i)}),(n=>{t((()=>{const i=new Dt(Ze.UNKNOWN,"Fetching auth token failed: "+n.message);return this.m_(i)}))}))}V_(t,s){const n=this.R_(this.i_);this.stream=this.f_(t,s),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((i=>{n((()=>this.m_(i)))})),this.stream.onMessage((i=>{n((()=>++this.__==1?this.g_(i):this.onNext(i)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(t){return Rt(zw,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return s=>{this.Ti.enqueueAndForget((()=>this.i_===t?s():(Rt(zw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mD extends Z2{constructor(t,s,n,i,u,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,n,i,l),this.serializer=u}f_(t,s){return this.connection.Wo("Listen",t,s)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const s=y9(this.serializer,t),n=(function(u){if(!("targetChange"in u))return sr.min();const l=u.targetChange;return l.targetIds&&l.targetIds.length?sr.min():l.readTime?$s(l.readTime):sr.min()})(t);return this.listener.p_(s,n)}y_(t){const s={};s.database=Lx(this.serializer),s.addTarget=(function(u,l){let p;const h=l.target;if(p=Rx(h)?{documents:w9(u,h)}:{query:k9(u,h).ht},p.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){p.resumeToken=V2(u,l.resumeToken);const k=zx(u,l.expectedCount);k!==null&&(p.expectedCount=k)}else if(l.snapshotVersion.compareTo(sr.min())>0){p.readTime=im(u,l.snapshotVersion.toTimestamp());const k=zx(u,l.expectedCount);k!==null&&(p.expectedCount=k)}return p})(this.serializer,t);const n=j9(this.serializer,t);n&&(s.labels=n),this.I_(s)}w_(t){const s={};s.database=Lx(this.serializer),s.removeTarget=t,this.I_(s)}}class pD extends Z2{constructor(t,s,n,i,u,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,n,i,l),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,s){return this.connection.Wo("Write",t,s)}g_(t){return Sr(!!t.streamToken),this.lastStreamToken=t.streamToken,Sr(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Sr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const s=v9(t.writeResults,t.commitTime),n=$s(t.commitTime);return this.listener.v_(n,s)}C_(){const t={};t.database=Lx(this.serializer),this.I_(t)}b_(t){const s={streamToken:this.lastStreamToken,writes:t.map((n=>H2(this.serializer,n)))};this.I_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{}class xD extends hD{constructor(t,s,n,i){super(),this.authCredentials=t,this.appCheckCredentials=s,this.connection=n,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Dt(Ze.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,s,n,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,l])=>this.connection.So(t,Bx(s,n),i,u,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Dt(Ze.UNKNOWN,u.toString())}))}Co(t,s,n,i,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,p])=>this.connection.Co(t,Bx(s,n),i,l,p,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Dt(Ze.UNKNOWN,l.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class gD{constructor(t,s){this.asyncQueue=t,this.onlineStateHandler=s,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const s=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ao(s),this.N_=!1):Rt("OnlineStateTracker",s)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="RemoteStore";class bD{constructor(t,s,n,i,u){this.localStore=t,this.datastore=s,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To((l=>{n.enqueueAndForget((async()=>{el(this)&&(Rt(qi,"Restarting streams for network reachability change."),await(async function(h){const k=lr(h);k.W_.add(4),await Qd(k),k.j_.set("Unknown"),k.W_.delete(4),await Xm(k)})(this))}))})),this.j_=new gD(n,i)}}async function Xm(a){if(el(a))for(const t of a.G_)await t(!0)}async function Qd(a){for(const t of a.G_)await t(!1)}function e1(a,t){const s=lr(a);s.K_.has(t.targetId)||(s.K_.set(t.targetId,t),Kg(s)?Gg(s):pc(s).c_()&&Wg(s,t))}function Hg(a,t){const s=lr(a),n=pc(s);s.K_.delete(t),n.c_()&&t1(s,t),s.K_.size===0&&(n.c_()?n.P_():el(s)&&s.j_.set("Unknown"))}function Wg(a,t){if(a.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(sr.min())>0){const s=a.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(s)}pc(a).y_(t)}function t1(a,t){a.H_.Ne(t),pc(a).w_(t)}function Gg(a){a.H_=new u9({getRemoteKeysForTarget:t=>a.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>a.K_.get(t)||null,it:()=>a.datastore.serializer.databaseId}),pc(a).start(),a.j_.B_()}function Kg(a){return el(a)&&!pc(a).u_()&&a.K_.size>0}function el(a){return lr(a).W_.size===0}function r1(a){a.H_=void 0}async function fD(a){a.j_.set("Online")}async function yD(a){a.K_.forEach(((t,s)=>{Wg(a,t)}))}async function vD(a,t){r1(a),Kg(a)?(a.j_.q_(t),Gg(a)):a.j_.set("Unknown")}async function wD(a,t,s){if(a.j_.set("Online"),t instanceof O2&&t.state===2&&t.cause)try{await(async function(i,u){const l=u.cause;for(const p of u.targetIds)i.K_.has(p)&&(await i.remoteSyncer.rejectListen(p,l),i.K_.delete(p),i.H_.removeTarget(p))})(a,t)}catch(n){Rt(qi,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await dm(a,n)}else if(t instanceof V0?a.H_.We(t):t instanceof L2?a.H_.Ze(t):a.H_.je(t),!s.isEqual(sr.min()))try{const n=await J2(a.localStore);s.compareTo(n)>=0&&await(function(u,l){const p=u.H_.ot(l);return p.targetChanges.forEach(((h,k)=>{if(h.resumeToken.approximateByteSize()>0){const S=u.K_.get(k);S&&u.K_.set(k,S.withResumeToken(h.resumeToken,l))}})),p.targetMismatches.forEach(((h,k)=>{const S=u.K_.get(h);if(!S)return;u.K_.set(h,S.withResumeToken(Aa.EMPTY_BYTE_STRING,S.snapshotVersion)),t1(u,h);const $=new Fo(S.target,h,k,S.sequenceNumber);Wg(u,$)})),u.remoteSyncer.applyRemoteEvent(p)})(a,s)}catch(n){Rt(qi,"Failed to raise snapshot:",n),await dm(a,n)}}async function dm(a,t,s){if(!uc(t))throw t;a.W_.add(1),await Qd(a),a.j_.set("Offline"),s||(s=()=>J2(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{Rt(qi,"Retrying IndexedDB access"),await s(),a.W_.delete(1),await Xm(a)}))}function a1(a,t){return t().catch((s=>dm(a,s,t)))}async function Jm(a){const t=lr(a),s=ei(t);let n=t.U_.length>0?t.U_[t.U_.length-1].batchId:Ig;for(;kD(t);)try{const i=await aD(t.localStore,n);if(i===null){t.U_.length===0&&s.P_();break}n=i.batchId,ND(t,i)}catch(i){await dm(t,i)}s1(t)&&n1(t)}function kD(a){return el(a)&&a.U_.length<10}function ND(a,t){a.U_.push(t);const s=ei(a);s.c_()&&s.S_&&s.b_(t.mutations)}function s1(a){return el(a)&&!ei(a).u_()&&a.U_.length>0}function n1(a){ei(a).start()}async function jD(a){ei(a).C_()}async function CD(a){const t=ei(a);for(const s of a.U_)t.b_(s.mutations)}async function SD(a,t,s){const n=a.U_.shift(),i=zg.from(n,t,s);await a1(a,(()=>a.remoteSyncer.applySuccessfulWrite(i))),await Jm(a)}async function $D(a,t){t&&ei(a).S_&&await(async function(n,i){if((function(l){return z2(l)&&l!==Ze.ABORTED})(i.code)){const u=n.U_.shift();ei(n).h_(),await a1(n,(()=>n.remoteSyncer.rejectFailedWrite(u.batchId,i))),await Jm(n)}})(a,t),s1(a)&&n1(a)}async function Bw(a,t){const s=lr(a);s.asyncQueue.verifyOperationInProgress(),Rt(qi,"RemoteStore received new credentials");const n=el(s);s.W_.add(3),await Qd(s),n&&s.j_.set("Unknown"),await s.remoteSyncer.handleCredentialChange(t),s.W_.delete(3),await Xm(s)}async function TD(a,t){const s=lr(a);t?(s.W_.delete(2),await Xm(s)):t||(s.W_.add(2),await Qd(s),s.j_.set("Unknown"))}function pc(a){return a.J_||(a.J_=(function(s,n,i){const u=lr(s);return u.M_(),new mD(n,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,i)})(a.datastore,a.asyncQueue,{xo:fD.bind(null,a),No:yD.bind(null,a),Lo:vD.bind(null,a),p_:wD.bind(null,a)}),a.G_.push((async t=>{t?(a.J_.h_(),Kg(a)?Gg(a):a.j_.set("Unknown")):(await a.J_.stop(),r1(a))}))),a.J_}function ei(a){return a.Y_||(a.Y_=(function(s,n,i){const u=lr(s);return u.M_(),new pD(n,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,i)})(a.datastore,a.asyncQueue,{xo:()=>Promise.resolve(),No:jD.bind(null,a),Lo:$D.bind(null,a),D_:CD.bind(null,a),v_:SD.bind(null,a)}),a.G_.push((async t=>{t?(a.Y_.h_(),await Jm(a)):(await a.Y_.stop(),a.U_.length>0&&(Rt(qi,`Stopping write stream with ${a.U_.length} pending writes`),a.U_=[]))}))),a.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(t,s,n,i,u){this.asyncQueue=t,this.timerId=s,this.targetTimeMs=n,this.op=i,this.removalCallback=u,this.deferred=new vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,s,n,i,u){const l=Date.now()+n,p=new Qg(t,s,l,i,u);return p.start(n),p}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Dt(Ze.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yg(a,t){if(ao("AsyncQueue",`${t}: ${a}`),uc(a))return new Dt(Ze.UNAVAILABLE,`${t}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{static emptySet(t){return new Gl(t.comparator)}constructor(t){this.comparator=t?(s,n)=>t(s,n)||er.comparator(s.key,n.key):(s,n)=>er.comparator(s.key,n.key),this.keyedMap=sd(),this.sortedSet=new sa(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const s=this.keyedMap.get(t);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((s,n)=>(t(s),!1)))}add(t){const s=this.delete(t.key);return s.copy(s.keyedMap.insert(t.key,t),s.sortedSet.insert(t,null))}delete(t){const s=this.get(t);return s?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(s)):this}isEqual(t){if(!(t instanceof Gl)||this.size!==t.size)return!1;const s=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;s.hasNext();){const i=s.getNext().key,u=n.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((s=>{t.push(s.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,s){const n=new Gl;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=s,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(){this.Z_=new sa(er.comparator)}track(t){const s=t.doc.key,n=this.Z_.get(s);n?t.type!==0&&n.type===3?this.Z_=this.Z_.insert(s,t):t.type===3&&n.type!==1?this.Z_=this.Z_.insert(s,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.Z_=this.Z_.insert(s,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.Z_=this.Z_.insert(s,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.Z_=this.Z_.remove(s):t.type===1&&n.type===2?this.Z_=this.Z_.insert(s,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.Z_=this.Z_.insert(s,{type:2,doc:t.doc}):ar():this.Z_=this.Z_.insert(s,t)}X_(){const t=[];return this.Z_.inorderTraversal(((s,n)=>{t.push(n)})),t}}class rc{constructor(t,s,n,i,u,l,p,h,k){this.query=t,this.docs=s,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=p,this.excludesMetadataChanges=h,this.hasCachedResults=k}static fromInitialDocuments(t,s,n,i,u){const l=[];return s.forEach((p=>{l.push({type:0,doc:p})})),new rc(t,s,Gl.emptySet(s),l,n,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&qm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const s=this.docChanges,n=t.docChanges;if(s.length!==n.length)return!1;for(let i=0;i<s.length;i++)if(s[i].type!==n[i].type||!s[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some((t=>t.ra()))}}class ED{constructor(){this.queries=Ow(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(s,n){const i=lr(s),u=i.queries;i.queries=Ow(),u.forEach(((l,p)=>{for(const h of p.ta)h.onError(n)}))})(this,new Dt(Ze.ABORTED,"Firestore shutting down"))}}function Ow(){return new Zi((a=>k2(a)),qm)}async function Xg(a,t){const s=lr(a);let n=3;const i=t.query;let u=s.queries.get(i);u?!u.na()&&t.ra()&&(n=2):(u=new PD,n=t.ra()?0:1);try{switch(n){case 0:u.ea=await s.onListen(i,!0);break;case 1:u.ea=await s.onListen(i,!1);break;case 2:await s.onFirstRemoteStoreListen(i)}}catch(l){const p=Yg(l,`Initialization of query '${zl(t.query)}' failed`);return void t.onError(p)}s.queries.set(i,u),u.ta.push(t),t.sa(s.onlineState),u.ea&&t.oa(u.ea)&&Zg(s)}async function Jg(a,t){const s=lr(a),n=t.query;let i=3;const u=s.queries.get(n);if(u){const l=u.ta.indexOf(t);l>=0&&(u.ta.splice(l,1),u.ta.length===0?i=t.ra()?0:1:!u.na()&&t.ra()&&(i=2))}switch(i){case 0:return s.queries.delete(n),s.onUnlisten(n,!0);case 1:return s.queries.delete(n),s.onUnlisten(n,!1);case 2:return s.onLastRemoteStoreUnlisten(n);default:return}}function ID(a,t){const s=lr(a);let n=!1;for(const i of t){const u=i.query,l=s.queries.get(u);if(l){for(const p of l.ta)p.oa(i)&&(n=!0);l.ea=i}}n&&Zg(s)}function DD(a,t,s){const n=lr(a),i=n.queries.get(t);if(i)for(const u of i.ta)u.onError(s);n.queries.delete(t)}function Zg(a){a.ia.forEach((t=>{t.next()}))}var Fx,Vw;(Vw=Fx||(Fx={}))._a="default",Vw.Cache="cache";class eb{constructor(t,s,n){this.query=t,this.aa=s,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(t){if(!this.options.includeMetadataChanges){const n=[];for(const i of t.docChanges)i.type!==3&&n.push(i);t=new rc(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let s=!1;return this.ua?this.la(t)&&(this.aa.next(t),s=!0):this.ha(t,this.onlineState)&&(this.Pa(t),s=!0),this.ca=t,s}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let s=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),s=!0),s}ha(t,s){if(!t.fromCache||!this.ra())return!0;const n=s!=="Offline";return(!this.options.Ta||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||s==="Offline")}la(t){if(t.docChanges.length>0)return!0;const s=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}Pa(t){t=rc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==Fx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(t){this.key=t}}class i1{constructor(t){this.key=t}}class _D{constructor(t,s){this.query=t,this.fa=s,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=gr(),this.mutatedKeys=gr(),this.ya=N2(t),this.wa=new Gl(this.ya)}get Sa(){return this.fa}ba(t,s){const n=s?s.Da:new Lw,i=s?s.wa:this.wa;let u=s?s.mutatedKeys:this.mutatedKeys,l=i,p=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,k=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((S,$)=>{const D=i.get(S),O=Hm(this.query,$)?$:null,Y=!!D&&this.mutatedKeys.has(D.key),W=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let N=!1;D&&O?D.data.isEqual(O.data)?Y!==W&&(n.track({type:3,doc:O}),N=!0):this.va(D,O)||(n.track({type:2,doc:O}),N=!0,(h&&this.ya(O,h)>0||k&&this.ya(O,k)<0)&&(p=!0)):!D&&O?(n.track({type:0,doc:O}),N=!0):D&&!O&&(n.track({type:1,doc:D}),N=!0,(h||k)&&(p=!0)),N&&(O?(l=l.add(O),u=W?u.add(S):u.delete(S)):(l=l.delete(S),u=u.delete(S)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const S=this.query.limitType==="F"?l.last():l.first();l=l.delete(S.key),u=u.delete(S.key),n.track({type:1,doc:S})}return{wa:l,Da:n,ls:p,mutatedKeys:u}}va(t,s){return t.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(t,s,n,i){const u=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const l=t.Da.X_();l.sort(((S,$)=>(function(O,Y){const W=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ar()}};return W(O)-W(Y)})(S.type,$.type)||this.ya(S.doc,$.doc))),this.Ca(n),i=i!=null&&i;const p=s&&!i?this.Fa():[],h=this.pa.size===0&&this.current&&!i?1:0,k=h!==this.ga;return this.ga=h,l.length!==0||k?{snapshot:new rc(this.query,t.wa,u,l,t.mutatedKeys,h===0,k,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:p}:{Ma:p}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Lw,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach((s=>this.fa=this.fa.add(s))),t.modifiedDocuments.forEach((s=>{})),t.removedDocuments.forEach((s=>this.fa=this.fa.delete(s))),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=gr(),this.wa.forEach((n=>{this.xa(n.key)&&(this.pa=this.pa.add(n.key))}));const s=[];return t.forEach((n=>{this.pa.has(n)||s.push(new i1(n))})),this.pa.forEach((n=>{t.has(n)||s.push(new o1(n))})),s}Oa(t){this.fa=t.gs,this.pa=gr();const s=this.ba(t.documents);return this.applyChanges(s,!0)}Na(){return rc.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const tb="SyncEngine";class AD{constructor(t,s,n){this.query=t,this.targetId=s,this.view=n}}class RD{constructor(t){this.key=t,this.Ba=!1}}class MD{constructor(t,s,n,i,u,l){this.localStore=t,this.remoteStore=s,this.eventManager=n,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new Zi((p=>k2(p)),qm),this.qa=new Map,this.Qa=new Set,this.$a=new sa(er.comparator),this.Ua=new Map,this.Ka=new Og,this.Wa={},this.Ga=new Map,this.za=tc.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function zD(a,t,s=!0){const n=p1(a);let i;const u=n.ka.get(t);return u?(n.sharedClientState.addLocalQueryTarget(u.targetId),i=u.view.Na()):i=await l1(n,t,s,!0),i}async function BD(a,t){const s=p1(a);await l1(s,t,!0,!1)}async function l1(a,t,s,n){const i=await sD(a.localStore,wn(t)),u=i.targetId,l=a.sharedClientState.addLocalQueryTarget(u,s);let p;return n&&(p=await LD(a,t,u,l==="current",i.resumeToken)),a.isPrimaryClient&&s&&e1(a.remoteStore,i),p}async function LD(a,t,s,n,i){a.Ha=($,D,O)=>(async function(W,N,G,H){let U=N.view.ba(G);U.ls&&(U=await _w(W.localStore,N.query,!1).then((({documents:K})=>N.view.ba(K,U))));const ne=H&&H.targetChanges.get(N.targetId),oe=H&&H.targetMismatches.get(N.targetId)!=null,$e=N.view.applyChanges(U,W.isPrimaryClient,ne,oe);return Uw(W,N.targetId,$e.Ma),$e.snapshot})(a,$,D,O);const u=await _w(a.localStore,t,!0),l=new _D(t,u.gs),p=l.ba(u.documents),h=Kd.createSynthesizedTargetChangeForCurrentChange(s,n&&a.onlineState!=="Offline",i),k=l.applyChanges(p,a.isPrimaryClient,h);Uw(a,s,k.Ma);const S=new AD(t,s,l);return a.ka.set(t,S),a.qa.has(s)?a.qa.get(s).push(t):a.qa.set(s,[t]),k.snapshot}async function OD(a,t,s){const n=lr(a),i=n.ka.get(t),u=n.qa.get(i.targetId);if(u.length>1)return n.qa.set(i.targetId,u.filter((l=>!qm(l,t)))),void n.ka.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Ox(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),s&&Hg(n.remoteStore,i.targetId),Ux(n,i.targetId)})).catch(dc)):(Ux(n,i.targetId),await Ox(n.localStore,i.targetId,!0))}async function VD(a,t){const s=lr(a),n=s.ka.get(t),i=s.qa.get(n.targetId);s.isPrimaryClient&&i.length===1&&(s.sharedClientState.removeLocalQueryTarget(n.targetId),Hg(s.remoteStore,n.targetId))}async function FD(a,t,s){const n=QD(a);try{const i=await(function(l,p){const h=lr(l),k=Wr.now(),S=p.reduce(((O,Y)=>O.add(Y.key)),gr());let $,D;return h.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let Y=so(),W=gr();return h.ds.getEntries(O,S).next((N=>{Y=N,Y.forEach(((G,H)=>{H.isValidDocument()||(W=W.add(G))}))})).next((()=>h.localDocuments.getOverlayedDocuments(O,Y))).next((N=>{$=N;const G=[];for(const H of p){const U=o9(H,$.get(H.key).overlayedDocument);U!=null&&G.push(new oi(H.key,U,h2(U.value.mapValue),Da.exists(!0)))}return h.mutationQueue.addMutationBatch(O,k,G,p)})).next((N=>{D=N;const G=N.applyToLocalDocumentSet($,W);return h.documentOverlayCache.saveOverlays(O,N.batchId,G)}))})).then((()=>({batchId:D.batchId,changes:C2($)})))})(n.localStore,t);n.sharedClientState.addPendingMutation(i.batchId),(function(l,p,h){let k=l.Wa[l.currentUser.toKey()];k||(k=new sa(dr)),k=k.insert(p,h),l.Wa[l.currentUser.toKey()]=k})(n,i.batchId,s),await Yd(n,i.changes),await Jm(n.remoteStore)}catch(i){const u=Yg(i,"Failed to persist write");s.reject(u)}}async function c1(a,t){const s=lr(a);try{const n=await tD(s.localStore,t);t.targetChanges.forEach(((i,u)=>{const l=s.Ua.get(u);l&&(Sr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Ba=!0:i.modifiedDocuments.size>0?Sr(l.Ba):i.removedDocuments.size>0&&(Sr(l.Ba),l.Ba=!1))})),await Yd(s,n,t)}catch(n){await dc(n)}}function Fw(a,t,s){const n=lr(a);if(n.isPrimaryClient&&s===0||!n.isPrimaryClient&&s===1){const i=[];n.ka.forEach(((u,l)=>{const p=l.view.sa(t);p.snapshot&&i.push(p.snapshot)})),(function(l,p){const h=lr(l);h.onlineState=p;let k=!1;h.queries.forEach(((S,$)=>{for(const D of $.ta)D.sa(p)&&(k=!0)})),k&&Zg(h)})(n.eventManager,t),i.length&&n.La.p_(i),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function UD(a,t,s){const n=lr(a);n.sharedClientState.updateQueryState(t,"rejected",s);const i=n.Ua.get(t),u=i&&i.key;if(u){let l=new sa(er.comparator);l=l.insert(u,ja.newNoDocument(u,sr.min()));const p=gr().add(u),h=new Qm(sr.min(),new Map,new sa(dr),l,p);await c1(n,h),n.$a=n.$a.remove(u),n.Ua.delete(t),rb(n)}else await Ox(n.localStore,t,!1).then((()=>Ux(n,t,s))).catch(dc)}async function qD(a,t){const s=lr(a),n=t.batch.batchId;try{const i=await eD(s.localStore,t);u1(s,n,null),d1(s,n),s.sharedClientState.updateMutationState(n,"acknowledged"),await Yd(s,i)}catch(i){await dc(i)}}async function HD(a,t,s){const n=lr(a);try{const i=await(function(l,p){const h=lr(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(k=>{let S;return h.mutationQueue.lookupMutationBatch(k,p).next(($=>(Sr($!==null),S=$.keys(),h.mutationQueue.removeMutationBatch(k,$)))).next((()=>h.mutationQueue.performConsistencyCheck(k))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(k,S,p))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(k,S))).next((()=>h.localDocuments.getDocuments(k,S)))}))})(n.localStore,t);u1(n,t,s),d1(n,t),n.sharedClientState.updateMutationState(t,"rejected",s),await Yd(n,i)}catch(i){await dc(i)}}function d1(a,t){(a.Ga.get(t)||[]).forEach((s=>{s.resolve()})),a.Ga.delete(t)}function u1(a,t,s){const n=lr(a);let i=n.Wa[n.currentUser.toKey()];if(i){const u=i.get(t);u&&(s?u.reject(s):u.resolve(),i=i.remove(t)),n.Wa[n.currentUser.toKey()]=i}}function Ux(a,t,s=null){a.sharedClientState.removeLocalQueryTarget(t);for(const n of a.qa.get(t))a.ka.delete(n),s&&a.La.Ja(n,s);a.qa.delete(t),a.isPrimaryClient&&a.Ka.br(t).forEach((n=>{a.Ka.containsKey(n)||m1(a,n)}))}function m1(a,t){a.Qa.delete(t.path.canonicalString());const s=a.$a.get(t);s!==null&&(Hg(a.remoteStore,s),a.$a=a.$a.remove(t),a.Ua.delete(s),rb(a))}function Uw(a,t,s){for(const n of s)n instanceof o1?(a.Ka.addReference(n.key,t),WD(a,n)):n instanceof i1?(Rt(tb,"Document no longer in limbo: "+n.key),a.Ka.removeReference(n.key,t),a.Ka.containsKey(n.key)||m1(a,n.key)):ar()}function WD(a,t){const s=t.key,n=s.path.canonicalString();a.$a.get(s)||a.Qa.has(n)||(Rt(tb,"New document in limbo: "+s),a.Qa.add(n),rb(a))}function rb(a){for(;a.Qa.size>0&&a.$a.size<a.maxConcurrentLimboResolutions;){const t=a.Qa.values().next().value;a.Qa.delete(t);const s=new er(Hr.fromString(t)),n=a.za.next();a.Ua.set(n,new RD(s)),a.$a=a.$a.insert(s,n),e1(a.remoteStore,new Fo(wn(Um(s.path)),n,"TargetPurposeLimboResolution",Vm.ae))}}async function Yd(a,t,s){const n=lr(a),i=[],u=[],l=[];n.ka.isEmpty()||(n.ka.forEach(((p,h)=>{l.push(n.Ha(h,t,s).then((k=>{var S;if((k||s)&&n.isPrimaryClient){const $=k?!k.fromCache:(S=s?.targetChanges.get(h.targetId))===null||S===void 0?void 0:S.current;n.sharedClientState.updateQueryState(h.targetId,$?"current":"not-current")}if(k){i.push(k);const $=Fg.Yi(h.targetId,k);u.push($)}})))})),await Promise.all(l),n.La.p_(i),await(async function(h,k){const S=lr(h);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",($=>at.forEach(k,(D=>at.forEach(D.Hi,(O=>S.persistence.referenceDelegate.addReference($,D.targetId,O))).next((()=>at.forEach(D.Ji,(O=>S.persistence.referenceDelegate.removeReference($,D.targetId,O)))))))))}catch($){if(!uc($))throw $;Rt(Ug,"Failed to update sequence numbers: "+$)}for(const $ of k){const D=$.targetId;if(!$.fromCache){const O=S.Ts.get(D),Y=O.snapshotVersion,W=O.withLastLimboFreeSnapshotVersion(Y);S.Ts=S.Ts.insert(D,W)}}})(n.localStore,u))}async function GD(a,t){const s=lr(a);if(!s.currentUser.isEqual(t)){Rt(tb,"User change. New user:",t.toKey());const n=await X2(s.localStore,t);s.currentUser=t,(function(u,l){u.Ga.forEach((p=>{p.forEach((h=>{h.reject(new Dt(Ze.CANCELLED,l))}))})),u.Ga.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await Yd(s,n.Rs)}}function KD(a,t){const s=lr(a),n=s.Ua.get(t);if(n&&n.Ba)return gr().add(n.key);{let i=gr();const u=s.qa.get(t);if(!u)return i;for(const l of u){const p=s.ka.get(l);i=i.unionWith(p.view.Sa)}return i}}function p1(a){const t=lr(a);return t.remoteStore.remoteSyncer.applyRemoteEvent=c1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=KD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=UD.bind(null,t),t.La.p_=ID.bind(null,t.eventManager),t.La.Ja=DD.bind(null,t.eventManager),t}function QD(a){const t=lr(a);return t.remoteStore.remoteSyncer.applySuccessfulWrite=qD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=HD.bind(null,t),t}class um{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ym(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,s){return null}nu(t,s){return null}eu(t){return Z9(this.persistence,new Y9,t.initialUser,this.serializer)}Xa(t){return new Y2(Vg.ri,this.serializer)}Za(t){return new oD}async terminate(){var t,s;(t=this.gcScheduler)===null||t===void 0||t.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}um.provider={build:()=>new um};class YD extends um{constructor(t){super(),this.cacheSizeBytes=t}tu(t,s){Sr(this.persistence.referenceDelegate instanceof cm);const n=this.persistence.referenceDelegate.garbageCollector;return new R9(n,t.asyncQueue,s)}Xa(t){const s=this.cacheSizeBytes!==void 0?cs.withCacheSize(this.cacheSizeBytes):cs.DEFAULT;return new Y2((n=>cm.ri(n,s)),this.serializer)}}class qx{async initialize(t,s){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Fw(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=GD.bind(null,this.syncEngine),await TD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new ED})()}createDatastore(t){const s=Ym(t.databaseInfo.databaseId),n=(function(u){return new uD(u)})(t.databaseInfo);return(function(u,l,p,h){return new xD(u,l,p,h)})(t.authCredentials,t.appCheckCredentials,n,s)}createRemoteStore(t){return(function(n,i,u,l,p){return new bD(n,i,u,l,p)})(this.localStore,this.datastore,t.asyncQueue,(s=>Fw(this.syncEngine,s,0)),(function(){return Mw.D()?new Mw:new iD})())}createSyncEngine(t,s){return(function(i,u,l,p,h,k,S){const $=new MD(i,u,l,p,h,k);return S&&($.ja=!0),$})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,s)}async terminate(){var t,s;await(async function(i){const u=lr(i);Rt(qi,"RemoteStore shutting down."),u.W_.add(5),await Qd(u),u.z_.shutdown(),u.j_.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}qx.provider={build:()=>new qx};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):ao("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,s){setTimeout((()=>{this.muted||t(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Dt(Ze.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const s=await(async function(i,u){const l=lr(i),p={documents:u.map(($=>lm(l.serializer,$)))},h=await l.Co("BatchGetDocuments",l.serializer.databaseId,Hr.emptyPath(),p,u.length),k=new Map;h.forEach(($=>{const D=f9(l.serializer,$);k.set(D.key.toString(),D)}));const S=[];return u.forEach(($=>{const D=k.get($.toString());Sr(!!D),S.push(D)})),S})(this.datastore,t);return s.forEach((n=>this.recordVersion(n))),s}set(t,s){this.write(s.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,s){try{this.write(s.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(t.toString())}delete(t){this.write(new Km(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((s=>{t.delete(s.key.toString())})),t.forEach(((s,n)=>{const i=er.fromPath(n);this.mutations.push(new M2(i,this.precondition(i)))})),await(async function(n,i){const u=lr(n),l={writes:i.map((p=>H2(u.serializer,p)))};await u.So("Commit",u.serializer.databaseId,Hr.emptyPath(),l)})(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let s;if(t.isFoundDocument())s=t.version;else{if(!t.isNoDocument())throw ar();s=sr.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!s.isEqual(n))throw new Dt(Ze.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),s)}precondition(t){const s=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&s?s.isEqual(sr.min())?Da.exists(!1):Da.updateTime(s):Da.none()}preconditionForUpdate(t){const s=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&s){if(s.isEqual(sr.min()))throw new Dt(Ze.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Da.updateTime(s)}return Da.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(t,s,n,i,u){this.asyncQueue=t,this.datastore=s,this.options=n,this.updateFunction=i,this.deferred=u,this.Tu=n.maxAttempts,this.a_=new qg(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo((async()=>{const t=new XD(this.datastore),s=this.du(t);s&&s.then((n=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(n)})).catch((i=>{this.Au(i)}))))})).catch((n=>{this.Au(n)}))}))}du(t){try{const s=this.updateFunction(t);return!Wd(s)&&s.catch&&s.then?s:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(s){return this.deferred.reject(s),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Eu(),Promise.resolve())))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const s=t.code;return s==="aborted"||s==="failed-precondition"||s==="already-exists"||!z2(s)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="FirestoreClient";class ZD{constructor(t,s,n,i,u){this.authCredentials=t,this.appCheckCredentials=s,this.asyncQueue=n,this.databaseInfo=i,this.user=Va.UNAUTHENTICATED,this.clientId=s2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(n,(async l=>{Rt(ti,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(n,(l=>(Rt(ti,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(s){const n=Yg(s,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function tx(a,t){a.asyncQueue.verifyOperationInProgress(),Rt(ti,"Initializing OfflineComponentProvider");const s=a.configuration;await t.initialize(s);let n=s.initialUser;a.setCredentialChangeListener((async i=>{n.isEqual(i)||(await X2(t.localStore,i),n=i)})),t.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=t}async function qw(a,t){a.asyncQueue.verifyOperationInProgress();const s=await e_(a);Rt(ti,"Initializing OnlineComponentProvider"),await t.initialize(s,a.configuration),a.setCredentialChangeListener((n=>Bw(t.remoteStore,n))),a.setAppCheckTokenChangeListener(((n,i)=>Bw(t.remoteStore,i))),a._onlineComponents=t}async function e_(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){Rt(ti,"Using user provided OfflineComponentProvider");try{await tx(a,a._uninitializedComponentsProvider._offline)}catch(t){const s=t;if(!(function(i){return i.name==="FirebaseError"?i.code===Ze.FAILED_PRECONDITION||i.code===Ze.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(s))throw s;Xl("Error using user provided cache. Falling back to memory cache: "+s),await tx(a,new um)}}else Rt(ti,"Using default OfflineComponentProvider"),await tx(a,new YD(void 0));return a._offlineComponents}async function sb(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(Rt(ti,"Using user provided OnlineComponentProvider"),await qw(a,a._uninitializedComponentsProvider._online)):(Rt(ti,"Using default OnlineComponentProvider"),await qw(a,new qx))),a._onlineComponents}function t_(a){return sb(a).then((t=>t.syncEngine))}function r_(a){return sb(a).then((t=>t.datastore))}async function mm(a){const t=await sb(a),s=t.eventManager;return s.onListen=zD.bind(null,t.syncEngine),s.onUnlisten=OD.bind(null,t.syncEngine),s.onFirstRemoteStoreListen=BD.bind(null,t.syncEngine),s.onLastRemoteStoreUnlisten=VD.bind(null,t.syncEngine),s}function a_(a,t,s={}){const n=new vn;return a.asyncQueue.enqueueAndForget((async()=>(function(u,l,p,h,k){const S=new ab({next:D=>{S.su(),l.enqueueAndForget((()=>Jg(u,$)));const O=D.docs.has(p);!O&&D.fromCache?k.reject(new Dt(Ze.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&D.fromCache&&h&&h.source==="server"?k.reject(new Dt(Ze.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):k.resolve(D)},error:D=>k.reject(D)}),$=new eb(Um(p.path),S,{includeMetadataChanges:!0,Ta:!0});return Xg(u,$)})(await mm(a),a.asyncQueue,t,s,n))),n.promise}function s_(a,t,s={}){const n=new vn;return a.asyncQueue.enqueueAndForget((async()=>(function(u,l,p,h,k){const S=new ab({next:D=>{S.su(),l.enqueueAndForget((()=>Jg(u,$))),D.fromCache&&h.source==="server"?k.reject(new Dt(Ze.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):k.resolve(D)},error:D=>k.reject(D)}),$=new eb(p,S,{includeMetadataChanges:!0,Ta:!0});return Xg(u,$)})(await mm(a),a.asyncQueue,t,s,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(a){const t={};return a.timeoutSeconds!==void 0&&(t.timeoutSeconds=a.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(a,t,s){if(!s)throw new Dt(Ze.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${t}.`)}function n_(a,t,s,n){if(t===!0&&n===!0)throw new Dt(Ze.INVALID_ARGUMENT,`${a} and ${s} cannot be used together.`)}function Ww(a){if(!er.isDocumentKey(a))throw new Dt(Ze.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Gw(a){if(er.isDocumentKey(a))throw new Dt(Ze.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function Zm(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const t=(function(n){return n.constructor?n.constructor.name:null})(a);return t?`a custom ${t} object`:"an object"}}return typeof a=="function"?"a function":ar()}function Xa(a,t){if("_delegate"in a&&(a=a._delegate),!(a instanceof t)){if(t.name===a.constructor.name)throw new Dt(Ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Zm(a);throw new Dt(Ze.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${s}`)}}return a}function o_(a,t){if(t<=0)throw new Dt(Ze.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="firestore.googleapis.com",Kw=!0;class Qw{constructor(t){var s,n;if(t.host===void 0){if(t.ssl!==void 0)throw new Dt(Ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=g1,this.ssl=Kw}else this.host=t.host,this.ssl=(s=t.ssl)!==null&&s!==void 0?s:Kw;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Q2;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<_9)throw new Dt(Ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}n_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=h1((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Dt(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Dt(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Dt(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ep{constructor(t,s,n,i){this._authCredentials=t,this._appCheckCredentials=s,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Dt(Ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Dt(Ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qw(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new pI;switch(n.type){case"firstParty":return new bI(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Dt(Ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const n=Hw.get(s);n&&(Rt("ComponentProvider","Removing Datastore"),Hw.delete(s),n.terminate())})(this),Promise.resolve()}}function i_(a,t,s,n={}){var i;const u=(a=Xa(a,ep))._getSettings(),l=Object.assign(Object.assign({},u),{emulatorOptions:a._getEmulatorOptions()}),p=`${t}:${s}`;u.host!==g1&&u.host!==p&&Xl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},u),{host:p,ssl:!1,emulatorOptions:n});if(!Qo(h,l)&&(a._setSettings(h),n.mockUserToken)){let k,S;if(typeof n.mockUserToken=="string")k=n.mockUserToken,S=Va.MOCK_USER;else{k=fj(n.mockUserToken,(i=a._app)===null||i===void 0?void 0:i.options.projectId);const $=n.mockUserToken.sub||n.mockUserToken.user_id;if(!$)throw new Dt(Ze.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Va($)}a._authCredentials=new hI(new r2(k,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(t,s,n){this.converter=s,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new co(this.firestore,t,this._query)}}class _a{constructor(t,s,n){this.converter=s,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new _a(this.firestore,t,this._key)}}class Wo extends co{constructor(t,s,n){super(t,s,Um(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new _a(this.firestore,null,new er(t))}withConverter(t){return new Wo(this.firestore,t,this._path)}}function ae(a,t,...s){if(a=Kr(a),x1("collection","path",t),a instanceof ep){const n=Hr.fromString(t,...s);return Gw(n),new Wo(a,null,n)}{if(!(a instanceof _a||a instanceof Wo))throw new Dt(Ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=a._path.child(Hr.fromString(t,...s));return Gw(n),new Wo(a.firestore,null,n)}}function Z(a,t,...s){if(a=Kr(a),arguments.length===1&&(t=s2.newId()),x1("doc","path",t),a instanceof ep){const n=Hr.fromString(t,...s);return Ww(n),new _a(a,null,new er(n))}{if(!(a instanceof _a||a instanceof Wo))throw new Dt(Ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=a._path.child(Hr.fromString(t,...s));return Ww(n),new _a(a.firestore,a instanceof Wo?a.converter:null,new er(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="AsyncQueue";class Xw{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new qg(this,"async_queue_retry"),this.Su=()=>{const n=ex();n&&Rt(Yw,"Visibility state changed to "+n.visibilityState),this.a_.t_()},this.bu=t;const s=ex();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const s=ex();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise((()=>{}));const s=new vn;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(t().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Vu.push(t),this.Cu())))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!uc(t))throw t;Rt(Yw,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(t){const s=this.bu.then((()=>(this.pu=!0,t().catch((n=>{this.gu=n,this.pu=!1;const i=(function(l){let p=l.message||"";return l.stack&&(p=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),p})(n);throw ao("INTERNAL UNHANDLED ERROR: ",i),n})).then((n=>(this.pu=!1,n))))));return this.bu=s,s}enqueueAfterDelay(t,s,n){this.Du(),this.wu.indexOf(t)>-1&&(s=0);const i=Qg.createAndSchedule(this,t,s,n,(u=>this.Fu(u)));return this.fu.push(i),i}Du(){this.gu&&ar()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const s of this.fu)if(s.timerId===t)return!0;return!1}Ou(t){return this.Mu().then((()=>{this.fu.sort(((s,n)=>s.targetTimeMs-n.targetTimeMs));for(const s of this.fu)if(s.skipDelay(),t!=="all"&&s.timerId===t)break;return this.Mu()}))}Nu(t){this.wu.push(t)}Fu(t){const s=this.fu.indexOf(t);this.fu.splice(s,1)}}function Jw(a){return(function(s,n){if(typeof s!="object"||s===null)return!1;const i=s;for(const u of n)if(u in i&&typeof i[u]=="function")return!0;return!1})(a,["next","error","complete"])}class Pn extends ep{constructor(t,s,n,i){super(t,s,n,i),this.type="firestore",this._queue=new Xw,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Xw(t),this._firestoreClient=void 0,await t}}}function l_(a,t){const s=typeof a=="object"?a:Bm(),n=typeof a=="string"?a:am,i=si(s,"firestore").getImmediate({identifier:n});if(!i._initialized){const u=xj("firestore");u&&i_(i,...u)}return i}function Xd(a){if(a._terminated)throw new Dt(Ze.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||c_(a),a._firestoreClient}function c_(a){var t,s,n;const i=a._freezeSettings(),u=(function(p,h,k,S){return new DI(p,h,k,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,h1(S.experimentalLongPollingOptions),S.useFetchStreams)})(a._databaseId,((t=a._app)===null||t===void 0?void 0:t.options.appId)||"",a._persistenceKey,i);a._componentsProvider||!((s=i.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(a._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),a._firestoreClient=new ZD(a._authCredentials,a._appCheckCredentials,a._queue,u,a._componentsProvider&&(function(p){const h=p?._online.build();return{_offline:p?._offline.build(h),_online:h}})(a._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Hi(Aa.fromBase64String(t))}catch(s){throw new Dt(Ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(t){return new Hi(Aa.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(...t){for(let s=0;s<t.length;++s)if(t[s].length===0)throw new Dt(Ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ia(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(t,s){if(!isFinite(t)||t<-90||t>90)throw new Dt(Ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(s)||s<-180||s>180)throw new Dt(Ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=t,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return dr(this._lat,t._lat)||dr(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(t){this._values=(t||[]).map((s=>s))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(n,i){if(n.length!==i.length)return!1;for(let u=0;u<n.length;++u)if(n[u]!==i[u])return!1;return!0})(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=/^__.*__$/;class u_{constructor(t,s,n){this.data=t,this.fieldMask=s,this.fieldTransforms=n}toMutation(t,s){return this.fieldMask!==null?new oi(t,this.data,this.fieldMask,s,this.fieldTransforms):new Gd(t,this.data,s,this.fieldTransforms)}}class b1{constructor(t,s,n){this.data=t,this.fieldMask=s,this.fieldTransforms=n}toMutation(t,s){return new oi(t,this.data,this.fieldMask,s,this.fieldTransforms)}}function f1(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ar()}}class ib{constructor(t,s,n,i,u,l){this.settings=t,this.databaseId=s,this.serializer=n,this.ignoreUndefinedProperties=i,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new ib(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var s;const n=(s=this.path)===null||s===void 0?void 0:s.child(t),i=this.ku({path:n,Qu:!1});return i.$u(t),i}Uu(t){var s;const n=(s=this.path)===null||s===void 0?void 0:s.child(t),i=this.ku({path:n,Qu:!1});return i.Bu(),i}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return pm(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find((s=>t.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>t.isPrefixOf(s.field)))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(f1(this.Lu)&&d_.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class m_{constructor(t,s,n){this.databaseId=t,this.ignoreUndefinedProperties=s,this.serializer=n||Ym(t)}ju(t,s,n,i=!1){return new ib({Lu:t,methodName:s,zu:n,path:Ia.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eu(a){const t=a._freezeSettings(),s=Ym(a._databaseId);return new m_(a._databaseId,!!t.ignoreUndefinedProperties,s)}function lb(a,t,s,n,i,u={}){const l=a.ju(u.merge||u.mergeFields?2:0,t,s,i);ub("Data must be an object, but it was:",l,n);const p=w1(n,l);let h,k;if(u.merge)h=new js(l.fieldMask),k=l.fieldTransforms;else if(u.mergeFields){const S=[];for(const $ of u.mergeFields){const D=Hx(t,$,s);if(!l.contains(D))throw new Dt(Ze.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);N1(S,D)||S.push(D)}h=new js(S),k=l.fieldTransforms.filter(($=>h.covers($.field)))}else h=null,k=l.fieldTransforms;return new u_(new Qa(p),h,k)}class tp extends Zd{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof tp}}class cb extends Zd{_toFieldTransform(t){return new _2(t.path,new Td)}isEqual(t){return t instanceof cb}}class db extends Zd{constructor(t,s){super(t),this.Ju=s}_toFieldTransform(t){const s=new Id(t.serializer,T2(t.serializer,this.Ju));return new _2(t.path,s)}isEqual(t){return t instanceof db&&this.Ju===t.Ju}}function y1(a,t,s,n){const i=a.ju(1,t,s);ub("Data must be an object, but it was:",i,n);const u=[],l=Qa.empty();ni(n,((h,k)=>{const S=mb(t,h,s);k=Kr(k);const $=i.Uu(S);if(k instanceof tp)u.push(S);else{const D=tu(k,$);D!=null&&(u.push(S),l.set(S,D))}}));const p=new js(u);return new b1(l,p,i.fieldTransforms)}function v1(a,t,s,n,i,u){const l=a.ju(1,t,s),p=[Hx(t,n,s)],h=[i];if(u.length%2!=0)throw new Dt(Ze.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<u.length;D+=2)p.push(Hx(t,u[D])),h.push(u[D+1]);const k=[],S=Qa.empty();for(let D=p.length-1;D>=0;--D)if(!N1(k,p[D])){const O=p[D];let Y=h[D];Y=Kr(Y);const W=l.Uu(O);if(Y instanceof tp)k.push(O);else{const N=tu(Y,W);N!=null&&(k.push(O),S.set(O,N))}}const $=new js(k);return new b1(S,$,l.fieldTransforms)}function p_(a,t,s,n=!1){return tu(s,a.ju(n?4:3,t))}function tu(a,t){if(k1(a=Kr(a)))return ub("Unsupported field value:",t,a),w1(a,t);if(a instanceof Zd)return(function(n,i){if(!f1(i.Lu))throw i.Wu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${n._methodName}() is not currently supported inside arrays`);const u=n._toFieldTransform(i);u&&i.fieldTransforms.push(u)})(a,t),null;if(a===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return(function(n,i){const u=[];let l=0;for(const p of n){let h=tu(p,i.Ku(l));h==null&&(h={nullValue:"NULL_VALUE"}),u.push(h),l++}return{arrayValue:{values:u}}})(a,t)}return(function(n,i){if((n=Kr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return T2(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const u=Wr.fromDate(n);return{timestampValue:im(i.serializer,u)}}if(n instanceof Wr){const u=new Wr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:im(i.serializer,u)}}if(n instanceof nb)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Hi)return{bytesValue:V2(i.serializer,n._byteString)};if(n instanceof _a){const u=i.databaseId,l=n.firestore._databaseId;if(!l.isEqual(u))throw i.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Lg(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof ob)return(function(l,p){return{mapValue:{fields:{[m2]:{stringValue:p2},[sm]:{arrayValue:{values:l.toArray().map((k=>{if(typeof k!="number")throw p.Wu("VectorValues must only contain numeric values.");return Mg(p.serializer,k)}))}}}}}})(n,i);throw i.Wu(`Unsupported field value: ${Zm(n)}`)})(a,t)}function w1(a,t){const s={};return o2(a)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ni(a,((n,i)=>{const u=tu(i,t.qu(n));u!=null&&(s[n]=u)})),{mapValue:{fields:s}}}function k1(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof Wr||a instanceof nb||a instanceof Hi||a instanceof _a||a instanceof Zd||a instanceof ob)}function ub(a,t,s){if(!k1(s)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(s)){const n=Zm(s);throw n==="an object"?t.Wu(a+" a custom object"):t.Wu(a+" "+n)}}function Hx(a,t,s){if((t=Kr(t))instanceof Jd)return t._internalPath;if(typeof t=="string")return mb(a,t);throw pm("Field path arguments must be of type string or ",a,!1,void 0,s)}const h_=new RegExp("[~\\*/\\[\\]]");function mb(a,t,s){if(t.search(h_)>=0)throw pm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,s);try{return new Jd(...t.split("."))._internalPath}catch{throw pm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,s)}}function pm(a,t,s,n,i){const u=n&&!n.isEmpty(),l=i!==void 0;let p=`Function ${t}() called with invalid data`;s&&(p+=" (via `toFirestore()`)"),p+=". ";let h="";return(u||l)&&(h+=" (found",u&&(h+=` in field ${n}`),l&&(h+=` in document ${i}`),h+=")"),new Dt(Ze.INVALID_ARGUMENT,p+a+h)}function N1(a,t){return a.some((s=>s.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(t,s,n,i,u){this._firestore=t,this._userDataWriter=s,this._key=n,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new _a(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new x_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const s=this._document.data.field(rp("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s)}}}class x_ extends hm{data(){return super.data()}}function rp(a,t){return typeof t=="string"?mb(a,t):t instanceof Jd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new Dt(Ze.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pb{}class hb extends pb{}function Te(a,t,...s){let n=[];t instanceof pb&&n.push(t),n=n.concat(s),(function(u){const l=u.filter((h=>h instanceof xb)).length,p=u.filter((h=>h instanceof ap)).length;if(l>1||l>0&&p>0)throw new Dt(Ze.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)a=i._apply(a);return a}class ap extends hb{constructor(t,s,n){super(),this._field=t,this._op=s,this._value=n,this.type="where"}static _create(t,s,n){return new ap(t,s,n)}_apply(t){const s=this._parse(t);return C1(t._query,s),new co(t.firestore,t.converter,Mx(t._query,s))}_parse(t){const s=eu(t.firestore);return(function(u,l,p,h,k,S,$){let D;if(k.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new Dt(Ze.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){ek($,S);const Y=[];for(const W of $)Y.push(Zw(h,u,W));D={arrayValue:{values:Y}}}else D=Zw(h,u,$)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||ek($,S),D=p_(p,l,$,S==="in"||S==="not-in");return ha.create(k,S,D)})(t._query,"where",s,t.firestore._databaseId,this._field,this._op,this._value)}}function We(a,t,s){const n=t,i=rp("where",a);return ap._create(i,n,s)}class xb extends pb{constructor(t,s){super(),this.type=t,this._queryConstraints=s}static _create(t,s){return new xb(t,s)}_parse(t){const s=this._queryConstraints.map((n=>n._parse(t))).filter((n=>n.getFilters().length>0));return s.length===1?s[0]:nn.create(s,this._getOperator())}_apply(t){const s=this._parse(t);return s.getFilters().length===0?t:((function(i,u){let l=i;const p=u.getFlattenedFilters();for(const h of p)C1(l,h),l=Mx(l,h)})(t._query,s),new co(t.firestore,t.converter,Mx(t._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gb extends hb{constructor(t,s){super(),this._field=t,this._direction=s,this.type="orderBy"}static _create(t,s){return new gb(t,s)}_apply(t){const s=(function(i,u,l){if(i.startAt!==null)throw new Dt(Ze.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Dt(Ze.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $d(u,l)})(t._query,this._field,this._direction);return new co(t.firestore,t.converter,(function(i,u){const l=i.explicitOrderBy.concat([u]);return new mc(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(t._query,s))}}function Ar(a,t="asc"){const s=t,n=rp("orderBy",a);return gb._create(n,s)}class bb extends hb{constructor(t,s,n){super(),this.type=t,this._limit=s,this._limitType=n}static _create(t,s,n){return new bb(t,s,n)}_apply(t){return new co(t.firestore,t.converter,om(t._query,this._limit,this._limitType))}}function Rr(a){return o_("limit",a),bb._create("limit",a,"F")}function Zw(a,t,s){if(typeof(s=Kr(s))=="string"){if(s==="")throw new Dt(Ze.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w2(t)&&s.indexOf("/")!==-1)throw new Dt(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const n=t.path.child(Hr.fromString(s));if(!er.isDocumentKey(n))throw new Dt(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return hw(a,new er(n))}if(s instanceof _a)return hw(a,s._key);throw new Dt(Ze.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zm(s)}.`)}function ek(a,t){if(!Array.isArray(a)||a.length===0)throw new Dt(Ze.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function C1(a,t){const s=(function(i,u){for(const l of i)for(const p of l.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(a.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(s!==null)throw s===t.op?new Dt(Ze.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Dt(Ze.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${s.toString()}' filters.`)}class S1{convertValue(t,s="none"){switch(Zo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ca(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,s);case 5:return t.stringValue;case 6:return this.convertBytes(Jo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,s);case 11:return this.convertObject(t.mapValue,s);case 10:return this.convertVectorValue(t.mapValue);default:throw ar()}}convertObject(t,s){return this.convertObjectMap(t.fields,s)}convertObjectMap(t,s="none"){const n={};return ni(t,((i,u)=>{n[i]=this.convertValue(u,s)})),n}convertVectorValue(t){var s,n,i;const u=(i=(n=(s=t.fields)===null||s===void 0?void 0:s[sm].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map((l=>ca(l.doubleValue)));return new ob(u)}convertGeoPoint(t){return new nb(ca(t.latitude),ca(t.longitude))}convertArray(t,s){return(t.values||[]).map((n=>this.convertValue(n,s)))}convertServerTimestamp(t,s){switch(s){case"previous":const n=Fm(t);return n==null?null:this.convertValue(n,s);case"estimate":return this.convertTimestamp(jd(t));default:return null}}convertTimestamp(t){const s=Xo(t);return new Wr(s.seconds,s.nanos)}convertDocumentKey(t,s){const n=Hr.fromString(t);Sr(K2(n));const i=new Cd(n.get(1),n.get(3)),u=new er(n.popFirst(5));return i.isEqual(s)||ao(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(a,t,s){let n;return n=a?s&&(s.merge||s.mergeFields)?a.toFirestore(t,s):a.toFirestore(t):t,n}class g_ extends S1{constructor(t){super(),this.firestore=t}convertBytes(t){return new Hi(t)}convertReference(t){const s=this.convertDocumentKey(t,this.firestore._databaseId);return new _a(this.firestore,null,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(t,s){this.hasPendingWrites=t,this.fromCache=s}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class yb extends hm{constructor(t,s,n,i,u,l){super(t,s,n,i,l),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const s=new F0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,s={}){if(this._document){const n=this._document.data.field(rp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,s.serverTimestamps)}}}class F0 extends yb{data(t={}){return super.data(t)}}class $1{constructor(t,s,n,i){this._firestore=t,this._userDataWriter=s,this._snapshot=i,this.metadata=new Ol(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((s=>t.push(s))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,s){this._snapshot.docs.forEach((n=>{t.call(s,new F0(this._firestore,this._userDataWriter,n.key,n,new Ol(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const s=!!t.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Dt(Ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(i,u){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((p=>{const h=new F0(i._firestore,i._userDataWriter,p.doc.key,p.doc,new Ol(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter);return p.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const h=new F0(i._firestore,i._userDataWriter,p.doc.key,p.doc,new Ol(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter);let k=-1,S=-1;return p.type!==0&&(k=l.indexOf(p.doc.key),l=l.delete(p.doc.key)),p.type!==1&&(l=l.add(p.doc),S=l.indexOf(p.doc.key)),{type:b_(p.type),doc:h,oldIndex:k,newIndex:S}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function b_(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ar()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(a){a=Xa(a,_a);const t=Xa(a.firestore,Pn);return a_(Xd(t),a._key).then((s=>T1(t,a,s)))}class sp extends S1{constructor(t){super(),this.firestore=t}convertBytes(t){return new Hi(t)}convertReference(t){const s=this.convertDocumentKey(t,this.firestore._databaseId);return new _a(this.firestore,null,s)}}function _t(a){a=Xa(a,co);const t=Xa(a.firestore,Pn),s=Xd(t),n=new sp(t);return j1(a._query),s_(s,a._query).then((i=>new $1(t,n,a,i)))}function Go(a,t,s){a=Xa(a,_a);const n=Xa(a.firestore,Pn),i=fb(a.converter,t,s);return np(n,[lb(eu(n),"setDoc",a._key,i,a.converter!==null,s).toMutation(a._key,Da.none())])}function da(a,t,s,...n){a=Xa(a,_a);const i=Xa(a.firestore,Pn),u=eu(i);let l;return l=typeof(t=Kr(t))=="string"||t instanceof Jd?v1(u,"updateDoc",a._key,t,s,n):y1(u,"updateDoc",a._key,t),np(i,[l.toMutation(a._key,Da.exists(!0))])}function Bi(a){return np(Xa(a.firestore,Pn),[new Km(a._key,Da.none())])}function Ko(a,t){const s=Xa(a.firestore,Pn),n=Z(a),i=fb(a.converter,t);return np(s,[lb(eu(a.firestore),"addDoc",n._key,i,a.converter!==null,{}).toMutation(n._key,Da.exists(!1))]).then((()=>n))}function qe(a,...t){var s,n,i;a=Kr(a);let u={includeMetadataChanges:!1,source:"default"},l=0;typeof t[l]!="object"||Jw(t[l])||(u=t[l],l++);const p={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(Jw(t[l])){const $=t[l];t[l]=(s=$.next)===null||s===void 0?void 0:s.bind($),t[l+1]=(n=$.error)===null||n===void 0?void 0:n.bind($),t[l+2]=(i=$.complete)===null||i===void 0?void 0:i.bind($)}let h,k,S;if(a instanceof _a)k=Xa(a.firestore,Pn),S=Um(a._key.path),h={next:$=>{t[l]&&t[l](T1(k,a,$))},error:t[l+1],complete:t[l+2]};else{const $=Xa(a,co);k=Xa($.firestore,Pn),S=$._query;const D=new sp(k);h={next:O=>{t[l]&&t[l](new $1(k,D,$,O))},error:t[l+1],complete:t[l+2]},j1(a._query)}return(function(D,O,Y,W){const N=new ab(W),G=new eb(O,N,Y);return D.asyncQueue.enqueueAndForget((async()=>Xg(await mm(D),G))),()=>{N.su(),D.asyncQueue.enqueueAndForget((async()=>Jg(await mm(D),G)))}})(Xd(k),S,p,h)}function np(a,t){return(function(n,i){const u=new vn;return n.asyncQueue.enqueueAndForget((async()=>FD(await t_(n),i,u))),u.promise})(Xd(a),t)}function T1(a,t,s){const n=s.docs.get(t._key),i=new sp(a);return new yb(a,i,t._key,n,new Ol(s.hasPendingWrites,s.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_={maxAttempts:5};function od(a,t){if((a=Kr(a)).firestore!==t)throw new Dt(Ze.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(t,s){this._firestore=t,this._transaction=s,this._dataReader=eu(t)}get(t){const s=od(t,this._firestore),n=new g_(this._firestore);return this._transaction.lookup([s._key]).then((i=>{if(!i||i.length!==1)return ar();const u=i[0];if(u.isFoundDocument())return new hm(this._firestore,n,u.key,u,s.converter);if(u.isNoDocument())return new hm(this._firestore,n,s._key,null,s.converter);throw ar()}))}set(t,s,n){const i=od(t,this._firestore),u=fb(i.converter,s,n),l=lb(this._dataReader,"Transaction.set",i._key,u,i.converter!==null,n);return this._transaction.set(i._key,l),this}update(t,s,n,...i){const u=od(t,this._firestore);let l;return l=typeof(s=Kr(s))=="string"||s instanceof Jd?v1(this._dataReader,"Transaction.update",u._key,s,n,i):y1(this._dataReader,"Transaction.update",u._key,s),this._transaction.update(u._key,l),this}delete(t){const s=od(t,this._firestore);return this._transaction.delete(s._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_ extends y_{constructor(t,s){super(t,s),this._firestore=t}get(t){const s=od(t,this._firestore),n=new sp(this._firestore);return super.get(t).then((i=>new yb(this._firestore,n,s._key,i._document,new Ol(!1,!1),s.converter)))}}function Kt(a,t,s){a=Xa(a,Pn);const n=Object.assign(Object.assign({},f_),s);return(function(u){if(u.maxAttempts<1)throw new Dt(Ze.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(u,l,p){const h=new vn;return u.asyncQueue.enqueueAndForget((async()=>{const k=await r_(u);new JD(u.asyncQueue,k,p,l,h).Iu()})),h.promise})(Xd(a),(i=>t(new v_(a,i))),n)}function Ge(){return new cb("serverTimestamp")}function Gt(a){return new db("increment",a)}(function(t,s=!0){(function(i){cc=i})(Ji),sn(new Fs("firestore",((n,{instanceIdentifier:i,options:u})=>{const l=n.getProvider("app").getImmediate(),p=new Pn(new xI(n.getProvider("auth-internal")),new fI(l,n.getProvider("app-check-internal")),(function(k,S){if(!Object.prototype.hasOwnProperty.apply(k.options,["projectId"]))throw new Dt(Ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cd(k.options.projectId,S)})(l,i),l);return u=Object.assign({useFetchStreams:s},u),p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),us(rw,aw,t),us(rw,aw,"esm2017")})();function vb(a,t){var s={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&t.indexOf(n)<0&&(s[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(a);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(a,n[i])&&(s[n[i]]=a[n[i]]);return s}function P1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const w_=P1,E1=new Xi("auth","Firebase",P1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm=new zm("@firebase/auth");function k_(a,...t){xm.logLevel<=xr.WARN&&xm.warn(`Auth (${Ji}): ${a}`,...t)}function U0(a,...t){xm.logLevel<=xr.ERROR&&xm.error(`Auth (${Ji}): ${a}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(a,...t){throw wb(a,...t)}function kn(a,...t){return wb(a,...t)}function I1(a,t,s){const n=Object.assign(Object.assign({},w_()),{[t]:s});return new Xi("auth","Firebase",n).create(t,{appName:a.name})}function Zn(a){return I1(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wb(a,...t){if(typeof a!="string"){const s=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=a.name),a._errorFactory.create(s,...n)}return E1.create(a,...t)}function nr(a,t,...s){if(!a)throw wb(t,...s)}function Qn(a){const t="INTERNAL ASSERTION FAILED: "+a;throw U0(t),new Error(t)}function no(a,t){a||Qn(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.href)||""}function N_(){return tk()==="http:"||tk()==="https:"}function tk(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(N_()||yj()||"connection"in navigator)?navigator.onLine:!0}function C_(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(t,s){this.shortDelay=t,this.longDelay=s,no(s>t,"Short delay should be less than long delay!"),this.isMobile=wT()||jT()}get(){return j_()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(a,t){no(a.emulator,"Emulator should always be set here");const{url:s}=a.emulator;return t?`${s}${t.startsWith("/")?t.slice(1):t}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{static initialize(t,s,n){this.fetchImpl=t,s&&(this.headersImpl=s),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],T_=new ru(3e4,6e4);function uo(a,t){return a.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:a.tenantId}):t}async function ln(a,t,s,n,i={}){return _1(a,i,async()=>{let u={},l={};n&&(t==="GET"?l=n:u={body:JSON.stringify(n)});const p=Hd(Object.assign({key:a.config.apiKey},l)).slice(1),h=await a._getAdditionalHeaders();h["Content-Type"]="application/json",a.languageCode&&(h["X-Firebase-Locale"]=a.languageCode);const k=Object.assign({method:t,headers:h},u);return NT()||(k.referrerPolicy="no-referrer"),D1.fetch()(await A1(a,a.config.apiHost,s,p),k)})}async function _1(a,t,s){a._canInitEmulator=!1;const n=Object.assign(Object.assign({},S_),t);try{const i=new E_(a),u=await Promise.race([s(),i.promise]);i.clearNetworkTimeout();const l=await u.json();if("needConfirmation"in l)throw P0(a,"account-exists-with-different-credential",l);if(u.ok&&!("errorMessage"in l))return l;{const p=u.ok?l.errorMessage:l.error.message,[h,k]=p.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw P0(a,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw P0(a,"email-already-in-use",l);if(h==="USER_DISABLED")throw P0(a,"user-disabled",l);const S=n[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(k)throw I1(a,S,k);on(a,S)}}catch(i){if(i instanceof Us)throw i;on(a,"network-request-failed",{message:String(i)})}}async function au(a,t,s,n,i={}){const u=await ln(a,t,s,n,i);return"mfaPendingCredential"in u&&on(a,"multi-factor-auth-required",{_serverResponse:u}),u}async function A1(a,t,s,n){const i=`${t}${s}?${n}`,u=a,l=u.config.emulator?kb(a.config,i):`${a.config.apiScheme}://${i}`;return $_.includes(s)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(l).toString():l}function P_(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class E_{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((s,n)=>{this.timer=setTimeout(()=>n(kn(this.auth,"network-request-failed")),T_.get())})}}function P0(a,t,s){const n={appName:a.name};s.email&&(n.email=s.email),s.phoneNumber&&(n.phoneNumber=s.phoneNumber);const i=kn(a,t,n);return i.customData._tokenResponse=s,i}function rk(a){return a!==void 0&&a.enterprise!==void 0}class I_{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===t)return P_(s.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function D_(a,t){return ln(a,"GET","/v2/recaptchaConfig",uo(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __(a,t){return ln(a,"POST","/v1/accounts:delete",t)}async function gm(a,t){return ln(a,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(a){if(a)try{const t=new Date(Number(a));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function A_(a,t=!1){const s=Kr(a),n=await s.getIdToken(t),i=Nb(n);nr(i&&i.exp&&i.auth_time&&i.iat,s.auth,"internal-error");const u=typeof i.firebase=="object"?i.firebase:void 0,l=u?.sign_in_provider;return{claims:i,token:n,authTime:xd(rx(i.auth_time)),issuedAtTime:xd(rx(i.iat)),expirationTime:xd(rx(i.exp)),signInProvider:l||null,signInSecondFactor:u?.sign_in_second_factor||null}}function rx(a){return Number(a)*1e3}function Nb(a){const[t,s,n]=a.split(".");if(t===void 0||s===void 0||n===void 0)return U0("JWT malformed, contained fewer than 3 sections"),null;try{const i=pj(s);return i?JSON.parse(i):(U0("Failed to decode base64 JWT payload"),null)}catch(i){return U0("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ak(a){const t=Nb(a);return nr(t,"internal-error"),nr(typeof t.exp<"u","internal-error"),nr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wi(a,t,s=!1){if(s)return t;try{return await t}catch(n){throw n instanceof Us&&R_(n)&&a.auth.currentUser===a&&await a.auth.signOut(),n}}function R_({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var s;if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const s=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(t,s){this.createdAt=t,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=xd(this.lastLoginAt),this.creationTime=xd(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bm(a){var t;const s=a.auth,n=await a.getIdToken(),i=await Wi(a,gm(s,{idToken:n}));nr(i?.users.length,s,"internal-error");const u=i.users[0];a._notifyReloadListener(u);const l=!((t=u.providerUserInfo)===null||t===void 0)&&t.length?R1(u.providerUserInfo):[],p=B_(a.providerData,l),h=a.isAnonymous,k=!(a.email&&u.passwordHash)&&!p?.length,S=h?k:!1,$={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:p,metadata:new Gx(u.createdAt,u.lastLoginAt),isAnonymous:S};Object.assign(a,$)}async function z_(a){const t=Kr(a);await bm(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function B_(a,t){return[...a.filter(n=>!t.some(i=>i.providerId===n.providerId)),...t]}function R1(a){return a.map(t=>{var{providerId:s}=t,n=vb(t,["providerId"]);return{providerId:s,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L_(a,t){const s=await _1(a,{},async()=>{const n=Hd({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:u}=a.config,l=await A1(a,i,"/v1/token",`key=${u}`),p=await a._getAdditionalHeaders();return p["Content-Type"]="application/x-www-form-urlencoded",D1.fetch()(l,{method:"POST",headers:p,body:n})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function O_(a,t){return ln(a,"POST","/v2/accounts:revokeToken",uo(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){nr(t.idToken,"internal-error"),nr(typeof t.idToken<"u","internal-error"),nr(typeof t.refreshToken<"u","internal-error");const s="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):ak(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,s)}updateFromIdToken(t){nr(t.length!==0,"internal-error");const s=ak(t);this.updateTokensAndExpiration(t,null,s)}async getToken(t,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(nr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,s){const{accessToken:n,refreshToken:i,expiresIn:u}=await L_(t,s);this.updateTokensAndExpiration(n,i,Number(u))}updateTokensAndExpiration(t,s,n){this.refreshToken=s||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,s){const{refreshToken:n,accessToken:i,expirationTime:u}=s,l=new Kl;return n&&(nr(typeof n=="string","internal-error",{appName:t}),l.refreshToken=n),i&&(nr(typeof i=="string","internal-error",{appName:t}),l.accessToken=i),u&&(nr(typeof u=="number","internal-error",{appName:t}),l.expirationTime=u),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Kl,this.toJSON())}_performRefresh(){return Qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(a,t){nr(typeof a=="string"||typeof a>"u","internal-error",{appName:t})}class rn{constructor(t){var{uid:s,auth:n,stsTokenManager:i}=t,u=vb(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new M_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Gx(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(t){const s=await Wi(this,this.stsTokenManager.getToken(this.auth,t));return nr(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(t){return A_(this,t)}reload(){return z_(this)}_assign(t){this!==t&&(nr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(s=>Object.assign({},s)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const s=new rn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(t){nr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,s=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),s&&await bm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ks(this.auth.app))return Promise.reject(Zn(this.auth));const t=await this.getIdToken();return await Wi(this,__(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,s){var n,i,u,l,p,h,k,S;const $=(n=s.displayName)!==null&&n!==void 0?n:void 0,D=(i=s.email)!==null&&i!==void 0?i:void 0,O=(u=s.phoneNumber)!==null&&u!==void 0?u:void 0,Y=(l=s.photoURL)!==null&&l!==void 0?l:void 0,W=(p=s.tenantId)!==null&&p!==void 0?p:void 0,N=(h=s._redirectEventId)!==null&&h!==void 0?h:void 0,G=(k=s.createdAt)!==null&&k!==void 0?k:void 0,H=(S=s.lastLoginAt)!==null&&S!==void 0?S:void 0,{uid:U,emailVerified:ne,isAnonymous:oe,providerData:$e,stsTokenManager:K}=s;nr(U&&K,t,"internal-error");const V=Kl.fromJSON(this.name,K);nr(typeof U=="string",t,"internal-error"),Mo($,t.name),Mo(D,t.name),nr(typeof ne=="boolean",t,"internal-error"),nr(typeof oe=="boolean",t,"internal-error"),Mo(O,t.name),Mo(Y,t.name),Mo(W,t.name),Mo(N,t.name),Mo(G,t.name),Mo(H,t.name);const L=new rn({uid:U,auth:t,email:D,emailVerified:ne,displayName:$,isAnonymous:oe,photoURL:Y,phoneNumber:O,tenantId:W,stsTokenManager:V,createdAt:G,lastLoginAt:H});return $e&&Array.isArray($e)&&(L.providerData=$e.map(y=>Object.assign({},y))),N&&(L._redirectEventId=N),L}static async _fromIdTokenResponse(t,s,n=!1){const i=new Kl;i.updateFromServerResponse(s);const u=new rn({uid:s.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await bm(u),u}static async _fromGetAccountInfoResponse(t,s,n){const i=s.users[0];nr(i.localId!==void 0,"internal-error");const u=i.providerUserInfo!==void 0?R1(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!u?.length,p=new Kl;p.updateFromIdToken(n);const h=new rn({uid:i.localId,auth:t,stsTokenManager:p,isAnonymous:l}),k={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new Gx(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!u?.length};return Object.assign(h,k),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=new Map;function Yn(a){no(a instanceof Function,"Expected a class definition");let t=sk.get(a);return t?(no(t instanceof a,"Instance stored in cache mismatched with class"),t):(t=new a,sk.set(a,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,s){this.storage[t]=s}async _get(t){const s=this.storage[t];return s===void 0?null:s}async _remove(t){delete this.storage[t]}_addListener(t,s){}_removeListener(t,s){}}M1.type="NONE";const nk=M1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(a,t,s){return`firebase:${a}:${t}:${s}`}class Ql{constructor(t,s,n){this.persistence=t,this.auth=s,this.userKey=n;const{config:i,name:u}=this.auth;this.fullUserKey=q0(this.userKey,i.apiKey,u),this.fullPersistenceKey=q0("persistence",i.apiKey,u),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const s=await gm(this.auth,{idToken:t}).catch(()=>{});return s?rn._fromGetAccountInfoResponse(this.auth,s,t):null}return rn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,s,n="authUser"){if(!s.length)return new Ql(Yn(nk),t,n);const i=(await Promise.all(s.map(async k=>{if(await k._isAvailable())return k}))).filter(k=>k);let u=i[0]||Yn(nk);const l=q0(n,t.config.apiKey,t.name);let p=null;for(const k of s)try{const S=await k._get(l);if(S){let $;if(typeof S=="string"){const D=await gm(t,{idToken:S}).catch(()=>{});if(!D)break;$=await rn._fromGetAccountInfoResponse(t,D,S)}else $=rn._fromJSON(t,S);k!==u&&(p=$),u=k;break}}catch{}const h=i.filter(k=>k._shouldAllowMigration);return!u._shouldAllowMigration||!h.length?new Ql(u,t,n):(u=h[0],p&&await u._set(l,p.toJSON()),await Promise.all(s.map(async k=>{if(k!==u)try{await k._remove(l)}catch{}})),new Ql(u,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(a){const t=a.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(O1(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(z1(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(F1(t))return"Blackberry";if(U1(t))return"Webos";if(B1(t))return"Safari";if((t.includes("chrome/")||L1(t))&&!t.includes("edge/"))return"Chrome";if(V1(t))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=a.match(s);if(n?.length===2)return n[1]}return"Other"}function z1(a=Ua()){return/firefox\//i.test(a)}function B1(a=Ua()){const t=a.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function L1(a=Ua()){return/crios\//i.test(a)}function O1(a=Ua()){return/iemobile/i.test(a)}function V1(a=Ua()){return/android/i.test(a)}function F1(a=Ua()){return/blackberry/i.test(a)}function U1(a=Ua()){return/webos/i.test(a)}function jb(a=Ua()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function V_(a=Ua()){var t;return jb(a)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function F_(){return CT()&&document.documentMode===10}function q1(a=Ua()){return jb(a)||V1(a)||U1(a)||F1(a)||/windows phone/i.test(a)||O1(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(a,t=[]){let s;switch(a){case"Browser":s=ok(Ua());break;case"Worker":s=`${ok(Ua())}-${a}`;break;default:s=a}const n=t.length?t.join(","):"FirebaseCore-web";return`${s}/JsCore/${Ji}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,s){const n=u=>new Promise((l,p)=>{try{const h=t(u);l(h)}catch(h){p(h)}});n.onAbort=s,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const s=[];try{for(const n of this.queue)await n(t),n.onAbort&&s.push(n.onAbort)}catch(n){s.reverse();for(const i of s)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q_(a,t={}){return ln(a,"GET","/v2/passwordPolicy",uo(a,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=6;class W_{constructor(t){var s,n,i,u;const l=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=l.minPasswordLength)!==null&&s!==void 0?s:H_,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=t.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(u=t.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var s,n,i,u,l,p;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,h),this.validatePasswordCharacterOptions(t,h),h.isValid&&(h.isValid=(s=h.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(n=h.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(u=h.containsUppercaseLetter)!==null&&u!==void 0?u:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(p=h.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),h}validatePasswordLengthOptions(t,s){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(s.meetsMinPasswordLength=t.length>=n),i&&(s.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let n;for(let i=0;i<t.length;i++)n=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(s,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,s,n,i,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(t,s,n,i){this.app=t,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ik(this),this.idTokenSubscription=new ik(this),this.beforeStateQueue=new U_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=E1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,s){return s&&(this._popupRedirectResolver=Yn(s)),this._initializationPromise=this.queue(async()=>{var n,i,u;if(!this._deleted&&(this.persistenceManager=await Ql.create(this,t),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const s=await gm(this,{idToken:t}),n=await rn._fromGetAccountInfoResponse(this,s,t);await this.directlySetCurrentUser(n)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(ks(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(p,p))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,u=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,p=i?._redirectEventId,h=await this.tryRedirectSignIn(t);(!l||l===p)&&h?.user&&(i=h.user,u=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return nr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(t){try{await bm(t)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=C_()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ks(this.app))return Promise.reject(Zn(this));const s=t?Kr(t):null;return s&&nr(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(t,s=!1){if(!this._deleted)return t&&nr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ks(this.app)?Promise.reject(Zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ks(this.app)?Promise.reject(Zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yn(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await q_(this),s=new W_(t);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Xi("auth","Firebase",t())}onAuthStateChanged(t,s,n){return this.registerStateListener(this.authStateSubscription,t,s,n)}beforeAuthStateChanged(t,s){return this.beforeStateQueue.pushCallback(t,s)}onIdTokenChanged(t,s,n){return this.registerStateListener(this.idTokenSubscription,t,s,n)}authStateReady(){return new Promise((t,s)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},s)}})}async revokeAccessToken(t){if(this.currentUser){const s=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:s};this.tenantId!=null&&(n.tenantId=this.tenantId),await O_(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,s){const n=await this.getOrInitRedirectPersistenceManager(s);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const s=t&&Yn(t)||this._popupRedirectResolver;nr(s,this,"argument-error"),this.redirectPersistenceManager=await Ql.create(this,[Yn(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var s,n;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===t?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(s=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,s,n,i){if(this._deleted)return()=>{};const u=typeof s=="function"?s:s.next.bind(s);let l=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(nr(p,this,"internal-error"),p.then(()=>{l||u(this.currentUser)}),typeof s=="function"){const h=t.addObserver(s,n,i);return()=>{l=!0,h()}}else{const h=t.addObserver(s);return()=>{l=!0,h()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return nr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=H1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const n=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());n&&(s["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(s["X-Firebase-AppCheck"]=i),s}async _getAppCheckToken(){var t;if(ks(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const s=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return s?.error&&k_(`Error while retrieving App Check token: ${s.error}`),s?.token}}function ii(a){return Kr(a)}class ik{constructor(t){this.auth=t,this.observer=null,this.addObserver=DT(s=>this.observer=s)}get next(){return nr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let op={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function K_(a){op=a}function W1(a){return op.loadJS(a)}function Q_(){return op.recaptchaEnterpriseScript}function Y_(){return op.gapiScript}function X_(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class J_{constructor(){this.enterprise=new Z_}ready(t){t()}execute(t,s){return Promise.resolve("token")}render(t,s){return""}}class Z_{ready(t){t()}execute(t,s){return Promise.resolve("token")}render(t,s){return""}}const e8="recaptcha-enterprise",G1="NO_RECAPTCHA";class t8{constructor(t){this.type=e8,this.auth=ii(t)}async verify(t="verify",s=!1){async function n(u){if(!s){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(l,p)=>{D_(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const k=new I_(h);return u.tenantId==null?u._agentRecaptchaConfig=k:u._tenantRecaptchaConfigs[u.tenantId]=k,l(k.siteKey)}}).catch(h=>{p(h)})})}function i(u,l,p){const h=window.grecaptcha;rk(h)?h.enterprise.ready(()=>{h.enterprise.execute(u,{action:t}).then(k=>{l(k)}).catch(()=>{l(G1)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new J_().execute("siteKey",{action:"verify"}):new Promise((u,l)=>{n(this.auth).then(p=>{if(!s&&rk(window.grecaptcha))i(p,u,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=Q_();h.length!==0&&(h+=p),W1(h).then(()=>{i(p,u,l)}).catch(k=>{l(k)})}}).catch(p=>{l(p)})})}}async function lk(a,t,s,n=!1,i=!1){const u=new t8(a);let l;if(i)l=G1;else try{l=await u.verify(s)}catch{l=await u.verify(s,!0)}const p=Object.assign({},t);if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const h=p.phoneEnrollmentInfo.phoneNumber,k=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:k,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const h=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return n?Object.assign(p,{captchaResp:l}):Object.assign(p,{captchaResponse:l}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function fm(a,t,s,n,i){var u;if(!((u=a._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await lk(a,t,s,s==="getOobCode");return n(a,l)}else return n(a,t).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await lk(a,t,s,s==="getOobCode");return n(a,p)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(a,t){const s=si(a,"auth");if(s.isInitialized()){const i=s.getImmediate(),u=s.getOptions();if(Qo(u,t??{}))return i;on(i,"already-initialized")}return s.initialize({options:t})}function a8(a,t){const s=t?.persistence||[],n=(Array.isArray(s)?s:[s]).map(Yn);t?.errorMap&&a._updateErrorMap(t.errorMap),a._initializeWithPersistence(n,t?.popupRedirectResolver)}function s8(a,t,s){const n=ii(a);nr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const i=!1,u=K1(t),{host:l,port:p}=n8(t),h=p===null?"":`:${p}`,k={url:`${u}//${l}${h}/`},S=Object.freeze({host:l,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){nr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),nr(Qo(k,n.config.emulator)&&Qo(S,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=k,n.emulatorConfig=S,n.settings.appVerificationDisabledForTesting=!0,o8()}function K1(a){const t=a.indexOf(":");return t<0?"":a.substr(0,t+1)}function n8(a){const t=K1(a),s=/(\/\/)?([^?#/]+)/.exec(a.substr(t.length));if(!s)return{host:"",port:null};const n=s[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const u=i[1];return{host:u,port:ck(n.substr(u.length+1))}}else{const[u,l]=n.split(":");return{host:u,port:ck(l)}}}function ck(a){if(!a)return null;const t=Number(a);return isNaN(t)?null:t}function o8(){function a(){const t=document.createElement("p"),s=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(t,s){this.providerId=t,this.signInMethod=s}toJSON(){return Qn("not implemented")}_getIdTokenResponse(t){return Qn("not implemented")}_linkToIdToken(t,s){return Qn("not implemented")}_getReauthenticationResolver(t){return Qn("not implemented")}}async function i8(a,t){return ln(a,"POST","/v1/accounts:update",t)}async function l8(a,t){return ln(a,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c8(a,t){return au(a,"POST","/v1/accounts:signInWithPassword",uo(a,t))}async function d8(a,t){return ln(a,"POST","/v1/accounts:sendOobCode",uo(a,t))}async function u8(a,t){return d8(a,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m8(a,t){return au(a,"POST","/v1/accounts:signInWithEmailLink",uo(a,t))}async function p8(a,t){return au(a,"POST","/v1/accounts:signInWithEmailLink",uo(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends Cb{constructor(t,s,n,i=null){super("password",n),this._email=t,this._password=s,this._tenantId=i}static _fromEmailAndPassword(t,s){return new Dd(t,s,"password")}static _fromEmailAndCode(t,s,n=null){return new Dd(t,s,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const s=typeof t=="string"?JSON.parse(t):t;if(s?.email&&s?.password){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fm(t,s,"signInWithPassword",c8);case"emailLink":return m8(t,{email:this._email,oobCode:this._password});default:on(t,"internal-error")}}async _linkToIdToken(t,s){switch(this.signInMethod){case"password":const n={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fm(t,n,"signUpPassword",l8);case"emailLink":return p8(t,{idToken:s,email:this._email,oobCode:this._password});default:on(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yl(a,t){return au(a,"POST","/v1/accounts:signInWithIdp",uo(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8="http://localhost";class Gi extends Cb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const s=new Gi(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(s.idToken=t.idToken),t.accessToken&&(s.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(s.nonce=t.nonce),t.pendingToken&&(s.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(s.accessToken=t.oauthToken,s.secret=t.oauthTokenSecret):on("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const s=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:i}=s,u=vb(s,["providerId","signInMethod"]);if(!n||!i)return null;const l=new Gi(n,i);return l.idToken=u.idToken||void 0,l.accessToken=u.accessToken||void 0,l.secret=u.secret,l.nonce=u.nonce,l.pendingToken=u.pendingToken||null,l}_getIdTokenResponse(t){const s=this.buildRequest();return Yl(t,s)}_linkToIdToken(t,s){const n=this.buildRequest();return n.idToken=s,Yl(t,n)}_getReauthenticationResolver(t){const s=this.buildRequest();return s.autoCreate=!1,Yl(t,s)}buildRequest(){const t={requestUri:h8,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),t.postBody=Hd(s)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x8(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function g8(a){const t=td(rd(a)).link,s=t?td(rd(t)).deep_link_id:null,n=td(rd(a)).deep_link_id;return(n?td(rd(n)).link:null)||n||s||t||a}class Sb{constructor(t){var s,n,i,u,l,p;const h=td(rd(t)),k=(s=h.apiKey)!==null&&s!==void 0?s:null,S=(n=h.oobCode)!==null&&n!==void 0?n:null,$=x8((i=h.mode)!==null&&i!==void 0?i:null);nr(k&&S&&$,"argument-error"),this.apiKey=k,this.operation=$,this.code=S,this.continueUrl=(u=h.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(l=h.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(p=h.tenantId)!==null&&p!==void 0?p:null}static parseLink(t){const s=g8(t);try{return new Sb(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(){this.providerId=hc.PROVIDER_ID}static credential(t,s){return Dd._fromEmailAndPassword(t,s)}static credentialWithLink(t,s){const n=Sb.parseLink(s);return nr(n,"argument-error"),Dd._fromEmailAndCode(t,n.code,n.tenantId)}}hc.PROVIDER_ID="password";hc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends Q1{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo extends su{constructor(){super("facebook.com")}static credential(t){return Gi._fromParams({providerId:Bo.PROVIDER_ID,signInMethod:Bo.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Bo.credentialFromTaggedObject(t)}static credentialFromError(t){return Bo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Bo.credential(t.oauthAccessToken)}catch{return null}}}Bo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends su{constructor(){super("google.com"),this.addScope("profile")}static credential(t,s){return Gi._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:s})}static credentialFromResult(t){return Lo.credentialFromTaggedObject(t)}static credentialFromError(t){return Lo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:s,oauthAccessToken:n}=t;if(!s&&!n)return null;try{return Lo.credential(s,n)}catch{return null}}}Lo.GOOGLE_SIGN_IN_METHOD="google.com";Lo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends su{constructor(){super("github.com")}static credential(t){return Gi._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Oo.credentialFromTaggedObject(t)}static credentialFromError(t){return Oo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Oo.credential(t.oauthAccessToken)}catch{return null}}}Oo.GITHUB_SIGN_IN_METHOD="github.com";Oo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends su{constructor(){super("twitter.com")}static credential(t,s){return Gi._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:s})}static credentialFromResult(t){return Vo.credentialFromTaggedObject(t)}static credentialFromError(t){return Vo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:s,oauthTokenSecret:n}=t;if(!s||!n)return null;try{return Vo.credential(s,n)}catch{return null}}}Vo.TWITTER_SIGN_IN_METHOD="twitter.com";Vo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b8(a,t){return au(a,"POST","/v1/accounts:signUp",uo(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,s,n,i=!1){const u=await rn._fromIdTokenResponse(t,n,i),l=dk(n);return new Ki({user:u,providerId:l,_tokenResponse:n,operationType:s})}static async _forOperation(t,s,n){await t._updateTokensIfNecessary(n,!0);const i=dk(n);return new Ki({user:t,providerId:i,_tokenResponse:n,operationType:s})}}function dk(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym extends Us{constructor(t,s,n,i){var u;super(s.code,s.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,ym.prototype),this.customData={appName:t.name,tenantId:(u=t.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:s.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,s,n,i){return new ym(t,s,n,i)}}function Y1(a,t,s,n){return(t==="reauthenticate"?s._getReauthenticationResolver(a):s._getIdTokenResponse(a)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?ym._fromErrorAndOperation(a,u,t,n):u})}async function f8(a,t,s=!1){const n=await Wi(a,t._linkToIdToken(a.auth,await a.getIdToken()),s);return Ki._forOperation(a,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y8(a,t,s=!1){const{auth:n}=a;if(ks(n.app))return Promise.reject(Zn(n));const i="reauthenticate";try{const u=await Wi(a,Y1(n,i,t,a),s);nr(u.idToken,n,"internal-error");const l=Nb(u.idToken);nr(l,n,"internal-error");const{sub:p}=l;return nr(a.uid===p,n,"user-mismatch"),Ki._forOperation(a,i,u)}catch(u){throw u?.code==="auth/user-not-found"&&on(n,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X1(a,t,s=!1){if(ks(a.app))return Promise.reject(Zn(a));const n="signIn",i=await Y1(a,n,t),u=await Ki._fromIdTokenResponse(a,n,i);return s||await a._updateCurrentUser(u.user),u}async function v8(a,t){return X1(ii(a),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(a){const t=ii(a);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function w8(a,t,s){const n=ii(a);await fm(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",u8)}async function k8(a,t,s){if(ks(a.app))return Promise.reject(Zn(a));const n=ii(a),l=await fm(n,{returnSecureToken:!0,email:t,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",b8).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&J1(a),h}),p=await Ki._fromIdTokenResponse(n,"signIn",l);return await n._updateCurrentUser(p.user),p}function N8(a,t,s){return ks(a.app)?Promise.reject(Zn(a)):v8(Kr(a),hc.credential(t,s)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&J1(a),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j8(a,t){return ln(a,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C8(a,{displayName:t,photoURL:s}){if(t===void 0&&s===void 0)return;const n=Kr(a),u={idToken:await n.getIdToken(),displayName:t,photoUrl:s,returnSecureToken:!0},l=await Wi(n,j8(n.auth,u));n.displayName=l.displayName||null,n.photoURL=l.photoUrl||null;const p=n.providerData.find(({providerId:h})=>h==="password");p&&(p.displayName=n.displayName,p.photoURL=n.photoURL),await n._updateTokensIfNecessary(l)}function $b(a,t){return S8(Kr(a),null,t)}async function S8(a,t,s){const{auth:n}=a,u={idToken:await a.getIdToken(),returnSecureToken:!0};s&&(u.password=s);const l=await Wi(a,i8(n,u));await a._updateTokensIfNecessary(l,!0)}function $8(a,t,s,n){return Kr(a).onIdTokenChanged(t,s,n)}function T8(a,t,s){return Kr(a).beforeAuthStateChanged(t,s)}function hr(a,t,s,n){return Kr(a).onAuthStateChanged(t,s,n)}function Pr(a){return Kr(a).signOut()}const vm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(t,s){this.storageRetriever=t,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(vm,"1"),this.storage.removeItem(vm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,s){return this.storage.setItem(t,JSON.stringify(s)),Promise.resolve()}_get(t){const s=this.storage.getItem(t);return Promise.resolve(s?JSON.parse(s):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8=1e3,E8=10;class e5 extends Z1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,s)=>this.onStorageEvent(t,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=q1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const s of Object.keys(this.listeners)){const n=this.storage.getItem(s),i=this.localCache[s];n!==i&&t(s,i,n)}}onStorageEvent(t,s=!1){if(!t.key){this.forAllChangedKeys((l,p,h)=>{this.notifyListeners(l,h)});return}const n=t.key;s?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(n);!s&&this.localCache[n]===l||this.notifyListeners(n,l)},u=this.storage.getItem(n);F_()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,E8):i()}notifyListeners(t,s){this.localCache[t]=s;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,s,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:s,newValue:n}),!0)})},P8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(s)}_removeListener(t,s){this.listeners[t]&&(this.listeners[t].delete(s),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,s){await super._set(t,s),this.localCache[t]=JSON.stringify(s)}async _get(t){const s=await super._get(t);return this.localCache[t]=JSON.stringify(s),s}async _remove(t){await super._remove(t),delete this.localCache[t]}}e5.type="LOCAL";const I8=e5;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5 extends Z1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,s){}_removeListener(t,s){}}t5.type="SESSION";const r5=t5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D8(a){return Promise.all(a.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const s=this.receivers.find(i=>i.isListeningto(t));if(s)return s;const n=new ip(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const s=t,{eventId:n,eventType:i,data:u}=s.data,l=this.handlersMap[i];if(!l?.size)return;s.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const p=Array.from(l).map(async k=>k(s.origin,u)),h=await D8(p);s.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:h})}_subscribe(t,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(s)}_unsubscribe(t,s){this.handlersMap[t]&&s&&this.handlersMap[t].delete(s),(!s||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ip.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(a="",t=10){let s="";for(let n=0;n<t;n++)s+=Math.floor(Math.random()*10);return a+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,s,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let u,l;return new Promise((p,h)=>{const k=Tb("",20);i.port1.start();const S=setTimeout(()=>{h(new Error("unsupported_event"))},n);l={messageChannel:i,onMessage($){const D=$;if(D.data.eventId===k)switch(D.data.status){case"ack":clearTimeout(S),u=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(D.data.response);break;default:clearTimeout(S),clearTimeout(u),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:t,eventId:k,data:s},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return window}function A8(a){Nn().location.href=a}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}async function R8(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function M8(){var a;return((a=navigator?.serviceWorker)===null||a===void 0?void 0:a.controller)||null}function z8(){return a5()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5="firebaseLocalStorageDb",B8=1,wm="firebaseLocalStorage",n5="fbase_key";class nu{constructor(t){this.request=t}toPromise(){return new Promise((t,s)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function lp(a,t){return a.transaction([wm],t?"readwrite":"readonly").objectStore(wm)}function L8(){const a=indexedDB.deleteDatabase(s5);return new nu(a).toPromise()}function Kx(){const a=indexedDB.open(s5,B8);return new Promise((t,s)=>{a.addEventListener("error",()=>{s(a.error)}),a.addEventListener("upgradeneeded",()=>{const n=a.result;try{n.createObjectStore(wm,{keyPath:n5})}catch(i){s(i)}}),a.addEventListener("success",async()=>{const n=a.result;n.objectStoreNames.contains(wm)?t(n):(n.close(),await L8(),t(await Kx()))})})}async function uk(a,t,s){const n=lp(a,!0).put({[n5]:t,value:s});return new nu(n).toPromise()}async function O8(a,t){const s=lp(a,!1).get(t),n=await new nu(s).toPromise();return n===void 0?null:n.value}function mk(a,t){const s=lp(a,!0).delete(t);return new nu(s).toPromise()}const V8=800,F8=3;class o5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kx(),this.db)}async _withRetries(t){let s=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(s++>F8)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return a5()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ip._getInstance(z8()),this.receiver._subscribe("keyChanged",async(t,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(t,s)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await R8(),!this.activeServiceWorker)return;this.sender=new _8(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((t=n[0])===null||t===void 0)&&t.fulfilled&&!((s=n[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||M8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Kx();return await uk(t,vm,"1"),await mk(t,vm),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,s){return this._withPendingWrite(async()=>(await this._withRetries(n=>uk(n,t,s)),this.localCache[t]=s,this.notifyServiceWorker(t)))}async _get(t){const s=await this._withRetries(n=>O8(n,t));return this.localCache[t]=s,s}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(s=>mk(s,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const u=lp(i,!1).getAll();return new nu(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const s=[],n=new Set;if(t.length!==0)for(const{fbase_key:i,value:u}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(u)&&(this.notifyListeners(i,u),s.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),s.push(i));return s}notifyListeners(t,s){this.localCache[t]=s;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),V8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(s)}_removeListener(t,s){this.listeners[t]&&(this.listeners[t].delete(s),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}o5.type="LOCAL";const U8=o5;new ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q8(a,t){return t?Yn(t):(nr(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb extends Cb{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Yl(t,this._buildIdpRequest())}_linkToIdToken(t,s){return Yl(t,this._buildIdpRequest(s))}_getReauthenticationResolver(t){return Yl(t,this._buildIdpRequest())}_buildIdpRequest(t){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(s.idToken=t),s}}function H8(a){return X1(a.auth,new Pb(a),a.bypassAuthState)}function W8(a){const{auth:t,user:s}=a;return nr(s,t,"internal-error"),y8(s,new Pb(a),a.bypassAuthState)}async function G8(a){const{auth:t,user:s}=a;return nr(s,t,"internal-error"),f8(s,new Pb(a),a.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(t,s,n,i,u=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(t,s)=>{this.pendingPromise={resolve:t,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:s,sessionId:n,postBody:i,tenantId:u,error:l,type:p}=t;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:s,sessionId:n,tenantId:u||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(h))}catch(k){this.reject(k)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return H8;case"linkViaPopup":case"linkViaRedirect":return G8;case"reauthViaPopup":case"reauthViaRedirect":return W8;default:on(this.auth,"internal-error")}}resolve(t){no(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){no(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8=new ru(2e3,1e4);class Vl extends i5{constructor(t,s,n,i,u){super(t,s,i,u),this.provider=n,this.authWindow=null,this.pollId=null,Vl.currentPopupAction&&Vl.currentPopupAction.cancel(),Vl.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return nr(t,this.auth,"internal-error"),t}async onExecution(){no(this.filter.length===1,"Popup operations only handle one event");const t=Tb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vl.currentPopupAction=null}pollUserCancellation(){const t=()=>{var s,n;if(!((n=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,K8.get())};t()}}Vl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q8="pendingRedirect",H0=new Map;class Y8 extends i5{constructor(t,s,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,n),this.eventId=null}async execute(){let t=H0.get(this.auth._key());if(!t){try{const n=await X8(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(s){t=()=>Promise.reject(s)}H0.set(this.auth._key(),t)}return this.bypassAuthState||H0.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const s=await this.auth._redirectUserForId(t.eventId);if(s)return this.user=s,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function X8(a,t){const s=eA(t),n=Z8(a);if(!await n._isAvailable())return!1;const i=await n._get(s)==="true";return await n._remove(s),i}function J8(a,t){H0.set(a._key(),t)}function Z8(a){return Yn(a._redirectPersistence)}function eA(a){return q0(Q8,a.config.apiKey,a.name)}async function tA(a,t,s=!1){if(ks(a.app))return Promise.reject(Zn(a));const n=ii(a),i=q8(n,t),l=await new Y8(n,i,s).execute();return l&&!s&&(delete l.user._redirectEventId,await n._persistUserIfCurrent(l.user),await n._setRedirectUser(null,t)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=600*1e3;class aA{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let s=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(s=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!sA(t)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=t,s=!0)),s}sendToConsumer(t,s){var n;if(t.error&&!l5(t)){const i=((n=t.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";s.onError(kn(this.auth,i))}else s.onAuthEvent(t)}isEventForConsumer(t,s){const n=s.eventId===null||!!t.eventId&&t.eventId===s.eventId;return s.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=rA&&this.cachedEventUids.clear(),this.cachedEventUids.has(pk(t))}saveEventToCache(t){this.cachedEventUids.add(pk(t)),this.lastProcessedEventTime=Date.now()}}function pk(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(t=>t).join("-")}function l5({type:a,error:t}){return a==="unknown"&&t?.code==="auth/no-auth-event"}function sA(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return l5(a);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nA(a,t={}){return ln(a,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iA=/^https?/;async function lA(a){if(a.config.emulator)return;const{authorizedDomains:t}=await nA(a);for(const s of t)try{if(cA(s))return}catch{}on(a,"unauthorized-domain")}function cA(a){const t=Wx(),{protocol:s,hostname:n}=new URL(t);if(a.startsWith("chrome-extension://")){const l=new URL(a);return l.hostname===""&&n===""?s==="chrome-extension:"&&a.replace("chrome-extension://","")===t.replace("chrome-extension://",""):s==="chrome-extension:"&&l.hostname===n}if(!iA.test(s))return!1;if(oA.test(a))return n===a;const i=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=new ru(3e4,6e4);function hk(){const a=Nn().___jsl;if(a?.H){for(const t of Object.keys(a.H))if(a.H[t].r=a.H[t].r||[],a.H[t].L=a.H[t].L||[],a.H[t].r=[...a.H[t].L],a.CP)for(let s=0;s<a.CP.length;s++)a.CP[s]=null}}function uA(a){return new Promise((t,s)=>{var n,i,u;function l(){hk(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{hk(),s(kn(a,"network-request-failed"))},timeout:dA.get()})}if(!((i=(n=Nn().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((u=Nn().gapi)===null||u===void 0)&&u.load)l();else{const p=X_("iframefcb");return Nn()[p]=()=>{gapi.load?l():s(kn(a,"network-request-failed"))},W1(`${Y_()}?onload=${p}`).catch(h=>s(h))}}).catch(t=>{throw W0=null,t})}let W0=null;function mA(a){return W0=W0||uA(a),W0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=new ru(5e3,15e3),hA="__/auth/iframe",xA="emulator/auth/iframe",gA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fA(a){const t=a.config;nr(t.authDomain,a,"auth-domain-config-required");const s=t.emulator?kb(t,xA):`https://${a.config.authDomain}/${hA}`,n={apiKey:t.apiKey,appName:a.name,v:Ji},i=bA.get(a.config.apiHost);i&&(n.eid=i);const u=a._getFrameworks();return u.length&&(n.fw=u.join(",")),`${s}?${Hd(n).slice(1)}`}async function yA(a){const t=await mA(a),s=Nn().gapi;return nr(s,a,"internal-error"),t.open({where:document.body,url:fA(a),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gA,dontclear:!0},n=>new Promise(async(i,u)=>{await n.restyle({setHideOnLeave:!1});const l=kn(a,"network-request-failed"),p=Nn().setTimeout(()=>{u(l)},pA.get());function h(){Nn().clearTimeout(p),i(n)}n.ping(h).then(h,()=>{u(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wA=500,kA=600,NA="_blank",jA="http://localhost";class xk{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CA(a,t,s,n=wA,i=kA){const u=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-n)/2,0).toString();let p="";const h=Object.assign(Object.assign({},vA),{width:n.toString(),height:i.toString(),top:u,left:l}),k=Ua().toLowerCase();s&&(p=L1(k)?NA:s),z1(k)&&(t=t||jA,h.scrollbars="yes");const S=Object.entries(h).reduce((D,[O,Y])=>`${D}${O}=${Y},`,"");if(V_(k)&&p!=="_self")return SA(t||"",p),new xk(null);const $=window.open(t||"",p,S);nr($,a,"popup-blocked");try{$.focus()}catch{}return new xk($)}function SA(a,t){const s=document.createElement("a");s.href=a,s.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="__/auth/handler",TA="emulator/auth/handler",PA=encodeURIComponent("fac");async function gk(a,t,s,n,i,u){nr(a.config.authDomain,a,"auth-domain-config-required"),nr(a.config.apiKey,a,"invalid-api-key");const l={apiKey:a.config.apiKey,appName:a.name,authType:s,redirectUrl:n,v:Ji,eventId:i};if(t instanceof Q1){t.setDefaultLanguage(a.languageCode),l.providerId=t.providerId||"",IT(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[S,$]of Object.entries({}))l[S]=$}if(t instanceof su){const S=t.getScopes().filter($=>$!=="");S.length>0&&(l.scopes=S.join(","))}a.tenantId&&(l.tid=a.tenantId);const p=l;for(const S of Object.keys(p))p[S]===void 0&&delete p[S];const h=await a._getAppCheckToken(),k=h?`#${PA}=${encodeURIComponent(h)}`:"";return`${EA(a)}?${Hd(p).slice(1)}${k}`}function EA({config:a}){return a.emulator?kb(a,TA):`https://${a.authDomain}/${$A}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="webStorageSupport";class IA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=r5,this._completeRedirectFn=tA,this._overrideRedirectResult=J8}async _openPopup(t,s,n,i){var u;no((u=this.eventManagers[t._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await gk(t,s,n,Wx(),i);return CA(t,l,Tb())}async _openRedirect(t,s,n,i){await this._originValidation(t);const u=await gk(t,s,n,Wx(),i);return A8(u),new Promise(()=>{})}_initialize(t){const s=t._key();if(this.eventManagers[s]){const{manager:i,promise:u}=this.eventManagers[s];return i?Promise.resolve(i):(no(u,"If manager is not set, promise should be"),u)}const n=this.initAndGetManager(t);return this.eventManagers[s]={promise:n},n.catch(()=>{delete this.eventManagers[s]}),n}async initAndGetManager(t){const s=await yA(t),n=new aA(t);return s.register("authEvent",i=>(nr(i?.authEvent,t,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=s,n}_isIframeWebStorageSupported(t,s){this.iframes[t._key()].send(ax,{type:ax},i=>{var u;const l=(u=i?.[0])===null||u===void 0?void 0:u[ax];l!==void 0&&s(!!l),on(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const s=t._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=lA(t)),this.originValidationPromises[s]}get _shouldInitProactively(){return q1()||B1()||jb()}}const DA=IA;var bk="@firebase/auth",fk="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const s=this.auth.onIdTokenChanged(n=>{t(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,s),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const s=this.internalListeners.get(t);s&&(this.internalListeners.delete(t),s(),this.updateProactiveRefresh())}assertAuthConfigured(){nr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RA(a){sn(new Fs("auth",(t,{options:s})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:l,authDomain:p}=n.options;nr(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});const h={apiKey:l,authDomain:p,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:H1(a)},k=new G_(n,i,u,h);return a8(k,s),k},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,s,n)=>{t.getProvider("auth-internal").initialize()})),sn(new Fs("auth-internal",t=>{const s=ii(t.getProvider("auth").getImmediate());return(n=>new _A(n))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),us(bk,fk,AA(a)),us(bk,fk,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=300,zA=bj("authIdTokenMaxAge")||MA;let yk=null;const BA=a=>async t=>{const s=t&&await t.getIdTokenResult(),n=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(n&&n>zA)return;const i=s?.token;yk!==i&&(yk=i,await fetch(a,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Eb(a=Bm()){const t=si(a,"auth");if(t.isInitialized())return t.getImmediate();const s=r8(a,{popupRedirectResolver:DA,persistence:[U8,I8,r5]}),n=bj("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(n,location.origin);if(location.origin===u.origin){const l=BA(u.toString());T8(s,l,()=>l(s.currentUser)),$8(s,p=>l(p))}}const i=hj("auth");return i&&s8(s,`http://${i}`),s}function LA(){var a,t;return(t=(a=document.getElementsByTagName("head"))===null||a===void 0?void 0:a[0])!==null&&t!==void 0?t:document}K_({loadJS(a){return new Promise((t,s)=>{const n=document.createElement("script");n.setAttribute("src",a),n.onload=t,n.onerror=i=>{const u=kn("internal-error");u.customData=i,s(u)},n.type="text/javascript",n.charset="UTF-8",LA().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RA("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5="firebasestorage.googleapis.com",OA="storageBucket",VA=120*1e3,FA=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn extends Us{constructor(t,s,n=0){super(sx(t),`Firebase Storage: ${s} (${sx(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dn.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return sx(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var En;(function(a){a.UNKNOWN="unknown",a.OBJECT_NOT_FOUND="object-not-found",a.BUCKET_NOT_FOUND="bucket-not-found",a.PROJECT_NOT_FOUND="project-not-found",a.QUOTA_EXCEEDED="quota-exceeded",a.UNAUTHENTICATED="unauthenticated",a.UNAUTHORIZED="unauthorized",a.UNAUTHORIZED_APP="unauthorized-app",a.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",a.INVALID_CHECKSUM="invalid-checksum",a.CANCELED="canceled",a.INVALID_EVENT_NAME="invalid-event-name",a.INVALID_URL="invalid-url",a.INVALID_DEFAULT_BUCKET="invalid-default-bucket",a.NO_DEFAULT_BUCKET="no-default-bucket",a.CANNOT_SLICE_BLOB="cannot-slice-blob",a.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",a.NO_DOWNLOAD_URL="no-download-url",a.INVALID_ARGUMENT="invalid-argument",a.INVALID_ARGUMENT_COUNT="invalid-argument-count",a.APP_DELETED="app-deleted",a.INVALID_ROOT_OPERATION="invalid-root-operation",a.INVALID_FORMAT="invalid-format",a.INTERNAL_ERROR="internal-error",a.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(En||(En={}));function sx(a){return"storage/"+a}function UA(){const a="An unknown error occurred, please check the error payload for server response.";return new Dn(En.UNKNOWN,a)}function qA(){return new Dn(En.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HA(){return new Dn(En.CANCELED,"User canceled the upload/download.")}function WA(a){return new Dn(En.INVALID_URL,"Invalid URL '"+a+"'.")}function GA(a){return new Dn(En.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+a+"'.")}function vk(a){return new Dn(En.INVALID_ARGUMENT,a)}function d5(){return new Dn(En.APP_DELETED,"The Firebase app was deleted.")}function KA(a){return new Dn(En.INVALID_ROOT_OPERATION,"The operation '"+a+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t,s){this.bucket=t,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,s){let n;try{n=an.makeFromUrl(t,s)}catch{return new an(t,"")}if(n.path==="")return n;throw GA(t)}static makeFromUrl(t,s){let n=null;const i="([A-Za-z0-9.\\-_]+)";function u(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}const l="(/(.*))?$",p=new RegExp("^gs://"+i+l,"i"),h={bucket:1,path:3};function k(ne){ne.path_=decodeURIComponent(ne.path)}const S="v[A-Za-z0-9_]+",$=s.replace(/[.]/g,"\\."),D="(/([^?#]*).*)?$",O=new RegExp(`^https?://${$}/${S}/b/${i}/o${D}`,"i"),Y={bucket:1,path:3},W=s===c5?"(?:storage.googleapis.com|storage.cloud.google.com)":s,N="([^?#]*)",G=new RegExp(`^https?://${W}/${i}/${N}`,"i"),U=[{regex:p,indices:h,postModify:u},{regex:O,indices:Y,postModify:k},{regex:G,indices:{bucket:1,path:2},postModify:k}];for(let ne=0;ne<U.length;ne++){const oe=U[ne],$e=oe.regex.exec(t);if($e){const K=$e[oe.indices.bucket];let V=$e[oe.indices.path];V||(V=""),n=new an(K,V),oe.postModify(n);break}}if(n==null)throw WA(t);return n}}class QA{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(a,t,s){let n=1,i=null,u=null,l=!1,p=0;function h(){return p===2}let k=!1;function S(...N){k||(k=!0,t.apply(null,N))}function $(N){i=setTimeout(()=>{i=null,a(O,h())},N)}function D(){u&&clearTimeout(u)}function O(N,...G){if(k){D();return}if(N){D(),S.call(null,N,...G);return}if(h()||l){D(),S.call(null,N,...G);return}n<64&&(n*=2);let U;p===1?(p=2,U=0):U=(n+Math.random())*1e3,$(U)}let Y=!1;function W(N){Y||(Y=!0,D(),!k&&(i!==null?(N||(p=2),clearTimeout(i),$(0)):N||(p=1)))}return $(0),u=setTimeout(()=>{l=!0,W(!0)},s),W}function XA(a){a(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(a){return a!==void 0}function wk(a,t,s,n){if(n<t)throw vk(`Invalid value for '${a}'. Expected ${t} or greater.`);if(n>s)throw vk(`Invalid value for '${a}'. Expected ${s} or less.`)}function ZA(a){const t=encodeURIComponent;let s="?";for(const n in a)if(a.hasOwnProperty(n)){const i=t(n)+"="+t(a[n]);s=s+i+"&"}return s=s.slice(0,-1),s}var km;(function(a){a[a.NO_ERROR=0]="NO_ERROR",a[a.NETWORK_ERROR=1]="NETWORK_ERROR",a[a.ABORT=2]="ABORT"})(km||(km={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(a,t){const s=a>=500&&a<600,i=[408,429].indexOf(a)!==-1,u=t.indexOf(a)!==-1;return s||i||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(t,s,n,i,u,l,p,h,k,S,$,D=!0){this.url_=t,this.method_=s,this.headers_=n,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=l,this.callback_=p,this.errorCallback_=h,this.timeout_=k,this.progressCallback_=S,this.connectionFactory_=$,this.retry=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,Y)=>{this.resolve_=O,this.reject_=Y,this.start_()})}start_(){const t=(n,i)=>{if(i){n(!1,new E0(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const l=p=>{const h=p.loaded,k=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,k)};this.progressCallback_!==null&&u.addUploadProgressListener(l),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(l),this.pendingConnection_=null;const p=u.getErrorCode()===km.NO_ERROR,h=u.getStatus();if(!p||eR(h,this.additionalRetryCodes_)&&this.retry){const S=u.getErrorCode()===km.ABORT;n(!1,new E0(!1,null,S));return}const k=this.successCodes_.indexOf(h)!==-1;n(!0,new E0(k,u))})},s=(n,i)=>{const u=this.resolve_,l=this.reject_,p=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(p,p.getResponse());JA(h)?u(h):u()}catch(h){l(h)}else if(p!==null){const h=UA();h.serverResponse=p.getErrorText(),this.errorCallback_?l(this.errorCallback_(p,h)):l(h)}else if(i.canceled){const h=this.appDelete_?d5():HA();l(h)}else{const h=qA();l(h)}};this.canceled_?s(!1,new E0(!1,null,!0)):this.backoffId_=YA(t,s,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&XA(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class E0{constructor(t,s,n){this.wasSuccessCode=t,this.connection=s,this.canceled=!!n}}function rR(a,t){t!==null&&t.length>0&&(a.Authorization="Firebase "+t)}function aR(a,t){a["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function sR(a,t){t&&(a["X-Firebase-GMPID"]=t)}function nR(a,t){t!==null&&(a["X-Firebase-AppCheck"]=t)}function oR(a,t,s,n,i,u,l=!0){const p=ZA(a.urlParams),h=a.url+p,k=Object.assign({},a.headers);return sR(k,t),rR(k,s),aR(k,u),nR(k,n),new tR(h,a.method,k,a.body,a.successCodes,a.additionalRetryCodes,a.handler,a.errorHandler,a.timeout,a.progressCallback,i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(a){if(a.length===0)return null;const t=a.lastIndexOf("/");return t===-1?"":a.slice(0,t)}function lR(a){const t=a.lastIndexOf("/",a.length-2);return t===-1?a:a.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(t,s){this._service=t,s instanceof an?this._location=s:this._location=an.makeFromUrl(s,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,s){return new Nm(t,s)}get root(){const t=new an(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lR(this._location.path)}get storage(){return this._service}get parent(){const t=iR(this._location.path);if(t===null)return null;const s=new an(this._location.bucket,t);return new Nm(this._service,s)}_throwIfRoot(t){if(this._location.path==="")throw KA(t)}}function kk(a,t){const s=t?.[OA];return s==null?null:an.makeFromBucketSpec(s,a)}function cR(a,t,s,n={}){a.host=`${t}:${s}`,a._protocol="http";const{mockUserToken:i}=n;i&&(a._overrideAuthToken=typeof i=="string"?i:fj(i,a.app.options.projectId))}class dR{constructor(t,s,n,i,u){this.app=t,this._authProvider=s,this._appCheckProvider=n,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=c5,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=VA,this._maxUploadRetryTime=FA,this._requests=new Set,i!=null?this._bucket=an.makeFromBucketSpec(i,this._host):this._bucket=kk(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=an.makeFromBucketSpec(this._url,t):this._bucket=kk(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){wk("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){wk("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const s=await t.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){if(ks(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Nm(this,t)}_makeRequest(t,s,n,i,u=!0){if(this._deleted)return new QA(d5());{const l=oR(t,this._appId,n,i,s,this._firebaseVersion,u);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(t,s){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,s,n,i).getPromise()}}const Nk="@firebase/storage",jk="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5="storage";function uR(a=Bm(),t){a=Kr(a);const n=si(a,u5).getImmediate({identifier:t}),i=xj("storage");return i&&mR(n,...i),n}function mR(a,t,s,n={}){cR(a,t,s,n)}function pR(a,{instanceIdentifier:t}){const s=a.getProvider("app").getImmediate(),n=a.getProvider("auth-internal"),i=a.getProvider("app-check-internal");return new dR(s,n,i,t,Ji)}function hR(){sn(new Fs(u5,pR,"PUBLIC").setMultipleInstances(!0)),us(Nk,jk,""),us(Nk,jk,"esm2017")}hR();const xR={apiKey:"AIzaSyDYacL_WIzZUSP-Tjl3794P_jHocMDqN9g",authDomain:"blackkstreaming-55f0e.firebaseapp.com",projectId:"blackkstreaming-55f0e",storageBucket:"blackkstreaming-55f0e.firebasestorage.app",messagingSenderId:"998157647233",appId:"1:998157647233:web:3e5b8128a0275ae4553c80",measurementId:"G-GFM50WNMSP"},ou=Cj(xR);cI(ou);const I=l_(ou);uR(ou);const $t=Eb(ou),Ib=m.createContext({});function Db(a){const t=m.useRef(null);return t.current===null&&(t.current=a()),t.current}const _b=typeof window<"u",m5=_b?m.useLayoutEffect:m.useEffect,cp=m.createContext(null);function Ab(a,t){a.indexOf(t)===-1&&a.push(t)}function Rb(a,t){const s=a.indexOf(t);s>-1&&a.splice(s,1)}const oo=(a,t,s)=>s>t?t:s<a?a:s;let Mb=()=>{};const io={},p5=a=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(a);function h5(a){return typeof a=="object"&&a!==null}const x5=a=>/^0[^.\s]+$/u.test(a);function zb(a){let t;return()=>(t===void 0&&(t=a()),t)}const Os=a=>a,gR=(a,t)=>s=>t(a(s)),iu=(...a)=>a.reduce(gR),_d=(a,t,s)=>{const n=t-a;return n===0?1:(s-a)/n};class Bb{constructor(){this.subscriptions=[]}add(t){return Ab(this.subscriptions,t),()=>Rb(this.subscriptions,t)}notify(t,s,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,s,n);else for(let u=0;u<i;u++){const l=this.subscriptions[u];l&&l(t,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const jn=a=>a*1e3,Cn=a=>a/1e3;function g5(a,t){return t?a*(1e3/t):0}const b5=(a,t,s)=>(((1-3*s+3*t)*a+(3*s-6*t))*a+3*t)*a,bR=1e-7,fR=12;function yR(a,t,s,n,i){let u,l,p=0;do l=t+(s-t)/2,u=b5(l,n,i)-a,u>0?s=l:t=l;while(Math.abs(u)>bR&&++p<fR);return l}function lu(a,t,s,n){if(a===t&&s===n)return Os;const i=u=>yR(u,0,1,a,s);return u=>u===0||u===1?u:b5(i(u),t,n)}const f5=a=>t=>t<=.5?a(2*t)/2:(2-a(2*(1-t)))/2,y5=a=>t=>1-a(1-t),v5=lu(.33,1.53,.69,.99),Lb=y5(v5),w5=f5(Lb),k5=a=>(a*=2)<1?.5*Lb(a):.5*(2-Math.pow(2,-10*(a-1))),Ob=a=>1-Math.sin(Math.acos(a)),N5=y5(Ob),j5=f5(Ob),vR=lu(.42,0,1,1),wR=lu(0,0,.58,1),C5=lu(.42,0,.58,1),kR=a=>Array.isArray(a)&&typeof a[0]!="number",S5=a=>Array.isArray(a)&&typeof a[0]=="number",NR={linear:Os,easeIn:vR,easeInOut:C5,easeOut:wR,circIn:Ob,circInOut:j5,circOut:N5,backIn:Lb,backInOut:w5,backOut:v5,anticipate:k5},jR=a=>typeof a=="string",Ck=a=>{if(S5(a)){Mb(a.length===4);const[t,s,n,i]=a;return lu(t,s,n,i)}else if(jR(a))return NR[a];return a},I0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Sk={value:null};function CR(a,t){let s=new Set,n=new Set,i=!1,u=!1;const l=new WeakSet;let p={delta:0,timestamp:0,isProcessing:!1},h=0;function k($){l.has($)&&(S.schedule($),a()),h++,$(p)}const S={schedule:($,D=!1,O=!1)=>{const W=O&&i?s:n;return D&&l.add($),W.has($)||W.add($),$},cancel:$=>{n.delete($),l.delete($)},process:$=>{if(p=$,i){u=!0;return}i=!0,[s,n]=[n,s],s.forEach(k),t&&Sk.value&&Sk.value.frameloop[t].push(h),h=0,s.clear(),i=!1,u&&(u=!1,S.process($))}};return S}const SR=40;function $5(a,t){let s=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},u=()=>s=!0,l=I0.reduce((U,ne)=>(U[ne]=CR(u,t?ne:void 0),U),{}),{setup:p,read:h,resolveKeyframes:k,preUpdate:S,update:$,preRender:D,render:O,postRender:Y}=l,W=()=>{const U=io.useManualTiming?i.timestamp:performance.now();s=!1,io.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(U-i.timestamp,SR),1)),i.timestamp=U,i.isProcessing=!0,p.process(i),h.process(i),k.process(i),S.process(i),$.process(i),D.process(i),O.process(i),Y.process(i),i.isProcessing=!1,s&&t&&(n=!1,a(W))},N=()=>{s=!0,n=!0,i.isProcessing||a(W)};return{schedule:I0.reduce((U,ne)=>{const oe=l[ne];return U[ne]=($e,K=!1,V=!1)=>(s||N(),oe.schedule($e,K,V)),U},{}),cancel:U=>{for(let ne=0;ne<I0.length;ne++)l[I0[ne]].cancel(U)},state:i,steps:l}}const{schedule:aa,cancel:ri,state:Pa,steps:nx}=$5(typeof requestAnimationFrame<"u"?requestAnimationFrame:Os,!0);let G0;function $R(){G0=void 0}const ds={now:()=>(G0===void 0&&ds.set(Pa.isProcessing||io.useManualTiming?Pa.timestamp:performance.now()),G0),set:a=>{G0=a,queueMicrotask($R)}},T5=a=>t=>typeof t=="string"&&t.startsWith(a),Vb=T5("--"),TR=T5("var(--"),Fb=a=>TR(a)?PR.test(a.split("/*")[0].trim()):!1,PR=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,xc={test:a=>typeof a=="number",parse:parseFloat,transform:a=>a},Ad={...xc,transform:a=>oo(0,1,a)},D0={...xc,default:1},gd=a=>Math.round(a*1e5)/1e5,Ub=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ER(a){return a==null}const IR=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,qb=(a,t)=>s=>!!(typeof s=="string"&&IR.test(s)&&s.startsWith(a)||t&&!ER(s)&&Object.prototype.hasOwnProperty.call(s,t)),P5=(a,t,s)=>n=>{if(typeof n!="string")return n;const[i,u,l,p]=n.match(Ub);return{[a]:parseFloat(i),[t]:parseFloat(u),[s]:parseFloat(l),alpha:p!==void 0?parseFloat(p):1}},DR=a=>oo(0,255,a),ox={...xc,transform:a=>Math.round(DR(a))},Mi={test:qb("rgb","red"),parse:P5("red","green","blue"),transform:({red:a,green:t,blue:s,alpha:n=1})=>"rgba("+ox.transform(a)+", "+ox.transform(t)+", "+ox.transform(s)+", "+gd(Ad.transform(n))+")"};function _R(a){let t="",s="",n="",i="";return a.length>5?(t=a.substring(1,3),s=a.substring(3,5),n=a.substring(5,7),i=a.substring(7,9)):(t=a.substring(1,2),s=a.substring(2,3),n=a.substring(3,4),i=a.substring(4,5),t+=t,s+=s,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const Qx={test:qb("#"),parse:_R,transform:Mi.transform},cu=a=>({test:t=>typeof t=="string"&&t.endsWith(a)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${a}`}),zo=cu("deg"),Sn=cu("%"),or=cu("px"),AR=cu("vh"),RR=cu("vw"),$k={...Sn,parse:a=>Sn.parse(a)/100,transform:a=>Sn.transform(a*100)},Fl={test:qb("hsl","hue"),parse:P5("hue","saturation","lightness"),transform:({hue:a,saturation:t,lightness:s,alpha:n=1})=>"hsla("+Math.round(a)+", "+Sn.transform(gd(t))+", "+Sn.transform(gd(s))+", "+gd(Ad.transform(n))+")"},Oa={test:a=>Mi.test(a)||Qx.test(a)||Fl.test(a),parse:a=>Mi.test(a)?Mi.parse(a):Fl.test(a)?Fl.parse(a):Qx.parse(a),transform:a=>typeof a=="string"?a:a.hasOwnProperty("red")?Mi.transform(a):Fl.transform(a)},MR=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function zR(a){return isNaN(a)&&typeof a=="string"&&(a.match(Ub)?.length||0)+(a.match(MR)?.length||0)>0}const E5="number",I5="color",BR="var",LR="var(",Tk="${}",OR=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Rd(a){const t=a.toString(),s=[],n={color:[],number:[],var:[]},i=[];let u=0;const p=t.replace(OR,h=>(Oa.test(h)?(n.color.push(u),i.push(I5),s.push(Oa.parse(h))):h.startsWith(LR)?(n.var.push(u),i.push(BR),s.push(h)):(n.number.push(u),i.push(E5),s.push(parseFloat(h))),++u,Tk)).split(Tk);return{values:s,split:p,indexes:n,types:i}}function D5(a){return Rd(a).values}function _5(a){const{split:t,types:s}=Rd(a),n=t.length;return i=>{let u="";for(let l=0;l<n;l++)if(u+=t[l],i[l]!==void 0){const p=s[l];p===E5?u+=gd(i[l]):p===I5?u+=Oa.transform(i[l]):u+=i[l]}return u}}const VR=a=>typeof a=="number"?0:a;function FR(a){const t=D5(a);return _5(a)(t.map(VR))}const ai={test:zR,parse:D5,createTransformer:_5,getAnimatableNone:FR};function ix(a,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?a+(t-a)*6*s:s<1/2?t:s<2/3?a+(t-a)*(2/3-s)*6:a}function UR({hue:a,saturation:t,lightness:s,alpha:n}){a/=360,t/=100,s/=100;let i=0,u=0,l=0;if(!t)i=u=l=s;else{const p=s<.5?s*(1+t):s+t-s*t,h=2*s-p;i=ix(h,p,a+1/3),u=ix(h,p,a),l=ix(h,p,a-1/3)}return{red:Math.round(i*255),green:Math.round(u*255),blue:Math.round(l*255),alpha:n}}function jm(a,t){return s=>s>0?t:a}const ta=(a,t,s)=>a+(t-a)*s,lx=(a,t,s)=>{const n=a*a,i=s*(t*t-n)+n;return i<0?0:Math.sqrt(i)},qR=[Qx,Mi,Fl],HR=a=>qR.find(t=>t.test(a));function Pk(a){const t=HR(a);if(!t)return!1;let s=t.parse(a);return t===Fl&&(s=UR(s)),s}const Ek=(a,t)=>{const s=Pk(a),n=Pk(t);if(!s||!n)return jm(a,t);const i={...s};return u=>(i.red=lx(s.red,n.red,u),i.green=lx(s.green,n.green,u),i.blue=lx(s.blue,n.blue,u),i.alpha=ta(s.alpha,n.alpha,u),Mi.transform(i))},Yx=new Set(["none","hidden"]);function WR(a,t){return Yx.has(a)?s=>s<=0?a:t:s=>s>=1?t:a}function GR(a,t){return s=>ta(a,t,s)}function Hb(a){return typeof a=="number"?GR:typeof a=="string"?Fb(a)?jm:Oa.test(a)?Ek:YR:Array.isArray(a)?A5:typeof a=="object"?Oa.test(a)?Ek:KR:jm}function A5(a,t){const s=[...a],n=s.length,i=a.map((u,l)=>Hb(u)(u,t[l]));return u=>{for(let l=0;l<n;l++)s[l]=i[l](u);return s}}function KR(a,t){const s={...a,...t},n={};for(const i in s)a[i]!==void 0&&t[i]!==void 0&&(n[i]=Hb(a[i])(a[i],t[i]));return i=>{for(const u in n)s[u]=n[u](i);return s}}function QR(a,t){const s=[],n={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const u=t.types[i],l=a.indexes[u][n[u]],p=a.values[l]??0;s[i]=p,n[u]++}return s}const YR=(a,t)=>{const s=ai.createTransformer(t),n=Rd(a),i=Rd(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?Yx.has(a)&&!i.values.length||Yx.has(t)&&!n.values.length?WR(a,t):iu(A5(QR(n,i),i.values),s):jm(a,t)};function R5(a,t,s){return typeof a=="number"&&typeof t=="number"&&typeof s=="number"?ta(a,t,s):Hb(a)(a,t)}const XR=a=>{const t=({timestamp:s})=>a(s);return{start:(s=!0)=>aa.update(t,s),stop:()=>ri(t),now:()=>Pa.isProcessing?Pa.timestamp:ds.now()}},M5=(a,t,s=10)=>{let n="";const i=Math.max(Math.round(t/s),2);for(let u=0;u<i;u++)n+=a(u/(i-1))+", ";return`linear(${n.substring(0,n.length-2)})`},Cm=2e4;function Wb(a){let t=0;const s=50;let n=a.next(t);for(;!n.done&&t<Cm;)t+=s,n=a.next(t);return t>=Cm?1/0:t}function JR(a,t=100,s){const n=s({...a,keyframes:[0,t]}),i=Math.min(Wb(n),Cm);return{type:"keyframes",ease:u=>n.next(i*u).value/t,duration:Cn(i)}}const ZR=5;function z5(a,t,s){const n=Math.max(t-ZR,0);return g5(s-a(n),t-n)}const oa={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},cx=.001;function e7({duration:a=oa.duration,bounce:t=oa.bounce,velocity:s=oa.velocity,mass:n=oa.mass}){let i,u,l=1-t;l=oo(oa.minDamping,oa.maxDamping,l),a=oo(oa.minDuration,oa.maxDuration,Cn(a)),l<1?(i=k=>{const S=k*l,$=S*a,D=S-s,O=Xx(k,l),Y=Math.exp(-$);return cx-D/O*Y},u=k=>{const $=k*l*a,D=$*s+s,O=Math.pow(l,2)*Math.pow(k,2)*a,Y=Math.exp(-$),W=Xx(Math.pow(k,2),l);return(-i(k)+cx>0?-1:1)*((D-O)*Y)/W}):(i=k=>{const S=Math.exp(-k*a),$=(k-s)*a+1;return-cx+S*$},u=k=>{const S=Math.exp(-k*a),$=(s-k)*(a*a);return S*$});const p=5/a,h=r7(i,u,p);if(a=jn(a),isNaN(h))return{stiffness:oa.stiffness,damping:oa.damping,duration:a};{const k=Math.pow(h,2)*n;return{stiffness:k,damping:l*2*Math.sqrt(n*k),duration:a}}}const t7=12;function r7(a,t,s){let n=s;for(let i=1;i<t7;i++)n=n-a(n)/t(n);return n}function Xx(a,t){return a*Math.sqrt(1-t*t)}const a7=["duration","bounce"],s7=["stiffness","damping","mass"];function Ik(a,t){return t.some(s=>a[s]!==void 0)}function n7(a){let t={velocity:oa.velocity,stiffness:oa.stiffness,damping:oa.damping,mass:oa.mass,isResolvedFromDuration:!1,...a};if(!Ik(a,s7)&&Ik(a,a7))if(a.visualDuration){const s=a.visualDuration,n=2*Math.PI/(s*1.2),i=n*n,u=2*oo(.05,1,1-(a.bounce||0))*Math.sqrt(i);t={...t,mass:oa.mass,stiffness:i,damping:u}}else{const s=e7(a);t={...t,...s,mass:oa.mass},t.isResolvedFromDuration=!0}return t}function Sm(a=oa.visualDuration,t=oa.bounce){const s=typeof a!="object"?{visualDuration:a,keyframes:[0,1],bounce:t}:a;let{restSpeed:n,restDelta:i}=s;const u=s.keyframes[0],l=s.keyframes[s.keyframes.length-1],p={done:!1,value:u},{stiffness:h,damping:k,mass:S,duration:$,velocity:D,isResolvedFromDuration:O}=n7({...s,velocity:-Cn(s.velocity||0)}),Y=D||0,W=k/(2*Math.sqrt(h*S)),N=l-u,G=Cn(Math.sqrt(h/S)),H=Math.abs(N)<5;n||(n=H?oa.restSpeed.granular:oa.restSpeed.default),i||(i=H?oa.restDelta.granular:oa.restDelta.default);let U;if(W<1){const oe=Xx(G,W);U=$e=>{const K=Math.exp(-W*G*$e);return l-K*((Y+W*G*N)/oe*Math.sin(oe*$e)+N*Math.cos(oe*$e))}}else if(W===1)U=oe=>l-Math.exp(-G*oe)*(N+(Y+G*N)*oe);else{const oe=G*Math.sqrt(W*W-1);U=$e=>{const K=Math.exp(-W*G*$e),V=Math.min(oe*$e,300);return l-K*((Y+W*G*N)*Math.sinh(V)+oe*N*Math.cosh(V))/oe}}const ne={calculatedDuration:O&&$||null,next:oe=>{const $e=U(oe);if(O)p.done=oe>=$;else{let K=oe===0?Y:0;W<1&&(K=oe===0?jn(Y):z5(U,oe,$e));const V=Math.abs(K)<=n,L=Math.abs(l-$e)<=i;p.done=V&&L}return p.value=p.done?l:$e,p},toString:()=>{const oe=Math.min(Wb(ne),Cm),$e=M5(K=>ne.next(oe*K).value,oe,30);return oe+"ms "+$e},toTransition:()=>{}};return ne}Sm.applyToOptions=a=>{const t=JR(a,100,Sm);return a.ease=t.ease,a.duration=jn(t.duration),a.type="keyframes",a};function Jx({keyframes:a,velocity:t=0,power:s=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:u=500,modifyTarget:l,min:p,max:h,restDelta:k=.5,restSpeed:S}){const $=a[0],D={done:!1,value:$},O=V=>p!==void 0&&V<p||h!==void 0&&V>h,Y=V=>p===void 0?h:h===void 0||Math.abs(p-V)<Math.abs(h-V)?p:h;let W=s*t;const N=$+W,G=l===void 0?N:l(N);G!==N&&(W=G-$);const H=V=>-W*Math.exp(-V/n),U=V=>G+H(V),ne=V=>{const L=H(V),y=U(V);D.done=Math.abs(L)<=k,D.value=D.done?G:y};let oe,$e;const K=V=>{O(D.value)&&(oe=V,$e=Sm({keyframes:[D.value,Y(D.value)],velocity:z5(U,V,D.value),damping:i,stiffness:u,restDelta:k,restSpeed:S}))};return K(0),{calculatedDuration:null,next:V=>{let L=!1;return!$e&&oe===void 0&&(L=!0,ne(V),K(V)),oe!==void 0&&V>=oe?$e.next(V-oe):(!L&&ne(V),D)}}}function o7(a,t,s){const n=[],i=s||io.mix||R5,u=a.length-1;for(let l=0;l<u;l++){let p=i(a[l],a[l+1]);if(t){const h=Array.isArray(t)?t[l]||Os:t;p=iu(h,p)}n.push(p)}return n}function i7(a,t,{clamp:s=!0,ease:n,mixer:i}={}){const u=a.length;if(Mb(u===t.length),u===1)return()=>t[0];if(u===2&&t[0]===t[1])return()=>t[1];const l=a[0]===a[1];a[0]>a[u-1]&&(a=[...a].reverse(),t=[...t].reverse());const p=o7(t,n,i),h=p.length,k=S=>{if(l&&S<a[0])return t[0];let $=0;if(h>1)for(;$<a.length-2&&!(S<a[$+1]);$++);const D=_d(a[$],a[$+1],S);return p[$](D)};return s?S=>k(oo(a[0],a[u-1],S)):k}function l7(a,t){const s=a[a.length-1];for(let n=1;n<=t;n++){const i=_d(0,t,n);a.push(ta(s,1,i))}}function c7(a){const t=[0];return l7(t,a.length-1),t}function d7(a,t){return a.map(s=>s*t)}function u7(a,t){return a.map(()=>t||C5).splice(0,a.length-1)}function bd({duration:a=300,keyframes:t,times:s,ease:n="easeInOut"}){const i=kR(n)?n.map(Ck):Ck(n),u={done:!1,value:t[0]},l=d7(s&&s.length===t.length?s:c7(t),a),p=i7(l,t,{ease:Array.isArray(i)?i:u7(t,i)});return{calculatedDuration:a,next:h=>(u.value=p(h),u.done=h>=a,u)}}const m7=a=>a!==null;function Gb(a,{repeat:t,repeatType:s="loop"},n,i=1){const u=a.filter(m7),p=i<0||t&&s!=="loop"&&t%2===1?0:u.length-1;return!p||n===void 0?u[p]:n}const p7={decay:Jx,inertia:Jx,tween:bd,keyframes:bd,spring:Sm};function B5(a){typeof a.type=="string"&&(a.type=p7[a.type])}class Kb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,s){return this.finished.then(t,s)}}const h7=a=>a/100;class Qb extends Kb{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(s=!0)=>{if(s){const{motionValue:n}=this.options;n&&n.updatedAt!==ds.now()&&this.tick(ds.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;B5(t);const{type:s=bd,repeat:n=0,repeatDelay:i=0,repeatType:u,velocity:l=0}=t;let{keyframes:p}=t;const h=s||bd;h!==bd&&typeof p[0]!="number"&&(this.mixKeyframes=iu(h7,R5(p[0],p[1])),p=[0,100]);const k=h({...t,keyframes:p});u==="mirror"&&(this.mirroredGenerator=h({...t,keyframes:[...p].reverse(),velocity:-l})),k.calculatedDuration===null&&(k.calculatedDuration=Wb(k));const{calculatedDuration:S}=k;this.calculatedDuration=S,this.resolvedDuration=S+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=k}updateTime(t){const s=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(t,s=!1){const{generator:n,totalDuration:i,mixKeyframes:u,mirroredGenerator:l,resolvedDuration:p,calculatedDuration:h}=this;if(this.startTime===null)return n.next(0);const{delay:k=0,keyframes:S,repeat:$,repeatType:D,repeatDelay:O,type:Y,onUpdate:W,finalKeyframe:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),s?this.currentTime=t:this.updateTime(t);const G=this.currentTime-k*(this.playbackSpeed>=0?1:-1),H=this.playbackSpeed>=0?G<0:G>i;this.currentTime=Math.max(G,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let U=this.currentTime,ne=n;if($){const V=Math.min(this.currentTime,i)/p;let L=Math.floor(V),y=V%1;!y&&V>=1&&(y=1),y===1&&L--,L=Math.min(L,$+1),!!(L%2)&&(D==="reverse"?(y=1-y,O&&(y-=O/p)):D==="mirror"&&(ne=l)),U=oo(0,1,y)*p}const oe=H?{done:!1,value:S[0]}:ne.next(U);u&&(oe.value=u(oe.value));let{done:$e}=oe;!H&&h!==null&&($e=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const K=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$e);return K&&Y!==Jx&&(oe.value=Gb(S,this.options,N,this.speed)),W&&W(oe.value),K&&this.finish(),oe}then(t,s){return this.finished.then(t,s)}get duration(){return Cn(this.calculatedDuration)}get time(){return Cn(this.currentTime)}set time(t){t=jn(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ds.now());const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=Cn(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=XR,startTime:s}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=s??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ds.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function x7(a){for(let t=1;t<a.length;t++)a[t]??(a[t]=a[t-1])}const zi=a=>a*180/Math.PI,Zx=a=>{const t=zi(Math.atan2(a[1],a[0]));return eg(t)},g7={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:a=>(Math.abs(a[0])+Math.abs(a[3]))/2,rotate:Zx,rotateZ:Zx,skewX:a=>zi(Math.atan(a[1])),skewY:a=>zi(Math.atan(a[2])),skew:a=>(Math.abs(a[1])+Math.abs(a[2]))/2},eg=a=>(a=a%360,a<0&&(a+=360),a),Dk=Zx,_k=a=>Math.sqrt(a[0]*a[0]+a[1]*a[1]),Ak=a=>Math.sqrt(a[4]*a[4]+a[5]*a[5]),b7={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:_k,scaleY:Ak,scale:a=>(_k(a)+Ak(a))/2,rotateX:a=>eg(zi(Math.atan2(a[6],a[5]))),rotateY:a=>eg(zi(Math.atan2(-a[2],a[0]))),rotateZ:Dk,rotate:Dk,skewX:a=>zi(Math.atan(a[4])),skewY:a=>zi(Math.atan(a[1])),skew:a=>(Math.abs(a[1])+Math.abs(a[4]))/2};function tg(a){return a.includes("scale")?1:0}function rg(a,t){if(!a||a==="none")return tg(t);const s=a.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(s)n=b7,i=s;else{const p=a.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=g7,i=p}if(!i)return tg(t);const u=n[t],l=i[1].split(",").map(y7);return typeof u=="function"?u(l):l[u]}const f7=(a,t)=>{const{transform:s="none"}=getComputedStyle(a);return rg(s,t)};function y7(a){return parseFloat(a.trim())}const gc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bc=new Set(gc),Rk=a=>a===xc||a===or,v7=new Set(["x","y","z"]),w7=gc.filter(a=>!v7.has(a));function k7(a){const t=[];return w7.forEach(s=>{const n=a.getValue(s);n!==void 0&&(t.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),t}const Li={width:({x:a},{paddingLeft:t="0",paddingRight:s="0"})=>a.max-a.min-parseFloat(t)-parseFloat(s),height:({y:a},{paddingTop:t="0",paddingBottom:s="0"})=>a.max-a.min-parseFloat(t)-parseFloat(s),top:(a,{top:t})=>parseFloat(t),left:(a,{left:t})=>parseFloat(t),bottom:({y:a},{top:t})=>parseFloat(t)+(a.max-a.min),right:({x:a},{left:t})=>parseFloat(t)+(a.max-a.min),x:(a,{transform:t})=>rg(t,"x"),y:(a,{transform:t})=>rg(t,"y")};Li.translateX=Li.x;Li.translateY=Li.y;const Oi=new Set;let ag=!1,sg=!1,ng=!1;function L5(){if(sg){const a=Array.from(Oi).filter(n=>n.needsMeasurement),t=new Set(a.map(n=>n.element)),s=new Map;t.forEach(n=>{const i=k7(n);i.length&&(s.set(n,i),n.render())}),a.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const i=s.get(n);i&&i.forEach(([u,l])=>{n.getValue(u)?.set(l)})}),a.forEach(n=>n.measureEndState()),a.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}sg=!1,ag=!1,Oi.forEach(a=>a.complete(ng)),Oi.clear()}function O5(){Oi.forEach(a=>{a.readKeyframes(),a.needsMeasurement&&(sg=!0)})}function N7(){ng=!0,O5(),L5(),ng=!1}class Yb{constructor(t,s,n,i,u,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=n,this.motionValue=i,this.element=u,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Oi.add(this),ag||(ag=!0,aa.read(O5),aa.resolveKeyframes(L5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:n,motionValue:i}=this;if(t[0]===null){const u=i?.get(),l=t[t.length-1];if(u!==void 0)t[0]=u;else if(n&&s){const p=n.readValue(s,l);p!=null&&(t[0]=p)}t[0]===void 0&&(t[0]=l),i&&u===void 0&&i.set(t[0])}x7(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Oi.delete(this)}cancel(){this.state==="scheduled"&&(Oi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const j7=a=>a.startsWith("--");function C7(a,t,s){j7(t)?a.style.setProperty(t,s):a.style[t]=s}const S7=zb(()=>window.ScrollTimeline!==void 0),$7={};function T7(a,t){const s=zb(a);return()=>$7[t]??s()}const V5=T7(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),id=([a,t,s,n])=>`cubic-bezier(${a}, ${t}, ${s}, ${n})`,Mk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:id([0,.65,.55,1]),circOut:id([.55,0,1,.45]),backIn:id([.31,.01,.66,-.59]),backOut:id([.33,1.53,.69,.99])};function F5(a,t){if(a)return typeof a=="function"?V5()?M5(a,t):"ease-out":S5(a)?id(a):Array.isArray(a)?a.map(s=>F5(s,t)||Mk.easeOut):Mk[a]}function P7(a,t,s,{delay:n=0,duration:i=300,repeat:u=0,repeatType:l="loop",ease:p="easeOut",times:h}={},k=void 0){const S={[t]:s};h&&(S.offset=h);const $=F5(p,i);Array.isArray($)&&(S.easing=$);const D={delay:n,duration:i,easing:Array.isArray($)?"linear":$,fill:"both",iterations:u+1,direction:l==="reverse"?"alternate":"normal"};return k&&(D.pseudoElement=k),a.animate(S,D)}function U5(a){return typeof a=="function"&&"applyToOptions"in a}function E7({type:a,...t}){return U5(a)&&V5()?a.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class I7 extends Kb{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:s,name:n,keyframes:i,pseudoElement:u,allowFlatten:l=!1,finalKeyframe:p,onComplete:h}=t;this.isPseudoElement=!!u,this.allowFlatten=l,this.options=t,Mb(typeof t.type!="string");const k=E7(t);this.animation=P7(s,n,i,k,u),k.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const S=Gb(i,this.options,p,this.speed);this.updateMotionValue?this.updateMotionValue(S):C7(s,n,S),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Cn(Number(t))}get time(){return Cn(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=jn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&S7()?(this.animation.timeline=t,Os):s(this)}}const q5={anticipate:k5,backInOut:w5,circInOut:j5};function D7(a){return a in q5}function _7(a){typeof a.ease=="string"&&D7(a.ease)&&(a.ease=q5[a.ease])}const zk=10;class A7 extends I7{constructor(t){_7(t),B5(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:s,onUpdate:n,onComplete:i,element:u,...l}=this.options;if(!s)return;if(t!==void 0){s.set(t);return}const p=new Qb({...l,autoplay:!1}),h=jn(this.finishedTime??this.time);s.setWithVelocity(p.sample(h-zk).value,p.sample(h).value,zk),p.stop()}}const Bk=(a,t)=>t==="zIndex"?!1:!!(typeof a=="number"||Array.isArray(a)||typeof a=="string"&&(ai.test(a)||a==="0")&&!a.startsWith("url("));function R7(a){const t=a[0];if(a.length===1)return!0;for(let s=0;s<a.length;s++)if(a[s]!==t)return!0}function M7(a,t,s,n){const i=a[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const u=a[a.length-1],l=Bk(i,t),p=Bk(u,t);return!l||!p?!1:R7(a)||(s==="spring"||U5(s))&&n}function Xb(a){return h5(a)&&"offsetHeight"in a}const z7=new Set(["opacity","clipPath","filter","transform"]),B7=zb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function L7(a){const{motionValue:t,name:s,repeatDelay:n,repeatType:i,damping:u,type:l}=a;if(!Xb(t?.owner?.current))return!1;const{onUpdate:p,transformTemplate:h}=t.owner.getProps();return B7()&&s&&z7.has(s)&&(s!=="transform"||!h)&&!p&&!n&&i!=="mirror"&&u!==0&&l!=="inertia"}const O7=40;class V7 extends Kb{constructor({autoplay:t=!0,delay:s=0,type:n="keyframes",repeat:i=0,repeatDelay:u=0,repeatType:l="loop",keyframes:p,name:h,motionValue:k,element:S,...$}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ds.now();const D={autoplay:t,delay:s,type:n,repeat:i,repeatDelay:u,repeatType:l,name:h,motionValue:k,element:S,...$},O=S?.KeyframeResolver||Yb;this.keyframeResolver=new O(p,(Y,W,N)=>this.onKeyframesResolved(Y,W,D,!N),h,k,S),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,s,n,i){this.keyframeResolver=void 0;const{name:u,type:l,velocity:p,delay:h,isHandoff:k,onUpdate:S}=n;this.resolvedAt=ds.now(),M7(t,u,l,p)||((io.instantAnimations||!h)&&S?.(Gb(t,n,s)),t[0]=t[t.length-1],n.duration=0,n.repeat=0);const D={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>O7?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...n,keyframes:t},O=!k&&L7(D)?new A7({...D,element:D.motionValue.owner.current}):new Qb(D);O.finished.then(()=>this.notifyFinished()).catch(Os),this.pendingTimeline&&(this.stopTimeline=O.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=O}get finished(){return this._animation?this.animation.finished:this._finished}then(t,s){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),N7()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const F7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function U7(a){const t=F7.exec(a);if(!t)return[,];const[,s,n,i]=t;return[`--${s??n}`,i]}function H5(a,t,s=1){const[n,i]=U7(a);if(!n)return;const u=window.getComputedStyle(t).getPropertyValue(n);if(u){const l=u.trim();return p5(l)?parseFloat(l):l}return Fb(i)?H5(i,t,s+1):i}function Jb(a,t){return a?.[t]??a?.default??a}const W5=new Set(["width","height","top","left","right","bottom",...gc]),q7={test:a=>a==="auto",parse:a=>a},G5=a=>t=>t.test(a),K5=[xc,or,Sn,zo,RR,AR,q7],Lk=a=>K5.find(G5(a));function H7(a){return typeof a=="number"?a===0:a!==null?a==="none"||a==="0"||x5(a):!0}const W7=new Set(["brightness","contrast","saturate","opacity"]);function G7(a){const[t,s]=a.slice(0,-1).split("(");if(t==="drop-shadow")return a;const[n]=s.match(Ub)||[];if(!n)return a;const i=s.replace(n,"");let u=W7.has(t)?1:0;return n!==s&&(u*=100),t+"("+u+i+")"}const K7=/\b([a-z-]*)\(.*?\)/gu,og={...ai,getAnimatableNone:a=>{const t=a.match(K7);return t?t.map(G7).join(" "):a}},Ok={...xc,transform:Math.round},Q7={rotate:zo,rotateX:zo,rotateY:zo,rotateZ:zo,scale:D0,scaleX:D0,scaleY:D0,scaleZ:D0,skew:zo,skewX:zo,skewY:zo,distance:or,translateX:or,translateY:or,translateZ:or,x:or,y:or,z:or,perspective:or,transformPerspective:or,opacity:Ad,originX:$k,originY:$k,originZ:or},Zb={borderWidth:or,borderTopWidth:or,borderRightWidth:or,borderBottomWidth:or,borderLeftWidth:or,borderRadius:or,radius:or,borderTopLeftRadius:or,borderTopRightRadius:or,borderBottomRightRadius:or,borderBottomLeftRadius:or,width:or,maxWidth:or,height:or,maxHeight:or,top:or,right:or,bottom:or,left:or,padding:or,paddingTop:or,paddingRight:or,paddingBottom:or,paddingLeft:or,margin:or,marginTop:or,marginRight:or,marginBottom:or,marginLeft:or,backgroundPositionX:or,backgroundPositionY:or,...Q7,zIndex:Ok,fillOpacity:Ad,strokeOpacity:Ad,numOctaves:Ok},Y7={...Zb,color:Oa,backgroundColor:Oa,outlineColor:Oa,fill:Oa,stroke:Oa,borderColor:Oa,borderTopColor:Oa,borderRightColor:Oa,borderBottomColor:Oa,borderLeftColor:Oa,filter:og,WebkitFilter:og},Q5=a=>Y7[a];function Y5(a,t){let s=Q5(a);return s!==og&&(s=ai),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const X7=new Set(["auto","none","0"]);function J7(a,t,s){let n=0,i;for(;n<a.length&&!i;){const u=a[n];typeof u=="string"&&!X7.has(u)&&Rd(u).values.length&&(i=a[n]),n++}if(i&&s)for(const u of t)a[u]=Y5(s,i)}class Z7 extends Yb{constructor(t,s,n,i,u){super(t,s,n,i,u,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:n}=this;if(!s||!s.current)return;super.readKeyframes();for(let h=0;h<t.length;h++){let k=t[h];if(typeof k=="string"&&(k=k.trim(),Fb(k))){const S=H5(k,s.current);S!==void 0&&(t[h]=S),h===t.length-1&&(this.finalKeyframe=k)}}if(this.resolveNoneKeyframes(),!W5.has(n)||t.length!==2)return;const[i,u]=t,l=Lk(i),p=Lk(u);if(l!==p)if(Rk(l)&&Rk(p))for(let h=0;h<t.length;h++){const k=t[h];typeof k=="string"&&(t[h]=parseFloat(k))}else Li[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,n=[];for(let i=0;i<t.length;i++)(t[i]===null||H7(t[i]))&&n.push(i);n.length&&J7(t,n,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Li[n](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const i=s[s.length-1];i!==void 0&&t.getValue(n,i).jump(i,!1)}measureEndState(){const{element:t,name:s,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const i=t.getValue(s);i&&i.jump(this.measuredOrigin,!1);const u=n.length-1,l=n[u];n[u]=Li[s](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([p,h])=>{t.getValue(p).set(h)}),this.resolveNoneKeyframes()}}function eM(a,t,s){if(a instanceof EventTarget)return[a];if(typeof a=="string"){let n=document;const i=s?.[a]??n.querySelectorAll(a);return i?Array.from(i):[]}return Array.from(a)}const Vk=30,tM=a=>!isNaN(parseFloat(a));class rM{constructor(t,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const u=ds.now();if(this.updatedAt!==u&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();i&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=ds.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=tM(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new Bb);const n=this.events[t].add(s);return t==="change"?()=>{n(),aa.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t,s=!0){!s||!this.passiveEffect?this.updateAndNotify(t,s):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,s,n){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ds.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Vk)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Vk);return g5(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ac(a,t){return new rM(a,t)}const X5=(a,t)=>t&&typeof a=="number"?t.transform(a):a,{schedule:ef}=$5(queueMicrotask,!1),tn={x:!1,y:!1};function J5(){return tn.x||tn.y}function aM(a){return a==="x"||a==="y"?tn[a]?null:(tn[a]=!0,()=>{tn[a]=!1}):tn.x||tn.y?null:(tn.x=tn.y=!0,()=>{tn.x=tn.y=!1})}function Z5(a,t){const s=eM(a),n=new AbortController,i={passive:!0,...t,signal:n.signal};return[s,i,()=>n.abort()]}function Fk(a){return!(a.pointerType==="touch"||J5())}function sM(a,t,s={}){const[n,i,u]=Z5(a,s),l=p=>{if(!Fk(p))return;const{target:h}=p,k=t(h,p);if(typeof k!="function"||!h)return;const S=$=>{Fk($)&&(k($),h.removeEventListener("pointerleave",S))};h.addEventListener("pointerleave",S,i)};return n.forEach(p=>{p.addEventListener("pointerenter",l,i)}),u}const e3=(a,t)=>t?a===t?!0:e3(a,t.parentElement):!1,tf=a=>a.pointerType==="mouse"?typeof a.button!="number"||a.button<=0:a.isPrimary!==!1,nM=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function oM(a){return nM.has(a.tagName)||a.tabIndex!==-1}const K0=new WeakSet;function Uk(a){return t=>{t.key==="Enter"&&a(t)}}function dx(a,t){a.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const iM=(a,t)=>{const s=a.currentTarget;if(!s)return;const n=Uk(()=>{if(K0.has(s))return;dx(s,"down");const i=Uk(()=>{dx(s,"up")}),u=()=>dx(s,"cancel");s.addEventListener("keyup",i,t),s.addEventListener("blur",u,t)});s.addEventListener("keydown",n,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),t)};function qk(a){return tf(a)&&!J5()}function lM(a,t,s={}){const[n,i,u]=Z5(a,s),l=p=>{const h=p.currentTarget;if(!qk(p))return;K0.add(h);const k=t(h,p),S=(O,Y)=>{window.removeEventListener("pointerup",$),window.removeEventListener("pointercancel",D),K0.has(h)&&K0.delete(h),qk(O)&&typeof k=="function"&&k(O,{success:Y})},$=O=>{S(O,h===window||h===document||s.useGlobalTarget||e3(h,O.target))},D=O=>{S(O,!1)};window.addEventListener("pointerup",$,i),window.addEventListener("pointercancel",D,i)};return n.forEach(p=>{(s.useGlobalTarget?window:p).addEventListener("pointerdown",l,i),Xb(p)&&(p.addEventListener("focus",k=>iM(k,i)),!oM(p)&&!p.hasAttribute("tabindex")&&(p.tabIndex=0))}),u}function t3(a){return h5(a)&&"ownerSVGElement"in a}function cM(a){return t3(a)&&a.tagName==="svg"}const Fa=a=>!!(a&&a.getVelocity),dM=[...K5,Oa,ai],uM=a=>dM.find(G5(a)),rf=m.createContext({transformPagePoint:a=>a,isStatic:!1,reducedMotion:"never"});class mM extends m.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const n=s.offsetParent,i=Xb(n)&&n.offsetWidth||0,u=this.props.sizeRef.current;u.height=s.offsetHeight||0,u.width=s.offsetWidth||0,u.top=s.offsetTop,u.left=s.offsetLeft,u.right=i-u.width-u.left}return null}componentDidUpdate(){}render(){return this.props.children}}function pM({children:a,isPresent:t,anchorX:s}){const n=m.useId(),i=m.useRef(null),u=m.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=m.useContext(rf);return m.useInsertionEffect(()=>{const{width:p,height:h,top:k,left:S,right:$}=u.current;if(t||!i.current||!p||!h)return;const D=s==="left"?`left: ${S}`:`right: ${$}`;i.current.dataset.motionPopId=n;const O=document.createElement("style");return l&&(O.nonce=l),document.head.appendChild(O),O.sheet&&O.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${h}px !important;
            ${D}px !important;
            top: ${k}px !important;
          }
        `),()=>{document.head.contains(O)&&document.head.removeChild(O)}},[t]),e.jsx(mM,{isPresent:t,childRef:i,sizeRef:u,children:m.cloneElement(a,{ref:i})})}const hM=({children:a,initial:t,isPresent:s,onExitComplete:n,custom:i,presenceAffectsLayout:u,mode:l,anchorX:p})=>{const h=Db(xM),k=m.useId();let S=!0,$=m.useMemo(()=>(S=!1,{id:k,initial:t,isPresent:s,custom:i,onExitComplete:D=>{h.set(D,!0);for(const O of h.values())if(!O)return;n&&n()},register:D=>(h.set(D,!1),()=>h.delete(D))}),[s,h,n]);return u&&S&&($={...$}),m.useMemo(()=>{h.forEach((D,O)=>h.set(O,!1))},[s]),m.useEffect(()=>{!s&&!h.size&&n&&n()},[s]),l==="popLayout"&&(a=e.jsx(pM,{isPresent:s,anchorX:p,children:a})),e.jsx(cp.Provider,{value:$,children:a})};function xM(){return new Map}function r3(a=!0){const t=m.useContext(cp);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:i}=t,u=m.useId();m.useEffect(()=>{if(a)return i(u)},[a]);const l=m.useCallback(()=>a&&n&&n(u),[u,n,a]);return!s&&n?[!1,l]:[!0]}const _0=a=>a.key||"";function Hk(a){const t=[];return m.Children.forEach(a,s=>{m.isValidElement(s)&&t.push(s)}),t}const ue=({children:a,custom:t,initial:s=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:u="sync",propagate:l=!1,anchorX:p="left"})=>{const[h,k]=r3(l),S=m.useMemo(()=>Hk(a),[a]),$=l&&!h?[]:S.map(_0),D=m.useRef(!0),O=m.useRef(S),Y=Db(()=>new Map),[W,N]=m.useState(S),[G,H]=m.useState(S);m5(()=>{D.current=!1,O.current=S;for(let oe=0;oe<G.length;oe++){const $e=_0(G[oe]);$.includes($e)?Y.delete($e):Y.get($e)!==!0&&Y.set($e,!1)}},[G,$.length,$.join("-")]);const U=[];if(S!==W){let oe=[...S];for(let $e=0;$e<G.length;$e++){const K=G[$e],V=_0(K);$.includes(V)||(oe.splice($e,0,K),U.push(K))}return u==="wait"&&U.length&&(oe=U),H(Hk(oe)),N(S),null}const{forceRender:ne}=m.useContext(Ib);return e.jsx(e.Fragment,{children:G.map(oe=>{const $e=_0(oe),K=l&&!h?!1:S===G||$.includes($e),V=()=>{if(Y.has($e))Y.set($e,!0);else return;let L=!0;Y.forEach(y=>{y||(L=!1)}),L&&(ne?.(),H(O.current),l&&k?.(),n&&n())};return e.jsx(hM,{isPresent:K,initial:!D.current||s?void 0:!1,custom:t,presenceAffectsLayout:i,mode:u,onExitComplete:K?void 0:V,anchorX:p,children:oe},$e)})})},a3=m.createContext({strict:!1}),Wk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},sc={};for(const a in Wk)sc[a]={isEnabled:t=>Wk[a].some(s=>!!t[s])};function gM(a){for(const t in a)sc[t]={...sc[t],...a[t]}}const bM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $m(a){return a.startsWith("while")||a.startsWith("drag")&&a!=="draggable"||a.startsWith("layout")||a.startsWith("onTap")||a.startsWith("onPan")||a.startsWith("onLayout")||bM.has(a)}let s3=a=>!$m(a);function fM(a){a&&(s3=t=>t.startsWith("on")?!$m(t):a(t))}try{fM(require("@emotion/is-prop-valid").default)}catch{}function yM(a,t,s){const n={};for(const i in a)i==="values"&&typeof a.values=="object"||(s3(i)||s===!0&&$m(i)||!t&&!$m(i)||a.draggable&&i.startsWith("onDrag"))&&(n[i]=a[i]);return n}function vM(a){if(typeof Proxy>"u")return a;const t=new Map,s=(...n)=>a(...n);return new Proxy(s,{get:(n,i)=>i==="create"?a:(t.has(i)||t.set(i,a(i)),t.get(i))})}const dp=m.createContext({});function up(a){return a!==null&&typeof a=="object"&&typeof a.start=="function"}function Md(a){return typeof a=="string"||Array.isArray(a)}const af=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sf=["initial",...af];function mp(a){return up(a.animate)||sf.some(t=>Md(a[t]))}function n3(a){return!!(mp(a)||a.variants)}function wM(a,t){if(mp(a)){const{initial:s,animate:n}=a;return{initial:s===!1||Md(s)?s:void 0,animate:Md(n)?n:void 0}}return a.inherit!==!1?t:{}}function kM(a){const{initial:t,animate:s}=wM(a,m.useContext(dp));return m.useMemo(()=>({initial:t,animate:s}),[Gk(t),Gk(s)])}function Gk(a){return Array.isArray(a)?a.join(" "):a}const NM=Symbol.for("motionComponentSymbol");function Ul(a){return a&&typeof a=="object"&&Object.prototype.hasOwnProperty.call(a,"current")}function jM(a,t,s){return m.useCallback(n=>{n&&a.onMount&&a.onMount(n),t&&(n?t.mount(n):t.unmount()),s&&(typeof s=="function"?s(n):Ul(s)&&(s.current=n))},[t])}const nf=a=>a.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),CM="framerAppearId",o3="data-"+nf(CM),i3=m.createContext({});function SM(a,t,s,n,i){const{visualElement:u}=m.useContext(dp),l=m.useContext(a3),p=m.useContext(cp),h=m.useContext(rf).reducedMotion,k=m.useRef(null);n=n||l.renderer,!k.current&&n&&(k.current=n(a,{visualState:t,parent:u,props:s,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:h}));const S=k.current,$=m.useContext(i3);S&&!S.projection&&i&&(S.type==="html"||S.type==="svg")&&$M(k.current,s,i,$);const D=m.useRef(!1);m.useInsertionEffect(()=>{S&&D.current&&S.update(s,p)});const O=s[o3],Y=m.useRef(!!O&&!window.MotionHandoffIsComplete?.(O)&&window.MotionHasOptimisedAnimation?.(O));return m5(()=>{S&&(D.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),ef.render(S.render),Y.current&&S.animationState&&S.animationState.animateChanges())}),m.useEffect(()=>{S&&(!Y.current&&S.animationState&&S.animationState.animateChanges(),Y.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(O)}),Y.current=!1))}),S}function $M(a,t,s,n){const{layoutId:i,layout:u,drag:l,dragConstraints:p,layoutScroll:h,layoutRoot:k,layoutCrossfade:S}=t;a.projection=new s(a.latestValues,t["data-framer-portal-id"]?void 0:l3(a.parent)),a.projection.setOptions({layoutId:i,layout:u,alwaysMeasureLayout:!!l||p&&Ul(p),visualElement:a,animationType:typeof u=="string"?u:"both",initialPromotionConfig:n,crossfade:S,layoutScroll:h,layoutRoot:k})}function l3(a){if(a)return a.options.allowProjection!==!1?a.projection:l3(a.parent)}function TM({preloadedFeatures:a,createVisualElement:t,useRender:s,useVisualState:n,Component:i}){a&&gM(a);function u(p,h){let k;const S={...m.useContext(rf),...p,layoutId:PM(p)},{isStatic:$}=S,D=kM(p),O=n(p,$);if(!$&&_b){EM();const Y=IM(S);k=Y.MeasureLayout,D.visualElement=SM(i,O,S,t,Y.ProjectionNode)}return e.jsxs(dp.Provider,{value:D,children:[k&&D.visualElement?e.jsx(k,{visualElement:D.visualElement,...S}):null,s(i,p,jM(O,D.visualElement,h),O,$,D.visualElement)]})}u.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const l=m.forwardRef(u);return l[NM]=i,l}function PM({layoutId:a}){const t=m.useContext(Ib).id;return t&&a!==void 0?t+"-"+a:a}function EM(a,t){m.useContext(a3).strict}function IM(a){const{drag:t,layout:s}=sc;if(!t&&!s)return{};const n={...t,...s};return{MeasureLayout:t?.isEnabled(a)||s?.isEnabled(a)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const zd={};function DM(a){for(const t in a)zd[t]=a[t],Vb(t)&&(zd[t].isCSSVariable=!0)}function c3(a,{layout:t,layoutId:s}){return bc.has(a)||a.startsWith("origin")||(t||s!==void 0)&&(!!zd[a]||a==="opacity")}const _M={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},AM=gc.length;function RM(a,t,s){let n="",i=!0;for(let u=0;u<AM;u++){const l=gc[u],p=a[l];if(p===void 0)continue;let h=!0;if(typeof p=="number"?h=p===(l.startsWith("scale")?1:0):h=parseFloat(p)===0,!h||s){const k=X5(p,Zb[l]);if(!h){i=!1;const S=_M[l]||l;n+=`${S}(${k}) `}s&&(t[l]=k)}}return n=n.trim(),s?n=s(t,i?"":n):i&&(n="none"),n}function of(a,t,s){const{style:n,vars:i,transformOrigin:u}=a;let l=!1,p=!1;for(const h in t){const k=t[h];if(bc.has(h)){l=!0;continue}else if(Vb(h)){i[h]=k;continue}else{const S=X5(k,Zb[h]);h.startsWith("origin")?(p=!0,u[h]=S):n[h]=S}}if(t.transform||(l||s?n.transform=RM(t,a.transform,s):n.transform&&(n.transform="none")),p){const{originX:h="50%",originY:k="50%",originZ:S=0}=u;n.transformOrigin=`${h} ${k} ${S}`}}const lf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function d3(a,t,s){for(const n in t)!Fa(t[n])&&!c3(n,s)&&(a[n]=t[n])}function MM({transformTemplate:a},t){return m.useMemo(()=>{const s=lf();return of(s,t,a),Object.assign({},s.vars,s.style)},[t])}function zM(a,t){const s=a.style||{},n={};return d3(n,s,a),Object.assign(n,MM(a,t)),n}function BM(a,t){const s={},n=zM(a,t);return a.drag&&a.dragListener!==!1&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=a.drag===!0?"none":`pan-${a.drag==="x"?"y":"x"}`),a.tabIndex===void 0&&(a.onTap||a.onTapStart||a.whileTap)&&(s.tabIndex=0),s.style=n,s}const LM={offset:"stroke-dashoffset",array:"stroke-dasharray"},OM={offset:"strokeDashoffset",array:"strokeDasharray"};function VM(a,t,s=1,n=0,i=!0){a.pathLength=1;const u=i?LM:OM;a[u.offset]=or.transform(-n);const l=or.transform(t),p=or.transform(s);a[u.array]=`${l} ${p}`}function u3(a,{attrX:t,attrY:s,attrScale:n,pathLength:i,pathSpacing:u=1,pathOffset:l=0,...p},h,k,S){if(of(a,p,k),h){a.style.viewBox&&(a.attrs.viewBox=a.style.viewBox);return}a.attrs=a.style,a.style={};const{attrs:$,style:D}=a;$.transform&&(D.transform=$.transform,delete $.transform),(D.transform||$.transformOrigin)&&(D.transformOrigin=$.transformOrigin??"50% 50%",delete $.transformOrigin),D.transform&&(D.transformBox=S?.transformBox??"fill-box",delete $.transformBox),t!==void 0&&($.x=t),s!==void 0&&($.y=s),n!==void 0&&($.scale=n),i!==void 0&&VM($,i,u,l,!1)}const m3=()=>({...lf(),attrs:{}}),p3=a=>typeof a=="string"&&a.toLowerCase()==="svg";function FM(a,t,s,n){const i=m.useMemo(()=>{const u=m3();return u3(u,t,p3(n),a.transformTemplate,a.style),{...u.attrs,style:{...u.style}}},[t]);if(a.style){const u={};d3(u,a.style,a),i.style={...u,...i.style}}return i}const UM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cf(a){return typeof a!="string"||a.includes("-")?!1:!!(UM.indexOf(a)>-1||/[A-Z]/u.test(a))}function qM(a=!1){return(s,n,i,{latestValues:u},l)=>{const h=(cf(s)?FM:BM)(n,u,l,s),k=yM(n,typeof s=="string",a),S=s!==m.Fragment?{...k,...h,ref:i}:{},{children:$}=n,D=m.useMemo(()=>Fa($)?$.get():$,[$]);return m.createElement(s,{...S,children:D})}}function Kk(a){const t=[{},{}];return a?.values.forEach((s,n)=>{t[0][n]=s.get(),t[1][n]=s.getVelocity()}),t}function df(a,t,s,n){if(typeof t=="function"){const[i,u]=Kk(n);t=t(s!==void 0?s:a.custom,i,u)}if(typeof t=="string"&&(t=a.variants&&a.variants[t]),typeof t=="function"){const[i,u]=Kk(n);t=t(s!==void 0?s:a.custom,i,u)}return t}function Q0(a){return Fa(a)?a.get():a}function HM({scrapeMotionValuesFromProps:a,createRenderState:t},s,n,i){return{latestValues:WM(s,n,i,a),renderState:t()}}const h3=a=>(t,s)=>{const n=m.useContext(dp),i=m.useContext(cp),u=()=>HM(a,t,n,i);return s?u():Db(u)};function WM(a,t,s,n){const i={},u=n(a,{});for(const D in u)i[D]=Q0(u[D]);let{initial:l,animate:p}=a;const h=mp(a),k=n3(a);t&&k&&!h&&a.inherit!==!1&&(l===void 0&&(l=t.initial),p===void 0&&(p=t.animate));let S=s?s.initial===!1:!1;S=S||l===!1;const $=S?p:l;if($&&typeof $!="boolean"&&!up($)){const D=Array.isArray($)?$:[$];for(let O=0;O<D.length;O++){const Y=df(a,D[O]);if(Y){const{transitionEnd:W,transition:N,...G}=Y;for(const H in G){let U=G[H];if(Array.isArray(U)){const ne=S?U.length-1:0;U=U[ne]}U!==null&&(i[H]=U)}for(const H in W)i[H]=W[H]}}}return i}function uf(a,t,s){const{style:n}=a,i={};for(const u in n)(Fa(n[u])||t.style&&Fa(t.style[u])||c3(u,a)||s?.getValue(u)?.liveStyle!==void 0)&&(i[u]=n[u]);return i}const GM={useVisualState:h3({scrapeMotionValuesFromProps:uf,createRenderState:lf})};function x3(a,t,s){const n=uf(a,t,s);for(const i in a)if(Fa(a[i])||Fa(t[i])){const u=gc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[u]=a[i]}return n}const KM={useVisualState:h3({scrapeMotionValuesFromProps:x3,createRenderState:m3})};function QM(a,t){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...cf(n)?KM:GM,preloadedFeatures:a,useRender:qM(i),createVisualElement:t,Component:n};return TM(l)}}function Bd(a,t,s){const n=a.getProps();return df(n,t,s!==void 0?s:n.custom,a)}const ig=a=>Array.isArray(a);function YM(a,t,s){a.hasValue(t)?a.getValue(t).set(s):a.addValue(t,ac(s))}function XM(a){return ig(a)?a[a.length-1]||0:a}function JM(a,t){const s=Bd(a,t);let{transitionEnd:n={},transition:i={},...u}=s||{};u={...u,...n};for(const l in u){const p=XM(u[l]);YM(a,l,p)}}function ZM(a){return!!(Fa(a)&&a.add)}function lg(a,t){const s=a.getValue("willChange");if(ZM(s))return s.add(t);if(!s&&io.WillChange){const n=new io.WillChange("auto");a.addValue("willChange",n),n.add(t)}}function g3(a){return a.props[o3]}const ez=a=>a!==null;function tz(a,{repeat:t,repeatType:s="loop"},n){const i=a.filter(ez),u=t&&s!=="loop"&&t%2===1?0:i.length-1;return i[u]}const rz={type:"spring",stiffness:500,damping:25,restSpeed:10},az=a=>({type:"spring",stiffness:550,damping:a===0?2*Math.sqrt(550):30,restSpeed:10}),sz={type:"keyframes",duration:.8},nz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},oz=(a,{keyframes:t})=>t.length>2?sz:bc.has(a)?a.startsWith("scale")?az(t[1]):rz:nz;function iz({when:a,delay:t,delayChildren:s,staggerChildren:n,staggerDirection:i,repeat:u,repeatType:l,repeatDelay:p,from:h,elapsed:k,...S}){return!!Object.keys(S).length}const mf=(a,t,s,n={},i,u)=>l=>{const p=Jb(n,a)||{},h=p.delay||n.delay||0;let{elapsed:k=0}=n;k=k-jn(h);const S={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...p,delay:-k,onUpdate:D=>{t.set(D),p.onUpdate&&p.onUpdate(D)},onComplete:()=>{l(),p.onComplete&&p.onComplete()},name:a,motionValue:t,element:u?void 0:i};iz(p)||Object.assign(S,oz(a,S)),S.duration&&(S.duration=jn(S.duration)),S.repeatDelay&&(S.repeatDelay=jn(S.repeatDelay)),S.from!==void 0&&(S.keyframes[0]=S.from);let $=!1;if((S.type===!1||S.duration===0&&!S.repeatDelay)&&(S.duration=0,S.delay===0&&($=!0)),(io.instantAnimations||io.skipAnimations)&&($=!0,S.duration=0,S.delay=0),S.allowFlatten=!p.type&&!p.ease,$&&!u&&t.get()!==void 0){const D=tz(S.keyframes,p);if(D!==void 0){aa.update(()=>{S.onUpdate(D),S.onComplete()});return}}return p.isSync?new Qb(S):new V7(S)};function lz({protectedKeys:a,needsAnimating:t},s){const n=a.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,n}function b3(a,t,{delay:s=0,transitionOverride:n,type:i}={}){let{transition:u=a.getDefaultTransition(),transitionEnd:l,...p}=t;n&&(u=n);const h=[],k=i&&a.animationState&&a.animationState.getState()[i];for(const S in p){const $=a.getValue(S,a.latestValues[S]??null),D=p[S];if(D===void 0||k&&lz(k,S))continue;const O={delay:s,...Jb(u||{},S)},Y=$.get();if(Y!==void 0&&!$.isAnimating&&!Array.isArray(D)&&D===Y&&!O.velocity)continue;let W=!1;if(window.MotionHandoffAnimation){const G=g3(a);if(G){const H=window.MotionHandoffAnimation(G,S,aa);H!==null&&(O.startTime=H,W=!0)}}lg(a,S),$.start(mf(S,$,D,a.shouldReduceMotion&&W5.has(S)?{type:!1}:O,a,W));const N=$.animation;N&&h.push(N)}return l&&Promise.all(h).then(()=>{aa.update(()=>{l&&JM(a,l)})}),h}function cg(a,t,s={}){const n=Bd(a,t,s.type==="exit"?a.presenceContext?.custom:void 0);let{transition:i=a.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(i=s.transitionOverride);const u=n?()=>Promise.all(b3(a,n,s)):()=>Promise.resolve(),l=a.variantChildren&&a.variantChildren.size?(h=0)=>{const{delayChildren:k=0,staggerChildren:S,staggerDirection:$}=i;return cz(a,t,k+h,S,$,s)}:()=>Promise.resolve(),{when:p}=i;if(p){const[h,k]=p==="beforeChildren"?[u,l]:[l,u];return h().then(()=>k())}else return Promise.all([u(),l(s.delay)])}function cz(a,t,s=0,n=0,i=1,u){const l=[],p=(a.variantChildren.size-1)*n,h=i===1?(k=0)=>k*n:(k=0)=>p-k*n;return Array.from(a.variantChildren).sort(dz).forEach((k,S)=>{k.notify("AnimationStart",t),l.push(cg(k,t,{...u,delay:s+h(S)}).then(()=>k.notify("AnimationComplete",t)))}),Promise.all(l)}function dz(a,t){return a.sortNodePosition(t)}function uz(a,t,s={}){a.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(u=>cg(a,u,s));n=Promise.all(i)}else if(typeof t=="string")n=cg(a,t,s);else{const i=typeof t=="function"?Bd(a,t,s.custom):t;n=Promise.all(b3(a,i,s))}return n.then(()=>{a.notify("AnimationComplete",t)})}function f3(a,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==a.length)return!1;for(let n=0;n<s;n++)if(t[n]!==a[n])return!1;return!0}const mz=sf.length;function y3(a){if(!a)return;if(!a.isControllingVariants){const s=a.parent?y3(a.parent)||{}:{};return a.props.initial!==void 0&&(s.initial=a.props.initial),s}const t={};for(let s=0;s<mz;s++){const n=sf[s],i=a.props[n];(Md(i)||i===!1)&&(t[n]=i)}return t}const pz=[...af].reverse(),hz=af.length;function xz(a){return t=>Promise.all(t.map(({animation:s,options:n})=>uz(a,s,n)))}function gz(a){let t=xz(a),s=Qk(),n=!0;const i=h=>(k,S)=>{const $=Bd(a,S,h==="exit"?a.presenceContext?.custom:void 0);if($){const{transition:D,transitionEnd:O,...Y}=$;k={...k,...Y,...O}}return k};function u(h){t=h(a)}function l(h){const{props:k}=a,S=y3(a.parent)||{},$=[],D=new Set;let O={},Y=1/0;for(let N=0;N<hz;N++){const G=pz[N],H=s[G],U=k[G]!==void 0?k[G]:S[G],ne=Md(U),oe=G===h?H.isActive:null;oe===!1&&(Y=N);let $e=U===S[G]&&U!==k[G]&&ne;if($e&&n&&a.manuallyAnimateOnMount&&($e=!1),H.protectedKeys={...O},!H.isActive&&oe===null||!U&&!H.prevProp||up(U)||typeof U=="boolean")continue;const K=bz(H.prevProp,U);let V=K||G===h&&H.isActive&&!$e&&ne||N>Y&&ne,L=!1;const y=Array.isArray(U)?U:[U];let se=y.reduce(i(G),{});oe===!1&&(se={});const{prevResolvedValues:ee={}}=H,re={...ee,...se},He=Je=>{V=!0,D.has(Je)&&(L=!0,D.delete(Je)),H.needsAnimating[Je]=!0;const fe=a.getValue(Je);fe&&(fe.liveStyle=!1)};for(const Je in re){const fe=se[Je],Ne=ee[Je];if(O.hasOwnProperty(Je))continue;let ye=!1;ig(fe)&&ig(Ne)?ye=!f3(fe,Ne):ye=fe!==Ne,ye?fe!=null?He(Je):D.add(Je):fe!==void 0&&D.has(Je)?He(Je):H.protectedKeys[Je]=!0}H.prevProp=U,H.prevResolvedValues=se,H.isActive&&(O={...O,...se}),n&&a.blockInitialAnimation&&(V=!1),V&&(!($e&&K)||L)&&$.push(...y.map(Je=>({animation:Je,options:{type:G}})))}if(D.size){const N={};if(typeof k.initial!="boolean"){const G=Bd(a,Array.isArray(k.initial)?k.initial[0]:k.initial);G&&G.transition&&(N.transition=G.transition)}D.forEach(G=>{const H=a.getBaseTarget(G),U=a.getValue(G);U&&(U.liveStyle=!0),N[G]=H??null}),$.push({animation:N})}let W=!!$.length;return n&&(k.initial===!1||k.initial===k.animate)&&!a.manuallyAnimateOnMount&&(W=!1),n=!1,W?t($):Promise.resolve()}function p(h,k){if(s[h].isActive===k)return Promise.resolve();a.variantChildren?.forEach($=>$.animationState?.setActive(h,k)),s[h].isActive=k;const S=l(h);for(const $ in s)s[$].protectedKeys={};return S}return{animateChanges:l,setActive:p,setAnimateFunction:u,getState:()=>s,reset:()=>{s=Qk(),n=!0}}}function bz(a,t){return typeof t=="string"?t!==a:Array.isArray(t)?!f3(t,a):!1}function Ii(a=!1){return{isActive:a,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Qk(){return{animate:Ii(!0),whileInView:Ii(),whileHover:Ii(),whileTap:Ii(),whileDrag:Ii(),whileFocus:Ii(),exit:Ii()}}class li{constructor(t){this.isMounted=!1,this.node=t}update(){}}class fz extends li{constructor(t){super(t),t.animationState||(t.animationState=gz(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();up(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let yz=0;class vz extends li{constructor(){super(...arguments),this.id=yz++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t);s&&!t&&i.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const wz={animation:{Feature:fz},exit:{Feature:vz}};function Ld(a,t,s,n={passive:!0}){return a.addEventListener(t,s,n),()=>a.removeEventListener(t,s)}function du(a){return{point:{x:a.pageX,y:a.pageY}}}const kz=a=>t=>tf(t)&&a(t,du(t));function fd(a,t,s,n){return Ld(a,t,kz(s),n)}function v3({top:a,left:t,right:s,bottom:n}){return{x:{min:t,max:s},y:{min:a,max:n}}}function Nz({x:a,y:t}){return{top:t.min,right:a.max,bottom:t.max,left:a.min}}function jz(a,t){if(!t)return a;const s=t({x:a.left,y:a.top}),n=t({x:a.right,y:a.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}const w3=1e-4,Cz=1-w3,Sz=1+w3,k3=.01,$z=0-k3,Tz=0+k3;function Ya(a){return a.max-a.min}function Pz(a,t,s){return Math.abs(a-t)<=s}function Yk(a,t,s,n=.5){a.origin=n,a.originPoint=ta(t.min,t.max,a.origin),a.scale=Ya(s)/Ya(t),a.translate=ta(s.min,s.max,a.origin)-a.originPoint,(a.scale>=Cz&&a.scale<=Sz||isNaN(a.scale))&&(a.scale=1),(a.translate>=$z&&a.translate<=Tz||isNaN(a.translate))&&(a.translate=0)}function yd(a,t,s,n){Yk(a.x,t.x,s.x,n?n.originX:void 0),Yk(a.y,t.y,s.y,n?n.originY:void 0)}function Xk(a,t,s){a.min=s.min+t.min,a.max=a.min+Ya(t)}function Ez(a,t,s){Xk(a.x,t.x,s.x),Xk(a.y,t.y,s.y)}function Jk(a,t,s){a.min=t.min-s.min,a.max=a.min+Ya(t)}function vd(a,t,s){Jk(a.x,t.x,s.x),Jk(a.y,t.y,s.y)}const Zk=()=>({translate:0,scale:1,origin:0,originPoint:0}),ql=()=>({x:Zk(),y:Zk()}),eN=()=>({min:0,max:0}),la=()=>({x:eN(),y:eN()});function Ls(a){return[a("x"),a("y")]}function ux(a){return a===void 0||a===1}function dg({scale:a,scaleX:t,scaleY:s}){return!ux(a)||!ux(t)||!ux(s)}function _i(a){return dg(a)||N3(a)||a.z||a.rotate||a.rotateX||a.rotateY||a.skewX||a.skewY}function N3(a){return tN(a.x)||tN(a.y)}function tN(a){return a&&a!=="0%"}function Tm(a,t,s){const n=a-s,i=t*n;return s+i}function rN(a,t,s,n,i){return i!==void 0&&(a=Tm(a,i,n)),Tm(a,s,n)+t}function ug(a,t=0,s=1,n,i){a.min=rN(a.min,t,s,n,i),a.max=rN(a.max,t,s,n,i)}function j3(a,{x:t,y:s}){ug(a.x,t.translate,t.scale,t.originPoint),ug(a.y,s.translate,s.scale,s.originPoint)}const aN=.999999999999,sN=1.0000000000001;function Iz(a,t,s,n=!1){const i=s.length;if(!i)return;t.x=t.y=1;let u,l;for(let p=0;p<i;p++){u=s[p],l=u.projectionDelta;const{visualElement:h}=u.options;h&&h.props.style&&h.props.style.display==="contents"||(n&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Wl(a,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,j3(a,l)),n&&_i(u.latestValues)&&Wl(a,u.latestValues))}t.x<sN&&t.x>aN&&(t.x=1),t.y<sN&&t.y>aN&&(t.y=1)}function Hl(a,t){a.min=a.min+t,a.max=a.max+t}function nN(a,t,s,n,i=.5){const u=ta(a.min,a.max,i);ug(a,t,s,u,n)}function Wl(a,t){nN(a.x,t.x,t.scaleX,t.scale,t.originX),nN(a.y,t.y,t.scaleY,t.scale,t.originY)}function C3(a,t){return v3(jz(a.getBoundingClientRect(),t))}function Dz(a,t,s){const n=C3(a,s),{scroll:i}=t;return i&&(Hl(n.x,i.offset.x),Hl(n.y,i.offset.y)),n}const S3=({current:a})=>a?a.ownerDocument.defaultView:null,oN=(a,t)=>Math.abs(a-t);function _z(a,t){const s=oN(a.x,t.x),n=oN(a.y,t.y);return Math.sqrt(s**2+n**2)}class $3{constructor(t,s,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:u=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const $=px(this.lastMoveEventInfo,this.history),D=this.startEvent!==null,O=_z($.offset,{x:0,y:0})>=3;if(!D&&!O)return;const{point:Y}=$,{timestamp:W}=Pa;this.history.push({...Y,timestamp:W});const{onStart:N,onMove:G}=this.handlers;D||(N&&N(this.lastMoveEvent,$),this.startEvent=this.lastMoveEvent),G&&G(this.lastMoveEvent,$)},this.handlePointerMove=($,D)=>{this.lastMoveEvent=$,this.lastMoveEventInfo=mx(D,this.transformPagePoint),aa.update(this.updatePoint,!0)},this.handlePointerUp=($,D)=>{this.end();const{onEnd:O,onSessionEnd:Y,resumeAnimation:W}=this.handlers;if(this.dragSnapToOrigin&&W&&W(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=px($.type==="pointercancel"?this.lastMoveEventInfo:mx(D,this.transformPagePoint),this.history);this.startEvent&&O&&O($,N),Y&&Y($,N)},!tf(t))return;this.dragSnapToOrigin=u,this.handlers=s,this.transformPagePoint=n,this.contextWindow=i||window;const l=du(t),p=mx(l,this.transformPagePoint),{point:h}=p,{timestamp:k}=Pa;this.history=[{...h,timestamp:k}];const{onSessionStart:S}=s;S&&S(t,px(p,this.history)),this.removeListeners=iu(fd(this.contextWindow,"pointermove",this.handlePointerMove),fd(this.contextWindow,"pointerup",this.handlePointerUp),fd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ri(this.updatePoint)}}function mx(a,t){return t?{point:t(a.point)}:a}function iN(a,t){return{x:a.x-t.x,y:a.y-t.y}}function px({point:a},t){return{point:a,delta:iN(a,T3(t)),offset:iN(a,Az(t)),velocity:Rz(t,.1)}}function Az(a){return a[0]}function T3(a){return a[a.length-1]}function Rz(a,t){if(a.length<2)return{x:0,y:0};let s=a.length-1,n=null;const i=T3(a);for(;s>=0&&(n=a[s],!(i.timestamp-n.timestamp>jn(t)));)s--;if(!n)return{x:0,y:0};const u=Cn(i.timestamp-n.timestamp);if(u===0)return{x:0,y:0};const l={x:(i.x-n.x)/u,y:(i.y-n.y)/u};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function Mz(a,{min:t,max:s},n){return t!==void 0&&a<t?a=n?ta(t,a,n.min):Math.max(a,t):s!==void 0&&a>s&&(a=n?ta(s,a,n.max):Math.min(a,s)),a}function lN(a,t,s){return{min:t!==void 0?a.min+t:void 0,max:s!==void 0?a.max+s-(a.max-a.min):void 0}}function zz(a,{top:t,left:s,bottom:n,right:i}){return{x:lN(a.x,s,i),y:lN(a.y,t,n)}}function cN(a,t){let s=t.min-a.min,n=t.max-a.max;return t.max-t.min<a.max-a.min&&([s,n]=[n,s]),{min:s,max:n}}function Bz(a,t){return{x:cN(a.x,t.x),y:cN(a.y,t.y)}}function Lz(a,t){let s=.5;const n=Ya(a),i=Ya(t);return i>n?s=_d(t.min,t.max-n,a.min):n>i&&(s=_d(a.min,a.max-i,t.min)),oo(0,1,s)}function Oz(a,t){const s={};return t.min!==void 0&&(s.min=t.min-a.min),t.max!==void 0&&(s.max=t.max-a.min),s}const mg=.35;function Vz(a=mg){return a===!1?a=0:a===!0&&(a=mg),{x:dN(a,"left","right"),y:dN(a,"top","bottom")}}function dN(a,t,s){return{min:uN(a,t),max:uN(a,s)}}function uN(a,t){return typeof a=="number"?a:a[t]||0}const Fz=new WeakMap;class Uz{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=la(),this.visualElement=t}start(t,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=S=>{const{dragSnapToOrigin:$}=this.getProps();$?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(du(S).point)},u=(S,$)=>{const{drag:D,dragPropagation:O,onDragStart:Y}=this.getProps();if(D&&!O&&(this.openDragLock&&this.openDragLock(),this.openDragLock=aM(D),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ls(N=>{let G=this.getAxisMotionValue(N).get()||0;if(Sn.test(G)){const{projection:H}=this.visualElement;if(H&&H.layout){const U=H.layout.layoutBox[N];U&&(G=Ya(U)*(parseFloat(G)/100))}}this.originPoint[N]=G}),Y&&aa.postRender(()=>Y(S,$)),lg(this.visualElement,"transform");const{animationState:W}=this.visualElement;W&&W.setActive("whileDrag",!0)},l=(S,$)=>{const{dragPropagation:D,dragDirectionLock:O,onDirectionLock:Y,onDrag:W}=this.getProps();if(!D&&!this.openDragLock)return;const{offset:N}=$;if(O&&this.currentDirection===null){this.currentDirection=qz(N),this.currentDirection!==null&&Y&&Y(this.currentDirection);return}this.updateAxis("x",$.point,N),this.updateAxis("y",$.point,N),this.visualElement.render(),W&&W(S,$)},p=(S,$)=>this.stop(S,$),h=()=>Ls(S=>this.getAnimationState(S)==="paused"&&this.getAxisMotionValue(S).animation?.play()),{dragSnapToOrigin:k}=this.getProps();this.panSession=new $3(t,{onSessionStart:i,onStart:u,onMove:l,onSessionEnd:p,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:k,contextWindow:S3(this.visualElement)})}stop(t,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:u}=this.getProps();u&&aa.postRender(()=>u(t,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,n){const{drag:i}=this.getProps();if(!n||!A0(t,i,this.currentDirection))return;const u=this.getAxisMotionValue(t);let l=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(l=Mz(l,this.constraints[t],this.elastic[t])),u.set(l)}resolveConstraints(){const{dragConstraints:t,dragElastic:s}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&Ul(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=zz(n.layoutBox,t):this.constraints=!1,this.elastic=Vz(s),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ls(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=Oz(n.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Ul(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const u=Dz(n,i.root,this.visualElement.getTransformPagePoint());let l=Bz(i.layout.layoutBox,u);if(s){const p=s(Nz(l));this.hasMutatedConstraints=!!p,p&&(l=v3(p))}return l}startAnimation(t){const{drag:s,dragMomentum:n,dragElastic:i,dragTransition:u,dragSnapToOrigin:l,onDragTransitionEnd:p}=this.getProps(),h=this.constraints||{},k=Ls(S=>{if(!A0(S,s,this.currentDirection))return;let $=h&&h[S]||{};l&&($={min:0,max:0});const D=i?200:1e6,O=i?40:1e7,Y={type:"inertia",velocity:n?t[S]:0,bounceStiffness:D,bounceDamping:O,timeConstant:750,restDelta:1,restSpeed:10,...u,...$};return this.startAxisValueAnimation(S,Y)});return Promise.all(k).then(p)}startAxisValueAnimation(t,s){const n=this.getAxisMotionValue(t);return lg(this.visualElement,t),n.start(mf(t,n,0,s,this.visualElement,!1))}stopAnimation(){Ls(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ls(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),i=n[s];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Ls(s=>{const{drag:n}=this.getProps();if(!A0(s,n,this.currentDirection))return;const{projection:i}=this.visualElement,u=this.getAxisMotionValue(s);if(i&&i.layout){const{min:l,max:p}=i.layout.layoutBox[s];u.set(t[s]-ta(l,p,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!Ul(s)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ls(l=>{const p=this.getAxisMotionValue(l);if(p&&this.constraints!==!1){const h=p.get();i[l]=Lz({min:h,max:h},this.constraints[l])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ls(l=>{if(!A0(l,t,null))return;const p=this.getAxisMotionValue(l),{min:h,max:k}=this.constraints[l];p.set(ta(h,k,i[l]))})}addListeners(){if(!this.visualElement.current)return;Fz.set(this.visualElement,this);const t=this.visualElement.current,s=fd(t,"pointerdown",h=>{const{drag:k,dragListener:S=!0}=this.getProps();k&&S&&this.start(h)}),n=()=>{const{dragConstraints:h}=this.getProps();Ul(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,u=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),aa.read(n);const l=Ld(window,"resize",()=>this.scalePositionWithinConstraints()),p=i.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:k})=>{this.isDragging&&k&&(Ls(S=>{const $=this.getAxisMotionValue(S);$&&(this.originPoint[S]+=h[S].translate,$.set($.get()+h[S].translate))}),this.visualElement.render())}));return()=>{l(),s(),u(),p&&p()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:u=!1,dragElastic:l=mg,dragMomentum:p=!0}=t;return{...t,drag:s,dragDirectionLock:n,dragPropagation:i,dragConstraints:u,dragElastic:l,dragMomentum:p}}}function A0(a,t,s){return(t===!0||t===a)&&(s===null||s===a)}function qz(a,t=10){let s=null;return Math.abs(a.y)>t?s="y":Math.abs(a.x)>t&&(s="x"),s}class Hz extends li{constructor(t){super(t),this.removeGroupControls=Os,this.removeListeners=Os,this.controls=new Uz(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Os}unmount(){this.removeGroupControls(),this.removeListeners()}}const mN=a=>(t,s)=>{a&&aa.postRender(()=>a(t,s))};class Wz extends li{constructor(){super(...arguments),this.removePointerDownListener=Os}onPointerDown(t){this.session=new $3(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:S3(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:mN(t),onStart:mN(s),onMove:n,onEnd:(u,l)=>{delete this.session,i&&aa.postRender(()=>i(u,l))}}}mount(){this.removePointerDownListener=fd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Y0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pN(a,t){return t.max===t.min?0:a/(t.max-t.min)*100}const Zc={correct:(a,t)=>{if(!t.target)return a;if(typeof a=="string")if(or.test(a))a=parseFloat(a);else return a;const s=pN(a,t.target.x),n=pN(a,t.target.y);return`${s}% ${n}%`}},Gz={correct:(a,{treeScale:t,projectionDelta:s})=>{const n=a,i=ai.parse(a);if(i.length>5)return n;const u=ai.createTransformer(a),l=typeof i[0]!="number"?1:0,p=s.x.scale*t.x,h=s.y.scale*t.y;i[0+l]/=p,i[1+l]/=h;const k=ta(p,h,.5);return typeof i[2+l]=="number"&&(i[2+l]/=k),typeof i[3+l]=="number"&&(i[3+l]/=k),u(i)}};class Kz extends m.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n,layoutId:i}=this.props,{projection:u}=t;DM(Qz),u&&(s.group&&s.group.add(u),n&&n.register&&i&&n.register(u),u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),Y0.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:n,drag:i,isPresent:u}=this.props,{projection:l}=n;return l&&(l.isPresent=u,i||t.layoutDependency!==s||s===void 0||t.isPresent!==u?l.willUpdate():this.safeToRemove(),t.isPresent!==u&&(u?l.promote():l.relegate()||aa.postRender(()=>{const p=l.getStack();(!p||!p.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),ef.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function P3(a){const[t,s]=r3(),n=m.useContext(Ib);return e.jsx(Kz,{...a,layoutGroup:n,switchLayoutGroup:m.useContext(i3),isPresent:t,safeToRemove:s})}const Qz={borderRadius:{...Zc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zc,borderTopRightRadius:Zc,borderBottomLeftRadius:Zc,borderBottomRightRadius:Zc,boxShadow:Gz};function Yz(a,t,s){const n=Fa(a)?a:ac(a);return n.start(mf("",n,t,s)),n.animation}const Xz=(a,t)=>a.depth-t.depth;class Jz{constructor(){this.children=[],this.isDirty=!1}add(t){Ab(this.children,t),this.isDirty=!0}remove(t){Rb(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Xz),this.isDirty=!1,this.children.forEach(t)}}function Zz(a,t){const s=ds.now(),n=({timestamp:i})=>{const u=i-s;u>=t&&(ri(n),a(u-t))};return aa.setup(n,!0),()=>ri(n)}const E3=["TopLeft","TopRight","BottomLeft","BottomRight"],eB=E3.length,hN=a=>typeof a=="string"?parseFloat(a):a,xN=a=>typeof a=="number"||or.test(a);function tB(a,t,s,n,i,u){i?(a.opacity=ta(0,s.opacity??1,rB(n)),a.opacityExit=ta(t.opacity??1,0,aB(n))):u&&(a.opacity=ta(t.opacity??1,s.opacity??1,n));for(let l=0;l<eB;l++){const p=`border${E3[l]}Radius`;let h=gN(t,p),k=gN(s,p);if(h===void 0&&k===void 0)continue;h||(h=0),k||(k=0),h===0||k===0||xN(h)===xN(k)?(a[p]=Math.max(ta(hN(h),hN(k),n),0),(Sn.test(k)||Sn.test(h))&&(a[p]+="%")):a[p]=k}(t.rotate||s.rotate)&&(a.rotate=ta(t.rotate||0,s.rotate||0,n))}function gN(a,t){return a[t]!==void 0?a[t]:a.borderRadius}const rB=I3(0,.5,N5),aB=I3(.5,.95,Os);function I3(a,t,s){return n=>n<a?0:n>t?1:s(_d(a,t,n))}function bN(a,t){a.min=t.min,a.max=t.max}function Bs(a,t){bN(a.x,t.x),bN(a.y,t.y)}function fN(a,t){a.translate=t.translate,a.scale=t.scale,a.originPoint=t.originPoint,a.origin=t.origin}function yN(a,t,s,n,i){return a-=t,a=Tm(a,1/s,n),i!==void 0&&(a=Tm(a,1/i,n)),a}function sB(a,t=0,s=1,n=.5,i,u=a,l=a){if(Sn.test(t)&&(t=parseFloat(t),t=ta(l.min,l.max,t/100)-l.min),typeof t!="number")return;let p=ta(u.min,u.max,n);a===u&&(p-=t),a.min=yN(a.min,t,s,p,i),a.max=yN(a.max,t,s,p,i)}function vN(a,t,[s,n,i],u,l){sB(a,t[s],t[n],t[i],t.scale,u,l)}const nB=["x","scaleX","originX"],oB=["y","scaleY","originY"];function wN(a,t,s,n){vN(a.x,t,nB,s?s.x:void 0,n?n.x:void 0),vN(a.y,t,oB,s?s.y:void 0,n?n.y:void 0)}function kN(a){return a.translate===0&&a.scale===1}function D3(a){return kN(a.x)&&kN(a.y)}function NN(a,t){return a.min===t.min&&a.max===t.max}function iB(a,t){return NN(a.x,t.x)&&NN(a.y,t.y)}function jN(a,t){return Math.round(a.min)===Math.round(t.min)&&Math.round(a.max)===Math.round(t.max)}function _3(a,t){return jN(a.x,t.x)&&jN(a.y,t.y)}function CN(a){return Ya(a.x)/Ya(a.y)}function SN(a,t){return a.translate===t.translate&&a.scale===t.scale&&a.originPoint===t.originPoint}class lB{constructor(){this.members=[]}add(t){Ab(this.members,t),t.scheduleRender()}remove(t){if(Rb(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(i=>t===i);if(s===0)return!1;let n;for(let i=s;i>=0;i--){const u=this.members[i];if(u.isPresent!==!1){n=u;break}}return n?(this.promote(n),!0):!1}promote(t,s){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,s&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:n}=t;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function cB(a,t,s){let n="";const i=a.x.translate/t.x,u=a.y.translate/t.y,l=s?.z||0;if((i||u||l)&&(n=`translate3d(${i}px, ${u}px, ${l}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:k,rotate:S,rotateX:$,rotateY:D,skewX:O,skewY:Y}=s;k&&(n=`perspective(${k}px) ${n}`),S&&(n+=`rotate(${S}deg) `),$&&(n+=`rotateX(${$}deg) `),D&&(n+=`rotateY(${D}deg) `),O&&(n+=`skewX(${O}deg) `),Y&&(n+=`skewY(${Y}deg) `)}const p=a.x.scale*t.x,h=a.y.scale*t.y;return(p!==1||h!==1)&&(n+=`scale(${p}, ${h})`),n||"none"}const hx=["","X","Y","Z"],dB={visibility:"hidden"},uB=1e3;let mB=0;function xx(a,t,s,n){const{latestValues:i}=t;i[a]&&(s[a]=i[a],t.setStaticValue(a,0),n&&(n[a]=0))}function A3(a){if(a.hasCheckedOptimisedAppear=!0,a.root===a)return;const{visualElement:t}=a.options;if(!t)return;const s=g3(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:i,layoutId:u}=a.options;window.MotionCancelOptimisedAnimation(s,"transform",aa,!(i||u))}const{parent:n}=a;n&&!n.hasCheckedOptimisedAppear&&A3(n)}function R3({attachResizeListener:a,defaultParent:t,measureScroll:s,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(l={},p=t?.()){this.id=mB++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(xB),this.nodes.forEach(vB),this.nodes.forEach(wB),this.nodes.forEach(gB)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=p?p.root||p:this,this.path=p?[...p.path,p]:[],this.parent=p,this.depth=p?p.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new Jz)}addEventListener(l,p){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Bb),this.eventHandlers.get(l).add(p)}notifyListeners(l,...p){const h=this.eventHandlers.get(l);h&&h.notify(...p)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=t3(l)&&!cM(l),this.instance=l;const{layoutId:p,layout:h,visualElement:k}=this.options;if(k&&!k.current&&k.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||p)&&(this.isLayoutDirty=!0),a){let S;const $=()=>this.root.updateBlockedByResize=!1;a(l,()=>{this.root.updateBlockedByResize=!0,S&&S(),S=Zz($,250),Y0.hasAnimatedSinceResize&&(Y0.hasAnimatedSinceResize=!1,this.nodes.forEach(TN))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&k&&(p||h)&&this.addEventListener("didUpdate",({delta:S,hasLayoutChanged:$,hasRelativeLayoutChanged:D,layout:O})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const Y=this.options.transition||k.getDefaultTransition()||SB,{onLayoutAnimationStart:W,onLayoutAnimationComplete:N}=k.getProps(),G=!this.targetLayout||!_3(this.targetLayout,O),H=!$&&D;if(this.options.layoutRoot||this.resumeFrom||H||$&&(G||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(S,H);const U={...Jb(Y,"layout"),onPlay:W,onComplete:N};(k.shouldReduceMotion||this.options.layoutRoot)&&(U.delay=0,U.type=!1),this.startAnimation(U)}else $||TN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=O})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ri(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(kB),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&A3(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const $=this.path[S];$.shouldResetTransform=!0,$.updateScroll("snapshot"),$.options.layoutRoot&&$.willUpdate(!1)}const{layoutId:p,layout:h}=this.options;if(p===void 0&&!h)return;const k=this.getTransformTemplate();this.prevTransformTemplateValue=k?k(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($N);return}this.isUpdating||this.nodes.forEach(fB),this.isUpdating=!1,this.nodes.forEach(yB),this.nodes.forEach(pB),this.nodes.forEach(hB),this.clearAllSnapshots();const p=ds.now();Pa.delta=oo(0,1e3/60,p-Pa.timestamp),Pa.timestamp=p,Pa.isProcessing=!0,nx.update.process(Pa),nx.preRender.process(Pa),nx.render.process(Pa),Pa.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ef.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bB),this.sharedNodes.forEach(NB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,aa.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){aa.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ya(this.snapshot.measuredBox.x)&&!Ya(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=la(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:p}=this.options;p&&p.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let p=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(p=!1),p&&this.instance){const h=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,p=this.projectionDelta&&!D3(this.projectionDelta),h=this.getTransformTemplate(),k=h?h(this.latestValues,""):void 0,S=k!==this.prevTransformTemplateValue;l&&this.instance&&(p||_i(this.latestValues)||S)&&(i(this.instance,k),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const p=this.measurePageBox();let h=this.removeElementScroll(p);return l&&(h=this.removeTransform(h)),$B(h),{animationId:this.root.animationId,measuredBox:p,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return la();const p=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(TB))){const{scroll:k}=this.root;k&&(Hl(p.x,k.offset.x),Hl(p.y,k.offset.y))}return p}removeElementScroll(l){const p=la();if(Bs(p,l),this.scroll?.wasRoot)return p;for(let h=0;h<this.path.length;h++){const k=this.path[h],{scroll:S,options:$}=k;k!==this.root&&S&&$.layoutScroll&&(S.wasRoot&&Bs(p,l),Hl(p.x,S.offset.x),Hl(p.y,S.offset.y))}return p}applyTransform(l,p=!1){const h=la();Bs(h,l);for(let k=0;k<this.path.length;k++){const S=this.path[k];!p&&S.options.layoutScroll&&S.scroll&&S!==S.root&&Wl(h,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),_i(S.latestValues)&&Wl(h,S.latestValues)}return _i(this.latestValues)&&Wl(h,this.latestValues),h}removeTransform(l){const p=la();Bs(p,l);for(let h=0;h<this.path.length;h++){const k=this.path[h];if(!k.instance||!_i(k.latestValues))continue;dg(k.latestValues)&&k.updateSnapshot();const S=la(),$=k.measurePageBox();Bs(S,$),wN(p,k.latestValues,k.snapshot?k.snapshot.layoutBox:void 0,S)}return _i(this.latestValues)&&wN(p,this.latestValues),p}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Pa.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==p;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:S,layoutId:$}=this.options;if(!(!this.layout||!(S||$))){if(this.resolvedRelativeTargetAt=Pa.timestamp,!this.targetDelta&&!this.relativeTarget){const D=this.getClosestProjectingParent();D&&D.layout&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=la(),this.relativeTargetOrigin=la(),vd(this.relativeTargetOrigin,this.layout.layoutBox,D.layout.layoutBox),Bs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=la(),this.targetWithTransforms=la()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ez(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bs(this.target,this.layout.layoutBox),j3(this.target,this.targetDelta)):Bs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const D=this.getClosestProjectingParent();D&&!!D.resumingFrom==!!this.resumingFrom&&!D.options.layoutScroll&&D.target&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=la(),this.relativeTargetOrigin=la(),vd(this.relativeTargetOrigin,this.target,D.target),Bs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||dg(this.parent.latestValues)||N3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),p=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Pa.timestamp&&(h=!1),h)return;const{layout:k,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(k||S))return;Bs(this.layoutCorrected,this.layout.layoutBox);const $=this.treeScale.x,D=this.treeScale.y;Iz(this.layoutCorrected,this.treeScale,this.path,p),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=la());const{target:O}=l;if(!O){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(fN(this.prevProjectionDelta.x,this.projectionDelta.x),fN(this.prevProjectionDelta.y,this.projectionDelta.y)),yd(this.projectionDelta,this.layoutCorrected,O,this.latestValues),(this.treeScale.x!==$||this.treeScale.y!==D||!SN(this.projectionDelta.x,this.prevProjectionDelta.x)||!SN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",O))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const p=this.getStack();p&&p.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ql(),this.projectionDelta=ql(),this.projectionDeltaWithTransform=ql()}setAnimationOrigin(l,p=!1){const h=this.snapshot,k=h?h.latestValues:{},S={...this.latestValues},$=ql();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!p;const D=la(),O=h?h.source:void 0,Y=this.layout?this.layout.source:void 0,W=O!==Y,N=this.getStack(),G=!N||N.members.length<=1,H=!!(W&&!G&&this.options.crossfade===!0&&!this.path.some(CB));this.animationProgress=0;let U;this.mixTargetDelta=ne=>{const oe=ne/1e3;PN($.x,l.x,oe),PN($.y,l.y,oe),this.setTargetDelta($),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vd(D,this.layout.layoutBox,this.relativeParent.layout.layoutBox),jB(this.relativeTarget,this.relativeTargetOrigin,D,oe),U&&iB(this.relativeTarget,U)&&(this.isProjectionDirty=!1),U||(U=la()),Bs(U,this.relativeTarget)),W&&(this.animationValues=S,tB(S,k,this.latestValues,oe,H,G)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=oe},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(!1),this.resumingFrom?.currentAnimation?.stop(!1),this.pendingAnimation&&(ri(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=aa.update(()=>{Y0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ac(0)),this.currentAnimation=Yz(this.motionValue,[0,1e3],{...l,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),l.onUpdate&&l.onUpdate(p)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(uB),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:p,target:h,layout:k,latestValues:S}=l;if(!(!p||!h||!k)){if(this!==l&&this.layout&&k&&M3(this.options.animationType,this.layout.layoutBox,k.layoutBox)){h=this.target||la();const $=Ya(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+$;const D=Ya(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+D}Bs(p,h),Wl(p,S),yd(this.projectionDeltaWithTransform,this.layoutCorrected,p,S)}}registerSharedNode(l,p){this.sharedNodes.has(l)||this.sharedNodes.set(l,new lB),this.sharedNodes.get(l).add(p);const k=p.options.initialPromotionConfig;p.promote({transition:k?k.transition:void 0,preserveFollowOpacity:k&&k.shouldPreserveFollowOpacity?k.shouldPreserveFollowOpacity(p):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:p,preserveFollowOpacity:h}={}){const k=this.getStack();k&&k.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),p&&this.setOptions({transition:p})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let p=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(p=!0),!p)return;const k={};h.z&&xx("z",l,k,this.animationValues);for(let S=0;S<hx.length;S++)xx(`rotate${hx[S]}`,l,k,this.animationValues),xx(`skew${hx[S]}`,l,k,this.animationValues);l.render();for(const S in k)l.setStaticValue(S,k[S]),this.animationValues&&(this.animationValues[S]=k[S]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return dB;const p={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=Q0(l?.pointerEvents)||"",p.transform=h?h(this.latestValues,""):"none",p;const k=this.getLead();if(!this.projectionDelta||!this.layout||!k.target){const O={};return this.options.layoutId&&(O.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,O.pointerEvents=Q0(l?.pointerEvents)||""),this.hasProjected&&!_i(this.latestValues)&&(O.transform=h?h({},""):"none",this.hasProjected=!1),O}const S=k.animationValues||k.latestValues;this.applyTransformsToTarget(),p.transform=cB(this.projectionDeltaWithTransform,this.treeScale,S),h&&(p.transform=h(S,p.transform));const{x:$,y:D}=this.projectionDelta;p.transformOrigin=`${$.origin*100}% ${D.origin*100}% 0`,k.animationValues?p.opacity=k===this?S.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:p.opacity=k===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const O in zd){if(S[O]===void 0)continue;const{correct:Y,applyTo:W,isCSSVariable:N}=zd[O],G=p.transform==="none"?S[O]:Y(S[O],k);if(W){const H=W.length;for(let U=0;U<H;U++)p[W[U]]=G}else N?this.options.visualElement.renderState.vars[O]=G:p[O]=G}return this.options.layoutId&&(p.pointerEvents=k===this?Q0(l?.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop(!1)),this.root.nodes.forEach($N),this.root.sharedNodes.clear()}}}function pB(a){a.updateLayout()}function hB(a){const t=a.resumeFrom?.snapshot||a.snapshot;if(a.isLead()&&a.layout&&t&&a.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:n}=a.layout,{animationType:i}=a.options,u=t.source!==a.layout.source;i==="size"?Ls(S=>{const $=u?t.measuredBox[S]:t.layoutBox[S],D=Ya($);$.min=s[S].min,$.max=$.min+D}):M3(i,t.layoutBox,s)&&Ls(S=>{const $=u?t.measuredBox[S]:t.layoutBox[S],D=Ya(s[S]);$.max=$.min+D,a.relativeTarget&&!a.currentAnimation&&(a.isProjectionDirty=!0,a.relativeTarget[S].max=a.relativeTarget[S].min+D)});const l=ql();yd(l,s,t.layoutBox);const p=ql();u?yd(p,a.applyTransform(n,!0),t.measuredBox):yd(p,s,t.layoutBox);const h=!D3(l);let k=!1;if(!a.resumeFrom){const S=a.getClosestProjectingParent();if(S&&!S.resumeFrom){const{snapshot:$,layout:D}=S;if($&&D){const O=la();vd(O,t.layoutBox,$.layoutBox);const Y=la();vd(Y,s,D.layoutBox),_3(O,Y)||(k=!0),S.options.layoutRoot&&(a.relativeTarget=Y,a.relativeTargetOrigin=O,a.relativeParent=S)}}}a.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:p,layoutDelta:l,hasLayoutChanged:h,hasRelativeLayoutChanged:k})}else if(a.isLead()){const{onExitComplete:s}=a.options;s&&s()}a.options.transition=void 0}function xB(a){a.parent&&(a.isProjecting()||(a.isProjectionDirty=a.parent.isProjectionDirty),a.isSharedProjectionDirty||(a.isSharedProjectionDirty=!!(a.isProjectionDirty||a.parent.isProjectionDirty||a.parent.isSharedProjectionDirty)),a.isTransformDirty||(a.isTransformDirty=a.parent.isTransformDirty))}function gB(a){a.isProjectionDirty=a.isSharedProjectionDirty=a.isTransformDirty=!1}function bB(a){a.clearSnapshot()}function $N(a){a.clearMeasurements()}function fB(a){a.isLayoutDirty=!1}function yB(a){const{visualElement:t}=a.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),a.resetTransform()}function TN(a){a.finishAnimation(),a.targetDelta=a.relativeTarget=a.target=void 0,a.isProjectionDirty=!0}function vB(a){a.resolveTargetDelta()}function wB(a){a.calcProjection()}function kB(a){a.resetSkewAndRotation()}function NB(a){a.removeLeadSnapshot()}function PN(a,t,s){a.translate=ta(t.translate,0,s),a.scale=ta(t.scale,1,s),a.origin=t.origin,a.originPoint=t.originPoint}function EN(a,t,s,n){a.min=ta(t.min,s.min,n),a.max=ta(t.max,s.max,n)}function jB(a,t,s,n){EN(a.x,t.x,s.x,n),EN(a.y,t.y,s.y,n)}function CB(a){return a.animationValues&&a.animationValues.opacityExit!==void 0}const SB={duration:.45,ease:[.4,0,.1,1]},IN=a=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(a),DN=IN("applewebkit/")&&!IN("chrome/")?Math.round:Os;function _N(a){a.min=DN(a.min),a.max=DN(a.max)}function $B(a){_N(a.x),_N(a.y)}function M3(a,t,s){return a==="position"||a==="preserve-aspect"&&!Pz(CN(t),CN(s),.2)}function TB(a){return a!==a.root&&a.scroll?.wasRoot}const PB=R3({attachResizeListener:(a,t)=>Ld(a,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),gx={current:void 0},z3=R3({measureScroll:a=>({x:a.scrollLeft,y:a.scrollTop}),defaultParent:()=>{if(!gx.current){const a=new PB({});a.mount(window),a.setOptions({layoutScroll:!0}),gx.current=a}return gx.current},resetTransform:(a,t)=>{a.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:a=>window.getComputedStyle(a).position==="fixed"}),EB={pan:{Feature:Wz},drag:{Feature:Hz,ProjectionNode:z3,MeasureLayout:P3}};function AN(a,t,s){const{props:n}=a;a.animationState&&n.whileHover&&a.animationState.setActive("whileHover",s==="Start");const i="onHover"+s,u=n[i];u&&aa.postRender(()=>u(t,du(t)))}class IB extends li{mount(){const{current:t}=this.node;t&&(this.unmount=sM(t,(s,n)=>(AN(this.node,n,"Start"),i=>AN(this.node,i,"End"))))}unmount(){}}class DB extends li{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=iu(Ld(this.node.current,"focus",()=>this.onFocus()),Ld(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function RN(a,t,s){const{props:n}=a;if(a.current instanceof HTMLButtonElement&&a.current.disabled)return;a.animationState&&n.whileTap&&a.animationState.setActive("whileTap",s==="Start");const i="onTap"+(s==="End"?"":s),u=n[i];u&&aa.postRender(()=>u(t,du(t)))}class _B extends li{mount(){const{current:t}=this.node;t&&(this.unmount=lM(t,(s,n)=>(RN(this.node,n,"Start"),(i,{success:u})=>RN(this.node,i,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const pg=new WeakMap,bx=new WeakMap,AB=a=>{const t=pg.get(a.target);t&&t(a)},RB=a=>{a.forEach(AB)};function MB({root:a,...t}){const s=a||document;bx.has(s)||bx.set(s,{});const n=bx.get(s),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(RB,{root:a,...t})),n[i]}function zB(a,t,s){const n=MB(t);return pg.set(a,s),n.observe(a),()=>{pg.delete(a),n.unobserve(a)}}const BB={some:0,all:1};class LB extends li{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:n,amount:i="some",once:u}=t,l={root:s?s.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:BB[i]},p=h=>{const{isIntersecting:k}=h;if(this.isInView===k||(this.isInView=k,u&&!k&&this.hasEnteredView))return;k&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",k);const{onViewportEnter:S,onViewportLeave:$}=this.node.getProps(),D=k?S:$;D&&D(h)};return zB(this.node.current,l,p)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(OB(t,s))&&this.startObserver()}unmount(){}}function OB({viewport:a={}},{viewport:t={}}={}){return s=>a[s]!==t[s]}const VB={inView:{Feature:LB},tap:{Feature:_B},focus:{Feature:DB},hover:{Feature:IB}},FB={layout:{ProjectionNode:z3,MeasureLayout:P3}},hg={current:null},B3={current:!1};function UB(){if(B3.current=!0,!!_b)if(window.matchMedia){const a=window.matchMedia("(prefers-reduced-motion)"),t=()=>hg.current=a.matches;a.addListener(t),t()}else hg.current=!1}const qB=new WeakMap;function HB(a,t,s){for(const n in t){const i=t[n],u=s[n];if(Fa(i))a.addValue(n,i);else if(Fa(u))a.addValue(n,ac(i,{owner:a}));else if(u!==i)if(a.hasValue(n)){const l=a.getValue(n);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=a.getStaticValue(n);a.addValue(n,ac(l!==void 0?l:i,{owner:a}))}}for(const n in s)t[n]===void 0&&a.removeValue(n);return t}const MN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class WB{scrapeMotionValuesFromProps(t,s,n){return{}}constructor({parent:t,props:s,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:u,visualState:l},p={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Yb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const D=ds.now();this.renderScheduledAt<D&&(this.renderScheduledAt=D,aa.render(this.render,!1,!0))};const{latestValues:h,renderState:k}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=s.initial?{...h}:{},this.renderState=k,this.parent=t,this.props=s,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=p,this.blockInitialAnimation=!!u,this.isControllingVariants=mp(s),this.isVariantNode=n3(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:S,...$}=this.scrapeMotionValuesFromProps(s,{},this);for(const D in $){const O=$[D];h[D]!==void 0&&Fa(O)&&O.set(h[D],!1)}}mount(t){this.current=t,qB.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),B3.current||UB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ri(this.notifyUpdate),ri(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const s=this.features[t];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=bc.has(t);n&&this.onBindTransform&&this.onBindTransform();const i=s.on("change",p=>{this.latestValues[t]=p,this.props.onUpdate&&aa.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),u=s.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{i(),u(),l&&l(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in sc){const s=sc[t];if(!s)continue;const{isEnabled:n,Feature:i}=s;if(!this.features[t]&&i&&n(this.props)&&(this.features[t]=new i(this)),this.features[t]){const u=this.features[t];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):la()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<MN.length;n++){const i=MN[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const u="on"+i,l=t[u];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=HB(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const n=this.values.get(t);s!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&s!==void 0&&(n=ac(s===null?void 0:s,{owner:this}),this.addValue(t,n)),n}readValue(t,s){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(p5(n)||x5(n))?n=parseFloat(n):!uM(n)&&ai.test(s)&&(n=Y5(t,s)),this.setBaseTarget(t,Fa(n)?n.get():n)),Fa(n)?n.get():n}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){const{initial:s}=this.props;let n;if(typeof s=="string"||typeof s=="object"){const u=df(this.props,s,this.presenceContext?.custom);u&&(n=u[t])}if(s&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Fa(i)?i:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new Bb),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}class L3 extends WB{constructor(){super(...arguments),this.KeyframeResolver=Z7}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:n}){delete s[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Fa(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function O3(a,{style:t,vars:s},n,i){Object.assign(a.style,t,i&&i.getProjectionStyles(n));for(const u in s)a.style.setProperty(u,s[u])}function GB(a){return window.getComputedStyle(a)}class KB extends L3{constructor(){super(...arguments),this.type="html",this.renderInstance=O3}readValueFromInstance(t,s){if(bc.has(s))return this.projection?.isProjecting?tg(s):f7(t,s);{const n=GB(t),i=(Vb(s)?n.getPropertyValue(s):n[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:s}){return C3(t,s)}build(t,s,n){of(t,s,n.transformTemplate)}scrapeMotionValuesFromProps(t,s,n){return uf(t,s,n)}}const V3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function QB(a,t,s,n){O3(a,t,void 0,n);for(const i in t.attrs)a.setAttribute(V3.has(i)?i:nf(i),t.attrs[i])}class YB extends L3{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=la}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(bc.has(s)){const n=Q5(s);return n&&n.default||0}return s=V3.has(s)?s:nf(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,n){return x3(t,s,n)}build(t,s,n){u3(t,s,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,s,n,i){QB(t,s,n,i)}mount(t){this.isSVGTag=p3(t.tagName),super.mount(t)}}const XB=(a,t)=>cf(a)?new YB(t):new KB(t,{allowProjection:a!==m.Fragment}),JB=QM({...wz,...VB,...EB,...FB},XB),v=vM(JB),zN=(a,t,s,n)=>{a.style.transition=`${t} ${s}ms ${n}`},Kn=(a,t,s)=>Math.min(Math.max(a,t),s);class ZB{constructor(t,s){this.glareAngle=0,this.glareOpacity=0,this.calculateGlareSize=l=>{const{width:p,height:h}=l,k=Math.sqrt(p**2+h**2);return{width:k,height:k}},this.setSize=l=>{const p=this.calculateGlareSize(l);this.glareEl.style.width=`${p.width}px`,this.glareEl.style.height=`${p.height}px`},this.update=(l,p,h,k)=>{this.updateAngle(l,p.glareReverse),this.updateOpacity(l,p,h,k)},this.updateAngle=(l,p)=>{const{xPercentage:h,yPercentage:k}=l,S=180/Math.PI,$=h?Math.atan2(k,-h)*S:0;this.glareAngle=$-(p?180:0)},this.updateOpacity=(l,p,h,k)=>{const{xPercentage:S,yPercentage:$}=l,{glarePosition:D,glareReverse:O,glareMaxOpacity:Y}=p,W=h?-1:1,N=k?-1:1,G=O?-1:1;let H=0;switch(D){case"top":H=-S*W*G;break;case"right":H=$*N*G;break;case"bottom":case void 0:H=S*W*G;break;case"left":H=-$*N*G;break;case"all":H=Math.hypot(S,$)}const U=Kn(H,0,100);this.glareOpacity=U*Y/100},this.render=l=>{const{glareColor:p}=l;this.glareEl.style.transform=`rotate(${this.glareAngle}deg) translate(-50%, -50%)`,this.glareEl.style.opacity=this.glareOpacity.toString(),this.glareEl.style.background=`linear-gradient(0deg, rgba(255,255,255,0) 0%, ${p} 100%)`},this.glareWrapperEl=document.createElement("div"),this.glareEl=document.createElement("div"),this.glareWrapperEl.appendChild(this.glareEl),this.glareWrapperEl.className="glare-wrapper",this.glareEl.className="glare";const n={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden",borderRadius:s,WebkitMaskImage:"-webkit-radial-gradient(white, black)",pointerEvents:"none"},i=this.calculateGlareSize(t),u={position:"absolute",top:"50%",left:"50%",transformOrigin:"0% 0%",pointerEvents:"none",width:`${i.width}px`,height:`${i.height}px`};Object.assign(this.glareWrapperEl.style,n),Object.assign(this.glareEl.style,u)}}class eL{constructor(){this.tiltAngleX=0,this.tiltAngleY=0,this.tiltAngleXPercentage=0,this.tiltAngleYPercentage=0,this.update=(t,s)=>{this.updateTilt(t,s),this.updateTiltManualInput(t,s),this.updateTiltReverse(s),this.updateTiltLimits(s)},this.updateTilt=(t,s)=>{const{xPercentage:n,yPercentage:i}=t,{tiltMaxAngleX:u,tiltMaxAngleY:l}=s;this.tiltAngleX=n*u/100,this.tiltAngleY=i*l/100*-1},this.updateTiltManualInput=(t,s)=>{const{tiltAngleXManual:n,tiltAngleYManual:i,tiltMaxAngleX:u,tiltMaxAngleY:l}=s;(n!==null||i!==null)&&(this.tiltAngleX=n!==null?n:0,this.tiltAngleY=i!==null?i:0,t.xPercentage=100*this.tiltAngleX/u,t.yPercentage=100*this.tiltAngleY/l)},this.updateTiltReverse=t=>{const s=t.tiltReverse?-1:1;this.tiltAngleX=s*this.tiltAngleX,this.tiltAngleY=s*this.tiltAngleY},this.updateTiltLimits=t=>{const{tiltAxis:s}=t;this.tiltAngleX=Kn(this.tiltAngleX,-90,90),this.tiltAngleY=Kn(this.tiltAngleY,-90,90),s&&(this.tiltAngleX=s==="x"?this.tiltAngleX:0,this.tiltAngleY=s==="y"?this.tiltAngleY:0)},this.updateTiltAnglesPercentage=t=>{const{tiltMaxAngleX:s,tiltMaxAngleY:n}=t;this.tiltAngleXPercentage=this.tiltAngleX/s*100,this.tiltAngleYPercentage=this.tiltAngleY/n*100},this.render=t=>{t.style.transform+=`rotateX(${this.tiltAngleX}deg) rotateY(${this.tiltAngleY}deg) `}}}const tL={scale:1,perspective:1e3,flipVertically:!1,flipHorizontally:!1,reset:!0,transitionEasing:"cubic-bezier(.03,.98,.52,.99)",transitionSpeed:400,trackOnWindow:!1,gyroscope:!1,tiltEnable:!0,tiltReverse:!1,tiltAngleXInitial:0,tiltAngleYInitial:0,tiltMaxAngleX:20,tiltMaxAngleY:20,tiltAxis:void 0,tiltAngleXManual:null,tiltAngleYManual:null,glareEnable:!1,glareMaxOpacity:.7,glareColor:"#ffffff",glarePosition:"bottom",glareReverse:!1,glareBorderRadius:"0"};class F3 extends m.PureComponent{constructor(){super(...arguments),this.wrapperEl={node:null,size:{width:0,height:0,left:0,top:0},clientPosition:{x:null,y:null,xPercentage:0,yPercentage:0},updateAnimationId:null,scale:1},this.tilt=null,this.glare=null,this.addDeviceOrientationEventListener=async()=>{if(!window.DeviceOrientationEvent)return;const t=DeviceOrientationEvent.requestPermission;typeof t=="function"?await t()==="granted"&&window.addEventListener("deviceorientation",this.onMove):window.addEventListener("deviceorientation",this.onMove)},this.setSize=()=>{this.setWrapperElSize(),this.glare&&this.glare.setSize(this.wrapperEl.size)},this.mainLoop=t=>{this.wrapperEl.updateAnimationId!==null&&cancelAnimationFrame(this.wrapperEl.updateAnimationId),this.processInput(t),this.update(t.type),this.wrapperEl.updateAnimationId=requestAnimationFrame(this.renderFrame)},this.onEnter=t=>{const{onEnter:s}=this.props;this.setSize(),this.wrapperEl.node.style.willChange="transform",this.setTransitions(),s&&s({event:t})},this.onMove=t=>{this.mainLoop(t),this.emitOnMove(t)},this.onLeave=t=>{const{onLeave:s}=this.props;if(this.setTransitions(),s&&s({event:t}),this.props.reset){const n=new CustomEvent("autoreset");this.onMove(n)}},this.processInput=t=>{const{scale:s}=this.props;switch(t.type){case"mousemove":this.wrapperEl.clientPosition.x=t.pageX,this.wrapperEl.clientPosition.y=t.pageY,this.wrapperEl.scale=s;break;case"touchmove":this.wrapperEl.clientPosition.x=t.touches[0].pageX,this.wrapperEl.clientPosition.y=t.touches[0].pageY,this.wrapperEl.scale=s;break;case"deviceorientation":this.processInputDeviceOrientation(t),this.wrapperEl.scale=s;break;case"autoreset":{const{tiltAngleXInitial:n,tiltAngleYInitial:i,tiltMaxAngleX:u,tiltMaxAngleY:l}=this.props,p=i/l*100;this.wrapperEl.clientPosition.xPercentage=Kn(n/u*100,-100,100),this.wrapperEl.clientPosition.yPercentage=Kn(p,-100,100),this.wrapperEl.scale=1;break}}},this.processInputDeviceOrientation=t=>{if(!t.gamma||!t.beta||!this.props.gyroscope)return;const{tiltMaxAngleX:s,tiltMaxAngleY:n}=this.props,i=t.gamma;this.wrapperEl.clientPosition.xPercentage=t.beta/s*100,this.wrapperEl.clientPosition.yPercentage=i/n*100,this.wrapperEl.clientPosition.xPercentage=Kn(this.wrapperEl.clientPosition.xPercentage,-100,100),this.wrapperEl.clientPosition.yPercentage=Kn(this.wrapperEl.clientPosition.yPercentage,-100,100)},this.update=t=>{const{tiltEnable:s,flipVertically:n,flipHorizontally:i}=this.props;t!=="autoreset"&&t!=="deviceorientation"&&t!=="propChange"&&this.updateClientInput(),s&&this.tilt.update(this.wrapperEl.clientPosition,this.props),this.updateFlip(),this.tilt.updateTiltAnglesPercentage(this.props),this.glare&&this.glare.update(this.wrapperEl.clientPosition,this.props,n,i)},this.updateClientInput=()=>{const{trackOnWindow:t}=this.props;let s,n;if(t){const{x:i,y:u}=this.wrapperEl.clientPosition;s=u/window.innerHeight*200-100,n=i/window.innerWidth*200-100}else{const{size:{width:i,height:u,left:l,top:p},clientPosition:{x:h,y:k}}=this.wrapperEl;s=(k-p)/u*200-100,n=(h-l)/i*200-100}this.wrapperEl.clientPosition.xPercentage=Kn(s,-100,100),this.wrapperEl.clientPosition.yPercentage=Kn(n,-100,100)},this.updateFlip=()=>{const{flipVertically:t,flipHorizontally:s}=this.props;t&&(this.tilt.tiltAngleX+=180,this.tilt.tiltAngleY*=-1),s&&(this.tilt.tiltAngleY+=180)},this.renderFrame=()=>{this.resetWrapperElTransform(),this.renderPerspective(),this.tilt.render(this.wrapperEl.node),this.renderScale(),this.glare&&this.glare.render(this.props)}}componentDidMount(){if(this.tilt=new eL,this.initGlare(),this.setSize(),this.addEventListeners(),typeof CustomEvent>"u")return;const t=new CustomEvent("autoreset");this.mainLoop(t);const s=new CustomEvent("initial");this.emitOnMove(s)}componentWillUnmount(){this.wrapperEl.updateAnimationId!==null&&cancelAnimationFrame(this.wrapperEl.updateAnimationId),this.removeEventListeners()}componentDidUpdate(){const t=new CustomEvent("propChange");this.mainLoop(t),this.emitOnMove(t)}addEventListeners(){const{trackOnWindow:t,gyroscope:s}=this.props;window.addEventListener("resize",this.setSize),t&&(window.addEventListener("mouseenter",this.onEnter),window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseout",this.onLeave),window.addEventListener("touchstart",this.onEnter),window.addEventListener("touchmove",this.onMove),window.addEventListener("touchend",this.onLeave)),s&&this.addDeviceOrientationEventListener()}removeEventListeners(){const{trackOnWindow:t,gyroscope:s}=this.props;window.removeEventListener("resize",this.setSize),t&&(window.removeEventListener("mouseenter",this.onEnter),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseout",this.onLeave),window.removeEventListener("touchstart",this.onEnter),window.removeEventListener("touchmove",this.onMove),window.removeEventListener("touchend",this.onLeave)),s&&window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",this.onMove)}setWrapperElSize(){const t=this.wrapperEl.node.getBoundingClientRect();this.wrapperEl.size.width=this.wrapperEl.node.offsetWidth,this.wrapperEl.size.height=this.wrapperEl.node.offsetHeight,this.wrapperEl.size.left=t.left+window.scrollX,this.wrapperEl.size.top=t.top+window.scrollY}initGlare(){const{glareEnable:t,glareBorderRadius:s}=this.props;t&&(this.glare=new ZB(this.wrapperEl.size,s),this.wrapperEl.node.appendChild(this.glare.glareWrapperEl))}emitOnMove(t){const{onMove:s}=this.props;if(!s)return;let n=0,i=0;this.glare&&(n=this.glare.glareAngle,i=this.glare.glareOpacity),s({tiltAngleX:this.tilt.tiltAngleX,tiltAngleY:this.tilt.tiltAngleY,tiltAngleXPercentage:this.tilt.tiltAngleXPercentage,tiltAngleYPercentage:this.tilt.tiltAngleYPercentage,glareAngle:n,glareOpacity:i,event:t})}resetWrapperElTransform(){this.wrapperEl.node.style.transform=""}renderPerspective(){const{perspective:t}=this.props;this.wrapperEl.node.style.transform+=`perspective(${t}px) `}renderScale(){const{scale:t}=this.wrapperEl;this.wrapperEl.node.style.transform+=`scale3d(${t},${t},${t})`}setTransitions(){const{transitionSpeed:t,transitionEasing:s}=this.props;zN(this.wrapperEl.node,"all",t,s),this.glare&&zN(this.glare.glareEl,"opacity",t,s)}render(){const{children:t,className:s,style:n}=this.props;return e.jsx("div",{ref:i=>{this.wrapperEl.node=i},onMouseEnter:this.onEnter,onMouseMove:this.onMove,onMouseLeave:this.onLeave,onTouchStart:this.onEnter,onTouchMove:this.onMove,onTouchEnd:this.onLeave,className:s,style:n,children:t})}}F3.defaultProps=tL;var fx={exports:{}},yx,BN;function rL(){if(BN)return yx;BN=1;var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return yx=a,yx}var vx,LN;function aL(){if(LN)return vx;LN=1;var a=rL();function t(){}function s(){}return s.resetWarningCache=t,vx=function(){function n(l,p,h,k,S,$){if($!==a){var D=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw D.name="Invariant Violation",D}}n.isRequired=n;function i(){return n}var u={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:s,resetWarningCache:t};return u.PropTypes=u,u},vx}var ON;function sL(){return ON||(ON=1,fx.exports=aL()()),fx.exports}var nL=sL();const F=bg(nL);var U3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},VN=Cs.createContext&&Cs.createContext(U3),oL=["attr","size","title"];function iL(a,t){if(a==null)return{};var s=lL(a,t),n,i;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);for(i=0;i<u.length;i++)n=u[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(a,n)&&(s[n]=a[n])}return s}function lL(a,t){if(a==null)return{};var s={};for(var n in a)if(Object.prototype.hasOwnProperty.call(a,n)){if(t.indexOf(n)>=0)continue;s[n]=a[n]}return s}function Pm(){return Pm=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(a[n]=s[n])}return a},Pm.apply(this,arguments)}function FN(a,t){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),s.push.apply(s,n)}return s}function Em(a){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?FN(Object(s),!0).forEach(function(n){cL(a,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):FN(Object(s)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(s,n))})}return a}function cL(a,t,s){return t=dL(t),t in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}function dL(a){var t=uL(a,"string");return typeof t=="symbol"?t:t+""}function uL(a,t){if(typeof a!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var n=s.call(a,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}function q3(a){return a&&a.map((t,s)=>Cs.createElement(t.tag,Em({key:s},t.attr),q3(t.child)))}function Ct(a){return t=>Cs.createElement(mL,Pm({attr:Em({},a.attr)},t),q3(a.child))}function mL(a){var t=s=>{var{attr:n,size:i,title:u}=a,l=iL(a,oL),p=i||s.size||"1em",h;return s.className&&(h=s.className),a.className&&(h=(h?h+" ":"")+a.className),Cs.createElement("svg",Pm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,n,l,{className:h,style:Em(Em({color:a.color||s.color},s.style),a.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),u&&Cs.createElement("title",null,u),a.children)};return VN!==void 0?Cs.createElement(VN.Consumer,null,s=>t(s)):t(U3)}function fr(a){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(a)}function yr(a){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(a)}function vr(a){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(a)}function Ir(a){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(a)}function pL(a){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.034 8 8 119.033 8 256s111.034 248 248 248 248-111.034 248-248S392.967 8 256 8zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676zM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676z"},child:[]}]})(a)}function pp(a){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(a)}function Bt(a){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(a)}function hL(a){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(a)}function Mr(a){return Ct({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"},child:[]}]})(a)}function ld(a){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(a)}function xL(a){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(a)}function gL(a){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(a)}function bL(a){return Ct({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(a)}function fL(a){return Ct({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(a)}function yL(a){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(a)}function eo(a){return Ct({attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"},child:[]}]})(a)}function UN(a){return Ct({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(a)}function Od(a){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(a)}function Qi(a){return Ct({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(a)}function H3(a){return Ct({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(a)}function W3(a){return Ct({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(a)}function pf(a){return Ct({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(a)}function hf(a){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(a)}function wr(a){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(a)}function vL(a){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(a)}function Ot(a){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(a)}function xg(a){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"},child:[]}]})(a)}function nc(a){return Ct({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(a)}function Ut(a){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(a)}function bt(a){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(a)}function kr(a){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(a)}function ke(a){return Ct({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(a)}function xf(a){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(a)}function wL(a){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(a)}function Ft(a){return Ct({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(a)}function qt(a){return Ct({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(a)}function oc(a){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(a)}function Im(a){return Ct({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(a)}const pr="/assets/logo-BfhC8Xaa.png",kL="/assets/brooklyn99-DYJUH8Km.png",NL="/assets/stranger-things-DRcF_wqM.png",jL="/assets/breaking-bad-D1E4kgVP.png",CL="/assets/naruto-DUa7in8u.png",SL="/assets/alice-CeDQ0_3e.png",$L="/assets/netflix-DaHLFMJQ.png",TL="/assets/spotify-bWcpnvLH.png",PL="/assets/disney-CWU7DV5v.png",EL="/assets/max-BIVycyRg.png",IL="/assets/prime-video-DdoTjLXc.png",DL="/assets/vix-DijISFtY.png",_L="/assets/Canva-BX7ku0VE.png",AL="/assets/ChatGPT-B_s2moDj.png",RL="/assets/crunchyroll-CCcWGZHz.png",ML="/assets/redessociales-C9h9bjwL.png",zL="/assets/dgo-BPXOpsxd.png",BL="/assets/ligamax-DG6Hz7Oj.png",LL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAB4CAYAAADblO/uAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACnFJREFUeNrsnd912zYbh+Gc3FedoPQEVSYINUHUm+bS0gS2JlA8ga0JrF7qyvYElieIMkHYCapvAn+EQEb2sUgR1AsSIJ/nHKU9jkOKIH54/+AFcPby8qIAoNucIXQAhA4ACB0AEDoAIHQAQOgAgNABAKEDAEIHQOgAgNABAKEDAEIHAIQOAAgdABA6ACB0AIQOAAgdABA6AHRX6GdnZ7RiVVZJlP45Tj+D9PM5++k2/fxIPxv1NXqgkeA1UoYYoTcj8En652X6GR75TS36Rfq5TUW/peEAoYchcG29b9JPZPkvk/QzTcW+phEROkL3V+DaNb/L3PRT0GJf0qAIHaH7KfKnCm46YgeEjsjf8CkV+4YGRugIvbsiz2P2TyToEHpdPtCUYtw4ErkmSj9XNDGEadHNvLL+xK9+qq3WJqiMs8mu3zdwp/O0XRK6LRbdf6EbF1dbpwt1fNpJF5AsvBa9eZ6fyhTBuGaZtsWU7o/Q/Rb6KvmmTOGIrSi04KdexqjmmeYN3vF3YnWE7qfQZRJV2mX9y6vsc7PWPGeWtsEtEkDofgl9lQwzkUuIQVuykTdiXyU6BLlp+K5J+vznne7dxks6FLYkCN1HobuxeP6IfZX8VPblrRJ0e159lRzqlKM+lgRLCf2j4+/5pOTdWhMGrJJ2xW4WqkQt3V0nMjeOnitWb2dB6rDeDcgU+XjDR4dCcDmvrMV+n96jzSKSixbf23gXq7tBi/zU5OI86wPbTPSPlPG2ywdHItedxXWBR6SambsuyjvELb63KKtB8J1BNijdpd/3v8wLgs4IvbnpprggceOaSw/e3TiwvjbIBH+f5W4gaKHLxHh2g4qxsE1Z84EnIvscaJ9rqooQHMfo8xaeQ6/9/tTQvSaq2Xnzsli6Scqz3vty5igbhMYl7WQ8sa/RNyQYokVvL3YdZsm/vrjtxhX2KU7Xc9x6INBJN1Omq+f6b0vbERc+WNe9zUz0VRY2uHTbY9XelNrhAc5X9GzI10jPDExLYnZW5AUq9EnLz+Paql949v6G3vcwM61WtLvtFyQYmtCNtRu03vFdZeGNmznx7P2FkpC7LnlfuO+BWXRfRmdXWfiJh+8vDJGYCrkkWK+kA0hm3WOPnku78CPha156+P5CEokWetToYPU2ZzPI2stsbJJ/p54slPko1KADzzpdvKvCkiq79C8J9/q7RYF01ucCYzAsieFt39GX7HrDygNI3TLdw/UiSe0+V3Q9vWrPI4vuo2W5SRvvQagWXjoJpzvWIvtvXoAzr2ndohK3uE9okdTJ4uftP077i34Hs4pHY8Xqfc3I+gRhSl/PSYwee/ji80MUTreYsvG57kijXWcyU1BJtpHEuXK1Ig1sBs37lsqqnSIldF+zv2OBhRSSIp8W7g5jPI86K9LiQPpaUR/xcXCbZxt+EqMfGAl9Rbvwm1pro401nwuKvNwN05Vlq2QdkHhtPaxDSC4zXqv96bTbkkEkP812XNJ373bvoiP78/VB6KdsVCG1+GJpkaR57JzQy5O1Mhbdvm7+YedBFW8Hlsfuyy68gg8CLzGETpmLfVy5Y66SOyWTZEwsXfIuxulXhW3TtsU0oVTR++lM5V6fTmrJd6W5K63GMgPXk2Bsfm3ZmW07vt/VcaatL0usavsYsScH/qYzxTwSrntojTHZffTUm5nbzS1orPbzsHIxo+28qg4vVkmXXPayfQP/8ejbPhzwPCKE/tZShshYud9A4lr1kf3mHDcl/WPt2eaR/3b5lXxU4IpNx7YnvqiQj/kt84iO/Z4OT6bevS+EDjVYdOx5JoLXmnJYZH+Ens9z+lYnL/NsbG9cbMmrlZhKhxPHvIwhQpdHi2D2KxttXsJ9wPH+oeer2yG72uHevnO3otb5gc8VwwgsuiOSd0f/moowvaz0qSNiP8Vtt31+n2PLtTIFQA+NuOqm3FlXMkZIu32hHxaBmVbShQt3gbfppuH4838N3WdmMag0u87bZPlvlJ+bg/RW6MWdRce1q0TPZYe8oODUJJyvHo3Pswh3Fn1mXdLuQ4Qux7EYbZbFVaG68KcmmobC7dltjLs+LjEqi2yQ2hy5TpyFjghdKEYs75ja5VslC9XOQRCni7z52u2+r2GfFxqMoiXBPUSi1t22Y0dHf8OsREoCbM9HgWv8SbesbM2HBf1picjlhe5KkLMA21NiftguZOlW9Z0tRS77NdKWFrp9djWueF0tmnVQIpdx222EvqULi/RJKaLuCt1gI0gb1zQkq/4odB2bZBx7zPlF54WeOOnIJlO67JHb7kvYBPXzBlGXhf7DatSza4xZAC7qpqWdUn70XFbbArGNG3nnh5l0Wei2LmRc+TeNgHxfCdbWBgp9d92LQsY6U7ORUNtfWq9XMAPTF/+Fbp/5/WJ5/W+eu6ltuO3bnmfcy85004c33h/1HM3egHq3oe/KtvTaJPwOiT3fn/Bb4ZZl5r7jbFuzn8os6HJalSdZGbe2sNRxjevPlNyurNJueyIq4GqZ9wcFmusCkeanrzxkIc7m1yBgNsiIBcS1KLj3IPMq5rutxt+GGNWPi/LQdbd1IwfWu8f6O90m/Z0eKg4GzBWbfrE88g7y467us4/+/ysRC3r83rmw41efVkq7JYX+7NR931v1rsfni0rtwA4tr/lLIF+xqeklSdx7qxznW+SEbr9ryLjGPXybbkvENzg01yvbT23K7jXv2kznKz5lXs62hsCn2b9/rnVvc0T3bc3BRb9rfe7eo8smkl69ZhOnR7vspL1QZtkg4cPqtoWjjquX62qLfaH22WCzEsu9JS9yR5vM8I9q3V8nbVeJFtxEmR1mDrnKufV8VO93ol3Wes783DyzGOv1vd8bBnP953f3drzF99nLy8tpFzg7U6++bNHxNmUuqP1IaH8fF2x3I3FHzuaCljEnuL47Nvnl7z9GvsXoqkaMU+/ccTM4tD2HvEDkEAqyQi+eWyxiWHo8Ujlt7gu+rRmTARTxRzhCN9hmoeuVK5r4pq0pphnWHISJQhO6rfte/5BAUzHXdOHIkqw3NCT0xF+h27vv8Yl3nDYYr29UmBtigM+YUt1DQv/XX6EbbKadTnNZ9vOY6wZEPsJlBwdMCn4u1qdlp9f2I5ROsOli/aqJtpHIAo1Voqfcrhy8iNv0+2HJwYU11yWy3w/8jS4C+v1Ufbq16MbqNR/HGjGOBGObdTYIIXKQFvggmzt/EvCKW7Lo+7jje0Wrfi5e8WX2+76okQPQg5RO8P3T+2WgUNerzBfMHCqprXK09K9iLCmL7k7o5qGrVLDpevFzx4kO3ah/quIVS89Z467Fa9ehj0I/JXzcZl7krh+GIXTz4E9HRi822ocuCV2743MJkUsK/UMDj66X8RUJ+RaRQ8eoG4IuM3fdiUfp3qK/d6GjX3Ewa6qhexZd9+/LLEyMVPH08UbtV7IVngngjesOAP6D0AEQOgAgdABA6ACA0AEAoQMAQgcAhA4ACB0AoQMAQgcAhA4ACB0AEDoAIHQAQOgAgNABEDoAIHQAQOgAgNABAKEDAEIHAIQOAAgdAKEjdIDu838BBgAP9Pzi++BqOAAAAABJRU5ErkJggg==",OL="/assets/youtube-CpBI5AmY.png",VL="/assets/deezer-Dzzytvkp.png",FL="/assets/tidal-Dvc8GFJF.png",UL="/assets/vpn-DwO8ctKm.png",qL="/assets/wintv-DVRyyyXO.png",HL="/assets/applemusic-oPM8BG1t.png",WL="/assets/appletv-CnHYjknK.png",GL="/assets/iptv-DuZZIyup.png",KL="/assets/flujotv-BuBDxOy2.png",QL="/assets/vikirakuten-N9-l2Szt.png",YL="/assets/pornhub-CExwxEGA.png",XL="/assets/paramount-BdllqDdm.png",JL="/assets/licencias-BVJh6MhK.png",ZL="/assets/capcut-CQ2qY_pe.png",eO="/assets/duolingo-5bYI8P47.png",tO="/assets/buscapersonas-lxj-Iky8.png",ed=[{src:kL,title:"Brooklyn Nine-Nine",description:"Comedia policial hilarante"},{src:NL,title:"Stranger Things",description:"Misterio y nostalgia ochentera"},{src:jL,title:"Breaking Bad",description:"Un descenso al mundo del crimen"},{src:CL,title:"Naruto",description:"Aventuras ninja épicas"},{src:SL,title:"Alice in Borderland",description:"Juego de supervivencia intenso"}],qN=[{name:"Netflix",logo:$L,route:"/netflix",color:"#E50914"},{name:"Spotify",logo:TL,route:"/spotify",color:"#1DB954"},{name:"Disney+",logo:PL,route:"/disney",color:"#113CCF"},{name:"Max",logo:EL,route:"/max",color:"#002BE7"},{name:"Prime Video",logo:IL,route:"/primevideo",color:"#00A8E1"},{name:"Vix",logo:DL,route:"/vix",color:"#FF2E63"},{name:"Canva",logo:_L,route:"/canva",color:"#00C4B4"},{name:"ChatGPT",logo:AL,route:"/chatgpt",color:"#10A37F"},{name:"Crunchyroll",logo:RL,route:"/crunchyroll",color:"#F47521"},{name:"Redes Sociales",logo:ML,route:"/redessociales",color:"#3B5998"},{name:"Dgo",logo:zL,route:"/dgo",color:"#00A1D6"},{name:"Liga Max",logo:BL,route:"/ligamax",color:"#FFD700"},{name:"Movistar Play",logo:LL,route:"/movistarplay",color:"#005566"},{name:"Youtube",logo:OL,route:"/youtube",color:"#FF0000"},{name:"Deezer",logo:VL,route:"/deezer",color:"#FEAA2D"},{name:"Tidal",logo:FL,route:"/tidal",color:"#000000"},{name:"Vpn",logo:UL,route:"/vpn",color:"#4CAF50"},{name:"Win Tv",logo:qL,route:"/wintv",color:"#9C27B0"},{name:"Apple Music",logo:HL,route:"/applemusic",color:"#FA57C1"},{name:"Apple Tv",logo:WL,route:"/appletv",color:"#000000"},{name:"Iptv",logo:GL,route:"/iptv",color:"#607D8B"},{name:"Flujo Tv",logo:KL,route:"/flujotv",color:"#FF5722"},{name:"Viki Rakuten",logo:QL,route:"/vikirakuten",color:"#D81B60"},{name:"Pornhub",logo:YL,route:"/pornhub",color:"#FF9000"},{name:"Paramount",logo:XL,route:"/paramount",color:"#0064D2"},{name:"Licencias",logo:JL,route:"/licencias",color:"#795548"},{name:"Cap cut",logo:ZL,route:"/capcut",color:"#00C4B4"},{name:"Duolingo",logo:eO,route:"/duolingo",color:"#58CC02"},{name:"Busca Personas",logo:tO,route:"/buscapersonas",color:"#3F51B5"}],rO=(a,t=5e3)=>{const[s,n]=m.useState(0),[i,u]=m.useState(0),[l,p]=m.useState(!1);m.useEffect(()=>{if(l)return;const $=setInterval(()=>{u(O=>O>=100?0:O+100/(t/100))},100),D=setInterval(()=>{n(O=>(O+1)%a.length),u(0)},t);return()=>{clearInterval($),clearInterval(D)}},[l,a.length,t]);const h=m.useCallback($=>{n($),u(0)},[]),k=m.useCallback(()=>{n($=>($-1+a.length)%a.length),u(0)},[a.length]),S=m.useCallback(()=>{n($=>($+1)%a.length),u(0)},[a.length]);return{currentIndex:s,progress:i,isPaused:l,setIsPaused:p,goToSlide:h,prevSlide:k,nextSlide:S}},G3=m.memo(({platform:a,theme:t})=>e.jsx(F3,{tiltMaxAngleX:8,tiltMaxAngleY:8,scale:1.03,transitionSpeed:300,children:e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:`${t==="dark"?"bg-gray-900/30 border-gray-700/30":"bg-white/90 border-gray-200/30"} backdrop-blur-xl rounded-xl overflow-hidden shadow-md cursor-pointer hover:shadow-xl hover:border-blue-500/50 transition-all duration-300 relative`,children:e.jsxs(De,{to:a.route,title:a.name,className:"block",children:[e.jsx("img",{src:a.logo,alt:a.name,className:`w-full h-24 sm:h-28 lg:h-32 object-contain p-4 ${t==="dark"?"bg-white/95":"bg-gray-50/95"} transition-transform duration-300 hover:scale-105`,loading:"lazy"}),e.jsx("div",{className:"p-3 text-center",style:{background:`linear-gradient(180deg, ${a.color}20, ${a.color}50)`},children:e.jsx("h3",{className:`font-semibold text-sm sm:text-base ${t==="dark"?"text-gray-100":"text-gray-900"} tracking-tight`,children:a.name})})]})})}));G3.propTypes={platform:F.shape({name:F.string.isRequired,logo:F.string.isRequired,route:F.string.isRequired,color:F.string.isRequired}).isRequired,theme:F.string.isRequired};const K3=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});K3.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const Q3=()=>{const{currentIndex:a,progress:t,setIsPaused:s,goToSlide:n,prevSlide:i,nextSlide:u}=rO(ed,5e3),[l,p]=m.useState(""),[h,k]=m.useState(qN),[S,$]=m.useState(null),[D,O]=m.useState(0),[Y,W]=m.useState(null),[N,G]=m.useState(!1),[H,U]=m.useState(!1),[ne,oe]=m.useState("dark"),[$e,K]=m.useState(!1),[V,L]=m.useState(!1),[y,se]=m.useState([]),ee=cr(),re=m.useRef(null);m.useEffect(()=>{const de=hr($t,ve=>{$(ve),ve?(He(ve.uid),ut(ve.uid)):(O(0),W(null),se([]))});return()=>de()},[]);const He=async de=>{try{const ve=await zt(Z(I,"users",de));if(ve.exists()){O(ve.data().balance||0),W(ve.data().role||"user");const Se=ve.data().username||"Usuario";$(Ve=>({...Ve,username:Se}))}}catch(ve){console.error("Error fetching user data:",ve)}},ut=async de=>{try{const ve=Te(ae(I,"users",de,"notifications"),Ar("updatedAt","desc")),Ve=(await _t(ve)).docs.map(q=>({id:q.id,message:q.data().message||"Sin mensaje",updatedAt:q.data().updatedAt}));se(Ve)}catch(ve){console.error("Error fetching notifications:",ve)}};m.useEffect(()=>{const de=qN.filter(ve=>ve.name.toLowerCase().includes(l.toLowerCase()));k(de)},[l]),m.useEffect(()=>{const de=()=>{U(window.scrollY>300)};return window.addEventListener("scroll",de),()=>window.removeEventListener("scroll",de)},[]),m.useEffect(()=>{const de=re.current;let ve=0;const Se=q=>{ve=q.touches[0].clientX,s(!0)},Ve=q=>{const o=q.changedTouches[0].clientX;ve-o>50&&u(),o-ve>50&&i(),setTimeout(()=>s(!1),500)};return de?.addEventListener("touchstart",Se),de?.addEventListener("touchend",Ve),()=>{de?.removeEventListener("touchstart",Se),de?.removeEventListener("touchend",Ve)}},[i,u,s]);const it=m.useCallback(de=>{de.preventDefault(),l.trim()&&ee(`/search?q=${encodeURIComponent(l)}`)},[l,ee]),Je=m.useCallback(async()=>{try{await Pr($t),ee("/")}catch(de){console.error("Error signing out:",de)}},[ee]),fe=m.useCallback(()=>{oe(de=>de==="dark"?"light":"dark")},[]),Ne=m.useCallback(de=>de?de.split(" ").map(Se=>Se[0]).join("").slice(0,2).toUpperCase():"U",[]),ye=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),J=m.useCallback(()=>{switch(Y){case"admin":return"/dashboard/admin";case"provider":return"/dashboard/provider";default:return"/dashboard/user"}},[Y]);return e.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${ne==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-100 via-gray-50 to-white text-gray-900"} flex flex-col font-inter relative overflow-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${ne==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(25)].map((de,ve)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},ve))})]}),e.jsxs("header",{className:`${ne==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${ne==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar plataformas...",value:l,onChange:de=>p(de.target.value),className:`w-full py-2.5 px-5 ${ne==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${ne==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar plataformas",onKeyDown:de=>de.key==="Enter"&&it(de)}),e.jsx("button",{onClick:it,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${ne==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:fe,className:`p-2 rounded-full ${ne==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${ne==="dark"?"claro":"oscuro"}`,children:ne==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),S&&e.jsxs("button",{onClick:()=>L(!0),className:`p-2 rounded-full relative ${ne==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${y.length} nuevas)`,children:[e.jsx(Bt,{size:20}),y.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:y.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>K(!$e),"aria-label":"Abrir menú móvil","aria-expanded":$e,children:e.jsx(pp,{size:20,className:ne==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:S?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${ne==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",D.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>G(!N),className:`flex items-center space-x-2 ${ne==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":N,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:S.photoURL?e.jsx("img",{src:S.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):Ne(S.username||S.email)}),e.jsx("span",{className:`text-sm font-semibold ${ne==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:S.username||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${ne==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:N&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${ne==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs(De,{to:J(),className:`w-full text-left px-4 py-2 text-sm hover:${ne==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${ne==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:Je,className:`w-full text-left px-4 py-2 text-sm hover:${ne==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${ne==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${ne==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${ne==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:$e&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${ne==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar plataformas...",value:l,onChange:de=>p(de.target.value),className:`w-full py-2.5 px-5 ${ne==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${ne==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar plataformas",onKeyDown:de=>de.key==="Enter"&&it(de)}),e.jsx("button",{onClick:it,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${ne==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),S&&e.jsxs("button",{onClick:()=>{L(!0),K(!1)},className:`text-sm flex items-center ${ne==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),S?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${ne==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",D.toFixed(2)]}),e.jsxs(De,{to:J(),className:`text-sm flex items-center ${ne==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,onClick:()=>K(!1),role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Je(),K(!1)},className:`text-sm flex items-center ${ne==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${ne==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>K(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${ne==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>K(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx(K3,{show:V&&!!S,onClose:()=>L(!1),notifications:y,theme:ne}),e.jsxs("main",{className:"flex-1 px-4 sm:px-6 lg:px-8 py-10 pt-24 relative z-10",children:[e.jsxs("section",{ref:re,className:"relative h-64 sm:h-80 md:h-96 lg:h-[600px] mb-12 overflow-hidden rounded-2xl shadow-2xl",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),role:"region","aria-label":"Carrusel de contenido destacado",children:[e.jsx(ue,{initial:!1,children:e.jsx(v.div,{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${ed[a].src})`},initial:{opacity:0,x:300,scale:1.1},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-300,scale:1.1},transition:{duration:.8,ease:"easeInOut"},children:e.jsxs("div",{className:`absolute inset-0 bg-gradient-to-t ${ne==="dark"?"from-black/90 via-black/60 to-transparent":"from-white/90 via-white/60 to-transparent"} flex flex-col justify-end p-6 sm:p-8 md:p-10 lg:p-12`,children:[e.jsx(v.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.5},className:`text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-extrabold mb-2 bg-clip-text text-transparent bg-gradient-to-r ${ne==="dark"?"from-white to-gray-200":"from-gray-900 to-gray-700"} tracking-tight drop-shadow-md`,children:ed[a].title}),e.jsx(v.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},className:`text-sm sm:text-base md:text-lg lg:text-xl max-w-md ${ne==="dark"?"text-gray-300":"text-gray-700"} font-medium drop-shadow-sm`,children:ed[a].description})]})},a)}),e.jsx("button",{onClick:i,className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${ne==="dark"?"bg-black/50 hover:bg-black/70":"bg-white/50 hover:bg-white/70"} backdrop-blur-lg p-3 rounded-full transition-all duration-300 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,"aria-label":"Diapositiva anterior",children:e.jsx(bL,{size:20})}),e.jsx("button",{onClick:u,className:`absolute right-4 top-1/2 transform -translate-y-1/2 ${ne==="dark"?"bg-black/50 hover:bg-black/70":"bg-white/50 hover:bg-white/70"} backdrop-blur-lg p-3 rounded-full transition-all duration-300 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,"aria-label":"Diapositiva siguiente",children:e.jsx(fL,{size:20})}),e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",role:"tablist",children:ed.map((de,ve)=>e.jsx("button",{className:`w-2 h-2 sm:w-3 sm:h-3 rounded-full transition-all duration-300 ${a===ve?"bg-blue-500 scale-125":ne==="dark"?"bg-gray-500/50":"bg-gray-400/50"} focus:outline-none focus:ring-2 focus:ring-blue-500`,onClick:()=>n(ve),role:"tab","aria-selected":a===ve,"aria-label":`Ir a diapositiva ${ve+1}`},ve))}),e.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 ${ne==="dark"?"bg-gray-800/50":"bg-gray-200/50"}`,children:e.jsx(v.div,{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600",style:{width:`${t}%`},initial:{width:0},animate:{width:`${t}%`},transition:{duration:.1}})})]}),e.jsxs("section",{className:"relative",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold mb-10 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600 tracking-tight",children:"Categorías de Plataformas"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-4 sm:gap-6 lg:gap-8",children:h.length>0?h.map((de,ve)=>e.jsx(G3,{platform:de,theme:ne},ve)):e.jsx("p",{className:`col-span-full text-center text-lg ${ne==="dark"?"text-gray-400":"text-gray-600"} font-medium`,children:"No se encontraron plataformas."})})]})]}),e.jsx("footer",{className:`${ne==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-10 px-4 sm:px-6 lg:px-8 text-center text-sm relative z-10`,children:e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[e.jsxs("p",{className:`${ne==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["BlackStreaming - Todos los derechos reservados. Desarrollado por"," ",e.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Saiph"}),"."]}),e.jsxs("div",{className:"flex justify-center space-x-8",children:[e.jsx("a",{href:"https://twitter.com",className:`${ne==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Twitter de BlackStreaming",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",className:`${ne==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Instagram de BlackStreaming",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",className:`${ne==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Facebook de BlackStreaming",children:e.jsx(fr,{size:24})})]})]})}),e.jsx(ue,{children:H&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:ye,className:`fixed bottom-6 left-6 bg-blue-600/90 backdrop-blur-lg p-3 rounded-full hover:bg-blue-700/95 shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 ${ne==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Volver al inicio de la página",children:e.jsx(Ir,{size:20})})})]})};Q3.propTypes={};const aO=()=>{const[a,t]=m.useState(""),[s,n]=m.useState(""),[i,u]=m.useState(!1),[l,p]=m.useState(""),[h,k]=m.useState(!1),[S,$]=m.useState(()=>localStorage.getItem("theme")||"dark"),D=cr(),O=m.useRef(null);m.useEffect(()=>{localStorage.setItem("theme",S),document.documentElement.classList.toggle("dark",S==="dark")},[S]),m.useEffect(()=>{const U=$t.onAuthStateChanged(ne=>{ne&&D("/")});return()=>U()},[D]),m.useEffect(()=>{O.current?.focus()},[]);const Y=m.useCallback(()=>a?s?s.length<6?"La contraseña debe tener al menos 6 caracteres":"":"Por favor, ingresa tu contraseña":"Por favor, ingresa tu nombre de usuario o correo electrónico",[a,s]),W=async U=>{try{const ne=ae(I,"users"),oe=Te(ne,We("username","==",U)),$e=await _t(oe);if(!$e.empty){const K=$e.docs[0].data();return{email:K.email,status:K.status||"active"}}return null}catch(ne){return console.error("Error fetching username:",ne),null}},N=m.useCallback(async U=>{U.preventDefault();const ne=Y();if(ne){p(ne);return}p(""),k(!0);try{let oe=a,$e="active";if(a.includes("@")){const K=ae(I,"users"),V=Te(K,We("email","==",a)),L=await _t(V);L.empty||($e=L.docs[0].data().status||"active")}else{const K=await W(a);if(!K){p("Nombre de usuario no encontrado"),k(!1);return}oe=K.email,$e=K.status}if($e==="suspended"){p("Esta cuenta está suspendida y no se puede ingresar"),k(!1);return}await N8($t,oe,s),t(""),n(""),D("/")}catch(oe){p(oe.code==="auth/wrong-password"?"Contraseña incorrecta":oe.code==="auth/user-not-found"?"Usuario o correo electrónico no encontrado":oe.code==="auth/too-many-requests"?"Demasiados intentos fallidos. Intenta de nuevo más tarde.":"Error al iniciar sesión. Por favor, intenta de nuevo.")}finally{k(!1)}},[a,s,D,Y]),G=m.useCallback(()=>{$(U=>U==="dark"?"light":"dark")},[]),H=m.useCallback(()=>{u(U=>!U)},[]);return e.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${S==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-100 via-gray-50 to-white text-gray-900"} flex flex-col items-center justify-between px-4 sm:px-6 lg:px-8 font-inter relative overflow-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${S==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(25)].map((U,ne)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},ne))})]}),e.jsx("main",{className:"flex-1 flex items-center justify-center w-full py-12 sm:py-16 relative z-10",children:e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`${S==="dark"?"bg-gray-900/30 border-gray-700/30":"bg-white/90 border-gray-200/30"} backdrop-blur-xl rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md`,role:"form","aria-labelledby":"login-title",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${S==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-2xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("button",{onClick:G,className:`p-2 rounded-full ${S==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${S==="dark"?"claro":"oscuro"}`,children:S==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})})]}),e.jsx("h2",{id:"login-title",className:"text-2xl sm:text-3xl font-bold mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Iniciar Sesión"}),e.jsx(ue,{children:l&&e.jsx(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${S==="dark"?"bg-red-900/50 border-red-600/50":"bg-red-100/50 border-red-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-red-600 border-l-4`,role:"alert",children:l})}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oc,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${S==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx(v.input,{ref:O,type:"text",placeholder:"Nombre de usuario o correo electrónico",value:a,onChange:U=>t(U.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${S==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Nombre de usuario o correo electrónico",required:!0,whileFocus:{scale:1.02}})]}),e.jsxs("div",{className:"relative",children:[e.jsx(hf,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${S==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx(v.input,{type:i?"text":"password",placeholder:"Contraseña",value:s,onChange:U=>n(U.target.value),className:`w-full pl-12 pr-12 py-3 rounded-full ${S==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Contraseña",required:!0,whileFocus:{scale:1.02}}),e.jsx("button",{type:"button",onClick:H,className:`absolute right-4 top-1/2 transform -translate-y-1/2 ${S==="dark"?"text-gray-400 hover:text-gray-200":"text-gray-600 hover:text-gray-800"} transition duration-200`,"aria-label":i?"Ocultar contraseña":"Mostrar contraseña",children:i?e.jsx(H3,{size:18}):e.jsx(W3,{size:18})})]}),e.jsxs(v.button,{type:"submit",disabled:h,className:`w-full bg-blue-600/90 backdrop-blur-xl py-3 rounded-full ${h?"opacity-50 cursor-not-allowed":"hover:bg-blue-700/95"} text-sm border ${S==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center justify-center text-white font-semibold`,"aria-label":"Iniciar sesión",whileHover:{scale:h?1:1.05},whileTap:{scale:h?1:.95},children:[h?e.jsxs(v.svg,{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-16 0z"})]}):e.jsx(Ut,{className:"mr-2"}),h?"Cargando...":"Iniciar Sesión"]})]}),e.jsxs("div",{className:"text-center text-sm mt-6 space-y-3",children:[e.jsxs("p",{className:`${S==="dark"?"text-gray-300":"text-gray-700"}`,children:["¿No tienes una cuenta?"," ",e.jsx(De,{to:"/register",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Ir a registrarse",children:"Regístrate aquí"})]}),e.jsxs("p",{className:`${S==="dark"?"text-gray-300":"text-gray-700"}`,children:["¿Olvidaste tu contraseña?"," ",e.jsx(De,{to:"/forgot-password",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Recuperar contraseña",children:"Recupérala aquí"})]})]})]})}),e.jsx("footer",{className:`${S==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-10 px-4 sm:px-6 lg:px-8 text-center text-sm relative z-10 w-full`,children:e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[e.jsxs("p",{className:`${S==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["BlackStreaming - Todos los derechos reservados. Desarrollado por"," ",e.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Saiph"}),"."]}),e.jsxs("div",{className:"flex justify-center space-x-8",children:[e.jsx("a",{href:"https://twitter.com",className:`${S==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Twitter de BlackStreaming",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",className:`${S==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Instagram de BlackStreaming",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",className:`${S==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Facebook de BlackStreaming",children:e.jsx(fr,{size:24})})]})]})})]})},sO=()=>{const[a,t]=m.useState(""),[s,n]=m.useState(""),[i,u]=m.useState(""),[l,p]=m.useState(""),[h,k]=m.useState(""),[S,$]=m.useState(!1),[D,O]=m.useState(""),[Y,W]=m.useState(!1),[N,G]=m.useState(()=>localStorage.getItem("theme")||"dark"),H=cr(),U=m.useRef(null);m.useEffect(()=>{localStorage.setItem("theme",N),document.documentElement.classList.toggle("dark",N==="dark")},[N]),m.useEffect(()=>{const V=$t.onAuthStateChanged(L=>{L&&H("/")});return()=>V()},[H]),m.useEffect(()=>{U.current?.focus()},[]);const ne=m.useCallback(async()=>a?/^[a-zA-Z0-9_]{3,20}$/.test(a)?(await zt(Z(I,"usernames",a.toLowerCase()))).exists()?"El nombre de usuario ya está en uso":s?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?i?/^\d{9}$/.test(i)?l?l.length<6?"La contraseña debe tener al menos 6 caracteres":"":"Por favor, ingresa una contraseña":"El número de teléfono debe tener 9 dígitos":"Por favor, ingresa tu número de teléfono":"Correo electrónico inválido":"Por favor, ingresa tu correo electrónico":"El nombre de usuario debe tener entre 3 y 20 caracteres alfanuméricos":"Por favor, ingresa un nombre de usuario",[a,s,i,l]),oe=m.useCallback(async V=>{V.preventDefault();const L=await ne();if(L){O(L);return}O(""),W(!0);try{const se=(await k8($t,s,l)).user;await C8(se,{displayName:a}),await Go(Z(I,"users",se.uid),{username:a.toLowerCase(),email:s.toLowerCase(),phoneNumber:`+51${i}`,referralCode:h||null,balance:0,createdAt:new Date}),await Go(Z(I,"usernames",a.toLowerCase()),{email:s.toLowerCase(),uid:se.uid}),t(""),n(""),u(""),p(""),k(""),H("/")}catch(y){O(y.code==="auth/email-already-in-use"?"El correo electrónico ya está registrado":y.code==="auth/invalid-email"?"Correo electrónico inválido":y.code==="auth/weak-password"?"La contraseña es demasiado débil":"Error al registrarse. Por favor, intenta de nuevo.")}finally{W(!1)}},[a,s,i,l,h,H,ne]),$e=m.useCallback(()=>{G(V=>V==="dark"?"light":"dark")},[]),K=m.useCallback(()=>{$(V=>!V)},[]);return e.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${N==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-100 via-gray-50 to-white text-gray-900"} flex flex-col items-center justify-between px-4 sm:px-6 lg:px-8 font-inter relative overflow-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${N==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(25)].map((V,L)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},L))})]}),e.jsx("main",{className:"flex-1 flex items-center justify-center w-full py-12 sm:py-16 relative z-10",children:e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`${N==="dark"?"bg-gray-900/30 border-gray-700/30":"bg-white/90 border-gray-200/30"} backdrop-blur-xl rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md`,role:"form","aria-labelledby":"register-title",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${N==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-2xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("button",{onClick:$e,className:`p-2 rounded-full ${N==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${N==="dark"?"claro":"oscuro"}`,children:N==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})})]}),e.jsx("h2",{id:"register-title",className:"text-2xl sm:text-3xl font-bold mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Registrarse"}),e.jsx(ue,{children:D&&e.jsx(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${N==="dark"?"bg-red-900/50 border-red-600/50":"bg-red-100/50 border-red-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-red-600 border-l-4`,role:"alert",children:D})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oc,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${N==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx(v.input,{ref:U,type:"text",placeholder:"Elige un nombre de usuario",value:a,onChange:V=>t(V.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${N==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Nombre de usuario",required:!0,whileFocus:{scale:1.02}})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Od,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${N==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx(v.input,{type:"email",placeholder:"Tu correo electrónico",value:s,onChange:V=>n(V.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${N==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Correo electrónico",required:!0,whileFocus:{scale:1.02}})]}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx(vL,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${N==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsxs("div",{className:"flex w-full",children:[e.jsx("span",{className:`flex items-center pl-12 pr-3 py-3 rounded-l-full border-r ${N==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} text-sm`,children:"🇵🇪 Perú (+51)"}),e.jsx(v.input,{type:"tel",placeholder:"Tu número de teléfono",value:i,onChange:V=>u(V.target.value.replace(/\D/g,"")),className:`w-full pl-4 pr-4 py-3 rounded-r-full ${N==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Número de teléfono",required:!0,maxLength:9,whileFocus:{scale:1.02}})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(hf,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${N==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx(v.input,{type:S?"text":"password",placeholder:"Elige una contraseña",value:l,onChange:V=>p(V.target.value),className:`w-full pl-12 pr-12 py-3 rounded-full ${N==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Contraseña",required:!0,whileFocus:{scale:1.02}}),e.jsx("button",{onClick:K,className:`absolute right-4 top-1/2 transform -translate-y-1/2 ${N==="dark"?"text-gray-400 hover:text-gray-200":"text-gray-600 hover:text-gray-800"} transition duration-200`,"aria-label":S?"Ocultar contraseña":"Mostrar contraseña",children:S?e.jsx(H3,{size:18}):e.jsx(W3,{size:18})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(oc,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${N==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx(v.input,{type:"text",placeholder:"Ingresa un código de referido (si tienes)",value:h,onChange:V=>k(V.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${N==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Código de referido (opcional)",whileFocus:{scale:1.02}})]}),e.jsxs(v.button,{onClick:oe,disabled:Y,className:`w-full bg-green-600/90 backdrop-blur-xl py-3 rounded-full ${Y?"opacity-50 cursor-not-allowed":"hover:bg-green-700/95"} text-sm border ${N==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center justify-center text-white font-semibold`,"aria-label":"Registrarse",whileHover:{scale:Y?1:1.05},whileTap:{scale:Y?1:.95},children:[Y?e.jsxs(v.svg,{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-16 0z"})]}):e.jsx(qt,{className:"mr-2"}),Y?"Cargando...":"Registrarse"]})]}),e.jsxs("p",{className:`text-center text-sm mt-6 ${N==="dark"?"text-gray-300":"text-gray-700"}`,children:["¿Ya tienes una cuenta?"," ",e.jsx(De,{to:"/login",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Ir a iniciar sesión",children:"Inicia sesión aquí"})]})]})}),e.jsx("footer",{className:`${N==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-10 px-4 sm:px-6 lg:px-8 text-center text-sm relative z-10 w-full`,children:e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[e.jsxs("p",{className:`${N==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["BlackStreaming - Todos los derechos reservados. Desarrollado por"," ",e.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Saiph"}),"."]}),e.jsxs("div",{className:"flex justify-center space-x-8",children:[e.jsx("a",{href:"https://twitter.com",className:`${N==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Twitter de BlackStreaming",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",className:`${N==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Instagram de BlackStreaming",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",className:`${N==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Facebook de BlackStreaming",children:e.jsx(fr,{size:24})})]})]})})]})},nO=()=>{const[a,t]=m.useState(""),[s,n]=m.useState(""),[i,u]=m.useState(""),[l,p]=m.useState(!1),[h,k]=m.useState(()=>localStorage.getItem("theme")||"dark"),S=cr(),$=m.useRef(null);m.useEffect(()=>{localStorage.setItem("theme",h),document.documentElement.classList.toggle("dark",h==="dark")},[h]),m.useEffect(()=>{const W=$t.onAuthStateChanged(N=>{N&&S("/")});return()=>W()},[S]),m.useEffect(()=>{$.current?.focus()},[]);const D=m.useCallback(()=>a?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)?"":"Correo electrónico inválido":"Por favor, ingresa tu correo electrónico",[a]),O=m.useCallback(async W=>{W.preventDefault();const N=D();if(N){n(N),u("");return}n(""),u(""),p(!0);try{await w8($t,a),u("Se ha enviado un enlace de restablecimiento de contraseña a tu correo electrónico."),t("")}catch(G){n(G.code==="auth/user-not-found"?"No se encontró un usuario con este correo electrónico":G.code==="auth/invalid-email"?"Correo electrónico inválido":G.code==="auth/too-many-requests"?"Demasiados intentos. Intenta de nuevo más tarde.":"Error al enviar el enlace de restablecimiento. Por favor, intenta de nuevo.")}finally{p(!1)}},[a,D]),Y=m.useCallback(()=>{k(W=>W==="dark"?"light":"dark")},[]);return e.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${h==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-100 via-gray-50 to-white text-gray-900"} flex flex-col items-center justify-between px-4 sm:px-6 lg:px-8 font-inter relative overflow-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${h==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(25)].map((W,N)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},N))})]}),e.jsx("main",{className:"flex-1 flex items-center justify-center w-full py-12 sm:py-16 relative z-10",children:e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`${h==="dark"?"bg-gray-900/30 border-gray-700/30":"bg-white/90 border-gray-200/30"} backdrop-blur-xl rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md`,role:"form","aria-labelledby":"forgot-password-title",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${h==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-2xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("button",{onClick:Y,className:`p-2 rounded-full ${h==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${h==="dark"?"claro":"oscuro"}`,children:h==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})})]}),e.jsx("h2",{id:"forgot-password-title",className:"text-2xl sm:text-3xl font-bold mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Recuperar Contraseña"}),e.jsxs(ue,{children:[s&&e.jsx(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${h==="dark"?"bg-red-900/50 border-red-600/50":"bg-red-100/50 border-red-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-red-600 border-l-4`,role:"alert",children:s}),i&&e.jsx(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${h==="dark"?"bg-green-900/50 border-green-600/50":"bg-green-100/50 border-green-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-green-600 border-l-4`,role:"alert",children:i})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Od,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${h==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx(v.input,{ref:$,type:"email",placeholder:"Tu correo electrónico",value:a,onChange:W=>t(W.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${h==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Correo electrónico",required:!0,whileFocus:{scale:1.02}})]}),e.jsxs(v.button,{onClick:O,disabled:l,className:`w-full bg-blue-600/90 backdrop-blur-xl py-3 rounded-full ${l?"opacity-50 cursor-not-allowed":"hover:bg-blue-700/95"} text-sm border ${h==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center justify-center text-white font-semibold`,"aria-label":"Enviar enlace de restablecimiento",whileHover:{scale:l?1:1.05},whileTap:{scale:l?1:.95},children:[l?e.jsxs(v.svg,{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-16 0z"})]}):e.jsx(Od,{className:"mr-2"}),l?"Cargando...":"Enviar Enlace de Restablecimiento"]})]}),e.jsxs("div",{className:"text-center text-sm mt-6 space-y-3",children:[e.jsxs("p",{className:`${h==="dark"?"text-gray-300":"text-gray-700"}`,children:["¿Ya tienes una cuenta?"," ",e.jsx(De,{to:"/login",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Ir a iniciar sesión",children:"Inicia sesión aquí"})]}),e.jsxs("p",{className:`${h==="dark"?"text-gray-300":"text-gray-700"}`,children:["¿No tienes una cuenta?"," ",e.jsx(De,{to:"/register",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Ir a registrarse",children:"Regístrate aquí"})]})]})]})}),e.jsx("footer",{className:`${h==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-10 px-4 sm:px-6 lg:px-8 text-center text-sm relative z-10 w-full`,children:e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[e.jsxs("p",{className:`${h==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["BlackStreaming - Todos los derechos reservados. Desarrollado por"," ",e.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Saiph"}),"."]}),e.jsxs("div",{className:"flex justify-center space-x-8",children:[e.jsx("a",{href:"https://twitter.com",className:`${h==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Twitter de BlackStreaming",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",className:`${h==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Instagram de BlackStreaming",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",className:`${h==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Facebook de BlackStreaming",children:e.jsx(fr,{size:24})})]})]})})]})};function Lr(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(a)}function $r(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(a)}function Dm(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(a)}function Qt(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(a)}function Y3(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(a)}function _m(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(a)}function oO(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(a)}function Dr(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(a)}function iO(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(a)}function HN(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"},child:[]},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"},child:[]},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"},child:[]}]})(a)}function Xn(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(a)}function X3(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(a)}function lO(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(a)}function Wt(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(a)}function wt(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"},child:[]},{tag:"line",attr:{x1:"7",y1:"2",x2:"7",y2:"22"},child:[]},{tag:"line",attr:{x1:"17",y1:"2",x2:"17",y2:"22"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"2",y1:"7",x2:"7",y2:"7"},child:[]},{tag:"line",attr:{x1:"2",y1:"17",x2:"7",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"17",x2:"22",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"7",x2:"22",y2:"7"},child:[]}]})(a)}function Yt(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(a)}function cO(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(a)}function Or(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(a)}function Xt(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(a)}function Vd(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(a)}function dO(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(a)}function zr(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(a)}function Ns(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(a)}function Vr(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(a)}function tt(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 18V5l12-2v13"},child:[]},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"16",r:"3"},child:[]}]})(a)}function Jt(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 19l7-7 3 3-7 7-3-3z"},child:[]},{tag:"path",attr:{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"},child:[]},{tag:"path",attr:{d:"M2 2l7.586 7.586"},child:[]},{tag:"circle",attr:{cx:"11",cy:"11",r:"2"},child:[]}]})(a)}function gg(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(a)}function Zt(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polygon",attr:{points:"10 8 16 12 10 16 10 8"},child:[]}]})(a)}function WN(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(a)}function J3(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(a)}function Tr(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(a)}function Z3(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(a)}function br(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(a)}function vt(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(a)}function wx(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(a)}function e4(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(a)}function GN(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(a)}function be(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"15",rx:"2",ry:"2"},child:[]},{tag:"polyline",attr:{points:"17 2 12 7 7 2"},child:[]}]})(a)}function t4(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(a)}function Fr(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(a)}function Vs(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(a)}function KN(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(a)}function kt(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(a)}function Ts(a){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(a)}const uO=({isOpen:a,message:t,title:s,onClose:n})=>a?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:s}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(Ts,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:n,className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,r4=({isOpen:a,user:t,onClose:s,onSave:n,theme:i="dark"})=>{const u=i==="dark",[l,p]=m.useState(t?.username||""),[h,k]=m.useState(""),S={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,scale:.95,transition:{duration:.2}}},$={hover:{scale:1.05,transition:{duration:.2}},tap:{scale:.95}},D=O=>{if(O.preventDefault(),k(""),!l.trim()){k("El nombre de usuario no puede estar vacío.");return}n(t.id,l.trim())};return a?e.jsx(v.div,{className:`fixed inset-0 ${u?"bg-black/70":"bg-black/50"} flex items-center justify-center z-50 p-4`,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},role:"dialog","aria-modal":"true","aria-labelledby":"edit-profile-title",children:e.jsx(v.div,{className:`rounded-2xl shadow-md w-full max-w-md border ${u?"bg-gray-900/90 border-gray-700/50":"bg-white border-gray-300"}`,variants:S,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{id:"edit-profile-title",className:"text-xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Editar Perfil"}),e.jsx(v.button,{onClick:s,className:`${u?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,variants:$,whileHover:"hover",whileTap:"tap","aria-label":"Cerrar modal",children:e.jsx(Ts,{size:20})})]}),e.jsxs("form",{onSubmit:D,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block mb-2 font-semibold ${u?"text-gray-300":"text-gray-700"}`,children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:l,onChange:O=>p(O.target.value),className:`w-full px-4 py-2 rounded-xl ${u?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300`,required:!0,"aria-label":"Nombre de usuario"}),h&&e.jsx("p",{className:`text-sm mt-2 ${u?"text-red-400":"text-red-600"}`,children:h})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(v.button,{type:"button",onClick:s,className:`px-4 py-2 rounded-xl font-medium transition-all duration-300 ${u?"bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-400":"bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:$,whileHover:"hover",whileTap:"tap","aria-label":"Cancelar edición",children:"Cancelar"}),e.jsx(v.button,{type:"submit",className:`px-4 py-2 rounded-xl font-medium transition-all duration-300 ${u?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:$,whileHover:"hover",whileTap:"tap","aria-label":"Guardar perfil",children:"Guardar"})]})]})]})})}):null};r4.propTypes={isOpen:F.bool.isRequired,user:F.shape({id:F.string.isRequired,username:F.string.isRequired}).isRequired,onClose:F.func.isRequired,onSave:F.func.isRequired,theme:F.oneOf(["light","dark"]).isRequired};const a4=({isOpen:a,provider:t,onClose:s,onRate:n,theme:i="dark"})=>{const u=i==="dark",[l,p]=m.useState(0),[h,k]=m.useState(""),S={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,scale:.95,transition:{duration:.2}}},$={hover:{scale:1.05,transition:{duration:.2}},tap:{scale:.95}},D=O=>{if(O.preventDefault(),k(""),l<1||l>5){k("Por favor, selecciona una calificación entre 1 y 5 estrellas.");return}n(t.id,l),p(0)};return a?e.jsx(v.div,{className:`fixed inset-0 ${u?"bg-black/70":"bg-black/50"} flex items-center justify-center z-50 p-4`,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},role:"dialog","aria-modal":"true","aria-labelledby":"rate-provider-title",children:e.jsx(v.div,{className:`rounded-2xl shadow-md w-full max-w-md border ${u?"bg-gray-900/90 border-gray-700/50":"bg-white border-gray-300"}`,variants:S,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{id:"rate-provider-title",className:"text-xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Calificar Proveedor"}),e.jsx(v.button,{onClick:s,className:`${u?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,variants:$,whileHover:"hover",whileTap:"tap","aria-label":"Cerrar modal",children:e.jsx(Ts,{size:20})})]}),e.jsxs("form",{onSubmit:D,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:`block mb-2 font-semibold ${u?"text-gray-300":"text-gray-700"}`,children:["Proveedor: ",t.name]}),e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(O=>e.jsx(v.div,{variants:$,whileHover:"hover",whileTap:"tap",children:e.jsx(vt,{size:24,className:`cursor-pointer ${O<=l?u?"text-yellow-400 fill-current":"text-yellow-600 fill-current":u?"text-gray-400":"text-gray-600"}`,onClick:()=>p(O),"aria-label":`Calificar con ${O} estrella${O>1?"s":""}`})},O))}),h&&e.jsx("p",{className:`text-sm mt-2 ${u?"text-red-400":"text-red-600"}`,children:h})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(v.button,{type:"button",onClick:s,className:`px-4 py-2 rounded-xl font-medium transition-all duration-300 ${u?"bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-400":"bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:$,whileHover:"hover",whileTap:"tap","aria-label":"Cancelar calificación",children:"Cancelar"}),e.jsx(v.button,{type:"submit",className:`px-4 py-2 rounded-xl font-medium transition-all duration-300 ${u?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:$,whileHover:"hover",whileTap:"tap","aria-label":"Enviar calificación",children:"Enviar Calificación"})]})]})]})})}):null};a4.propTypes={isOpen:F.bool.isRequired,provider:F.shape({id:F.string.isRequired,name:F.string.isRequired}).isRequired,onClose:F.func.isRequired,onRate:F.func.isRequired,theme:F.oneOf(["light","dark"]).isRequired};const mO=({userName:a,email:t,balance:s,orders:n,notifications:i,setActivePage:u,formatDate:l,theme:p="dark"})=>{const h=p==="dark",k={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}};return e.jsxs(v.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-6xl mx-auto border ${h?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("h2",{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-6 bg-clip-text text-transparent bg-gradient-to-r ${h?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:["Bienvenido, ",e.jsx("span",{className:"text-red-400",children:a.username})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(v.div,{className:`rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${h?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:k,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("h3",{className:`text-lg font-semibold mb-3 ${h?"text-blue-400":"text-blue-600"}`,children:"Información de cuenta"}),e.jsxs("div",{className:`space-y-3 ${h?"text-gray-300":"text-gray-700"}`,children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Vs,{className:`mr-2 ${h?"text-blue-400":"text-blue-600"}`,size:18}),e.jsx("span",{children:a.username})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ns,{className:`mr-2 ${h?"text-blue-400":"text-blue-600"}`,size:18}),e.jsx("span",{children:t})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(gg,{className:`mr-2 ${h?"text-blue-400":"text-blue-600"}`,size:18}),e.jsx("span",{children:a.phone||"No especificado"})]})]})]}),e.jsxs(v.div,{className:`rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${h?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:k,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("h3",{className:`text-lg font-semibold mb-3 ${h?"text-blue-400":"text-blue-600"}`,children:"Saldo disponible"}),e.jsxs("p",{className:`text-3xl font-bold ${h?"text-white":"text-gray-900"}`,children:["S/ ",s.toFixed(2)]}),e.jsx(v.button,{onClick:()=>u("recargar"),className:`mt-4 px-4 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${h?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Recargar"})]}),e.jsxs(v.div,{className:`rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${h?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:k,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("h3",{className:`text-lg font-semibold mb-3 ${h?"text-blue-400":"text-blue-600"}`,children:"Pedidos activos"}),e.jsx("p",{className:`text-3xl font-bold ${h?"text-white":"text-gray-900"}`,children:n.filter(S=>new Date(S.endDate)>new Date&&S.status==="completed").length}),e.jsx(v.button,{onClick:()=>u("pedidos"),className:`mt-4 px-4 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${h?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Ver pedidos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs(v.div,{className:`rounded-2xl p-4 shadow-xl border backdrop-blur-sm ${h?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:k,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("h3",{className:`text-lg font-semibold mb-3 ${h?"text-white":"text-gray-900"}`,children:"Pedidos recientes"}),n.length>0?n.slice(0,3).map(S=>{const $=new Date(S.endDate)>new Date&&S.status==="completed",D=S.status==="pending";return e.jsxs(v.div,{className:`border-b py-3 last:border-0 hover:rounded-xl hover:px-2 transition-all duration-300 ${h?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,whileHover:{backgroundColor:h?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.5)"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`font-medium ${h?"text-white":"text-gray-900"}`,children:S.productName||"Producto sin nombre"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${S.status==="pending"?h?"bg-yellow-900/80 text-yellow-400":"bg-yellow-500/20 text-yellow-600":$?h?"bg-green-900/80 text-green-400":"bg-green-500/20 text-green-600":h?"bg-red-900/80 text-red-400":"bg-red-500/20 text-red-600"}`,children:D?"A pedido":$?"Activo":"Expirado"})]}),e.jsxs("p",{className:`text-sm ${h?"text-gray-400":"text-gray-600"}`,children:["Vence: ",l(S.endDate)]})]},S.id)}):e.jsx("p",{className:`py-2 ${h?"text-gray-400":"text-gray-500"}`,children:"No tienes pedidos recientes"}),n.length>3&&e.jsx(v.button,{onClick:()=>u("pedidos"),className:`w-full mt-3 text-center text-sm transition-all duration-300 ${h?"text-blue-400 hover:underline":"text-blue-600 hover:underline"}`,whileHover:{scale:1.05},children:"Ver todos los pedidos"})]}),e.jsxs(v.div,{className:`rounded-2xl p-4 shadow-xl border backdrop-blur-sm ${h?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:k,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("h3",{className:`text-lg font-semibold mb-3 ${h?"text-white":"text-gray-900"}`,children:"Notificaciones"}),i.length>0?i.map(S=>e.jsxs(v.div,{className:`border-b py-3 last:border-0 hover:rounded-xl hover:px-2 transition-all duration-300 ${h?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,whileHover:{backgroundColor:h?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.5)"},children:[e.jsx("p",{className:`${h?"text-gray-300":"text-gray-700"}`,children:S.message}),e.jsx("p",{className:`text-xs mt-1 ${h?"text-gray-400":"text-gray-500"}`,children:l(S.updatedAt?.toDate?.()||new Date)})]},S.id)):e.jsx("p",{className:`py-2 ${h?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})]}),e.jsxs(v.div,{className:`rounded-2xl p-4 sm:p-6 shadow-xl border backdrop-blur-sm ${h?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:k,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${h?"text-white":"text-gray-900"}`,children:"Únete a nuestros grupos"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[{href:"https://chat.whatsapp.com/IG8v1E00lAD6RIOo7ZB5Kv",icon:"https://cdn.jsdelivr.net/npm/simple-icons@v13/icons/whatsapp.svg",title:"Avisos",subtitle:"Grupo de WhatsApp"},{href:"https://chat.whatsapp.com/Gs6kTW4DBTi7dEMhnZV1yb",icon:"https://cdn.jsdelivr.net/npm/simple-icons@v13/icons/whatsapp.svg",title:"General",subtitle:"Grupo de WhatsApp"},{href:"https://chat.whatsapp.com/BqCOR6w8002695hbYXf5KA",icon:"https://cdn.jsdelivr.net/npm/simple-icons@v13/icons/whatsapp.svg",title:"Publicidad",subtitle:"Grupo de WhatsApp"}].map((S,$)=>e.jsxs(v.a,{href:S.href,target:"_blank",rel:"noopener noreferrer",className:`flex items-center p-4 rounded-xl transition-all duration-300 border ${h?"bg-gray-700/50 hover:bg-gray-600/50 border-gray-600/50":"bg-gray-200/50 hover:bg-gray-300/50 border-gray-300/50"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("img",{src:S.icon,alt:`${S.title} Logo`,className:"w-8 h-8 mr-3",loading:"lazy"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${h?"text-white":"text-gray-900"}`,children:S.title}),e.jsx("p",{className:`text-sm ${h?"text-gray-300":"text-gray-600"}`,children:S.subtitle})]})]},$))})]})]})},s4=({notifications:a,formatDate:t,theme:s="dark"})=>{const n=s==="dark",i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}};return e.jsxs(v.div,{className:`p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${n?"bg-gray-900/90 border-gray-700/50":"bg-white border-gray-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},role:"region","aria-labelledby":"notifications-title",children:[e.jsx("h3",{id:"notifications-title",className:"text-2xl sm:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-6",children:"Notificaciones"}),a.length>0?e.jsx("div",{className:"space-y-4",children:a.map(u=>e.jsxs(v.div,{className:`border ${n?"border-gray-600/50":"border-gray-300"} rounded-2xl p-4 ${n?"bg-gray-800/50 hover:bg-gray-700/50":"bg-gray-100 hover:bg-gray-200/50"} transition-all duration-300`,variants:i,initial:"hidden",animate:"visible",whileHover:"hover","aria-labelledby":`notification-${u.id}-title`,children:[e.jsx("p",{id:`notification-${u.id}-title`,className:`text-base ${n?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs ${n?"text-gray-400":"text-gray-600"} mt-2`,children:t(u.updatedAt?.toDate?.()||new Date)})]},u.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Dm,{className:`mx-auto text-4xl ${n?"text-gray-400":"text-gray-600"} mb-4`,"aria-hidden":"true"}),e.jsx("h4",{className:`text-lg font-semibold ${n?"text-white":"text-gray-900"}`,children:"No hay notificaciones"}),e.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"No tienes mensajes nuevos"})]})]})};s4.propTypes={notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.oneOfType([F.instanceOf(Date),F.shape({toDate:F.func})])})).isRequired,formatDate:F.func.isRequired,theme:F.oneOf(["light","dark"]).isRequired};const pO="/assets/yape-sz-D-gX92Ca.png",n4=({amount:a,setAmount:t,topUps:s,actionLoading:n,handleTopUpRequest:i,formatDate:u,theme:l="dark"})=>{const p=l==="dark",[h,k]=m.useState("PEN"),[S,$]=m.useState(3.75*1.1),[D,O]=m.useState(!1),[Y,W]=m.useState(""),N={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5}}};m.useEffect(()=>{(async()=>{O(!0);try{const $e=(await(await fetch("https://api.exchangerate-api.com/v4/latest/USD")).json()).rates.PEN||3.75;$($e*1.1)}catch(ne){console.error("Error fetching exchange rate:",ne)}finally{O(!1)}})()},[]),m.useEffect(()=>{const U=parseFloat(Y);if(isNaN(U))t("");else{const ne=h==="USD"?U*S:U;t(ne.toFixed(2))}},[Y,h,S,t]);const G=U=>{const ne=U.target.value;W(ne)},H=a&&!isNaN(parseFloat(a))?parseFloat(a).toFixed(2):"0.00";return e.jsxs(v.div,{className:"space-y-8 max-w-6xl mx-auto px-4 sm:px-0",variants:N,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"topup-title",children:[e.jsxs("div",{className:`p-6 sm:p-8 rounded-3xl shadow-md border ${p?"bg-gray-900/80 border-gray-700/30":"bg-white border-gray-300"}`,children:[e.jsx("h3",{id:"topup-title",className:"text-2xl sm:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-6 text-center",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-lg mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 font-medium ${p?"text-gray-300":"text-gray-700"}`,children:"Moneda"}),e.jsxs("select",{value:h,onChange:U=>{k(U.target.value),W("")},className:`w-full px-4 py-3 rounded-xl ${p?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300`,children:[e.jsx("option",{value:"PEN",children:"S/ (PEN)"}),e.jsx("option",{value:"USD",children:"$ (USD)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block mb-2 font-medium ${p?"text-gray-300":"text-gray-700"}`,children:["Monto a recargar (",h==="PEN"?"S/":"$",")"]}),e.jsx("input",{type:"number",value:Y,onChange:G,className:`w-full px-4 py-3 rounded-xl ${p?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300`,placeholder:`Mínimo ${h==="PEN"?"S/ 10.00":"$ "+(10/S).toFixed(2)}`,min:h==="PEN"?"10":(10/S).toFixed(2),step:"0.01","aria-label":`Monto a recargar en ${h}`}),h==="USD"&&!isNaN(parseFloat(Y))&&e.jsxs("p",{className:`text-sm ${p?"text-gray-400":"text-gray-600"} mt-2`,children:["Equivalente: S/ ",H," (Tasa: 1 USD = ",S.toFixed(2)," PEN, incluye 10% adicional)",D&&" (Cargando tasa...)"]})]}),e.jsx(v.button,{onClick:i,disabled:n.topUp||!a||parseFloat(a)<10,className:`w-full py-3 px-4 rounded-xl font-medium text-lg transition-all duration-300 ${a&&parseFloat(a)>=10&&!n.topUp?p?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500":"bg-gray-300 text-gray-500 cursor-not-allowed"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,whileHover:{scale:a&&parseFloat(a)>=10&&!n.topUp?1.05:1},whileTap:{scale:a&&parseFloat(a)>=10&&!n.topUp?.95:1},"aria-label":"Solicitar recarga",children:n.topUp?e.jsx("div",{className:"animate-spin h-6 w-6 border-3 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"})]}),e.jsx("div",{className:`mt-8 p-6 rounded-2xl border ${p?"bg-gray-800/50 border-gray-700/30":"bg-gray-100 border-gray-300"} max-w-lg mx-auto`,children:e.jsxs(v.div,{className:"animate-fade-in",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsxs("h4",{className:`text-lg font-semibold ${p?"text-blue-400":"text-blue-600"} mb-4 flex items-center`,children:[e.jsx(Xn,{className:"mr-2"})," Pago con Yape"]}),e.jsxs("p",{className:`mb-3 ${p?"text-gray-300":"text-gray-700"}`,children:["Escanea el código QR o usa ",e.jsx("span",{className:`font-semibold ${p?"text-white":"text-gray-900"}`,children:"Yape"})," con el número:"]}),e.jsx("p",{className:`text-xl font-bold ${p?"text-white":"text-gray-900"} mb-3`,children:"📱 940505969"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:`p-4 rounded-xl shadow-md ${p?"bg-white border-4 border-blue-600":"bg-white border border-gray-300"}`,children:e.jsx("img",{src:pO,alt:"Yape QR Code",className:"w-48 h-48 object-contain",loading:"lazy"})})}),e.jsxs("p",{className:`mb-4 ${p?"text-gray-300":"text-gray-700"}`,children:["Realiza el pago de S/ ",H,h==="USD"?" (equivalente a tu monto en USD con 10% adicional)":"",". Confirma tu recarga vía WhatsApp."]}),e.jsxs(v.a,{href:`https://wa.me/51940505969?text=${encodeURIComponent(`Hola 😊, he realizado una recarga a través de Yape por S/ ${H}. Por favor, confirma mi pago.`)}`,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center px-6 py-3 rounded-xl font-medium transition-all duration-300 ${p?"bg-green-500 hover:bg-green-600 text-white focus:ring-green-400":"bg-green-500 hover:bg-green-600 text-white focus:ring-green-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Confirmar pago por WhatsApp con Yape",children:[e.jsx(Ns,{className:"mr-2"})," Confirmar por WhatsApp"]})]})})]}),e.jsxs("div",{className:`p-6 sm:p-8 rounded-3xl shadow-md border ${p?"bg-gray-900/80 border-gray-700/30":"bg-white border-gray-300"}`,children:[e.jsx("h3",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-6 text-center",children:"Historial de recargas"}),s.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:`${p?"bg-gray-800/50":"bg-gray-100"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${p?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Monto"}),e.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${p?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Estado"}),e.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${p?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Fecha"})]})}),e.jsx("tbody",{className:`${p?"bg-gray-800/50":"bg-white"} divide-y ${p?"divide-gray-600/50":"divide-gray-200"}`,children:s.map(U=>e.jsxs("tr",{className:`${p?"hover:bg-gray-700/50":"hover:bg-gray-100"} transition-all duration-300`,children:[e.jsxs("td",{className:`px-4 py-4 whitespace-nowrap font-medium ${p?"text-white":"text-gray-900"}`,children:["S/ ",U.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${U.status==="aprobado"?p?"bg-green-900/80 text-green-400":"bg-green-500/20 text-green-600":U.status==="pendiente"?p?"bg-yellow-900/80 text-yellow-400":"bg-yellow-500/20 text-yellow-600":p?"bg-red-900/80 text-red-400":"bg-red-500/20 text-red-600"}`,children:U.status})}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${p?"text-gray-400":"text-gray-600"}`,children:u(U.date)})]},U.id))})]})}):e.jsx("p",{className:`text-lg text-center py-8 ${p?"text-gray-400":"text-gray-600"}`,children:"No hay recargas registradas"})]})]})};n4.propTypes={amount:F.oneOfType([F.string,F.number]).isRequired,setAmount:F.func.isRequired,topUps:F.arrayOf(F.shape({id:F.string.isRequired,amount:F.oneOfType([F.string,F.number]).isRequired,status:F.string.isRequired,date:F.oneOfType([F.instanceOf(Date),F.string]).isRequired})).isRequired,actionLoading:F.shape({topUp:F.bool}).isRequired,handleTopUpRequest:F.func.isRequired,formatDate:F.func.isRequired,theme:F.oneOf(["light","dark"]).isRequired};const o4=({providers:a,openRateProviderModal:t,theme:s="dark"})=>{const n=s==="dark",i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}};return e.jsxs(v.div,{className:`p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${n?"bg-gray-900/90 border-gray-700/50":"bg-white border-gray-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},role:"region","aria-labelledby":"providers-title",children:[e.jsx("h3",{id:"providers-title",className:"text-2xl sm:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-6",children:"Proveedores"}),a.length>0?e.jsx("div",{className:"space-y-4",children:a.map(u=>e.jsx(v.div,{className:`border ${n?"border-gray-600/50":"border-gray-300"} rounded-2xl p-4 ${n?"bg-gray-800/50 hover:bg-gray-700/50":"bg-gray-100 hover:bg-gray-200/50"} transition-all duration-300`,variants:i,initial:"hidden",animate:"visible",whileHover:"hover","aria-labelledby":`provider-${u.id}-title`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{id:`provider-${u.id}-title`,className:`font-semibold text-base ${n?"text-gray-300":"text-gray-700"}`,children:u.name}),e.jsxs("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:["Teléfono: ",u.phone]})]}),e.jsxs(v.button,{onClick:()=>t(u),className:`px-4 py-2 rounded-xl font-medium transition-all duration-300 ${n?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 flex items-center gap-1.5`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Calificar al proveedor ${u.name}`,children:[e.jsx(vt,{size:16}),"Calificar"]})]})},u.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Vs,{className:`mx-auto text-4xl ${n?"text-gray-400":"text-gray-600"} mb-4`,"aria-hidden":"true"}),e.jsx("h4",{className:`text-lg font-semibold ${n?"text-white":"text-gray-900"}`,children:"No hay proveedores"}),e.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"No has realizado compras con proveedores aún."})]})]})};o4.propTypes={providers:F.arrayOf(F.shape({id:F.string.isRequired,name:F.string.isRequired,phone:F.string.isRequired})).isRequired,openRateProviderModal:F.func.isRequired,theme:F.oneOf(["light","dark"]).isRequired};const i4=({orders:a,searchQuery:t,setSearchQuery:s,formatDate:n,handleRenewal:i,actionLoading:u,balance:l,theme:p="dark"})=>{const h=p==="dark",k={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},S=m.useMemo(()=>a.filter($=>($.productName||"").toLowerCase().includes(t.toLowerCase())||($.orderId||"").toLowerCase().includes(t.toLowerCase())),[a,t]);return e.jsxs(v.div,{className:`p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${h?"bg-gray-900/90 border-gray-700/50":"bg-white border-gray-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},role:"region","aria-labelledby":"orders-title",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4",children:[e.jsx("h3",{id:"orders-title",className:"text-2xl sm:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Mis Pedidos"}),e.jsxs("div",{className:"relative w-full sm:w-64 lg:w-80",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:t,onChange:$=>s($.target.value),className:`w-full px-4 py-2.5 rounded-full text-sm ${h?"bg-gray-800/50 border-gray-600/50 text-gray-200 placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:outline-none focus:ring-2 focus:ring-blue-400 transition-all duration-300`,"aria-label":"Buscar pedidos por nombre o ID"}),e.jsx(Tr,{className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${h?"text-gray-400":"text-gray-600"}`,size:18})]})]}),S.length>0?S.map($=>{const D=parseFloat($.price)||0,O=parseFloat($.renewalPrice)||D,Y=new Date($.endDate)>new Date&&$.status==="completed",W=$.status==="pending";Math.max(0,$.daysRemaining||0);const N=Math.min($.timeElapsedPercentage||0,100);let G=h?"bg-green-400":"bg-green-500";N>70&&N<=90?G=h?"bg-yellow-400":"bg-yellow-500":N>90&&(G=h?"bg-red-400":"bg-red-500");const H=W?e.jsx(Dr,{className:h?"text-yellow-400":"text-yellow-600",size:18,"aria-label":"Estado: Pendiente"}):Y?e.jsx(_m,{className:h?"text-green-400":"text-green-600",size:18,"aria-label":"Estado: Activo"}):e.jsx($r,{className:h?"text-red-400":"text-red-600",size:18,"aria-label":"Estado: Expirado"}),U=W?h?"bg-yellow-900/80 text-yellow-400":"bg-yellow-500/20 text-yellow-600":Y?h?"bg-green-900/80 text-green-400":"bg-green-500/20 text-green-600":h?"bg-red-900/80 text-red-400":"bg-red-500/20 text-red-600",ne=encodeURIComponent(`*Consulta sobre Pedido - ${$.productName||"Sin nombre"}*

*N° Pedido:* ${$.orderId||"No especificado"}
*Producto:* ${$.productName||"Sin nombre"}
*Precio:* S/ ${D.toFixed(2)}
`+(O?`*Precio de Renovación:* S/ ${O.toFixed(2)}
`:"")+`*Estado:* ${W?"A pedido":Y?"Activo":"Expirado"}
*Fecha de Inicio:* ${n($.startDate)}
*Fecha de Vencimiento:* ${n($.endDate)}
`+(W?`Hola 😊, he comprado un producto a pedido (${$.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),oe=encodeURIComponent(`😊 Estimado/a ${$.client?.customerName||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${$.productName||"Sin nombre"}.
🔢 Código: ${$.orderId||"No especificado"}
`+(W?"":`📧 Correo: ${$.account?.email||"No especificado"}
🔐 Contraseña: ${$.account?.password||"No especificado"}
👤 Perfil: ${$.account?.profile||"No especificado"}
📌 PIN: ${$.account?.pin||"No especificado"}
`)+`🌐 URL: Sin URL
📅 Fecha de creación: ${n($.startDate)}
📅 Fecha de vencimiento: ${n($.endDate)}
🏁 Días contratados: ${$.durationDays||30} días.

`+(W?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:"")+`*Términos y Condiciones:*
${$.termsAndConditions||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),$e=$.providerPhone?$.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999",K=$.client?.phone?$.client.phone.replace(/^\+/,"").replace(/\D/g,""):"51999999999";return e.jsxs(v.article,{className:`border ${h?"border-gray-700/50":"border-gray-300"} rounded-2xl overflow-hidden shadow-md mb-6`,variants:k,initial:"hidden",animate:"visible",whileHover:"hover","aria-labelledby":`order-${$.id}-title`,children:[e.jsxs("div",{className:`${h?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} border-b px-4 py-3 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[H,e.jsxs("div",{children:[e.jsx("h4",{id:`order-${$.id}-title`,className:`font-semibold text-lg ${h?"text-white":"text-gray-900"}`,children:$.productName||"Producto sin nombre"}),$.orderId&&e.jsxs("p",{className:`text-sm ${h?"text-gray-400":"text-gray-600"}`,children:["N°: ",$.orderId]})]})]}),e.jsxs("div",{className:"text-right flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:`text-lg font-bold ${h?"text-white":"text-gray-900"}`,children:["S/ ",D.toFixed(2)]}),O!==D&&e.jsxs("p",{className:`text-sm ${h?"text-gray-400":"text-gray-600"}`,children:["Ren: S/ $",O.toFixed(2)]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${U}`,children:W?"A pedido":Y?"Activo":"Expirado"})]})]}),e.jsxs("div",{className:`${h?"bg-gray-900/90":"bg-white"} p-4`,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:`w-full ${h?"bg-gray-700/50":"bg-gray-200"} rounded-full h-2.5`,role:"progressbar","aria-valuenow":N,"aria-valuemin":"0","aria-valuemax":"100","aria-label":`Progreso del pedido: ${N.toFixed(0)}% completado`,children:e.jsx("div",{className:`h-2.5 rounded-full ${G}`,style:{width:`${N}%`}})}),e.jsxs("p",{className:`text-sm ${h?"text-gray-400":"text-gray-600"} mt-1 text-right`,children:[N.toFixed(0),"% completado"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:`${h?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} border rounded-xl p-3`,children:[e.jsxs("h5",{className:`text-base font-semibold ${h?"text-blue-400":"text-blue-600"} flex items-center mb-2`,children:[e.jsx(Vs,{className:"mr-2",size:16})," Cuenta"]}),e.jsx("div",{className:"space-y-2 text-sm",children:W?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Usuario: ",e.jsx("span",{className:h?"text-gray-300":"text-gray-700",children:"Por completar"})]}),e.jsxs("p",{children:["Clave: ",e.jsx("span",{className:h?"text-gray-300":"text-gray-700",children:"Por completar"})]}),e.jsxs("p",{children:["Perfil: ",e.jsx("span",{className:h?"text-gray-300":"text-gray-700",children:"Por completar"})]}),e.jsxs("p",{children:["PIN: ",e.jsx("span",{className:h?"text-gray-300":"text-gray-700",children:"No"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Usuario: ",e.jsx("span",{className:h?"text-gray-300":"text-gray-700",children:$.account?.email||"No especificado"})]}),e.jsxs("p",{children:["Clave: ",e.jsx("span",{className:h?"text-gray-300":"text-gray-700",children:$.account?.password||"No especificado"})]}),e.jsxs("p",{children:["Perfil: ",e.jsx("span",{className:h?"text-gray-300":"text-gray-700",children:$.account?.profile||"No especificado"})]}),e.jsxs("p",{children:["PIN: ",e.jsx("span",{className:h?"text-gray-300":"text-gray-700",children:$.account?.pin||"No especificado"})]})]})})]}),e.jsxs("div",{className:`${h?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} border rounded-xl p-3`,children:[e.jsxs("h5",{className:`text-base font-semibold ${h?"text-blue-400":"text-blue-600"} flex items-center mb-2`,children:[e.jsx(Wt,{className:"mr-2",size:16})," Información del Pedido"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:["Inicio: ",e.jsx("span",{className:h?"text-gray-300":"text-gray-700",children:n($.startDate)})]}),e.jsxs("p",{children:["Vencimiento: ",e.jsx("span",{className:h?"text-gray-300":"text-gray-700",children:n($.endDate)})]}),e.jsxs("p",{children:["Estado: ",e.jsx("span",{className:h?"text-gray-300":"text-gray-700",children:W?"A pedido":Y?"Activo":"Expirado"})]})]})]}),e.jsxs("div",{className:`${h?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} border rounded-xl p-3`,children:[e.jsxs("h5",{className:`text-base font-semibold ${h?"text-blue-400":"text-blue-600"} flex items-center mb-2`,children:[e.jsx(Vs,{className:"mr-2",size:16})," Cliente"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:["Nombre: ",e.jsx("span",{className:h?"text-gray-300":"text-gray-700",children:$.client?.customerName||"No especificado"})]}),e.jsxs("p",{children:["Teléfono: ",e.jsx("span",{className:h?"text-gray-300":"text-gray-700",children:$.client?.phone||"No especificado"})]})]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap justify-end gap-3",children:[e.jsxs(v.a,{href:`https://wa.me/51${$e}?text=${ne}`,target:"_blank",rel:"noopener noreferrer",className:`px-4 py-2 text-white rounded-xl transition-all duration-300 ${h?"bg-green-500 hover:bg-green-600 focus:ring-green-400":"bg-green-500 hover:bg-green-600 focus:ring-green-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 text-sm flex items-center gap-1.5`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Contactar proveedor para el pedido ${$.orderId||$.productName}`,children:[e.jsx(Ns,{size:16})," Contactar proveedor"]}),Y&&$.renewable&&e.jsx(v.button,{onClick:()=>i($),disabled:u[`renew_${$.id}`]||l<O,className:`px-4 py-2 rounded-xl text-sm flex items-center gap-1.5 transition-all duration-300 ${u[`renew_${$.id}`]||l<O?"bg-gray-300 text-gray-500 cursor-not-allowed":h?"bg-blue-500 text-white hover:bg-blue-600 focus:ring-blue-400":"bg-blue-500 text-white hover:bg-blue-600 focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,whileHover:{scale:u[`renew_${$.id}`]||l<O?1:1.05},whileTap:{scale:u[`renew_${$.id}`]||l<O?1:.95},"aria-label":`Renovar pedido ${$.orderId||$.productName} por S/ ${O.toFixed(2)}`,children:u[`renew_${$.id}`]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(J3,{size:16})," Renovar (S/ ",O.toFixed(2),")"]})}),e.jsxs(v.a,{href:`https://wa.me/51${K}?text=${oe}`,target:"_blank",rel:"noopener noreferrer",className:`px-4 py-2 text-white rounded-xl transition-all duration-300 ${h?"bg-blue-500 hover:bg-blue-600 focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 text-sm flex items-center gap-1.5`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Contactar cliente para el pedido ${$.orderId||$.productName}`,children:[e.jsx(Ns,{size:16})," Contactar cliente"]})]})]})]},$.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(br,{className:`mx-auto text-4xl ${h?"text-gray-400":"text-gray-600"} mb-4`,"aria-hidden":"true"}),e.jsx("h4",{className:`text-lg font-semibold ${h?"text-white":"text-gray-900"}`,children:"No hay pedidos"}),e.jsx("p",{className:`text-sm ${h?"text-gray-400":"text-gray-600"}`,children:"Aún no has realizado ningún pedido."})]})]})};i4.propTypes={orders:F.arrayOf(F.shape({id:F.string.isRequired,productName:F.string,orderId:F.string,price:F.oneOfType([F.string,F.number]),renewalPrice:F.oneOfType([F.string,F.number]),status:F.string,startDate:F.oneOfType([F.string,F.instanceOf(Date)]),endDate:F.oneOfType([F.string,F.instanceOf(Date)]),daysRemaining:F.number,timeElapsedPercentage:F.number,account:F.shape({email:F.string,password:F.string,profile:F.string,pin:F.string}),client:F.shape({customerName:F.string,phone:F.string}),providerPhone:F.string,renewable:F.bool,termsAndConditions:F.string})).isRequired,searchQuery:F.string.isRequired,setSearchQuery:F.func.isRequired,formatDate:F.func.isRequired,handleRenewal:F.func.isRequired,actionLoading:F.object.isRequired,balance:F.number.isRequired,theme:F.oneOf(["light","dark"]).isRequired};const l4=({userName:a,email:t,actionLoading:s,handleUpdatePassword:n,openEditProfileModal:i,handleLogout:u,theme:l="dark"})=>{const p=l==="dark",h={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5}}},k={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},S={hover:{scale:1.05,transition:{duration:.2}},tap:{scale:.95}};return e.jsxs(v.div,{className:`p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${p?"bg-gray-900/90 border-gray-700/50":"bg-white border-gray-300"}`,variants:h,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"settings-title",children:[e.jsx("h3",{id:"settings-title",className:"text-2xl sm:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-6",children:"Configuración"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(v.div,{className:`p-4 rounded-2xl border ${p?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} shadow-md hover:bg-gray-200/50 transition-all duration-300`,variants:k,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h4",{className:`text-lg font-semibold ${p?"text-blue-400":"text-blue-600"} mb-3 flex items-center`,children:[e.jsx(Vs,{className:"mr-2"})," Perfil"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Vs,{className:`mr-2 ${p?"text-blue-400":"text-gray-600"}`}),"Nombre: ",e.jsx("span",{className:p?"text-gray-300":"text-gray-700",children:a.username})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(dO,{className:`mr-2 ${p?"text-blue-400":"text-gray-600"}`}),"Correo: ",e.jsx("span",{className:p?"text-gray-300":"text-gray-700",children:t})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(gg,{className:`mr-2 ${p?"text-blue-400":"text-gray-600"}`}),"Teléfono: ",e.jsx("span",{className:p?"text-gray-300":"text-gray-700",children:a.phone||"No especificado"})]})]}),e.jsx(v.button,{onClick:()=>i({id:a.id,username:a.username}),className:`mt-4 px-4 py-2 rounded-xl font-medium transition-all duration-300 ${p?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:S,whileHover:"hover",whileTap:"tap","aria-label":"Editar perfil",children:"Editar Perfil"})]}),e.jsxs(v.div,{className:`p-4 rounded-2xl border ${p?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} shadow-md hover:bg-gray-200/50 transition-all duration-300`,variants:k,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h4",{className:`text-lg font-semibold ${p?"text-blue-400":"text-blue-600"} mb-3 flex items-center`,children:[e.jsx(gg,{className:"mr-2"})," Seguridad"]}),e.jsxs("form",{onSubmit:n,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-1 font-medium ${p?"text-gray-300":"text-gray-700"}`,children:"Nueva Contraseña"}),e.jsx("input",{type:"password",name:"password",className:`w-full px-3 py-2 rounded-xl ${p?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300`,placeholder:"Ingrese nueva contraseña","aria-label":"Nueva contraseña"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-1 font-medium ${p?"text-gray-300":"text-gray-700"}`,children:"Nuevo Teléfono"}),e.jsx("input",{type:"tel",name:"phone",className:`w-full px-3 py-2 rounded-xl ${p?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300`,placeholder:"Ingrese nuevo teléfono","aria-label":"Nuevo teléfono"})]}),e.jsx(v.button,{type:"submit",disabled:s.password,className:`w-full py-2 rounded-xl font-medium transition-all duration-300 ${s.password?"bg-gray-300 text-gray-500 cursor-not-allowed":p?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:S,whileHover:s.password?{}:"hover",whileTap:s.password?{}:"tap","aria-label":"Guardar cambios de seguridad",children:s.password?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar Cambios"})]})]}),e.jsxs(v.div,{className:`p-4 rounded-2xl border ${p?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} shadow-md hover:bg-gray-200/50 transition-all duration-300`,variants:k,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h4",{className:`text-lg font-semibold ${p?"text-blue-400":"text-blue-600"} mb-3 flex items-center`,children:[e.jsx(Vd,{className:"mr-2"})," Sesión"]}),e.jsxs(v.button,{onClick:u,className:`w-full py-2 flex items-center justify-center gap-2 rounded-xl font-medium transition-all duration-300 ${p?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:S,whileHover:"hover",whileTap:"tap","aria-label":"Cerrar sesión",children:[e.jsx(Vd,{size:16}),"Cerrar Sesión"]})]})]})]})};l4.propTypes={userName:F.shape({id:F.string.isRequired,username:F.string.isRequired,phone:F.string}).isRequired,email:F.string.isRequired,actionLoading:F.shape({password:F.bool}).isRequired,handleUpdatePassword:F.func.isRequired,openEditProfileModal:F.func.isRequired,handleLogout:F.func.isRequired,theme:F.oneOf(["light","dark"]).isRequired};const hO=Cs.memo(({show:a,onClose:t,title:s,message:n,theme:i})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${i==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${i==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${i==="dark"?"text-white":"text-gray-900"}`,children:s}),e.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:n})]})})}));hO.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,title:F.string.isRequired,message:F.string.isRequired,theme:F.string.isRequired};const c4=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState(""),[i,u]=m.useState([]),[l,p]=m.useState({username:"",phone:""}),[h,k]=m.useState(""),[S,$]=m.useState(0),[D,O]=m.useState(null),[Y,W]=m.useState("inicio"),[N,G]=m.useState([]),[H,U]=m.useState({}),[ne,oe]=m.useState([]),[$e,K]=m.useState(!0),[V,L]=m.useState({}),[y,se]=m.useState(null),[ee,re]=m.useState({isOpen:!1,message:"",title:""}),[He,ut]=m.useState({isOpen:!1,user:null}),[it,Je]=m.useState({isOpen:!1,provider:null}),[fe,Ne]=m.useState(""),[ye,J]=m.useState([]),[de,ve]=m.useState("dark"),[Se,Ve]=m.useState(!1),[q,o]=m.useState(!1),nt=cr(),rt=m.useCallback(()=>{ve(we=>we==="dark"?"light":"dark")},[]),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),Re=m.useCallback((we,r)=>{re({isOpen:!0,title:we,message:r})},[]),Pt=m.useCallback(()=>{re({isOpen:!1,message:"",title:""})},[]),Et=m.useCallback(we=>{ut({isOpen:!0,user:we})},[]),Tt=m.useCallback(()=>{ut({isOpen:!1,user:null})},[]),It=m.useCallback(we=>{Je({isOpen:!0,provider:we})},[]),St=m.useCallback(()=>{Je({isOpen:!1,provider:null})},[]),ft=m.useCallback(we=>{if(!we)return"No especificada";try{const r=we instanceof Date?we:new Date(we);return isNaN(r.getTime())?"Fecha inválida":r.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},[]),ot=m.useCallback(async(we,r)=>{try{L(g=>({...g,profile:!0}));const C=Z(I,"users",we);await da(C,{username:r,updatedAt:Ge()}),p(g=>({...g,username:r})),Re("Éxito","Perfil actualizado exitosamente"),Tt()}catch(C){console.error("Error al actualizar perfil:",C),Re("Error",C.message||"Error al actualizar el perfil")}finally{L(C=>({...C,profile:!1}))}},[Re,Tt]),Ae=m.useCallback(async(we,r)=>{try{L(C=>({...C,[`rate_${we}`]:!0})),await Ko(ae(I,"ratings"),{userId:D,providerId:we,rating:r,ratedAt:Ge()}),Re("Éxito","Calificación enviada exitosamente"),St()}catch(C){console.error("Error al calificar proveedor:",C),Re("Error",C.message||"Error al enviar la calificación")}finally{L(C=>({...C,[`rate_${we}`]:!1}))}},[D,Re,St]),Ye=m.useCallback(async we=>{try{L(B=>({...B,[`renew_${we.id}`]:!0}));const r=parseFloat(we.renewalPrice)||parseFloat(we.price)||0;if(S<r){Re("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const C=parseInt(we.durationDays)||30,g=Wr.now(),E=g.toDate(),A=E,X=new Date(A.getTime()+C*24*60*60*1e3),ce=Wr.fromDate(X),le=Z(I,"sales",we.id);await da(le,{startDate:g,endDate:ce,renewedAt:g,status:"completed",updatedAt:Ge()});const P=Z(I,"users",D);await da(P,{balance:S-r}),$(B=>B-r),G(B=>B.map(_=>_.id===we.id?{..._,startDate:A,endDate:X,renewedAt:E,status:"completed",daysRemaining:C,totalDays:C,timeElapsedPercentage:0}:_)),Re("Éxito",`¡Pedido renovado exitosamente! Nueva fecha de vencimiento: ${ft(X)}`)}catch(r){console.error("Error al renovar el pedido:",r),Re("Error","Error al renovar el pedido: "+r.message)}finally{L(r=>({...r,[`renew_${we.id}`]:!1}))}},[S,D,Re,ft]);m.useEffect(()=>{(async()=>{try{const r=Te(ae(I,"products")),C=await _t(r),g={};C.forEach(E=>{g[E.id]=E.data()}),U(g)}catch(r){console.error("Error fetching products:",r),se("Error al cargar productos: "+r.message)}})()},[]),m.useEffect(()=>{const we=qe(Z(I,"notifications","adminMessage"),r=>{if(r.exists()){const C=r.data();C.roles&&C.roles.includes("user")?oe([{id:r.id,...C,timestamp:C.updatedAt?.toDate()}]):oe([])}else oe([])},r=>{console.error("Error in notifications listener:",r),se("Error al cargar notificaciones: "+r.message)});return()=>we()},[]),m.useEffect(()=>{if(!D)return;(async()=>{try{const r=Te(ae(I,"sales"),We("customerId","==",D)),C=await _t(r),g=new Set,E=[];C.forEach(A=>{const X=A.data();X.providerId&&!g.has(X.providerId)&&(g.add(X.providerId),E.push({id:X.providerId,name:X.provider||"Proveedor desconocido",phone:X.providerPhone||"No especificado"}))}),J(E)}catch(r){console.error("Error fetching providers:",r),se("Error al cargar proveedores: "+r.message)}})()},[D]);const ge=m.useCallback(async()=>{try{await Pr($t),nt("/")}catch(we){console.error("Error al cerrar sesión:",we),Re("Error",we.message||"Error al cerrar sesión")}},[nt,Re]);m.useEffect(()=>{const we=hr($t,r=>{r?(O(r.uid),k(r.email||"No especificado"),K(!1)):nt("/login")});return()=>we()},[nt]),m.useEffect(()=>{if(!D)return;const we=Z(I,"users",D),r=qe(we,C=>{if(C.exists()){const g=C.data();p({username:g.username||"Usuario",phone:g.phone||""}),k(g.email||"No especificado"),$(Number(g.balance)||0)}else se("Usuario no encontrado")},C=>{console.error("Error in user data listener:",C),se("Error al cargar datos del usuario: "+C.message)});return()=>r()},[D]),m.useEffect(()=>{if(!D)return;const we=Te(ae(I,"sales"),We("customerId","==",D)),r=qe(we,async g=>{if(g.empty){G([]),K(!1);return}const E=new Date,A=7200*60*1e3;for(const ce of g.docs){const P=ce.data().endDate?.toDate?.()||new Date;if(P<E&&E.getTime()-P.getTime()>A)try{await Bi(Z(I,"sales",ce.id)),console.log(`Deleted expired order: ${ce.id}`)}catch(B){console.error(`Error deleting order ${ce.id}:`,B)}}const X=g.docs.map(ce=>{const le=ce.data(),B=le.saleDate?.toDate?.()||le.createdAt?.toDate?.()||new Date;let _=le.startDate?.toDate?.(),b=_||B,w=!1;_||(w=!0);const z=le.durationDays||30;let me;le.endDate?me=le.endDate.toDate?le.endDate.toDate():new Date(le.endDate):(me=new Date(b.getTime()+z*24*60*60*1e3),w=!0),w&&da(Z(I,"sales",ce.id),{startDate:_||Wr.fromDate(B),endDate:Wr.fromDate(me),durationDays:z}).catch(_e=>{console.error("Error al actualizar startDate/endDate en Firestore:",_e)});const pe=me.getTime()-b.getTime(),je=E.getTime()-b.getTime(),Be=me.getTime()-E.getTime(),Ee=Math.ceil(pe/(1e3*60*60*24)),xe=Math.max(0,Math.ceil(Be/(1e3*60*60*24))),dt=Math.ceil(je/(1e3*60*60*24)),ht=Ee>0?dt/Ee*100:100,Pe=H[le.providerId]?.terms||"No se especificaron términos y condiciones.";return{id:ce.id,productName:le.productName||"Producto sin nombre",category:le.type||"netflix",price:parseFloat(le.price)||0,renewalPrice:parseFloat(le.renewalPrice)||0,provider:le.provider||"No especificado",providerId:le.providerId||"",providerPhone:le.providerPhone||le.providerWhatsapp||"51999999999",status:le.status||"completed",saleDate:B,startDate:b,endDate:me,durationDays:z,daysRemaining:xe,totalDays:Ee,timeElapsedPercentage:ht,account:{email:le.accountDetails?.email||"No especificado",password:le.accountDetails?.password||"No especificado",profile:le.accountDetails?.profile||"No especificado",pin:le.accountDetails?.pin||"No especificado"},client:{customerName:le.customerName||"Cliente desconocido",email:le.customerEmail||"No especificado",phone:le.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BLK-${ce.id.slice(0,8).toUpperCase()}`,termsAndConditions:Pe,renewable:le.renewable!==void 0?le.renewable:!0}}).filter(ce=>{const le=new Date(ce.endDate);return!(le<E&&E.getTime()-le.getTime()>A)});G(X),K(!1)},g=>{console.error("Error al obtener pedidos:",g),se("Error al cargar pedidos: "+g.message),K(!1)}),C=setInterval(()=>{const g=new Date,E=7200*60*1e3;G(A=>A.map(X=>{const ce=new Date(X.endDate).getTime()-new Date(X.startDate).getTime(),le=g.getTime()-new Date(X.startDate).getTime(),P=new Date(X.endDate).getTime()-g.getTime(),B=Math.ceil(ce/(1e3*60*60*24)),_=Math.max(0,Math.ceil(P/(1e3*60*60*24))),b=Math.ceil(le/(1e3*60*60*24)),w=B>0?b/B*100:100;return{...X,daysRemaining:_,totalDays:B,timeElapsedPercentage:w}}).filter(X=>{const ce=new Date(X.endDate);return!(ce<g&&g.getTime()-ce.getTime()>E)}))},6e4);return()=>{r(),clearInterval(C)}},[D,H]),m.useEffect(()=>{if(!D)return;const we=Te(ae(I,"pendingTopUps"),We("userId","==",D)),r=qe(we,C=>{const g=C.docs.map(E=>({id:E.id,...E.data(),date:E.data().requestedAt?.toDate?.()||new Date,amount:parseFloat(E.data().amount)||0}));u(g)},C=>{console.error("Error al obtener recargas:",C),se("Error al cargar recargas: "+C.message)});return()=>r()},[D]);const Le=m.useCallback(async()=>{try{if(L(r=>({...r,topUp:!0})),!s||isNaN(s)){Re("Error","Ingrese un monto válido");return}const we=parseFloat(s);if(we<10){Re("Error","El monto mínimo de recarga es S/ 10.00");return}await Ko(ae(I,"pendingTopUps"),{userId:D,username:l.username,amount:we,status:"pendiente",requestedAt:Ge()}),n(""),Re("Éxito","Solicitud de recarga enviada correctamente")}catch(we){console.error("Error al solicitar recarga:",we),Re("Error",we.message||"Error al enviar solicitud de recarga")}finally{L(we=>({...we,topUp:!1}))}},[s,D,l.username,Re]),Fe=m.useCallback(async we=>{we.preventDefault();try{L(X=>({...X,password:!0}));const r=we.target.password.value,C=we.target.phone.value,g=$t.currentUser,E=Z(I,"users",D),A={};if(r){if(r.length<6){Re("Error","La contraseña debe tener al menos 6 caracteres");return}await $b(g,r),A.updatedAt=Ge()}C&&(A.phone=C,A.updatedAt=Ge()),Object.keys(A).length>0&&await da(E,A),p(X=>({...X,phone:C||X.phone})),Re("Éxito","Cambios guardados correctamente"),we.target.reset()}catch(r){console.error("Error al actualizar los datos:",r),Re("Error",r.message||"Error al guardar los cambios")}finally{L(r=>({...r,password:!1}))}},[D,Re]);m.useEffect(()=>{const we=()=>{Ve(window.scrollY>300)};return window.addEventListener("scroll",we),()=>window.removeEventListener("scroll",we)},[]);const et=m.useCallback(()=>$e?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):y?e.jsxs("div",{className:`bg-${de==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${de==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsx(Qi,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:`text-xl font-bold ${de==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Error"}),e.jsx("p",{className:`text-base ${de==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:y}),e.jsx("button",{onClick:()=>se(null),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Aceptar"})]}):e.jsx("div",{className:`bg-${de==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${de==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:(()=>{switch(Y){case"inicio":return e.jsx(mO,{userName:l,email:h,balance:S,orders:N,notifications:ne,setActivePage:W,formatDate:ft});case"notificaciones":return e.jsx(s4,{notifications:ne,formatDate:ft});case"recargar":return e.jsx(n4,{amount:s,setAmount:n,topUps:i,actionLoading:V,handleTopUpRequest:Le,formatDate:ft,showModal:Re});case"proveedores":return e.jsx(o4,{providers:ye,openRateProviderModal:It});case"pedidos":return e.jsx(i4,{orders:N,searchQuery:fe,setSearchQuery:Ne,formatDate:ft,handleRenewal:Ye,actionLoading:V});case"configuracion":return e.jsx(l4,{userName:l,email:h,actionLoading:V,handleUpdatePassword:Fe,openEditProfileModal:Et,handleLogout:ge});default:return e.jsxs("div",{className:`bg-${de==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${de==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsx(Qi,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:`text-xl font-bold ${de==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Sección no encontrada"}),e.jsx("p",{className:`text-base ${de==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>W("inicio"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Volver al inicio"})]})}})()}),[$e,y,de,Y,l,h,S,N,ne,W,ft,s,n,i,V,Le,Re,ye,It,fe,Ne,Ye,Fe,Et,ge]);return e.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${de==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-50 to-gray-50 text-gray-900"} font-inter relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${de==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((we,r)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},r))})]}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${de==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r overflow-y-auto lg:shadow-md`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{nt("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${de==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.username.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${de==="dark"?"text-white":"text-gray-900"}`,children:l.username}),e.jsx("p",{className:`text-xs ${de==="dark"?"text-gray-400":"text-gray-600"}`,children:"Usuario"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:pf},{id:"notificaciones",label:"Notificaciones",icon:Bt},{id:"recargar",label:"Recargar saldo",icon:eo},{id:"pedidos",label:"Mis pedidos",icon:nc},{id:"proveedores",label:"Proveedores",icon:oc},{id:"configuracion",label:"Configuración",icon:Ft}].map(we=>e.jsxs("button",{onClick:()=>{W(we.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${Y===we.id?"bg-blue-100 text-blue-600 border border-blue-300":de==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":Y===we.id?"page":void 0,children:[e.jsx(we.icon,{className:"text-lg"}),e.jsx("span",{children:we.label})]},we.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{ge(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${de==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsxs("header",{className:`${de==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md py-4 px-4 sm:px-6 lg:px-8 flex items-center justify-between shadow-md fixed top-0 left-0 right-0 z-50 lg:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"BlackStreaming logo",className:`h-10 w-10 rounded-full border ${de==="dark"?"border-gray-700/50":"border-gray-300"} shadow-sm lg:hidden`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-lg",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:fe,onChange:we=>Ne(we.target.value),className:`w-full py-2.5 px-5 ${de==="dark"?"bg-gray-800/50 border-gray-600/50 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-md`,"aria-label":"Search orders",onKeyDown:we=>we.key==="Enter"&&W("pedidos")}),e.jsx("button",{onClick:()=>W("pedidos"),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${de==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Search",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-4 relative",children:[e.jsx("button",{onClick:rt,className:`p-2 rounded-full ${de==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Switch to ${de==="dark"?"light":"dark"} theme`,children:de==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),e.jsxs("button",{onClick:()=>o(!0),className:`p-2 rounded-full relative ${de==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Notifications (${ne.length} new)`,children:[e.jsx(Bt,{size:20}),ne.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ne.length})]}),e.jsx("button",{className:`lg:hidden p-2 rounded-full ${de==="dark"?"hover:bg-gray-700/50":"hover:bg-gray-100"} transition-all duration-300`,onClick:()=>t(!a),"aria-label":"Toggle mobile menu","aria-expanded":a,children:e.jsx(pp,{size:20,className:de==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:e.jsx("div",{className:"relative",children:e.jsxs("button",{className:`flex items-center space-x-2 ${de==="dark"?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-md transition-all duration-300`,"aria-label":"User menu",children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.username.charAt(0).toUpperCase()}),e.jsx("span",{className:`text-sm font-semibold ${de==="dark"?"text-gray-200":"text-gray-800"}`,children:l.username})]})})})]})]}),e.jsx(ue,{children:q&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>o(!1),role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 lg:max-w-lg ${de==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${de==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:we=>we.stopPropagation(),children:[e.jsx("button",{onClick:()=>o(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notifications",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-xl font-bold mb-4 ${de==="dark"?"text-white":"text-gray-900"}`,children:"Notificaciones"}),ne.length>0?ne.map(we=>e.jsxs("div",{className:`p-4 mb-2 rounded-md ${de==="dark"?"bg-gray-800/50":"bg-gray-100/80"} border-l-4 ${de==="dark"?"border-blue-500/50":"border-blue-300/50"}`,children:[e.jsx("h3",{className:`font-semibold ${de==="dark"?"text-gray-200":"text-gray-800"}`,children:we.title||"Nueva Notificación"}),e.jsx("p",{className:`text-sm ${de==="dark"?"text-gray-300":"text-gray-700"} mt-1`,children:we.message}),we.roles&&we.roles.length>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Roles: ",we.roles.join(", ")]}),we.timestamp&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ft(we.timestamp)})]},we.id)):e.jsx("p",{className:`text-center ${de==="dark"?"text-gray-400":"text-gray-600"} mt-4`,children:"No hay notificaciones."})]})})}),e.jsx("main",{className:"lg:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start",children:et()}),e.jsxs("footer",{className:`${de==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md px-4 sm:px-6 lg:px-8 py-12 text-center relative z-10 lg:ml-64 max-w-6xl mx-auto rounded-2xl border ${de==="dark"?"border-gray-700/50":"border-gray-300"} mt-8 shadow-md`,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-4",children:"BlackStreaming"}),e.jsxs("p",{className:`text-base sm:text-lg ${de==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["Todos los derechos reservados. Desarrollado por"," ",e.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Saiph"}),"."]}),e.jsxs("div",{className:"flex justify-center space-x-6 sm:space-x-8 mb-6",children:[e.jsx("a",{href:"https://twitter.com",className:`${de==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Twitter",children:e.jsx(vr,{size:28})}),e.jsx("a",{href:"https://instagram.com",className:`${de==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Instagram",children:e.jsx(yr,{size:28})}),e.jsx("a",{href:"https://facebook.com",className:`${de==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Facebook",children:e.jsx(fr,{size:28})})]}),e.jsxs("div",{className:"flex justify-center space-x-4 sm:space-x-6",children:[e.jsx("a",{href:"#",className:`text-sm ${de==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Privacy Policy",children:"Política de Privacidad"}),e.jsx("a",{href:"#",className:`text-sm ${de==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Terms of Service",children:"Términos de Servicio"}),e.jsx("a",{href:"#",className:`text-sm ${de==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Contact Us",children:"Contáctanos"})]})]}),e.jsxs("p",{className:`text-sm ${de==="dark"?"text-gray-500":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Hecho con pasión."]})]}),e.jsx(ue,{children:Se&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:"fixed bottom-6 right-6 bg-blue-600/90 backdrop-blur-md p-3 rounded-full hover:bg-blue-700/95 shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 lg:bottom-8 lg:right-8","aria-label":"Back to top",children:e.jsx(Ir,{size:20})})}),e.jsx(uO,{isOpen:ee.isOpen,title:ee.title,message:ee.message,onClose:Pt}),e.jsx(r4,{isOpen:He.isOpen,user:He.user,onClose:Tt,onSave:ot}),e.jsx(a4,{isOpen:it.isOpen,provider:it.provider,onClose:St,onRate:Ae}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 lg:hidden",onClick:()=>t(!1),"aria-hidden":"true"})]})};c4.propTypes={};const xO=({isOpen:a,message:t,title:s,onClose:n})=>a?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:s}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(Ts,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:n,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,gO=({isOpen:a,user:t,onClose:s,onSave:n})=>{const[i,u]=m.useState(t?.username||""),[l,p]=m.useState(""),h=k=>{if(k.preventDefault(),p(""),!i.trim()){p("El nombre de usuario no puede estar vacío.");return}n(t.id,i.trim())};return a?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Perfil"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(Ts,{size:20})})]}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:k=>u(k.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0}),l&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:l})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},bO=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState("inicio"),[i,u]=m.useState(""),[l,p]=m.useState(""),[h,k]=m.useState(""),[S,$]=m.useState([]),[D,O]=m.useState(0),[Y,W]=m.useState(0),[N,G]=m.useState(null),[H,U]=m.useState(!0),[ne,oe]=m.useState({}),[$e,K]=m.useState(null),[V,L]=m.useState([]),[y,se]=m.useState(!1),[ee,re]=m.useState(""),[He,ut]=m.useState(""),[it,Je]=m.useState([]),[fe,Ne]=m.useState([]),[ye,J]=m.useState({}),[de,ve]=m.useState([]),[Se,Ve]=m.useState({isOpen:!1,message:"",title:""}),[q,o]=m.useState({isOpen:!1,user:null}),nt=cr(),rt=(ge,Le)=>{Ve({isOpen:!0,title:ge,message:Le})},Qe=()=>{Ve({isOpen:!1,message:"",title:""})},Re=ge=>{o({isOpen:!0,user:ge})},Pt=()=>{o({isOpen:!1,user:null})},Et=async(ge,Le)=>{try{oe(we=>({...we,profile:!0}));const Fe=Z(I,"users",ge),et=Z(I,"affiliates",ge);await da(Fe,{username:Le,updatedAt:Ge()}),await da(et,{username:Le,updatedAt:Ge()}),u(Le),rt("Éxito","Perfil actualizado exitosamente"),Pt()}catch(Fe){console.error("Error al actualizar perfil:",Fe),rt("Error",Fe.message||"Error al actualizar el perfil")}finally{oe(Fe=>({...Fe,profile:!1}))}};m.useEffect(()=>{const ge=hr($t,Le=>{Le?(G(Le.uid),p(Le.email||"No especificado"),U(!1)):nt("/login")});return()=>ge()},[nt]),m.useEffect(()=>{(async()=>{try{const Le=Te(ae(I,"products")),Fe=await _t(Le),et={};Fe.forEach(we=>{et[we.id]=we.data()}),J(et)}catch(Le){console.error("Error fetching products:",Le),K("Error al cargar productos")}})()},[]),m.useEffect(()=>{qe(Z(I,"notifications","adminMessage"),Fe=>{if(Fe.exists()){const et=Fe.data();et.roles&&et.roles.includes("affiliate")?ve([{id:Fe.id,...et}]):ve([])}else ve([])})},[]),m.useEffect(()=>{(async()=>{if(N)try{const Le=Z(I,"users",N),Fe=await zt(Le);if(Fe.exists()){const r=Fe.data();u(r.username||"Usuario"),W(Number(r.balance)||0)}const et=Z(I,"affiliates",N),we=await zt(et);if(we.exists()){const r=we.data();k(r.affiliateCode||""),O(Number(r.earnings)||0)}else{const r=`AFF-${Math.random().toString(36).substring(2,8).toUpperCase()}`;await Go(et,{username:i||"Nuevo Afiliado",email:l,affiliateCode:r,earnings:0,createdAt:Ge(),updatedAt:Ge()}),k(r)}}catch(Le){console.error("Error al manejar datos:",Le),K("Error al cargar datos")}finally{U(!1)}})()},[N,l,i]),m.useEffect(()=>{if(!N)return;(()=>{const Le=Te(ae(I,"pendingTopUps"),We("userId","==",N));return qe(Le,et=>{const we=et.docs.map(r=>({id:r.id,...r.data(),date:r.data().requestedAt?.toDate?.()||new Date,amount:parseFloat(r.data().amount)||0}));Je(we)},et=>{console.error("Error al obtener recargas:",et),K("Error al cargar recargas")})})()},[N]),m.useEffect(()=>{if(!h)return;const ge=Te(ae(I,"users"),We("referrerCode","==",h),Ar("createdAt","desc"),Rr(5)),Le=qe(ge,Fe=>{const et=Fe.docs.map(we=>({id:we.id,...we.data(),joinDate:we.data().createdAt?.toDate()||new Date}));L(et)});return()=>Le()},[h]),m.useEffect(()=>{if(!h)return;const ge=Te(ae(I,"users"),We("referrerCode","==",h)),Le=qe(ge,Fe=>{const et=Fe.docs.map(we=>({id:we.id,...we.data(),joinDate:we.data().createdAt?.toDate()||new Date}));$(et)});return()=>Le()},[h]),m.useEffect(()=>{if(!N)return;(()=>{const Le=Te(ae(I,"sales"),We("customerId","==",N)),Fe=qe(Le,we=>{if(we.empty){Ne([]),U(!1);return}const r=we.docs.map(C=>{const g=C.data(),A=g.saleDate?.toDate?.()||g.createdAt?.toDate?.()||new Date;let X=g.startDate?.toDate?.(),ce=X||A,le=!1;X||(le=!0);const P=g.durationDays||30;let B;g.endDate?B=new Date(g.endDate):(B=new Date(ce.getTime()+P*24*60*60*1e3),le=!0),le&&da(Z(I,"sales",C.id),{startDate:X||Wr.fromDate(A),endDate:B.toISOString(),durationDays:P}).catch(xe=>{console.error("Error al actualizar startDate/endDate en Firestore:",xe)});const _=new Date,b=B.getTime()-ce.getTime(),w=_.getTime()-ce.getTime(),z=B.getTime()-_.getTime(),me=Math.ceil(b/(1e3*60*60*24)),pe=Math.max(0,Math.ceil(z/(1e3*60*60*24))),je=Math.ceil(w/(1e3*60*60*24)),Be=me>0?je/me*100:100,Ee=ye[g.providerId]?.terms||"No se especificaron términos y condiciones.";return{id:C.id,productName:g.productName||"Producto sin nombre",category:g.type||"netflix",price:parseFloat(g.price)||0,provider:g.provider||"No especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||g.providerWhatsapp||"51999999999",status:g.status||"completed",saleDate:A,startDate:ce,endDate:B,durationDays:P,daysRemaining:pe,totalDays:me,timeElapsedPercentage:Be,account:{email:g.accountDetails?.email||"No especificado",password:g.accountDetails?.password||"No especificado",profile:g.accountDetails?.profile||"No especificado",pin:g.accountDetails?.pin||"No especificado"},client:{name:g.customerName||"Cliente desconocido",email:g.customerEmail||"No especificado",phone:g.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BS-${C.id.slice(0,8).toUpperCase()}`,termsAndConditions:Ee,renewable:g.renewable!==void 0?g.renewable:!0}});Ne(r),U(!1)},we=>{console.error("Error al obtener pedidos:",we),K("Error al cargar pedidos: "+we.message),U(!1)}),et=setInterval(()=>{Ne(we=>we.map(r=>{const C=new Date,g=new Date(r.endDate).getTime()-new Date(r.startDate).getTime(),E=C.getTime()-new Date(r.startDate).getTime(),A=new Date(r.endDate).getTime()-C.getTime(),X=Math.ceil(g/(1e3*60*60*24)),ce=Math.max(0,Math.ceil(A/(1e3*60*60*24))),le=Math.ceil(E/(1e3*60*60*24)),P=X>0?le/X*100:100;return{...r,daysRemaining:ce,totalDays:X,timeElapsedPercentage:P}}))},6e4);return()=>{Fe(),clearInterval(et)}})()},[N,ye]);const Tt=async()=>{try{if(oe(Le=>({...Le,topUp:!0})),!He||isNaN(He)){rt("Error","Ingrese un monto válido");return}const ge=parseFloat(He);if(ge<10){rt("Error","El monto mínimo de recarga es S/ 10.00");return}await Ko(ae(I,"pendingTopUps"),{userId:N,username:i,amount:ge,status:"pendiente",requestedAt:Ge(),processed:!1}),ut(""),rt("Éxito","Solicitud de recarga enviada correctamente")}catch(ge){console.error("Error al solicitar recarga:",ge),rt("Error",ge.message||"Error al enviar solicitud de recarga")}finally{oe(ge=>({...ge,topUp:!1}))}},It=async ge=>{try{oe(X=>({...X,[`renew_${ge.id}`]:!0}));const Le=parseFloat(ge.price)||0;if(Y<Le){rt("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const Fe=parseInt(ge.durationDays)||30,et=Wr.now(),we=et.toDate(),r=new Date(we.getTime()+Fe*24*60*60*1e3),C=r.toISOString(),g={customerId:N,customerName:ge.client?.name||"Cliente desconocido",customerEmail:ge.client?.email||l,phoneNumber:ge.client?.phone||"No especificado",productName:ge.productName||"Producto sin nombre",type:ge.category||"netflix",price:Le,accountDetails:{email:ge.account?.email||"No especificado",password:ge.account?.password||"No especificado",profile:ge.account?.profile||"No especificado",pin:ge.account?.pin||"No especificado"},provider:ge.provider||"Proveedor desconocido",providerId:ge.providerId||"",providerPhone:ge.providerPhone||ge.providerWhatsapp||"51999999999",status:"completed",createdAt:et,saleDate:et,startDate:et,endDate:C,durationDays:Fe,renewedAt:et,renewable:ge.renewable!==void 0?ge.renewable:!0},E=await Ko(ae(I,"sales"),g),A=Z(I,"users",N);await da(A,{balance:Y-Le}),W(X=>X-Le),Ne(X=>[...X,{...g,id:E.id,saleDate:we,startDate:we,endDate:r,account:g.accountDetails,client:{name:g.customerName,email:g.customerEmail,phone:g.phoneNumber},orderId:`BS-${E.id.slice(0,8).toUpperCase()}`,renewable:g.renewable,daysRemaining:Fe,totalDays:Fe,timeElapsedPercentage:0,termsAndConditions:ye[g.providerId]?.terms||"No se especificaron términos y condiciones."}]),rt("Éxito","¡Pedido renovado exitosamente!")}catch(Le){console.error("Error al renovar el pedido:",Le),rt("Error","Error al renovar el pedido: "+Le.message)}finally{oe(Le=>({...Le,[`renew_${ge.id}`]:!1}))}},St=()=>{h&&(navigator.clipboard.writeText(h),se(!0),setTimeout(()=>se(!1),2e3))},ft=ge=>{if(!ge)return"No especificada";try{const Le=ge instanceof Date?ge:new Date(ge);return isNaN(Le.getTime())?"Fecha inválida":Le.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},ot=async()=>{try{await Pr($t),nt("/")}catch(ge){console.error("Error al cerrar sesión:",ge),rt("Error",ge.message||"Error al cerrar sesión")}},Ae=async ge=>{ge.preventDefault();try{oe(et=>({...et,password:!0}));const Le=ge.target.password.value;if(!Le){rt("Error","Por favor, ingrese una nueva contraseña");return}if(Le.length<6){rt("Error","La contraseña debe tener al menos 6 caracteres");return}const Fe=$t.currentUser;Fe&&(await $b(Fe,Le),rt("Éxito","Contraseña actualizada correctamente"),ge.target.reset())}catch(Le){console.error("Error al actualizar la contraseña:",Le),rt("Error",Le.message||"Error al actualizar la contraseña")}finally{oe(Le=>({...Le,password:!1}))}},Ye=()=>{if(H)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if($e)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx($r,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:$e}),e.jsx("button",{onClick:()=>K(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(s){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Vs,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:i})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ns,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:l})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Saldo disponible"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",Y.toFixed(2)]}),e.jsx("button",{onClick:()=>n("recargas"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Recargar"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",D.toFixed(2)]}),e.jsx("button",{onClick:()=>n("ganancias"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Ver ganancias"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Tu código de afiliado"}),e.jsxs("button",{onClick:St,disabled:!h,className:`flex items-center gap-2 px-3 py-1 rounded-xl transition-all duration-300 ${h?"bg-cyan-900/80 text-cyan-400 hover:bg-cyan-800/80":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(iO,{size:16}),y?"¡Copiado!":"Copiar"]})]}),e.jsx("div",{className:"bg-gray-800/50 p-4 rounded-xl mb-6 border border-gray-600/50",children:e.jsx("p",{className:"text-2xl font-bold text-center tracking-wider text-white",children:h||"Generando código..."})}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Comparte este código con tus amigos para que se registren y ganes comisiones por sus compras."}),e.jsxs("div",{className:"bg-cyan-900/30 p-4 rounded-xl border border-cyan-800/50",children:[e.jsx("h4",{className:"font-medium text-cyan-400 mb-2",children:"Enlace de afiliado:"}),e.jsx("p",{className:"text-sm bg-gray-800/50 p-2 rounded-xl border border-gray-600/50 overflow-x-auto text-gray-300",children:h?`https://blackkstreaming.com/register?ref=${h}`:"Generando enlace..."})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Referidos recientes"}),V.length>0?V.map(ge=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:ge.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-green-900/80 text-green-400",children:"Activo"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Unido: ",ft(ge.joinDate)]})]},ge.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes referidos recientes"}),V.length>0&&e.jsx("button",{onClick:()=>n("referidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los referidos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pedidos recientes"}),fe.length>0?fe.slice(0,3).map(ge=>{const Le=new Date(ge.endDate)>new Date&&ge.status==="completed",Fe=ge.status==="pending";return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:ge.productName}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Fe?"bg-yellow-900/80 text-yellow-400":Le?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:Fe?"A pedido":Le?"Activo":"Expirado"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",ft(ge.endDate)]})]},ge.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),fe.length>3&&e.jsx("button",{onClick:()=>n("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Notificaciones"}),de.length>0?de.map(ge=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsx("p",{className:"text-gray-300",children:ge.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:ft(ge.updatedAt)})]},ge.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay notificaciones"})]})]})]});case"notificaciones":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Notificaciones"}),de.length>0?e.jsx("div",{className:"space-y-4",children:de.map(ge=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("p",{className:"text-gray-300",children:ge.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:ft(ge.updatedAt)})]},ge.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Dm,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-400",children:"No tienes mensajes nuevos"})]})]});case"recargas":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),e.jsx("input",{type:"number",value:He,onChange:ge=>ut(ge.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Mínimo S/ 10.00",min:"10",step:"0.01"})]}),e.jsx("button",{onClick:Tt,disabled:ne.topUp||!He||parseFloat(He)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${He&&parseFloat(He)>=10&&!ne.topUp?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:ne.topUp?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"}),e.jsxs("div",{className:"mt-6 bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Xn,{className:"mr-2"})," ¿Cómo realizar tu recarga?"]}),e.jsxs("p",{className:"text-gray-300 mb-2",children:["Realiza tu pago mediante ",e.jsx("span",{className:"font-semibold text-white",children:"Yape"})," al número:"]}),e.jsx("p",{className:"text-xl font-bold text-white mb-2",children:"📱 931757531"}),e.jsx("p",{className:"text-gray-300 mb-3",children:"Una vez realizado el pago, por favor contáctanos vía WhatsApp al mismo número para confirmar tu recarga."}),e.jsxs("a",{href:`https://wa.me/51931757531?text=${encodeURIComponent("Hola 😊, he realizado una recarga a través de Yape. Por favor, confirma mi pago.")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300",children:[e.jsx(Ns,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de recargas"}),it.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acción"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:it.map(ge=>{const Le=encodeURIComponent(`Hola, he pedido una recarga de S/ ${ge.amount?.toFixed(2)||"0.00"} con el nombre ${i}. Adjunto la captura de mi pago, por favor.`);return e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",ge.amount?.toFixed(2)||"0.00"]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ge.status==="aprobado"?"bg-green-900/80 text-green-400":ge.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:ge.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:ft(ge.date)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:ge.status==="pendiente"?e.jsxs("a",{href:`https://wa.me/51940505969?text=${Le}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 text-sm",children:[e.jsx(Ns,{className:"mr-2"})," Enviar captura"]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"—"})})]},ge.id)})})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xn,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay recargas registradas"})]})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:ee,onChange:ge=>re(ge.target.value)}),e.jsx(Tr,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),fe.length>0?e.jsx("div",{className:"space-y-6",children:fe.filter(ge=>(ge.productName||"").toLowerCase().includes(ee.toLowerCase())||(ge.orderId||"").toLowerCase().includes(ee.toLowerCase())).map(ge=>{const Le=parseFloat(ge.price)||0,Fe=new Date(ge.endDate)>new Date&&ge.status==="completed",et=ge.status==="pending",we=ge.daysRemaining||0,r=ge.timeElapsedPercentage||0;let C="bg-green-400";r>70&&r<=90?C="bg-yellow-400":r>90&&(C="bg-red-400");const g=et?e.jsx(Dr,{className:"text-yellow-400"}):Fe?e.jsx(_m,{className:"text-green-400"}):e.jsx($r,{className:"text-red-400"}),E=encodeURIComponent(`*Consulta sobre Pedido - ${ge.productName||"Sin nombre"}*

*N° Pedido:* ${ge.orderId||"No especificado"}
*Producto:* ${ge.productName||"No especificado"}
*Precio:* S/ ${Le.toFixed(2)}
*Estado:* ${et?"A pedido":Fe?"Activo":"Expirado"}
*Fecha de Inicio:* ${ft(ge.startDate)}
*Fecha de Vencimiento:* ${ft(ge.endDate)}

`+(et?`Hola 😊, he comprado un producto a pedido (${ge.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),A=encodeURIComponent(`😊 Estimado/a ${ge.client?.name||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${ge.productName||"Sin nombre"}.
🔢 Código: ${ge.orderId||"No especificado"}
`+(et?"":`📧 Correo: ${ge.account?.email||"No especificado"}
🔐 Contraseña: ${ge.account?.password||"No especificado"}
👤 Perfil: ${ge.account?.profile||"No especificado"}
📌 PIN: ${ge.account?.pin||"No especificado"}
`)+`🌐 URL: Sin URL
📅 Fecha de creación: ${ft(ge.startDate)}
📅 Fecha de vencimiento: ${ft(ge.endDate)}
🏁 Días contratados: ${ge.durationDays||30} días.

`+(et?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:"")+`*Términos y Condiciones:*
${ge.termsAndConditions||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),X=ge.providerPhone?ge.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999";return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[g,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:ge.productName||"Producto sin nombre"}),ge.orderId&&e.jsxs("p",{className:"text-xs text-gray-400",children:["N° Pedido: ",ge.orderId]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",Le.toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${et?"text-yellow-400":C.replace("bg-","text-")}`,children:et?"Pendiente de activación":`${we} día${we===1?"":"s"} restante${we===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${C}`,style:{width:`${Math.min(r,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[r.toFixed(0),"% completado"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Vs,{className:"mr-2"})," Detalles de la Cuenta"]}),e.jsx("div",{className:"space-y-2 text-gray-300",children:et?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Usuario:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white break-all",children:ge.account?.email||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white break-all",children:ge.account?.password||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:ge.account?.profile||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:ge.account?.pin||"No especificado"})]})]})})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Wt,{className:"mr-2"})," Información del Pedido"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"block text-white",children:ge.provider||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono del Proveedor:"}),e.jsx("span",{className:"block text-white",children:ge.providerPhone||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Estado:"}),e.jsx("span",{className:`block px-2 py-1 text-xs rounded-full ${et?"bg-yellow-900/80 text-yellow-400":Fe?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:et?"A pedido":Fe?"Activo":"Expirado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Método de Pago:"}),e.jsx("span",{className:"block text-white",children:"BlackStreaming"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de inicio:"}),e.jsx("span",{className:"block text-white",children:ft(ge.startDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de vencimiento:"}),e.jsx("span",{className:"block text-white",children:ft(ge.endDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Días restantes:"}),e.jsx("span",{className:`block ${C.replace("bg-","text-")}`,children:we})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Vs,{className:"mr-2"})," Información del Cliente"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Nombre:"}),e.jsx("span",{className:"block text-white",children:ge.client?.name||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono:"}),e.jsx("span",{className:"block text-white",children:ge.client?.phone||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white",children:ge.client?.email||"No especificado"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("a",{href:`https://wa.me/51${X}?text=${E}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Ns,{size:18})," Contactar Proveedor"]}),ge.renewable&&e.jsx("button",{onClick:()=>It(ge),disabled:ne[`renew_${ge.id}`],className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${ne[`renew_${ge.id}`]?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 text-white"}`,children:ne[`renew_${ge.id}`]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(J3,{size:18})," Renovar Pedido"]})}),ge.client?.phone&&e.jsxs("a",{href:`https://wa.me/${ge.client.phone.replace(/^\+/,"")}?text=${A}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Ns,{size:18})," Contactar Cliente"]})]})]})]},ge.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(br,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Realiza tu primer pedido en nuestra tienda"})]})]});case"referidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Todos tus referidos (",S.length,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar referidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:ee,onChange:ge=>re(ge.target.value)}),e.jsx(Tr,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),S.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha de registro"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:S.filter(ge=>{const Le=ge.username||"",Fe=ge.email||"";return Le.toLowerCase().includes(ee.toLowerCase())||Fe.toLowerCase().includes(ee.toLowerCase())}).map(ge=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:ge.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:ge.email||"Sin email"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:ge.joinDate?ft(ge.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/80 text-green-400",children:ge.status||"Activo"})})]},ge.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(KN,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes referidos aún"}),e.jsx("p",{className:"text-gray-400",children:"Comparte tu código de afiliado para empezar a ganar comisiones"})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Reporte de ganancias"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias hoy"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde ayer"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias esta semana"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde la semana pasada"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",D.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[S.length," referidos"]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx(GN,{className:"mr-2 text-cyan-400"})," Historial de comisiones"]}),S.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-800/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Referido"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Origen"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-700/50 divide-y divide-gray-600/50",children:S.map(ge=>e.jsxs("tr",{className:"hover:bg-gray-600/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:ge.username||"Usuario sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:ge.joinDate?ft(ge.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:"S/ 0.00"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:"Registro"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-900/80 text-yellow-400",children:"Pendiente"})})]},ge.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xn,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay comisiones registradas"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gana comisiones cuando tus referidos realicen compras"})]})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:Ae,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:i,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:()=>Re({id:N,username:i}),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300",title:"Editar Nombre",children:e.jsx(lO,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:l,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsx("button",{type:"submit",disabled:ne.password,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-cyan-800",children:ne.password?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:ot,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(Vd,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx($r,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>n("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!a),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(zr,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(Ts,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:i}),e.jsx("p",{className:"text-xs text-gray-400",children:"Afiliador"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:cO},{id:"notificaciones",label:"Notificaciones",icon:Dm},{id:"recargas",label:"Recargas",icon:Xn},{id:"pedidos",label:"Pedidos",icon:br},{id:"referidos",label:"Referidos",icon:KN},{id:"ganancias",label:"Ganancias",icon:GN},{id:"configuracion",label:"Configuración",icon:Z3}].map(ge=>e.jsxs("button",{onClick:()=>{n(ge.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s===ge.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx(ge.icon,{className:"text-lg"}),e.jsx("span",{children:ge.label})]},ge.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:ot,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(Vd,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:Ye()}),e.jsx(xO,{isOpen:Se.isOpen,title:Se.title,message:Se.message,onClose:Qe}),e.jsx(gO,{isOpen:q.isOpen,user:q.user,onClose:Pt,onSave:Et}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},fO=({isOpen:a,message:t,title:s,onClose:n})=>a?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:s}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(Ts,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:n,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,yO=({username:a="Usuario",products:t=[],orders:s=[],providerBalance:n=0,balanceLoading:i=!1,totalStock:u=0,totalEarnings:l=0,isAdmin:p=!1,email:h="",notifications:k=[],setActiveSection:S=()=>{},formatDate:$=O=>new Date(O).toLocaleDateString(),theme:D="dark"})=>{const O=D==="dark",Y={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}};return e.jsxs(v.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-6xl mx-auto border ${O?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("h2",{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-6 bg-clip-text text-transparent bg-gradient-to-r ${O?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:["Bienvenido, ",e.jsx("span",{className:"text-red-400",children:a})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(v.div,{className:`rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${O?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:Y,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h3",{className:`text-lg font-semibold mb-3 ${O?"text-blue-400":"text-blue-600"} flex items-center`,children:[e.jsx(Y3,{className:"mr-2"})," Inventario"]}),e.jsx("p",{className:`text-3xl font-bold ${O?"text-white":"text-gray-900"}`,children:t.length}),e.jsx("p",{className:`text-sm ${O?"text-gray-400":"text-gray-600"}`,children:"Productos registrados"}),e.jsxs("p",{className:`text-sm ${O?"text-gray-400":"text-gray-600"}`,children:["Stock total: ",u]}),e.jsx(v.button,{onClick:()=>S("inventario"),className:`mt-4 px-4 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${O?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Ver inventario"})]}),e.jsxs(v.div,{className:`rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${O?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:Y,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h3",{className:`text-lg font-semibold mb-3 ${O?"text-blue-400":"text-blue-600"} flex items-center`,children:[e.jsx(Xn,{className:"mr-2"})," Ganancias"]}),i?e.jsx("div",{className:`animate-pulse ${O?"text-gray-400":"text-gray-600"}`,children:"Cargando..."}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-3xl font-bold ${O?"text-white":"text-gray-900"}`,children:["S/ ",l.toFixed(2)]}),e.jsxs("p",{className:`text-sm ${O?"text-gray-400":"text-gray-600"}`,children:[s.length," ventas realizadas"]}),e.jsxs("p",{className:`text-sm ${O?"text-gray-400":"text-gray-600"}`,children:["Disponible: S/ ",n.toFixed(2)]})]}),e.jsx(v.button,{onClick:()=>S("ganancias"),className:`mt-4 px-4 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${O?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Ver ganancias"})]}),e.jsxs(v.div,{className:`rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${O?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:Y,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h3",{className:`text-lg font-semibold mb-3 ${O?"text-blue-400":"text-blue-600"} flex items-center`,children:[e.jsx(Vs,{className:"mr-2"})," Mi Cuenta"]}),e.jsxs("div",{className:`space-y-3 ${O?"text-gray-300":"text-gray-700"}`,children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Vs,{className:`mr-2 ${O?"text-blue-400":"text-blue-600"}`,size:18}),e.jsx("span",{children:a})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ns,{className:`mr-2 ${O?"text-blue-400":"text-blue-600"}`,size:18}),e.jsx("span",{children:h})]}),e.jsx("p",{className:`text-xs px-2 py-1 rounded-full inline-block border ${O?"bg-gray-900/80 text-blue-400 border-gray-700/50":"bg-gray-200/80 text-blue-600 border-gray-300/50"}`,children:p?"Administrador":"Proveedor"})]}),e.jsx(v.button,{onClick:()=>S("configuracion"),className:`mt-4 px-4 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${O?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Editar perfil"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs(v.div,{className:`rounded-2xl p-4 shadow-xl border backdrop-blur-sm ${O?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:Y,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h3",{className:`text-lg font-semibold mb-3 ${O?"text-white":"text-gray-900"} flex items-center`,children:[e.jsx(br,{className:"mr-2"})," Pedidos recientes"]}),s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(br,{className:`mx-auto text-4xl ${O?"text-gray-400":"text-gray-500"}`}),e.jsx("h4",{className:`text-lg font-medium ${O?"text-gray-300":"text-gray-700"}`,children:"No hay pedidos recientes"}),e.jsx("p",{className:`text-sm ${O?"text-gray-400":"text-gray-600"}`,children:"Tus pedidos aparecerán aquí"})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:`${O?"bg-gray-900/80":"bg-gray-200/80"} backdrop-blur-sm`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${O?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Producto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${O?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Comprador"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${O?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Monto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${O?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Estado"})]})}),e.jsx("tbody",{className:`${O?"bg-gray-800/70":"bg-gray-100/70"} divide-y divide-gray-700/50`,children:s.slice(0,3).map((W,N)=>{const G=new Date(W.endDate)>new Date&&W.status==="completed",H=W.status==="pending";return e.jsxs(v.tr,{className:`${O?"hover:bg-gray-700/50":"hover:bg-gray-200/50"} transition-all duration-300`,whileHover:{backgroundColor:O?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.5)"},children:[e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm font-medium ${O?"text-white":"text-gray-900"} truncate max-w-xs`,children:W.productName}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${O?"text-gray-300":"text-gray-700"}`,children:W.buyer}),e.jsxs("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${O?"text-gray-300":"text-gray-700"}`,children:["S/ ",(W.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${H?O?"bg-yellow-900/80 text-yellow-400 border border-yellow-500/50":"bg-yellow-500/20 text-yellow-600 border border-yellow-500/50":G?O?"bg-green-900/80 text-green-400 border border-green-500/50":"bg-green-500/20 text-green-600 border border-green-500/50":O?"bg-red-900/80 text-red-400 border border-red-500/50":"bg-red-500/20 text-red-600 border border-red-500/50"}`,children:H?"A pedido":G?"Activo":"Expirado"})})]},N)})})]}),s.length>3&&e.jsx(v.button,{onClick:()=>S("pedidos"),className:`w-full mt-3 text-center text-sm transition-all duration-300 ${O?"text-blue-400 hover:underline":"text-blue-600 hover:underline"}`,whileHover:{scale:1.05},children:"Ver todos los pedidos"})]})]}),e.jsxs(v.div,{className:`rounded-2xl p-4 shadow-xl border backdrop-blur-sm ${O?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:Y,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h3",{className:`text-lg font-semibold mb-3 ${O?"text-white":"text-gray-900"} flex items-center`,children:[e.jsx(Ns,{className:"mr-2"})," Notificaciones"]}),k.length>0?k.map(W=>e.jsxs(v.div,{className:`border-b py-3 last:border-0 hover:rounded-xl hover:px-2 transition-all duration-300 ${O?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,whileHover:{backgroundColor:O?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.5)"},children:[e.jsx("p",{className:`${O?"text-gray-300":"text-gray-700"}`,children:W.message}),e.jsx("p",{className:`text-xs mt-1 ${O?"text-gray-400":"text-gray-500"}`,children:$(W.updatedAt?.toDate?.()||new Date)})]},W.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ns,{className:`mx-auto text-4xl ${O?"text-gray-400":"text-gray-500"}`}),e.jsx("h4",{className:`text-lg font-medium ${O?"text-gray-300":"text-gray-700"}`,children:"No hay notificaciones"}),e.jsx("p",{className:`text-sm ${O?"text-gray-400":"text-gray-600"}`,children:"Tus notificaciones aparecerán aquí"})]})]})]})]})},vO=({products:a,setActiveSection:t,handleEdit:s,handleDelete:n,getCategoryDisplayName:i,totalStock:u,theme:l="dark"})=>{const p=l==="dark",h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},k={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{backgroundColor:p?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.5)"}};return e.jsxs(v.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-6xl mx-auto border ${p?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${p?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Inventario"}),e.jsxs(v.button,{onClick:()=>t("subirProducto"),className:`px-4 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${p?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 flex items-center w-full md:w-auto justify-center`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(WN,{className:"mr-2"})," Nuevo Producto"]})]}),a.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:`${p?"bg-gray-900/80":"bg-gray-200/80"} backdrop-blur-sm`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${p?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Producto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${p?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Precio"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${p?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Stock"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${p?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Estado"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${p?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Acciones"})]})}),e.jsx("tbody",{className:`${p?"bg-gray-800/70":"bg-gray-100/70"} divide-y divide-gray-700/50`,children:a.map(S=>e.jsxs(v.tr,{className:`${p?"hover:bg-gray-700/50":"hover:bg-gray-200/50"} transition-all duration-300`,variants:k,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[S.image&&e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:S.image,alt:S.name,loading:"lazy"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:`text-sm font-medium ${p?"text-white":"text-gray-900"} truncate max-w-xs`,children:S.name}),e.jsx("div",{className:`text-xs ${p?"text-gray-400":"text-gray-600"}`,children:i(S.category)})]})]})}),e.jsxs("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${p?"text-gray-300":"text-gray-700"}`,children:["S/ ",(parseFloat(S.price)||0).toFixed(2)]}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${p?"text-gray-300":"text-gray-700"}`,children:S.stock||0}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${S.status==="En stock"?p?"bg-green-900/80 text-green-400 border border-green-500/50":"bg-green-500/20 text-green-600 border border-green-500/50":S.status==="A pedido"?p?"bg-yellow-900/80 text-yellow-400 border border-yellow-500/50":"bg-yellow-500/20 text-yellow-600 border border-yellow-500/50":p?"bg-red-900/80 text-red-400 border border-red-500/50":"bg-red-500/20 text-red-600 border border-red-500/50"}`,children:S.status})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx(v.button,{onClick:()=>s(S),className:`${p?"text-blue-400 hover:text-blue-500":"text-blue-600 hover:text-blue-700"} mr-3`,title:"Editar",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(X3,{})}),e.jsx(v.button,{onClick:()=>n(S.id),className:`${p?"text-red-400 hover:text-red-500":"text-red-600 hover:text-red-700"}`,title:"Eliminar",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(e4,{})})]})]},S.id))})]})}):e.jsxs(v.div,{className:`text-center py-12 ${p?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"} rounded-2xl border shadow-xl backdrop-blur-sm`,variants:h,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx(Y3,{className:`mx-auto text-4xl ${p?"text-gray-400":"text-gray-500"} mb-3`}),e.jsx("h4",{className:`text-lg font-medium ${p?"text-gray-300":"text-gray-700"}`,children:"No tienes productos registrados"}),e.jsx("p",{className:`text-sm ${p?"text-gray-400":"text-gray-600"} mb-4`,children:"Agrega tu primer producto para comenzar"}),e.jsxs(v.button,{onClick:()=>t("subirProducto"),className:`px-4 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${p?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 flex items-center mx-auto`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(WN,{className:"mr-2"})," Agregar Producto"]})]})]})},wO=({soldAccounts:a,formatDate:t,theme:s="dark"})=>{const n=s==="dark",i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},u={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3,ease:"easeOut"}},hover:{backgroundColor:n?"rgba(239, 68, 68, 0.2)":"rgba(239, 68, 68, 0.1)",transition:{duration:.2}}};return e.jsxs(v.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-6xl mx-auto border ${n?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,variants:i,initial:"hidden",animate:"visible",children:[e.jsxs("h3",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight mb-6 flex items-center bg-clip-text text-transparent bg-gradient-to-r ${n?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:[e.jsx(HN,{className:"mr-2"})," Cuentas Vendidas"]}),a.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:`backdrop-blur-sm ${n?"bg-gray-900/80":"bg-gray-200/80"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Producto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Email"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Perfil"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Fecha de Venta"})]})}),e.jsx("tbody",{className:`divide-y divide-gray-700/50 ${n?"bg-gray-800/70":"bg-gray-100/70"}`,children:a.map((l,p)=>e.jsxs(v.tr,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-white":"text-gray-900"}`,children:l.productName}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-gray-300":"text-gray-600"}`,children:l.email}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-gray-300":"text-gray-600"}`,children:l.profile||"N/A"}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-gray-300":"text-gray-600"}`,children:t(l.saleDate)})]},p))})]})}):e.jsxs(v.div,{className:"text-center py-12",variants:i,initial:"hidden",animate:"visible",children:[e.jsx(HN,{className:`mx-auto text-4xl ${n?"text-gray-400":"text-gray-500"} mb-3`}),e.jsx("h4",{className:`text-lg font-medium ${n?"text-gray-300":"text-gray-700"}`,children:"No hay cuentas vendidas"}),e.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"Las cuentas vendidas aparecerán aquí"})]})]})},kO=({product:a,setProduct:t,handleChange:s,handleFileChange:n,handleStockChange:i,handleAccountFieldChange:u,handleSubmit:l,setActiveSection:p,theme:h="dark"})=>{const k=h==="dark",S={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}};return e.jsxs(v.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-4xl mx-auto border ${k?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h2",{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-6 bg-clip-text text-transparent bg-gradient-to-r ${k?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Subir Nuevo Producto"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(v.div,{className:`col-span-1 rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${k?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:S,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Imagen del producto"}),e.jsx("div",{className:`mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-xl ${k?"bg-gray-900/80 border-gray-700/50":"bg-gray-200/80 border-gray-300/50"}`,children:a.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain",loading:"lazy"}),e.jsx(v.button,{type:"button",onClick:()=>t({...a,image:""}),className:`absolute top-0 right-0 ${k?"bg-blue-500":"bg-blue-600"} text-white rounded-full p-1 shadow-md`,whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(Ts,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx(t4,{className:`mx-auto h-12 w-12 ${k?"text-gray-400":"text-gray-500"}`}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"file-upload",className:`relative cursor-pointer rounded-xl font-medium ${k?"bg-gray-900/50 text-blue-400 hover:text-blue-500":"bg-gray-200/50 text-blue-600 hover:text-blue-700"} focus-within:outline-none`,children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:$=>n($),accept:"image/*"})]})}),e.jsx("p",{className:`text-xs ${k?"text-gray-500":"text-gray-600"}`,children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs(v.div,{className:`col-span-1 space-y-4 rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${k?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:S,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:s,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Categoría*"}),e.jsxs("select",{name:"category",value:a.category,onChange:s,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all`,children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Tipo de cuenta*"}),e.jsxs("select",{name:"accountType",value:a.accountType,onChange:s,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all`,children:[e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Estado*"}),e.jsxs("select",{name:"status",value:a.status,onChange:s,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all`,children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"}),e.jsx("option",{value:"Agotado",children:"Agotado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:a.status==="Agotado"?0:a.stock,onChange:i,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all ${a.status==="Agotado"?"opacity-50 cursor-not-allowed":""}`,min:"0",required:!0,disabled:a.status==="Agotado"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:a.price,onChange:s,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"renewal",checked:a.renewal,onChange:s,className:`h-4 w-4 ${k?"text-blue-400 focus:ring-blue-400 border-gray-600/50":"text-blue-600 focus:ring-blue-600 border-gray-300/50"} rounded`}),e.jsx("label",{className:`ml-2 ${k?"text-gray-300":"text-gray-700"}`,children:"¿Tiene renovación?"})]})]}),a.renewal&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Precio de renovación (S/)*"}),e.jsx("input",{type:"number",name:"renewalPrice",value:a.renewalPrice,onChange:s,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:a.duration,onChange:s,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:["Teléfono de contacto ",a.status==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:a.providerPhone,onChange:s,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: +51 987654321",required:a.status==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"URL del producto (opcional)"}),e.jsx("input",{type:"url",name:"productUrl",value:a.productUrl||"",onChange:s,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: https://www.ejemplo.com/producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:a.details,onChange:s,rows:"3",className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:a.terms,onChange:s,rows:"3",className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Especifica los términos y condiciones de uso"})]}),a.status==="En stock"&&e.jsxs(v.div,{className:`rounded-2xl p-4 shadow-xl border backdrop-blur-sm ${k?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:S,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${k?"text-white":"text-gray-900"}`,children:"Cuentas asociadas*"}),e.jsx("p",{className:`text-xs mb-3 ${k?"text-gray-400":"text-gray-600"}`,children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:a.accounts.map(($,D)=>e.jsxs(v.div,{className:`border rounded-xl p-4 ${k?"bg-gray-900/70 border-gray-700/50":"bg-gray-200/70 border-gray-300/50"} backdrop-blur-sm`,variants:S,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h4",{className:`text-sm font-medium ${k?"text-white":"text-gray-900"} mb-3`,children:["Cuenta ",D+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${k?"text-gray-400":"text-gray-600"} mb-1`,children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:$.email,onChange:O=>u(D,"email",O.target.value),className:`w-full px-3 py-2 rounded-xl ${k?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${k?"text-gray-400":"text-gray-600"} mb-1`,children:"Contraseña*"}),e.jsx("input",{type:"text",value:$.password,onChange:O=>u(D,"password",O.target.value),className:`w-full px-3 py-2 rounded-xl ${k?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${k?"text-gray-400":"text-gray-600"} mb-1`,children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:$.profile,onChange:O=>u(D,"profile",O.target.value),className:`w-full px-3 py-2 rounded-xl ${k?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm`,placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${k?"text-gray-400":"text-gray-600"} mb-1`,children:"PIN (opcional)"}),e.jsx("input",{type:"text",value:$.pin,onChange:O=>u(D,"pin",O.target.value),className:`w-full px-3 py-2 rounded-xl ${k?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm`,placeholder:"Ej: 1234"})]})]})]},D))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx(v.button,{onClick:()=>p("inventario"),className:`px-4 py-2 rounded-xl transition-all duration-300 ${k?"bg-gray-900/70 text-gray-300 hover:bg-gray-700/50":"bg-gray-200/70 text-gray-700 hover:bg-gray-300/50"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Cancelar"}),e.jsx(v.button,{onClick:l,className:`px-6 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${k?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Subir Producto"})]})]})]})},NO=({orders:a,totalEarnings:t,providerBalance:s,balanceLoading:n,getCategoryDisplayName:i,formatDate:u,theme:l="dark"})=>{const p=l==="dark",h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},k={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},S={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3,ease:"easeOut"}},hover:{backgroundColor:p?"rgba(239, 68, 68, 0.2)":"rgba(239, 68, 68, 0.1)",transition:{duration:.2}}};return e.jsxs(v.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-6xl mx-auto border ${p?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,variants:h,initial:"hidden",animate:"visible",children:[e.jsxs("h3",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight mb-6 flex items-center bg-clip-text text-transparent bg-gradient-to-r ${p?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:[e.jsx(Xn,{className:"mr-2"})," Ganancias"]}),e.jsx(v.div,{className:`rounded-2xl p-4 mb-6 border shadow-xl backdrop-blur-sm ${p?"bg-gray-900/80 border-gray-700/50":"bg-gray-100/80 border-gray-200/50"}`,variants:k,initial:"hidden",animate:"visible",whileHover:"hover",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`text-lg font-medium ${p?"text-white":"text-gray-900"} mb-1`,children:"Ganancias totales"}),e.jsxs("p",{className:`text-sm ${p?"text-gray-400":"text-gray-600"}`,children:[a.length," ventas realizadas"]}),n?e.jsx("p",{className:`text-sm ${p?"text-gray-400":"text-gray-600"}`,children:"Disponible: Cargando..."}):e.jsxs("p",{className:`text-sm ${p?"text-gray-400":"text-gray-600"}`,children:["Disponible: S/ ",(s||0).toFixed(2)]})]}),e.jsxs("div",{className:`text-3xl font-bold ${p?"text-white":"text-gray-900"} mt-2 md:mt-0`,children:["S/ ",t.toFixed(2)]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:`backdrop-blur-sm ${p?"bg-gray-900/80":"bg-gray-200/80"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${p?"text-gray-300":"text-gray-700"}`,children:"Producto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${p?"text-gray-300":"text-gray-700"}`,children:"Categoría"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${p?"text-gray-300":"text-gray-700"}`,children:"Comprador"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${p?"text-gray-300":"text-gray-700"}`,children:"Contacto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${p?"text-gray-300":"text-gray-700"}`,children:"Fecha"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${p?"text-gray-300":"text-gray-700"}`,children:"Monto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${p?"text-gray-300":"text-gray-700"}`,children:"Estado"})]})}),e.jsx("tbody",{className:`divide-y divide-gray-700/50 ${p?"bg-gray-800/70":"bg-gray-100/70"}`,children:a.map(($,D)=>e.jsxs(v.tr,{variants:S,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${p?"text-white":"text-gray-900"}`,children:$.productName}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${p?"text-gray-300":"text-gray-600"}`,children:i($.category)}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[e.jsx("div",{className:`text-sm ${p?"text-white":"text-gray-900"}`,children:$.buyer}),e.jsx("div",{className:`text-xs ${p?"text-gray-400":"text-gray-600"}`,children:$.buyerEmail})]}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${p?"text-gray-300":"text-gray-600"}`,children:$.buyerPhone}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${p?"text-gray-300":"text-gray-600"}`,children:u($.saleDate)}),e.jsxs("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${p?"text-white":"text-gray-900"}`,children:["S/ ",($.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p?"bg-blue-500/20 text-blue-400 border-blue-500/50":"bg-blue-600/20 text-blue-600 border-blue-600/50"}`,children:"Completado"})})]},D))})]})}),a.length===0&&e.jsxs(v.div,{className:"text-center py-12",variants:h,initial:"hidden",animate:"visible",children:[e.jsx(Xn,{className:`mx-auto text-4xl ${p?"text-gray-400":"text-gray-500"} mb-3`}),e.jsx("h4",{className:`text-lg font-medium ${p?"text-gray-300":"text-gray-700"}`,children:"No hay ventas registradas"}),e.jsx("p",{className:`text-sm ${p?"text-gray-400":"text-gray-600"}`,children:"Tus ventas aparecerán aquí."})]})]})},jO=({orders:a,searchQuery:t,setSearchQuery:s,getCategoryDisplayName:n,formatDate:i,handleEditOrder:u,handleActivateOrder:l,handleDeleteOrder:p,theme:h="dark"})=>{const k=h==="dark",S={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},$={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return e.jsxs(v.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-6xl mx-auto border ${k?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,variants:S,initial:"hidden",animate:"visible",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[e.jsxs("h3",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight flex items-center bg-clip-text text-transparent bg-gradient-to-r ${k?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:[e.jsx(br,{className:"mr-2"})," Mis pedidos"]}),e.jsxs("div",{className:"relative w-full sm:w-64 mt-4 sm:mt-0",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:`w-full px-3 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300 text-sm placeholder-gray-500`,value:t,onChange:D=>s(D.target.value)}),e.jsx(Tr,{className:`absolute right-3 top-2.5 ${k?"text-gray-400":"text-gray-500"}`,size:16})]})]}),a.length>0?e.jsx("div",{className:"space-y-6",children:a.filter(D=>(D.productName||"").toLowerCase().includes(t.toLowerCase())||(D.category||"").toLowerCase().includes(t.toLowerCase())).map(D=>{const O=D.status==="pending",Y=D.status==="refunded",W=D.daysRemaining||0,N=D.timeElapsedPercentage||0;let G=k?"bg-blue-400":"bg-blue-600";N>70&&N<=90?G="bg-yellow-400":N>90&&(G=k?"bg-red-400":"bg-red-500");const H=Y?e.jsx($r,{className:"text-red-400"}):O?e.jsx(Dr,{className:"text-yellow-400"}):e.jsx(_m,{className:"text-green-400"}),U=D.buyerPhone?D.buyerPhone.replace(/^\+/,"").replace(/\D/g,""):null,ne=encodeURIComponent(`Hola ${D.buyer||"Cliente"}, 😊

Soy el proveedor de tu suscripción ${D.productName||"Sin nombre"} (N° Pedido: ${D.id||"No especificado"}). ¿En qué puedo ayudarte hoy? Por favor, indícame tu consulta o problema.

Atentamente, BlackStreaming`),oe=encodeURIComponent(`Hola ${D.buyer||"Cliente"}, 😊

Te informamos que tu suscripción ${D.productName||"Sin nombre"} (N° Pedido: ${D.id||"No especificado"}) vencerá en ${W} día${W===1?"":"s"}. Te recomendamos renovarla a tiempo.

Detalles:
- Fecha de vencimiento: ${i(D.endDate)}
- Precio: S/ ${(D.amount||0).toFixed(2)}

Si necesitas ayuda, contáctanos. ¡Gracias por tu preferencia!
Atentamente, BlackStreaming`);return e.jsxs(v.div,{className:`border rounded-2xl overflow-hidden ${k?"border-gray-600/50":"border-gray-300/50"}`,variants:$,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("div",{className:`px-4 py-3 border-b ${k?"bg-gray-700/50 border-gray-600/20":"bg-gray-200/50 border-gray-300/20"} backdrop-blur-sm flex justify-between items-center`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[H,e.jsxs("div",{children:[e.jsx("h4",{className:`font-semibold text-sm ${k?"text-white":"text-gray-900"}`,children:D.productName||"Producto sin nombre"}),e.jsxs("p",{className:`text-xs ${k?"text-gray-400":"text-gray-600"}`,children:["Categoría: ",n(D.category)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-sm font-medium ${k?"text-white":"text-gray-900"}`,children:["S/ ",(D.amount||0).toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${G.replace("bg-","text-")}`,children:O?"Pendiente de activación":`${W} día${W===1?"":"s"} restante${W===1?"":"s"}`})]})]}),e.jsxs("div",{className:`p-4 ${k?"bg-gray-700/50":"bg-gray-100/50"} backdrop-blur-sm`,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:`w-full rounded-full h-1 ${k?"bg-gray-600/40":"bg-gray-300/40"}`,children:e.jsx("div",{className:`h-1 rounded-full ${G}`,style:{width:`${Math.min(N,100)}%`}})}),e.jsxs("p",{className:`text-xs text-right ${k?"text-gray-500":"text-gray-600"} mt-1`,children:[N.toFixed(0),"%"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(v.div,{className:`p-4 rounded-2xl border backdrop-blur-sm ${k?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:$,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("h5",{className:`text-sm font-medium mb-3 ${k?"text-blue-400":"text-blue-600"}`,children:"Información del Comprador"}),e.jsxs("p",{className:`text-sm ${k?"text-gray-300":"text-gray-700"}`,children:["Comprador: ",D.buyer]}),e.jsxs("p",{className:`text-sm ${k?"text-gray-400":"text-gray-600"}`,children:["Teléfono: ",D.buyerPhone]})]}),e.jsxs(v.div,{className:`p-4 rounded-2xl border backdrop-blur-sm ${k?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:$,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("h5",{className:`text-sm font-medium mb-3 ${k?"text-blue-400":"text-blue-600"}`,children:"Detalles de la Cuenta"}),D.accountDetails?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${k?"text-gray-300":"text-gray-700"}`,children:["Email: ",D.accountDetails.email]}),e.jsxs("p",{className:`text-sm ${k?"text-gray-400":"text-gray-600"}`,children:["Contraseña: ",D.accountDetails.password]}),e.jsxs("p",{className:`text-sm ${k?"text-gray-400":"text-gray-600"}`,children:["Perfil: ",D.accountDetails.profile||"N/A"]}),e.jsxs("p",{className:`text-sm ${k?"text-gray-400":"text-gray-600"}`,children:["PIN: ",D.accountDetails.pin||"N/A"]})]}):e.jsx("p",{className:`text-sm ${k?"text-gray-400":"text-gray-600"}`,children:"No disponible"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4",children:[e.jsxs(v.button,{onClick:()=>u(D),className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${k?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gradient-to-r from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900 text-white"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Editar cuenta",children:[e.jsx(X3,{size:18})," Editar Cuenta"]}),D.status==="pending"&&e.jsxs(v.button,{onClick:()=>l(D.id),className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${k?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gradient-to-r from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900 text-white"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Activar pedido",children:[e.jsx(_m,{size:18})," Activar Pedido"]}),U&&e.jsxs(e.Fragment,{children:[e.jsxs(v.a,{href:`https://wa.me/${U}?text=${ne}`,target:"_blank",rel:"noopener noreferrer",className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${k?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gradient-to-r from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900 text-white"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Contactar cliente",children:[e.jsx(Ns,{size:18})," Contactar"]}),!Y&&W<=7&&e.jsxs(v.a,{href:`https://wa.me/${U}?text=${oe}`,target:"_blank",rel:"noopener noreferrer",className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${k?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gradient-to-r from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900 text-white"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Notificar vencimiento",children:[e.jsx(Dm,{size:18})," Notificar"]})]}),e.jsxs(v.button,{onClick:()=>p(D.id),className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${k?"bg-gray-900/70 text-gray-300 hover:bg-gray-700/50":"bg-gray-200/70 text-gray-700 hover:bg-gray-300/50"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Eliminar pedido",children:[e.jsx(e4,{size:18})," Eliminar"]})]})]})]},D.id)})}):e.jsxs(v.div,{className:"text-center py-12",variants:S,initial:"hidden",animate:"visible",children:[e.jsx(br,{className:`mx-auto text-4xl ${k?"text-gray-400":"text-gray-500"} mb-3`}),e.jsx("h4",{className:`text-lg font-medium ${k?"text-gray-300":"text-gray-700"}`,children:"No hay pedidos registrados"}),e.jsx("p",{className:`text-sm ${k?"text-gray-400":"text-gray-600"}`,children:"Tus pedidos aparecerán aquí"})]})]})},CO=({accountDetails:a,handleAccountChange:t,handleUpdateAccount:s,theme:n="dark"})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},l={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return e.jsxs(v.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-4xl mx-auto border ${i?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,variants:u,initial:"hidden",animate:"visible",children:[e.jsxs("h3",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight mb-6 flex items-center bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:[e.jsx(Z3,{className:"mr-2"})," Configuración"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(v.div,{variants:l,initial:"hidden",animate:"visible",children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${i?"text-gray-300":"text-gray-700"}`,children:"Correo electrónico"}),e.jsx("input",{type:"email",value:a.email,disabled:!0,className:`w-full px-4 py-2 rounded-xl ${i?"bg-gray-700/50 text-gray-400 border-gray-600/50":"bg-gray-200/50 text-gray-600 border-gray-300/50"} cursor-not-allowed`})]}),e.jsxs(v.div,{variants:l,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${i?"text-gray-300":"text-gray-700"}`,children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",value:a.password,onChange:t,className:`w-full px-4 py-2 rounded-xl ${i?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Dejar en blanco para no cambiar"})]}),e.jsxs(v.div,{variants:l,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${i?"text-gray-300":"text-gray-700"}`,children:"Preferencias"}),e.jsx("textarea",{name:"preferences",value:a.preferences,onChange:t,rows:"4",className:`w-full px-4 py-2 rounded-xl ${i?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Especifica tus preferencias o notas"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(v.button,{onClick:s,className:`px-6 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${i?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Guardar Cambios"})})]})]})},SO=({editModalOpen:a,setEditModalOpen:t,selectedProduct:s,setSelectedProduct:n,editError:i,setEditError:u,handleFileChange:l,handleEditStockChange:p,handleEditAccountFieldChange:h,handleUpdateProduct:k,theme:S="dark"})=>{const $=S==="dark",D={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}}},O={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},Y=W=>{const{name:N,value:G,type:H,checked:U}=W.target;n(ne=>({...ne,[N]:H==="checkbox"?U:G,...N==="status"&&{stock:G==="Agotado"?0:ne.stock||1,accounts:G==="En stock"?ne.accounts.length?ne.accounts:Array(ne.stock||1).fill({email:"",password:"",profile:"",pin:""}):[]}}))};return a?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs(v.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl w-full max-w-4xl border max-h-[90vh] overflow-y-auto ${$?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,variants:D,initial:"hidden",animate:"visible",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${$?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Editar Producto"}),e.jsx(v.button,{onClick:()=>t(!1),className:`${$?"bg-blue-500":"bg-blue-600"} text-white rounded-full p-1 shadow-md`,whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(Ts,{size:20})})]}),i&&e.jsx(v.div,{className:`mb-4 p-3 border rounded-xl ${$?"bg-red-900/20 border-red-900/50 text-red-400":"bg-red-100/20 border-red-200/50 text-red-600"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:i}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(v.div,{className:`col-span-1 rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${$?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:O,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${$?"text-gray-300":"text-gray-700"}`,children:"Imagen del producto"}),e.jsx("div",{className:`mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-xl ${$?"bg-gray-900/80 border-gray-700/50":"bg-gray-200/80 border-gray-300/50"}`,children:s.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain",loading:"lazy"}),e.jsx(v.button,{type:"button",onClick:()=>n({...s,image:""}),className:`absolute top-0 right-0 ${$?"bg-blue-500":"bg-blue-600"} text-white rounded-full p-1 shadow-md`,whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(Ts,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx(t4,{className:`mx-auto h-12 w-12 ${$?"text-gray-400":"text-gray-500"}`}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"edit-file-upload",className:`relative cursor-pointer rounded-xl font-medium ${$?"bg-gray-900/50 text-blue-400 hover:text-blue-500":"bg-gray-200/50 text-blue-600 hover:text-blue-700"} focus-within:outline-none`,children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"edit-file-upload",name:"edit-file-upload",type:"file",className:"sr-only",onChange:W=>l(W,!0),accept:"image/*"})]})}),e.jsx("p",{className:`text-xs ${$?"text-gray-500":"text-gray-600"}`,children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs(v.div,{className:`col-span-1 space-y-4 rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${$?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:O,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${$?"text-gray-300":"text-gray-700"}`,children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:Y,className:`w-full px-4 py-2 rounded-xl ${$?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${$?"text-gray-300":"text-gray-700"}`,children:"Categoría*"}),e.jsxs("select",{name:"category",value:s.category,onChange:Y,className:`w-full px-4 py-2 rounded-xl ${$?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all`,children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${$?"text-gray-300":"text-gray-700"}`,children:"Tipo de cuenta*"}),e.jsxs("select",{name:"accountType",value:s.accountType,onChange:Y,className:`w-full px-4 py-2 rounded-xl ${$?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all`,children:[e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${$?"text-gray-300":"text-gray-700"}`,children:"Estado*"}),e.jsxs("select",{name:"status",value:s.status,onChange:Y,className:`w-full px-4 py-2 rounded-xl ${$?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all`,children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"}),e.jsx("option",{value:"Agotado",children:"Agotado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${$?"text-gray-300":"text-gray-700"}`,children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:s.status==="Agotado"?0:s.stock,onChange:p,className:`w-full px-4 py-2 rounded-xl ${$?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all ${s.status==="Agotado"?"opacity-50 cursor-not-allowed":""}`,min:"0",required:!0,disabled:s.status==="Agotado"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${$?"text-gray-300":"text-gray-700"}`,children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:s.price,onChange:Y,className:`w-full px-4 py-2 rounded-xl ${$?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"renewal",checked:s.renewal,onChange:Y,className:`h-4 w-4 ${$?"text-blue-400 focus:ring-blue-400 border-gray-600/50":"text-blue-600 focus:ring-blue-600 border-gray-300/50"} rounded`}),e.jsx("label",{className:`ml-2 ${$?"text-gray-300":"text-gray-700"}`,children:"¿Tiene renovación?"})]})]}),s.renewal&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${$?"text-gray-300":"text-gray-700"}`,children:"Precio de renovación (S/)*"}),e.jsx("input",{type:"number",name:"renewalPrice",value:s.renewalPrice,onChange:Y,className:`w-full px-4 py-2 rounded-xl ${$?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${$?"text-gray-300":"text-gray-700"}`,children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:s.duration,onChange:Y,className:`w-full px-4 py-2 rounded-xl ${$?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-gray-300 mb-2 ${$?"text-gray-300":"text-gray-700"}`,children:["Teléfono de contacto ",s.status==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:s.providerPhone,onChange:Y,className:`w-full px-4 py-2 rounded-xl ${$?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: +51 987654321",required:s.status==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${$?"text-gray-300":"text-gray-700"}`,children:"URL del producto (opcional)"}),e.jsx("input",{type:"url",name:"productUrl",value:s.productUrl||"",onChange:Y,className:`w-full px-4 py-2 rounded-xl ${$?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: https://www.ejemplo.com/producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${$?"text-gray-300":"text-gray-700"}`,children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:s.details,onChange:Y,rows:"3",className:`w-full px-4 py-2 rounded-xl ${$?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${$?"text-gray-300":"text-gray-700"}`,children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:s.terms,onChange:Y,rows:"3",className:`w-full px-4 py-2 rounded-xl ${$?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Especifica los términos y condiciones de uso"})]}),s.status==="En stock"&&e.jsxs(v.div,{className:`rounded-2xl p-4 shadow-xl border backdrop-blur-sm ${$?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:O,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${$?"text-white":"text-gray-900"}`,children:"Cuentas asociadas*"}),e.jsx("p",{className:`text-xs mb-3 ${$?"text-gray-400":"text-gray-600"}`,children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:s.accounts.map((W,N)=>e.jsxs(v.div,{className:`border rounded-xl p-4 ${$?"bg-gray-900/70 border-gray-700/50":"bg-gray-200/70 border-gray-300/50"} backdrop-blur-sm`,variants:O,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h4",{className:`text-sm font-medium ${$?"text-white":"text-gray-900"} mb-3`,children:["Cuenta ",N+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${$?"text-gray-400":"text-gray-600"} mb-1`,children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:W.email,onChange:G=>h(N,"email",G.target.value),className:`w-full px-3 py-2 rounded-xl ${$?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${$?"text-gray-400":"text-gray-600"} mb-1`,children:"Contraseña*"}),e.jsx("input",{type:"text",value:W.password,onChange:G=>h(N,"password",G.target.value),className:`w-full px-3 py-2 rounded-xl ${$?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${$?"text-gray-400":"text-gray-600"} mb-1`,children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:W.profile,onChange:G=>h(N,"profile",G.target.value),className:`w-full px-3 py-2 rounded-xl ${$?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm`,placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${$?"text-gray-400":"text-gray-600"} mb-1`,children:"PIN (opcional)"}),e.jsx("input",{type:"text",value:W.pin,onChange:G=>h(N,"pin",G.target.value),className:`w-full px-3 py-2 rounded-xl ${$?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm`,placeholder:"Ej: 1234"})]})]})]},N))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx(v.button,{onClick:()=>t(!1),className:`px-4 py-2 rounded-xl transition-all duration-300 ${$?"bg-gray-900/70 text-gray-300 hover:bg-gray-700/50":"bg-gray-200/70 text-gray-700 hover:bg-gray-300/50"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Cancelar"}),e.jsx(v.button,{onClick:k,className:`px-6 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${$?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Actualizar Producto"})]})]})]})}):null},$O=({editOrderModalOpen:a,setEditOrderModalOpen:t,selectedOrder:s,handleOrderAccountChange:n,editOrderError:i,setEditOrderError:u,handleUpdateOrder:l,theme:p="dark"})=>{const h=p==="dark",k={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}}},S={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}};return a?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs(v.div,{className:`backdrop-blur-md p-4 sm:p-6 rounded-2xl shadow-2xl w-full max-w-md border max-h-[90vh] overflow-y-auto ${h?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,variants:k,initial:"hidden",animate:"visible",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:`text-xl sm:text-2xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${h?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Editar Detalles de Cuenta"}),e.jsx(v.button,{onClick:()=>t(!1),className:`${h?"bg-blue-500":"bg-blue-600"} text-white rounded-full p-1 shadow-md`,whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(Ts,{size:20})})]}),i&&e.jsx(v.div,{className:`mb-4 p-3 border rounded-xl ${h?"bg-red-900/20 border-red-900/50 text-red-400":"bg-red-100/20 border-red-200/50 text-red-600"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:i}),e.jsxs(v.div,{className:`border rounded-2xl p-4 shadow-xl backdrop-blur-sm ${h?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"} space-y-4`,variants:S,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium mb-1 ${h?"text-gray-400":"text-gray-600"}`,children:"Correo electrónico*"}),e.jsx("input",{type:"email",name:"email",value:s.accountDetails.email,onChange:n,className:`w-full px-3 py-2 rounded-xl ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm placeholder-gray-500`,placeholder:"Ej: usuario@ejemplo.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium mb-1 ${h?"text-gray-400":"text-gray-600"}`,children:"Contraseña*"}),e.jsx("input",{type:"text",name:"password",value:s.accountDetails.password,onChange:n,className:`w-full px-3 py-2 rounded-xl ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm placeholder-gray-500`,placeholder:"Ej: contraseña123",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium mb-1 ${h?"text-gray-400":"text-gray-600"}`,children:"Perfil (opcional)"}),e.jsx("input",{type:"text",name:"profile",value:s.accountDetails.profile,onChange:n,className:`w-full px-3 py-2 rounded-xl ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm placeholder-gray-500`,placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium mb-1 ${h?"text-gray-400":"text-gray-600"}`,children:"PIN (opcional)"}),e.jsx("input",{type:"text",name:"pin",value:s.accountDetails.pin,onChange:n,className:`w-full px-3 py-2 rounded-xl ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm placeholder-gray-500`,placeholder:"Ej: 1234"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx(v.button,{onClick:()=>t(!1),className:`px-4 py-2 rounded-xl transition-all duration-300 ${h?"bg-gray-900/70 text-gray-300 hover:bg-gray-700/50":"bg-gray-200/70 text-gray-700 hover:bg-gray-300/50"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Cancelar"}),e.jsx(v.button,{onClick:l,className:`px-6 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${h?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Guardar Cambios"})]})]})}):null},TO=Cs.memo(({show:a,onClose:t,title:s,message:n,theme:i})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${i==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${i==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${i==="dark"?"text-white":"text-gray-900"}`,children:s}),e.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:n})]})})}));TO.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,title:F.string.isRequired,message:F.string.isRequired,theme:F.string.isRequired};const d4=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState("inicio"),[i,u]=m.useState("Usuario"),[l,p]=m.useState(""),[h,k]=m.useState(""),[S,$]=m.useState([]),[D,O]=m.useState([]),[Y,W]=m.useState([]),[N,G]=m.useState(!0),[H,U]=m.useState(""),[ne,oe]=m.useState({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:Array(1).fill({email:"",password:"",profile:"",pin:""})}),[$e,K]=m.useState(null),[V,L]=m.useState(!1),[y,se]=m.useState(""),[ee,re]=m.useState(""),[He,ut]=m.useState({isOpen:!1,message:"",title:""}),[it,Je]=m.useState({email:"",password:"",preferences:""}),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!0),[de,ve]=m.useState(0),[Se,Ve]=m.useState(!1),[q,o]=m.useState(null),[nt,rt]=m.useState(""),[Qe,Re]=m.useState("dark"),[Pt,Et]=m.useState(!1),[Tt,It]=m.useState(!1),[St,ft]=m.useState([]),ot=cr(),Ae=Eb(),Ye=m.useCallback(()=>{Re(Pe=>Pe==="dark"?"light":"dark")},[]),ge=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),Le=m.useCallback((Pe,_e)=>{ut({isOpen:!0,title:Pe,message:_e})},[]),Fe=m.useCallback(()=>{ut({isOpen:!1,message:"",title:""})},[]),et=m.useCallback(Pe=>{if(!Pe)return"No especificada";try{const _e=Pe instanceof Date?Pe:Pe?.toDate?.()||new Date(Pe);return isNaN(_e.getTime())?"Fecha inválida":_e.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(_e){return console.error("Error formatting date:",_e),"Fecha inválida"}},[]),we=m.useCallback(Pe=>({netflix:"Netflix",spotify:"Spotify",disney:"Disney",max:"Max",primevideo:"Prime Video",vix:"Vix",crunchyroll:"Crunchyroll",canva:"Canva",chatgpt:"ChatGPT",redessociales:"Redes Sociales",dgo:"Dgo",ligamax:"Liga Max",movistarplay:"Movistar Play",youtube:"Youtube",deezer:"Deezer",tidal:"Tidal",vpn:"Vpn",wintv:"WinTv",applemusic:"Apple Music",appletv:"Apple TV",iptv:"Iptv",flujotv:"Flujo Tv",vikirakuten:"Viki Rakuten",pornhub:"Pornhub",paramount:"Paramount",licencias:"Licencias",capcut:"Capcut",duolingo:"Duolingo",buscapersonas:"BuscaPersonas"})[Pe?.toLowerCase()]||"Otro",[]);m.useEffect(()=>{const Pe=hr(Ae,_e=>{_e?(p(_e.email||""),k(_e.uid),r(_e.uid)):ot("/login")});return()=>Pe()},[Ae,ot]);const r=async Pe=>{try{const _e=Z(I,"users",Pe),mt=await zt(_e);if(mt.exists()){const Xe=mt.data();u(Xe.username||"Usuario"),Je({email:Xe.email||"",password:"",preferences:Xe.preferences||""})}G(!1)}catch(_e){U("Error al cargar datos del usuario"),console.error("Error fetching user data:",_e),G(!1)}};m.useEffect(()=>{l&&(async _e=>{try{const mt=await zt(Z(I,"admins",_e));Ne(mt.exists())}catch(mt){console.error("Error checking admin status:",mt)}})(l)},[l]),m.useEffect(()=>{const Pe=qe(Z(I,"notifications","adminMessage"),_e=>{if(_e.exists()){const mt=_e.data(),Xe=fe?"admin":"provider";mt.roles&&mt.roles.includes(Xe)?ft([{id:_e.id,...mt,timestamp:mt.updatedAt?.toDate()}]):ft([])}else ft([])},_e=>{console.error("Error in notifications listener:",_e),U("Error al cargar notificaciones: "+_e.message)});return()=>Pe()},[fe]),m.useEffect(()=>{if(!i)return;const Pe=Te(ae(I,"products"),We("provider","==",i)),_e=qe(Pe,mt=>{const Xe=mt.docs.map(gt=>({id:gt.id,...gt.data()}));O(Xe)},mt=>{console.error("Error fetching products:",mt),U("Error al cargar productos")});return()=>_e()},[i]),m.useEffect(()=>{if(!h)return;const Pe=Te(ae(I,"sales"),We("providerId","==",h)),_e=qe(Pe,Xe=>{if(Xe.empty){$([]),J(!1);return}const gt=Xe.docs.map(Nt=>{const pt=Nt.data(),ps=pt.saleDate?.toDate?.()||pt.createdAt?.toDate?.()||new Date;let _n=pt.startDate?.toDate?.(),hs=_n||ps,An=!_n;const qa=pt.durationDays||30;let Za;pt.endDate?Za=typeof pt.endDate=="string"?new Date(pt.endDate):pt.endDate.toDate?.()||new Date(pt.endDate):(Za=new Date(hs.getTime()+qa*24*60*60*1e3),An=!0),An&&da(Z(I,"sales",Nt.id),{startDate:_n||Wr.fromDate(ps),endDate:Wr.fromDate(Za),durationDays:qa}).catch(Ur=>{console.error("Error al actualizar startDate/endDate en Firestore:",Ur)});const es=new Date,tl=Za.getTime()-hs.getTime(),ci=es.getTime()-hs.getTime(),mo=Za.getTime()-es.getTime(),cn=Math.max(1,Math.ceil(tl/(1e3*60*60*24))),di=Math.max(0,Math.ceil(mo/(1e3*60*60*24))),rl=Math.ceil(ci/(1e3*60*60*24)),fc=cn>0?Math.min(100,rl/cn*100):100;return{id:Nt.id,productName:pt.productName||"Producto sin nombre",category:pt.type||"netflix",amount:parseFloat(pt.price)||0,buyer:pt.buyerName||pt.customerName||"Comprador desconocido",buyerPhone:pt.buyerPhone||"No especificado",buyerEmail:pt.customerEmail||"No especificado",status:pt.status||"completed",saleDate:ps,startDate:hs,endDate:Za,durationDays:qa,daysRemaining:di,totalDays:cn,timeElapsedPercentage:fc,accountDetails:pt.accountDetails||{email:"No disponible",password:"No disponible",profile:"N/A",pin:""},balance:parseFloat(pt.price)||0}});$(gt);const st=gt.filter(Nt=>Nt.status==="completed"&&Nt.accountDetails).map(Nt=>({...Nt.accountDetails,productName:Nt.productName,saleDate:Nt.saleDate,orderId:Nt.id}));W(st),J(!1)},Xe=>{console.error("Error fetching sales:",Xe),U("Error al cargar ventas"),J(!1)}),mt=setInterval(()=>{$(Xe=>Xe.map(gt=>{const st=new Date,Nt=new Date(gt.endDate).getTime()-new Date(gt.startDate).getTime(),pt=st.getTime()-new Date(gt.startDate).getTime(),Ja=new Date(gt.endDate).getTime()-st.getTime(),ps=Math.max(1,Math.ceil(Nt/(1e3*60*60*24))),_n=Math.max(0,Math.ceil(Ja/(1e3*60*60*24))),hs=Math.ceil(pt/(1e3*60*60*24)),An=ps>0?Math.min(100,hs/ps*100):100;return{...gt,daysRemaining:_n,totalDays:ps,timeElapsedPercentage:An}}))},6e4);return()=>{_e(),clearInterval(mt)}},[h]),m.useEffect(()=>{if(!i)return;const Pe=Z(I,"providerBalances",i),_e=qe(Pe,mt=>{mt.exists()?ve(mt.data().balance||0):(Go(Pe,{balance:0,provider:i,updatedAt:Ge()}),ve(0)),J(!1)},mt=>{console.error("Error fetching provider balance:",mt),U("Error al cargar el saldo del proveedor"),J(!1)});return()=>_e()},[i]);const C=m.useCallback(async()=>{try{await Pr(Ae),ot("/login")}catch(Pe){console.error("Error al cerrar sesión:",Pe),Le("Error",Pe.message||"Error al cerrar sesión")}},[ot,Le]),g=m.useCallback(Pe=>{const{name:_e,value:mt,type:Xe,checked:gt}=Pe.target;oe(st=>({...st,[_e]:Xe==="checkbox"?gt:mt}))},[]),E=m.useCallback(Pe=>{const{name:_e,value:mt}=Pe.target;Je(Xe=>({...Xe,[_e]:mt}))},[]),A=m.useCallback((Pe,_e=!1)=>{const mt=Pe.target.files[0];if(mt){if(mt.size>10485760){_e?se("La imagen no debe exceder los 10MB"):U("La imagen no debe exceder los 10MB");return}const gt=new FileReader;gt.onloadend=()=>{_e?K(st=>({...st,image:gt.result})):oe(st=>({...st,image:gt.result}))},gt.readAsDataURL(mt)}},[]),X=m.useCallback(Pe=>{const _e=parseInt(Pe.target.value)||1,mt=ne.accounts||[];if(_e>mt.length){const Xe=[...mt];for(;Xe.length<_e;)Xe.push({email:"",password:"",profile:"",pin:""});oe({...ne,stock:_e,accounts:Xe})}else if(_e<mt.length){const Xe=mt.slice(0,Math.max(_e,1));oe({...ne,stock:_e,accounts:Xe})}else oe({...ne,stock:_e})},[ne]),ce=m.useCallback(Pe=>{const _e=parseInt(Pe.target.value)||1;let Xe=[...$e.accounts||[]];if(_e>Xe.length)for(;Xe.length<_e;)Xe.push({email:"",password:"",profile:"",pin:""});else _e<Xe.length&&(Xe=Xe.slice(0,Math.max(_e,1)));K({...$e,stock:_e,accounts:Xe})},[$e]),le=m.useCallback((Pe,_e,mt)=>{const Xe=[...ne.accounts];Xe[Pe]={...Xe[Pe],[_e]:mt},oe({...ne,accounts:Xe})},[ne]),P=m.useCallback((Pe,_e,mt)=>{K(Xe=>({...Xe,accounts:Xe.accounts.map((gt,st)=>st===Pe?{...gt,[_e]:mt}:gt)}))},[]),B=m.useCallback(Pe=>{const{name:_e,value:mt}=Pe.target;o(Xe=>({...Xe,accountDetails:{...Xe.accountDetails,[_e]:mt}}))},[]),_=m.useCallback(async()=>{if(U(""),!ne.name||!ne.price){Le("Error","Por favor complete todos los campos obligatorios");return}if(ne.renewal&&!ne.renewalPrice){Le("Error","Por favor ingrese el precio de renovación");return}if(ne.status==="En stock"&&ne.accounts.some(_e=>!_e.email||!_e.password)){Le("Error","Por favor complete todos los campos de las cuentas");return}try{const Pe={...ne,provider:i,providerId:h,providerPhone:ne.status==="En stock"?ne.providerPhone||"":ne.providerPhone||"No especificado",createdAt:Ge(),availableAccounts:ne.status==="En stock"?ne.accounts.length:0},_e=await Ko(ae(I,"products"),Pe);if(ne.status==="En stock"){const mt=ae(I,`products/${_e.id}/accounts`);for(const Xe of ne.accounts)await Ko(mt,{email:Xe.email,password:Xe.password,profile:Xe.profile||"",pin:Xe.pin||"",status:"available"})}oe({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:[{email:"",password:"",profile:"",pin:""}]}),n("inventario"),Le("Éxito","Producto subido exitosamente!")}catch(Pe){console.error("Error al subir el producto:",Pe),Le("Error",`Error al subir el producto: ${Pe.message}`)}},[ne,i,h,Le]),b=m.useCallback(async Pe=>{se("");try{const _e=Te(ae(I,"sales"),We("providerId","==",h),We("productName","==",Pe.name)),Xe=(await _t(_e)).docs.filter(pt=>pt.data().status==="completed"&&pt.data().accountDetails?.email).map(pt=>pt.data().accountDetails.email),gt=ae(I,`products/${Pe.id}/accounts`),Nt=(await _t(gt)).docs.filter(pt=>pt.data().status==="available").map(pt=>({email:pt.data().email||"",password:pt.data().password||"",profile:pt.data().profile||"",pin:pt.data().pin||""}));K({id:Pe.id,name:Pe.name||"",image:Pe.image||"",category:Pe.category||"Netflix",accountType:Pe.accountType||"Premium",status:Pe.status||"En stock",stock:Nt.length||Pe.stock||1,price:Pe.price||"",renewal:Pe.renewal||!1,renewalPrice:Pe.renewalPrice||"",duration:Pe.duration||"",providerPhone:Pe.providerPhone||"",details:Pe.details||"",terms:Pe.terms||"",providerId:Pe.providerId||h,accounts:Pe.status==="En stock"?Nt.length>0?Nt:Array(Math.max(Pe.stock||1,1)).fill({email:"",password:"",profile:"",pin:""}):[]}),L(!0)}catch(_e){console.error("Error al preparar edición del producto:",_e),se("Error al preparar edición del producto")}},[h]),w=m.useCallback(async()=>{if(se(""),!$e.name||!$e.price){se("Por favor complete todos los campos obligatorios");return}if($e.renewal&&!$e.renewalPrice){se("Por favor ingrese el precio de renovación");return}if($e.status==="En stock"&&$e.accounts.some(_e=>!_e.email||!_e.password)){se("Por favor complete todos los campos de las cuentas");return}try{const Pe=Z(I,"products",$e.id);if(await Go(Pe,{...$e,providerId:$e.providerId||h,availableAccounts:$e.status==="En stock"&&$e.accounts?.length||0},{merge:!0}),$e.status==="En stock"){const _e=ae(I,`products/${$e.id}/accounts`),mt=await _t(_e);for(const Xe of mt.docs)await Bi(Xe.ref);for(const Xe of $e.accounts)await Ko(_e,{email:Xe.email,password:Xe.password,profile:Xe.profile||"",pin:Xe.pin||"",status:"available"})}L(!1),Le("Éxito","Producto actualizado exitosamente!")}catch(Pe){console.error("Error al actualizar el producto:",Pe),se("Error al actualizar el producto")}},[$e,h,Le]),z=m.useCallback(async Pe=>{try{await Bi(Z(I,"products",Pe)),Le("Éxito","Producto eliminado exitosamente!")}catch(_e){console.error("Error al eliminar el producto:",_e),Le("Error","Error al eliminar el producto")}},[Le]),me=m.useCallback(async Pe=>{try{await Bi(Z(I,"sales",Pe)),Le("Éxito","Pedido eliminado exitosamente!")}catch(_e){console.error("Error al eliminar el pedido:",_e),Le("Error","Error al eliminar el pedido")}},[Le]),pe=m.useCallback(async()=>{try{const Pe=Ae.currentUser;if(Pe){const _e=Z(I,"users",Pe.uid);await Go(_e,{preferences:it.preferences,...it.password&&{password:it.password}},{merge:!0}),Le("Éxito","Configuración actualizada correctamente!")}}catch(Pe){console.error("Error al actualizar la configuración:",Pe),Le("Error","Error al actualizar la configuración")}},[it,Le]),je=m.useCallback(Pe=>{rt(""),o({...Pe,accountDetails:{email:Pe.accountDetails.email||"",password:Pe.accountDetails.password||"",profile:Pe.accountDetails.profile||"",pin:Pe.accountDetails.pin||""}}),Ve(!0)},[]),Be=m.useCallback(async()=>{if(rt(""),!q.accountDetails.email||!q.accountDetails.password){rt("Por favor complete todos los campos obligatorios de la cuenta");return}try{const Pe=Z(I,"sales",q.id);await da(Pe,{accountDetails:q.accountDetails,updatedAt:Ge()}),Ve(!1),Le("Éxito","Detalles de la cuenta actualizados exitosamente!")}catch(Pe){console.error("Error al actualizar los detalles de la cuenta:",Pe),rt("Error al actualizar los detalles de la cuenta")}},[q,Le]),Ee=m.useCallback(async Pe=>{try{const _e=Z(I,"sales",Pe);await da(_e,{status:"completed",updatedAt:Ge()}),Le("Éxito","Pedido activado exitosamente!")}catch(_e){console.error("Error al activar el pedido:",_e),Le("Error","Error al activar el pedido")}},[Le]);m.useEffect(()=>{const Pe=()=>{Et(window.scrollY>300)};return window.addEventListener("scroll",Pe),()=>window.removeEventListener("scroll",Pe)},[]);const xe=ye?0:S.reduce((Pe,_e)=>Pe+(_e.amount||0),0),dt=D.reduce((Pe,_e)=>Pe+(parseInt(_e.stock)||0),0),ht=m.useCallback(()=>N?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):H?e.jsxs("div",{className:`bg-${Qe==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${Qe==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsx(Qi,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:`text-xl font-bold ${Qe==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Error"}),e.jsx("p",{className:`text-base ${Qe==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:H}),e.jsx("button",{onClick:()=>U(""),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Aceptar"})]}):e.jsx("div",{className:`bg-${Qe==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${Qe==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:(()=>{switch(s){case"inicio":return e.jsx(yO,{username:i,products:D,orders:S,providerBalance:de,balanceLoading:ye,totalStock:dt,totalEarnings:xe,isAdmin:fe,email:l,setActiveSection:n,formatDate:et});case"inventario":return e.jsx(vO,{products:D,setActiveSection:n,handleEdit:b,handleDelete:z,getCategoryDisplayName:we,totalStock:dt});case"cuentas":return e.jsx(wO,{soldAccounts:Y,formatDate:et});case"subirProducto":return e.jsx(kO,{product:ne,setProduct:oe,handleChange:g,handleFileChange:A,handleStockChange:X,handleAccountFieldChange:le,handleSubmit:_,setActiveSection:n});case"ganancias":return e.jsx(NO,{orders:S,totalEarnings:xe,providerBalance:de,balanceLoading:ye,getCategoryDisplayName:we,formatDate:et});case"pedidos":return e.jsx(jO,{orders:S,searchQuery:ee,setSearchQuery:re,getCategoryDisplayName:we,formatDate:et,handleEditOrder:je,handleActivateOrder:Ee,handleDeleteOrder:me});case"configuracion":return e.jsx(CO,{accountDetails:it,handleAccountChange:E,handleUpdateAccount:pe});default:return e.jsxs("div",{className:`bg-${Qe==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${Qe==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsx(Qi,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:`text-xl font-bold ${Qe==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Sección no encontrada"}),e.jsx("p",{className:`text-base ${Qe==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>n("inicio"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Volver al inicio"})]})}})()}),[N,H,Qe,s,i,D,S,de,ye,dt,xe,fe,l,n,et,b,z,we,Y,ne,oe,g,A,X,le,_,ee,re,je,Ee,me,it,E,pe]);return e.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${Qe==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-50 to-gray-50 text-gray-900"} font-inter relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${Qe==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((Pe,_e)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},_e))})]}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${Qe==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r overflow-y-auto lg:shadow-md`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{ot("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${Qe==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${Qe==="dark"?"text-white":"text-gray-900"}`,children:i}),e.jsx("p",{className:`text-xs ${Qe==="dark"?"text-gray-400":"text-gray-600"}`,children:fe?"Admin":"Proveedor"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:pf},{id:"inventario",label:"Inventario",icon:hL},{id:"cuentas",label:"Cuentas Vendidas",icon:nc},{id:"pedidos",label:"Pedidos",icon:nc},{id:"ganancias",label:"Ganancias",icon:eo},{id:"subirProducto",label:"Subir Producto",icon:wL},{id:"configuracion",label:"Configuración",icon:Ft}].map(Pe=>e.jsxs("button",{onClick:()=>{n(Pe.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s===Pe.id?"bg-blue-100 text-blue-600 border border-blue-300":Qe==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s===Pe.id?"page":void 0,children:[e.jsx(Pe.icon,{className:"text-lg"}),e.jsx("span",{children:Pe.label})]},Pe.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{C(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${Qe==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsxs("header",{className:`${Qe==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md py-4 px-4 sm:px-6 lg:px-8 flex items-center justify-between shadow-md fixed top-0 left-0 right-0 z-50 lg:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"BlackStreaming logo",className:`h-10 w-10 rounded-full border ${Qe==="dark"?"border-gray-700/50":"border-gray-300"} shadow-sm lg:hidden`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-lg",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:ee,onChange:Pe=>re(Pe.target.value),className:`w-full py-2.5 px-5 ${Qe==="dark"?"bg-gray-800/50 border-gray-600/50 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-md`,"aria-label":"Search orders",onKeyDown:Pe=>Pe.key==="Enter"&&n("pedidos")}),e.jsx("button",{onClick:()=>n("pedidos"),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${Qe==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Search",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-4 relative",children:[e.jsx("button",{onClick:Ye,className:`p-2 rounded-full ${Qe==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Switch to ${Qe==="dark"?"light":"dark"} theme`,children:Qe==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),e.jsxs("button",{onClick:()=>It(!0),className:`p-2 rounded-full relative ${Qe==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Notifications (${St.length} new)`,children:[e.jsx(Bt,{size:20}),St.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:St.length})]}),e.jsx("button",{className:`lg:hidden p-2 rounded-full ${Qe==="dark"?"hover:bg-gray-700/50":"hover:bg-gray-100"} transition-all duration-300`,onClick:()=>t(!a),"aria-label":"Toggle mobile menu","aria-expanded":a,children:e.jsx(pp,{size:20,className:Qe==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:e.jsx("div",{className:"relative",children:e.jsxs("button",{className:`flex items-center space-x-2 ${Qe==="dark"?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-md transition-all duration-300`,"aria-label":"User menu",children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:i.charAt(0).toUpperCase()}),e.jsx("span",{className:`text-sm font-semibold ${Qe==="dark"?"text-gray-200":"text-gray-800"}`,children:i})]})})})]})]}),e.jsx(ue,{children:Tt&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>It(!1),role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 lg:max-w-lg ${Qe==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${Qe==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:Pe=>Pe.stopPropagation(),children:[e.jsx("button",{onClick:()=>It(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notifications",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-xl font-bold mb-4 ${Qe==="dark"?"text-white":"text-gray-900"}`,children:"Notificaciones"}),St.length>0?St.map(Pe=>e.jsxs("div",{className:`p-4 mb-2 rounded-md ${Qe==="dark"?"bg-gray-800/50":"bg-gray-100/80"} border-l-4 ${Qe==="dark"?"border-blue-500/50":"border-blue-300/50"}`,children:[e.jsx("h3",{className:`font-semibold ${Qe==="dark"?"text-gray-200":"text-gray-800"}`,children:Pe.title||"Nueva Notificación"}),e.jsx("p",{className:`text-sm ${Qe==="dark"?"text-gray-300":"text-gray-700"} mt-1`,children:Pe.message}),Pe.roles&&Pe.roles.length>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Roles: ",Pe.roles.join(", ")]}),Pe.timestamp&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:et(Pe.timestamp)})]},Pe.id)):e.jsx("p",{className:`text-center ${Qe==="dark"?"text-gray-400":"text-gray-600"} mt-4`,children:"No hay notificaciones."})]})})}),e.jsx("main",{className:"lg:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start",children:ht()}),e.jsxs("footer",{className:`${Qe==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md px-4 sm:px-6 lg:px-8 py-12 text-center relative z-10 lg:ml-64 max-w-6xl mx-auto rounded-2xl border ${Qe==="dark"?"border-gray-700/50":"border-gray-300"} mt-8 shadow-md`,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-4",children:"BlackStreaming"}),e.jsxs("p",{className:`text-base sm:text-lg ${Qe==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["Todos los derechos reservados. Desarrollado por"," ",e.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Saiph"}),"."]}),e.jsxs("div",{className:"flex justify-center space-x-6 sm:space-x-8 mb-6",children:[e.jsx("a",{href:"https://twitter.com",className:`${Qe==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Twitter",children:e.jsx(vr,{size:28})}),e.jsx("a",{href:"https://instagram.com",className:`${Qe==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Instagram",children:e.jsx(yr,{size:28})}),e.jsx("a",{href:"https://facebook.com",className:`${Qe==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Facebook",children:e.jsx(fr,{size:28})})]}),e.jsxs("div",{className:"flex justify-center space-x-4 sm:space-x-6",children:[e.jsx("a",{href:"#",className:`text-sm ${Qe==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Privacy Policy",children:"Política de Privacidad"}),e.jsx("a",{href:"#",className:`text-sm ${Qe==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Terms of Service",children:"Términos de Servicio"}),e.jsx("a",{href:"#",className:`text-sm ${Qe==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Contact Us",children:"Contáctanos"})]})]}),e.jsxs("p",{className:`text-sm ${Qe==="dark"?"text-gray-500":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Hecho con pasión."]})]}),e.jsx(ue,{children:Pt&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:ge,className:"fixed bottom-6 right-6 bg-blue-600/90 backdrop-blur-md p-3 rounded-full hover:bg-blue-700/95 shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 lg:bottom-8 lg:right-8","aria-label":"Back to top",children:e.jsx(Ir,{size:20})})}),e.jsx(fO,{isOpen:He.isOpen,title:He.title,message:He.message,onClose:Fe}),e.jsx(SO,{editModalOpen:V,setEditModalOpen:L,selectedProduct:$e,setSelectedProduct:K,editError:y,setEditError:se,handleFileChange:A,handleEditStockChange:ce,handleEditAccountFieldChange:P,handleUpdateProduct:w}),e.jsx($O,{editOrderModalOpen:Se,setEditOrderModalOpen:Ve,selectedOrder:q,handleOrderAccountChange:B,editOrderError:nt,setEditOrderError:rt,handleUpdateOrder:Be}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 lg:hidden",onClick:()=>t(!1),"aria-hidden":"true"})]})};d4.propTypes={};const PO=()=>{const[a,t]=m.useState(""),[s,n]=m.useState(""),[i,u]=m.useState(0),[l,p]=m.useState([]),[h,k]=m.useState([]),[S,$]=m.useState([]),[D,O]=m.useState([]),[Y,W]=m.useState([]),[N,G]=m.useState(0),[H,U]=m.useState({day:0,week:0,month:0,total:0}),[ne,oe]=m.useState(!0),[$e,K]=m.useState(null),[V,L]=m.useState("dark"),y=cr();m.useEffect(()=>{const re=hr($t,He=>{He?(n(He.email||"No especificado"),se(He.uid),oe(!1)):y("/login")});return()=>re()},[y]);const se=async re=>{try{const He=Z(I,"users",re),ut=await zt(He);if(ut.exists()){const it=ut.data();t(it.username||it.email.split("@")[0])}else K("Usuario no encontrado en la base de datos")}catch(He){console.error("Error al obtener el nombre de usuario:",He),K("Error al cargar datos del usuario")}},ee=re=>{const ut=re*5,it=ut*.25,Je=ut*.05;U({day:Je,week:it,month:ut,total:ut})};return m.useEffect(()=>{(async()=>{try{const Ne=await _t(ae(I,"users")),ye=Ne.size,J=Ne.docs.map(Re=>({id:Re.id,...Re.data()}));u(ye),p(J.slice(-5)),ee(ye);const de=Te(ae(I,"pendingRegistrations"),We("status","==","pending")),ve=await _t(de);k(ve.docs.map(Re=>({id:Re.id,...Re.data()})));const Se=Te(ae(I,"pendingTopUps"),We("status","==","pendiente")),Ve=await _t(Se);$(Ve.docs.map(Re=>({id:Re.id,...Re.data()})));const q=Te(ae(I,"withdrawals"),We("status","==","pending")),o=await _t(q);O(o.docs.map(Re=>({id:Re.id,...Re.data()})));const rt=(await _t(ae(I,"sales"))).docs.map(Re=>({id:Re.id,...Re.data()}));W(rt);const Qe=rt.reduce((Re,Pt)=>Re+(parseFloat(Pt.price)||0),0);G(Qe)}catch(Ne){console.error("Error al obtener datos:",Ne),K("Error al cargar datos")}})();const He=qe(ae(I,"users"),Ne=>{const ye=Ne.size,J=Ne.docs.map(de=>({id:de.id,...de.data()}));u(ye),p(J.slice(-5)),ee(ye)}),ut=qe(Te(ae(I,"pendingRegistrations"),We("status","==","pending")),Ne=>{k(Ne.docs.map(ye=>({id:ye.id,...ye.data()})))}),it=qe(Te(ae(I,"pendingTopUps"),We("status","==","pendiente")),Ne=>{$(Ne.docs.map(ye=>({id:ye.id,...ye.data()})))}),Je=qe(Te(ae(I,"withdrawals"),We("status","==","pending")),Ne=>{O(Ne.docs.map(ye=>({id:ye.id,...ye.data()})))}),fe=qe(ae(I,"sales"),Ne=>{const ye=Ne.docs.map(de=>({id:de.id,...de.data()}));W(ye);const J=ye.reduce((de,ve)=>de+(parseFloat(ve.price)||0),0);G(J)});return()=>{He(),ut(),it(),Je(),fe()}},[]),ne?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):$e?e.jsxs("div",{className:`bg-${V==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${V==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsx(Qi,{className:"mx-auto text-4xl text-blue-400 mb-4"}),e.jsx("h3",{className:`text-xl font-bold ${V==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Error"}),e.jsx("p",{className:`text-base ${V==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:$e}),e.jsx("button",{onClick:()=>K(null),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Aceptar"})]}):e.jsxs("div",{className:`bg-${V==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${V==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsxs("h2",{className:`text-2xl sm:text-3xl font-bold ${V==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Bienvenido a BlackStreaming,"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:a})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:`${V==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 border shadow-lg`,children:[e.jsxs("h3",{className:"text-lg font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-3 flex items-center",children:[e.jsx(Im,{className:"mr-2"})," Total Usuarios"]}),e.jsx("p",{className:`text-3xl font-bold ${V==="dark"?"text-white":"text-gray-900"}`,children:i}),e.jsx("button",{className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",onClick:()=>y("/usuarios"),children:"Ver usuarios"})]}),e.jsxs("div",{className:`${V==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 border shadow-lg`,children:[e.jsxs("h3",{className:"text-lg font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-3 flex items-center",children:[e.jsx(nc,{className:"mr-2"})," Total Ventas"]}),e.jsxs("p",{className:`text-3xl font-bold ${V==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",N.toFixed(2)]}),e.jsx("button",{className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",onClick:()=>y("/pedidos"),children:"Ver ventas"})]}),e.jsxs("div",{className:`${V==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 border shadow-lg`,children:[e.jsxs("h3",{className:"text-lg font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-3 flex items-center",children:[e.jsx(eo,{className:"mr-2"})," Ganancias del Mes"]}),e.jsxs("p",{className:`text-3xl font-bold ${V==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",H.month.toFixed(2)]}),e.jsx("p",{className:`text-sm ${V==="dark"?"text-gray-300":"text-gray-700"} mt-1`,children:"(5 soles por usuario)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`${V==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 shadow-lg border`,children:[e.jsx("h3",{className:`text-lg font-semibold ${V==="dark"?"text-white":"text-gray-900"} mb-3`,children:"Últimos Usuarios"}),l.length>0?l.map(re=>e.jsxs("div",{className:`border-b ${V==="dark"?"border-gray-600/50":"border-gray-300"} py-3 last:border-0 hover:bg-${V==="dark"?"gray-700/50":"gray-200/50"} transition-all duration-300 rounded-xl px-2`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:`font-medium ${V==="dark"?"text-white":"text-gray-900"}`,children:re.username||"Sin nombre"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${V==="dark"?"bg-blue-900/80 text-blue-400":"bg-blue-100/80 text-blue-600"}`,children:re.role||"usuario"})]}),e.jsx("p",{className:`text-sm ${V==="dark"?"text-gray-400":"text-gray-600"}`,children:re.email})]},re.id)):e.jsx("p",{className:`text-${V==="dark"?"gray-400":"gray-600"} py-2`,children:"No hay usuarios registrados"})]}),e.jsxs("div",{className:`${V==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 shadow-lg border`,children:[e.jsx("h3",{className:`text-lg font-semibold ${V==="dark"?"text-white":"text-gray-900"} mb-3`,children:"Solicitudes Pendientes"}),h.length>0?h.slice(0,3).map(re=>e.jsxs("div",{className:`border-b ${V==="dark"?"border-gray-600/50":"border-gray-300"} py-3 last:border-0 hover:bg-${V==="dark"?"gray-700/50":"gray-200/50"} transition-all duration-300 rounded-xl px-2`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:`font-medium ${V==="dark"?"text-white":"text-gray-900"}`,children:re.username||"Sin nombre"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${V==="dark"?"bg-purple-900/80 text-purple-400":"bg-purple-100/80 text-purple-600"}`,children:re.role||"usuario"})]}),e.jsx("p",{className:`text-sm ${V==="dark"?"text-gray-400":"text-gray-600"}`,children:re.email})]},re.id)):e.jsx("p",{className:`text-${V==="dark"?"gray-400":"gray-600"} py-2`,children:"No hay solicitudes pendientes"})]}),e.jsxs("div",{className:`${V==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 shadow-lg border`,children:[e.jsx("h3",{className:`text-lg font-semibold ${V==="dark"?"text-white":"text-gray-900"} mb-3`,children:"Retiros Pendientes"}),D.length>0?D.slice(0,3).map(re=>e.jsxs("div",{className:`border-b ${V==="dark"?"border-gray-600/50":"border-gray-300"} py-3 last:border-0 hover:bg-${V==="dark"?"gray-700/50":"gray-200/50"} transition-all duration-300 rounded-xl px-2`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:`font-medium ${V==="dark"?"text-white":"text-gray-900"}`,children:re.provider||"Sin proveedor"}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${V==="dark"?"bg-yellow-900/80 text-yellow-400":"bg-yellow-100/80 text-yellow-600"}`,children:["S/ ",(re.amount||0).toFixed(2)]})]}),e.jsxs("p",{className:`text-sm ${V==="dark"?"text-gray-400":"text-gray-600"}`,children:["Método: ",re.method||"No especificado"]})]},re.id)):e.jsx("p",{className:`text-${V==="dark"?"gray-400":"gray-600"} py-2`,children:"No hay retiros pendientes"})]})]})]})},EO=({notificationForm:a={message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}},setNotificationForm:t=()=>{},theme:s="dark"})=>{const[n,i]=m.useState(""),[u,l]=m.useState(""),[p,h]=m.useState(!1),k=a.roles||{user:!1,affiliate:!1,provider:!1,admin:!1},S=Object.values(k).some(D=>D),$=m.useCallback(async D=>{if(D.preventDefault(),!S){i("Selecciona al menos un rol para enviar la notificación");return}if(!a.message.trim()){i("El mensaje de la notificación no puede estar vacío");return}i(""),l(""),h(!0);try{await Ko(ae(I,"notifications"),{message:a.message.trim(),roles:{user:k.user,affiliate:k.affiliate,provider:k.provider,admin:k.admin},createdAt:Ge()}),t({message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}}),l("Notificación enviada exitosamente")}catch(O){i("Error al enviar la notificación. Por favor, intenta de nuevo."),console.error("Error sending notification:",O)}finally{h(!1)}},[a,k,t]);return e.jsxs("div",{className:`bg-${s==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-2xl mx-auto border ${s==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${s==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Enviar Notificación -"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),e.jsxs(ue,{children:[n&&e.jsx(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${s==="dark"?"bg-red-900/50 border-red-600/50":"bg-red-100/50 border-red-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-red-600 border-l-4`,role:"alert",children:n}),u&&e.jsx(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${s==="dark"?"bg-green-900/50 border-green-600/50":"bg-green-100/50 border-green-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-green-600 border-l-4`,role:"alert",children:u})]}),e.jsxs("form",{onSubmit:$,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Mensaje de la Notificación"}),e.jsx("textarea",{value:a.message||"",onChange:D=>t({...a,message:D.target.value}),className:`w-full px-4 py-2 rounded-xl ${s==="dark"?"bg-gray-800/50 text-gray-200 border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-800 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all resize-y`,rows:"5",placeholder:"Escribe el mensaje para los usuarios...",required:!0,"aria-label":"Mensaje de la notificación"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Enviar a los siguientes roles"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["user","affiliate","provider","admin"].map(D=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:k[D]||!1,onChange:O=>t({...a,roles:{...k,[D]:O.target.checked}}),className:`h-4 w-4 ${s==="dark"?"text-blue-400 focus:ring-blue-400 border-gray-600":"text-blue-600 focus:ring-blue-600 border-gray-300"} rounded`,"aria-label":`Enviar a rol ${D}`}),e.jsx("span",{className:`text-sm capitalize ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:D})]},D))})]}),e.jsx(v.button,{type:"submit",disabled:p||!S,className:`w-full py-3 px-4 ${p||!S?s==="dark"?"bg-blue-800 cursor-not-allowed":"bg-blue-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"} text-white rounded-xl font-medium transition-all duration-300`,"aria-label":"Enviar notificación",whileHover:{scale:p||!S?1:1.05},whileTap:{scale:p||!S?1:.95},children:p?e.jsx(v.div,{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}):"Enviar Notificación"}),!S&&e.jsx("p",{className:`text-sm text-center ${s==="dark"?"text-blue-400":"text-blue-600"}`,children:"Selecciona al menos un rol para enviar la notificación"})]})]})},u4=[{value:"user",label:"Usuario"},{value:"affiliate",label:"Afiliador"},{value:"provider",label:"Proveedor"},{value:"admin",label:"Administrador"}],IO=a=>{const t=u4.find(s=>s.value===a);return t?t.label:a},m4=({isOpen:a,user:t,onClose:s,onSave:n,loading:i,theme:u})=>{const[l,p]=m.useState(t?.balance||0),[h,k]=m.useState("");m.useEffect(()=>{p(t?.balance||0),k("")},[t]);const S=$=>{if($.preventDefault(),k(""),isNaN(l)||l<0){k("Por favor, ingrese un saldo válido (número no negativo).");return}n(t.id,parseFloat(l))};return!a||!t?null:e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:`bg-${u==="dark"?"gray-900/90":"white"} backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border ${u==="dark"?"border-gray-800/50":"border-gray-300"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:`text-xl font-bold ${u==="dark"?"text-white":"text-gray-900"}`,children:["Editar Saldo de ",t.username]}),e.jsx("button",{onClick:s,className:`${u==="dark"?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,"aria-label":"Cerrar modal",children:"✕"})]}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block text-sm font-medium ${u==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Nuevo Saldo (S/)"}),e.jsx("input",{type:"number",value:l,onChange:$=>p($.target.value),className:`w-full px-4 py-2 rounded-xl ${u==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,min:"0",step:"0.01",required:!0,"aria-label":"Nuevo saldo"}),h&&e.jsx("p",{className:`text-sm mt-2 ${u==="dark"?"text-blue-400":"text-blue-600"}`,children:h})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:`px-4 py-2 ${u==="dark"?"bg-gray-600 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"} rounded-xl transition-all duration-300`,"aria-label":"Cancelar",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:i,className:`px-4 py-2 ${i?u==="dark"?"bg-blue-800 cursor-not-allowed":"bg-blue-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"} rounded-xl transition-all duration-300`,"aria-label":"Guardar saldo",children:i?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar"})]})]})]})})})};m4.propTypes={isOpen:F.bool.isRequired,user:F.object,onClose:F.func.isRequired,onSave:F.func.isRequired,loading:F.bool,theme:F.oneOf(["dark","light"])};const p4=({isOpen:a,user:t,onClose:s,onSave:n,loading:i,theme:u})=>{const[l,p]=m.useState(t?.role||"user");return m.useEffect(()=>{p(t?.role||"user")},[t]),!a||!t?null:e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:`bg-${u==="dark"?"gray-900/90":"white"} backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border ${u==="dark"?"border-gray-800/50":"border-gray-300"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:`text-xl font-bold ${u==="dark"?"text-white":"text-gray-900"}`,children:["Cambiar Rol de ",t.username]}),e.jsx("button",{onClick:s,className:`${u==="dark"?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,"aria-label":"Cerrar modal",children:"✕"})]}),e.jsxs("form",{onSubmit:h=>{h.preventDefault(),n(t.id,l)},children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block text-sm font-medium ${u==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Nuevo Rol"}),e.jsx("select",{value:l,onChange:h=>p(h.target.value),className:`w-full px-4 py-2 rounded-xl ${u==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,"aria-label":"Seleccionar nuevo rol",children:u4.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:`px-4 py-2 ${u==="dark"?"bg-gray-600 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"} rounded-xl transition-all duration-300`,"aria-label":"Cancelar",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:i,className:`px-4 py-2 ${i?u==="dark"?"bg-blue-800 cursor-not-allowed":"bg-blue-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"} rounded-xl transition-all duration-300`,"aria-label":"Guardar rol",children:i?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar"})]})]})]})})})};p4.propTypes={isOpen:F.bool.isRequired,user:F.object,onClose:F.func.isRequired,onSave:F.func.isRequired,loading:F.bool,theme:F.oneOf(["dark","light"])};const h4=({theme:a="dark"})=>{const[t,s]=m.useState([]),[n,i]=m.useState(""),[u,l]=m.useState({isOpen:!1,user:null}),[p,h]=m.useState({isOpen:!1,user:null}),[k,S]=m.useState(!0),[$,D]=m.useState({}),[O,Y]=m.useState(null);m.useEffect(()=>{(async()=>{S(!0);try{const V=await _t(ae(I,"users")),L=await Promise.all(V.docs.map(async y=>{const se={id:y.id,...y.data()},ee=Te(ae(I,"sales"),We("userId","==",y.id)),re=await _t(ee);return{...se,orderCount:re.size}}));s(L)}catch(V){Y("No se pudieron obtener los usuarios: "+V.message)}S(!1)})()},[]);const W=K=>l({isOpen:!0,user:K}),N=()=>l({isOpen:!1,user:null}),G=K=>h({isOpen:!0,user:K}),H=()=>h({isOpen:!1,user:null}),U=async(K,V)=>{D(L=>({...L,[`balance_${K}`]:!0}));try{const L=Z(I,"users",K);await da(L,{balance:V}),s(y=>y.map(se=>se.id===K?{...se,balance:V}:se)),N()}catch(L){Y("Error al actualizar saldo: "+L.message)}D(L=>({...L,[`balance_${K}`]:!1}))},ne=async(K,V)=>{D(L=>({...L,[`role_${K}`]:!0}));try{const L=Z(I,"users",K);await da(L,{role:V}),s(y=>y.map(se=>se.id===K?{...se,role:V}:se)),H()}catch(L){Y("Error al actualizar rol: "+L.message)}D(L=>({...L,[`role_${K}`]:!1}))},oe=async(K,V)=>{D(L=>({...L,[`status_${K}`]:!0}));try{const L=Z(I,"users",K),y=V==="suspended"?"active":"suspended";await da(L,{status:y}),s(se=>se.map(ee=>ee.id===K?{...ee,status:y}:ee))}catch(L){Y("Error al cambiar estado: "+L.message)}D(L=>({...L,[`status_${K}`]:!1}))},$e=async K=>{D(V=>({...V,[`delete_${K}`]:!0}));try{const V=Z(I,"users",K);await Bi(V),s(L=>L.filter(y=>y.id!==K))}catch(V){Y("Error al eliminar usuario: "+V.message)}D(V=>({...V,[`delete_${K}`]:!1}))};return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:`bg-${a==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md border ${a==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${a==="dark"?"text-white":"text-gray-900"}`,children:["Lista de"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Usuarios"})," ","(",t.length,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar usuarios...",className:`px-4 py-2 rounded-xl ${a==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400 placeholder-gray-500":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600 placeholder-gray-400"} focus:ring-2 transition-all text-sm`,value:n,onChange:K=>i(K.target.value),"aria-label":"Buscar usuarios"}),e.jsx(Ot,{className:`absolute right-3 top-2.5 ${a==="dark"?"text-blue-400":"text-blue-600"}`})]})]}),k?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx("div",{className:`animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 ${a==="dark"?"border-blue-500":"border-blue-600"}`})}):O?e.jsx("div",{className:`text-center py-4 ${a==="dark"?"text-blue-400":"text-blue-600"}`,children:O}):t.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:`${a==="dark"?"bg-gray-800/50":"bg-gray-100"} backdrop-blur-sm`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${a==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(oc,{})," Usuario"]})}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${a==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Od,{})," Email"]})}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${a==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Im,{})," Rol"]})}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${a==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(eo,{})," Saldo"]})}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${a==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Órdenes"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${a==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Acciones"})]})}),e.jsx("tbody",{className:`${a==="dark"?"bg-gray-800/50":"bg-white"} divide-y divide-gray-600/50`,children:t.filter(K=>(K.username||"").toLowerCase().includes(n.toLowerCase())||(K.email||"").toLowerCase().includes(n.toLowerCase())).map(K=>e.jsxs("tr",{className:`${K.status==="suspended"?a==="dark"?"bg-red-900/20":"bg-red-100/50":""} hover:bg-${a==="dark"?"gray-700/50":"gray-100"} transition-all duration-300`,children:[e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${a==="dark"?"text-white":"text-gray-900"}`,children:K.username||"Sin nombre"}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${a==="dark"?"text-gray-300":"text-gray-600"}`,children:K.email}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${a==="dark"?"bg-blue-900/80 text-blue-400":"bg-blue-100/80 text-blue-600"}`,children:IO(K.role)}),e.jsx("button",{onClick:()=>G(K),disabled:$[`role_${K.id}`],className:`ml-2 p-1 ${a==="dark"?"bg-blue-700 hover:bg-blue-800 text-blue-200 disabled:bg-blue-900":"bg-blue-500 hover:bg-blue-600 text-white disabled:bg-blue-300"} rounded-xl transition-all duration-300`,title:"Editar Rol","aria-label":`Editar rol de ${K.username}`,children:e.jsx(UN,{size:14})})]}),e.jsxs("td",{className:`px-4 py-4 whitespace-nowrap ${a==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",(K.balance||0).toFixed(2)]}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${a==="dark"?"text-white":"text-gray-900"}`,children:K.orderCount||0}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap flex space-x-2",children:[e.jsx("button",{onClick:()=>W(K),disabled:$[`balance_${K.id}`],className:`p-2 ${a==="dark"?"bg-blue-600 hover:bg-blue-700 text-white disabled:bg-blue-800":"bg-blue-500 hover:bg-blue-600 text-white disabled:bg-blue-300"} rounded-xl transition-all duration-300`,title:"Editar Saldo","aria-label":`Editar saldo de ${K.username}`,children:e.jsx(UN,{size:16})}),e.jsx("button",{onClick:()=>oe(K.id,K.status),disabled:$[`status_${K.id}`],className:`p-2 ${K.status==="suspended"?a==="dark"?"bg-green-600 hover:bg-green-700 text-white disabled:bg-green-800":"bg-green-500 hover:bg-green-600 text-white disabled:bg-green-300":a==="dark"?"bg-yellow-600 hover:bg-yellow-700 text-white disabled:bg-yellow-800":"bg-yellow-500 hover:bg-yellow-600 text-white disabled:bg-yellow-300"} rounded-xl transition-all duration-300`,title:K.status==="suspended"?"Activar Cuenta":"Suspender Cuenta","aria-label":K.status==="suspended"?`Activar cuenta de ${K.username}`:`Suspender cuenta de ${K.username}`,children:K.status==="suspended"?e.jsx(xL,{size:16}):e.jsx(pL,{size:16})}),e.jsx("button",{onClick:()=>$e(K.id),disabled:$[`delete_${K.id}`],className:`p-2 ${a==="dark"?"bg-red-600 hover:bg-red-700 text-white disabled:bg-red-800":"bg-red-500 hover:bg-red-600 text-white disabled:bg-red-300"} rounded-xl transition-all duration-300`,title:"Eliminar Cuenta","aria-label":`Eliminar cuenta de ${K.username}`,children:e.jsx(xf,{size:16})})]})]},K.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Im,{className:`mx-auto text-4xl ${a==="dark"?"text-blue-400":"text-blue-600"} mb-3`}),e.jsx("p",{className:`${a==="dark"?"text-gray-300":"text-gray-600"}`,children:"No hay usuarios registrados"})]})]}),e.jsx(m4,{isOpen:u.isOpen,user:u.user,onClose:N,onSave:U,loading:$[`balance_${u.user?.id}`],theme:a}),e.jsx(p4,{isOpen:p.isOpen,user:p.user,onClose:H,onSave:ne,loading:$[`role_${p.user?.id}`],theme:a})]})};h4.propTypes={theme:F.oneOf(["dark","light"])};const x4=({isOpen:a,message:t,title:s,onClose:n})=>a?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:s}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(ke,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:n,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null;x4.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,title:F.string.isRequired,onClose:F.func.isRequired};const g4=({formatDate:a=s=>{if(!s)return"No especificada";try{const n=s.toDate?s.toDate():new Date(s);return isNaN(n.getTime())?"Fecha inválida":n.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},theme:t="dark"})=>{const[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState({}),[h,k]=m.useState({isOpen:!1,message:"",title:""}),S=(Y,W)=>{k({isOpen:!0,title:Y,message:W})},$=()=>{k({isOpen:!1,message:"",title:""})};m.useEffect(()=>{const Y=qe(Te(ae(I,"pendingTopUps"),We("status","==","pendiente")),N=>{n(N.docs.map(G=>({id:G.id,...G.data()})))}),W=qe(ae(I,"topUpsHistory"),N=>{u(N.docs.map(G=>({id:G.id,...G.data()})))});return()=>{Y(),W()}},[]);const D=async Y=>{try{p(H=>({...H,[Y]:!0}));const W=Z(I,"pendingTopUps",Y),N=s.find(H=>H.id===Y);if(!N?.userId)throw new Error("Usuario no encontrado para la recarga");await da(W,{status:"aprobado",updatedAt:Ge()});const G=Z(I,"users",N.userId);await da(G,{balance:Gt(N.amount||0)}),await Go(Z(I,"topUpsHistory",Y),{...N,status:"aprobado",updatedAt:Ge()}),S("Éxito","Recarga aprobada exitosamente")}catch(W){console.error("Error al aprobar recarga:",W),S("Error",W.message||"Error al aprobar la recarga")}finally{p(W=>({...W,[Y]:!1}))}},O=async Y=>{try{p(G=>({...G,[Y]:!0}));const W=Z(I,"pendingTopUps",Y);await da(W,{status:"rechazado",updatedAt:Ge()});const N=s.find(G=>G.id===Y);await Go(Z(I,"topUpsHistory",Y),{...N,status:"rechazado",updatedAt:Ge()}),S("Éxito","Recarga rechazada exitosamente")}catch(W){console.error("Error al rechazar recarga:",W),S("Error",W.message||"Error al rechazar la recarga")}finally{p(W=>({...W,[Y]:!1}))}};return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:`bg-${t==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md border ${t==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Recargas"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Pendientes - BlackStreaming"})]}),Array.isArray(s)&&s.length>0?e.jsx("div",{className:"space-y-4",children:s.map(Y=>e.jsxs("div",{className:`border ${t==="dark"?"border-gray-600/50":"border-gray-300"} rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300`,children:[e.jsxs("div",{className:`${t==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm px-4 py-3 border-b ${t==="dark"?"border-gray-600/50":"border-gray-300"} flex justify-between items-center`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 ${t==="dark"?"bg-blue-900/80":"bg-blue-100/80"} rounded-full flex items-center justify-center ${t==="dark"?"text-blue-400":"text-blue-600"}`,children:e.jsx(eo,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-semibold ${t==="dark"?"text-white":"text-gray-900"}`,children:Y.username||"Sin nombre"}),e.jsxs("p",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:["Solicitado: ",a(Y.requestedAt)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",(Y.amount||0).toFixed(2)]})})]}),e.jsx("div",{className:`p-4 ${t==="dark"?"bg-gray-700/50":"bg-gray-50"} backdrop-blur-sm`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>D(Y.id),disabled:l[Y.id],className:`flex-1 ${t==="dark"?"bg-green-600 hover:bg-green-700 disabled:bg-green-800":"bg-green-500 hover:bg-green-600 disabled:bg-green-300"} text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300`,"aria-label":`Aprobar recarga de ${Y.username}`,children:l[Y.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(gL,{size:18})," Aprobar Recarga"]})}),e.jsx("button",{onClick:()=>O(Y.id),disabled:l[Y.id],className:`flex-1 ${t==="dark"?"bg-red-600 hover:bg-red-700 disabled:bg-red-800":"bg-red-500 hover:bg-red-600 disabled:bg-red-300"} text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300`,"aria-label":`Rechazar recarga de ${Y.username}`,children:l[Y.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{size:18})," Rechazar Recarga"]})})]})})]},Y.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(eo,{className:`mx-auto text-4xl ${t==="dark"?"text-blue-400":"text-blue-600"} mb-3`}),e.jsx("h4",{className:`text-lg font-medium ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"No hay recargas pendientes"}),e.jsx("p",{className:`${t==="dark"?"text-gray-400":"text-gray-500"}`,children:"Todas las solicitudes han sido procesadas"})]})]}),e.jsxs("div",{className:`bg-${t==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md border ${t==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"} mb-4`,children:["Historial de"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Recargas - BlackStreaming"})]}),Array.isArray(i)&&i.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:`${t==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Usuario"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Monto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Estado"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Fecha"})]})}),e.jsx("tbody",{className:`${t==="dark"?"bg-gray-800/50":"bg-white"} divide-y divide-gray-600/50`,children:i.map(Y=>e.jsxs("tr",{className:`hover:bg-${t==="dark"?"gray-700/50":"gray-100"} transition-all duration-300`,children:[e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${t==="dark"?"text-white":"text-gray-900"}`,children:Y.username||"Sin nombre"}),e.jsxs("td",{className:`px-4 py-4 whitespace-nowrap ${t==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",(Y.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Y.status==="aprobado"?t==="dark"?"bg-green-900/80 text-green-400":"bg-green-100/80 text-green-600":t==="dark"?"bg-red-900/80 text-red-400":"bg-red-100/80 text-red-600"}`,children:Y.status||"Desconocido"})}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:a(Y.updatedAt)})]},Y.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(eo,{className:`mx-auto text-4xl ${t==="dark"?"text-blue-400":"text-blue-600"} mb-3`}),e.jsx("p",{className:`${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"No hay historial de recargas"})]})]}),e.jsx(x4,{isOpen:h.isOpen,title:h.title,message:h.message,onClose:$})]})};g4.propTypes={formatDate:F.func,theme:F.oneOf(["dark","light"])};const DO=({withdrawals:a,formatDate:t,actionLoading:s,setActionLoading:n,showNotificationModal:i})=>{const u=async(l,p)=>{try{n(k=>({...k,[l]:!0}));const h=Z(I,"withdrawals",l);await da(h,{status:p==="approve"?"completed":"rejected",updatedAt:Ge()}),i("Éxito",`Retiro ${p==="approve"?"aprobado":"rechazado"} exitosamente`)}catch(h){i("Error",h.message||`Error al ${p==="approve"?"aprobar":"rechazar"} el retiro`)}finally{n(h=>({...h,[l]:!1}))}};return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Retiros ",e.jsx("span",{className:"text-red-400",children:"Pendientes"})]}),a.length===0?e.jsxs("div",{className:"text-center text-gray-300 py-8",children:[e.jsx(Xn,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("p",{children:"No hay retiros pendientes"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-600/50",children:[e.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Usuario"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Monto"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Fecha"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Acciones"})]})}),e.jsx("tbody",{children:a.map(l=>e.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30 transition-all duration-300",children:[e.jsx("td",{className:"py-3 px-4",children:l.userEmail||"No especificado"}),e.jsxs("td",{className:"py-3 px-4",children:["S/ ",l.amount?.toFixed(2)||"0.00"]}),e.jsx("td",{className:"py-3 px-4",children:t(l.createdAt)}),e.jsxs("td",{className:"py-3 px-4 flex space-x-2",children:[e.jsxs("button",{onClick:()=>u(l.id,"approve"),disabled:s[l.id],className:`px-3 py-1 rounded-xl text-white flex items-center space-x-1 transition-all duration-300 ${s[l.id]?"bg-gray-600 cursor-not-allowed":"bg-green-500 hover:bg-green-600"}`,children:[e.jsx(oO,{}),e.jsx("span",{children:"Aprobar"})]}),e.jsxs("button",{onClick:()=>u(l.id,"reject"),disabled:s[l.id],className:`px-3 py-1 rounded-xl text-white flex items-center space-x-1 transition-all duration-300 ${s[l.id]?"bg-gray-600 cursor-not-allowed":"bg-red-500 hover:bg-red-600"}`,children:[e.jsx(Ts,{}),e.jsx("span",{children:"Rechazar"})]})]})]},l.id))})]})})]})},b4=({sales:a=[],totalSales:t=0,formatDate:s=u=>"No especificada",getOrderStatus:n=()=>"Desconocido",theme:i="dark"})=>{const[u,l]=m.useState({}),[p,h]=m.useState(null),k=async S=>{l($=>({...$,[`delete_${S}`]:!0}));try{const $=Z(I,"sales",S);await Bi($),window.dispatchEvent(new CustomEvent("saleDeleted",{detail:{saleId:S}}))}catch($){h("Error al eliminar pedido: "+$.message)}l($=>({...$,[`delete_${S}`]:!1}))};return e.jsxs("div",{className:`bg-${i==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${i==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${i==="dark"?"text-white":"text-gray-900"} mb-4`,children:["Ventas"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"General - BlackStreaming"})]}),e.jsxs("div",{className:`${i==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-6 text-center mb-6 border ${i==="dark"?"border-gray-600/50":"border-gray-300"}`,children:[e.jsx("h4",{className:`text-lg font-semibold ${i==="dark"?"text-blue-400":"text-blue-600"} mb-2`,children:"Total Ventas"}),e.jsxs("p",{className:`text-3xl font-bold ${i==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",t.toFixed(2)]}),e.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-300":"text-gray-600"} mt-2`,children:"Suma de todos los pedidos realizados"})]}),e.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${i==="dark"?"text-white":"text-gray-900"} mb-4`,children:["Historial de"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Pedidos - BlackStreaming"})]}),p&&e.jsx("div",{className:`text-center py-4 ${i==="dark"?"text-blue-400":"text-blue-600"}`,children:p}),a.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:`${i==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Nombre del Producto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Precio"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Proveedor"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Usuario Comprador"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Fecha"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Estado"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Acciones"})]})}),e.jsx("tbody",{className:`${i==="dark"?"bg-gray-800/50":"bg-white"} divide-y divide-gray-600/50`,children:a.map(S=>e.jsxs("tr",{className:`hover:bg-${i==="dark"?"gray-700/50":"gray-100"} transition-all duration-300`,children:[e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${i==="dark"?"text-white":"text-gray-900"}`,children:S.productName||"Sin nombre"}),e.jsxs("td",{className:`px-4 py-4 whitespace-nowrap ${i==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",(S.price||0).toFixed(2)]}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:S.provider||"Sin proveedor"}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:S.buyer||"Sin comprador"}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:s(S.createdAt)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${n(S)==="Pendiente"?i==="dark"?"bg-yellow-900/80 text-yellow-400":"bg-yellow-100/80 text-yellow-600":n(S)==="Activo"?i==="dark"?"bg-green-900/80 text-green-400":"bg-green-100/80 text-green-600":i==="dark"?"bg-red-900/80 text-red-400":"bg-red-100/80 text-red-600"}`,children:n(S)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>k(S.id),disabled:u[`delete_${S.id}`],className:`p-2 ${i==="dark"?"bg-red-600 hover:bg-red-700 text-white disabled:bg-red-800":"bg-red-500 hover:bg-red-600 text-white disabled:bg-red-300"} rounded-xl transition-all duration-300`,title:"Eliminar Pedido","aria-label":`Eliminar pedido ${S.productName||"sin nombre"}`,children:u[`delete_${S.id}`]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsx(xf,{size:16})})})]},S.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(nc,{className:`mx-auto text-4xl ${i==="dark"?"text-blue-400":"text-blue-600"} mb-3`}),e.jsx("p",{className:`${i==="dark"?"text-gray-300":"text-gray-600"}`,children:"No hay pedidos registrados"})]})]})};b4.propTypes={sales:F.array,totalSales:F.number,formatDate:F.func,getOrderStatus:F.func,theme:F.oneOf(["dark","light"])};const f4=({earnings:a={day:0,week:0,month:0,total:0},totalUsers:t=0,theme:s="dark"})=>e.jsxs("div",{className:`bg-${s==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${s==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${s==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Ganancias -"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:`${s==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${s==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[e.jsxs("h4",{className:`text-lg font-semibold ${s==="dark"?"text-blue-400":"text-blue-600"} mb-2 flex items-center`,children:[e.jsx(ld,{className:"mr-2","aria-hidden":"true"})," Ganancias Diarias"]}),e.jsxs("p",{className:`text-2xl font-bold ${s==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancias diarias",children:["S/ ",(a.day||0).toFixed(2)]}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Estimado por día"})]}),e.jsxs("div",{className:`${s==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${s==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[e.jsxs("h4",{className:`text-lg font-semibold ${s==="dark"?"text-blue-400":"text-blue-600"} mb-2 flex items-center`,children:[e.jsx(ld,{className:"mr-2","aria-hidden":"true"})," Ganancias Semanales"]}),e.jsxs("p",{className:`text-2xl font-bold ${s==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancias semanales",children:["S/ ",(a.week||0).toFixed(2)]}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Estimado por semana"})]}),e.jsxs("div",{className:`${s==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${s==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[e.jsxs("h4",{className:`text-lg font-semibold ${s==="dark"?"text-blue-400":"text-blue-600"} mb-2 flex items-center`,children:[e.jsx(ld,{className:"mr-2","aria-hidden":"true"})," Ganancias Mensuales"]}),e.jsxs("p",{className:`text-2xl font-bold ${s==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancias mensuales",children:["S/ ",(a.month||0).toFixed(2)]}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Estimado por mes"})]}),e.jsxs("div",{className:`${s==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${s==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[e.jsxs("h4",{className:`text-lg font-semibold ${s==="dark"?"text-blue-400":"text-blue-600"} mb-2 flex items-center`,children:[e.jsx(ld,{className:"mr-2","aria-hidden":"true"})," Ganancias Totales"]}),e.jsxs("p",{className:`text-2xl font-bold ${s==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancias totales",children:["S/ ",(a.total||0).toFixed(2)]}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Total acumulado"})]})]}),e.jsxs("div",{className:`${s==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${s==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[e.jsx("h4",{className:`text-lg font-semibold ${s==="dark"?"text-blue-400":"text-blue-600"} mb-2`,children:"Resumen"}),e.jsxs("p",{className:`${s==="dark"?"text-gray-300":"text-gray-600"}`,children:["Total de usuarios registrados:"," ",e.jsx("span",{className:`font-medium ${s==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Total de usuarios registrados",children:t})]}),e.jsxs("p",{className:`${s==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:["Ganancia por usuario:"," ",e.jsx("span",{className:`font-medium ${s==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancia por usuario",children:"S/ 5.00"})]}),e.jsx("p",{className:`${s==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Las ganancias se calculan asumiendo S/ 5.00 por cada usuario registrado. Las estimaciones diarias y semanales son proporciones del total (5% y 25%, respectivamente)."})]})]});f4.propTypes={earnings:F.shape({day:F.number,week:F.number,month:F.number,total:F.number}),totalUsers:F.number,theme:F.oneOf(["dark","light"])};const y4=({userName:a="",setUserName:t=()=>{},email:s="",handleSaveChanges:n=()=>{},handleLogout:i=()=>{},actionLoading:u={},theme:l="dark"})=>e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-2xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${l==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Configuración -"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),e.jsxs("form",{onSubmit:n,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-2 flex items-center`,children:[e.jsx(oc,{className:`mr-2 ${l==="dark"?"text-blue-400":"text-blue-600"}`,"aria-hidden":"true"})," ","Nombre de usuario"]}),e.jsx("input",{type:"text",value:a,onChange:p=>t(p.target.value),className:`w-full px-4 py-2 rounded-xl ${l==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,placeholder:"Ingresa tu nombre de usuario",required:!0,"aria-label":"Nombre de usuario"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-2 flex items-center`,children:[e.jsx(Od,{className:`mr-2 ${l==="dark"?"text-blue-400":"text-blue-600"}`,"aria-hidden":"true"})," ","Correo electrónico"]}),e.jsx("input",{type:"email",value:s,disabled:!0,className:`w-full px-4 py-2 rounded-xl ${l==="dark"?"bg-gray-700/50 text-gray-400 border-gray-600/50":"bg-gray-100 text-gray-500 border-gray-300"} cursor-not-allowed`,"aria-label":"Correo electrónico (solo lectura)"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-500"} mt-1`,children:"El correo no puede ser modificado."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-2 flex items-center`,children:[e.jsx(hf,{className:`mr-2 ${l==="dark"?"text-blue-400":"text-blue-600"}`,"aria-hidden":"true"})," ","Nueva contraseña (opcional)"]}),e.jsx("input",{type:"password",name:"password",className:`w-full px-4 py-2 rounded-xl ${l==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,placeholder:"Ingresa una nueva contraseña","aria-label":"Nueva contraseña"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-500"} mt-1`,children:"Mínimo 6 caracteres. Déjalo en blanco para no cambiarla."})]}),e.jsx("button",{type:"submit",disabled:u.config,className:`w-full py-3 px-4 ${l==="dark"?"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-800":"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300"} text-white rounded-xl font-medium transition-all duration-300`,"aria-label":"Guardar cambios",children:u.config?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar Cambios"})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:i,className:`w-full py-3 px-4 ${l==="dark"?"bg-red-600 hover:bg-red-700 disabled:bg-red-800":"bg-red-500 hover:bg-red-600 disabled:bg-red-300"} text-white rounded-xl font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Cerrar sesión",children:[e.jsx(bt,{size:18})," Cerrar Sesión"]})})]});y4.propTypes={userName:F.string,setUserName:F.func,email:F.string,handleSaveChanges:F.func,handleLogout:F.func,actionLoading:F.object,theme:F.oneOf(["dark","light"])};const v4=({isOpen:a,message:t,title:s,onClose:n,theme:i="dark"})=>a?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:`bg-${i==="dark"?"gray-900/90":"white"} backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border ${i==="dark"?"border-gray-800/50":"border-gray-300"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:`text-xl font-bold ${i==="dark"?"text-white":"text-gray-900"}`,children:[s||"Notificación"," -"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),e.jsx("button",{onClick:n,className:`${i==="dark"?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,"aria-label":"Cerrar notificación",children:e.jsx(ke,{size:20})})]}),e.jsx("p",{className:`mb-6 ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:t||"No se proporcionó ningún mensaje."}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:n,className:`px-4 py-2 ${i==="dark"?"bg-blue-500 hover:bg-blue-600 text-white":"bg-blue-600 hover:bg-blue-700 text-white"} rounded-xl transition-all duration-300`,"aria-label":"Aceptar notificación",children:"Aceptar"})})]})})}):null;v4.propTypes={isOpen:F.bool.isRequired,message:F.string,title:F.string,onClose:F.func.isRequired,theme:F.oneOf(["dark","light"])};const _O=({isOpen:a,user:t,onClose:s,onSave:n})=>{const[i,u]=m.useState(t?.balance||0),[l,p]=m.useState(""),h=k=>{if(k.preventDefault(),p(""),isNaN(i)||i<0){p("Por favor, ingrese un saldo válido (número no negativo).");return}n(t.id,parseFloat(i))};return a?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:["Editar Saldo de ",t.username]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(Ts,{size:20})})]}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nuevo Saldo (S/)"}),e.jsx("input",{type:"number",value:i,onChange:k=>u(k.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"0",step:"0.01",required:!0}),l&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:l})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},w4=({theme:a,products:t,loadingProducts:s,searchQuery:n,setSearchQuery:i,handleDeleteProduct:u})=>{const l=a==="dark",p=t.filter(h=>h.name?.toLowerCase().includes(n.toLowerCase())||h.category?.toLowerCase().includes(n.toLowerCase()));return s?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsxs(v.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-6xl mx-auto border ${l?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[e.jsx("h3",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${l?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Gestión de Productos"}),e.jsx("div",{className:"relative w-full sm:w-64 mt-4 sm:mt-0",children:e.jsx("input",{type:"text",placeholder:"Buscar productos...",value:n,onChange:h=>i(h.target.value),className:`w-full px-3 py-2 rounded-xl ${l?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300 text-sm placeholder-gray-500`,"aria-label":"Search products"})})]}),p.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:`backdrop-blur-sm ${l?"bg-gray-900/80":"bg-gray-200/80"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${l?"text-gray-300":"text-gray-700"}`,children:"Imagen"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${l?"text-gray-300":"text-gray-700"}`,children:"Nombre"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${l?"text-gray-300":"text-gray-700"}`,children:"Categoría"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${l?"text-gray-300":"text-gray-700"}`,children:"Tipo"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${l?"text-gray-300":"text-gray-700"}`,children:"Proveedor"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${l?"text-gray-300":"text-gray-700"}`,children:"Estado"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${l?"text-gray-300":"text-gray-700"}`,children:"Stock"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${l?"text-gray-300":"text-gray-700"}`,children:"Precio"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${l?"text-gray-300":"text-gray-700"}`,children:"Acciones"})]})}),e.jsx("tbody",{className:`divide-y divide-gray-700/50 ${l?"bg-gray-800/70":"bg-gray-100/70"}`,children:p.map((h,k)=>e.jsxs("tr",{className:"hover:bg-blue-500/10 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:h.image?e.jsx("img",{src:h.image,alt:h.name,className:"h-12 w-12 rounded-lg object-cover",loading:"lazy"}):e.jsx("div",{className:"h-12 w-12 bg-gray-300 rounded-lg flex items-center justify-center",children:e.jsx(xg,{className:"text-gray-500",size:20})})}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${l?"text-white":"text-gray-900"}`,children:h.name||"Sin nombre"}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${l?"text-gray-300":"text-gray-600"}`,children:h.category||"Sin categoría"}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${l?"text-gray-300":"text-gray-600"}`,children:h.accountType||"N/A"}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${l?"text-gray-300":"text-gray-600"}`,children:h.provider||"Sin proveedor"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${h.status==="En stock"?"bg-green-500/20 text-green-400 border-green-500/50":h.status==="A pedido"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/50":"bg-red-500/20 text-red-400 border-red-500/50"} border`,children:h.status||"Desconocido"})}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${l?"text-gray-300":"text-gray-600"}`,children:h.stock!=null?h.stock:"0"}),e.jsxs("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${l?"text-white":"text-gray-900"}`,children:["S/ ",parseFloat(h.price||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{onClick:()=>u(h.id),className:`p-2 rounded-full ${l?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-red-100 text-red-600 hover:bg-red-200"} transition-all duration-300`,title:"Eliminar producto","aria-label":`Eliminar producto ${h.name}`,children:e.jsx(xf,{size:14})})})]},h.id||k))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xg,{className:`mx-auto text-4xl ${l?"text-gray-400":"text-gray-500"} mb-3`}),e.jsx("h4",{className:`text-lg font-medium ${l?"text-gray-300":"text-gray-700"}`,children:"No hay productos registrados"}),e.jsx("p",{className:`text-sm ${l?"text-gray-400":"text-gray-600"}`,children:"Los productos aparecerán aquí cuando los agregues."})]})]})};w4.propTypes={theme:F.string.isRequired,products:F.array.isRequired,loadingProducts:F.bool.isRequired,searchQuery:F.string.isRequired,setSearchQuery:F.func.isRequired,handleDeleteProduct:F.func.isRequired};const AO=Cs.memo(({show:a,onClose:t,title:s,message:n,theme:i})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${i==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${i==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${i==="dark"?"text-white":"text-gray-900"}`,children:s}),e.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:n})]})})}));AO.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,title:F.string.isRequired,message:F.string.isRequired,theme:F.string.isRequired};const k4=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState("inicio"),[i,u]=m.useState(""),[l,p]=m.useState(""),[h,k]=m.useState([]),[S,$]=m.useState([]),[D,O]=m.useState([]),[Y,W]=m.useState([]),[N,G]=m.useState([]),[H,U]=m.useState([]),[ne,oe]=m.useState(0),[$e,K]=m.useState(0),[V,L]=m.useState(0),[y,se]=m.useState(0),[ee,re]=m.useState({day:0,week:0,month:0,total:0}),[He,ut]=m.useState(!0),[it,Je]=m.useState(!0),[fe,Ne]=m.useState(null),[ye,J]=m.useState({}),[de,ve]=m.useState({isOpen:!1,message:"",title:""}),[Se,Ve]=m.useState({isOpen:!1,user:null}),[q,o]=m.useState("dark"),[nt,rt]=m.useState(!1),[Qe,Re]=m.useState(!1),[Pt,Et]=m.useState(""),[Tt,It]=m.useState(""),St=cr(),ft=m.useCallback(()=>{o(A=>A==="dark"?"light":"dark")},[]),ot=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),Ae=m.useCallback((A,X)=>{ve({isOpen:!0,title:A,message:X})},[]),Ye=m.useCallback(()=>{ve({isOpen:!1,message:"",title:""})},[]),ge=m.useCallback(A=>{Ve({isOpen:!0,user:A})},[]),Le=m.useCallback(()=>{Ve({isOpen:!1,user:null})},[]),Fe=m.useCallback(A=>{if(!A)return"No especificada";try{const X=A instanceof Date?A:new Date(A);return isNaN(X.getTime())?"Fecha inválida":X.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},[]),et=m.useCallback(async A=>{if(window.confirm("¿Estás seguro de que quieres eliminar este producto?"))try{J(X=>({...X,deleteProduct:!0})),await Bi(Z(I,"products",A)),Ae("Éxito","Producto eliminado correctamente")}catch(X){console.error("Error al eliminar producto:",X),Ae("Error",X.message||"Error al eliminar el producto")}finally{J(X=>({...X,deleteProduct:!1}))}},[Ae]),we=m.useCallback(async(A,X)=>{try{J(le=>({...le,balance:!0}));const ce=Z(I,"users",A);await da(ce,{balance:X,updatedAt:Ge()}),Ae("Éxito","Saldo actualizado exitosamente"),Le()}catch(ce){console.error("Error al actualizar saldo:",ce),Ae("Error",ce.message||"Error al actualizar el saldo")}finally{J(ce=>({...ce,balance:!1}))}},[Ae,Le]),r=m.useCallback(async A=>{A.preventDefault();try{J(P=>({...P,config:!0}));const X=A.target.password.value,ce=Z(I,"users",$t.currentUser.uid),le={username:i,updatedAt:Ge()};if(X){if(X.length<6){Ae("Error","La contraseña debe tener al menos 6 caracteres");return}await $b($t.currentUser,X)}await da(ce,le),Ae("Éxito","Cambios guardados correctamente"),A.target.reset()}catch(X){console.error("Error al guardar cambios:",X),Ae("Error",X.message||"Error al guardar los cambios")}finally{J(X=>({...X,config:!1}))}},[i,Ae]),C=m.useCallback(async()=>{try{await Pr($t),St("/")}catch(A){console.error("Error al cerrar sesión:",A),Ae("Error",A.message||"Error al cerrar sesión")}},[St,Ae]);m.useEffect(()=>{const A=hr($t,X=>{X?(p(X.email||"No especificado"),ut(!1)):St("/login")});return()=>A()},[St]),m.useEffect(()=>{if(!$t.currentUser)return;const A=Z(I,"users",$t.currentUser.uid),X=qe(A,ce=>{if(ce.exists()){const le=ce.data();u(le.username||"Admin")}else Ne("Usuario no encontrado")},ce=>{console.error("Error al cargar datos del usuario:",ce),Ne("Error al cargar datos del usuario: "+ce.message)});return()=>X()},[]),m.useEffect(()=>{const A=ae(I,"users"),X=ae(I,"sales"),ce=Te(ae(I,"pendingTopUps"),We("status","==","pendiente")),le=Te(ae(I,"withdrawals"),We("status","==","pendiente")),P=Te(ae(I,"products"),Ar("createdAt","desc")),B=qe(A,me=>{const pe=me.docs.map(je=>({id:je.id,...je.data()}));k(pe),oe(pe.length)},me=>{console.error("Error al cargar usuarios:",me),Ne("Error al cargar usuarios: "+me.message)}),_=qe(X,me=>{const pe=me.docs.map(Be=>({id:Be.id,...Be.data()}));$(pe);const je=pe.reduce((Be,Ee)=>Be+(parseFloat(Ee.price)||0),0);K(je)},me=>{console.error("Error al cargar ventas:",me),Ne("Error al cargar ventas: "+me.message)}),b=qe(ce,me=>{const pe=me.docs.map(je=>({id:je.id,...je.data(),date:je.data().requestedAt?.toDate?.()||new Date,amount:parseFloat(je.data().amount)||0}));O(pe),L(pe.length)},me=>{console.error("Error al cargar recargas:",me),Ne("Error al cargar recargas: "+me.message)}),w=qe(le,me=>{const pe=me.docs.map(je=>({id:je.id,...je.data(),date:je.data().requestedAt?.toDate?.()||new Date,amount:parseFloat(je.data().amount)||0}));W(pe),se(pe.length)},me=>{console.error("Error al cargar retiros:",me),Ne("Error al cargar retiros: "+me.message)}),z=qe(P,me=>{const pe=me.docs.map(je=>({id:je.id,...je.data(),createdAt:je.data().createdAt?.toDate?.()||new Date}));G(pe),Je(!1)},me=>{console.error("Error al cargar productos:",me),Ne("Error al cargar productos: "+me.message),Je(!1)});return()=>{B(),_(),b(),w(),z()}},[]),m.useEffect(()=>{const A=qe(Z(I,"notifications","adminMessage"),X=>{if(X.exists()){const ce=X.data();U([{id:X.id,...ce,timestamp:ce.updatedAt?.toDate()}])}else U([])},X=>{console.error("Error al cargar notificaciones:",X),Ne("Error al cargar notificaciones: "+X.message)});return()=>A()},[]),m.useEffect(()=>{const A=ne*5;re({day:A*.05,week:A*.25,month:A,total:A})},[ne]),m.useEffect(()=>{const A=()=>{rt(window.scrollY>300)};return window.addEventListener("scroll",A),()=>window.removeEventListener("scroll",A)},[]);const g=m.useCallback(A=>{const X=A.endDate?.toDate?.()||new Date,ce=new Date;return A.status==="pending"?"Pendiente":X>ce&&A.status==="completed"?"Activo":"Expirado"},[]),E=m.useCallback(()=>He?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):fe?e.jsxs("div",{className:`bg-${q==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${q==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsx(Qi,{className:"mx-auto text-4xl text-blue-400 mb-4"}),e.jsx("h3",{className:`text-xl font-bold ${q==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Error"}),e.jsx("p",{className:`text-base ${q==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:fe}),e.jsx("button",{onClick:()=>Ne(null),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Aceptar"})]}):e.jsx("div",{className:`bg-${q==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${q==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:(()=>{switch(s){case"inicio":return e.jsx(PO,{totalUsers:ne,totalSales:$e,pendingTopUps:V,pendingWithdrawals:y});case"notificaciones":return e.jsx(EO,{notifications:H,formatDate:Fe});case"usuarios":return e.jsx(h4,{users:h,openEditBalanceModal:ge});case"recargas":return e.jsx(g4,{topUps:D,formatDate:Fe,actionLoading:ye,setActionLoading:J,showNotificationModal:Ae});case"retiros":return e.jsx(DO,{withdrawals:Y,formatDate:Fe,actionLoading:ye,setActionLoading:J,showNotificationModal:Ae});case"pedidos":return e.jsx(b4,{sales:S,totalSales:$e,formatDate:Fe,getOrderStatus:g});case"productos":return e.jsx(w4,{theme:q,products:N,loadingProducts:it,searchQuery:Tt,setSearchQuery:It,handleDeleteProduct:et});case"ganancias":return e.jsx(f4,{earnings:ee,totalUsers:ne});case"configuracion":return e.jsx(y4,{userName:i,setUserName:u,email:l,handleSaveChanges:r,handleLogout:C,actionLoading:ye});default:return e.jsxs("div",{className:`bg-${q==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${q==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsx(Qi,{className:"mx-auto text-4xl text-blue-400 mb-4"}),e.jsx("h3",{className:`text-xl font-bold ${q==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Sección no encontrada"}),e.jsx("p",{className:`text-base ${q==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>n("inicio"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Volver al inicio"})]})}})()}),[He,fe,q,s,ne,$e,V,y,H,Fe,h,ge,D,ye,Ae,Y,S,g,ee,i,u,l,r,C,N,it,Tt,et]);return e.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${q==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-50 to-gray-50 text-gray-900"} font-inter relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${q==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((A,X)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},X))})]}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${q==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r overflow-y-auto lg:shadow-md`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{St("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${q==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${q==="dark"?"text-white":"text-gray-900"}`,children:i}),e.jsx("p",{className:`text-xs ${q==="dark"?"text-gray-400":"text-gray-600"}`,children:"Administrador"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:pf},{id:"notificaciones",label:"Notificaciones",icon:Bt},{id:"usuarios",label:"Usuarios",icon:Im},{id:"recargas",label:"Recargas",icon:eo},{id:"retiros",label:"Retiros",icon:eo},{id:"pedidos",label:"Pedidos",icon:nc},{id:"productos",label:"Productos",icon:xg},{id:"ganancias",label:"Ganancias",icon:ld},{id:"configuracion",label:"Configuración",icon:yL}].map(A=>e.jsxs("button",{onClick:()=>{n(A.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s===A.id?"bg-blue-100 text-blue-600 border border-blue-300":q==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s===A.id?"page":void 0,children:[e.jsx(A.icon,{className:"text-lg"}),e.jsx("span",{children:A.label})]},A.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{C(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${q==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsxs("header",{className:`${q==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md py-4 px-4 sm:px-6 lg:px-8 flex items-center justify-between shadow-md fixed top-0 left-0 right-0 z-50 lg:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"BlackStreaming logo",className:`h-10 w-10 rounded-full border ${q==="dark"?"border-gray-700/50":"border-gray-300"} shadow-sm lg:hidden`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-lg",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:Pt,onChange:A=>Et(A.target.value),className:`w-full py-2.5 px-5 ${q==="dark"?"bg-gray-800/50 border-gray-600/50 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-md`,"aria-label":"Search orders",onKeyDown:A=>A.key==="Enter"&&n("pedidos")}),e.jsx("button",{onClick:()=>n("pedidos"),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${q==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Search",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-4 relative",children:[e.jsx("button",{onClick:ft,className:`p-2 rounded-full ${q==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Switch to ${q==="dark"?"light":"dark"} theme`,children:q==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),e.jsxs("button",{onClick:()=>Re(!0),className:`p-2 rounded-full relative ${q==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Notifications (${H.length} new)`,children:[e.jsx(Bt,{size:20}),H.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:H.length})]}),e.jsx("button",{className:`lg:hidden p-2 rounded-full ${q==="dark"?"hover:bg-gray-700/50":"hover:bg-gray-100"} transition-all duration-300`,onClick:()=>t(!a),"aria-label":"Toggle mobile menu","aria-expanded":a,children:e.jsx(pp,{size:20,className:q==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:e.jsx("div",{className:"relative",children:e.jsxs("button",{className:`flex items-center space-x-2 ${q==="dark"?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-md transition-all duration-300`,"aria-label":"User menu",children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:i.charAt(0).toUpperCase()}),e.jsx("span",{className:`text-sm font-semibold ${q==="dark"?"text-gray-200":"text-gray-800"}`,children:i})]})})})]})]}),e.jsx(ue,{children:Qe&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>Re(!1),role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 lg:max-w-lg ${q==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${q==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:A=>A.stopPropagation(),children:[e.jsx("button",{onClick:()=>Re(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notifications",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-xl font-bold mb-4 ${q==="dark"?"text-white":"text-gray-900"}`,children:"Notificaciones"}),H.length>0?H.map(A=>e.jsxs("div",{className:`p-4 mb-2 rounded-md ${q==="dark"?"bg-gray-800/50":"bg-gray-100/80"} border-l-4 ${q==="dark"?"border-blue-500/50":"border-blue-300/50"}`,children:[e.jsx("h3",{className:`font-semibold ${q==="dark"?"text-gray-200":"text-gray-800"}`,children:A.title||"Nueva Notificación"}),e.jsx("p",{className:`text-sm ${q==="dark"?"text-gray-300":"text-gray-700"} mt-1`,children:A.message}),A.roles&&A.roles.length>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Roles: ",A.roles.join(", ")]}),A.timestamp&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Fe(A.timestamp)})]},A.id)):e.jsx("p",{className:`text-center ${q==="dark"?"text-gray-400":"text-gray-600"} mt-4`,children:"No hay notificaciones."})]})})}),e.jsx("main",{className:"lg:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start",children:E()}),e.jsxs("footer",{className:`${q==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md px-4 sm:px-6 lg:px-8 py-12 text-center relative z-10 lg:ml-64 max-w-6xl mx-auto rounded-2xl border ${q==="dark"?"border-gray-700/50":"border-gray-300"} mt-8 shadow-md`,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-4",children:"BlackStreaming"}),e.jsxs("p",{className:`text-base sm:text-lg ${q==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["Todos los derechos reservados. Desarrollado por"," ",e.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Saiph"}),"."]}),e.jsxs("div",{className:"flex justify-center space-x-6 sm:space-x-8 mb-6",children:[e.jsx("a",{href:"https://twitter.com",className:`${q==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Twitter",children:e.jsx(vr,{size:28})}),e.jsx("a",{href:"https://instagram.com",className:`${q==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Instagram",children:e.jsx(yr,{size:28})}),e.jsx("a",{href:"https://facebook.com",className:`${q==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Facebook",children:e.jsx(fr,{size:28})})]}),e.jsxs("div",{className:"flex justify-center space-x-4 sm:space-x-6",children:[e.jsx("a",{href:"#",className:`text-sm ${q==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Privacy Policy",children:"Política de Privacidad"}),e.jsx("a",{href:"#",className:`text-sm ${q==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Terms of Service",children:"Términos de Servicio"}),e.jsx("a",{href:"#",className:`text-sm ${q==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Contact Us",children:"Contáctanos"})]})]}),e.jsxs("p",{className:`text-sm ${q==="dark"?"text-gray-500":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Hecho con pasión."]})]}),e.jsx(ue,{children:nt&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:ot,className:"fixed bottom-6 right-6 bg-blue-600/90 backdrop-blur-md p-3 rounded-full hover:bg-blue-700/95 shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 lg:bottom-8 lg:right-8","aria-label":"Back to top",children:e.jsx(Ir,{size:20})})}),e.jsx(v4,{isOpen:de.isOpen,title:de.title,message:de.message,onClose:Ye}),e.jsx(_O,{isOpen:Se.isOpen,user:Se.user,onClose:Le,onSave:we}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 lg:hidden",onClick:()=>t(!1),"aria-hidden":"true"})]})};k4.propTypes={};const N4=m.createContext({theme:"dark",toggleTheme:()=>{}}),RO=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(N4.Provider,{value:{theme:t,toggleTheme:n},children:a})},j4=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));j4.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const C4=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});C4.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const S4=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(N4),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Netflix")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,netflix:_.length}))},P=>{W("Error al cargar productos de Netflix"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"netflix_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"netflix"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"netflix"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Netflix`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Netflix...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Netflix",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Netflix...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Netflix",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="netflix"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="netflix"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="netflix"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="netflix"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522869635100-9f4c5e86aa37?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Netflix"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de películas y series sin límites con nuestras cuentas premium de Netflix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(j4,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(C4,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};S4.propTypes={};const MO=()=>e.jsx(RO,{children:e.jsx(S4,{})}),$4=m.createContext({theme:"dark",toggleTheme:()=>{}}),zO=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx($4.Provider,{value:{theme:t,toggleTheme:n},children:a})},T4=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));T4.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const P4=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});P4.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const E4=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext($4),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Disney")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,disney:_.length}))},P=>{W("Error al cargar productos de Disney+"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"disney_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"disney"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"disney"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Disney`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Disney+...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Disney+",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Disney+...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Disney+",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="disney"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="disney"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="disney"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="disney"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1618336753974-8d1b0f5c2e76?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Disney+"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de películas, series y contenido exclusivo con nuestras cuentas premium de Disney+"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(T4,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(P4,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};E4.propTypes={};const BO=()=>e.jsx(zO,{children:e.jsx(E4,{})}),I4=m.createContext({theme:"dark",toggleTheme:()=>{}}),LO=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(I4.Provider,{value:{theme:t,toggleTheme:n},children:a})},D4=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));D4.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const _4=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});_4.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const A4=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(I4),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Max")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,max:_.length}))},P=>{W("Error al cargar productos de Max"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"max_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"max"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"max"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Max`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Max...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Max",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Max...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Max",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="max"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="max"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="max"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="max"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1611162617213-7d7a39e9b1d7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Max"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de series, películas y contenido exclusivo con nuestras cuentas premium de Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(D4,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(_4,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};A4.propTypes={};const OO=()=>e.jsx(LO,{children:e.jsx(A4,{})}),R4=m.createContext({theme:"dark",toggleTheme:()=>{}}),VO=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(R4.Provider,{value:{theme:t,toggleTheme:n},children:a})},M4=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));M4.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const z4=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});z4.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const B4=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(R4),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Spotify")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,spotify:_.length}))},P=>{W("Error al cargar productos de Spotify"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"spotify_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"spotify"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"spotify"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Spotify`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Spotify...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Spotify",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Spotify...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Spotify",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="spotify"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="spotify"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="spotify"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="spotify"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616531770192-6b04a0c365ea?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Spotify"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Escucha tu música favorita sin anuncios con nuestras cuentas premium de Spotify"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(M4,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(z4,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};B4.propTypes={};const FO=()=>e.jsx(VO,{children:e.jsx(B4,{})}),L4=m.createContext({theme:"dark",toggleTheme:()=>{}}),UO=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(L4.Provider,{value:{theme:t,toggleTheme:n},children:a})},O4=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));O4.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const V4=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});V4.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const F4=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(L4),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Prime Video")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,primevideo:_.length}))},P=>{W("Error al cargar productos de Prime Video"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"primevideo_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"primevideo"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"primevideo"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Prime Video`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Prime Video...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Prime Video",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Prime Video...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Prime Video",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="primevideo"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="primevideo"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="primevideo"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="primevideo"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68c44?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Prime Video"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de películas, series y contenido exclusivo con nuestras cuentas premium de Prime Video"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(O4,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(V4,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};F4.propTypes={};const qO=()=>e.jsx(UO,{children:e.jsx(F4,{})}),U4=m.createContext({theme:"dark",toggleTheme:()=>{}}),HO=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(U4.Provider,{value:{theme:t,toggleTheme:n},children:a})},q4=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));q4.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const H4=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});H4.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const W4=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(U4),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Vix")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,vix:_.length}))},P=>{W("Error al cargar productos de Vix"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"vix_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"vix"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"vix"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Vix`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Vix...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Vix",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Vix...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Vix",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="vix"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="vix"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="vix"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="vix"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68c44?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Vix"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de series, películas y contenido exclusivo en español con nuestras cuentas premium de Vix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(q4,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(H4,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};W4.propTypes={};const WO=()=>e.jsx(HO,{children:e.jsx(W4,{})}),G4=m.createContext({theme:"dark",toggleTheme:()=>{}}),GO=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(G4.Provider,{value:{theme:t,toggleTheme:n},children:a})},K4=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));K4.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const Q4=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});Q4.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const Y4=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(G4),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Canva")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,canva:_.length}))},P=>{W("Error al cargar productos de Canva"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"canva_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"canva"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"canva"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Canva`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Canva...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Canva",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Canva...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Canva",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="canva"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="canva"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="canva"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="canva"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Canva"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Crea diseños profesionales con nuestras cuentas premium de Canva, perfectas para tus proyectos creativos"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(K4,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(Q4,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};Y4.propTypes={};const KO=()=>e.jsx(GO,{children:e.jsx(Y4,{})}),X4=m.createContext({theme:"dark",toggleTheme:()=>{}}),QO=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(X4.Provider,{value:{theme:t,toggleTheme:n},children:a})},J4=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));J4.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const Z4=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});Z4.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const eC=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(X4),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","ChatGPT")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,chatgpt:_.length}))},P=>{W("Error al cargar productos de ChatGPT"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"chatgpt_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"chatgpt"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"chatgpt"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=ChatGPT`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en ChatGPT...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en ChatGPT",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en ChatGPT...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en ChatGPT",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="chatgpt"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="chatgpt"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="chatgpt"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="chatgpt"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1620712943543-bcc4686e8b98?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de ChatGPT"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Accede a funciones avanzadas de IA con nuestras cuentas premium de ChatGPT"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(J4,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(Z4,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};eC.propTypes={};const YO=()=>e.jsx(QO,{children:e.jsx(eC,{})}),tC=m.createContext({theme:"dark",toggleTheme:()=>{}}),XO=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(tC.Provider,{value:{theme:t,toggleTheme:n},children:a})},rC=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));rC.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const aC=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});aC.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const sC=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(tC),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Crunchyroll")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,crunchyroll:_.length}))},P=>{W("Error al cargar productos de Crunchyroll"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"crunchyroll_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"crunchyroll"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"crunchyroll"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Crunchyroll`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Crunchyroll...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Crunchyroll",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Crunchyroll...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Crunchyroll",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="crunchyroll"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="crunchyroll"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="crunchyroll"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="crunchyroll"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1618336753974-2ae8769a6850?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Crunchyroll"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta del mejor anime con nuestras cuentas premium de Crunchyroll, sin anuncios y en alta calidad"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(rC,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(aC,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};sC.propTypes={};const JO=()=>e.jsx(XO,{children:e.jsx(sC,{})}),nC=m.createContext({theme:"dark",toggleTheme:()=>{}}),ZO=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(nC.Provider,{value:{theme:t,toggleTheme:n},children:a})},oC=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));oC.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const iC=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});iC.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const lC=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(nC),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Redes Sociales")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,redessociales:_.length}))},P=>{W("Error al cargar productos de Redes Sociales"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"redessociales_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"redessociales"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"redessociales"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Redes Sociales`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Redes Sociales...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Redes Sociales",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Redes Sociales...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Redes Sociales",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="redessociales"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="redessociales"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="redessociales"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="redessociales"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-479e93c4e359?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Redes Sociales"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Potencia tu presencia en línea con cuentas premium de redes sociales"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(oC,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(iC,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};lC.propTypes={};const eV=()=>e.jsx(ZO,{children:e.jsx(lC,{})}),cC=m.createContext({theme:"dark",toggleTheme:()=>{}}),tV=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(cC.Provider,{value:{theme:t,toggleTheme:n},children:a})},dC=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));dC.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const uC=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});uC.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const mC=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(cC),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","AppleMusic")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,applemusic:_.length}))},P=>{W("Error al cargar productos de Apple Music"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"applemusic_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"applemusic"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"applemusic"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Apple Music`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple Music...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Apple Music",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple Music...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Apple Music",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="applemusic"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="applemusic"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="applemusic"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="applemusic"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Apple Music Premium"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de millones de canciones con Apple Music"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{size:14}),"Detalles"]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(dC,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(uC,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};mC.propTypes={};const rV=()=>e.jsx(tV,{children:e.jsx(mC,{})}),pC=m.createContext({theme:"dark",toggleTheme:()=>{}}),aV=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(pC.Provider,{value:{theme:t,toggleTheme:n},children:a})},hC=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));hC.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const xC=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});xC.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const gC=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(pC),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Apple Tv")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,appletv:_.length}))},P=>{W("Error al cargar productos de Apple TV"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"appletv_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"appletv"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"appletv"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Apple Tv`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple TV...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Apple TV",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple TV...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Apple TV",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="appletv"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="appletv"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="appletv"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="appletv"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Apple TV"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de series y películas exclusivas con nuestras cuentas premium de Apple TV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(hC,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(xC,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};gC.propTypes={};const sV=()=>e.jsx(aV,{children:e.jsx(gC,{})}),bC=m.createContext({theme:"dark",toggleTheme:()=>{}}),nV=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(bC.Provider,{value:{theme:t,toggleTheme:n},children:a})},fC=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));fC.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const yC=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});yC.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const vC=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(bC),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Iptv")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,iptv:_.length}))},P=>{W("Error al cargar productos de IPTV"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"iptv_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"iptv"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"iptv"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Iptv`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en IPTV...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en IPTV",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en IPTV...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en IPTV",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="iptv"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="iptv"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="iptv"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="iptv"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de IPTV"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Accede a una amplia variedad de canales en vivo y contenido bajo demanda con nuestras cuentas premium de IPTV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(fC,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(yC,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};vC.propTypes={};const oV=()=>e.jsx(nV,{children:e.jsx(vC,{})}),wC=m.createContext({theme:"dark",toggleTheme:()=>{}}),iV=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(wC.Provider,{value:{theme:t,toggleTheme:n},children:a})},kC=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));kC.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const NC=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});NC.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const jC=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(wC),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Flujo Tv")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,flujotv:_.length}))},P=>{W("Error al cargar productos de Flujo Tv"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"flujotv_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"flujotv"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"flujotv"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Flujo Tv`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Flujo Tv...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Flujo Tv",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Flujo Tv...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Flujo Tv",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="flujotv"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="flujotv"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="flujotv"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="flujotv"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68c34?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Flujo Tv"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de streaming fluido con nuestras cuentas premium de Flujo Tv, perfectas para entretenimiento sin interrupciones"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(kC,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(NC,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};jC.propTypes={};const lV=()=>e.jsx(iV,{children:e.jsx(jC,{})}),CC=m.createContext({theme:"dark",toggleTheme:()=>{}}),cV=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(CC.Provider,{value:{theme:t,toggleTheme:n},children:a})},SC=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));SC.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const $C=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});$C.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const TC=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(CC),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Viki Rakuten")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,vikirakuten:_.length}))},P=>{W("Error al cargar productos de Viki Rakuten"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"vikirakuten_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"vikirakuten"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"vikirakuten"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Viki Rakuten`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Viki Rakuten...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Viki Rakuten",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Viki Rakuten...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Viki Rakuten",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="vikirakuten"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="vikirakuten"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="vikirakuten"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="vikirakuten"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68c34?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Viki Rakuten"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de dramas asiáticos y entretenimiento global con nuestras cuentas premium de Viki Rakuten"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(SC,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx($C,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};TC.propTypes={};const dV=()=>e.jsx(cV,{children:e.jsx(TC,{})}),PC=m.createContext({theme:"dark",toggleTheme:()=>{}}),uV=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(PC.Provider,{value:{theme:t,toggleTheme:n},children:a})},EC=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));EC.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const IC=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});IC.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const DC=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(PC),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Pornhub")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,pornhub:_.length}))},P=>{W("Error al cargar productos de Pornhub"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"pornhub_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"pornhub"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"pornhub"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Pornhub`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Pornhub...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Pornhub",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Pornhub...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Pornhub",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="pornhub"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="pornhub"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="pornhub"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="pornhub"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68c34?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Pornhub"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de contenido premium para adultos con nuestras cuentas de Pornhub"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 py-2 rounded-xl text-sm font-semibold ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(EC,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(IC,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};DC.propTypes={};const mV=()=>e.jsx(uV,{children:e.jsx(DC,{})}),_C=m.createContext({theme:"dark",toggleTheme:()=>{}}),pV=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(_C.Provider,{value:{theme:t,toggleTheme:n},children:a})},AC=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));AC.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const RC=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});RC.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const MC=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(_C),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Paramount")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,paramount:_.length}))},P=>{W("Error al cargar productos de Paramount"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"paramount_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"paramount"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"paramount"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Paramount`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Paramount...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Paramount",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Paramount...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Paramount",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="paramount"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="paramount"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="paramount"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="paramount"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-0b1e6388a7b0?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Paramount"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de películas y series exclusivas con nuestras cuentas de Paramount+"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 py-2 rounded-xl text-sm font-semibold ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/90 border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/90 border-blue-300/30"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(AC,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(RC,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};MC.propTypes={};const hV=()=>e.jsx(pV,{children:e.jsx(MC,{})}),zC=m.createContext({theme:"dark",toggleTheme:()=>{}}),xV=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(zC.Provider,{value:{theme:t,toggleTheme:n},children:a})},BC=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));BC.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const LC=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});LC.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const OC=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(zC),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Licencias")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,licencias:_.length}))},P=>{W("Error al cargar licencias"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"licencias_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay licencias disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay licencias disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{licenseKey:b.licenseKey||"No proporcionado",activationDetails:b.activationDetails||"No proporcionado"},terms:r.terms,type:"licencias"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{licenseKey:b.licenseKey||"No proporcionado",activationDetails:b.activationDetails||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{licenseKey:b.licenseKey||"No proporcionado",activationDetails:b.activationDetails||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"licencias"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{licenseKey:C?.licenseKey||"No proporcionado",activationDetails:C?.activationDetails||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de la licencia.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Licencias`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar licencias...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar licencias",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar licencias...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar licencias",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="licencias"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="licencias"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="licencias"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="licencias"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-479e93c1e67e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Licencias de Software Premium"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Obtén acceso a licencias premium de software con soporte y actualizaciones garantizadas"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Licencias Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron licencias que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(BC,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(LC,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};OC.propTypes={};const gV=()=>e.jsx(xV,{children:e.jsx(OC,{})}),VC=m.createContext({theme:"dark",toggleTheme:()=>{}}),bV=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(VC.Provider,{value:{theme:t,toggleTheme:n},children:a})},FC=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));FC.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const UC=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});UC.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const qC=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(VC),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Capcut")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,capcut:_.length}))},P=>{W("Error al cargar productos de Capcut"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"capcut_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"capcut"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"capcut"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Capcut`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Capcut...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Capcut",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Capcut...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Capcut",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="capcut"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="capcut"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="capcut"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="capcut"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68c77?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Capcut"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Edita videos como profesional con nuestras cuentas premium de Capcut"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 py-2 rounded-xl text-sm font-semibold ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/90 border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/90 border-blue-300/30"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(FC,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(UC,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};qC.propTypes={};const fV=()=>e.jsx(bV,{children:e.jsx(qC,{})}),HC=Cs.createContext({theme:"dark",toggleTheme:()=>{}}),yV=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(HC.Provider,{value:{theme:t,toggleTheme:n},children:a})},WC=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));WC.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const GC=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});GC.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const KC=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(HC),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Duolingo")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,duolingo:_.length}))},P=>{W("Error al cargar productos de Duolingo"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"duolingo_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{licenseKey:b.licenseKey||"No proporcionado",activationDetails:b.activationDetails||"No proporcionado"},terms:r.terms,type:"duolingo"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{licenseKey:b.licenseKey||"No proporcionado",activationDetails:b.activationDetails||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{licenseKey:b.licenseKey||"No proporcionado",activationDetails:b.activationDetails||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"duolingo"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{licenseKey:C?.licenseKey||"No proporcionado",activationDetails:C?.activationDetails||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de la cuenta.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Duolingo`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Duolingo...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Duolingo",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Duolingo...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Duolingo",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="duolingo"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="duolingo"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="duolingo"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="duolingo"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-479e93c1e67e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Duolingo Premium"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Aprende idiomas con Duolingo Premium, con acceso ilimitado y sin anuncios"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Cuentas de Duolingo"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron cuentas de Duolingo que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(WC,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(GC,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};KC.propTypes={};const vV=()=>e.jsx(yV,{children:e.jsx(KC,{})}),QC=m.createContext({theme:"dark",toggleTheme:()=>{}}),wV=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(QC.Provider,{value:{theme:t,toggleTheme:n},children:a})},YC=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));YC.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const XC=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});XC.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const JC=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(QC),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Dgo")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,dgo:_.length}))},P=>{W("Error al cargar productos de Dgo"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"dgo_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"dgo"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:fclose(r.price),renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"dgo"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Dgo`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Dgo...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Dgo",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Dgo...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Dgo",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="dgo"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="dgo"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="dgo"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="dgo"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1504280390367-5d8f8c7b7c74?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Dgo"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de deportes, películas y más con cuentas premium de Dgo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(YC,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(XC,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};JC.propTypes={};const kV=()=>e.jsx(wV,{children:e.jsx(JC,{})}),ZC=m.createContext({theme:"dark",toggleTheme:()=>{}}),NV=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(ZC.Provider,{value:{theme:t,toggleTheme:n},children:a})},e6=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));e6.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const t6=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});t6.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const r6=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(ZC),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Liga Max")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,ligamax:_.length}))},P=>{W("Error al cargar productos de Liga Max"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"ligamax_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"ligamax"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"ligamax"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Liga Max`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Liga Max...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Liga Max",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Liga Max...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Liga Max",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="ligamax"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="ligamax"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="ligamax"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="ligamax"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1557672172-298e090bd0f1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Liga Max"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Vive la emoción del fútbol con cuentas premium de Liga Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(e6,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(t6,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};r6.propTypes={};const jV=()=>e.jsx(NV,{children:e.jsx(r6,{})}),a6=m.createContext({theme:"dark",toggleTheme:()=>{}}),CV=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(a6.Provider,{value:{theme:t,toggleTheme:n},children:a})},s6=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));s6.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const n6=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});n6.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const o6=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(a6),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Movistar Play")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,movistarplay:_.length}))},P=>{W("Error al cargar productos de Movistar Play"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"movistarplay_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"movistarplay"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"movistarplay"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Movistar Play`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Movistar Play...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Movistar Play",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Movistar Play...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Movistar Play",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="movistarplay"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="movistarplay"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="movistarplay"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="movistarplay"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Movistar Play"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de películas, series y más con cuentas premium de Movistar Play"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{size:14}),"Detalles"]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(s6,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(n6,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};o6.propTypes={};const SV=()=>e.jsx(CV,{children:e.jsx(o6,{})}),i6=m.createContext({theme:"dark",toggleTheme:()=>{}}),$V=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(i6.Provider,{value:{theme:t,toggleTheme:n},children:a})},l6=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));l6.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const c6=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});c6.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const d6=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(i6),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Youtube")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,youtube:_.length}))},P=>{W("Error al cargar productos de YouTube"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"youtube_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"youtube"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"youtube"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Youtube`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en YouTube...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en YouTube",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en YouTube...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en YouTube",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="youtube"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="youtube"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="youtube"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="youtube"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1611162617210-7d673bf0f crawl&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de YouTube"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de videos sin anuncios y contenido exclusivo con YouTube Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{size:14}),"Detalles"]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(l6,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(c6,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};d6.propTypes={};const TV=()=>e.jsx($V,{children:e.jsx(d6,{})}),u6=m.createContext({theme:"dark",toggleTheme:()=>{}}),PV=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(u6.Provider,{value:{theme:t,toggleTheme:n},children:a})},m6=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));m6.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const p6=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});p6.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const h6=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(u6),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Deezer")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,deezer:_.length}))},P=>{W("Error al cargar productos de Deezer"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"deezer_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"deezer"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"deezer"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Deezer`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Deezer...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Deezer",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Deezer...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Deezer",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="deezer"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="deezer"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="deezer"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="deezer"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a65d?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Deezer"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de música sin anuncios y escucha offline con Deezer Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{size:14}),"Detalles"]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(m6,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(p6,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};h6.propTypes={};const EV=()=>e.jsx(PV,{children:e.jsx(h6,{})}),x6=m.createContext({theme:"dark",toggleTheme:()=>{}}),IV=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(x6.Provider,{value:{theme:t,toggleTheme:n},children:a})},g6=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));g6.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const b6=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});b6.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const f6=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(x6),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Tidal")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,tidal:_.length}))},P=>{W("Error al cargar productos de Tidal"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"tidal_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"tidal"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"tidal"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Tidal`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Tidal...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Tidal",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Tidal...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Tidal",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="tidal"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="tidal"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="tidal"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="tidal"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1508700115892-2e51b27c8b25?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Tidal"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de audio de alta fidelidad y contenido exclusivo con Tidal Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{size:14}),"Detalles"]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(g6,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(b6,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};f6.propTypes={};const DV=()=>e.jsx(IV,{children:e.jsx(f6,{})}),y6=m.createContext({theme:"dark",toggleTheme:()=>{}}),_V=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(y6.Provider,{value:{theme:t,toggleTheme:n},children:a})},v6=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));v6.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const w6=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});w6.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const k6=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(y6),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","Vpn")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,vpn:_.length}))},P=>{W("Error al cargar productos de VPN"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"vpn_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"vpn"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"vpn"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Vpn`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en VPN...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en VPN",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en VPN...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en VPN",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="vpn"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="vpn"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="vpn"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="vpn"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1628155930542-3c7a64e2c833?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Servicios VPN Premium"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Navega de forma segura y privada con nuestras cuentas VPN premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{size:14}),"Detalles"]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(v6,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(w6,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};k6.propTypes={};const AV=()=>e.jsx(_V,{children:e.jsx(k6,{})}),N6=m.createContext({theme:"dark",toggleTheme:()=>{}}),RV=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(N6.Provider,{value:{theme:t,toggleTheme:n},children:a})},j6=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));j6.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const C6=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});C6.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const S6=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext(N6),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","WinTv")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.email||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,wintv:_.length}))},P=>{W("Error al cargar productos de Win TV"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"wintv_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},terms:r.terms,type:"wintv"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:b.email||"No proporcionado",password:b.password||"No proporcionado",profile:b.profile||"No proporcionado",pin:b.pin||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"wintv"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{email:C?.email||"No proporcionado",password:C?.password||"No proporcionado",profile:C?.profile||"No proporcionado",pin:C?.pin||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Win Tv`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Win TV...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Win TV",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Win TV...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Win TV",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="wintv"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="wintv"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="wintv"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="wintv"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522202176988-66273c2b6b40?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Win TV Premium"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de la mejor experiencia de streaming con Win TV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{size:14}),"Detalles"]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(j6,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(C6,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};S6.propTypes={};const MV=()=>e.jsx(RV,{children:e.jsx(S6,{})}),$6=Cs.createContext({theme:"dark",toggleTheme:()=>{}}),zV=({children:a})=>{const[t,s]=m.useState(()=>localStorage.getItem("theme")||"dark"),n=m.useCallback(()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)},[t]);return m.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx($6.Provider,{value:{theme:t,toggleTheme:n},children:a})},T6=m.memo(({isOpen:a,message:t,onClose:s,theme:n})=>e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));T6.propTypes={isOpen:F.bool.isRequired,message:F.string.isRequired,onClose:F.func.isRequired,theme:F.string.isRequired};const P6=m.memo(({show:a,onClose:t,notifications:s,theme:n})=>{const i=n==="dark",u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},l=p=>p.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ue,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),s.length>0?s.map(p=>e.jsxs(v.div,{variants:u,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:p.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:l(p.updatedAt?.toDate?.()||new Date)})]},p.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});P6.propTypes={show:F.bool.isRequired,onClose:F.func.isRequired,notifications:F.arrayOf(F.shape({id:F.string.isRequired,message:F.string.isRequired,updatedAt:F.object})).isRequired,theme:F.string.isRequired};const E6=()=>{const[a,t]=m.useState(!1),[s,n]=m.useState([]),[i,u]=m.useState([]),[l,p]=m.useState(null),[h,k]=m.useState(0),[S,$]=m.useState(null),[D,O]=m.useState(!0),[Y,W]=m.useState(null),[N,G]=m.useState(null),[H,U]=m.useState(null),[ne,oe]=m.useState(!1),[$e,K]=m.useState(!1),[V,L]=m.useState(null),[y,se]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[ee,re]=m.useState(""),[He,ut]=m.useState({}),[it,Je]=m.useState(!1),[fe,Ne]=m.useState(!1),[ye,J]=m.useState(!1),[de,ve]=m.useState(!1),[Se,Ve]=m.useState([]),q=cr(),{theme:o,toggleTheme:nt}=m.useContext($6),rt=m.useRef(null),Qe=m.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);m.useEffect(()=>{const r=()=>{Je(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const Re=m.useCallback(r=>{const C=Number(r);return isNaN(C)?"0.00":C.toFixed(2)},[]),Pt=m.useCallback(r=>{const C=Math.floor(r),g=r%1>=.5,E=5-C-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(C)].map((A,X)=>e.jsx(vt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${X}`)),g&&e.jsx(vt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:o==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(E)].map((A,X)=>e.jsx(vt,{className:o==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${X}`))]})},[o]);m.useEffect(()=>{const r=hr($t,async C=>{if(p(C),C)try{const g=await zt(Z(I,"users",C.uid));if(g.exists()){const E=g.data();p({id:C.uid,name:E.username||"Usuario",email:C.email,orders:E.orders||[],role:E.role||"user",phone:E.phone||"",username:E.username||"Usuario"}),k(Number(E.balance)||0),$(E.role||"user"),Et(C.uid)}else W("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(g){W("Error al cargar datos del usuario"),console.error(g)}else p(null),k(0),$(null),Ve([]);O(!1)});return()=>r()},[]);const Et=async r=>{try{const C=Te(ae(I,"users",r,"notifications"),Ar("updatedAt","desc")),E=(await _t(C)).docs.map(A=>({id:A.id,message:A.data().message||"Sin mensaje",updatedAt:A.data().updatedAt}));Ve(E)}catch(C){console.error("Error fetching notifications:",C)}};m.useEffect(()=>{const r=Te(ae(I,"products"),We("category","==","BuscaPersonas")),C=qe(r,async P=>{const B=P.docs.map(b=>{const w=b.data();return{id:b.id,...w,price:Number(w.price)||0,stock:Number(w.stock||w.available||0),accountDetails:w.searchDetails||w.details||"Detalles no disponibles",terms:w.terms||"Términos del proveedor",provider:w.provider||"Proveedor no especificado",providerId:w.providerId||"",providerPhone:w.providerPhone||"",acceptsOrders:w.status==="A pedido",duration:w.duration||"1 mes",accountType:w.accountType||"No especificado",status:w.status||"En stock",image:w.image||"https://via.placeholder.com/300",renewal:w.renewal||!1,renewalPrice:Number(w.renewalPrice)||Number(w.price)*.9}}),_=await Promise.all(B.map(async b=>{let w={provider:b.provider,providerPhone:b.providerPhone};if(!b.provider||b.provider==="Proveedor no especificado")try{if(b.providerId){const z=await zt(Z(I,"users",b.providerId));z.exists()&&(w={provider:z.data().username||z.data().email||b.provider,providerPhone:z.data().phoneNumber||b.providerPhone})}}catch(z){console.error("Error al cargar datos del proveedor:",z)}return{...b,...w}}));n(_),se(b=>({...b,buscapersonas:_.length}))},P=>{W("Error al cargar productos de Busca Personas"),console.error(P)}),g=Te(ae(I,"ratings")),E=qe(g,P=>{const B={};P.docs.forEach(b=>{const w=b.data(),z=w.providerId;B[z]||(B[z]=[]),B[z].push(Number(w.rating)||0)});const _={};Object.keys(B).forEach(b=>{const w=B[b],z=w.length?w.reduce((me,pe)=>me+pe,0)/w.length:1;_[b]=Math.min(Math.max(z,1),5)}),ut(_)},P=>{console.error("Error al cargar calificaciones de proveedores:",P)}),A=Te(ae(I,"buscapersonas_accounts"),We("status","==","available")),X=qe(A,P=>{const B=P.docs.map(_=>({id:_.id,..._.data(),productId:_.data().productId||"",providerId:_.data().providerId||""}));u(B)},P=>{console.error("Error al cargar cuentas:",P)}),le=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(P=>{const B=P.toLowerCase().replace(/\s+/g,""),_=Te(ae(I,"products"),We("category","==",P));return qe(_,b=>{se(w=>({...w,[B]:b.docs.length}))},b=>{console.error(`Error al cargar productos de ${P}:`,b)})});return()=>{C(),E(),X(),le.forEach(P=>P())}},[]);const Tt=m.useCallback(r=>{if(!l){L({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(S==="provider"){L({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(h<r.price){L({message:"Saldo insuficiente para realizar esta compra."});return}if(!r.providerId||r.providerId===""){L({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}G({product:r,customerName:l.name,phoneNumber:""})},[l,h,q]),It=m.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){W("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(N.phoneNumber)){W("El número de WhatsApp debe tener 9 dígitos");return}try{O(!0);const r=N.product;if(!r.providerId||r.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let C=null;r.status==="En stock"?C=await Kt(I,async g=>{const E=Z(I,"products",r.id),A=await g.get(E);if(!A.exists())throw new Error("Producto no encontrado");const X=A.data();if(X.availableAccounts<=0&&X.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ce=ae(I,`products/${r.id}/accounts`),le=Te(ce,We("status","==","available"),Rr(1)),P=await _t(le);if(P.empty)throw new Error("No hay cuentas disponibles en la subcolección");const B=P.docs[0],_=B.ref,b=B.data(),w=Z(I,"users",l.id),z=await g.get(w);if(!z.exists())throw new Error("Usuario no encontrado");const me=Z(I,"users",r.providerId),pe=await g.get(me);if(!pe.exists())throw new Error("Proveedor no encontrado");const je=Z(I,"providerBalances",r.providerId),Be=await g.get(je);let Ee=0;Be.exists()?Ee=parseFloat(Be.data().balance)||0:g.set(je,{balance:0,provider:r.providerId,updatedAt:Ge()});let xe=r.providerPhone||"";xe||(xe=pe.data().phoneNumber||""),g.update(_,{status:"unavailable",assignedTo:l.id,assignedAt:new Date().toISOString()}),g.update(E,{availableAccounts:Gt(-1),stock:Gt(-1)});const ht=(Number(z.data().balance)||0)-r.price;if(ht<0)throw new Error("Saldo insuficiente");const Pe=z.data().orders||[],_e={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,status:"active",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:{searchAccess:b.searchAccess||"No proporcionado",activationDetails:b.activationDetails||"No proporcionado"},terms:r.terms,type:"buscapersonas"};g.update(w,{balance:ht,orders:[...Pe,_e]});const Xe=(Number(pe.data().balance)||0)+r.price,gt=pe.data().sales||[],st={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:xe,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:{searchAccess:b.searchAccess||"No proporcionado",activationDetails:b.activationDetails||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(me,{balance:Xe,sales:[...gt,st]});const Nt=Ee+r.price;g.set(je,{balance:Nt,provider:r.providerId,updatedAt:Ge()},{merge:!0});const pt=Z(ae(I,"sales"));return g.set(pt,{..._e,provider:r.provider,providerId:r.providerId,providerPhone:xe,saleDate:new Date().toISOString(),status:"completed",accountDetails:{searchAccess:b.searchAccess||"No proporcionado",activationDetails:b.activationDetails||"No proporcionado"},saleId:st.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image}),b}):await Kt(I,async g=>{const E=Z(I,"users",l.id),A=await g.get(E);if(!A.exists())throw new Error("Usuario no encontrado");const X=Z(I,"users",r.providerId),ce=await g.get(X);if(!ce.exists())throw new Error("Proveedor no encontrado");const le=Z(I,"providerBalances",r.providerId),P=await g.get(le);let B=0;P.exists()?B=parseFloat(P.data().balance)||0:g.set(le,{balance:0,provider:r.providerId,updatedAt:Ge()});let _=r.providerPhone||"";_||(_=ce.data().phoneNumber||"");const w=(Number(A.data().balance)||0)-r.price;if(w<0)throw new Error("Saldo insuficiente");const z=A.data().orders||[],me={productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,status:"pending",customerName:N.customerName,customerId:l.id,phoneNumber:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:r.terms,type:"buscapersonas"};g.update(E,{balance:w,orders:[...z,me]});const je=(Number(ce.data().balance)||0)+r.price,Be=ce.data().sales||[],Ee={saleId:Z(ae(I,"sales")).id,productId:r.id,productName:r.name,price:r.price,renewalPrice:r.renewalPrice,provider:r.provider,providerId:r.providerId,providerPhone:_,customerId:l.id,customerName:N.customerName,customerPhone:N.phoneNumber,buyerName:l.name,buyerId:l.id,buyerPhone:l.phone,accountDetails:null,status:"pending",terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image};g.update(X,{balance:je,sales:[...Be,Ee]});const xe=B+r.price;g.set(le,{balance:xe,provider:r.providerId,updatedAt:Ge()},{merge:!0});const dt=Z(ae(I,"sales"));g.set(dt,{...me,provider:r.provider,providerId:r.providerId,providerPhone:_,saleDate:new Date().toISOString(),status:"pending",saleId:Ee.saleId,terms:r.terms,generalDetails:r.accountDetails,productUrl:r.image})}),k(g=>g-r.price),p(g=>({...g,orders:[...g.orders,{...N,status:r.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:r.status==="En stock"?{searchAccess:C?.searchAccess||"No proporcionado",activationDetails:C?.activationDetails||"No proporcionado"}:null}]})),G(null),L({message:r.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(r){W(r.message||"Error al procesar la compra"),console.error("Error en la compra:",r)}finally{O(!1)}},[N,l]),St=m.useCallback(r=>{U({name:r.name,accountDetails:r.accountDetails,provider:r.provider,terms:r.terms,accountType:r.accountType})},[]),ft=m.useCallback(r=>{U({name:r.name,terms:r.terms,provider:r.provider,accountType:r.accountType}),oe(!0)},[]),ot=m.useCallback(()=>{if(!l){q("/login");return}switch(S){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[l,S,q]),Ae=m.useCallback(r=>{r.preventDefault(),ee.trim()&&q(`/search?q=${encodeURIComponent(ee)}&category=Busca Personas`)},[ee,q]),Ye=m.useCallback(async()=>{try{await Pr($t),q("/")}catch(r){console.error("Error al cerrar sesión:",r),L({message:r.message||"Error al cerrar sesión"})}},[q]),ge=m.useCallback(r=>{if(!r||typeof r!="string")return"30 días";const C=r.match(/(\d+)\s*(mes|meses)/i);if(C)return`${parseInt(C[1],10)*30} días`;const g=r.match(/(\d+)\s*(día|días|dia|dias)/i);if(g)return`${parseInt(g[1],10)} días`;const E=r.match(/(\d+)/);return E?`${parseInt(E[1],10)} días`:"30 días"},[]),Le=m.useCallback(r=>r.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(r.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",r.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Fe=s.filter(r=>r.name.toLowerCase().includes(ee.toLowerCase())),et=m.useCallback(r=>r?r.split(" ").map(g=>g[0]).join("").slice(0,2).toUpperCase():"U",[]),we=[{id:"netflix",label:"Netflix",icon:wt,count:y.netflix},{id:"spotify",label:"Spotify",icon:tt,count:y.spotify},{id:"disney",label:"Disney+",icon:be,count:y.disney},{id:"max",label:"Max",icon:kt,count:y.max},{id:"primevideo",label:"Prime Video",icon:Zt,count:y.primevideo},{id:"vix",label:"Vix",icon:be,count:y.vix},{id:"crunchyroll",label:"Crunchyroll",icon:Qt,count:y.crunchyroll},{id:"canva",label:"Canva",icon:Jt,count:y.canva},{id:"chatgpt",label:"ChatGPT",icon:Vr,count:y.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:Yt,count:y.redessociales},{id:"dgo",label:"Dgo",icon:be,count:y.dgo},{id:"ligamax",label:"Liga Max",icon:Zt,count:y.ligamax},{id:"movistarplay",label:"Movistar Play",icon:be,count:y.movistarplay},{id:"youtube",label:"Youtube",icon:kt,count:y.youtube},{id:"deezer",label:"Deezer",icon:tt,count:y.deezer},{id:"tidal",label:"Tidal",icon:tt,count:y.tidal},{id:"vpn",label:"Vpn",icon:Yt,count:y.vpn},{id:"wintv",label:"Win Tv",icon:be,count:y.wintv},{id:"applemusic",label:"Apple Music",icon:tt,count:y.applemusic},{id:"appletv",label:"Apple Tv",icon:be,count:y.appletv},{id:"iptv",label:"Iptv",icon:be,count:y.iptv},{id:"flujotv",label:"Flujo Tv",icon:be,count:y.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:wt,count:y.vikirakuten},{id:"pornhub",label:"Pornhub",icon:kt,count:y.pornhub},{id:"paramount",label:"Paramount",icon:wt,count:y.paramount},{id:"licencias",label:"Licencias",icon:Wt,count:y.licencias},{id:"capcut",label:"Capcut",icon:Jt,count:y.capcut},{id:"duolingo",label:"Duolingo",icon:Qt,count:y.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Tr,count:y.buscapersonas}];return D?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(Xt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):Y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx($r,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:Y}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${o==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${o==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((r,C)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},C))})]}),e.jsxs("header",{className:`${o==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v.img,{src:pr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${o==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Busca Personas...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Busca Personas",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:nt,className:`p-2 rounded-full ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${o==="dark"?"claro":"oscuro"}`,children:o==="dark"?e.jsx(kr,{size:20}):e.jsx(wr,{size:20})}),l&&e.jsxs("button",{onClick:()=>ve(!0),className:`p-2 rounded-full relative ${o==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${Se.length} nuevas)`,children:[e.jsx(Bt,{size:20}),Se.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Se.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>J(!ye),"aria-label":"Abrir menú móvil","aria-expanded":ye,children:e.jsx(zr,{size:20,className:o==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:l?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(v.div,{className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",h.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ne(!fe),className:`flex items-center space-x-2 ${o==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":fe,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:l.photoURL?e.jsx("img",{src:l.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):et(l.name||l.email)}),e.jsx("span",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:l.name||"Usuario"}),e.jsx(Mr,{className:`ml-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ue,{children:fe&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${o==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{ot(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),Ne(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${o==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ue,{children:ye&&e.jsx(v.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${o==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Busca Personas...",value:ee,onChange:r=>re(r.target.value),className:`w-full py-2.5 px-5 ${o==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${o==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Busca Personas",onKeyDown:r=>r.key==="Enter"&&Ae(r)}),e.jsx("button",{onClick:Ae,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(Ot,{size:18})})]}),l&&e.jsxs("button",{onClick:()=>{ve(!0),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(Bt,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${o==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>J(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${r.id==="buscapersonas"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="buscapersonas"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",h.toFixed(2)]}),e.jsxs("button",{onClick:()=>{ot(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(Ft,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{Ye(),J(!1)},className:`text-sm flex items-center ${o==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(bt,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${o==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(Ut,{className:"mr-2"})," Ingresar"]}),e.jsxs(De,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${o==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>J(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(qt,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:rt,className:`fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${o==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(ke,{className:"text-lg"})})]}),l&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${o==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:l.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o==="dark"?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",h.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:we.map(r=>e.jsxs(De,{to:`/${r.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r.id==="buscapersonas"?"bg-blue-100 text-blue-600 border border-blue-300":o==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":r.id==="buscapersonas"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r.icon,{className:"text-lg"}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r.count})]},r.id))}),l&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Ye(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${o==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(bt,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-479e93c1e67e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(v.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Busca Personas"}),e.jsx(v.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${o==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Accede a servicios de búsqueda de personas con herramientas avanzadas y discretas"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${o==="dark"?"text-white":"text-gray-900"}`,children:"Servicios de Busca Personas"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!0),className:`text-sm sm:text-base ${o==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Fe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron servicios de Busca Personas que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:Fe.map(r=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${o==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(v.img,{whileHover:{scale:1.1},src:r.image,alt:r.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Le(r)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${o==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:r.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Dr,{className:"text-blue-500",size:13}),ge(r.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${o==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Pt(He[r.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:(He[r.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Fr,{className:"text-blue-500",size:13}),r.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${o==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Lr,{className:"text-blue-500",size:13}),r.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:r.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Re(r.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${o==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Re(r.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>St(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Or,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ft(r),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${o==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Wt,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(r),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(r.stock)>0||r.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(r.stock)<=0&&r.status!=="A pedido",children:[e.jsx(br,{size:16}),r.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},r.id))})]})]})}),e.jsx(ue,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>G(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:N.product.name})]}),e.jsxs("p",{className:`mb-4 ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Re(N.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:N.customerName,onChange:r=>G({...N,customerName:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:N.phoneNumber,onChange:r=>G({...N,phoneNumber:r.target.value}),className:`w-full py-2 px-3 rounded-lg ${o==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{oe(!0),U({name:N.product.name,terms:N.product.terms,provider:N.product.provider,accountType:N.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),Y&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:Y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(null),className:`flex-1 py-2 px-4 rounded-xl ${o==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:It,disabled:D,className:`flex-1 py-2 px-4 rounded-xl ${D?"bg-gray-500/50 cursor-not-allowed text-gray-400":o==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:D?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ue,{children:H&&!ne&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>U(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(ke,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",H.accountType]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",H.accountDetails]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ue,{children:ne&&H&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{oe(!1),U(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>{oe(!1),U(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",H.name]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",H.provider]}),e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",H.terms]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{oe(!1),U(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ue,{children:$e&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>K(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${o==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(ke,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${o==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(T6,{isOpen:!!V,message:V?.message||"",onClose:()=>{V?.onClose&&V.onClose(),L(null)},theme:o}),e.jsx(P6,{show:de,onClose:()=>ve(!1),notifications:Se,theme:o}),e.jsx(ue,{children:it&&e.jsx(v.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Qe,className:`fixed bottom-6 right-6 p-3 rounded-full ${o==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(Ir,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${o==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(vr,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(yr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${o==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(fr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${o==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};E6.propTypes={};const BV=()=>e.jsx(zV,{children:e.jsx(E6,{})});m.memo(()=>{const[a,t]=m.useState(null),[s,n]=m.useState(0),[i,u]=m.useState(!0),[l,p]=m.useState(null),[h,k]=m.useState(!1),[S,$]=m.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0}),[D,O]=m.useState(""),Y=cr();m.useEffect(()=>{const G=hr($t,async H=>{if(H)try{const U=await zt(Z(I,"users",H.uid));if(U.exists()){const ne=U.data();t({id:H.uid,name:ne.username||"Usuario",email:H.email,orders:ne.orders||[],role:ne.role||"user"}),n(Number(ne.balance)||0)}else p("Usuario no encontrado"),console.error("Usuario no encontrado en la base de datos")}catch(U){p("Error al cargar datos"),console.error(U)}else t(null),n(0);u(!1)});return()=>G()},[]),m.useEffect(()=>{const H=[{name:"Netflix",key:"netflix"},{name:"Spotify",key:"spotify"},{name:"Disney",key:"disney"},{name:"Max",key:"max"},{name:"Prime Video",key:"primevideo"},{name:"Vix",key:"vix"},{name:"Crunchyroll",key:"crunchyroll"},{name:"Canva",key:"canva"},{name:"ChatGPT",key:"chatgpt"},{name:"Redes Sociales",key:"redessociales"}].map(({name:U,key:ne})=>{const oe=Te(ae(I,"products"),We("category","==",U));return qe(oe,$e=>{$(K=>({...K,[ne]:$e.docs.length}))},$e=>console.error(`Error loading ${U}:`,$e))});return()=>H.forEach(U=>U())},[]);const W=()=>{if(!a)return Y("/login");Y({user:"/dashboard/user",affiliate:"/dashboard/affiliate",provider:"/dashboard/provider",admin:"/dashboard/admin"}[a.role]||"/dashboard/user")},N=G=>{G.preventDefault(),D.trim()&&Y(`/search?q=${encodeURIComponent(D)}`)};return i?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:[e.jsx(wx,{className:"animate-spin text-4xl text-cyan-500"}),e.jsx("span",{className:"ml-2 text-white",children:"Cargando..."})]}):l?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 p-4",children:[e.jsx(wx,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-400 mb-6",children:l}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600",children:"Reintentar"})]}):e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-800/80 backdrop-blur-sm",children:e.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(De,{to:"/",className:"flex items-center gap-2",children:[e.jsx("img",{src:pr,alt:"BlackStreaming",className:"h-8"}),e.jsx("span",{className:"text-lg font-bold text-cyan-500 hidden sm:block",children:"BlackStreaming"})]})}),e.jsx("form",{onSubmit:N,className:"flex-1 max-w-md mx-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full py-2 px-4 rounded-lg bg-gray-700 text-white border border-gray-600 focus:ring-2 focus:ring-cyan-500 focus:border-transparent",value:D,onChange:G=>O(G.target.value)}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-cyan-500",children:e.jsx(Tr,{size:20})})]})}),e.jsx("div",{className:"flex items-center gap-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:block text-sm text-gray-300",children:a.name}),e.jsxs("span",{className:"px-3 py-1 bg-gray-700 rounded-lg text-sm",children:["S/ ",s.toFixed(2)]}),e.jsx("button",{onClick:W,className:"p-2 hover:bg-gray-700 rounded-lg",title:"Dashboard",children:e.jsx(Vs,{className:"text-cyan-500",size:20})}),e.jsxs("button",{onClick:()=>{$t.signOut(),Y("/")},className:"flex items-center gap-1 px-3 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:[e.jsx(Vd,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Y("/login"),className:"px-3 py-2 text-sm hover:text-cyan-500",children:"Ingresar"}),e.jsx("button",{onClick:()=>Y("/register"),className:"px-3 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 text-sm",children:"Registrarse"})]})})]})}),e.jsx("main",{className:"flex-1 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-lg text-center",children:[e.jsx("div",{className:"p-4 bg-gray-800 rounded-full inline-flex mb-6",children:e.jsx(wx,{className:"text-4xl text-cyan-500"})}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"En Mantenimiento"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Estamos mejorando nuestra plataforma para ti."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-300 mb-6",children:[e.jsx(Dr,{className:"text-yellow-500"}),e.jsx("span",{children:"Volveremos pronto."})]}),e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"¿Qué estamos haciendo?"}),e.jsxs("ul",{className:"text-left space-y-2 text-gray-300",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Corrección de errores en el sistema de pedidos"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Solución de fallos en el retiro de dinero"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Arreglo de errores al pasar del sistema al pedido"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Actualización del dashboard del proveedor"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Actualización del dashboard del usuario"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Refuerzo de la seguridad general del sitio"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Mejora en la visualización y diseño"]})]}),e.jsx("button",{onClick:()=>k(!0),className:"mt-4 text-cyan-500 hover:text-cyan-400 underline",children:"Términos Generales"})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-800 rounded-lg max-w-lg w-full max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Términos y Condiciones"}),e.jsx("button",{onClick:()=>k(!1),className:"hover:text-gray-300",children:e.jsx(FiX,{size:24})})]}),e.jsx("div",{className:"space-y-4 text-gray-300",children:[{title:"Proceso de Compra",text:"El proveedor te contactará en 24 horas hábiles para los accesos."},{title:"Garantía",text:"7 días de garantía. El proveedor resolverá problemas o reembolsará."},{title:"Uso Responsable",text:"No nos responsabilizamos por suspensiones por mal uso."},{title:"Soporte",text:"Contacta al proveedor vía WhatsApp."},{title:"Renovaciones",text:"Solicita renovaciones manuales antes del fin del período."}].map(({title:G,text:H},U)=>e.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:G}),e.jsx("p",{children:H})]},U))}),e.jsx("button",{onClick:()=>k(!1),className:"w-full mt-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-800 py-6",children:e.jsxs("div",{className:"container mx-auto px-4 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:pr,alt:"BlackStreaming",className:"h-6"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-500",children:"BlackStreaming"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Desarrollado por Saiph"})]})})]})});const LV=m.createContext(),OV=({children:a})=>{const t=Eb(ou),[s,n]=m.useState(null),[i,u]=m.useState(!0);return m.useEffect(()=>{const l=hr(t,p=>{n(p),u(!1)});return()=>l()},[]),e.jsx(LV.Provider,{value:{user:s,loading:i},children:!i&&a})},VV=()=>e.jsx(_$,{children:e.jsxs(e.Fragment,{children:[e.jsx(mr,{path:"/",element:e.jsx(Q3,{})}),e.jsx(mr,{path:"/login",element:e.jsx(aO,{})}),e.jsx(mr,{path:"/register",element:e.jsx(sO,{})}),e.jsx(mr,{path:"/forgot-password",element:e.jsx(nO,{})}),e.jsx(mr,{path:"/dashboard/user",element:e.jsx(c4,{})}),e.jsx(mr,{path:"/dashboard/affiliate",element:e.jsx(bO,{})}),e.jsx(mr,{path:"/dashboard/provider",element:e.jsx(d4,{})}),e.jsx(mr,{path:"/dashboard/admin",element:e.jsx(k4,{})}),e.jsx(mr,{path:"/netflix",element:e.jsx(MO,{})}),e.jsx(mr,{path:"/disney",element:e.jsx(BO,{})}),e.jsx(mr,{path:"/max",element:e.jsx(OO,{})}),e.jsx(mr,{path:"/spotify",element:e.jsx(FO,{})}),e.jsx(mr,{path:"/primevideo",element:e.jsx(qO,{})}),e.jsx(mr,{path:"/vix",element:e.jsx(WO,{})}),e.jsx(mr,{path:"/canva",element:e.jsx(KO,{})}),e.jsx(mr,{path:"/chatgpt",element:e.jsx(YO,{})}),e.jsx(mr,{path:"/crunchyroll",element:e.jsx(JO,{})}),e.jsx(mr,{path:"/redessociales",element:e.jsx(eV,{})}),e.jsx(mr,{path:"/applemusic",element:e.jsx(rV,{})}),e.jsx(mr,{path:"/appletv",element:e.jsx(sV,{})}),e.jsx(mr,{path:"/iptv",element:e.jsx(oV,{})}),e.jsx(mr,{path:"/flujotv",element:e.jsx(lV,{})}),e.jsx(mr,{path:"/vikirakuten",element:e.jsx(dV,{})}),e.jsx(mr,{path:"/pornhub",element:e.jsx(mV,{})}),e.jsx(mr,{path:"/paramount",element:e.jsx(hV,{})}),e.jsx(mr,{path:"/licencias",element:e.jsx(gV,{})}),e.jsx(mr,{path:"/capcut",element:e.jsx(fV,{})}),e.jsx(mr,{path:"/duolingo",element:e.jsx(vV,{})}),e.jsx(mr,{path:"/dgo",element:e.jsx(kV,{})}),e.jsx(mr,{path:"/ligamax",element:e.jsx(jV,{})}),e.jsx(mr,{path:"/movistarplay",element:e.jsx(SV,{})}),e.jsx(mr,{path:"/youtube",element:e.jsx(TV,{})}),e.jsx(mr,{path:"/deezer",element:e.jsx(EV,{})}),e.jsx(mr,{path:"/tidal",element:e.jsx(DV,{})}),e.jsx(mr,{path:"/vpn",element:e.jsx(AV,{})}),e.jsx(mr,{path:"/wintv",element:e.jsx(MV,{})}),e.jsx(mr,{path:"/buscapersonas",element:e.jsx(BV,{})})]})});US.createRoot(document.getElementById("root")).render(e.jsx(Cs.StrictMode,{children:e.jsx(rT,{children:e.jsx(OV,{children:e.jsx(VV,{})})})}));
