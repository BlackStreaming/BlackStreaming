(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();function wP(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Fw={exports:{}},Zx={},Uw={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xc=Symbol.for("react.element"),kP=Symbol.for("react.portal"),IP=Symbol.for("react.fragment"),PP=Symbol.for("react.strict_mode"),SP=Symbol.for("react.profiler"),CP=Symbol.for("react.provider"),EP=Symbol.for("react.context"),TP=Symbol.for("react.forward_ref"),_P=Symbol.for("react.suspense"),DP=Symbol.for("react.memo"),AP=Symbol.for("react.lazy"),pb=Symbol.iterator;function RP(s){return s===null||typeof s!="object"?null:(s=pb&&s[pb]||s["@@iterator"],typeof s=="function"?s:null)}var $w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ww=Object.assign,qw={};function Jo(s,t,r){this.props=s,this.context=t,this.refs=qw,this.updater=r||$w}Jo.prototype.isReactComponent={};Jo.prototype.setState=function(s,t){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,t,"setState")};Jo.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function Hw(){}Hw.prototype=Jo.prototype;function K0(s,t,r){this.props=s,this.context=t,this.refs=qw,this.updater=r||$w}var Y0=K0.prototype=new Hw;Y0.constructor=K0;Ww(Y0,Jo.prototype);Y0.isPureReactComponent=!0;var fb=Array.isArray,Gw=Object.prototype.hasOwnProperty,X0={current:null},Qw={key:!0,ref:!0,__self:!0,__source:!0};function Kw(s,t,r){var a,i={},l=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)Gw.call(t,a)&&!Qw.hasOwnProperty(a)&&(i[a]=t[a]);var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){for(var d=Array(c),h=0;h<c;h++)d[h]=arguments[h+2];i.children=d}if(s&&s.defaultProps)for(a in c=s.defaultProps,c)i[a]===void 0&&(i[a]=c[a]);return{$$typeof:Xc,type:s,key:l,ref:o,props:i,_owner:X0.current}}function MP(s,t){return{$$typeof:Xc,type:s.type,key:t,ref:s.ref,props:s.props,_owner:s._owner}}function J0(s){return typeof s=="object"&&s!==null&&s.$$typeof===Xc}function LP(s){var t={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(r){return t[r]})}var gb=/\/+/g;function th(s,t){return typeof s=="object"&&s!==null&&s.key!=null?LP(""+s.key):t.toString(36)}function fu(s,t,r,a,i){var l=typeof s;(l==="undefined"||l==="boolean")&&(s=null);var o=!1;if(s===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(s.$$typeof){case Xc:case kP:o=!0}}if(o)return o=s,i=i(o),s=a===""?"."+th(o,0):a,fb(i)?(r="",s!=null&&(r=s.replace(gb,"$&/")+"/"),fu(i,t,r,"",function(h){return h})):i!=null&&(J0(i)&&(i=MP(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(gb,"$&/")+"/")+s)),t.push(i)),1;if(o=0,a=a===""?".":a+":",fb(s))for(var c=0;c<s.length;c++){l=s[c];var d=a+th(l,c);o+=fu(l,t,r,d,i)}else if(d=RP(s),typeof d=="function")for(s=d.call(s),c=0;!(l=s.next()).done;)l=l.value,d=a+th(l,c++),o+=fu(l,t,r,d,i);else if(l==="object")throw t=String(s),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Bd(s,t,r){if(s==null)return s;var a=[],i=0;return fu(s,a,"","",function(l){return t.call(r,l,i++)}),a}function OP(s){if(s._status===-1){var t=s._result;t=t(),t.then(function(r){(s._status===0||s._status===-1)&&(s._status=1,s._result=r)},function(r){(s._status===0||s._status===-1)&&(s._status=2,s._result=r)}),s._status===-1&&(s._status=0,s._result=t)}if(s._status===1)return s._result.default;throw s._result}var mr={current:null},gu={transition:null},VP={ReactCurrentDispatcher:mr,ReactCurrentBatchConfig:gu,ReactCurrentOwner:X0};function Yw(){throw Error("act(...) is not supported in production builds of React.")}Tt.Children={map:Bd,forEach:function(s,t,r){Bd(s,function(){t.apply(this,arguments)},r)},count:function(s){var t=0;return Bd(s,function(){t++}),t},toArray:function(s){return Bd(s,function(t){return t})||[]},only:function(s){if(!J0(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};Tt.Component=Jo;Tt.Fragment=IP;Tt.Profiler=SP;Tt.PureComponent=K0;Tt.StrictMode=PP;Tt.Suspense=_P;Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VP;Tt.act=Yw;Tt.cloneElement=function(s,t,r){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var a=Ww({},s.props),i=s.key,l=s.ref,o=s._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=X0.current),t.key!==void 0&&(i=""+t.key),s.type&&s.type.defaultProps)var c=s.type.defaultProps;for(d in t)Gw.call(t,d)&&!Qw.hasOwnProperty(d)&&(a[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)a.children=r;else if(1<d){c=Array(d);for(var h=0;h<d;h++)c[h]=arguments[h+2];a.children=c}return{$$typeof:Xc,type:s.type,key:i,ref:l,props:a,_owner:o}};Tt.createContext=function(s){return s={$$typeof:EP,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:CP,_context:s},s.Consumer=s};Tt.createElement=Kw;Tt.createFactory=function(s){var t=Kw.bind(null,s);return t.type=s,t};Tt.createRef=function(){return{current:null}};Tt.forwardRef=function(s){return{$$typeof:TP,render:s}};Tt.isValidElement=J0;Tt.lazy=function(s){return{$$typeof:AP,_payload:{_status:-1,_result:s},_init:OP}};Tt.memo=function(s,t){return{$$typeof:DP,type:s,compare:t===void 0?null:t}};Tt.startTransition=function(s){var t=gu.transition;gu.transition={};try{s()}finally{gu.transition=t}};Tt.unstable_act=Yw;Tt.useCallback=function(s,t){return mr.current.useCallback(s,t)};Tt.useContext=function(s){return mr.current.useContext(s)};Tt.useDebugValue=function(){};Tt.useDeferredValue=function(s){return mr.current.useDeferredValue(s)};Tt.useEffect=function(s,t){return mr.current.useEffect(s,t)};Tt.useId=function(){return mr.current.useId()};Tt.useImperativeHandle=function(s,t,r){return mr.current.useImperativeHandle(s,t,r)};Tt.useInsertionEffect=function(s,t){return mr.current.useInsertionEffect(s,t)};Tt.useLayoutEffect=function(s,t){return mr.current.useLayoutEffect(s,t)};Tt.useMemo=function(s,t){return mr.current.useMemo(s,t)};Tt.useReducer=function(s,t,r){return mr.current.useReducer(s,t,r)};Tt.useRef=function(s){return mr.current.useRef(s)};Tt.useState=function(s){return mr.current.useState(s)};Tt.useSyncExternalStore=function(s,t,r){return mr.current.useSyncExternalStore(s,t,r)};Tt.useTransition=function(){return mr.current.useTransition()};Tt.version="18.3.1";Uw.exports=Tt;var v=Uw.exports;const Sn=wP(v);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zP=v,BP=Symbol.for("react.element"),FP=Symbol.for("react.fragment"),UP=Object.prototype.hasOwnProperty,$P=zP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WP={key:!0,ref:!0,__self:!0,__source:!0};function Xw(s,t,r){var a,i={},l=null,o=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)UP.call(t,a)&&!WP.hasOwnProperty(a)&&(i[a]=t[a]);if(s&&s.defaultProps)for(a in t=s.defaultProps,t)i[a]===void 0&&(i[a]=t[a]);return{$$typeof:BP,type:s,key:l,ref:o,props:i,_owner:$P.current}}Zx.Fragment=FP;Zx.jsx=Xw;Zx.jsxs=Xw;Fw.exports=Zx;var e=Fw.exports,ap={},Jw={exports:{}},Mr={},Zw={exports:{}},e5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function t(he,be){var fe=he.length;he.push(be);e:for(;0<fe;){var ze=fe-1>>>1,Me=he[ze];if(0<i(Me,be))he[ze]=be,he[fe]=Me,fe=ze;else break e}}function r(he){return he.length===0?null:he[0]}function a(he){if(he.length===0)return null;var be=he[0],fe=he.pop();if(fe!==be){he[0]=fe;e:for(var ze=0,Me=he.length,Pe=Me>>>1;ze<Pe;){var He=2*(ze+1)-1,Ge=he[He],n=He+1,j=he[n];if(0>i(Ge,fe))n<Me&&0>i(j,Ge)?(he[ze]=j,he[n]=fe,ze=n):(he[ze]=Ge,he[He]=fe,ze=He);else if(n<Me&&0>i(j,fe))he[ze]=j,he[n]=fe,ze=n;else break e}}return be}function i(he,be){var fe=he.sortIndex-be.sortIndex;return fe!==0?fe:he.id-be.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var o=Date,c=o.now();s.unstable_now=function(){return o.now()-c}}var d=[],h=[],g=1,N=null,k=3,E=!1,y=!1,O=!1,_=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(he){for(var be=r(h);be!==null;){if(be.callback===null)a(h);else if(be.startTime<=he)a(h),be.sortIndex=be.expirationTime,t(d,be);else break;be=r(h)}}function K(he){if(O=!1,L(he),!y)if(r(d)!==null)y=!0,Le(H);else{var be=r(h);be!==null&&De(K,be.startTime-he)}}function H(he,be){y=!1,O&&(O=!1,A(u),u=-1),E=!0;var fe=k;try{for(L(be),N=r(d);N!==null&&(!(N.expirationTime>be)||he&&!te());){var ze=N.callback;if(typeof ze=="function"){N.callback=null,k=N.priorityLevel;var Me=ze(N.expirationTime<=be);be=s.unstable_now(),typeof Me=="function"?N.callback=Me:N===r(d)&&a(d),L(be)}else a(d);N=r(d)}if(N!==null)var Pe=!0;else{var He=r(h);He!==null&&De(K,He.startTime-be),Pe=!1}return Pe}finally{N=null,k=fe,E=!1}}var G=!1,R=null,u=-1,q=5,U=-1;function te(){return!(s.unstable_now()-U<q)}function se(){if(R!==null){var he=s.unstable_now();U=he;var be=!0;try{be=R(!0,he)}finally{be?X():(G=!1,R=null)}}else G=!1}var X;if(typeof z=="function")X=function(){z(se)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,pe=$.port2;$.port1.onmessage=se,X=function(){pe.postMessage(null)}}else X=function(){_(se,0)};function Le(he){R=he,G||(G=!0,X())}function De(he,be){u=_(function(){he(s.unstable_now())},be)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(he){he.callback=null},s.unstable_continueExecution=function(){y||E||(y=!0,Le(H))},s.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<he?Math.floor(1e3/he):5},s.unstable_getCurrentPriorityLevel=function(){return k},s.unstable_getFirstCallbackNode=function(){return r(d)},s.unstable_next=function(he){switch(k){case 1:case 2:case 3:var be=3;break;default:be=k}var fe=k;k=be;try{return he()}finally{k=fe}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(he,be){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var fe=k;k=he;try{return be()}finally{k=fe}},s.unstable_scheduleCallback=function(he,be,fe){var ze=s.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?ze+fe:ze):fe=ze,he){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=fe+Me,he={id:g++,callback:be,priorityLevel:he,startTime:fe,expirationTime:Me,sortIndex:-1},fe>ze?(he.sortIndex=fe,t(h,he),r(d)===null&&he===r(h)&&(O?(A(u),u=-1):O=!0,De(K,fe-ze))):(he.sortIndex=Me,t(d,he),y||E||(y=!0,Le(H))),he},s.unstable_shouldYield=te,s.unstable_wrapCallback=function(he){var be=k;return function(){var fe=k;k=be;try{return he.apply(this,arguments)}finally{k=fe}}}})(e5);Zw.exports=e5;var qP=Zw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HP=v,Rr=qP;function Ve(s){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+s,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var t5=new Set,xc={};function Oi(s,t){Mo(s,t),Mo(s+"Capture",t)}function Mo(s,t){for(xc[s]=t,s=0;s<t.length;s++)t5.add(t[s])}var Qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),np=Object.prototype.hasOwnProperty,GP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yb={},bb={};function QP(s){return np.call(bb,s)?!0:np.call(yb,s)?!1:GP.test(s)?bb[s]=!0:(yb[s]=!0,!1)}function KP(s,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function YP(s,t,r,a){if(t===null||typeof t>"u"||KP(s,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function hr(s,t,r,a,i,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=s,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var Hs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Hs[s]=new hr(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var t=s[0];Hs[t]=new hr(t,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Hs[s]=new hr(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Hs[s]=new hr(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Hs[s]=new hr(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Hs[s]=new hr(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Hs[s]=new hr(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Hs[s]=new hr(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Hs[s]=new hr(s,5,!1,s.toLowerCase(),null,!1,!1)});var Z0=/[\-:]([a-z])/g;function ef(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var t=s.replace(Z0,ef);Hs[t]=new hr(t,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var t=s.replace(Z0,ef);Hs[t]=new hr(t,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var t=s.replace(Z0,ef);Hs[t]=new hr(t,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Hs[s]=new hr(s,1,!1,s.toLowerCase(),null,!1,!1)});Hs.xlinkHref=new hr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Hs[s]=new hr(s,1,!1,s.toLowerCase(),null,!0,!0)});function tf(s,t,r,a){var i=Hs.hasOwnProperty(t)?Hs[t]:null;(i!==null?i.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(YP(t,r,i,a)&&(r=null),a||i===null?QP(t)&&(r===null?s.removeAttribute(t):s.setAttribute(t,""+r)):i.mustUseProperty?s[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,a=i.attributeNamespace,r===null?s.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,a?s.setAttributeNS(a,t,r):s.setAttribute(t,r))))}var nn=HP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fd=Symbol.for("react.element"),no=Symbol.for("react.portal"),io=Symbol.for("react.fragment"),sf=Symbol.for("react.strict_mode"),ip=Symbol.for("react.profiler"),s5=Symbol.for("react.provider"),r5=Symbol.for("react.context"),rf=Symbol.for("react.forward_ref"),op=Symbol.for("react.suspense"),lp=Symbol.for("react.suspense_list"),af=Symbol.for("react.memo"),fn=Symbol.for("react.lazy"),a5=Symbol.for("react.offscreen"),vb=Symbol.iterator;function Nl(s){return s===null||typeof s!="object"?null:(s=vb&&s[vb]||s["@@iterator"],typeof s=="function"?s:null)}var ms=Object.assign,sh;function Al(s){if(sh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);sh=t&&t[1]||""}return`
`+sh+s}var rh=!1;function ah(s,t){if(!s||rh)return"";rh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var a=h}Reflect.construct(s,[],t)}else{try{t.call()}catch(h){a=h}s.call(t.prototype)}else{try{throw Error()}catch(h){a=h}s()}}catch(h){if(h&&a&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),l=a.stack.split(`
`),o=i.length-1,c=l.length-1;1<=o&&0<=c&&i[o]!==l[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==l[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==l[c]){var d=`
`+i[o].replace(" at new "," at ");return s.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",s.displayName)),d}while(1<=o&&0<=c);break}}}finally{rh=!1,Error.prepareStackTrace=r}return(s=s?s.displayName||s.name:"")?Al(s):""}function XP(s){switch(s.tag){case 5:return Al(s.type);case 16:return Al("Lazy");case 13:return Al("Suspense");case 19:return Al("SuspenseList");case 0:case 2:case 15:return s=ah(s.type,!1),s;case 11:return s=ah(s.type.render,!1),s;case 1:return s=ah(s.type,!0),s;default:return""}}function cp(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case io:return"Fragment";case no:return"Portal";case ip:return"Profiler";case sf:return"StrictMode";case op:return"Suspense";case lp:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case r5:return(s.displayName||"Context")+".Consumer";case s5:return(s._context.displayName||"Context")+".Provider";case rf:var t=s.render;return s=s.displayName,s||(s=t.displayName||t.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case af:return t=s.displayName||null,t!==null?t:cp(s.type)||"Memo";case fn:t=s._payload,s=s._init;try{return cp(s(t))}catch{}}return null}function JP(s){var t=s.type;switch(s.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=t.render,s=s.displayName||s.name||"",t.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cp(t);case 8:return t===sf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Bn(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function n5(s){var t=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ZP(s){var t=n5(s)?"checked":"value",r=Object.getOwnPropertyDescriptor(s.constructor.prototype,t),a=""+s[t];if(!s.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,l=r.set;return Object.defineProperty(s,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){a=""+o,l.call(this,o)}}),Object.defineProperty(s,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){s._valueTracker=null,delete s[t]}}}}function Ud(s){s._valueTracker||(s._valueTracker=ZP(s))}function i5(s){if(!s)return!1;var t=s._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return s&&(a=n5(s)?s.checked?"true":"false":s.value),s=a,s!==r?(t.setValue(s),!0):!1}function Hu(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function dp(s,t){var r=t.checked;return ms({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??s._wrapperState.initialChecked})}function jb(s,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Bn(t.value!=null?t.value:r),s._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function o5(s,t){t=t.checked,t!=null&&tf(s,"checked",t,!1)}function up(s,t){o5(s,t);var r=Bn(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+r):s.value!==""+r&&(s.value=""+r);else if(a==="submit"||a==="reset"){s.removeAttribute("value");return}t.hasOwnProperty("value")?xp(s,t.type,r):t.hasOwnProperty("defaultValue")&&xp(s,t.type,Bn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(s.defaultChecked=!!t.defaultChecked)}function Nb(s,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+s._wrapperState.initialValue,r||t===s.value||(s.value=t),s.defaultValue=t}r=s.name,r!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,r!==""&&(s.name=r)}function xp(s,t,r){(t!=="number"||Hu(s.ownerDocument)!==s)&&(r==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+r&&(s.defaultValue=""+r))}var Rl=Array.isArray;function Io(s,t,r,a){if(s=s.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<s.length;r++)i=t.hasOwnProperty("$"+s[r].value),s[r].selected!==i&&(s[r].selected=i),i&&a&&(s[r].defaultSelected=!0)}else{for(r=""+Bn(r),t=null,i=0;i<s.length;i++){if(s[i].value===r){s[i].selected=!0,a&&(s[i].defaultSelected=!0);return}t!==null||s[i].disabled||(t=s[i])}t!==null&&(t.selected=!0)}}function mp(s,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ve(91));return ms({},t,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function wb(s,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ve(92));if(Rl(r)){if(1<r.length)throw Error(Ve(93));r=r[0]}t=r}t==null&&(t=""),r=t}s._wrapperState={initialValue:Bn(r)}}function l5(s,t){var r=Bn(t.value),a=Bn(t.defaultValue);r!=null&&(r=""+r,r!==s.value&&(s.value=r),t.defaultValue==null&&s.defaultValue!==r&&(s.defaultValue=r)),a!=null&&(s.defaultValue=""+a)}function kb(s){var t=s.textContent;t===s._wrapperState.initialValue&&t!==""&&t!==null&&(s.value=t)}function c5(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hp(s,t){return s==null||s==="http://www.w3.org/1999/xhtml"?c5(t):s==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var $d,d5=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,i){MSApp.execUnsafeLocalFunction(function(){return s(t,r,a,i)})}:s}(function(s,t){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=t;else{for($d=$d||document.createElement("div"),$d.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$d.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;t.firstChild;)s.appendChild(t.firstChild)}});function mc(s,t){if(t){var r=s.firstChild;if(r&&r===s.lastChild&&r.nodeType===3){r.nodeValue=t;return}}s.textContent=t}var Wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eS=["Webkit","ms","Moz","O"];Object.keys(Wl).forEach(function(s){eS.forEach(function(t){t=t+s.charAt(0).toUpperCase()+s.substring(1),Wl[t]=Wl[s]})});function u5(s,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Wl.hasOwnProperty(s)&&Wl[s]?(""+t).trim():t+"px"}function x5(s,t){s=s.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,i=u5(r,t[r],a);r==="float"&&(r="cssFloat"),a?s.setProperty(r,i):s[r]=i}}var tS=ms({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pp(s,t){if(t){if(tS[s]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ve(137,s));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ve(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ve(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ve(62))}}function fp(s,t){if(s.indexOf("-")===-1)return typeof t.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gp=null;function nf(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yp=null,Po=null,So=null;function Ib(s){if(s=ed(s)){if(typeof yp!="function")throw Error(Ve(280));var t=s.stateNode;t&&(t=am(t),yp(s.stateNode,s.type,t))}}function m5(s){Po?So?So.push(s):So=[s]:Po=s}function h5(){if(Po){var s=Po,t=So;if(So=Po=null,Ib(s),t)for(s=0;s<t.length;s++)Ib(t[s])}}function p5(s,t){return s(t)}function f5(){}var nh=!1;function g5(s,t,r){if(nh)return s(t,r);nh=!0;try{return p5(s,t,r)}finally{nh=!1,(Po!==null||So!==null)&&(f5(),h5())}}function hc(s,t){var r=s.stateNode;if(r===null)return null;var a=am(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(s=s.type,a=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!a;break e;default:s=!1}if(s)return null;if(r&&typeof r!="function")throw Error(Ve(231,t,typeof r));return r}var bp=!1;if(Qa)try{var wl={};Object.defineProperty(wl,"passive",{get:function(){bp=!0}}),window.addEventListener("test",wl,wl),window.removeEventListener("test",wl,wl)}catch{bp=!1}function sS(s,t,r,a,i,l,o,c,d){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(g){this.onError(g)}}var ql=!1,Gu=null,Qu=!1,vp=null,rS={onError:function(s){ql=!0,Gu=s}};function aS(s,t,r,a,i,l,o,c,d){ql=!1,Gu=null,sS.apply(rS,arguments)}function nS(s,t,r,a,i,l,o,c,d){if(aS.apply(this,arguments),ql){if(ql){var h=Gu;ql=!1,Gu=null}else throw Error(Ve(198));Qu||(Qu=!0,vp=h)}}function Vi(s){var t=s,r=s;if(s.alternate)for(;t.return;)t=t.return;else{s=t;do t=s,t.flags&4098&&(r=t.return),s=t.return;while(s)}return t.tag===3?r:null}function y5(s){if(s.tag===13){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function Pb(s){if(Vi(s)!==s)throw Error(Ve(188))}function iS(s){var t=s.alternate;if(!t){if(t=Vi(s),t===null)throw Error(Ve(188));return t!==s?null:s}for(var r=s,a=t;;){var i=r.return;if(i===null)break;var l=i.alternate;if(l===null){if(a=i.return,a!==null){r=a;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===r)return Pb(i),s;if(l===a)return Pb(i),t;l=l.sibling}throw Error(Ve(188))}if(r.return!==a.return)r=i,a=l;else{for(var o=!1,c=i.child;c;){if(c===r){o=!0,r=i,a=l;break}if(c===a){o=!0,a=i,r=l;break}c=c.sibling}if(!o){for(c=l.child;c;){if(c===r){o=!0,r=l,a=i;break}if(c===a){o=!0,a=l,r=i;break}c=c.sibling}if(!o)throw Error(Ve(189))}}if(r.alternate!==a)throw Error(Ve(190))}if(r.tag!==3)throw Error(Ve(188));return r.stateNode.current===r?s:t}function b5(s){return s=iS(s),s!==null?v5(s):null}function v5(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var t=v5(s);if(t!==null)return t;s=s.sibling}return null}var j5=Rr.unstable_scheduleCallback,Sb=Rr.unstable_cancelCallback,oS=Rr.unstable_shouldYield,lS=Rr.unstable_requestPaint,js=Rr.unstable_now,cS=Rr.unstable_getCurrentPriorityLevel,of=Rr.unstable_ImmediatePriority,N5=Rr.unstable_UserBlockingPriority,Ku=Rr.unstable_NormalPriority,dS=Rr.unstable_LowPriority,w5=Rr.unstable_IdlePriority,em=null,va=null;function uS(s){if(va&&typeof va.onCommitFiberRoot=="function")try{va.onCommitFiberRoot(em,s,void 0,(s.current.flags&128)===128)}catch{}}var oa=Math.clz32?Math.clz32:hS,xS=Math.log,mS=Math.LN2;function hS(s){return s>>>=0,s===0?32:31-(xS(s)/mS|0)|0}var Wd=64,qd=4194304;function Ml(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Yu(s,t){var r=s.pendingLanes;if(r===0)return 0;var a=0,i=s.suspendedLanes,l=s.pingedLanes,o=r&268435455;if(o!==0){var c=o&~i;c!==0?a=Ml(c):(l&=o,l!==0&&(a=Ml(l)))}else o=r&~i,o!==0?a=Ml(o):l!==0&&(a=Ml(l));if(a===0)return 0;if(t!==0&&t!==a&&!(t&i)&&(i=a&-a,l=t&-t,i>=l||i===16&&(l&4194240)!==0))return t;if(a&4&&(a|=r&16),t=s.entangledLanes,t!==0)for(s=s.entanglements,t&=a;0<t;)r=31-oa(t),i=1<<r,a|=s[r],t&=~i;return a}function pS(s,t){switch(s){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fS(s,t){for(var r=s.suspendedLanes,a=s.pingedLanes,i=s.expirationTimes,l=s.pendingLanes;0<l;){var o=31-oa(l),c=1<<o,d=i[o];d===-1?(!(c&r)||c&a)&&(i[o]=pS(c,t)):d<=t&&(s.expiredLanes|=c),l&=~c}}function jp(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function k5(){var s=Wd;return Wd<<=1,!(Wd&4194240)&&(Wd=64),s}function ih(s){for(var t=[],r=0;31>r;r++)t.push(s);return t}function Jc(s,t,r){s.pendingLanes|=t,t!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,t=31-oa(t),s[t]=r}function gS(s,t){var r=s.pendingLanes&~t;s.pendingLanes=t,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=t,s.mutableReadLanes&=t,s.entangledLanes&=t,t=s.entanglements;var a=s.eventTimes;for(s=s.expirationTimes;0<r;){var i=31-oa(r),l=1<<i;t[i]=0,a[i]=-1,s[i]=-1,r&=~l}}function lf(s,t){var r=s.entangledLanes|=t;for(s=s.entanglements;r;){var a=31-oa(r),i=1<<a;i&t|s[a]&t&&(s[a]|=t),r&=~i}}var $t=0;function I5(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var P5,cf,S5,C5,E5,Np=!1,Hd=[],Cn=null,En=null,Tn=null,pc=new Map,fc=new Map,yn=[],yS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cb(s,t){switch(s){case"focusin":case"focusout":Cn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":Tn=null;break;case"pointerover":case"pointerout":pc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(t.pointerId)}}function kl(s,t,r,a,i,l){return s===null||s.nativeEvent!==l?(s={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:l,targetContainers:[i]},t!==null&&(t=ed(t),t!==null&&cf(t)),s):(s.eventSystemFlags|=a,t=s.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),s)}function bS(s,t,r,a,i){switch(t){case"focusin":return Cn=kl(Cn,s,t,r,a,i),!0;case"dragenter":return En=kl(En,s,t,r,a,i),!0;case"mouseover":return Tn=kl(Tn,s,t,r,a,i),!0;case"pointerover":var l=i.pointerId;return pc.set(l,kl(pc.get(l)||null,s,t,r,a,i)),!0;case"gotpointercapture":return l=i.pointerId,fc.set(l,kl(fc.get(l)||null,s,t,r,a,i)),!0}return!1}function T5(s){var t=hi(s.target);if(t!==null){var r=Vi(t);if(r!==null){if(t=r.tag,t===13){if(t=y5(r),t!==null){s.blockedOn=t,E5(s.priority,function(){S5(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){s.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}s.blockedOn=null}function yu(s){if(s.blockedOn!==null)return!1;for(var t=s.targetContainers;0<t.length;){var r=wp(s.domEventName,s.eventSystemFlags,t[0],s.nativeEvent);if(r===null){r=s.nativeEvent;var a=new r.constructor(r.type,r);gp=a,r.target.dispatchEvent(a),gp=null}else return t=ed(r),t!==null&&cf(t),s.blockedOn=r,!1;t.shift()}return!0}function Eb(s,t,r){yu(s)&&r.delete(t)}function vS(){Np=!1,Cn!==null&&yu(Cn)&&(Cn=null),En!==null&&yu(En)&&(En=null),Tn!==null&&yu(Tn)&&(Tn=null),pc.forEach(Eb),fc.forEach(Eb)}function Il(s,t){s.blockedOn===t&&(s.blockedOn=null,Np||(Np=!0,Rr.unstable_scheduleCallback(Rr.unstable_NormalPriority,vS)))}function gc(s){function t(i){return Il(i,s)}if(0<Hd.length){Il(Hd[0],s);for(var r=1;r<Hd.length;r++){var a=Hd[r];a.blockedOn===s&&(a.blockedOn=null)}}for(Cn!==null&&Il(Cn,s),En!==null&&Il(En,s),Tn!==null&&Il(Tn,s),pc.forEach(t),fc.forEach(t),r=0;r<yn.length;r++)a=yn[r],a.blockedOn===s&&(a.blockedOn=null);for(;0<yn.length&&(r=yn[0],r.blockedOn===null);)T5(r),r.blockedOn===null&&yn.shift()}var Co=nn.ReactCurrentBatchConfig,Xu=!0;function jS(s,t,r,a){var i=$t,l=Co.transition;Co.transition=null;try{$t=1,df(s,t,r,a)}finally{$t=i,Co.transition=l}}function NS(s,t,r,a){var i=$t,l=Co.transition;Co.transition=null;try{$t=4,df(s,t,r,a)}finally{$t=i,Co.transition=l}}function df(s,t,r,a){if(Xu){var i=wp(s,t,r,a);if(i===null)fh(s,t,a,Ju,r),Cb(s,a);else if(bS(i,s,t,r,a))a.stopPropagation();else if(Cb(s,a),t&4&&-1<yS.indexOf(s)){for(;i!==null;){var l=ed(i);if(l!==null&&P5(l),l=wp(s,t,r,a),l===null&&fh(s,t,a,Ju,r),l===i)break;i=l}i!==null&&a.stopPropagation()}else fh(s,t,a,null,r)}}var Ju=null;function wp(s,t,r,a){if(Ju=null,s=nf(a),s=hi(s),s!==null)if(t=Vi(s),t===null)s=null;else if(r=t.tag,r===13){if(s=y5(t),s!==null)return s;s=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;s=null}else t!==s&&(s=null);return Ju=s,null}function _5(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cS()){case of:return 1;case N5:return 4;case Ku:case dS:return 16;case w5:return 536870912;default:return 16}default:return 16}}var kn=null,uf=null,bu=null;function D5(){if(bu)return bu;var s,t=uf,r=t.length,a,i="value"in kn?kn.value:kn.textContent,l=i.length;for(s=0;s<r&&t[s]===i[s];s++);var o=r-s;for(a=1;a<=o&&t[r-a]===i[l-a];a++);return bu=i.slice(s,1<a?1-a:void 0)}function vu(s){var t=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&t===13&&(s=13)):s=t,s===10&&(s=13),32<=s||s===13?s:0}function Gd(){return!0}function Tb(){return!1}function Lr(s){function t(r,a,i,l,o){this._reactName=r,this._targetInst=i,this.type=a,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var c in s)s.hasOwnProperty(c)&&(r=s[c],this[c]=r?r(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Gd:Tb,this.isPropagationStopped=Tb,this}return ms(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Gd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Gd)},persist:function(){},isPersistent:Gd}),t}var Zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xf=Lr(Zo),Zc=ms({},Zo,{view:0,detail:0}),wS=Lr(Zc),oh,lh,Pl,tm=ms({},Zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mf,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Pl&&(Pl&&s.type==="mousemove"?(oh=s.screenX-Pl.screenX,lh=s.screenY-Pl.screenY):lh=oh=0,Pl=s),oh)},movementY:function(s){return"movementY"in s?s.movementY:lh}}),_b=Lr(tm),kS=ms({},tm,{dataTransfer:0}),IS=Lr(kS),PS=ms({},Zc,{relatedTarget:0}),ch=Lr(PS),SS=ms({},Zo,{animationName:0,elapsedTime:0,pseudoElement:0}),CS=Lr(SS),ES=ms({},Zo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),TS=Lr(ES),_S=ms({},Zo,{data:0}),Db=Lr(_S),DS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MS(s){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(s):(s=RS[s])?!!t[s]:!1}function mf(){return MS}var LS=ms({},Zc,{key:function(s){if(s.key){var t=DS[s.key]||s.key;if(t!=="Unidentified")return t}return s.type==="keypress"?(s=vu(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?AS[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mf,charCode:function(s){return s.type==="keypress"?vu(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?vu(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),OS=Lr(LS),VS=ms({},tm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ab=Lr(VS),zS=ms({},Zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mf}),BS=Lr(zS),FS=ms({},Zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),US=Lr(FS),$S=ms({},tm,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),WS=Lr($S),qS=[9,13,27,32],hf=Qa&&"CompositionEvent"in window,Hl=null;Qa&&"documentMode"in document&&(Hl=document.documentMode);var HS=Qa&&"TextEvent"in window&&!Hl,A5=Qa&&(!hf||Hl&&8<Hl&&11>=Hl),Rb=String.fromCharCode(32),Mb=!1;function R5(s,t){switch(s){case"keyup":return qS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function M5(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var oo=!1;function GS(s,t){switch(s){case"compositionend":return M5(t);case"keypress":return t.which!==32?null:(Mb=!0,Rb);case"textInput":return s=t.data,s===Rb&&Mb?null:s;default:return null}}function QS(s,t){if(oo)return s==="compositionend"||!hf&&R5(s,t)?(s=D5(),bu=uf=kn=null,oo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return A5&&t.locale!=="ko"?null:t.data;default:return null}}var KS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lb(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t==="input"?!!KS[s.type]:t==="textarea"}function L5(s,t,r,a){m5(a),t=Zu(t,"onChange"),0<t.length&&(r=new xf("onChange","change",null,r,a),s.push({event:r,listeners:t}))}var Gl=null,yc=null;function YS(s){G5(s,0)}function sm(s){var t=uo(s);if(i5(t))return s}function XS(s,t){if(s==="change")return t}var O5=!1;if(Qa){var dh;if(Qa){var uh="oninput"in document;if(!uh){var Ob=document.createElement("div");Ob.setAttribute("oninput","return;"),uh=typeof Ob.oninput=="function"}dh=uh}else dh=!1;O5=dh&&(!document.documentMode||9<document.documentMode)}function Vb(){Gl&&(Gl.detachEvent("onpropertychange",V5),yc=Gl=null)}function V5(s){if(s.propertyName==="value"&&sm(yc)){var t=[];L5(t,yc,s,nf(s)),g5(YS,t)}}function JS(s,t,r){s==="focusin"?(Vb(),Gl=t,yc=r,Gl.attachEvent("onpropertychange",V5)):s==="focusout"&&Vb()}function ZS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return sm(yc)}function eC(s,t){if(s==="click")return sm(t)}function tC(s,t){if(s==="input"||s==="change")return sm(t)}function sC(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var ca=typeof Object.is=="function"?Object.is:sC;function bc(s,t){if(ca(s,t))return!0;if(typeof s!="object"||s===null||typeof t!="object"||t===null)return!1;var r=Object.keys(s),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var i=r[a];if(!np.call(t,i)||!ca(s[i],t[i]))return!1}return!0}function zb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Bb(s,t){var r=zb(s);s=0;for(var a;r;){if(r.nodeType===3){if(a=s+r.textContent.length,s<=t&&a>=t)return{node:r,offset:t-s};s=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zb(r)}}function z5(s,t){return s&&t?s===t?!0:s&&s.nodeType===3?!1:t&&t.nodeType===3?z5(s,t.parentNode):"contains"in s?s.contains(t):s.compareDocumentPosition?!!(s.compareDocumentPosition(t)&16):!1:!1}function B5(){for(var s=window,t=Hu();t instanceof s.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)s=t.contentWindow;else break;t=Hu(s.document)}return t}function pf(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t&&(t==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||t==="textarea"||s.contentEditable==="true")}function rC(s){var t=B5(),r=s.focusedElem,a=s.selectionRange;if(t!==r&&r&&r.ownerDocument&&z5(r.ownerDocument.documentElement,r)){if(a!==null&&pf(r)){if(t=a.start,s=a.end,s===void 0&&(s=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(s,r.value.length);else if(s=(t=r.ownerDocument||document)&&t.defaultView||window,s.getSelection){s=s.getSelection();var i=r.textContent.length,l=Math.min(a.start,i);a=a.end===void 0?l:Math.min(a.end,i),!s.extend&&l>a&&(i=a,a=l,l=i),i=Bb(r,l);var o=Bb(r,a);i&&o&&(s.rangeCount!==1||s.anchorNode!==i.node||s.anchorOffset!==i.offset||s.focusNode!==o.node||s.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),s.removeAllRanges(),l>a?(s.addRange(t),s.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),s.addRange(t)))}}for(t=[],s=r;s=s.parentNode;)s.nodeType===1&&t.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)s=t[r],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var aC=Qa&&"documentMode"in document&&11>=document.documentMode,lo=null,kp=null,Ql=null,Ip=!1;function Fb(s,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ip||lo==null||lo!==Hu(a)||(a=lo,"selectionStart"in a&&pf(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ql&&bc(Ql,a)||(Ql=a,a=Zu(kp,"onSelect"),0<a.length&&(t=new xf("onSelect","select",null,t,r),s.push({event:t,listeners:a}),t.target=lo)))}function Qd(s,t){var r={};return r[s.toLowerCase()]=t.toLowerCase(),r["Webkit"+s]="webkit"+t,r["Moz"+s]="moz"+t,r}var co={animationend:Qd("Animation","AnimationEnd"),animationiteration:Qd("Animation","AnimationIteration"),animationstart:Qd("Animation","AnimationStart"),transitionend:Qd("Transition","TransitionEnd")},xh={},F5={};Qa&&(F5=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function rm(s){if(xh[s])return xh[s];if(!co[s])return s;var t=co[s],r;for(r in t)if(t.hasOwnProperty(r)&&r in F5)return xh[s]=t[r];return s}var U5=rm("animationend"),$5=rm("animationiteration"),W5=rm("animationstart"),q5=rm("transitionend"),H5=new Map,Ub="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xn(s,t){H5.set(s,t),Oi(t,[s])}for(var mh=0;mh<Ub.length;mh++){var hh=Ub[mh],nC=hh.toLowerCase(),iC=hh[0].toUpperCase()+hh.slice(1);Xn(nC,"on"+iC)}Xn(U5,"onAnimationEnd");Xn($5,"onAnimationIteration");Xn(W5,"onAnimationStart");Xn("dblclick","onDoubleClick");Xn("focusin","onFocus");Xn("focusout","onBlur");Xn(q5,"onTransitionEnd");Mo("onMouseEnter",["mouseout","mouseover"]);Mo("onMouseLeave",["mouseout","mouseover"]);Mo("onPointerEnter",["pointerout","pointerover"]);Mo("onPointerLeave",["pointerout","pointerover"]);Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ll));function $b(s,t,r){var a=s.type||"unknown-event";s.currentTarget=r,nS(a,t,void 0,s),s.currentTarget=null}function G5(s,t){t=(t&4)!==0;for(var r=0;r<s.length;r++){var a=s[r],i=a.event;a=a.listeners;e:{var l=void 0;if(t)for(var o=a.length-1;0<=o;o--){var c=a[o],d=c.instance,h=c.currentTarget;if(c=c.listener,d!==l&&i.isPropagationStopped())break e;$b(i,c,h),l=d}else for(o=0;o<a.length;o++){if(c=a[o],d=c.instance,h=c.currentTarget,c=c.listener,d!==l&&i.isPropagationStopped())break e;$b(i,c,h),l=d}}}if(Qu)throw s=vp,Qu=!1,vp=null,s}function ts(s,t){var r=t[Tp];r===void 0&&(r=t[Tp]=new Set);var a=s+"__bubble";r.has(a)||(Q5(t,s,2,!1),r.add(a))}function ph(s,t,r){var a=0;t&&(a|=4),Q5(r,s,a,t)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function vc(s){if(!s[Kd]){s[Kd]=!0,t5.forEach(function(r){r!=="selectionchange"&&(oC.has(r)||ph(r,!1,s),ph(r,!0,s))});var t=s.nodeType===9?s:s.ownerDocument;t===null||t[Kd]||(t[Kd]=!0,ph("selectionchange",!1,t))}}function Q5(s,t,r,a){switch(_5(t)){case 1:var i=jS;break;case 4:i=NS;break;default:i=df}r=i.bind(null,t,r,s),i=void 0,!bp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?s.addEventListener(t,r,{capture:!0,passive:i}):s.addEventListener(t,r,!0):i!==void 0?s.addEventListener(t,r,{passive:i}):s.addEventListener(t,r,!1)}function fh(s,t,r,a,i){var l=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var c=a.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=a.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;o=o.return}for(;c!==null;){if(o=hi(c),o===null)return;if(d=o.tag,d===5||d===6){a=l=o;continue e}c=c.parentNode}}a=a.return}g5(function(){var h=l,g=nf(r),N=[];e:{var k=H5.get(s);if(k!==void 0){var E=xf,y=s;switch(s){case"keypress":if(vu(r)===0)break e;case"keydown":case"keyup":E=OS;break;case"focusin":y="focus",E=ch;break;case"focusout":y="blur",E=ch;break;case"beforeblur":case"afterblur":E=ch;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=_b;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=IS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=BS;break;case U5:case $5:case W5:E=CS;break;case q5:E=US;break;case"scroll":E=wS;break;case"wheel":E=WS;break;case"copy":case"cut":case"paste":E=TS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Ab}var O=(t&4)!==0,_=!O&&s==="scroll",A=O?k!==null?k+"Capture":null:k;O=[];for(var z=h,L;z!==null;){L=z;var K=L.stateNode;if(L.tag===5&&K!==null&&(L=K,A!==null&&(K=hc(z,A),K!=null&&O.push(jc(z,K,L)))),_)break;z=z.return}0<O.length&&(k=new E(k,y,null,r,g),N.push({event:k,listeners:O}))}}if(!(t&7)){e:{if(k=s==="mouseover"||s==="pointerover",E=s==="mouseout"||s==="pointerout",k&&r!==gp&&(y=r.relatedTarget||r.fromElement)&&(hi(y)||y[Ka]))break e;if((E||k)&&(k=g.window===g?g:(k=g.ownerDocument)?k.defaultView||k.parentWindow:window,E?(y=r.relatedTarget||r.toElement,E=h,y=y?hi(y):null,y!==null&&(_=Vi(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(E=null,y=h),E!==y)){if(O=_b,K="onMouseLeave",A="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(O=Ab,K="onPointerLeave",A="onPointerEnter",z="pointer"),_=E==null?k:uo(E),L=y==null?k:uo(y),k=new O(K,z+"leave",E,r,g),k.target=_,k.relatedTarget=L,K=null,hi(g)===h&&(O=new O(A,z+"enter",y,r,g),O.target=L,O.relatedTarget=_,K=O),_=K,E&&y)t:{for(O=E,A=y,z=0,L=O;L;L=eo(L))z++;for(L=0,K=A;K;K=eo(K))L++;for(;0<z-L;)O=eo(O),z--;for(;0<L-z;)A=eo(A),L--;for(;z--;){if(O===A||A!==null&&O===A.alternate)break t;O=eo(O),A=eo(A)}O=null}else O=null;E!==null&&Wb(N,k,E,O,!1),y!==null&&_!==null&&Wb(N,_,y,O,!0)}}e:{if(k=h?uo(h):window,E=k.nodeName&&k.nodeName.toLowerCase(),E==="select"||E==="input"&&k.type==="file")var H=XS;else if(Lb(k))if(O5)H=tC;else{H=ZS;var G=JS}else(E=k.nodeName)&&E.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(H=eC);if(H&&(H=H(s,h))){L5(N,H,r,g);break e}G&&G(s,k,h),s==="focusout"&&(G=k._wrapperState)&&G.controlled&&k.type==="number"&&xp(k,"number",k.value)}switch(G=h?uo(h):window,s){case"focusin":(Lb(G)||G.contentEditable==="true")&&(lo=G,kp=h,Ql=null);break;case"focusout":Ql=kp=lo=null;break;case"mousedown":Ip=!0;break;case"contextmenu":case"mouseup":case"dragend":Ip=!1,Fb(N,r,g);break;case"selectionchange":if(aC)break;case"keydown":case"keyup":Fb(N,r,g)}var R;if(hf)e:{switch(s){case"compositionstart":var u="onCompositionStart";break e;case"compositionend":u="onCompositionEnd";break e;case"compositionupdate":u="onCompositionUpdate";break e}u=void 0}else oo?R5(s,r)&&(u="onCompositionEnd"):s==="keydown"&&r.keyCode===229&&(u="onCompositionStart");u&&(A5&&r.locale!=="ko"&&(oo||u!=="onCompositionStart"?u==="onCompositionEnd"&&oo&&(R=D5()):(kn=g,uf="value"in kn?kn.value:kn.textContent,oo=!0)),G=Zu(h,u),0<G.length&&(u=new Db(u,s,null,r,g),N.push({event:u,listeners:G}),R?u.data=R:(R=M5(r),R!==null&&(u.data=R)))),(R=HS?GS(s,r):QS(s,r))&&(h=Zu(h,"onBeforeInput"),0<h.length&&(g=new Db("onBeforeInput","beforeinput",null,r,g),N.push({event:g,listeners:h}),g.data=R))}G5(N,t)})}function jc(s,t,r){return{instance:s,listener:t,currentTarget:r}}function Zu(s,t){for(var r=t+"Capture",a=[];s!==null;){var i=s,l=i.stateNode;i.tag===5&&l!==null&&(i=l,l=hc(s,r),l!=null&&a.unshift(jc(s,l,i)),l=hc(s,t),l!=null&&a.push(jc(s,l,i))),s=s.return}return a}function eo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Wb(s,t,r,a,i){for(var l=t._reactName,o=[];r!==null&&r!==a;){var c=r,d=c.alternate,h=c.stateNode;if(d!==null&&d===a)break;c.tag===5&&h!==null&&(c=h,i?(d=hc(r,l),d!=null&&o.unshift(jc(r,d,c))):i||(d=hc(r,l),d!=null&&o.push(jc(r,d,c)))),r=r.return}o.length!==0&&s.push({event:t,listeners:o})}var lC=/\r\n?/g,cC=/\u0000|\uFFFD/g;function qb(s){return(typeof s=="string"?s:""+s).replace(lC,`
`).replace(cC,"")}function Yd(s,t,r){if(t=qb(t),qb(s)!==t&&r)throw Error(Ve(425))}function ex(){}var Pp=null,Sp=null;function Cp(s,t){return s==="textarea"||s==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ep=typeof setTimeout=="function"?setTimeout:void 0,dC=typeof clearTimeout=="function"?clearTimeout:void 0,Hb=typeof Promise=="function"?Promise:void 0,uC=typeof queueMicrotask=="function"?queueMicrotask:typeof Hb<"u"?function(s){return Hb.resolve(null).then(s).catch(xC)}:Ep;function xC(s){setTimeout(function(){throw s})}function gh(s,t){var r=t,a=0;do{var i=r.nextSibling;if(s.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(a===0){s.removeChild(i),gc(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=i}while(r);gc(t)}function _n(s){for(;s!=null;s=s.nextSibling){var t=s.nodeType;if(t===1||t===3)break;if(t===8){if(t=s.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return s}function Gb(s){s=s.previousSibling;for(var t=0;s;){if(s.nodeType===8){var r=s.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return s;t--}else r==="/$"&&t++}s=s.previousSibling}return null}var el=Math.random().toString(36).slice(2),ba="__reactFiber$"+el,Nc="__reactProps$"+el,Ka="__reactContainer$"+el,Tp="__reactEvents$"+el,mC="__reactListeners$"+el,hC="__reactHandles$"+el;function hi(s){var t=s[ba];if(t)return t;for(var r=s.parentNode;r;){if(t=r[Ka]||r[ba]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(s=Gb(s);s!==null;){if(r=s[ba])return r;s=Gb(s)}return t}s=r,r=s.parentNode}return null}function ed(s){return s=s[ba]||s[Ka],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function uo(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(Ve(33))}function am(s){return s[Nc]||null}var _p=[],xo=-1;function Jn(s){return{current:s}}function ss(s){0>xo||(s.current=_p[xo],_p[xo]=null,xo--)}function Kt(s,t){xo++,_p[xo]=s.current,s.current=t}var Fn={},rr=Jn(Fn),vr=Jn(!1),Ii=Fn;function Lo(s,t){var r=s.type.contextTypes;if(!r)return Fn;var a=s.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var i={},l;for(l in r)i[l]=t[l];return a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=t,s.__reactInternalMemoizedMaskedChildContext=i),i}function jr(s){return s=s.childContextTypes,s!=null}function tx(){ss(vr),ss(rr)}function Qb(s,t,r){if(rr.current!==Fn)throw Error(Ve(168));Kt(rr,t),Kt(vr,r)}function K5(s,t,r){var a=s.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var i in a)if(!(i in t))throw Error(Ve(108,JP(s)||"Unknown",i));return ms({},r,a)}function sx(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Fn,Ii=rr.current,Kt(rr,s),Kt(vr,vr.current),!0}function Kb(s,t,r){var a=s.stateNode;if(!a)throw Error(Ve(169));r?(s=K5(s,t,Ii),a.__reactInternalMemoizedMergedChildContext=s,ss(vr),ss(rr),Kt(rr,s)):ss(vr),Kt(vr,r)}var za=null,nm=!1,yh=!1;function Y5(s){za===null?za=[s]:za.push(s)}function pC(s){nm=!0,Y5(s)}function Zn(){if(!yh&&za!==null){yh=!0;var s=0,t=$t;try{var r=za;for($t=1;s<r.length;s++){var a=r[s];do a=a(!0);while(a!==null)}za=null,nm=!1}catch(i){throw za!==null&&(za=za.slice(s+1)),j5(of,Zn),i}finally{$t=t,yh=!1}}return null}var mo=[],ho=0,rx=null,ax=0,Ur=[],$r=0,Pi=null,Ba=1,Fa="";function di(s,t){mo[ho++]=ax,mo[ho++]=rx,rx=s,ax=t}function X5(s,t,r){Ur[$r++]=Ba,Ur[$r++]=Fa,Ur[$r++]=Pi,Pi=s;var a=Ba;s=Fa;var i=32-oa(a)-1;a&=~(1<<i),r+=1;var l=32-oa(t)+i;if(30<l){var o=i-i%5;l=(a&(1<<o)-1).toString(32),a>>=o,i-=o,Ba=1<<32-oa(t)+i|r<<i|a,Fa=l+s}else Ba=1<<l|r<<i|a,Fa=s}function ff(s){s.return!==null&&(di(s,1),X5(s,1,0))}function gf(s){for(;s===rx;)rx=mo[--ho],mo[ho]=null,ax=mo[--ho],mo[ho]=null;for(;s===Pi;)Pi=Ur[--$r],Ur[$r]=null,Fa=Ur[--$r],Ur[$r]=null,Ba=Ur[--$r],Ur[$r]=null}var _r=null,Er=null,ns=!1,ra=null;function J5(s,t){var r=qr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=s,t=s.deletions,t===null?(s.deletions=[r],s.flags|=16):t.push(r)}function Yb(s,t){switch(s.tag){case 5:var r=s.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(s.stateNode=t,_r=s,Er=_n(t.firstChild),!0):!1;case 6:return t=s.pendingProps===""||t.nodeType!==3?null:t,t!==null?(s.stateNode=t,_r=s,Er=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Pi!==null?{id:Ba,overflow:Fa}:null,s.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=qr(18,null,null,0),r.stateNode=t,r.return=s,s.child=r,_r=s,Er=null,!0):!1;default:return!1}}function Dp(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Ap(s){if(ns){var t=Er;if(t){var r=t;if(!Yb(s,t)){if(Dp(s))throw Error(Ve(418));t=_n(r.nextSibling);var a=_r;t&&Yb(s,t)?J5(a,r):(s.flags=s.flags&-4097|2,ns=!1,_r=s)}}else{if(Dp(s))throw Error(Ve(418));s.flags=s.flags&-4097|2,ns=!1,_r=s}}}function Xb(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;_r=s}function Xd(s){if(s!==_r)return!1;if(!ns)return Xb(s),ns=!0,!1;var t;if((t=s.tag!==3)&&!(t=s.tag!==5)&&(t=s.type,t=t!=="head"&&t!=="body"&&!Cp(s.type,s.memoizedProps)),t&&(t=Er)){if(Dp(s))throw Z5(),Error(Ve(418));for(;t;)J5(s,t),t=_n(t.nextSibling)}if(Xb(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ve(317));e:{for(s=s.nextSibling,t=0;s;){if(s.nodeType===8){var r=s.data;if(r==="/$"){if(t===0){Er=_n(s.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}s=s.nextSibling}Er=null}}else Er=_r?_n(s.stateNode.nextSibling):null;return!0}function Z5(){for(var s=Er;s;)s=_n(s.nextSibling)}function Oo(){Er=_r=null,ns=!1}function yf(s){ra===null?ra=[s]:ra.push(s)}var fC=nn.ReactCurrentBatchConfig;function Sl(s,t,r){if(s=r.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ve(309));var a=r.stateNode}if(!a)throw Error(Ve(147,s));var i=a,l=""+s;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var c=i.refs;o===null?delete c[l]:c[l]=o},t._stringRef=l,t)}if(typeof s!="string")throw Error(Ve(284));if(!r._owner)throw Error(Ve(290,s))}return s}function Jd(s,t){throw s=Object.prototype.toString.call(t),Error(Ve(31,s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s))}function Jb(s){var t=s._init;return t(s._payload)}function e2(s){function t(A,z){if(s){var L=A.deletions;L===null?(A.deletions=[z],A.flags|=16):L.push(z)}}function r(A,z){if(!s)return null;for(;z!==null;)t(A,z),z=z.sibling;return null}function a(A,z){for(A=new Map;z!==null;)z.key!==null?A.set(z.key,z):A.set(z.index,z),z=z.sibling;return A}function i(A,z){return A=Mn(A,z),A.index=0,A.sibling=null,A}function l(A,z,L){return A.index=L,s?(L=A.alternate,L!==null?(L=L.index,L<z?(A.flags|=2,z):L):(A.flags|=2,z)):(A.flags|=1048576,z)}function o(A){return s&&A.alternate===null&&(A.flags|=2),A}function c(A,z,L,K){return z===null||z.tag!==6?(z=Ih(L,A.mode,K),z.return=A,z):(z=i(z,L),z.return=A,z)}function d(A,z,L,K){var H=L.type;return H===io?g(A,z,L.props.children,K,L.key):z!==null&&(z.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===fn&&Jb(H)===z.type)?(K=i(z,L.props),K.ref=Sl(A,z,L),K.return=A,K):(K=Su(L.type,L.key,L.props,null,A.mode,K),K.ref=Sl(A,z,L),K.return=A,K)}function h(A,z,L,K){return z===null||z.tag!==4||z.stateNode.containerInfo!==L.containerInfo||z.stateNode.implementation!==L.implementation?(z=Ph(L,A.mode,K),z.return=A,z):(z=i(z,L.children||[]),z.return=A,z)}function g(A,z,L,K,H){return z===null||z.tag!==7?(z=Ni(L,A.mode,K,H),z.return=A,z):(z=i(z,L),z.return=A,z)}function N(A,z,L){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Ih(""+z,A.mode,L),z.return=A,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Fd:return L=Su(z.type,z.key,z.props,null,A.mode,L),L.ref=Sl(A,null,z),L.return=A,L;case no:return z=Ph(z,A.mode,L),z.return=A,z;case fn:var K=z._init;return N(A,K(z._payload),L)}if(Rl(z)||Nl(z))return z=Ni(z,A.mode,L,null),z.return=A,z;Jd(A,z)}return null}function k(A,z,L,K){var H=z!==null?z.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return H!==null?null:c(A,z,""+L,K);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Fd:return L.key===H?d(A,z,L,K):null;case no:return L.key===H?h(A,z,L,K):null;case fn:return H=L._init,k(A,z,H(L._payload),K)}if(Rl(L)||Nl(L))return H!==null?null:g(A,z,L,K,null);Jd(A,L)}return null}function E(A,z,L,K,H){if(typeof K=="string"&&K!==""||typeof K=="number")return A=A.get(L)||null,c(z,A,""+K,H);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Fd:return A=A.get(K.key===null?L:K.key)||null,d(z,A,K,H);case no:return A=A.get(K.key===null?L:K.key)||null,h(z,A,K,H);case fn:var G=K._init;return E(A,z,L,G(K._payload),H)}if(Rl(K)||Nl(K))return A=A.get(L)||null,g(z,A,K,H,null);Jd(z,K)}return null}function y(A,z,L,K){for(var H=null,G=null,R=z,u=z=0,q=null;R!==null&&u<L.length;u++){R.index>u?(q=R,R=null):q=R.sibling;var U=k(A,R,L[u],K);if(U===null){R===null&&(R=q);break}s&&R&&U.alternate===null&&t(A,R),z=l(U,z,u),G===null?H=U:G.sibling=U,G=U,R=q}if(u===L.length)return r(A,R),ns&&di(A,u),H;if(R===null){for(;u<L.length;u++)R=N(A,L[u],K),R!==null&&(z=l(R,z,u),G===null?H=R:G.sibling=R,G=R);return ns&&di(A,u),H}for(R=a(A,R);u<L.length;u++)q=E(R,A,u,L[u],K),q!==null&&(s&&q.alternate!==null&&R.delete(q.key===null?u:q.key),z=l(q,z,u),G===null?H=q:G.sibling=q,G=q);return s&&R.forEach(function(te){return t(A,te)}),ns&&di(A,u),H}function O(A,z,L,K){var H=Nl(L);if(typeof H!="function")throw Error(Ve(150));if(L=H.call(L),L==null)throw Error(Ve(151));for(var G=H=null,R=z,u=z=0,q=null,U=L.next();R!==null&&!U.done;u++,U=L.next()){R.index>u?(q=R,R=null):q=R.sibling;var te=k(A,R,U.value,K);if(te===null){R===null&&(R=q);break}s&&R&&te.alternate===null&&t(A,R),z=l(te,z,u),G===null?H=te:G.sibling=te,G=te,R=q}if(U.done)return r(A,R),ns&&di(A,u),H;if(R===null){for(;!U.done;u++,U=L.next())U=N(A,U.value,K),U!==null&&(z=l(U,z,u),G===null?H=U:G.sibling=U,G=U);return ns&&di(A,u),H}for(R=a(A,R);!U.done;u++,U=L.next())U=E(R,A,u,U.value,K),U!==null&&(s&&U.alternate!==null&&R.delete(U.key===null?u:U.key),z=l(U,z,u),G===null?H=U:G.sibling=U,G=U);return s&&R.forEach(function(se){return t(A,se)}),ns&&di(A,u),H}function _(A,z,L,K){if(typeof L=="object"&&L!==null&&L.type===io&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case Fd:e:{for(var H=L.key,G=z;G!==null;){if(G.key===H){if(H=L.type,H===io){if(G.tag===7){r(A,G.sibling),z=i(G,L.props.children),z.return=A,A=z;break e}}else if(G.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===fn&&Jb(H)===G.type){r(A,G.sibling),z=i(G,L.props),z.ref=Sl(A,G,L),z.return=A,A=z;break e}r(A,G);break}else t(A,G);G=G.sibling}L.type===io?(z=Ni(L.props.children,A.mode,K,L.key),z.return=A,A=z):(K=Su(L.type,L.key,L.props,null,A.mode,K),K.ref=Sl(A,z,L),K.return=A,A=K)}return o(A);case no:e:{for(G=L.key;z!==null;){if(z.key===G)if(z.tag===4&&z.stateNode.containerInfo===L.containerInfo&&z.stateNode.implementation===L.implementation){r(A,z.sibling),z=i(z,L.children||[]),z.return=A,A=z;break e}else{r(A,z);break}else t(A,z);z=z.sibling}z=Ph(L,A.mode,K),z.return=A,A=z}return o(A);case fn:return G=L._init,_(A,z,G(L._payload),K)}if(Rl(L))return y(A,z,L,K);if(Nl(L))return O(A,z,L,K);Jd(A,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,z!==null&&z.tag===6?(r(A,z.sibling),z=i(z,L),z.return=A,A=z):(r(A,z),z=Ih(L,A.mode,K),z.return=A,A=z),o(A)):r(A,z)}return _}var Vo=e2(!0),t2=e2(!1),nx=Jn(null),ix=null,po=null,bf=null;function vf(){bf=po=ix=null}function jf(s){var t=nx.current;ss(nx),s._currentValue=t}function Rp(s,t,r){for(;s!==null;){var a=s.alternate;if((s.childLanes&t)!==t?(s.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),s===r)break;s=s.return}}function Eo(s,t){ix=s,bf=po=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&t&&(yr=!0),s.firstContext=null)}function Qr(s){var t=s._currentValue;if(bf!==s)if(s={context:s,memoizedValue:t,next:null},po===null){if(ix===null)throw Error(Ve(308));po=s,ix.dependencies={lanes:0,firstContext:s}}else po=po.next=s;return t}var pi=null;function Nf(s){pi===null?pi=[s]:pi.push(s)}function s2(s,t,r,a){var i=t.interleaved;return i===null?(r.next=r,Nf(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ya(s,a)}function Ya(s,t){s.lanes|=t;var r=s.alternate;for(r!==null&&(r.lanes|=t),r=s,s=s.return;s!==null;)s.childLanes|=t,r=s.alternate,r!==null&&(r.childLanes|=t),r=s,s=s.return;return r.tag===3?r.stateNode:null}var gn=!1;function wf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r2(s,t){s=s.updateQueue,t.updateQueue===s&&(t.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function qa(s,t){return{eventTime:s,lane:t,tag:0,payload:null,callback:null,next:null}}function Dn(s,t,r){var a=s.updateQueue;if(a===null)return null;if(a=a.shared,Vt&2){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,Ya(s,r)}return i=a.interleaved,i===null?(t.next=t,Nf(a)):(t.next=i.next,i.next=t),a.interleaved=t,Ya(s,r)}function ju(s,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=s.pendingLanes,r|=a,t.lanes=r,lf(s,r)}}function Zb(s,t){var r=s.updateQueue,a=s.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var i=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?i=l=o:l=l.next=o,r=r.next}while(r!==null);l===null?i=l=t:l=l.next=t}else i=l=t;r={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:a.shared,effects:a.effects},s.updateQueue=r;return}s=r.lastBaseUpdate,s===null?r.firstBaseUpdate=t:s.next=t,r.lastBaseUpdate=t}function ox(s,t,r,a){var i=s.updateQueue;gn=!1;var l=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,h=d.next;d.next=null,o===null?l=h:o.next=h,o=d;var g=s.alternate;g!==null&&(g=g.updateQueue,c=g.lastBaseUpdate,c!==o&&(c===null?g.firstBaseUpdate=h:c.next=h,g.lastBaseUpdate=d))}if(l!==null){var N=i.baseState;o=0,g=h=d=null,c=l;do{var k=c.lane,E=c.eventTime;if((a&k)===k){g!==null&&(g=g.next={eventTime:E,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var y=s,O=c;switch(k=t,E=r,O.tag){case 1:if(y=O.payload,typeof y=="function"){N=y.call(E,N,k);break e}N=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=O.payload,k=typeof y=="function"?y.call(E,N,k):y,k==null)break e;N=ms({},N,k);break e;case 2:gn=!0}}c.callback!==null&&c.lane!==0&&(s.flags|=64,k=i.effects,k===null?i.effects=[c]:k.push(c))}else E={eventTime:E,lane:k,tag:c.tag,payload:c.payload,callback:c.callback,next:null},g===null?(h=g=E,d=N):g=g.next=E,o|=k;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;k=c,c=k.next,k.next=null,i.lastBaseUpdate=k,i.shared.pending=null}}while(1);if(g===null&&(d=N),i.baseState=d,i.firstBaseUpdate=h,i.lastBaseUpdate=g,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else l===null&&(i.shared.lanes=0);Ci|=o,s.lanes=o,s.memoizedState=N}}function ev(s,t,r){if(s=t.effects,t.effects=null,s!==null)for(t=0;t<s.length;t++){var a=s[t],i=a.callback;if(i!==null){if(a.callback=null,a=r,typeof i!="function")throw Error(Ve(191,i));i.call(a)}}}var td={},ja=Jn(td),wc=Jn(td),kc=Jn(td);function fi(s){if(s===td)throw Error(Ve(174));return s}function kf(s,t){switch(Kt(kc,t),Kt(wc,s),Kt(ja,td),s=t.nodeType,s){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hp(null,"");break;default:s=s===8?t.parentNode:t,t=s.namespaceURI||null,s=s.tagName,t=hp(t,s)}ss(ja),Kt(ja,t)}function zo(){ss(ja),ss(wc),ss(kc)}function a2(s){fi(kc.current);var t=fi(ja.current),r=hp(t,s.type);t!==r&&(Kt(wc,s),Kt(ja,r))}function If(s){wc.current===s&&(ss(ja),ss(wc))}var ls=Jn(0);function lx(s){for(var t=s;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var bh=[];function Pf(){for(var s=0;s<bh.length;s++)bh[s]._workInProgressVersionPrimary=null;bh.length=0}var Nu=nn.ReactCurrentDispatcher,vh=nn.ReactCurrentBatchConfig,Si=0,ds=null,Ps=null,Ds=null,cx=!1,Kl=!1,Ic=0,gC=0;function Ys(){throw Error(Ve(321))}function Sf(s,t){if(t===null)return!1;for(var r=0;r<t.length&&r<s.length;r++)if(!ca(s[r],t[r]))return!1;return!0}function Cf(s,t,r,a,i,l){if(Si=l,ds=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Nu.current=s===null||s.memoizedState===null?jC:NC,s=r(a,i),Kl){l=0;do{if(Kl=!1,Ic=0,25<=l)throw Error(Ve(301));l+=1,Ds=Ps=null,t.updateQueue=null,Nu.current=wC,s=r(a,i)}while(Kl)}if(Nu.current=dx,t=Ps!==null&&Ps.next!==null,Si=0,Ds=Ps=ds=null,cx=!1,t)throw Error(Ve(300));return s}function Ef(){var s=Ic!==0;return Ic=0,s}function ga(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ds===null?ds.memoizedState=Ds=s:Ds=Ds.next=s,Ds}function Kr(){if(Ps===null){var s=ds.alternate;s=s!==null?s.memoizedState:null}else s=Ps.next;var t=Ds===null?ds.memoizedState:Ds.next;if(t!==null)Ds=t,Ps=s;else{if(s===null)throw Error(Ve(310));Ps=s,s={memoizedState:Ps.memoizedState,baseState:Ps.baseState,baseQueue:Ps.baseQueue,queue:Ps.queue,next:null},Ds===null?ds.memoizedState=Ds=s:Ds=Ds.next=s}return Ds}function Pc(s,t){return typeof t=="function"?t(s):t}function jh(s){var t=Kr(),r=t.queue;if(r===null)throw Error(Ve(311));r.lastRenderedReducer=s;var a=Ps,i=a.baseQueue,l=r.pending;if(l!==null){if(i!==null){var o=i.next;i.next=l.next,l.next=o}a.baseQueue=i=l,r.pending=null}if(i!==null){l=i.next,a=a.baseState;var c=o=null,d=null,h=l;do{var g=h.lane;if((Si&g)===g)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),a=h.hasEagerState?h.eagerState:s(a,h.action);else{var N={lane:g,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(c=d=N,o=a):d=d.next=N,ds.lanes|=g,Ci|=g}h=h.next}while(h!==null&&h!==l);d===null?o=a:d.next=c,ca(a,t.memoizedState)||(yr=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=d,r.lastRenderedState=a}if(s=r.interleaved,s!==null){i=s;do l=i.lane,ds.lanes|=l,Ci|=l,i=i.next;while(i!==s)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Nh(s){var t=Kr(),r=t.queue;if(r===null)throw Error(Ve(311));r.lastRenderedReducer=s;var a=r.dispatch,i=r.pending,l=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do l=s(l,o.action),o=o.next;while(o!==i);ca(l,t.memoizedState)||(yr=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,a]}function n2(){}function i2(s,t){var r=ds,a=Kr(),i=t(),l=!ca(a.memoizedState,i);if(l&&(a.memoizedState=i,yr=!0),a=a.queue,Tf(c2.bind(null,r,a,s),[s]),a.getSnapshot!==t||l||Ds!==null&&Ds.memoizedState.tag&1){if(r.flags|=2048,Sc(9,l2.bind(null,r,a,i,t),void 0,null),Ms===null)throw Error(Ve(349));Si&30||o2(r,t,i)}return i}function o2(s,t,r){s.flags|=16384,s={getSnapshot:t,value:r},t=ds.updateQueue,t===null?(t={lastEffect:null,stores:null},ds.updateQueue=t,t.stores=[s]):(r=t.stores,r===null?t.stores=[s]:r.push(s))}function l2(s,t,r,a){t.value=r,t.getSnapshot=a,d2(t)&&u2(s)}function c2(s,t,r){return r(function(){d2(t)&&u2(s)})}function d2(s){var t=s.getSnapshot;s=s.value;try{var r=t();return!ca(s,r)}catch{return!0}}function u2(s){var t=Ya(s,1);t!==null&&la(t,s,1,-1)}function tv(s){var t=ga();return typeof s=="function"&&(s=s()),t.memoizedState=t.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pc,lastRenderedState:s},t.queue=s,s=s.dispatch=vC.bind(null,ds,s),[t.memoizedState,s]}function Sc(s,t,r,a){return s={tag:s,create:t,destroy:r,deps:a,next:null},t=ds.updateQueue,t===null?(t={lastEffect:null,stores:null},ds.updateQueue=t,t.lastEffect=s.next=s):(r=t.lastEffect,r===null?t.lastEffect=s.next=s:(a=r.next,r.next=s,s.next=a,t.lastEffect=s)),s}function x2(){return Kr().memoizedState}function wu(s,t,r,a){var i=ga();ds.flags|=s,i.memoizedState=Sc(1|t,r,void 0,a===void 0?null:a)}function im(s,t,r,a){var i=Kr();a=a===void 0?null:a;var l=void 0;if(Ps!==null){var o=Ps.memoizedState;if(l=o.destroy,a!==null&&Sf(a,o.deps)){i.memoizedState=Sc(t,r,l,a);return}}ds.flags|=s,i.memoizedState=Sc(1|t,r,l,a)}function sv(s,t){return wu(8390656,8,s,t)}function Tf(s,t){return im(2048,8,s,t)}function m2(s,t){return im(4,2,s,t)}function h2(s,t){return im(4,4,s,t)}function p2(s,t){if(typeof t=="function")return s=s(),t(s),function(){t(null)};if(t!=null)return s=s(),t.current=s,function(){t.current=null}}function f2(s,t,r){return r=r!=null?r.concat([s]):null,im(4,4,p2.bind(null,t,s),r)}function _f(){}function g2(s,t){var r=Kr();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Sf(t,a[1])?a[0]:(r.memoizedState=[s,t],s)}function y2(s,t){var r=Kr();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Sf(t,a[1])?a[0]:(s=s(),r.memoizedState=[s,t],s)}function b2(s,t,r){return Si&21?(ca(r,t)||(r=k5(),ds.lanes|=r,Ci|=r,s.baseState=!0),t):(s.baseState&&(s.baseState=!1,yr=!0),s.memoizedState=r)}function yC(s,t){var r=$t;$t=r!==0&&4>r?r:4,s(!0);var a=vh.transition;vh.transition={};try{s(!1),t()}finally{$t=r,vh.transition=a}}function v2(){return Kr().memoizedState}function bC(s,t,r){var a=Rn(s);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},j2(s))N2(t,r);else if(r=s2(s,t,r,a),r!==null){var i=ur();la(r,s,a,i),w2(r,t,a)}}function vC(s,t,r){var a=Rn(s),i={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(j2(s))N2(t,i);else{var l=s.alternate;if(s.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,c=l(o,r);if(i.hasEagerState=!0,i.eagerState=c,ca(c,o)){var d=t.interleaved;d===null?(i.next=i,Nf(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}r=s2(s,t,i,a),r!==null&&(i=ur(),la(r,s,a,i),w2(r,t,a))}}function j2(s){var t=s.alternate;return s===ds||t!==null&&t===ds}function N2(s,t){Kl=cx=!0;var r=s.pending;r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t}function w2(s,t,r){if(r&4194240){var a=t.lanes;a&=s.pendingLanes,r|=a,t.lanes=r,lf(s,r)}}var dx={readContext:Qr,useCallback:Ys,useContext:Ys,useEffect:Ys,useImperativeHandle:Ys,useInsertionEffect:Ys,useLayoutEffect:Ys,useMemo:Ys,useReducer:Ys,useRef:Ys,useState:Ys,useDebugValue:Ys,useDeferredValue:Ys,useTransition:Ys,useMutableSource:Ys,useSyncExternalStore:Ys,useId:Ys,unstable_isNewReconciler:!1},jC={readContext:Qr,useCallback:function(s,t){return ga().memoizedState=[s,t===void 0?null:t],s},useContext:Qr,useEffect:sv,useImperativeHandle:function(s,t,r){return r=r!=null?r.concat([s]):null,wu(4194308,4,p2.bind(null,t,s),r)},useLayoutEffect:function(s,t){return wu(4194308,4,s,t)},useInsertionEffect:function(s,t){return wu(4,2,s,t)},useMemo:function(s,t){var r=ga();return t=t===void 0?null:t,s=s(),r.memoizedState=[s,t],s},useReducer:function(s,t,r){var a=ga();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:t},a.queue=s,s=s.dispatch=bC.bind(null,ds,s),[a.memoizedState,s]},useRef:function(s){var t=ga();return s={current:s},t.memoizedState=s},useState:tv,useDebugValue:_f,useDeferredValue:function(s){return ga().memoizedState=s},useTransition:function(){var s=tv(!1),t=s[0];return s=yC.bind(null,s[1]),ga().memoizedState=s,[t,s]},useMutableSource:function(){},useSyncExternalStore:function(s,t,r){var a=ds,i=ga();if(ns){if(r===void 0)throw Error(Ve(407));r=r()}else{if(r=t(),Ms===null)throw Error(Ve(349));Si&30||o2(a,t,r)}i.memoizedState=r;var l={value:r,getSnapshot:t};return i.queue=l,sv(c2.bind(null,a,l,s),[s]),a.flags|=2048,Sc(9,l2.bind(null,a,l,r,t),void 0,null),r},useId:function(){var s=ga(),t=Ms.identifierPrefix;if(ns){var r=Fa,a=Ba;r=(a&~(1<<32-oa(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ic++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=gC++,t=":"+t+"r"+r.toString(32)+":";return s.memoizedState=t},unstable_isNewReconciler:!1},NC={readContext:Qr,useCallback:g2,useContext:Qr,useEffect:Tf,useImperativeHandle:f2,useInsertionEffect:m2,useLayoutEffect:h2,useMemo:y2,useReducer:jh,useRef:x2,useState:function(){return jh(Pc)},useDebugValue:_f,useDeferredValue:function(s){var t=Kr();return b2(t,Ps.memoizedState,s)},useTransition:function(){var s=jh(Pc)[0],t=Kr().memoizedState;return[s,t]},useMutableSource:n2,useSyncExternalStore:i2,useId:v2,unstable_isNewReconciler:!1},wC={readContext:Qr,useCallback:g2,useContext:Qr,useEffect:Tf,useImperativeHandle:f2,useInsertionEffect:m2,useLayoutEffect:h2,useMemo:y2,useReducer:Nh,useRef:x2,useState:function(){return Nh(Pc)},useDebugValue:_f,useDeferredValue:function(s){var t=Kr();return Ps===null?t.memoizedState=s:b2(t,Ps.memoizedState,s)},useTransition:function(){var s=Nh(Pc)[0],t=Kr().memoizedState;return[s,t]},useMutableSource:n2,useSyncExternalStore:i2,useId:v2,unstable_isNewReconciler:!1};function ta(s,t){if(s&&s.defaultProps){t=ms({},t),s=s.defaultProps;for(var r in s)t[r]===void 0&&(t[r]=s[r]);return t}return t}function Mp(s,t,r,a){t=s.memoizedState,r=r(a,t),r=r==null?t:ms({},t,r),s.memoizedState=r,s.lanes===0&&(s.updateQueue.baseState=r)}var om={isMounted:function(s){return(s=s._reactInternals)?Vi(s)===s:!1},enqueueSetState:function(s,t,r){s=s._reactInternals;var a=ur(),i=Rn(s),l=qa(a,i);l.payload=t,r!=null&&(l.callback=r),t=Dn(s,l,i),t!==null&&(la(t,s,i,a),ju(t,s,i))},enqueueReplaceState:function(s,t,r){s=s._reactInternals;var a=ur(),i=Rn(s),l=qa(a,i);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=Dn(s,l,i),t!==null&&(la(t,s,i,a),ju(t,s,i))},enqueueForceUpdate:function(s,t){s=s._reactInternals;var r=ur(),a=Rn(s),i=qa(r,a);i.tag=2,t!=null&&(i.callback=t),t=Dn(s,i,a),t!==null&&(la(t,s,a,r),ju(t,s,a))}};function rv(s,t,r,a,i,l,o){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(a,l,o):t.prototype&&t.prototype.isPureReactComponent?!bc(r,a)||!bc(i,l):!0}function k2(s,t,r){var a=!1,i=Fn,l=t.contextType;return typeof l=="object"&&l!==null?l=Qr(l):(i=jr(t)?Ii:rr.current,a=t.contextTypes,l=(a=a!=null)?Lo(s,i):Fn),t=new t(r,l),s.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=om,s.stateNode=t,t._reactInternals=s,a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=l),t}function av(s,t,r,a){s=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==s&&om.enqueueReplaceState(t,t.state,null)}function Lp(s,t,r,a){var i=s.stateNode;i.props=r,i.state=s.memoizedState,i.refs={},wf(s);var l=t.contextType;typeof l=="object"&&l!==null?i.context=Qr(l):(l=jr(t)?Ii:rr.current,i.context=Lo(s,l)),i.state=s.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Mp(s,t,l,r),i.state=s.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&om.enqueueReplaceState(i,i.state,null),ox(s,r,i,a),i.state=s.memoizedState),typeof i.componentDidMount=="function"&&(s.flags|=4194308)}function Bo(s,t){try{var r="",a=t;do r+=XP(a),a=a.return;while(a);var i=r}catch(l){i=`
Error generating stack: `+l.message+`
`+l.stack}return{value:s,source:t,stack:i,digest:null}}function wh(s,t,r){return{value:s,source:null,stack:r??null,digest:t??null}}function Op(s,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var kC=typeof WeakMap=="function"?WeakMap:Map;function I2(s,t,r){r=qa(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){xx||(xx=!0,Gp=a),Op(s,t)},r}function P2(s,t,r){r=qa(-1,r),r.tag=3;var a=s.type.getDerivedStateFromError;if(typeof a=="function"){var i=t.value;r.payload=function(){return a(i)},r.callback=function(){Op(s,t)}}var l=s.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Op(s,t),typeof a!="function"&&(An===null?An=new Set([this]):An.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function nv(s,t,r){var a=s.pingCache;if(a===null){a=s.pingCache=new kC;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(r)||(i.add(r),s=VC.bind(null,s,t,r),t.then(s,s))}function iv(s){do{var t;if((t=s.tag===13)&&(t=s.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return s;s=s.return}while(s!==null);return null}function ov(s,t,r,a,i){return s.mode&1?(s.flags|=65536,s.lanes=i,s):(s===t?s.flags|=65536:(s.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=qa(-1,1),t.tag=2,Dn(r,t,1))),r.lanes|=1),s)}var IC=nn.ReactCurrentOwner,yr=!1;function lr(s,t,r,a){t.child=s===null?t2(t,null,r,a):Vo(t,s.child,r,a)}function lv(s,t,r,a,i){r=r.render;var l=t.ref;return Eo(t,i),a=Cf(s,t,r,a,l,i),r=Ef(),s!==null&&!yr?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~i,Xa(s,t,i)):(ns&&r&&ff(t),t.flags|=1,lr(s,t,a,i),t.child)}function cv(s,t,r,a,i){if(s===null){var l=r.type;return typeof l=="function"&&!zf(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,S2(s,t,l,a,i)):(s=Su(r.type,null,a,t,t.mode,i),s.ref=t.ref,s.return=t,t.child=s)}if(l=s.child,!(s.lanes&i)){var o=l.memoizedProps;if(r=r.compare,r=r!==null?r:bc,r(o,a)&&s.ref===t.ref)return Xa(s,t,i)}return t.flags|=1,s=Mn(l,a),s.ref=t.ref,s.return=t,t.child=s}function S2(s,t,r,a,i){if(s!==null){var l=s.memoizedProps;if(bc(l,a)&&s.ref===t.ref)if(yr=!1,t.pendingProps=a=l,(s.lanes&i)!==0)s.flags&131072&&(yr=!0);else return t.lanes=s.lanes,Xa(s,t,i)}return Vp(s,t,r,a,i)}function C2(s,t,r){var a=t.pendingProps,i=a.children,l=s!==null?s.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(go,Sr),Sr|=r;else{if(!(r&1073741824))return s=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:s,cachePool:null,transitions:null},t.updateQueue=null,Kt(go,Sr),Sr|=s,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=l!==null?l.baseLanes:r,Kt(go,Sr),Sr|=a}else l!==null?(a=l.baseLanes|r,t.memoizedState=null):a=r,Kt(go,Sr),Sr|=a;return lr(s,t,i,r),t.child}function E2(s,t){var r=t.ref;(s===null&&r!==null||s!==null&&s.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Vp(s,t,r,a,i){var l=jr(r)?Ii:rr.current;return l=Lo(t,l),Eo(t,i),r=Cf(s,t,r,a,l,i),a=Ef(),s!==null&&!yr?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~i,Xa(s,t,i)):(ns&&a&&ff(t),t.flags|=1,lr(s,t,r,i),t.child)}function dv(s,t,r,a,i){if(jr(r)){var l=!0;sx(t)}else l=!1;if(Eo(t,i),t.stateNode===null)ku(s,t),k2(t,r,a),Lp(t,r,a,i),a=!0;else if(s===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var d=o.context,h=r.contextType;typeof h=="object"&&h!==null?h=Qr(h):(h=jr(r)?Ii:rr.current,h=Lo(t,h));var g=r.getDerivedStateFromProps,N=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function";N||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==a||d!==h)&&av(t,o,a,h),gn=!1;var k=t.memoizedState;o.state=k,ox(t,a,o,i),d=t.memoizedState,c!==a||k!==d||vr.current||gn?(typeof g=="function"&&(Mp(t,r,g,a),d=t.memoizedState),(c=gn||rv(t,r,c,a,k,d,h))?(N||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=d),o.props=a,o.state=d,o.context=h,a=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,r2(s,t),c=t.memoizedProps,h=t.type===t.elementType?c:ta(t.type,c),o.props=h,N=t.pendingProps,k=o.context,d=r.contextType,typeof d=="object"&&d!==null?d=Qr(d):(d=jr(r)?Ii:rr.current,d=Lo(t,d));var E=r.getDerivedStateFromProps;(g=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==N||k!==d)&&av(t,o,a,d),gn=!1,k=t.memoizedState,o.state=k,ox(t,a,o,i);var y=t.memoizedState;c!==N||k!==y||vr.current||gn?(typeof E=="function"&&(Mp(t,r,E,a),y=t.memoizedState),(h=gn||rv(t,r,h,a,k,y,d)||!1)?(g||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,y,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,y,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===s.memoizedProps&&k===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===s.memoizedProps&&k===s.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=y),o.props=a,o.state=y,o.context=d,a=h):(typeof o.componentDidUpdate!="function"||c===s.memoizedProps&&k===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===s.memoizedProps&&k===s.memoizedState||(t.flags|=1024),a=!1)}return zp(s,t,r,a,l,i)}function zp(s,t,r,a,i,l){E2(s,t);var o=(t.flags&128)!==0;if(!a&&!o)return i&&Kb(t,r,!1),Xa(s,t,l);a=t.stateNode,IC.current=t;var c=o&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,s!==null&&o?(t.child=Vo(t,s.child,null,l),t.child=Vo(t,null,c,l)):lr(s,t,c,l),t.memoizedState=a.state,i&&Kb(t,r,!0),t.child}function T2(s){var t=s.stateNode;t.pendingContext?Qb(s,t.pendingContext,t.pendingContext!==t.context):t.context&&Qb(s,t.context,!1),kf(s,t.containerInfo)}function uv(s,t,r,a,i){return Oo(),yf(i),t.flags|=256,lr(s,t,r,a),t.child}var Bp={dehydrated:null,treeContext:null,retryLane:0};function Fp(s){return{baseLanes:s,cachePool:null,transitions:null}}function _2(s,t,r){var a=t.pendingProps,i=ls.current,l=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=s!==null&&s.memoizedState===null?!1:(i&2)!==0),c?(l=!0,t.flags&=-129):(s===null||s.memoizedState!==null)&&(i|=1),Kt(ls,i&1),s===null)return Ap(t),s=t.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(t.mode&1?s.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,s=a.fallback,l?(a=t.mode,l=t.child,o={mode:"hidden",children:o},!(a&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=dm(o,a,0,null),s=Ni(s,a,r,null),l.return=t,s.return=t,l.sibling=s,t.child=l,t.child.memoizedState=Fp(r),t.memoizedState=Bp,s):Df(t,o));if(i=s.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return PC(s,t,o,a,c,i,r);if(l){l=a.fallback,o=t.mode,i=s.child,c=i.sibling;var d={mode:"hidden",children:a.children};return!(o&1)&&t.child!==i?(a=t.child,a.childLanes=0,a.pendingProps=d,t.deletions=null):(a=Mn(i,d),a.subtreeFlags=i.subtreeFlags&14680064),c!==null?l=Mn(c,l):(l=Ni(l,o,r,null),l.flags|=2),l.return=t,a.return=t,a.sibling=l,t.child=a,a=l,l=t.child,o=s.child.memoizedState,o=o===null?Fp(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=s.childLanes&~r,t.memoizedState=Bp,a}return l=s.child,s=l.sibling,a=Mn(l,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,s!==null&&(r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)),t.child=a,t.memoizedState=null,a}function Df(s,t){return t=dm({mode:"visible",children:t},s.mode,0,null),t.return=s,s.child=t}function Zd(s,t,r,a){return a!==null&&yf(a),Vo(t,s.child,null,r),s=Df(t,t.pendingProps.children),s.flags|=2,t.memoizedState=null,s}function PC(s,t,r,a,i,l,o){if(r)return t.flags&256?(t.flags&=-257,a=wh(Error(Ve(422))),Zd(s,t,o,a)):t.memoizedState!==null?(t.child=s.child,t.flags|=128,null):(l=a.fallback,i=t.mode,a=dm({mode:"visible",children:a.children},i,0,null),l=Ni(l,i,o,null),l.flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,t.mode&1&&Vo(t,s.child,null,o),t.child.memoizedState=Fp(o),t.memoizedState=Bp,l);if(!(t.mode&1))return Zd(s,t,o,null);if(i.data==="$!"){if(a=i.nextSibling&&i.nextSibling.dataset,a)var c=a.dgst;return a=c,l=Error(Ve(419)),a=wh(l,a,void 0),Zd(s,t,o,a)}if(c=(o&s.childLanes)!==0,yr||c){if(a=Ms,a!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(a.suspendedLanes|o)?0:i,i!==0&&i!==l.retryLane&&(l.retryLane=i,Ya(s,i),la(a,s,i,-1))}return Vf(),a=wh(Error(Ve(421))),Zd(s,t,o,a)}return i.data==="$?"?(t.flags|=128,t.child=s.child,t=zC.bind(null,s),i._reactRetry=t,null):(s=l.treeContext,Er=_n(i.nextSibling),_r=t,ns=!0,ra=null,s!==null&&(Ur[$r++]=Ba,Ur[$r++]=Fa,Ur[$r++]=Pi,Ba=s.id,Fa=s.overflow,Pi=t),t=Df(t,a.children),t.flags|=4096,t)}function xv(s,t,r){s.lanes|=t;var a=s.alternate;a!==null&&(a.lanes|=t),Rp(s.return,t,r)}function kh(s,t,r,a,i){var l=s.memoizedState;l===null?s.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:i}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=r,l.tailMode=i)}function D2(s,t,r){var a=t.pendingProps,i=a.revealOrder,l=a.tail;if(lr(s,t,a.children,r),a=ls.current,a&2)a=a&1|2,t.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=t.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&xv(s,r,t);else if(s.tag===19)xv(s,r,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}a&=1}if(Kt(ls,a),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)s=r.alternate,s!==null&&lx(s)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),kh(t,!1,i,r,l);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(s=i.alternate,s!==null&&lx(s)===null){t.child=i;break}s=i.sibling,i.sibling=r,r=i,i=s}kh(t,!0,r,null,l);break;case"together":kh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ku(s,t){!(t.mode&1)&&s!==null&&(s.alternate=null,t.alternate=null,t.flags|=2)}function Xa(s,t,r){if(s!==null&&(t.dependencies=s.dependencies),Ci|=t.lanes,!(r&t.childLanes))return null;if(s!==null&&t.child!==s.child)throw Error(Ve(153));if(t.child!==null){for(s=t.child,r=Mn(s,s.pendingProps),t.child=r,r.return=t;s.sibling!==null;)s=s.sibling,r=r.sibling=Mn(s,s.pendingProps),r.return=t;r.sibling=null}return t.child}function SC(s,t,r){switch(t.tag){case 3:T2(t),Oo();break;case 5:a2(t);break;case 1:jr(t.type)&&sx(t);break;case 4:kf(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,i=t.memoizedProps.value;Kt(nx,a._currentValue),a._currentValue=i;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Kt(ls,ls.current&1),t.flags|=128,null):r&t.child.childLanes?_2(s,t,r):(Kt(ls,ls.current&1),s=Xa(s,t,r),s!==null?s.sibling:null);Kt(ls,ls.current&1);break;case 19:if(a=(r&t.childLanes)!==0,s.flags&128){if(a)return D2(s,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Kt(ls,ls.current),a)break;return null;case 22:case 23:return t.lanes=0,C2(s,t,r)}return Xa(s,t,r)}var A2,Up,R2,M2;A2=function(s,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)s.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Up=function(){};R2=function(s,t,r,a){var i=s.memoizedProps;if(i!==a){s=t.stateNode,fi(ja.current);var l=null;switch(r){case"input":i=dp(s,i),a=dp(s,a),l=[];break;case"select":i=ms({},i,{value:void 0}),a=ms({},a,{value:void 0}),l=[];break;case"textarea":i=mp(s,i),a=mp(s,a),l=[];break;default:typeof i.onClick!="function"&&typeof a.onClick=="function"&&(s.onclick=ex)}pp(r,a);var o;r=null;for(h in i)if(!a.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var c=i[h];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(xc.hasOwnProperty(h)?l||(l=[]):(l=l||[]).push(h,null));for(h in a){var d=a[h];if(c=i!=null?i[h]:void 0,a.hasOwnProperty(h)&&d!==c&&(d!=null||c!=null))if(h==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(r||(r={}),r[o]=d[o])}else r||(l||(l=[]),l.push(h,r)),r=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(l=l||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(l=l||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(xc.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&ts("scroll",s),l||c===d||(l=[])):(l=l||[]).push(h,d))}r&&(l=l||[]).push("style",r);var h=l;(t.updateQueue=h)&&(t.flags|=4)}};M2=function(s,t,r,a){r!==a&&(t.flags|=4)};function Cl(s,t){if(!ns)switch(s.tailMode){case"hidden":t=s.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?s.tail=null:r.sibling=null;break;case"collapsed":r=s.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||s.tail===null?s.tail=null:s.tail.sibling=null:a.sibling=null}}function Xs(s){var t=s.alternate!==null&&s.alternate.child===s.child,r=0,a=0;if(t)for(var i=s.child;i!==null;)r|=i.lanes|i.childLanes,a|=i.subtreeFlags&14680064,a|=i.flags&14680064,i.return=s,i=i.sibling;else for(i=s.child;i!==null;)r|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=s,i=i.sibling;return s.subtreeFlags|=a,s.childLanes=r,t}function CC(s,t,r){var a=t.pendingProps;switch(gf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(t),null;case 1:return jr(t.type)&&tx(),Xs(t),null;case 3:return a=t.stateNode,zo(),ss(vr),ss(rr),Pf(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(Xd(t)?t.flags|=4:s===null||s.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ra!==null&&(Yp(ra),ra=null))),Up(s,t),Xs(t),null;case 5:If(t);var i=fi(kc.current);if(r=t.type,s!==null&&t.stateNode!=null)R2(s,t,r,a,i),s.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Ve(166));return Xs(t),null}if(s=fi(ja.current),Xd(t)){a=t.stateNode,r=t.type;var l=t.memoizedProps;switch(a[ba]=t,a[Nc]=l,s=(t.mode&1)!==0,r){case"dialog":ts("cancel",a),ts("close",a);break;case"iframe":case"object":case"embed":ts("load",a);break;case"video":case"audio":for(i=0;i<Ll.length;i++)ts(Ll[i],a);break;case"source":ts("error",a);break;case"img":case"image":case"link":ts("error",a),ts("load",a);break;case"details":ts("toggle",a);break;case"input":jb(a,l),ts("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},ts("invalid",a);break;case"textarea":wb(a,l),ts("invalid",a)}pp(r,l),i=null;for(var o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="children"?typeof c=="string"?a.textContent!==c&&(l.suppressHydrationWarning!==!0&&Yd(a.textContent,c,s),i=["children",c]):typeof c=="number"&&a.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&Yd(a.textContent,c,s),i=["children",""+c]):xc.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&ts("scroll",a)}switch(r){case"input":Ud(a),Nb(a,l,!0);break;case"textarea":Ud(a),kb(a);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(a.onclick=ex)}a=i,t.updateQueue=a,a!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=c5(r)),s==="http://www.w3.org/1999/xhtml"?r==="script"?(s=o.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof a.is=="string"?s=o.createElement(r,{is:a.is}):(s=o.createElement(r),r==="select"&&(o=s,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):s=o.createElementNS(s,r),s[ba]=t,s[Nc]=a,A2(s,t,!1,!1),t.stateNode=s;e:{switch(o=fp(r,a),r){case"dialog":ts("cancel",s),ts("close",s),i=a;break;case"iframe":case"object":case"embed":ts("load",s),i=a;break;case"video":case"audio":for(i=0;i<Ll.length;i++)ts(Ll[i],s);i=a;break;case"source":ts("error",s),i=a;break;case"img":case"image":case"link":ts("error",s),ts("load",s),i=a;break;case"details":ts("toggle",s),i=a;break;case"input":jb(s,a),i=dp(s,a),ts("invalid",s);break;case"option":i=a;break;case"select":s._wrapperState={wasMultiple:!!a.multiple},i=ms({},a,{value:void 0}),ts("invalid",s);break;case"textarea":wb(s,a),i=mp(s,a),ts("invalid",s);break;default:i=a}pp(r,i),c=i;for(l in c)if(c.hasOwnProperty(l)){var d=c[l];l==="style"?x5(s,d):l==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&d5(s,d)):l==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&mc(s,d):typeof d=="number"&&mc(s,""+d):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(xc.hasOwnProperty(l)?d!=null&&l==="onScroll"&&ts("scroll",s):d!=null&&tf(s,l,d,o))}switch(r){case"input":Ud(s),Nb(s,a,!1);break;case"textarea":Ud(s),kb(s);break;case"option":a.value!=null&&s.setAttribute("value",""+Bn(a.value));break;case"select":s.multiple=!!a.multiple,l=a.value,l!=null?Io(s,!!a.multiple,l,!1):a.defaultValue!=null&&Io(s,!!a.multiple,a.defaultValue,!0);break;default:typeof i.onClick=="function"&&(s.onclick=ex)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xs(t),null;case 6:if(s&&t.stateNode!=null)M2(s,t,s.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Ve(166));if(r=fi(kc.current),fi(ja.current),Xd(t)){if(a=t.stateNode,r=t.memoizedProps,a[ba]=t,(l=a.nodeValue!==r)&&(s=_r,s!==null))switch(s.tag){case 3:Yd(a.nodeValue,r,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Yd(a.nodeValue,r,(s.mode&1)!==0)}l&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[ba]=t,t.stateNode=a}return Xs(t),null;case 13:if(ss(ls),a=t.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ns&&Er!==null&&t.mode&1&&!(t.flags&128))Z5(),Oo(),t.flags|=98560,l=!1;else if(l=Xd(t),a!==null&&a.dehydrated!==null){if(s===null){if(!l)throw Error(Ve(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Ve(317));l[ba]=t}else Oo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xs(t),l=!1}else ra!==null&&(Yp(ra),ra=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(s!==null&&s.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(s===null||ls.current&1?Ss===0&&(Ss=3):Vf())),t.updateQueue!==null&&(t.flags|=4),Xs(t),null);case 4:return zo(),Up(s,t),s===null&&vc(t.stateNode.containerInfo),Xs(t),null;case 10:return jf(t.type._context),Xs(t),null;case 17:return jr(t.type)&&tx(),Xs(t),null;case 19:if(ss(ls),l=t.memoizedState,l===null)return Xs(t),null;if(a=(t.flags&128)!==0,o=l.rendering,o===null)if(a)Cl(l,!1);else{if(Ss!==0||s!==null&&s.flags&128)for(s=t.child;s!==null;){if(o=lx(s),o!==null){for(t.flags|=128,Cl(l,!1),a=o.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)l=r,s=a,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=s,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r=r.sibling;return Kt(ls,ls.current&1|2),t.child}s=s.sibling}l.tail!==null&&js()>Fo&&(t.flags|=128,a=!0,Cl(l,!1),t.lanes=4194304)}else{if(!a)if(s=lx(o),s!==null){if(t.flags|=128,a=!0,r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Cl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!ns)return Xs(t),null}else 2*js()-l.renderingStartTime>Fo&&r!==1073741824&&(t.flags|=128,a=!0,Cl(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(r=l.last,r!==null?r.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=js(),t.sibling=null,r=ls.current,Kt(ls,a?r&1|2:r&1),t):(Xs(t),null);case 22:case 23:return Of(),a=t.memoizedState!==null,s!==null&&s.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Sr&1073741824&&(Xs(t),t.subtreeFlags&6&&(t.flags|=8192)):Xs(t),null;case 24:return null;case 25:return null}throw Error(Ve(156,t.tag))}function EC(s,t){switch(gf(t),t.tag){case 1:return jr(t.type)&&tx(),s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 3:return zo(),ss(vr),ss(rr),Pf(),s=t.flags,s&65536&&!(s&128)?(t.flags=s&-65537|128,t):null;case 5:return If(t),null;case 13:if(ss(ls),s=t.memoizedState,s!==null&&s.dehydrated!==null){if(t.alternate===null)throw Error(Ve(340));Oo()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 19:return ss(ls),null;case 4:return zo(),null;case 10:return jf(t.type._context),null;case 22:case 23:return Of(),null;case 24:return null;default:return null}}var eu=!1,tr=!1,TC=typeof WeakSet=="function"?WeakSet:Set,st=null;function fo(s,t){var r=s.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){gs(s,t,a)}else r.current=null}function $p(s,t,r){try{r()}catch(a){gs(s,t,a)}}var mv=!1;function _C(s,t){if(Pp=Xu,s=B5(),pf(s)){if("selectionStart"in s)var r={start:s.selectionStart,end:s.selectionEnd};else e:{r=(r=s.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var i=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var o=0,c=-1,d=-1,h=0,g=0,N=s,k=null;t:for(;;){for(var E;N!==r||i!==0&&N.nodeType!==3||(c=o+i),N!==l||a!==0&&N.nodeType!==3||(d=o+a),N.nodeType===3&&(o+=N.nodeValue.length),(E=N.firstChild)!==null;)k=N,N=E;for(;;){if(N===s)break t;if(k===r&&++h===i&&(c=o),k===l&&++g===a&&(d=o),(E=N.nextSibling)!==null)break;N=k,k=N.parentNode}N=E}r=c===-1||d===-1?null:{start:c,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(Sp={focusedElem:s,selectionRange:r},Xu=!1,st=t;st!==null;)if(t=st,s=t.child,(t.subtreeFlags&1028)!==0&&s!==null)s.return=t,st=s;else for(;st!==null;){t=st;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var O=y.memoizedProps,_=y.memoizedState,A=t.stateNode,z=A.getSnapshotBeforeUpdate(t.elementType===t.type?O:ta(t.type,O),_);A.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var L=t.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ve(163))}}catch(K){gs(t,t.return,K)}if(s=t.sibling,s!==null){s.return=t.return,st=s;break}st=t.return}return y=mv,mv=!1,y}function Yl(s,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var i=a=a.next;do{if((i.tag&s)===s){var l=i.destroy;i.destroy=void 0,l!==void 0&&$p(t,r,l)}i=i.next}while(i!==a)}}function lm(s,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&s)===s){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Wp(s){var t=s.ref;if(t!==null){var r=s.stateNode;switch(s.tag){case 5:s=r;break;default:s=r}typeof t=="function"?t(s):t.current=s}}function L2(s){var t=s.alternate;t!==null&&(s.alternate=null,L2(t)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(t=s.stateNode,t!==null&&(delete t[ba],delete t[Nc],delete t[Tp],delete t[mC],delete t[hC])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function O2(s){return s.tag===5||s.tag===3||s.tag===4}function hv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||O2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function qp(s,t,r){var a=s.tag;if(a===5||a===6)s=s.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(s,t):r.insertBefore(s,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(s,r)):(t=r,t.appendChild(s)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ex));else if(a!==4&&(s=s.child,s!==null))for(qp(s,t,r),s=s.sibling;s!==null;)qp(s,t,r),s=s.sibling}function Hp(s,t,r){var a=s.tag;if(a===5||a===6)s=s.stateNode,t?r.insertBefore(s,t):r.appendChild(s);else if(a!==4&&(s=s.child,s!==null))for(Hp(s,t,r),s=s.sibling;s!==null;)Hp(s,t,r),s=s.sibling}var zs=null,sa=!1;function mn(s,t,r){for(r=r.child;r!==null;)V2(s,t,r),r=r.sibling}function V2(s,t,r){if(va&&typeof va.onCommitFiberUnmount=="function")try{va.onCommitFiberUnmount(em,r)}catch{}switch(r.tag){case 5:tr||fo(r,t);case 6:var a=zs,i=sa;zs=null,mn(s,t,r),zs=a,sa=i,zs!==null&&(sa?(s=zs,r=r.stateNode,s.nodeType===8?s.parentNode.removeChild(r):s.removeChild(r)):zs.removeChild(r.stateNode));break;case 18:zs!==null&&(sa?(s=zs,r=r.stateNode,s.nodeType===8?gh(s.parentNode,r):s.nodeType===1&&gh(s,r),gc(s)):gh(zs,r.stateNode));break;case 4:a=zs,i=sa,zs=r.stateNode.containerInfo,sa=!0,mn(s,t,r),zs=a,sa=i;break;case 0:case 11:case 14:case 15:if(!tr&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){i=a=a.next;do{var l=i,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&$p(r,t,o),i=i.next}while(i!==a)}mn(s,t,r);break;case 1:if(!tr&&(fo(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(c){gs(r,t,c)}mn(s,t,r);break;case 21:mn(s,t,r);break;case 22:r.mode&1?(tr=(a=tr)||r.memoizedState!==null,mn(s,t,r),tr=a):mn(s,t,r);break;default:mn(s,t,r)}}function pv(s){var t=s.updateQueue;if(t!==null){s.updateQueue=null;var r=s.stateNode;r===null&&(r=s.stateNode=new TC),t.forEach(function(a){var i=BC.bind(null,s,a);r.has(a)||(r.add(a),a.then(i,i))})}}function Zr(s,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var i=r[a];try{var l=s,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:zs=c.stateNode,sa=!1;break e;case 3:zs=c.stateNode.containerInfo,sa=!0;break e;case 4:zs=c.stateNode.containerInfo,sa=!0;break e}c=c.return}if(zs===null)throw Error(Ve(160));V2(l,o,i),zs=null,sa=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(h){gs(i,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)z2(t,s),t=t.sibling}function z2(s,t){var r=s.alternate,a=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Zr(t,s),fa(s),a&4){try{Yl(3,s,s.return),lm(3,s)}catch(O){gs(s,s.return,O)}try{Yl(5,s,s.return)}catch(O){gs(s,s.return,O)}}break;case 1:Zr(t,s),fa(s),a&512&&r!==null&&fo(r,r.return);break;case 5:if(Zr(t,s),fa(s),a&512&&r!==null&&fo(r,r.return),s.flags&32){var i=s.stateNode;try{mc(i,"")}catch(O){gs(s,s.return,O)}}if(a&4&&(i=s.stateNode,i!=null)){var l=s.memoizedProps,o=r!==null?r.memoizedProps:l,c=s.type,d=s.updateQueue;if(s.updateQueue=null,d!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&o5(i,l),fp(c,o);var h=fp(c,l);for(o=0;o<d.length;o+=2){var g=d[o],N=d[o+1];g==="style"?x5(i,N):g==="dangerouslySetInnerHTML"?d5(i,N):g==="children"?mc(i,N):tf(i,g,N,h)}switch(c){case"input":up(i,l);break;case"textarea":l5(i,l);break;case"select":var k=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!l.multiple;var E=l.value;E!=null?Io(i,!!l.multiple,E,!1):k!==!!l.multiple&&(l.defaultValue!=null?Io(i,!!l.multiple,l.defaultValue,!0):Io(i,!!l.multiple,l.multiple?[]:"",!1))}i[Nc]=l}catch(O){gs(s,s.return,O)}}break;case 6:if(Zr(t,s),fa(s),a&4){if(s.stateNode===null)throw Error(Ve(162));i=s.stateNode,l=s.memoizedProps;try{i.nodeValue=l}catch(O){gs(s,s.return,O)}}break;case 3:if(Zr(t,s),fa(s),a&4&&r!==null&&r.memoizedState.isDehydrated)try{gc(t.containerInfo)}catch(O){gs(s,s.return,O)}break;case 4:Zr(t,s),fa(s);break;case 13:Zr(t,s),fa(s),i=s.child,i.flags&8192&&(l=i.memoizedState!==null,i.stateNode.isHidden=l,!l||i.alternate!==null&&i.alternate.memoizedState!==null||(Mf=js())),a&4&&pv(s);break;case 22:if(g=r!==null&&r.memoizedState!==null,s.mode&1?(tr=(h=tr)||g,Zr(t,s),tr=h):Zr(t,s),fa(s),a&8192){if(h=s.memoizedState!==null,(s.stateNode.isHidden=h)&&!g&&s.mode&1)for(st=s,g=s.child;g!==null;){for(N=st=g;st!==null;){switch(k=st,E=k.child,k.tag){case 0:case 11:case 14:case 15:Yl(4,k,k.return);break;case 1:fo(k,k.return);var y=k.stateNode;if(typeof y.componentWillUnmount=="function"){a=k,r=k.return;try{t=a,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(O){gs(a,r,O)}}break;case 5:fo(k,k.return);break;case 22:if(k.memoizedState!==null){gv(N);continue}}E!==null?(E.return=k,st=E):gv(N)}g=g.sibling}e:for(g=null,N=s;;){if(N.tag===5){if(g===null){g=N;try{i=N.stateNode,h?(l=i.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=N.stateNode,d=N.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=u5("display",o))}catch(O){gs(s,s.return,O)}}}else if(N.tag===6){if(g===null)try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(O){gs(s,s.return,O)}}else if((N.tag!==22&&N.tag!==23||N.memoizedState===null||N===s)&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===s)break e;for(;N.sibling===null;){if(N.return===null||N.return===s)break e;g===N&&(g=null),N=N.return}g===N&&(g=null),N.sibling.return=N.return,N=N.sibling}}break;case 19:Zr(t,s),fa(s),a&4&&pv(s);break;case 21:break;default:Zr(t,s),fa(s)}}function fa(s){var t=s.flags;if(t&2){try{e:{for(var r=s.return;r!==null;){if(O2(r)){var a=r;break e}r=r.return}throw Error(Ve(160))}switch(a.tag){case 5:var i=a.stateNode;a.flags&32&&(mc(i,""),a.flags&=-33);var l=hv(s);Hp(s,l,i);break;case 3:case 4:var o=a.stateNode.containerInfo,c=hv(s);qp(s,c,o);break;default:throw Error(Ve(161))}}catch(d){gs(s,s.return,d)}s.flags&=-3}t&4096&&(s.flags&=-4097)}function DC(s,t,r){st=s,B2(s)}function B2(s,t,r){for(var a=(s.mode&1)!==0;st!==null;){var i=st,l=i.child;if(i.tag===22&&a){var o=i.memoizedState!==null||eu;if(!o){var c=i.alternate,d=c!==null&&c.memoizedState!==null||tr;c=eu;var h=tr;if(eu=o,(tr=d)&&!h)for(st=i;st!==null;)o=st,d=o.child,o.tag===22&&o.memoizedState!==null?yv(i):d!==null?(d.return=o,st=d):yv(i);for(;l!==null;)st=l,B2(l),l=l.sibling;st=i,eu=c,tr=h}fv(s)}else i.subtreeFlags&8772&&l!==null?(l.return=i,st=l):fv(s)}}function fv(s){for(;st!==null;){var t=st;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:tr||lm(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!tr)if(r===null)a.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:ta(t.type,r.memoizedProps);a.componentDidUpdate(i,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&ev(t,l,a);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}ev(t,o,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var g=h.memoizedState;if(g!==null){var N=g.dehydrated;N!==null&&gc(N)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ve(163))}tr||t.flags&512&&Wp(t)}catch(k){gs(t,t.return,k)}}if(t===s){st=null;break}if(r=t.sibling,r!==null){r.return=t.return,st=r;break}st=t.return}}function gv(s){for(;st!==null;){var t=st;if(t===s){st=null;break}var r=t.sibling;if(r!==null){r.return=t.return,st=r;break}st=t.return}}function yv(s){for(;st!==null;){var t=st;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{lm(4,t)}catch(d){gs(t,r,d)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var i=t.return;try{a.componentDidMount()}catch(d){gs(t,i,d)}}var l=t.return;try{Wp(t)}catch(d){gs(t,l,d)}break;case 5:var o=t.return;try{Wp(t)}catch(d){gs(t,o,d)}}}catch(d){gs(t,t.return,d)}if(t===s){st=null;break}var c=t.sibling;if(c!==null){c.return=t.return,st=c;break}st=t.return}}var AC=Math.ceil,ux=nn.ReactCurrentDispatcher,Af=nn.ReactCurrentOwner,Hr=nn.ReactCurrentBatchConfig,Vt=0,Ms=null,ws=null,Ws=0,Sr=0,go=Jn(0),Ss=0,Cc=null,Ci=0,cm=0,Rf=0,Xl=null,gr=null,Mf=0,Fo=1/0,Va=null,xx=!1,Gp=null,An=null,tu=!1,In=null,mx=0,Jl=0,Qp=null,Iu=-1,Pu=0;function ur(){return Vt&6?js():Iu!==-1?Iu:Iu=js()}function Rn(s){return s.mode&1?Vt&2&&Ws!==0?Ws&-Ws:fC.transition!==null?(Pu===0&&(Pu=k5()),Pu):(s=$t,s!==0||(s=window.event,s=s===void 0?16:_5(s.type)),s):1}function la(s,t,r,a){if(50<Jl)throw Jl=0,Qp=null,Error(Ve(185));Jc(s,r,a),(!(Vt&2)||s!==Ms)&&(s===Ms&&(!(Vt&2)&&(cm|=r),Ss===4&&bn(s,Ws)),Nr(s,a),r===1&&Vt===0&&!(t.mode&1)&&(Fo=js()+500,nm&&Zn()))}function Nr(s,t){var r=s.callbackNode;fS(s,t);var a=Yu(s,s===Ms?Ws:0);if(a===0)r!==null&&Sb(r),s.callbackNode=null,s.callbackPriority=0;else if(t=a&-a,s.callbackPriority!==t){if(r!=null&&Sb(r),t===1)s.tag===0?pC(bv.bind(null,s)):Y5(bv.bind(null,s)),uC(function(){!(Vt&6)&&Zn()}),r=null;else{switch(I5(a)){case 1:r=of;break;case 4:r=N5;break;case 16:r=Ku;break;case 536870912:r=w5;break;default:r=Ku}r=Q2(r,F2.bind(null,s))}s.callbackPriority=t,s.callbackNode=r}}function F2(s,t){if(Iu=-1,Pu=0,Vt&6)throw Error(Ve(327));var r=s.callbackNode;if(To()&&s.callbackNode!==r)return null;var a=Yu(s,s===Ms?Ws:0);if(a===0)return null;if(a&30||a&s.expiredLanes||t)t=hx(s,a);else{t=a;var i=Vt;Vt|=2;var l=$2();(Ms!==s||Ws!==t)&&(Va=null,Fo=js()+500,ji(s,t));do try{LC();break}catch(c){U2(s,c)}while(1);vf(),ux.current=l,Vt=i,ws!==null?t=0:(Ms=null,Ws=0,t=Ss)}if(t!==0){if(t===2&&(i=jp(s),i!==0&&(a=i,t=Kp(s,i))),t===1)throw r=Cc,ji(s,0),bn(s,a),Nr(s,js()),r;if(t===6)bn(s,a);else{if(i=s.current.alternate,!(a&30)&&!RC(i)&&(t=hx(s,a),t===2&&(l=jp(s),l!==0&&(a=l,t=Kp(s,l))),t===1))throw r=Cc,ji(s,0),bn(s,a),Nr(s,js()),r;switch(s.finishedWork=i,s.finishedLanes=a,t){case 0:case 1:throw Error(Ve(345));case 2:ui(s,gr,Va);break;case 3:if(bn(s,a),(a&130023424)===a&&(t=Mf+500-js(),10<t)){if(Yu(s,0)!==0)break;if(i=s.suspendedLanes,(i&a)!==a){ur(),s.pingedLanes|=s.suspendedLanes&i;break}s.timeoutHandle=Ep(ui.bind(null,s,gr,Va),t);break}ui(s,gr,Va);break;case 4:if(bn(s,a),(a&4194240)===a)break;for(t=s.eventTimes,i=-1;0<a;){var o=31-oa(a);l=1<<o,o=t[o],o>i&&(i=o),a&=~l}if(a=i,a=js()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*AC(a/1960))-a,10<a){s.timeoutHandle=Ep(ui.bind(null,s,gr,Va),a);break}ui(s,gr,Va);break;case 5:ui(s,gr,Va);break;default:throw Error(Ve(329))}}}return Nr(s,js()),s.callbackNode===r?F2.bind(null,s):null}function Kp(s,t){var r=Xl;return s.current.memoizedState.isDehydrated&&(ji(s,t).flags|=256),s=hx(s,t),s!==2&&(t=gr,gr=r,t!==null&&Yp(t)),s}function Yp(s){gr===null?gr=s:gr.push.apply(gr,s)}function RC(s){for(var t=s;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var i=r[a],l=i.getSnapshot;i=i.value;try{if(!ca(l(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bn(s,t){for(t&=~Rf,t&=~cm,s.suspendedLanes|=t,s.pingedLanes&=~t,s=s.expirationTimes;0<t;){var r=31-oa(t),a=1<<r;s[r]=-1,t&=~a}}function bv(s){if(Vt&6)throw Error(Ve(327));To();var t=Yu(s,0);if(!(t&1))return Nr(s,js()),null;var r=hx(s,t);if(s.tag!==0&&r===2){var a=jp(s);a!==0&&(t=a,r=Kp(s,a))}if(r===1)throw r=Cc,ji(s,0),bn(s,t),Nr(s,js()),r;if(r===6)throw Error(Ve(345));return s.finishedWork=s.current.alternate,s.finishedLanes=t,ui(s,gr,Va),Nr(s,js()),null}function Lf(s,t){var r=Vt;Vt|=1;try{return s(t)}finally{Vt=r,Vt===0&&(Fo=js()+500,nm&&Zn())}}function Ei(s){In!==null&&In.tag===0&&!(Vt&6)&&To();var t=Vt;Vt|=1;var r=Hr.transition,a=$t;try{if(Hr.transition=null,$t=1,s)return s()}finally{$t=a,Hr.transition=r,Vt=t,!(Vt&6)&&Zn()}}function Of(){Sr=go.current,ss(go)}function ji(s,t){s.finishedWork=null,s.finishedLanes=0;var r=s.timeoutHandle;if(r!==-1&&(s.timeoutHandle=-1,dC(r)),ws!==null)for(r=ws.return;r!==null;){var a=r;switch(gf(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&tx();break;case 3:zo(),ss(vr),ss(rr),Pf();break;case 5:If(a);break;case 4:zo();break;case 13:ss(ls);break;case 19:ss(ls);break;case 10:jf(a.type._context);break;case 22:case 23:Of()}r=r.return}if(Ms=s,ws=s=Mn(s.current,null),Ws=Sr=t,Ss=0,Cc=null,Rf=cm=Ci=0,gr=Xl=null,pi!==null){for(t=0;t<pi.length;t++)if(r=pi[t],a=r.interleaved,a!==null){r.interleaved=null;var i=a.next,l=r.pending;if(l!==null){var o=l.next;l.next=i,a.next=o}r.pending=a}pi=null}return s}function U2(s,t){do{var r=ws;try{if(vf(),Nu.current=dx,cx){for(var a=ds.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}cx=!1}if(Si=0,Ds=Ps=ds=null,Kl=!1,Ic=0,Af.current=null,r===null||r.return===null){Ss=1,Cc=t,ws=null;break}e:{var l=s,o=r.return,c=r,d=t;if(t=Ws,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,g=c,N=g.tag;if(!(g.mode&1)&&(N===0||N===11||N===15)){var k=g.alternate;k?(g.updateQueue=k.updateQueue,g.memoizedState=k.memoizedState,g.lanes=k.lanes):(g.updateQueue=null,g.memoizedState=null)}var E=iv(o);if(E!==null){E.flags&=-257,ov(E,o,c,l,t),E.mode&1&&nv(l,h,t),t=E,d=h;var y=t.updateQueue;if(y===null){var O=new Set;O.add(d),t.updateQueue=O}else y.add(d);break e}else{if(!(t&1)){nv(l,h,t),Vf();break e}d=Error(Ve(426))}}else if(ns&&c.mode&1){var _=iv(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),ov(_,o,c,l,t),yf(Bo(d,c));break e}}l=d=Bo(d,c),Ss!==4&&(Ss=2),Xl===null?Xl=[l]:Xl.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var A=I2(l,d,t);Zb(l,A);break e;case 1:c=d;var z=l.type,L=l.stateNode;if(!(l.flags&128)&&(typeof z.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(An===null||!An.has(L)))){l.flags|=65536,t&=-t,l.lanes|=t;var K=P2(l,c,t);Zb(l,K);break e}}l=l.return}while(l!==null)}q2(r)}catch(H){t=H,ws===r&&r!==null&&(ws=r=r.return);continue}break}while(1)}function $2(){var s=ux.current;return ux.current=dx,s===null?dx:s}function Vf(){(Ss===0||Ss===3||Ss===2)&&(Ss=4),Ms===null||!(Ci&268435455)&&!(cm&268435455)||bn(Ms,Ws)}function hx(s,t){var r=Vt;Vt|=2;var a=$2();(Ms!==s||Ws!==t)&&(Va=null,ji(s,t));do try{MC();break}catch(i){U2(s,i)}while(1);if(vf(),Vt=r,ux.current=a,ws!==null)throw Error(Ve(261));return Ms=null,Ws=0,Ss}function MC(){for(;ws!==null;)W2(ws)}function LC(){for(;ws!==null&&!oS();)W2(ws)}function W2(s){var t=G2(s.alternate,s,Sr);s.memoizedProps=s.pendingProps,t===null?q2(s):ws=t,Af.current=null}function q2(s){var t=s;do{var r=t.alternate;if(s=t.return,t.flags&32768){if(r=EC(r,t),r!==null){r.flags&=32767,ws=r;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Ss=6,ws=null;return}}else if(r=CC(r,t,Sr),r!==null){ws=r;return}if(t=t.sibling,t!==null){ws=t;return}ws=t=s}while(t!==null);Ss===0&&(Ss=5)}function ui(s,t,r){var a=$t,i=Hr.transition;try{Hr.transition=null,$t=1,OC(s,t,r,a)}finally{Hr.transition=i,$t=a}return null}function OC(s,t,r,a){do To();while(In!==null);if(Vt&6)throw Error(Ve(327));r=s.finishedWork;var i=s.finishedLanes;if(r===null)return null;if(s.finishedWork=null,s.finishedLanes=0,r===s.current)throw Error(Ve(177));s.callbackNode=null,s.callbackPriority=0;var l=r.lanes|r.childLanes;if(gS(s,l),s===Ms&&(ws=Ms=null,Ws=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||tu||(tu=!0,Q2(Ku,function(){return To(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=Hr.transition,Hr.transition=null;var o=$t;$t=1;var c=Vt;Vt|=4,Af.current=null,_C(s,r),z2(r,s),rC(Sp),Xu=!!Pp,Sp=Pp=null,s.current=r,DC(r),lS(),Vt=c,$t=o,Hr.transition=l}else s.current=r;if(tu&&(tu=!1,In=s,mx=i),l=s.pendingLanes,l===0&&(An=null),uS(r.stateNode),Nr(s,js()),t!==null)for(a=s.onRecoverableError,r=0;r<t.length;r++)i=t[r],a(i.value,{componentStack:i.stack,digest:i.digest});if(xx)throw xx=!1,s=Gp,Gp=null,s;return mx&1&&s.tag!==0&&To(),l=s.pendingLanes,l&1?s===Qp?Jl++:(Jl=0,Qp=s):Jl=0,Zn(),null}function To(){if(In!==null){var s=I5(mx),t=Hr.transition,r=$t;try{if(Hr.transition=null,$t=16>s?16:s,In===null)var a=!1;else{if(s=In,In=null,mx=0,Vt&6)throw Error(Ve(331));var i=Vt;for(Vt|=4,st=s.current;st!==null;){var l=st,o=l.child;if(st.flags&16){var c=l.deletions;if(c!==null){for(var d=0;d<c.length;d++){var h=c[d];for(st=h;st!==null;){var g=st;switch(g.tag){case 0:case 11:case 15:Yl(8,g,l)}var N=g.child;if(N!==null)N.return=g,st=N;else for(;st!==null;){g=st;var k=g.sibling,E=g.return;if(L2(g),g===h){st=null;break}if(k!==null){k.return=E,st=k;break}st=E}}}var y=l.alternate;if(y!==null){var O=y.child;if(O!==null){y.child=null;do{var _=O.sibling;O.sibling=null,O=_}while(O!==null)}}st=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,st=o;else e:for(;st!==null;){if(l=st,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Yl(9,l,l.return)}var A=l.sibling;if(A!==null){A.return=l.return,st=A;break e}st=l.return}}var z=s.current;for(st=z;st!==null;){o=st;var L=o.child;if(o.subtreeFlags&2064&&L!==null)L.return=o,st=L;else e:for(o=z;st!==null;){if(c=st,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:lm(9,c)}}catch(H){gs(c,c.return,H)}if(c===o){st=null;break e}var K=c.sibling;if(K!==null){K.return=c.return,st=K;break e}st=c.return}}if(Vt=i,Zn(),va&&typeof va.onPostCommitFiberRoot=="function")try{va.onPostCommitFiberRoot(em,s)}catch{}a=!0}return a}finally{$t=r,Hr.transition=t}}return!1}function vv(s,t,r){t=Bo(r,t),t=I2(s,t,1),s=Dn(s,t,1),t=ur(),s!==null&&(Jc(s,1,t),Nr(s,t))}function gs(s,t,r){if(s.tag===3)vv(s,s,r);else for(;t!==null;){if(t.tag===3){vv(t,s,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(An===null||!An.has(a))){s=Bo(r,s),s=P2(t,s,1),t=Dn(t,s,1),s=ur(),t!==null&&(Jc(t,1,s),Nr(t,s));break}}t=t.return}}function VC(s,t,r){var a=s.pingCache;a!==null&&a.delete(t),t=ur(),s.pingedLanes|=s.suspendedLanes&r,Ms===s&&(Ws&r)===r&&(Ss===4||Ss===3&&(Ws&130023424)===Ws&&500>js()-Mf?ji(s,0):Rf|=r),Nr(s,t)}function H2(s,t){t===0&&(s.mode&1?(t=qd,qd<<=1,!(qd&130023424)&&(qd=4194304)):t=1);var r=ur();s=Ya(s,t),s!==null&&(Jc(s,t,r),Nr(s,r))}function zC(s){var t=s.memoizedState,r=0;t!==null&&(r=t.retryLane),H2(s,r)}function BC(s,t){var r=0;switch(s.tag){case 13:var a=s.stateNode,i=s.memoizedState;i!==null&&(r=i.retryLane);break;case 19:a=s.stateNode;break;default:throw Error(Ve(314))}a!==null&&a.delete(t),H2(s,r)}var G2;G2=function(s,t,r){if(s!==null)if(s.memoizedProps!==t.pendingProps||vr.current)yr=!0;else{if(!(s.lanes&r)&&!(t.flags&128))return yr=!1,SC(s,t,r);yr=!!(s.flags&131072)}else yr=!1,ns&&t.flags&1048576&&X5(t,ax,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;ku(s,t),s=t.pendingProps;var i=Lo(t,rr.current);Eo(t,r),i=Cf(null,t,a,s,i,r);var l=Ef();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jr(a)?(l=!0,sx(t)):l=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wf(t),i.updater=om,t.stateNode=i,i._reactInternals=t,Lp(t,a,s,r),t=zp(null,t,a,!0,l,r)):(t.tag=0,ns&&l&&ff(t),lr(null,t,i,r),t=t.child),t;case 16:a=t.elementType;e:{switch(ku(s,t),s=t.pendingProps,i=a._init,a=i(a._payload),t.type=a,i=t.tag=UC(a),s=ta(a,s),i){case 0:t=Vp(null,t,a,s,r);break e;case 1:t=dv(null,t,a,s,r);break e;case 11:t=lv(null,t,a,s,r);break e;case 14:t=cv(null,t,a,ta(a.type,s),r);break e}throw Error(Ve(306,a,""))}return t;case 0:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:ta(a,i),Vp(s,t,a,i,r);case 1:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:ta(a,i),dv(s,t,a,i,r);case 3:e:{if(T2(t),s===null)throw Error(Ve(387));a=t.pendingProps,l=t.memoizedState,i=l.element,r2(s,t),ox(t,a,null,r);var o=t.memoizedState;if(a=o.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){i=Bo(Error(Ve(423)),t),t=uv(s,t,a,r,i);break e}else if(a!==i){i=Bo(Error(Ve(424)),t),t=uv(s,t,a,r,i);break e}else for(Er=_n(t.stateNode.containerInfo.firstChild),_r=t,ns=!0,ra=null,r=t2(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Oo(),a===i){t=Xa(s,t,r);break e}lr(s,t,a,r)}t=t.child}return t;case 5:return a2(t),s===null&&Ap(t),a=t.type,i=t.pendingProps,l=s!==null?s.memoizedProps:null,o=i.children,Cp(a,i)?o=null:l!==null&&Cp(a,l)&&(t.flags|=32),E2(s,t),lr(s,t,o,r),t.child;case 6:return s===null&&Ap(t),null;case 13:return _2(s,t,r);case 4:return kf(t,t.stateNode.containerInfo),a=t.pendingProps,s===null?t.child=Vo(t,null,a,r):lr(s,t,a,r),t.child;case 11:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:ta(a,i),lv(s,t,a,i,r);case 7:return lr(s,t,t.pendingProps,r),t.child;case 8:return lr(s,t,t.pendingProps.children,r),t.child;case 12:return lr(s,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,i=t.pendingProps,l=t.memoizedProps,o=i.value,Kt(nx,a._currentValue),a._currentValue=o,l!==null)if(ca(l.value,o)){if(l.children===i.children&&!vr.current){t=Xa(s,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var c=l.dependencies;if(c!==null){o=l.child;for(var d=c.firstContext;d!==null;){if(d.context===a){if(l.tag===1){d=qa(-1,r&-r),d.tag=2;var h=l.updateQueue;if(h!==null){h=h.shared;var g=h.pending;g===null?d.next=d:(d.next=g.next,g.next=d),h.pending=d}}l.lanes|=r,d=l.alternate,d!==null&&(d.lanes|=r),Rp(l.return,r,t),c.lanes|=r;break}d=d.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(Ve(341));o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Rp(o,r,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}lr(s,t,i.children,r),t=t.child}return t;case 9:return i=t.type,a=t.pendingProps.children,Eo(t,r),i=Qr(i),a=a(i),t.flags|=1,lr(s,t,a,r),t.child;case 14:return a=t.type,i=ta(a,t.pendingProps),i=ta(a.type,i),cv(s,t,a,i,r);case 15:return S2(s,t,t.type,t.pendingProps,r);case 17:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:ta(a,i),ku(s,t),t.tag=1,jr(a)?(s=!0,sx(t)):s=!1,Eo(t,r),k2(t,a,i),Lp(t,a,i,r),zp(null,t,a,!0,s,r);case 19:return D2(s,t,r);case 22:return C2(s,t,r)}throw Error(Ve(156,t.tag))};function Q2(s,t){return j5(s,t)}function FC(s,t,r,a){this.tag=s,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(s,t,r,a){return new FC(s,t,r,a)}function zf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function UC(s){if(typeof s=="function")return zf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===rf)return 11;if(s===af)return 14}return 2}function Mn(s,t){var r=s.alternate;return r===null?(r=qr(s.tag,t,s.key,s.mode),r.elementType=s.elementType,r.type=s.type,r.stateNode=s.stateNode,r.alternate=s,s.alternate=r):(r.pendingProps=t,r.type=s.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=s.flags&14680064,r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,t=s.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=s.sibling,r.index=s.index,r.ref=s.ref,r}function Su(s,t,r,a,i,l){var o=2;if(a=s,typeof s=="function")zf(s)&&(o=1);else if(typeof s=="string")o=5;else e:switch(s){case io:return Ni(r.children,i,l,t);case sf:o=8,i|=8;break;case ip:return s=qr(12,r,t,i|2),s.elementType=ip,s.lanes=l,s;case op:return s=qr(13,r,t,i),s.elementType=op,s.lanes=l,s;case lp:return s=qr(19,r,t,i),s.elementType=lp,s.lanes=l,s;case a5:return dm(r,i,l,t);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case s5:o=10;break e;case r5:o=9;break e;case rf:o=11;break e;case af:o=14;break e;case fn:o=16,a=null;break e}throw Error(Ve(130,s==null?s:typeof s,""))}return t=qr(o,r,t,i),t.elementType=s,t.type=a,t.lanes=l,t}function Ni(s,t,r,a){return s=qr(7,s,a,t),s.lanes=r,s}function dm(s,t,r,a){return s=qr(22,s,a,t),s.elementType=a5,s.lanes=r,s.stateNode={isHidden:!1},s}function Ih(s,t,r){return s=qr(6,s,null,t),s.lanes=r,s}function Ph(s,t,r){return t=qr(4,s.children!==null?s.children:[],s.key,t),t.lanes=r,t.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},t}function $C(s,t,r,a,i){this.tag=t,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ih(0),this.expirationTimes=ih(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ih(0),this.identifierPrefix=a,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bf(s,t,r,a,i,l,o,c,d){return s=new $C(s,t,r,c,d),t===1?(t=1,l===!0&&(t|=8)):t=0,l=qr(3,null,null,t),s.current=l,l.stateNode=s,l.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},wf(l),s}function WC(s,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:no,key:a==null?null:""+a,children:s,containerInfo:t,implementation:r}}function K2(s){if(!s)return Fn;s=s._reactInternals;e:{if(Vi(s)!==s||s.tag!==1)throw Error(Ve(170));var t=s;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ve(171))}if(s.tag===1){var r=s.type;if(jr(r))return K5(s,r,t)}return t}function Y2(s,t,r,a,i,l,o,c,d){return s=Bf(r,a,!0,s,i,l,o,c,d),s.context=K2(null),r=s.current,a=ur(),i=Rn(r),l=qa(a,i),l.callback=t??null,Dn(r,l,i),s.current.lanes=i,Jc(s,i,a),Nr(s,a),s}function um(s,t,r,a){var i=t.current,l=ur(),o=Rn(i);return r=K2(r),t.context===null?t.context=r:t.pendingContext=r,t=qa(l,o),t.payload={element:s},a=a===void 0?null:a,a!==null&&(t.callback=a),s=Dn(i,t,o),s!==null&&(la(s,i,o,l),ju(s,i,o)),o}function px(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function jv(s,t){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var r=s.retryLane;s.retryLane=r!==0&&r<t?r:t}}function Ff(s,t){jv(s,t),(s=s.alternate)&&jv(s,t)}function qC(){return null}var X2=typeof reportError=="function"?reportError:function(s){console.error(s)};function Uf(s){this._internalRoot=s}xm.prototype.render=Uf.prototype.render=function(s){var t=this._internalRoot;if(t===null)throw Error(Ve(409));um(s,t,null,null)};xm.prototype.unmount=Uf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var t=s.containerInfo;Ei(function(){um(null,s,null,null)}),t[Ka]=null}};function xm(s){this._internalRoot=s}xm.prototype.unstable_scheduleHydration=function(s){if(s){var t=C5();s={blockedOn:null,target:s,priority:t};for(var r=0;r<yn.length&&t!==0&&t<yn[r].priority;r++);yn.splice(r,0,s),r===0&&T5(s)}};function $f(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function mm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Nv(){}function HC(s,t,r,a,i){if(i){if(typeof a=="function"){var l=a;a=function(){var h=px(o);l.call(h)}}var o=Y2(t,a,s,0,null,!1,!1,"",Nv);return s._reactRootContainer=o,s[Ka]=o.current,vc(s.nodeType===8?s.parentNode:s),Ei(),o}for(;i=s.lastChild;)s.removeChild(i);if(typeof a=="function"){var c=a;a=function(){var h=px(d);c.call(h)}}var d=Bf(s,0,!1,null,null,!1,!1,"",Nv);return s._reactRootContainer=d,s[Ka]=d.current,vc(s.nodeType===8?s.parentNode:s),Ei(function(){um(t,d,r,a)}),d}function hm(s,t,r,a,i){var l=r._reactRootContainer;if(l){var o=l;if(typeof i=="function"){var c=i;i=function(){var d=px(o);c.call(d)}}um(t,o,s,i)}else o=HC(r,t,s,i,a);return px(o)}P5=function(s){switch(s.tag){case 3:var t=s.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ml(t.pendingLanes);r!==0&&(lf(t,r|1),Nr(t,js()),!(Vt&6)&&(Fo=js()+500,Zn()))}break;case 13:Ei(function(){var a=Ya(s,1);if(a!==null){var i=ur();la(a,s,1,i)}}),Ff(s,1)}};cf=function(s){if(s.tag===13){var t=Ya(s,134217728);if(t!==null){var r=ur();la(t,s,134217728,r)}Ff(s,134217728)}};S5=function(s){if(s.tag===13){var t=Rn(s),r=Ya(s,t);if(r!==null){var a=ur();la(r,s,t,a)}Ff(s,t)}};C5=function(){return $t};E5=function(s,t){var r=$t;try{return $t=s,t()}finally{$t=r}};yp=function(s,t,r){switch(t){case"input":if(up(s,r),t=r.name,r.type==="radio"&&t!=null){for(r=s;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==s&&a.form===s.form){var i=am(a);if(!i)throw Error(Ve(90));i5(a),up(a,i)}}}break;case"textarea":l5(s,r);break;case"select":t=r.value,t!=null&&Io(s,!!r.multiple,t,!1)}};p5=Lf;f5=Ei;var GC={usingClientEntryPoint:!1,Events:[ed,uo,am,m5,h5,Lf]},El={findFiberByHostInstance:hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QC={bundleType:El.bundleType,version:El.version,rendererPackageName:El.rendererPackageName,rendererConfig:El.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nn.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=b5(s),s===null?null:s.stateNode},findFiberByHostInstance:El.findFiberByHostInstance||qC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{em=su.inject(QC),va=su}catch{}}Mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GC;Mr.createPortal=function(s,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$f(t))throw Error(Ve(200));return WC(s,t,null,r)};Mr.createRoot=function(s,t){if(!$f(s))throw Error(Ve(299));var r=!1,a="",i=X2;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Bf(s,1,!1,null,null,r,!1,a,i),s[Ka]=t.current,vc(s.nodeType===8?s.parentNode:s),new Uf(t)};Mr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var t=s._reactInternals;if(t===void 0)throw typeof s.render=="function"?Error(Ve(188)):(s=Object.keys(s).join(","),Error(Ve(268,s)));return s=b5(t),s=s===null?null:s.stateNode,s};Mr.flushSync=function(s){return Ei(s)};Mr.hydrate=function(s,t,r){if(!mm(t))throw Error(Ve(200));return hm(null,s,t,!0,r)};Mr.hydrateRoot=function(s,t,r){if(!$f(s))throw Error(Ve(405));var a=r!=null&&r.hydratedSources||null,i=!1,l="",o=X2;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Y2(t,null,s,1,r??null,i,!1,l,o),s[Ka]=t.current,vc(s),a)for(s=0;s<a.length;s++)r=a[s],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new xm(t)};Mr.render=function(s,t,r){if(!mm(t))throw Error(Ve(200));return hm(null,s,t,!1,r)};Mr.unmountComponentAtNode=function(s){if(!mm(s))throw Error(Ve(40));return s._reactRootContainer?(Ei(function(){hm(null,null,s,!1,function(){s._reactRootContainer=null,s[Ka]=null})}),!0):!1};Mr.unstable_batchedUpdates=Lf;Mr.unstable_renderSubtreeIntoContainer=function(s,t,r,a){if(!mm(r))throw Error(Ve(200));if(s==null||s._reactInternals===void 0)throw Error(Ve(38));return hm(s,t,r,!1,a)};Mr.version="18.3.1-next-f1338f8080-20240426";function J2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(J2)}catch(s){console.error(s)}}J2(),Jw.exports=Mr;var KC=Jw.exports,wv=KC;ap.createRoot=wv.createRoot,ap.hydrateRoot=wv.hydrateRoot;const YC="modulepreload",XC=function(s){return"/"+s},kv={},JC=function(t,r,a){if(!r||r.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(r.map(l=>{if(l=XC(l),l in kv)return;kv[l]=!0;const o=l.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(!!a)for(let g=i.length-1;g>=0;g--){const N=i[g];if(N.href===l&&(!o||N.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=o?"stylesheet":YC,o||(h.as="script",h.crossOrigin=""),h.href=l,document.head.appendChild(h),o)return new Promise((g,N)=>{h.addEventListener("load",g),h.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>t()).catch(l=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l})};var Wf={};Object.defineProperty(Wf,"__esModule",{value:!0});Wf.parse=nE;Wf.serialize=iE;const ZC=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,eE=/^[\u0021-\u003A\u003C-\u007E]*$/,tE=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,sE=/^[\u0020-\u003A\u003D-\u007E]*$/,rE=Object.prototype.toString,aE=(()=>{const s=function(){};return s.prototype=Object.create(null),s})();function nE(s,t){const r=new aE,a=s.length;if(a<2)return r;const i=(t==null?void 0:t.decode)||oE;let l=0;do{const o=s.indexOf("=",l);if(o===-1)break;const c=s.indexOf(";",l),d=c===-1?a:c;if(o>d){l=s.lastIndexOf(";",o-1)+1;continue}const h=Iv(s,l,o),g=Pv(s,o,h),N=s.slice(h,g);if(r[N]===void 0){let k=Iv(s,o+1,d),E=Pv(s,d,k);const y=i(s.slice(k,E));r[N]=y}l=d+1}while(l<a);return r}function Iv(s,t,r){do{const a=s.charCodeAt(t);if(a!==32&&a!==9)return t}while(++t<r);return r}function Pv(s,t,r){for(;t>r;){const a=s.charCodeAt(--t);if(a!==32&&a!==9)return t+1}return r}function iE(s,t,r){const a=(r==null?void 0:r.encode)||encodeURIComponent;if(!ZC.test(s))throw new TypeError(`argument name is invalid: ${s}`);const i=a(t);if(!eE.test(i))throw new TypeError(`argument val is invalid: ${t}`);let l=s+"="+i;if(!r)return l;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);l+="; Max-Age="+r.maxAge}if(r.domain){if(!tE.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);l+="; Domain="+r.domain}if(r.path){if(!sE.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);l+="; Path="+r.path}if(r.expires){if(!lE(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);l+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(l+="; HttpOnly"),r.secure&&(l+="; Secure"),r.partitioned&&(l+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return l}function oE(s){if(s.indexOf("%")===-1)return s;try{return decodeURIComponent(s)}catch{return s}}function lE(s){return rE.call(s)==="[object Date]"}var Sv="popstate";function cE(s={}){function t(a,i){let{pathname:l,search:o,hash:c}=a.location;return Xp("",{pathname:l,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){return typeof i=="string"?i:Ec(i)}return uE(t,r,null,s)}function us(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function Ea(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function dE(){return Math.random().toString(36).substring(2,10)}function Cv(s,t){return{usr:s.state,key:s.key,idx:t}}function Xp(s,t,r=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?tl(t):t,state:r,key:t&&t.key||a||dE()}}function Ec({pathname:s="/",search:t="",hash:r=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function tl(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substring(r),s=s.substring(0,r));let a=s.indexOf("?");a>=0&&(t.search=s.substring(a),s=s.substring(0,a)),s&&(t.pathname=s)}return t}function uE(s,t,r,a={}){let{window:i=document.defaultView,v5Compat:l=!1}=a,o=i.history,c="POP",d=null,h=g();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function g(){return(o.state||{idx:null}).idx}function N(){c="POP";let _=g(),A=_==null?null:_-h;h=_,d&&d({action:c,location:O.location,delta:A})}function k(_,A){c="PUSH";let z=Xp(O.location,_,A);r&&r(z,_),h=g()+1;let L=Cv(z,h),K=O.createHref(z);try{o.pushState(L,"",K)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;i.location.assign(K)}l&&d&&d({action:c,location:O.location,delta:1})}function E(_,A){c="REPLACE";let z=Xp(O.location,_,A);r&&r(z,_),h=g();let L=Cv(z,h),K=O.createHref(z);o.replaceState(L,"",K),l&&d&&d({action:c,location:O.location,delta:0})}function y(_){let A=i.location.origin!=="null"?i.location.origin:i.location.href,z=typeof _=="string"?_:Ec(_);return z=z.replace(/ $/,"%20"),us(A,`No window.location.(origin|href) available to create URL for href: ${z}`),new URL(z,A)}let O={get action(){return c},get location(){return s(i,o)},listen(_){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Sv,N),d=_,()=>{i.removeEventListener(Sv,N),d=null}},createHref(_){return t(i,_)},createURL:y,encodeLocation(_){let A=y(_);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:k,replace:E,go(_){return o.go(_)}};return O}function Z2(s,t,r="/"){return xE(s,t,r,!1)}function xE(s,t,r,a){let i=typeof t=="string"?tl(t):t,l=Ja(i.pathname||"/",r);if(l==null)return null;let o=e4(s);mE(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let h=kE(l);c=NE(o[d],h,a)}return c}function e4(s,t=[],r=[],a=""){let i=(l,o,c)=>{let d={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};d.relativePath.startsWith("/")&&(us(d.relativePath.startsWith(a),`Absolute route path "${d.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(a.length));let h=Ha([a,d.relativePath]),g=r.concat(d);l.children&&l.children.length>0&&(us(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),e4(l.children,t,g,h)),!(l.path==null&&!l.index)&&t.push({path:h,score:vE(h,l.index),routesMeta:g})};return s.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))i(l,o);else for(let d of t4(l.path))i(l,o,d)}),t}function t4(s){let t=s.split("/");if(t.length===0)return[];let[r,...a]=t,i=r.endsWith("?"),l=r.replace(/\?$/,"");if(a.length===0)return i?[l,""]:[l];let o=t4(a.join("/")),c=[];return c.push(...o.map(d=>d===""?l:[l,d].join("/"))),i&&c.push(...o),c.map(d=>s.startsWith("/")&&d===""?"/":d)}function mE(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:jE(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var hE=/^:[\w-]+$/,pE=3,fE=2,gE=1,yE=10,bE=-2,Ev=s=>s==="*";function vE(s,t){let r=s.split("/"),a=r.length;return r.some(Ev)&&(a+=bE),t&&(a+=fE),r.filter(i=>!Ev(i)).reduce((i,l)=>i+(hE.test(l)?pE:l===""?gE:yE),a)}function jE(s,t){return s.length===t.length&&s.slice(0,-1).every((a,i)=>a===t[i])?s[s.length-1]-t[t.length-1]:0}function NE(s,t,r=!1){let{routesMeta:a}=s,i={},l="/",o=[];for(let c=0;c<a.length;++c){let d=a[c],h=c===a.length-1,g=l==="/"?t:t.slice(l.length)||"/",N=fx({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},g),k=d.route;if(!N&&h&&r&&!a[a.length-1].route.index&&(N=fx({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!N)return null;Object.assign(i,N.params),o.push({params:i,pathname:Ha([l,N.pathname]),pathnameBase:CE(Ha([l,N.pathnameBase])),route:k}),N.pathnameBase!=="/"&&(l=Ha([l,N.pathnameBase]))}return o}function fx(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,a]=wE(s.path,s.caseSensitive,s.end),i=t.match(r);if(!i)return null;let l=i[0],o=l.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:a.reduce((h,{paramName:g,isOptional:N},k)=>{if(g==="*"){let y=c[k]||"";o=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const E=c[k];return N&&!E?h[g]=void 0:h[g]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:o,pattern:s}}function wE(s,t=!1,r=!0){Ea(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],i="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(a.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(a.push({paramName:"*"}),i+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":s!==""&&s!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),a]}function kE(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ea(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function Ja(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=s.charAt(r);return a&&a!=="/"?null:s.slice(r)||"/"}function IE(s,t="/"){let{pathname:r,search:a="",hash:i=""}=typeof s=="string"?tl(s):s;return{pathname:r?r.startsWith("/")?r:PE(r,t):t,search:EE(a),hash:TE(i)}}function PE(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Sh(s,t,r,a){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SE(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function s4(s){let t=SE(s);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function r4(s,t,r,a=!1){let i;typeof s=="string"?i=tl(s):(i={...s},us(!i.pathname||!i.pathname.includes("?"),Sh("?","pathname","search",i)),us(!i.pathname||!i.pathname.includes("#"),Sh("#","pathname","hash",i)),us(!i.search||!i.search.includes("#"),Sh("#","search","hash",i)));let l=s===""||i.pathname==="",o=l?"/":i.pathname,c;if(o==null)c=r;else{let N=t.length-1;if(!a&&o.startsWith("..")){let k=o.split("/");for(;k[0]==="..";)k.shift(),N-=1;i.pathname=k.join("/")}c=N>=0?t[N]:"/"}let d=IE(i,c),h=o&&o!=="/"&&o.endsWith("/"),g=(l||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(h||g)&&(d.pathname+="/"),d}var Ha=s=>s.join("/").replace(/\/\/+/g,"/"),CE=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),EE=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,TE=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function _E(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var a4=["POST","PUT","PATCH","DELETE"];new Set(a4);var DE=["GET",...a4];new Set(DE);var sl=v.createContext(null);sl.displayName="DataRouter";var pm=v.createContext(null);pm.displayName="DataRouterState";var n4=v.createContext({isTransitioning:!1});n4.displayName="ViewTransition";var AE=v.createContext(new Map);AE.displayName="Fetchers";var RE=v.createContext(null);RE.displayName="Await";var Aa=v.createContext(null);Aa.displayName="Navigation";var sd=v.createContext(null);sd.displayName="Location";var on=v.createContext({outlet:null,matches:[],isDataRoute:!1});on.displayName="Route";var qf=v.createContext(null);qf.displayName="RouteError";function ME(s,{relative:t}={}){us(rd(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=v.useContext(Aa),{hash:i,pathname:l,search:o}=ad(s,{relative:t}),c=l;return r!=="/"&&(c=l==="/"?r:Ha([r,l])),a.createHref({pathname:c,search:o,hash:i})}function rd(){return v.useContext(sd)!=null}function zi(){return us(rd(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(sd).location}var i4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function o4(s){v.useContext(Aa).static||v.useLayoutEffect(s)}function St(){let{isDataRoute:s}=v.useContext(on);return s?QE():LE()}function LE(){us(rd(),"useNavigate() may be used only in the context of a <Router> component.");let s=v.useContext(sl),{basename:t,navigator:r}=v.useContext(Aa),{matches:a}=v.useContext(on),{pathname:i}=zi(),l=JSON.stringify(s4(a)),o=v.useRef(!1);return o4(()=>{o.current=!0}),v.useCallback((d,h={})=>{if(Ea(o.current,i4),!o.current)return;if(typeof d=="number"){r.go(d);return}let g=r4(d,JSON.parse(l),i,h.relative==="path");s==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:Ha([t,g.pathname])),(h.replace?r.replace:r.push)(g,h.state,h)},[t,r,l,i,s])}v.createContext(null);function ad(s,{relative:t}={}){let{matches:r}=v.useContext(on),{pathname:a}=zi(),i=JSON.stringify(s4(r));return v.useMemo(()=>r4(s,JSON.parse(i),a,t==="path"),[s,i,a,t])}function OE(s,t){return l4(s,t)}function l4(s,t,r,a){var z;us(rd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:l}=v.useContext(Aa),{matches:o}=v.useContext(on),c=o[o.length-1],d=c?c.params:{},h=c?c.pathname:"/",g=c?c.pathnameBase:"/",N=c&&c.route;{let L=N&&N.path||"";c4(h,!N||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let k=zi(),E;if(t){let L=typeof t=="string"?tl(t):t;us(g==="/"||((z=L.pathname)==null?void 0:z.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${L.pathname}" was given in the \`location\` prop.`),E=L}else E=k;let y=E.pathname||"/",O=y;if(g!=="/"){let L=g.replace(/^\//,"").split("/");O="/"+y.replace(/^\//,"").split("/").slice(L.length).join("/")}let _=!l&&r&&r.matches&&r.matches.length>0?r.matches:Z2(s,{pathname:O});Ea(N||_!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Ea(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=UE(_&&_.map(L=>Object.assign({},L,{params:Object.assign({},d,L.params),pathname:Ha([g,i.encodeLocation?i.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?g:Ha([g,i.encodeLocation?i.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),o,r,a);return t&&A?v.createElement(sd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},A):A}function VE(){let s=GE(),t=_E(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",s),o=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:l},"ErrorBoundary")," or"," ",v.createElement("code",{style:l},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:i},r):null,o)}var zE=v.createElement(VE,null),BE=class extends v.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){console.error("React Router caught the following error during render",s,t)}render(){return this.state.error!==void 0?v.createElement(on.Provider,{value:this.props.routeContext},v.createElement(qf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function FE({routeContext:s,match:t,children:r}){let a=v.useContext(sl);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(on.Provider,{value:s},r)}function UE(s,t=[],r=null,a=null){if(s==null){if(!r)return null;if(r.errors)s=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let i=s,l=r==null?void 0:r.errors;if(l!=null){let d=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);us(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(r)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:g,errors:N}=r,k=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!N||N[h.route.id]===void 0);if(h.route.lazy||k){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,g)=>{let N,k=!1,E=null,y=null;r&&(N=l&&h.route.id?l[h.route.id]:void 0,E=h.route.errorElement||zE,o&&(c<0&&g===0?(c4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,y=null):c===g&&(k=!0,y=h.route.hydrateFallbackElement||null)));let O=t.concat(i.slice(0,g+1)),_=()=>{let A;return N?A=E:k?A=y:h.route.Component?A=v.createElement(h.route.Component,null):h.route.element?A=h.route.element:A=d,v.createElement(FE,{match:h,routeContext:{outlet:d,matches:O,isDataRoute:r!=null},children:A})};return r&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?v.createElement(BE,{location:r.location,revalidation:r.revalidation,component:E,error:N,children:_(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):_()},null)}function Hf(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $E(s){let t=v.useContext(sl);return us(t,Hf(s)),t}function WE(s){let t=v.useContext(pm);return us(t,Hf(s)),t}function qE(s){let t=v.useContext(on);return us(t,Hf(s)),t}function Gf(s){let t=qE(s),r=t.matches[t.matches.length-1];return us(r.route.id,`${s} can only be used on routes that contain a unique "id"`),r.route.id}function HE(){return Gf("useRouteId")}function GE(){var a;let s=v.useContext(qf),t=WE("useRouteError"),r=Gf("useRouteError");return s!==void 0?s:(a=t.errors)==null?void 0:a[r]}function QE(){let{router:s}=$E("useNavigate"),t=Gf("useNavigate"),r=v.useRef(!1);return o4(()=>{r.current=!0}),v.useCallback(async(i,l={})=>{Ea(r.current,i4),r.current&&(typeof i=="number"?s.navigate(i):await s.navigate(i,{fromRouteId:t,...l}))},[s,t])}var Tv={};function c4(s,t,r){!t&&!Tv[s]&&(Tv[s]=!0,Ea(!1,r))}v.memo(KE);function KE({routes:s,future:t,state:r}){return l4(s,void 0,r,t)}function Ct(s){us(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YE({basename:s="/",children:t=null,location:r,navigationType:a="POP",navigator:i,static:l=!1}){us(!rd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=s.replace(/^\/*/,"/"),c=v.useMemo(()=>({basename:o,navigator:i,static:l,future:{}}),[o,i,l]);typeof r=="string"&&(r=tl(r));let{pathname:d="/",search:h="",hash:g="",state:N=null,key:k="default"}=r,E=v.useMemo(()=>{let y=Ja(d,o);return y==null?null:{location:{pathname:y,search:h,hash:g,state:N,key:k},navigationType:a}},[o,d,h,g,N,k,a]);return Ea(E!=null,`<Router basename="${o}"> is not able to match the URL "${d}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:v.createElement(Aa.Provider,{value:c},v.createElement(sd.Provider,{children:t,value:E}))}function XE({children:s,location:t}){return OE(Jp(s),t)}function Jp(s,t=[]){let r=[];return v.Children.forEach(s,(a,i)=>{if(!v.isValidElement(a))return;let l=[...t,i];if(a.type===v.Fragment){r.push.apply(r,Jp(a.props.children,l));return}us(a.type===Ct,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),us(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=Jp(a.props.children,l)),r.push(o)}),r}var Cu="get",Eu="application/x-www-form-urlencoded";function fm(s){return s!=null&&typeof s.tagName=="string"}function JE(s){return fm(s)&&s.tagName.toLowerCase()==="button"}function ZE(s){return fm(s)&&s.tagName.toLowerCase()==="form"}function eT(s){return fm(s)&&s.tagName.toLowerCase()==="input"}function tT(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function sT(s,t){return s.button===0&&(!t||t==="_self")&&!tT(s)}var ru=null;function rT(){if(ru===null)try{new FormData(document.createElement("form"),0),ru=!1}catch{ru=!0}return ru}var aT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ch(s){return s!=null&&!aT.has(s)?(Ea(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Eu}"`),null):s}function nT(s,t){let r,a,i,l,o;if(ZE(s)){let c=s.getAttribute("action");a=c?Ja(c,t):null,r=s.getAttribute("method")||Cu,i=Ch(s.getAttribute("enctype"))||Eu,l=new FormData(s)}else if(JE(s)||eT(s)&&(s.type==="submit"||s.type==="image")){let c=s.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=s.getAttribute("formaction")||c.getAttribute("action");if(a=d?Ja(d,t):null,r=s.getAttribute("formmethod")||c.getAttribute("method")||Cu,i=Ch(s.getAttribute("formenctype"))||Ch(c.getAttribute("enctype"))||Eu,l=new FormData(c,s),!rT()){let{name:h,type:g,value:N}=s;if(g==="image"){let k=h?`${h}.`:"";l.append(`${k}x`,"0"),l.append(`${k}y`,"0")}else h&&l.append(h,N)}}else{if(fm(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Cu,a=null,i=Eu,o=s}return l&&i==="text/plain"&&(o=l,l=void 0),{action:a,method:r.toLowerCase(),encType:i,formData:l,body:o}}function Qf(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}async function iT(s,t){if(s.id in t)return t[s.id];try{let r=await JC(()=>import(s.module),[]);return t[s.id]=r,r}catch(r){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oT(s){return s!=null&&typeof s.page=="string"}function lT(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function cT(s,t,r){let a=await Promise.all(s.map(async i=>{let l=t.routes[i.route.id];if(l){let o=await iT(l,r);return o.links?o.links():[]}return[]}));return mT(a.flat(1).filter(lT).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function _v(s,t,r,a,i,l){let o=(d,h)=>r[h]?d.route.id!==r[h].route.id:!0,c=(d,h)=>{var g;return r[h].pathname!==d.pathname||((g=r[h].route.path)==null?void 0:g.endsWith("*"))&&r[h].params["*"]!==d.params["*"]};return l==="assets"?t.filter((d,h)=>o(d,h)||c(d,h)):l==="data"?t.filter((d,h)=>{var N;let g=a.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(o(d,h)||c(d,h))return!0;if(d.route.shouldRevalidate){let k=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((N=r[0])==null?void 0:N.params)||{},nextUrl:new URL(s,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function dT(s,t,{includeHydrateFallback:r}={}){return uT(s.map(a=>{let i=t.routes[a.route.id];if(!i)return[];let l=[i.module];return i.clientActionModule&&(l=l.concat(i.clientActionModule)),i.clientLoaderModule&&(l=l.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(l=l.concat(i.hydrateFallbackModule)),i.imports&&(l=l.concat(i.imports)),l}).flat(1))}function uT(s){return[...new Set(s)]}function xT(s){let t={},r=Object.keys(s).sort();for(let a of r)t[a]=s[a];return t}function mT(s,t){let r=new Set,a=new Set(t);return s.reduce((i,l)=>{if(t&&!oT(l)&&l.as==="script"&&l.href&&a.has(l.href))return i;let c=JSON.stringify(xT(l));return r.has(c)||(r.add(c),i.push({key:c,link:l})),i},[])}function hT(s,t){let r=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return r.pathname==="/"?r.pathname="_root.data":t&&Ja(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function d4(){let s=v.useContext(sl);return Qf(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function pT(){let s=v.useContext(pm);return Qf(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Kf=v.createContext(void 0);Kf.displayName="FrameworkContext";function u4(){let s=v.useContext(Kf);return Qf(s,"You must render this element inside a <HydratedRouter> element"),s}function fT(s,t){let r=v.useContext(Kf),[a,i]=v.useState(!1),[l,o]=v.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:h,onMouseLeave:g,onTouchStart:N}=t,k=v.useRef(null);v.useEffect(()=>{if(s==="render"&&o(!0),s==="viewport"){let O=A=>{A.forEach(z=>{o(z.isIntersecting)})},_=new IntersectionObserver(O,{threshold:.5});return k.current&&_.observe(k.current),()=>{_.disconnect()}}},[s]),v.useEffect(()=>{if(a){let O=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(O)}}},[a]);let E=()=>{i(!0)},y=()=>{i(!1),o(!1)};return r?s!=="intent"?[l,k,{}]:[l,k,{onFocus:Tl(c,E),onBlur:Tl(d,y),onMouseEnter:Tl(h,E),onMouseLeave:Tl(g,y),onTouchStart:Tl(N,E)}]:[!1,k,{}]}function Tl(s,t){return r=>{s&&s(r),r.defaultPrevented||t(r)}}function gT({page:s,...t}){let{router:r}=d4(),a=v.useMemo(()=>Z2(r.routes,s,r.basename),[r.routes,s,r.basename]);return a?v.createElement(bT,{page:s,matches:a,...t}):null}function yT(s){let{manifest:t,routeModules:r}=u4(),[a,i]=v.useState([]);return v.useEffect(()=>{let l=!1;return cT(s,t,r).then(o=>{l||i(o)}),()=>{l=!0}},[s,t,r]),a}function bT({page:s,matches:t,...r}){let a=zi(),{manifest:i,routeModules:l}=u4(),{basename:o}=d4(),{loaderData:c,matches:d}=pT(),h=v.useMemo(()=>_v(s,t,d,i,a,"data"),[s,t,d,i,a]),g=v.useMemo(()=>_v(s,t,d,i,a,"assets"),[s,t,d,i,a]),N=v.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let y=new Set,O=!1;if(t.forEach(A=>{var L;let z=i.routes[A.route.id];!z||!z.hasLoader||(!h.some(K=>K.route.id===A.route.id)&&A.route.id in c&&((L=l[A.route.id])!=null&&L.shouldRevalidate)||z.hasClientLoader?O=!0:y.add(A.route.id))}),y.size===0)return[];let _=hT(s,o);return O&&y.size>0&&_.searchParams.set("_routes",t.filter(A=>y.has(A.route.id)).map(A=>A.route.id).join(",")),[_.pathname+_.search]},[o,c,a,i,h,t,s,l]),k=v.useMemo(()=>dT(g,i),[g,i]),E=yT(g);return v.createElement(v.Fragment,null,N.map(y=>v.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),k.map(y=>v.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),E.map(({key:y,link:O})=>v.createElement("link",{key:y,...O})))}function vT(...s){return t=>{s.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var x4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{x4&&(window.__reactRouterVersion="7.5.0")}catch{}function jT({basename:s,children:t,window:r}){let a=v.useRef();a.current==null&&(a.current=cE({window:r,v5Compat:!0}));let i=a.current,[l,o]=v.useState({action:i.action,location:i.location}),c=v.useCallback(d=>{v.startTransition(()=>o(d))},[o]);return v.useLayoutEffect(()=>i.listen(c),[i,c]),v.createElement(YE,{basename:s,children:t,location:l.location,navigationType:l.action,navigator:i})}var m4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,b=v.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:i,reloadDocument:l,replace:o,state:c,target:d,to:h,preventScrollReset:g,viewTransition:N,...k},E){let{basename:y}=v.useContext(Aa),O=typeof h=="string"&&m4.test(h),_,A=!1;if(typeof h=="string"&&O&&(_=h,x4))try{let q=new URL(window.location.href),U=h.startsWith("//")?new URL(q.protocol+h):new URL(h),te=Ja(U.pathname,y);U.origin===q.origin&&te!=null?h=te+U.search+U.hash:A=!0}catch{Ea(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=ME(h,{relative:i}),[L,K,H]=fT(a,k),G=IT(h,{replace:o,state:c,target:d,preventScrollReset:g,relative:i,viewTransition:N});function R(q){t&&t(q),q.defaultPrevented||G(q)}let u=v.createElement("a",{...k,...H,href:_||z,onClick:A||l?t:R,ref:vT(E,K),target:d,"data-discover":!O&&r==="render"?"true":void 0});return L&&!O?v.createElement(v.Fragment,null,u,v.createElement(gT,{page:z})):u});b.displayName="Link";var NT=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:i=!1,style:l,to:o,viewTransition:c,children:d,...h},g){let N=ad(o,{relative:h.relative}),k=zi(),E=v.useContext(pm),{navigator:y,basename:O}=v.useContext(Aa),_=E!=null&&TT(N)&&c===!0,A=y.encodeLocation?y.encodeLocation(N).pathname:N.pathname,z=k.pathname,L=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;r||(z=z.toLowerCase(),L=L?L.toLowerCase():null,A=A.toLowerCase()),L&&O&&(L=Ja(L,O)||L);const K=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let H=z===A||!i&&z.startsWith(A)&&z.charAt(K)==="/",G=L!=null&&(L===A||!i&&L.startsWith(A)&&L.charAt(A.length)==="/"),R={isActive:H,isPending:G,isTransitioning:_},u=H?t:void 0,q;typeof a=="function"?q=a(R):q=[a,H?"active":null,G?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let U=typeof l=="function"?l(R):l;return v.createElement(b,{...h,"aria-current":u,className:q,ref:g,style:U,to:o,viewTransition:c},typeof d=="function"?d(R):d)});NT.displayName="NavLink";var wT=v.forwardRef(({discover:s="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:i,state:l,method:o=Cu,action:c,onSubmit:d,relative:h,preventScrollReset:g,viewTransition:N,...k},E)=>{let y=CT(),O=ET(c,{relative:h}),_=o.toLowerCase()==="get"?"get":"post",A=typeof c=="string"&&m4.test(c),z=L=>{if(d&&d(L),L.defaultPrevented)return;L.preventDefault();let K=L.nativeEvent.submitter,H=(K==null?void 0:K.getAttribute("formmethod"))||o;y(K||L.currentTarget,{fetcherKey:t,method:H,navigate:r,replace:i,state:l,relative:h,preventScrollReset:g,viewTransition:N})};return v.createElement("form",{ref:E,method:_,action:O,onSubmit:a?d:z,...k,"data-discover":!A&&s==="render"?"true":void 0})});wT.displayName="Form";function kT(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h4(s){let t=v.useContext(sl);return us(t,kT(s)),t}function IT(s,{target:t,replace:r,state:a,preventScrollReset:i,relative:l,viewTransition:o}={}){let c=St(),d=zi(),h=ad(s,{relative:l});return v.useCallback(g=>{if(sT(g,t)){g.preventDefault();let N=r!==void 0?r:Ec(d)===Ec(h);c(s,{replace:N,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,h,r,a,t,s,i,l,o])}var PT=0,ST=()=>`__${String(++PT)}__`;function CT(){let{router:s}=h4("useSubmit"),{basename:t}=v.useContext(Aa),r=HE();return v.useCallback(async(a,i={})=>{let{action:l,method:o,encType:c,formData:d,body:h}=nT(a,t);if(i.navigate===!1){let g=i.fetcherKey||ST();await s.fetch(g,r,i.action||l,{preventScrollReset:i.preventScrollReset,formData:d,body:h,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await s.navigate(i.action||l,{preventScrollReset:i.preventScrollReset,formData:d,body:h,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[s,t,r])}function ET(s,{relative:t}={}){let{basename:r}=v.useContext(Aa),a=v.useContext(on);us(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),l={...ad(s||".",{relative:t})},o=zi();if(s==null){l.search=o.search;let c=new URLSearchParams(l.search),d=c.getAll("index");if(d.some(g=>g==="")){c.delete("index"),d.filter(N=>N).forEach(N=>c.append("index",N));let g=c.toString();l.search=g?`?${g}`:""}}return(!s||s===".")&&i.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:Ha([r,l.pathname])),Ec(l)}function TT(s,t={}){let r=v.useContext(n4);us(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=h4("useViewTransitionState"),i=ad(s,{relative:t.relative});if(!r.isTransitioning)return!1;let l=Ja(r.currentLocation.pathname,a)||r.currentLocation.pathname,o=Ja(r.nextLocation.pathname,a)||r.nextLocation.pathname;return fx(i.pathname,o)!=null||fx(i.pathname,l)!=null}new TextEncoder;var p4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Dv=Sn.createContext&&Sn.createContext(p4),_T=["attr","size","title"];function DT(s,t){if(s==null)return{};var r=AT(s,t),a,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(i=0;i<l.length;i++)a=l[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function AT(s,t){if(s==null)return{};var r={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(t.indexOf(a)>=0)continue;r[a]=s[a]}return r}function gx(){return gx=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},gx.apply(this,arguments)}function Av(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),r.push.apply(r,a)}return r}function yx(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Av(Object(r),!0).forEach(function(a){RT(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Av(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function RT(s,t,r){return t=MT(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function MT(s){var t=LT(s,"string");return typeof t=="symbol"?t:t+""}function LT(s,t){if(typeof s!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function f4(s){return s&&s.map((t,r)=>Sn.createElement(t.tag,yx({key:r},t.attr),f4(t.child)))}function nt(s){return t=>Sn.createElement(OT,gx({attr:yx({},s.attr)},t),f4(s.child))}function OT(s){var t=r=>{var{attr:a,size:i,title:l}=s,o=DT(s,_T),c=i||r.size||"1em",d;return r.className&&(d=r.className),s.className&&(d=(d?d+" ":"")+s.className),Sn.createElement("svg",gx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,o,{className:d,style:yx(yx({color:s.color||r.color},r.style),s.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),l&&Sn.createElement("title",null,l),s.children)};return Dv!==void 0?Sn.createElement(Dv.Consumer,null,r=>t(r)):t(p4)}function VT(s){return nt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(s)}function Zp(s){return nt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(s)}function Rv(s){return nt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M150.94 192h33.73c11.01 0 18.61-10.83 14.86-21.18-4.93-13.58-7.55-27.98-7.55-42.82s2.62-29.24 7.55-42.82C203.29 74.83 195.68 64 184.67 64h-33.73c-7.01 0-13.46 4.49-15.41 11.23C130.64 92.21 128 109.88 128 128c0 18.12 2.64 35.79 7.54 52.76 1.94 6.74 8.39 11.24 15.4 11.24zM89.92 23.34C95.56 12.72 87.97 0 75.96 0H40.63c-6.27 0-12.14 3.59-14.74 9.31C9.4 45.54 0 85.65 0 128c0 24.75 3.12 68.33 26.69 118.86 2.62 5.63 8.42 9.14 14.61 9.14h34.84c12.02 0 19.61-12.74 13.95-23.37-49.78-93.32-16.71-178.15-.17-209.29zM614.06 9.29C611.46 3.58 605.6 0 599.33 0h-35.42c-11.98 0-19.66 12.66-14.02 23.25 18.27 34.29 48.42 119.42.28 209.23-5.72 10.68 1.8 23.52 13.91 23.52h35.23c6.27 0 12.13-3.58 14.73-9.29C630.57 210.48 640 170.36 640 128s-9.42-82.48-25.94-118.71zM489.06 64h-33.73c-11.01 0-18.61 10.83-14.86 21.18 4.93 13.58 7.55 27.98 7.55 42.82s-2.62 29.24-7.55 42.82c-3.76 10.35 3.85 21.18 14.86 21.18h33.73c7.02 0 13.46-4.49 15.41-11.24 4.9-16.97 7.53-34.64 7.53-52.76 0-18.12-2.64-35.79-7.54-52.76-1.94-6.75-8.39-11.24-15.4-11.24zm-116.3 100.12c7.05-10.29 11.2-22.71 11.2-36.12 0-35.35-28.63-64-63.96-64-35.32 0-63.96 28.65-63.96 64 0 13.41 4.15 25.83 11.2 36.12l-130.5 313.41c-3.4 8.15.46 17.52 8.61 20.92l29.51 12.31c8.15 3.4 17.52-.46 20.91-8.61L244.96 384h150.07l49.2 118.15c3.4 8.16 12.76 12.01 20.91 8.61l29.51-12.31c8.15-3.4 12-12.77 8.61-20.92l-130.5-313.41zM271.62 320L320 203.81 368.38 320h-96.76z"},child:[]}]})(s)}function zT(s){return nt({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(s)}function BT(s){return nt({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(s)}function Mv(s){return nt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64V160h160v256zm224 0H288V160h160v256z"},child:[]}]})(s)}function bx(s){return nt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(s)}function e0(s){return nt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM160 368c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16V240c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v128zm96 0c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16V144c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v224zm96 0c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16v-64c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v64z"},child:[]}]})(s)}function t0(s){return nt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(s)}function vx(s){return nt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(s)}function Lv(s){return nt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(s)}function jx(s){return nt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(s)}function Ov(s){return nt({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(s)}function g4(s){return nt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(s)}const FT=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=function(s){const t=[];let r=0;for(let a=0;a<s.length;a++){let i=s.charCodeAt(a);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=i&63|128):(i&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(i=65536+((i&1023)<<10)+(s.charCodeAt(++a)&1023),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=i&63|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=i&63|128)}return t},UT=function(s){const t=[];let r=0,a=0;for(;r<s.length;){const i=s[r++];if(i<128)t[a++]=String.fromCharCode(i);else if(i>191&&i<224){const l=s[r++];t[a++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=s[r++],o=s[r++],c=s[r++],d=((i&7)<<18|(l&63)<<12|(o&63)<<6|c&63)-65536;t[a++]=String.fromCharCode(55296+(d>>10)),t[a++]=String.fromCharCode(56320+(d&1023))}else{const l=s[r++],o=s[r++];t[a++]=String.fromCharCode((i&15)<<12|(l&63)<<6|o&63)}}return t.join("")},b4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let i=0;i<s.length;i+=3){const l=s[i],o=i+1<s.length,c=o?s[i+1]:0,d=i+2<s.length,h=d?s[i+2]:0,g=l>>2,N=(l&3)<<4|c>>4;let k=(c&15)<<2|h>>6,E=h&63;d||(E=64,o||(k=64)),a.push(r[g],r[N],r[k],r[E])}return a.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(y4(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):UT(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let i=0;i<s.length;){const l=r[s.charAt(i++)],c=i<s.length?r[s.charAt(i)]:0;++i;const h=i<s.length?r[s.charAt(i)]:64;++i;const N=i<s.length?r[s.charAt(i)]:64;if(++i,l==null||c==null||h==null||N==null)throw new $T;const k=l<<2|c>>4;if(a.push(k),h!==64){const E=c<<4&240|h>>2;if(a.push(E),N!==64){const y=h<<6&192|N;a.push(y)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class $T extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WT=function(s){const t=y4(s);return b4.encodeByteArray(t,!0)},Nx=function(s){return WT(s).replace(/\./g,"")},v4=function(s){try{return b4.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=()=>qT().__FIREBASE_DEFAULTS__,GT=()=>{if(typeof process>"u"||typeof process.env>"u")return;const s={}.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},QT=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&v4(s[1]);return t&&JSON.parse(t)},gm=()=>{try{return FT()||HT()||GT()||QT()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},j4=s=>{var t,r;return(r=(t=gm())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[s]},N4=s=>{const t=j4(s);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),a]:[t.substring(0,r),a]},w4=()=>{var s;return(s=gm())===null||s===void 0?void 0:s.config},k4=s=>{var t;return(t=gm())===null||t===void 0?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,a)=>{r?this.reject(r):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},a=t||"demo-project",i=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s),c="";return[Nx(JSON.stringify(r)),Nx(JSON.stringify(o)),c].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ar())}function XT(){var s;const t=(s=gm())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function P4(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function ZT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function e_(){const s=ar();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function t_(){return!XT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S4(){try{return typeof indexedDB=="object"}catch{return!1}}function C4(){return new Promise((s,t)=>{try{let r=!0;const a="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(a);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(a),s(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var l;t(((l=i.error)===null||l===void 0?void 0:l.message)||"")}}catch(r){t(r)}})}function s_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="FirebaseError";class Xr extends Error{constructor(t,r,a){super(r),this.code=t,this.customData=a,this.name=r_,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bi.prototype.create)}}class Bi{constructor(t,r,a){this.service=t,this.serviceName=r,this.errors=a}create(t,...r){const a=r[0]||{},i=`${this.service}/${t}`,l=this.errors[t],o=l?a_(l,a):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Xr(i,c,a)}}function a_(s,t){return s.replace(n_,(r,a)=>{const i=t[a];return i!=null?String(i):`<${a}?>`})}const n_=/\{\$([^}]+)}/g;function i_(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Un(s,t){if(s===t)return!0;const r=Object.keys(s),a=Object.keys(t);for(const i of r){if(!a.includes(i))return!1;const l=s[i],o=t[i];if(Vv(l)&&Vv(o)){if(!Un(l,o))return!1}else if(l!==o)return!1}for(const i of a)if(!r.includes(i))return!1;return!0}function Vv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(s){const t=[];for(const[r,a]of Object.entries(s))Array.isArray(a)?a.forEach(i=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function Ol(s){const t={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[i,l]=a.split("=");t[decodeURIComponent(i)]=decodeURIComponent(l)}}),t}function Vl(s){const t=s.indexOf("?");if(!t)return"";const r=s.indexOf("#",t);return s.substring(t,r>0?r:void 0)}function o_(s,t){const r=new l_(s,t);return r.subscribe.bind(r)}class l_{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,a){let i;if(t===void 0&&r===void 0&&a===void 0)throw new Error("Missing Observer.");c_(t,["next","error","complete"])?i=t:i={next:t,error:r,complete:a},i.next===void 0&&(i.next=Eh),i.error===void 0&&(i.error=Eh),i.complete===void 0&&(i.complete=Eh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function c_(s,t){if(typeof s!="object"||s===null)return!1;for(const r of t)if(r in s&&typeof s[r]=="function")return!0;return!1}function Eh(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=1e3,u_=2,x_=4*60*60*1e3,m_=.5;function zv(s,t=d_,r=u_){const a=t*Math.pow(r,s),i=Math.round(m_*a*(Math.random()-.5)*2);return Math.min(x_,a+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(s){return s&&s._delegate?s._delegate:s}class Yr{constructor(t,r,a){this.name=t,this.instanceFactory=r,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const a=new KT;if(this.instancesDeferred.set(r,a),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&a.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const a=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(r=t==null?void 0:t.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(f_(t))try{this.getOrInitializeService({instanceIdentifier:xi})}catch{}for(const[r,a]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const l=this.getOrInitializeService({instanceIdentifier:i});a.resolve(l)}catch{}}}}clearInstance(t=xi){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=xi){return this.instances.has(t)}getOptions(t=xi){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:a,options:r});for(const[l,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(l);a===c&&o.resolve(i)}return i}onInit(t,r){var a;const i=this.normalizeInstanceIdentifier(r),l=(a=this.onInitCallbacks.get(i))!==null&&a!==void 0?a:new Set;l.add(t),this.onInitCallbacks.set(i,l);const o=this.instances.get(i);return o&&t(o,i),()=>{l.delete(t)}}invokeOnInitCallbacks(t,r){const a=this.onInitCallbacks.get(r);if(a)for(const i of a)try{i(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:p_(t),options:r}),this.instances.set(t,a),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=xi){return this.component?this.component.multipleInstances?t:xi:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function p_(s){return s===xi?void 0:s}function f_(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new h_(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(_t||(_t={}));const y_={debug:_t.DEBUG,verbose:_t.VERBOSE,info:_t.INFO,warn:_t.WARN,error:_t.ERROR,silent:_t.SILENT},b_=_t.INFO,v_={[_t.DEBUG]:"log",[_t.VERBOSE]:"log",[_t.INFO]:"info",[_t.WARN]:"warn",[_t.ERROR]:"error"},j_=(s,t,...r)=>{if(t<s.logLevel)return;const a=new Date().toISOString(),i=v_[t];if(i)console[i](`[${a}]  ${s.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ym{constructor(t){this.name=t,this._logLevel=b_,this._logHandler=j_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in _t))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?y_[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,_t.DEBUG,...t),this._logHandler(this,_t.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,_t.VERBOSE,...t),this._logHandler(this,_t.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,_t.INFO,...t),this._logHandler(this,_t.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,_t.WARN,...t),this._logHandler(this,_t.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,_t.ERROR,...t),this._logHandler(this,_t.ERROR,...t)}}const N_=(s,t)=>t.some(r=>s instanceof r);let Bv,Fv;function w_(){return Bv||(Bv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function k_(){return Fv||(Fv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const E4=new WeakMap,s0=new WeakMap,T4=new WeakMap,Th=new WeakMap,Yf=new WeakMap;function I_(s){const t=new Promise((r,a)=>{const i=()=>{s.removeEventListener("success",l),s.removeEventListener("error",o)},l=()=>{r(Ln(s.result)),i()},o=()=>{a(s.error),i()};s.addEventListener("success",l),s.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&E4.set(r,s)}).catch(()=>{}),Yf.set(t,s),t}function P_(s){if(s0.has(s))return;const t=new Promise((r,a)=>{const i=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",o),s.removeEventListener("abort",o)},l=()=>{r(),i()},o=()=>{a(s.error||new DOMException("AbortError","AbortError")),i()};s.addEventListener("complete",l),s.addEventListener("error",o),s.addEventListener("abort",o)});s0.set(s,t)}let r0={get(s,t,r){if(s instanceof IDBTransaction){if(t==="done")return s0.get(s);if(t==="objectStoreNames")return s.objectStoreNames||T4.get(s);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Ln(s[t])},set(s,t,r){return s[t]=r,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function S_(s){r0=s(r0)}function C_(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const a=s.call(_h(this),t,...r);return T4.set(a,t.sort?t.sort():[t]),Ln(a)}:k_().includes(s)?function(...t){return s.apply(_h(this),t),Ln(E4.get(this))}:function(...t){return Ln(s.apply(_h(this),t))}}function E_(s){return typeof s=="function"?C_(s):(s instanceof IDBTransaction&&P_(s),N_(s,w_())?new Proxy(s,r0):s)}function Ln(s){if(s instanceof IDBRequest)return I_(s);if(Th.has(s))return Th.get(s);const t=E_(s);return t!==s&&(Th.set(s,t),Yf.set(t,s)),t}const _h=s=>Yf.get(s);function _4(s,t,{blocked:r,upgrade:a,blocking:i,terminated:l}={}){const o=indexedDB.open(s,t),c=Ln(o);return a&&o.addEventListener("upgradeneeded",d=>{a(Ln(o.result),d.oldVersion,d.newVersion,Ln(o.transaction),d)}),r&&o.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{l&&d.addEventListener("close",()=>l()),i&&d.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const T_=["get","getKey","getAll","getAllKeys","count"],__=["put","add","delete","clear"],Dh=new Map;function Uv(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Dh.get(t))return Dh.get(t);const r=t.replace(/FromIndex$/,""),a=t!==r,i=__.includes(r);if(!(r in(a?IDBIndex:IDBObjectStore).prototype)||!(i||T_.includes(r)))return;const l=async function(o,...c){const d=this.transaction(o,i?"readwrite":"readonly");let h=d.store;return a&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),i&&d.done]))[0]};return Dh.set(t,l),l}S_(s=>({...s,get:(t,r,a)=>Uv(t,r)||s.get(t,r,a),has:(t,r)=>!!Uv(t,r)||s.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(A_(r)){const a=r.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(r=>r).join(" ")}}function A_(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const a0="@firebase/app",$v="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new ym("@firebase/app"),R_="@firebase/app-compat",M_="@firebase/analytics-compat",L_="@firebase/analytics",O_="@firebase/app-check-compat",V_="@firebase/app-check",z_="@firebase/auth",B_="@firebase/auth-compat",F_="@firebase/database",U_="@firebase/data-connect",$_="@firebase/database-compat",W_="@firebase/functions",q_="@firebase/functions-compat",H_="@firebase/installations",G_="@firebase/installations-compat",Q_="@firebase/messaging",K_="@firebase/messaging-compat",Y_="@firebase/performance",X_="@firebase/performance-compat",J_="@firebase/remote-config",Z_="@firebase/remote-config-compat",e8="@firebase/storage",t8="@firebase/storage-compat",s8="@firebase/firestore",r8="@firebase/vertexai",a8="@firebase/firestore-compat",n8="firebase",i8="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="[DEFAULT]",o8={[a0]:"fire-core",[R_]:"fire-core-compat",[L_]:"fire-analytics",[M_]:"fire-analytics-compat",[V_]:"fire-app-check",[O_]:"fire-app-check-compat",[z_]:"fire-auth",[B_]:"fire-auth-compat",[F_]:"fire-rtdb",[U_]:"fire-data-connect",[$_]:"fire-rtdb-compat",[W_]:"fire-fn",[q_]:"fire-fn-compat",[H_]:"fire-iid",[G_]:"fire-iid-compat",[Q_]:"fire-fcm",[K_]:"fire-fcm-compat",[Y_]:"fire-perf",[X_]:"fire-perf-compat",[J_]:"fire-rc",[Z_]:"fire-rc-compat",[e8]:"fire-gcs",[t8]:"fire-gcs-compat",[s8]:"fire-fst",[a8]:"fire-fst-compat",[r8]:"fire-vertex","fire-js":"fire-js",[n8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=new Map,l8=new Map,i0=new Map;function Wv(s,t){try{s.container.addComponent(t)}catch(r){Za.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,r)}}function da(s){const t=s.name;if(i0.has(t))return Za.debug(`There were multiple attempts to register component ${t}.`),!1;i0.set(t,s);for(const r of wx.values())Wv(r,s);for(const r of l8.values())Wv(r,s);return!0}function ei(s,t){const r=s.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),s.container.getProvider(t)}function Cr(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},On=new Bi("app","Firebase",c8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(t,r,a){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=i8;function D4(s,t={}){let r=s;typeof t!="object"&&(t={name:t});const a=Object.assign({name:n0,automaticDataCollectionEnabled:!1},t),i=a.name;if(typeof i!="string"||!i)throw On.create("bad-app-name",{appName:String(i)});if(r||(r=w4()),!r)throw On.create("no-options");const l=wx.get(i);if(l){if(Un(r,l.options)&&Un(a,l.config))return l;throw On.create("duplicate-app",{appName:i})}const o=new g_(i);for(const d of i0.values())o.addComponent(d);const c=new d8(r,a,o);return wx.set(i,c),c}function bm(s=n0){const t=wx.get(s);if(!t&&s===n0&&w4())return D4();if(!t)throw On.create("no-app",{appName:s});return t}function wr(s,t,r){var a;let i=(a=o8[s])!==null&&a!==void 0?a:s;r&&(i+=`-${r}`);const l=i.match(/\s|\//),o=t.match(/\s|\//);if(l||o){const c=[`Unable to register library "${i}" with version "${t}":`];l&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Za.warn(c.join(" "));return}da(new Yr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u8="firebase-heartbeat-database",x8=1,Tc="firebase-heartbeat-store";let Ah=null;function A4(){return Ah||(Ah=_4(u8,x8,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Tc)}catch(r){console.warn(r)}}}}).catch(s=>{throw On.create("idb-open",{originalErrorMessage:s.message})})),Ah}async function m8(s){try{const r=(await A4()).transaction(Tc),a=await r.objectStore(Tc).get(R4(s));return await r.done,a}catch(t){if(t instanceof Xr)Za.warn(t.message);else{const r=On.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Za.warn(r.message)}}}async function qv(s,t){try{const a=(await A4()).transaction(Tc,"readwrite");await a.objectStore(Tc).put(t,R4(s)),await a.done}catch(r){if(r instanceof Xr)Za.warn(r.message);else{const a=On.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Za.warn(a.message)}}}function R4(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8=1024,p8=30;class f8{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new y8(r),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Hv();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(o=>o.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:i}),this._heartbeatsCache.heartbeats.length>p8){const o=b8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Za.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Hv(),{heartbeatsToSend:a,unsentEntries:i}=g8(this._heartbeatsCache.heartbeats),l=Nx(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(r){return Za.warn(r),""}}}function Hv(){return new Date().toISOString().substring(0,10)}function g8(s,t=h8){const r=[];let a=s.slice();for(const i of s){const l=r.find(o=>o.agent===i.agent);if(l){if(l.dates.push(i.date),Gv(r)>t){l.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),Gv(r)>t){r.pop();break}a=a.slice(1)}return{heartbeatsToSend:r,unsentEntries:a}}class y8{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return S4()?C4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await m8(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return qv(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return qv(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Gv(s){return Nx(JSON.stringify({version:2,heartbeats:s})).length}function b8(s){if(s.length===0)return-1;let t=0,r=s[0].date;for(let a=1;a<s.length;a++)s[a].date<r&&(r=s[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(s){da(new Yr("platform-logger",t=>new D_(t),"PRIVATE")),da(new Yr("heartbeat",t=>new f8(t),"PRIVATE")),wr(a0,$v,s),wr(a0,$v,"esm2017"),wr("fire-js","")}v8("");var Qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vn,M4;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(R,u){function q(){}q.prototype=u.prototype,R.D=u.prototype,R.prototype=new q,R.prototype.constructor=R,R.C=function(U,te,se){for(var X=Array(arguments.length-2),$=2;$<arguments.length;$++)X[$-2]=arguments[$];return u.prototype[te].apply(U,X)}}function r(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,r),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,u,q){q||(q=0);var U=Array(16);if(typeof u=="string")for(var te=0;16>te;++te)U[te]=u.charCodeAt(q++)|u.charCodeAt(q++)<<8|u.charCodeAt(q++)<<16|u.charCodeAt(q++)<<24;else for(te=0;16>te;++te)U[te]=u[q++]|u[q++]<<8|u[q++]<<16|u[q++]<<24;u=R.g[0],q=R.g[1],te=R.g[2];var se=R.g[3],X=u+(se^q&(te^se))+U[0]+3614090360&4294967295;u=q+(X<<7&4294967295|X>>>25),X=se+(te^u&(q^te))+U[1]+3905402710&4294967295,se=u+(X<<12&4294967295|X>>>20),X=te+(q^se&(u^q))+U[2]+606105819&4294967295,te=se+(X<<17&4294967295|X>>>15),X=q+(u^te&(se^u))+U[3]+3250441966&4294967295,q=te+(X<<22&4294967295|X>>>10),X=u+(se^q&(te^se))+U[4]+4118548399&4294967295,u=q+(X<<7&4294967295|X>>>25),X=se+(te^u&(q^te))+U[5]+1200080426&4294967295,se=u+(X<<12&4294967295|X>>>20),X=te+(q^se&(u^q))+U[6]+2821735955&4294967295,te=se+(X<<17&4294967295|X>>>15),X=q+(u^te&(se^u))+U[7]+4249261313&4294967295,q=te+(X<<22&4294967295|X>>>10),X=u+(se^q&(te^se))+U[8]+1770035416&4294967295,u=q+(X<<7&4294967295|X>>>25),X=se+(te^u&(q^te))+U[9]+2336552879&4294967295,se=u+(X<<12&4294967295|X>>>20),X=te+(q^se&(u^q))+U[10]+4294925233&4294967295,te=se+(X<<17&4294967295|X>>>15),X=q+(u^te&(se^u))+U[11]+2304563134&4294967295,q=te+(X<<22&4294967295|X>>>10),X=u+(se^q&(te^se))+U[12]+1804603682&4294967295,u=q+(X<<7&4294967295|X>>>25),X=se+(te^u&(q^te))+U[13]+4254626195&4294967295,se=u+(X<<12&4294967295|X>>>20),X=te+(q^se&(u^q))+U[14]+2792965006&4294967295,te=se+(X<<17&4294967295|X>>>15),X=q+(u^te&(se^u))+U[15]+1236535329&4294967295,q=te+(X<<22&4294967295|X>>>10),X=u+(te^se&(q^te))+U[1]+4129170786&4294967295,u=q+(X<<5&4294967295|X>>>27),X=se+(q^te&(u^q))+U[6]+3225465664&4294967295,se=u+(X<<9&4294967295|X>>>23),X=te+(u^q&(se^u))+U[11]+643717713&4294967295,te=se+(X<<14&4294967295|X>>>18),X=q+(se^u&(te^se))+U[0]+3921069994&4294967295,q=te+(X<<20&4294967295|X>>>12),X=u+(te^se&(q^te))+U[5]+3593408605&4294967295,u=q+(X<<5&4294967295|X>>>27),X=se+(q^te&(u^q))+U[10]+38016083&4294967295,se=u+(X<<9&4294967295|X>>>23),X=te+(u^q&(se^u))+U[15]+3634488961&4294967295,te=se+(X<<14&4294967295|X>>>18),X=q+(se^u&(te^se))+U[4]+3889429448&4294967295,q=te+(X<<20&4294967295|X>>>12),X=u+(te^se&(q^te))+U[9]+568446438&4294967295,u=q+(X<<5&4294967295|X>>>27),X=se+(q^te&(u^q))+U[14]+3275163606&4294967295,se=u+(X<<9&4294967295|X>>>23),X=te+(u^q&(se^u))+U[3]+4107603335&4294967295,te=se+(X<<14&4294967295|X>>>18),X=q+(se^u&(te^se))+U[8]+1163531501&4294967295,q=te+(X<<20&4294967295|X>>>12),X=u+(te^se&(q^te))+U[13]+2850285829&4294967295,u=q+(X<<5&4294967295|X>>>27),X=se+(q^te&(u^q))+U[2]+4243563512&4294967295,se=u+(X<<9&4294967295|X>>>23),X=te+(u^q&(se^u))+U[7]+1735328473&4294967295,te=se+(X<<14&4294967295|X>>>18),X=q+(se^u&(te^se))+U[12]+2368359562&4294967295,q=te+(X<<20&4294967295|X>>>12),X=u+(q^te^se)+U[5]+4294588738&4294967295,u=q+(X<<4&4294967295|X>>>28),X=se+(u^q^te)+U[8]+2272392833&4294967295,se=u+(X<<11&4294967295|X>>>21),X=te+(se^u^q)+U[11]+1839030562&4294967295,te=se+(X<<16&4294967295|X>>>16),X=q+(te^se^u)+U[14]+4259657740&4294967295,q=te+(X<<23&4294967295|X>>>9),X=u+(q^te^se)+U[1]+2763975236&4294967295,u=q+(X<<4&4294967295|X>>>28),X=se+(u^q^te)+U[4]+1272893353&4294967295,se=u+(X<<11&4294967295|X>>>21),X=te+(se^u^q)+U[7]+4139469664&4294967295,te=se+(X<<16&4294967295|X>>>16),X=q+(te^se^u)+U[10]+3200236656&4294967295,q=te+(X<<23&4294967295|X>>>9),X=u+(q^te^se)+U[13]+681279174&4294967295,u=q+(X<<4&4294967295|X>>>28),X=se+(u^q^te)+U[0]+3936430074&4294967295,se=u+(X<<11&4294967295|X>>>21),X=te+(se^u^q)+U[3]+3572445317&4294967295,te=se+(X<<16&4294967295|X>>>16),X=q+(te^se^u)+U[6]+76029189&4294967295,q=te+(X<<23&4294967295|X>>>9),X=u+(q^te^se)+U[9]+3654602809&4294967295,u=q+(X<<4&4294967295|X>>>28),X=se+(u^q^te)+U[12]+3873151461&4294967295,se=u+(X<<11&4294967295|X>>>21),X=te+(se^u^q)+U[15]+530742520&4294967295,te=se+(X<<16&4294967295|X>>>16),X=q+(te^se^u)+U[2]+3299628645&4294967295,q=te+(X<<23&4294967295|X>>>9),X=u+(te^(q|~se))+U[0]+4096336452&4294967295,u=q+(X<<6&4294967295|X>>>26),X=se+(q^(u|~te))+U[7]+1126891415&4294967295,se=u+(X<<10&4294967295|X>>>22),X=te+(u^(se|~q))+U[14]+2878612391&4294967295,te=se+(X<<15&4294967295|X>>>17),X=q+(se^(te|~u))+U[5]+4237533241&4294967295,q=te+(X<<21&4294967295|X>>>11),X=u+(te^(q|~se))+U[12]+1700485571&4294967295,u=q+(X<<6&4294967295|X>>>26),X=se+(q^(u|~te))+U[3]+2399980690&4294967295,se=u+(X<<10&4294967295|X>>>22),X=te+(u^(se|~q))+U[10]+4293915773&4294967295,te=se+(X<<15&4294967295|X>>>17),X=q+(se^(te|~u))+U[1]+2240044497&4294967295,q=te+(X<<21&4294967295|X>>>11),X=u+(te^(q|~se))+U[8]+1873313359&4294967295,u=q+(X<<6&4294967295|X>>>26),X=se+(q^(u|~te))+U[15]+4264355552&4294967295,se=u+(X<<10&4294967295|X>>>22),X=te+(u^(se|~q))+U[6]+2734768916&4294967295,te=se+(X<<15&4294967295|X>>>17),X=q+(se^(te|~u))+U[13]+1309151649&4294967295,q=te+(X<<21&4294967295|X>>>11),X=u+(te^(q|~se))+U[4]+4149444226&4294967295,u=q+(X<<6&4294967295|X>>>26),X=se+(q^(u|~te))+U[11]+3174756917&4294967295,se=u+(X<<10&4294967295|X>>>22),X=te+(u^(se|~q))+U[2]+718787259&4294967295,te=se+(X<<15&4294967295|X>>>17),X=q+(se^(te|~u))+U[9]+3951481745&4294967295,R.g[0]=R.g[0]+u&4294967295,R.g[1]=R.g[1]+(te+(X<<21&4294967295|X>>>11))&4294967295,R.g[2]=R.g[2]+te&4294967295,R.g[3]=R.g[3]+se&4294967295}a.prototype.u=function(R,u){u===void 0&&(u=R.length);for(var q=u-this.blockSize,U=this.B,te=this.h,se=0;se<u;){if(te==0)for(;se<=q;)i(this,R,se),se+=this.blockSize;if(typeof R=="string"){for(;se<u;)if(U[te++]=R.charCodeAt(se++),te==this.blockSize){i(this,U),te=0;break}}else for(;se<u;)if(U[te++]=R[se++],te==this.blockSize){i(this,U),te=0;break}}this.h=te,this.o+=u},a.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var u=1;u<R.length-8;++u)R[u]=0;var q=8*this.o;for(u=R.length-8;u<R.length;++u)R[u]=q&255,q/=256;for(this.u(R),R=Array(16),u=q=0;4>u;++u)for(var U=0;32>U;U+=8)R[q++]=this.g[u]>>>U&255;return R};function l(R,u){var q=c;return Object.prototype.hasOwnProperty.call(q,R)?q[R]:q[R]=u(R)}function o(R,u){this.h=u;for(var q=[],U=!0,te=R.length-1;0<=te;te--){var se=R[te]|0;U&&se==u||(q[te]=se,U=!1)}this.g=q}var c={};function d(R){return-128<=R&&128>R?l(R,function(u){return new o([u|0],0>u?-1:0)}):new o([R|0],0>R?-1:0)}function h(R){if(isNaN(R)||!isFinite(R))return N;if(0>R)return _(h(-R));for(var u=[],q=1,U=0;R>=q;U++)u[U]=R/q|0,q*=4294967296;return new o(u,0)}function g(R,u){if(R.length==0)throw Error("number format error: empty string");if(u=u||10,2>u||36<u)throw Error("radix out of range: "+u);if(R.charAt(0)=="-")return _(g(R.substring(1),u));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var q=h(Math.pow(u,8)),U=N,te=0;te<R.length;te+=8){var se=Math.min(8,R.length-te),X=parseInt(R.substring(te,te+se),u);8>se?(se=h(Math.pow(u,se)),U=U.j(se).add(h(X))):(U=U.j(q),U=U.add(h(X)))}return U}var N=d(0),k=d(1),E=d(16777216);s=o.prototype,s.m=function(){if(O(this))return-_(this).m();for(var R=0,u=1,q=0;q<this.g.length;q++){var U=this.i(q);R+=(0<=U?U:4294967296+U)*u,u*=4294967296}return R},s.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(y(this))return"0";if(O(this))return"-"+_(this).toString(R);for(var u=h(Math.pow(R,6)),q=this,U="";;){var te=K(q,u).g;q=A(q,te.j(u));var se=((0<q.g.length?q.g[0]:q.h)>>>0).toString(R);if(q=te,y(q))return se+U;for(;6>se.length;)se="0"+se;U=se+U}},s.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function y(R){if(R.h!=0)return!1;for(var u=0;u<R.g.length;u++)if(R.g[u]!=0)return!1;return!0}function O(R){return R.h==-1}s.l=function(R){return R=A(this,R),O(R)?-1:y(R)?0:1};function _(R){for(var u=R.g.length,q=[],U=0;U<u;U++)q[U]=~R.g[U];return new o(q,~R.h).add(k)}s.abs=function(){return O(this)?_(this):this},s.add=function(R){for(var u=Math.max(this.g.length,R.g.length),q=[],U=0,te=0;te<=u;te++){var se=U+(this.i(te)&65535)+(R.i(te)&65535),X=(se>>>16)+(this.i(te)>>>16)+(R.i(te)>>>16);U=X>>>16,se&=65535,X&=65535,q[te]=X<<16|se}return new o(q,q[q.length-1]&-2147483648?-1:0)};function A(R,u){return R.add(_(u))}s.j=function(R){if(y(this)||y(R))return N;if(O(this))return O(R)?_(this).j(_(R)):_(_(this).j(R));if(O(R))return _(this.j(_(R)));if(0>this.l(E)&&0>R.l(E))return h(this.m()*R.m());for(var u=this.g.length+R.g.length,q=[],U=0;U<2*u;U++)q[U]=0;for(U=0;U<this.g.length;U++)for(var te=0;te<R.g.length;te++){var se=this.i(U)>>>16,X=this.i(U)&65535,$=R.i(te)>>>16,pe=R.i(te)&65535;q[2*U+2*te]+=X*pe,z(q,2*U+2*te),q[2*U+2*te+1]+=se*pe,z(q,2*U+2*te+1),q[2*U+2*te+1]+=X*$,z(q,2*U+2*te+1),q[2*U+2*te+2]+=se*$,z(q,2*U+2*te+2)}for(U=0;U<u;U++)q[U]=q[2*U+1]<<16|q[2*U];for(U=u;U<2*u;U++)q[U]=0;return new o(q,0)};function z(R,u){for(;(R[u]&65535)!=R[u];)R[u+1]+=R[u]>>>16,R[u]&=65535,u++}function L(R,u){this.g=R,this.h=u}function K(R,u){if(y(u))throw Error("division by zero");if(y(R))return new L(N,N);if(O(R))return u=K(_(R),u),new L(_(u.g),_(u.h));if(O(u))return u=K(R,_(u)),new L(_(u.g),u.h);if(30<R.g.length){if(O(R)||O(u))throw Error("slowDivide_ only works with positive integers.");for(var q=k,U=u;0>=U.l(R);)q=H(q),U=H(U);var te=G(q,1),se=G(U,1);for(U=G(U,2),q=G(q,2);!y(U);){var X=se.add(U);0>=X.l(R)&&(te=te.add(q),se=X),U=G(U,1),q=G(q,1)}return u=A(R,te.j(u)),new L(te,u)}for(te=N;0<=R.l(u);){for(q=Math.max(1,Math.floor(R.m()/u.m())),U=Math.ceil(Math.log(q)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),se=h(q),X=se.j(u);O(X)||0<X.l(R);)q-=U,se=h(q),X=se.j(u);y(se)&&(se=k),te=te.add(se),R=A(R,X)}return new L(te,R)}s.A=function(R){return K(this,R).h},s.and=function(R){for(var u=Math.max(this.g.length,R.g.length),q=[],U=0;U<u;U++)q[U]=this.i(U)&R.i(U);return new o(q,this.h&R.h)},s.or=function(R){for(var u=Math.max(this.g.length,R.g.length),q=[],U=0;U<u;U++)q[U]=this.i(U)|R.i(U);return new o(q,this.h|R.h)},s.xor=function(R){for(var u=Math.max(this.g.length,R.g.length),q=[],U=0;U<u;U++)q[U]=this.i(U)^R.i(U);return new o(q,this.h^R.h)};function H(R){for(var u=R.g.length+1,q=[],U=0;U<u;U++)q[U]=R.i(U)<<1|R.i(U-1)>>>31;return new o(q,R.h)}function G(R,u){var q=u>>5;u%=32;for(var U=R.g.length-q,te=[],se=0;se<U;se++)te[se]=0<u?R.i(se+q)>>>u|R.i(se+q+1)<<32-u:R.i(se+q);return new o(te,R.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,M4=a,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=g,Vn=o}).apply(typeof Qv<"u"?Qv:typeof self<"u"?self:typeof window<"u"?window:{});var au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var L4,zl,O4,Tu,o0,V4,z4,B4;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,C,M){return f==Array.prototype||f==Object.prototype||(f[C]=M.value),f};function r(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof au=="object"&&au];for(var C=0;C<f.length;++C){var M=f[C];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var a=r(this);function i(f,C){if(C)e:{var M=a;f=f.split(".");for(var Q=0;Q<f.length-1;Q++){var me=f[Q];if(!(me in M))break e;M=M[me]}f=f[f.length-1],Q=M[f],C=C(Q),C!=Q&&C!=null&&t(M,f,{configurable:!0,writable:!0,value:C})}}function l(f,C){f instanceof String&&(f+="");var M=0,Q=!1,me={next:function(){if(!Q&&M<f.length){var Ne=M++;return{value:C(Ne,f[Ne]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return me[Symbol.iterator]=function(){return me},me}i("Array.prototype.values",function(f){return f||function(){return l(this,function(C,M){return M})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function d(f){var C=typeof f;return C=C!="object"?C:f?Array.isArray(f)?"array":C:"null",C=="array"||C=="object"&&typeof f.length=="number"}function h(f){var C=typeof f;return C=="object"&&f!=null||C=="function"}function g(f,C,M){return f.call.apply(f.bind,arguments)}function N(f,C,M){if(!f)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var me=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(me,Q),f.apply(C,me)}}return function(){return f.apply(C,arguments)}}function k(f,C,M){return k=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:N,k.apply(null,arguments)}function E(f,C){var M=Array.prototype.slice.call(arguments,1);return function(){var Q=M.slice();return Q.push.apply(Q,arguments),f.apply(this,Q)}}function y(f,C){function M(){}M.prototype=C.prototype,f.aa=C.prototype,f.prototype=new M,f.prototype.constructor=f,f.Qb=function(Q,me,Ne){for(var qe=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)qe[Gt-2]=arguments[Gt];return C.prototype[me].apply(Q,qe)}}function O(f){const C=f.length;if(0<C){const M=Array(C);for(let Q=0;Q<C;Q++)M[Q]=f[Q];return M}return[]}function _(f,C){for(let M=1;M<arguments.length;M++){const Q=arguments[M];if(d(Q)){const me=f.length||0,Ne=Q.length||0;f.length=me+Ne;for(let qe=0;qe<Ne;qe++)f[me+qe]=Q[qe]}else f.push(Q)}}class A{constructor(C,M){this.i=C,this.j=M,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function z(f){return/^[\s\xa0]*$/.test(f)}function L(){var f=c.navigator;return f&&(f=f.userAgent)?f:""}function K(f){return K[" "](f),f}K[" "]=function(){};var H=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function G(f,C,M){for(const Q in f)C.call(M,f[Q],Q,f)}function R(f,C){for(const M in f)C.call(void 0,f[M],M,f)}function u(f){const C={};for(const M in f)C[M]=f[M];return C}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(f,C){let M,Q;for(let me=1;me<arguments.length;me++){Q=arguments[me];for(M in Q)f[M]=Q[M];for(let Ne=0;Ne<q.length;Ne++)M=q[Ne],Object.prototype.hasOwnProperty.call(Q,M)&&(f[M]=Q[M])}}function te(f){var C=1;f=f.split(":");const M=[];for(;0<C&&f.length;)M.push(f.shift()),C--;return f.length&&M.push(f.join(":")),M}function se(f){c.setTimeout(()=>{throw f},0)}function X(){var f=be;let C=null;return f.g&&(C=f.g,f.g=f.g.next,f.g||(f.h=null),C.next=null),C}class ${constructor(){this.h=this.g=null}add(C,M){const Q=pe.get();Q.set(C,M),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var pe=new A(()=>new Le,f=>f.reset());class Le{constructor(){this.next=this.g=this.h=null}set(C,M){this.h=C,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let De,he=!1,be=new $,fe=()=>{const f=c.Promise.resolve(void 0);De=()=>{f.then(ze)}};var ze=()=>{for(var f;f=X();){try{f.h.call(f.g)}catch(M){se(M)}var C=pe;C.j(f),100>C.h&&(C.h++,f.next=C.g,C.g=f)}he=!1};function Me(){this.s=this.s,this.C=this.C}Me.prototype.s=!1,Me.prototype.ma=function(){this.s||(this.s=!0,this.N())},Me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(f,C){this.type=f,this.g=this.target=C,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var He=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,C=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const M=()=>{};c.addEventListener("test",M,C),c.removeEventListener("test",M,C)}catch{}return f}();function Ge(f,C){if(Pe.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var M=this.type=f.type,Q=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=C,C=f.relatedTarget){if(H){e:{try{K(C.nodeName);var me=!0;break e}catch{}me=!1}me||(C=null)}}else M=="mouseover"?C=f.fromElement:M=="mouseout"&&(C=f.toElement);this.relatedTarget=C,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:n[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Ge.aa.h.call(this)}}y(Ge,Pe);var n={2:"touch",3:"pen",4:"mouse"};Ge.prototype.h=function(){Ge.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),p=0;function T(f,C,M,Q,me){this.listener=f,this.proxy=null,this.src=C,this.type=M,this.capture=!!Q,this.ha=me,this.key=++p,this.da=this.fa=!1}function F(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function W(f){this.src=f,this.g={},this.h=0}W.prototype.add=function(f,C,M,Q,me){var Ne=f.toString();f=this.g[Ne],f||(f=this.g[Ne]=[],this.h++);var qe=ie(f,C,Q,me);return-1<qe?(C=f[qe],M||(C.fa=!1)):(C=new T(C,this.src,Ne,!!Q,me),C.fa=M,f.push(C)),C};function ae(f,C){var M=C.type;if(M in f.g){var Q=f.g[M],me=Array.prototype.indexOf.call(Q,C,void 0),Ne;(Ne=0<=me)&&Array.prototype.splice.call(Q,me,1),Ne&&(F(C),f.g[M].length==0&&(delete f.g[M],f.h--))}}function ie(f,C,M,Q){for(var me=0;me<f.length;++me){var Ne=f[me];if(!Ne.da&&Ne.listener==C&&Ne.capture==!!M&&Ne.ha==Q)return me}return-1}var w="closure_lm_"+(1e6*Math.random()|0),D={};function P(f,C,M,Q,me){if(Q&&Q.once)return S(f,C,M,Q,me);if(Array.isArray(C)){for(var Ne=0;Ne<C.length;Ne++)P(f,C[Ne],M,Q,me);return null}return M=ge(M),f&&f[j]?f.K(C,M,h(Q)?!!Q.capture:!!Q,me):x(f,C,M,!1,Q,me)}function x(f,C,M,Q,me,Ne){if(!C)throw Error("Invalid event type");var qe=h(me)?!!me.capture:!!me,Gt=ne(f);if(Gt||(f[w]=Gt=new W(f)),M=Gt.add(C,M,Q,qe,Ne),M.proxy)return M;if(Q=m(),M.proxy=Q,Q.src=f,Q.listener=M,f.addEventListener)He||(me=qe),me===void 0&&(me=!1),f.addEventListener(C.toString(),Q,me);else if(f.attachEvent)f.attachEvent(ee(C.toString()),Q);else if(f.addListener&&f.removeListener)f.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return M}function m(){function f(M){return C.call(f.src,f.listener,M)}const C=ce;return f}function S(f,C,M,Q,me){if(Array.isArray(C)){for(var Ne=0;Ne<C.length;Ne++)S(f,C[Ne],M,Q,me);return null}return M=ge(M),f&&f[j]?f.L(C,M,h(Q)?!!Q.capture:!!Q,me):x(f,C,M,!0,Q,me)}function Z(f,C,M,Q,me){if(Array.isArray(C))for(var Ne=0;Ne<C.length;Ne++)Z(f,C[Ne],M,Q,me);else Q=h(Q)?!!Q.capture:!!Q,M=ge(M),f&&f[j]?(f=f.i,C=String(C).toString(),C in f.g&&(Ne=f.g[C],M=ie(Ne,M,Q,me),-1<M&&(F(Ne[M]),Array.prototype.splice.call(Ne,M,1),Ne.length==0&&(delete f.g[C],f.h--)))):f&&(f=ne(f))&&(C=f.g[C.toString()],f=-1,C&&(f=ie(C,M,Q,me)),(M=-1<f?C[f]:null)&&V(M))}function V(f){if(typeof f!="number"&&f&&!f.da){var C=f.src;if(C&&C[j])ae(C.i,f);else{var M=f.type,Q=f.proxy;C.removeEventListener?C.removeEventListener(M,Q,f.capture):C.detachEvent?C.detachEvent(ee(M),Q):C.addListener&&C.removeListener&&C.removeListener(Q),(M=ne(C))?(ae(M,f),M.h==0&&(M.src=null,C[w]=null)):F(f)}}}function ee(f){return f in D?D[f]:D[f]="on"+f}function ce(f,C){if(f.da)f=!0;else{C=new Ge(C,this);var M=f.listener,Q=f.ha||f.src;f.fa&&V(f),f=M.call(Q,C)}return f}function ne(f){return f=f[w],f instanceof W?f:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function ge(f){return typeof f=="function"?f:(f[J]||(f[J]=function(C){return f.handleEvent(C)}),f[J])}function de(){Me.call(this),this.i=new W(this),this.M=this,this.F=null}y(de,Me),de.prototype[j]=!0,de.prototype.removeEventListener=function(f,C,M,Q){Z(this,f,C,M,Q)};function ke(f,C){var M,Q=f.F;if(Q)for(M=[];Q;Q=Q.F)M.push(Q);if(f=f.M,Q=C.type||C,typeof C=="string")C=new Pe(C,f);else if(C instanceof Pe)C.target=C.target||f;else{var me=C;C=new Pe(Q,f),U(C,me)}if(me=!0,M)for(var Ne=M.length-1;0<=Ne;Ne--){var qe=C.g=M[Ne];me=Se(qe,Q,!0,C)&&me}if(qe=C.g=f,me=Se(qe,Q,!0,C)&&me,me=Se(qe,Q,!1,C)&&me,M)for(Ne=0;Ne<M.length;Ne++)qe=C.g=M[Ne],me=Se(qe,Q,!1,C)&&me}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var f=this.i,C;for(C in f.g){for(var M=f.g[C],Q=0;Q<M.length;Q++)F(M[Q]);delete f.g[C],f.h--}}this.F=null},de.prototype.K=function(f,C,M,Q){return this.i.add(String(f),C,!1,M,Q)},de.prototype.L=function(f,C,M,Q){return this.i.add(String(f),C,!0,M,Q)};function Se(f,C,M,Q){if(C=f.i.g[String(C)],!C)return!0;C=C.concat();for(var me=!0,Ne=0;Ne<C.length;++Ne){var qe=C[Ne];if(qe&&!qe.da&&qe.capture==M){var Gt=qe.listener,Vs=qe.ha||qe.src;qe.fa&&ae(f.i,qe),me=Gt.call(Vs,Q)!==!1&&me}}return me&&!Q.defaultPrevented}function oe(f,C,M){if(typeof f=="function")M&&(f=k(f,M));else if(f&&typeof f.handleEvent=="function")f=k(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:c.setTimeout(f,C||0)}function ue(f){f.g=oe(()=>{f.g=null,f.i&&(f.i=!1,ue(f))},f.l);const C=f.h;f.h=null,f.m.apply(null,C)}class Ie extends Me{constructor(C,M){super(),this.m=C,this.l=M,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:ue(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ve(f){Me.call(this),this.h=f,this.g={}}y(ve,Me);var Re=[];function Oe(f){G(f.g,function(C,M){this.g.hasOwnProperty(M)&&V(C)},f),f.g={}}ve.prototype.N=function(){ve.aa.N.call(this),Oe(this)},ve.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jt=c.JSON.stringify,Ls=c.JSON.parse,wt=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function Nt(){}Nt.prototype.h=null;function rs(f){return f.h||(f.h=f.i())}function as(){}var Es={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ts(){Pe.call(this,"d")}y(Ts,Pe);function nr(){Pe.call(this,"c")}y(nr,Pe);var ys={},Or=null;function Is(){return Or=Or||new de}ys.La="serverreachability";function Vr(f){Pe.call(this,ys.La,f)}y(Vr,Pe);function ir(f){const C=Is();ke(C,new Vr(C))}ys.STAT_EVENT="statevent";function pr(f,C){Pe.call(this,ys.STAT_EVENT,f),this.stat=C}y(pr,Pe);function Zt(f){const C=Is();ke(C,new pr(C,f))}ys.Ma="timingevent";function Lt(f,C){Pe.call(this,ys.Ma,f),this.size=C}y(Lt,Pe);function re(f,C){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},C)}function Ce(){this.g=!0}Ce.prototype.xa=function(){this.g=!1};function Be(f,C,M,Q,me,Ne){f.info(function(){if(f.g)if(Ne)for(var qe="",Gt=Ne.split("&"),Vs=0;Vs<Gt.length;Vs++){var Ft=Gt[Vs].split("=");if(1<Ft.length){var Qs=Ft[0];Ft=Ft[1];var Ks=Qs.split("_");qe=2<=Ks.length&&Ks[1]=="type"?qe+(Qs+"="+Ft+"&"):qe+(Qs+"=redacted&")}}else qe=null;else qe=Ne;return"XMLHTTP REQ ("+Q+") [attempt "+me+"]: "+C+`
`+M+`
`+qe})}function Je(f,C,M,Q,me,Ne,qe){f.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+me+"]: "+C+`
`+M+`
`+Ne+" "+qe})}function ht(f,C,M,Q){f.info(function(){return"XMLHTTP TEXT ("+C+"): "+is(f,M)+(Q?" "+Q:"")})}function Pt(f,C){f.info(function(){return"TIMEOUT: "+C})}Ce.prototype.info=function(){};function is(f,C){if(!f.g)return C;if(!C)return null;try{var M=JSON.parse(C);if(M){for(f=0;f<M.length;f++)if(Array.isArray(M[f])){var Q=M[f];if(!(2>Q.length)){var me=Q[1];if(Array.isArray(me)&&!(1>me.length)){var Ne=me[0];if(Ne!="noop"&&Ne!="stop"&&Ne!="close")for(var qe=1;qe<me.length;qe++)me[qe]=""}}}}return Jt(M)}catch{return C}}var Ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ma={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Os;function ha(){}y(ha,Nt),ha.prototype.g=function(){return new XMLHttpRequest},ha.prototype.i=function(){return{}},Os=new ha;function or(f,C,M,Q){this.j=f,this.i=C,this.l=M,this.R=Q||1,this.U=new ve(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ai}function ai(){this.i=null,this.g="",this.h=!1}var qi={},pa={};function Hi(f,C,M){f.L=1,f.v=_d(La(C)),f.m=M,f.P=!0,Id(f,null)}function Id(f,C){f.F=Date.now(),dn(f),f.A=La(f.v);var M=f.A,Q=f.R;Array.isArray(Q)||(Q=[String(Q)]),Gy(M.i,"t",Q),f.C=0,M=f.j.J,f.h=new ai,f.g=ub(f.j,M?C:null,!f.m),0<f.O&&(f.M=new Ie(k(f.Y,f,f.g),f.O)),C=f.U,M=f.g,Q=f.ca;var me="readystatechange";Array.isArray(me)||(me&&(Re[0]=me.toString()),me=Re);for(var Ne=0;Ne<me.length;Ne++){var qe=P(M,me[Ne],Q||C.handleEvent,!1,C.h||C);if(!qe)break;C.g[qe.key]=qe}C=f.H?u(f.H):{},f.m?(f.u||(f.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,C)):(f.u="GET",f.g.ea(f.A,f.u,null,C)),ir(),Be(f.i,f.u,f.A,f.l,f.R,f.m)}or.prototype.ca=function(f){f=f.target;const C=this.M;C&&Oa(f)==3?C.j():this.Y(f)},or.prototype.Y=function(f){try{if(f==this.g)e:{const Ks=Oa(this.g);var C=this.g.Ba();const Zi=this.g.Z();if(!(3>Ks)&&(Ks!=3||this.g&&(this.h.h||this.g.oa()||eb(this.g)))){this.J||Ks!=4||C==7||(C==8||0>=Zi?ir(3):ir(2)),xl(this);var M=this.g.Z();this.X=M;t:if(Pd(this)){var Q=eb(this.g);f="";var me=Q.length,Ne=Oa(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zr(this),ni(this);var qe="";break t}this.h.i=new c.TextDecoder}for(C=0;C<me;C++)this.h.h=!0,f+=this.h.i.decode(Q[C],{stream:!(Ne&&C==me-1)});Q.length=0,this.h.g+=f,this.C=0,qe=this.h.g}else qe=this.g.oa();if(this.o=M==200,Je(this.i,this.u,this.A,this.l,this.R,Ks,M),this.o){if(this.T&&!this.K){t:{if(this.g){var Gt,Vs=this.g;if((Gt=Vs.g?Vs.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Gt)){var Ft=Gt;break t}}Ft=null}if(M=Ft)ht(this.i,this.l,M,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gi(this,M);else{this.o=!1,this.s=3,Zt(12),zr(this),ni(this);break e}}if(this.P){M=!0;let Jr;for(;!this.J&&this.C<qe.length;)if(Jr=Km(this,qe),Jr==pa){Ks==4&&(this.s=4,Zt(14),M=!1),ht(this.i,this.l,null,"[Incomplete Response]");break}else if(Jr==qi){this.s=4,Zt(15),ht(this.i,this.l,qe,"[Invalid Chunk]"),M=!1;break}else ht(this.i,this.l,Jr,null),Gi(this,Jr);if(Pd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ks!=4||qe.length!=0||this.h.h||(this.s=1,Zt(16),M=!1),this.o=this.o&&M,!M)ht(this.i,this.l,qe,"[Invalid Chunked Response]"),zr(this),ni(this);else if(0<qe.length&&!this.W){this.W=!0;var Qs=this.j;Qs.g==this&&Qs.ba&&!Qs.M&&(Qs.j.info("Great, no buffering proxy detected. Bytes received: "+qe.length),Zm(Qs),Qs.M=!0,Zt(11))}}else ht(this.i,this.l,qe,null),Gi(this,qe);Ks==4&&zr(this),this.o&&!this.J&&(Ks==4?ob(this.j,this):(this.o=!1,dn(this)))}else jP(this.g),M==400&&0<qe.indexOf("Unknown SID")?(this.s=3,Zt(12)):(this.s=0,Zt(13)),zr(this),ni(this)}}}catch{}finally{}};function Pd(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Km(f,C){var M=f.C,Q=C.indexOf(`
`,M);return Q==-1?pa:(M=Number(C.substring(M,Q)),isNaN(M)?qi:(Q+=1,Q+M>C.length?pa:(C=C.slice(Q,Q+M),f.C=Q+M,C)))}or.prototype.cancel=function(){this.J=!0,zr(this)};function dn(f){f.S=Date.now()+f.I,Sd(f,f.I)}function Sd(f,C){if(f.B!=null)throw Error("WatchDog timer not null");f.B=re(k(f.ba,f),C)}function xl(f){f.B&&(c.clearTimeout(f.B),f.B=null)}or.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Pt(this.i,this.A),this.L!=2&&(ir(),Zt(17)),zr(this),this.s=2,ni(this)):Sd(this,this.S-f)};function ni(f){f.j.G==0||f.J||ob(f.j,f)}function zr(f){xl(f);var C=f.M;C&&typeof C.ma=="function"&&C.ma(),f.M=null,Oe(f.U),f.g&&(C=f.g,f.g=null,C.abort(),C.ma())}function Gi(f,C){try{var M=f.j;if(M.G!=0&&(M.g==f||Ki(M.h,f))){if(!f.K&&Ki(M.h,f)&&M.G==3){try{var Q=M.Da.g.parse(C)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var me=Q;if(me[0]==0){e:if(!M.u){if(M.g)if(M.g.F+3e3<f.F)Od(M),Md(M);else break e;Jm(M),Zt(18)}}else M.za=me[1],0<M.za-M.T&&37500>me[2]&&M.F&&M.v==0&&!M.C&&(M.C=re(k(M.Za,M),6e3));if(1>=hl(M.h)&&M.ca){try{M.ca()}catch{}M.ca=void 0}}else li(M,11)}else if((f.K||M.g==f)&&Od(M),!z(C))for(me=M.Da.g.parse(C),C=0;C<me.length;C++){let Ft=me[C];if(M.T=Ft[0],Ft=Ft[1],M.G==2)if(Ft[0]=="c"){M.K=Ft[1],M.ia=Ft[2];const Qs=Ft[3];Qs!=null&&(M.la=Qs,M.j.info("VER="+M.la));const Ks=Ft[4];Ks!=null&&(M.Aa=Ks,M.j.info("SVER="+M.Aa));const Zi=Ft[5];Zi!=null&&typeof Zi=="number"&&0<Zi&&(Q=1.5*Zi,M.L=Q,M.j.info("backChannelRequestTimeoutMs_="+Q)),Q=M;const Jr=f.g;if(Jr){const zd=Jr.g?Jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zd){var Ne=Q.h;Ne.g||zd.indexOf("spdy")==-1&&zd.indexOf("quic")==-1&&zd.indexOf("h2")==-1||(Ne.j=Ne.l,Ne.g=new Set,Ne.h&&(Yi(Ne,Ne.h),Ne.h=null))}if(Q.D){const eh=Jr.g?Jr.g.getResponseHeader("X-HTTP-Session-Id"):null;eh&&(Q.ya=eh,es(Q.I,Q.D,eh))}}M.G=3,M.l&&M.l.ua(),M.ba&&(M.R=Date.now()-f.F,M.j.info("Handshake RTT: "+M.R+"ms")),Q=M;var qe=f;if(Q.qa=db(Q,Q.J?Q.ia:null,Q.W),qe.K){Cd(Q.h,qe);var Gt=qe,Vs=Q.L;Vs&&(Gt.I=Vs),Gt.B&&(xl(Gt),dn(Gt)),Q.g=qe}else nb(Q);0<M.i.length&&Ld(M)}else Ft[0]!="stop"&&Ft[0]!="close"||li(M,7);else M.G==3&&(Ft[0]=="stop"||Ft[0]=="close"?Ft[0]=="stop"?li(M,7):Xm(M):Ft[0]!="noop"&&M.l&&M.l.ta(Ft),M.v=0)}}ir(4)}catch{}}var Qi=class{constructor(f,C){this.g=f,this.map=C}};function ml(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ii(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function hl(f){return f.h?1:f.g?f.g.size:0}function Ki(f,C){return f.h?f.h==C:f.g?f.g.has(C):!1}function Yi(f,C){f.g?f.g.add(C):f.h=C}function Cd(f,C){f.h&&f.h==C?f.h=null:f.g&&f.g.has(C)&&f.g.delete(C)}ml.prototype.cancel=function(){if(this.i=By(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function By(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let C=f.i;for(const M of f.g.values())C=C.concat(M.D);return C}return O(f.i)}function iP(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(d(f)){for(var C=[],M=f.length,Q=0;Q<M;Q++)C.push(f[Q]);return C}C=[],M=0;for(Q in f)C[M++]=f[Q];return C}function oP(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(d(f)||typeof f=="string"){var C=[];f=f.length;for(var M=0;M<f;M++)C.push(M);return C}C=[],M=0;for(const Q in f)C[M++]=Q;return C}}}function Fy(f,C){if(f.forEach&&typeof f.forEach=="function")f.forEach(C,void 0);else if(d(f)||typeof f=="string")Array.prototype.forEach.call(f,C,void 0);else for(var M=oP(f),Q=iP(f),me=Q.length,Ne=0;Ne<me;Ne++)C.call(void 0,Q[Ne],M&&M[Ne],f)}var Uy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lP(f,C){if(f){f=f.split("&");for(var M=0;M<f.length;M++){var Q=f[M].indexOf("="),me=null;if(0<=Q){var Ne=f[M].substring(0,Q);me=f[M].substring(Q+1)}else Ne=f[M];C(Ne,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function oi(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof oi){this.h=f.h,Ed(this,f.j),this.o=f.o,this.g=f.g,Td(this,f.s),this.l=f.l;var C=f.i,M=new gl;M.i=C.i,C.g&&(M.g=new Map(C.g),M.h=C.h),$y(this,M),this.m=f.m}else f&&(C=String(f).match(Uy))?(this.h=!1,Ed(this,C[1]||"",!0),this.o=pl(C[2]||""),this.g=pl(C[3]||"",!0),Td(this,C[4]),this.l=pl(C[5]||"",!0),$y(this,C[6]||"",!0),this.m=pl(C[7]||"")):(this.h=!1,this.i=new gl(null,this.h))}oi.prototype.toString=function(){var f=[],C=this.j;C&&f.push(fl(C,Wy,!0),":");var M=this.g;return(M||C=="file")&&(f.push("//"),(C=this.o)&&f.push(fl(C,Wy,!0),"@"),f.push(encodeURIComponent(String(M)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.s,M!=null&&f.push(":",String(M))),(M=this.l)&&(this.g&&M.charAt(0)!="/"&&f.push("/"),f.push(fl(M,M.charAt(0)=="/"?uP:dP,!0))),(M=this.i.toString())&&f.push("?",M),(M=this.m)&&f.push("#",fl(M,mP)),f.join("")};function La(f){return new oi(f)}function Ed(f,C,M){f.j=M?pl(C,!0):C,f.j&&(f.j=f.j.replace(/:$/,""))}function Td(f,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);f.s=C}else f.s=null}function $y(f,C,M){C instanceof gl?(f.i=C,hP(f.i,f.h)):(M||(C=fl(C,xP)),f.i=new gl(C,f.h))}function es(f,C,M){f.i.set(C,M)}function _d(f){return es(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function pl(f,C){return f?C?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function fl(f,C,M){return typeof f=="string"?(f=encodeURI(f).replace(C,cP),M&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function cP(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Wy=/[#\/\?@]/g,dP=/[#\?:]/g,uP=/[#\?]/g,xP=/[#\?@]/g,mP=/#/g;function gl(f,C){this.h=this.g=null,this.i=f||null,this.j=!!C}function un(f){f.g||(f.g=new Map,f.h=0,f.i&&lP(f.i,function(C,M){f.add(decodeURIComponent(C.replace(/\+/g," ")),M)}))}s=gl.prototype,s.add=function(f,C){un(this),this.i=null,f=Xi(this,f);var M=this.g.get(f);return M||this.g.set(f,M=[]),M.push(C),this.h+=1,this};function qy(f,C){un(f),C=Xi(f,C),f.g.has(C)&&(f.i=null,f.h-=f.g.get(C).length,f.g.delete(C))}function Hy(f,C){return un(f),C=Xi(f,C),f.g.has(C)}s.forEach=function(f,C){un(this),this.g.forEach(function(M,Q){M.forEach(function(me){f.call(C,me,Q,this)},this)},this)},s.na=function(){un(this);const f=Array.from(this.g.values()),C=Array.from(this.g.keys()),M=[];for(let Q=0;Q<C.length;Q++){const me=f[Q];for(let Ne=0;Ne<me.length;Ne++)M.push(C[Q])}return M},s.V=function(f){un(this);let C=[];if(typeof f=="string")Hy(this,f)&&(C=C.concat(this.g.get(Xi(this,f))));else{f=Array.from(this.g.values());for(let M=0;M<f.length;M++)C=C.concat(f[M])}return C},s.set=function(f,C){return un(this),this.i=null,f=Xi(this,f),Hy(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[C]),this.h+=1,this},s.get=function(f,C){return f?(f=this.V(f),0<f.length?String(f[0]):C):C};function Gy(f,C,M){qy(f,C),0<M.length&&(f.i=null,f.g.set(Xi(f,C),O(M)),f.h+=M.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],C=Array.from(this.g.keys());for(var M=0;M<C.length;M++){var Q=C[M];const Ne=encodeURIComponent(String(Q)),qe=this.V(Q);for(Q=0;Q<qe.length;Q++){var me=Ne;qe[Q]!==""&&(me+="="+encodeURIComponent(String(qe[Q]))),f.push(me)}}return this.i=f.join("&")};function Xi(f,C){return C=String(C),f.j&&(C=C.toLowerCase()),C}function hP(f,C){C&&!f.j&&(un(f),f.i=null,f.g.forEach(function(M,Q){var me=Q.toLowerCase();Q!=me&&(qy(this,Q),Gy(this,me,M))},f)),f.j=C}function pP(f,C){const M=new Ce;if(c.Image){const Q=new Image;Q.onload=E(xn,M,"TestLoadImage: loaded",!0,C,Q),Q.onerror=E(xn,M,"TestLoadImage: error",!1,C,Q),Q.onabort=E(xn,M,"TestLoadImage: abort",!1,C,Q),Q.ontimeout=E(xn,M,"TestLoadImage: timeout",!1,C,Q),c.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=f}else C(!1)}function fP(f,C){const M=new Ce,Q=new AbortController,me=setTimeout(()=>{Q.abort(),xn(M,"TestPingServer: timeout",!1,C)},1e4);fetch(f,{signal:Q.signal}).then(Ne=>{clearTimeout(me),Ne.ok?xn(M,"TestPingServer: ok",!0,C):xn(M,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(me),xn(M,"TestPingServer: error",!1,C)})}function xn(f,C,M,Q,me){try{me&&(me.onload=null,me.onerror=null,me.onabort=null,me.ontimeout=null),Q(M)}catch{}}function gP(){this.g=new wt}function yP(f,C,M){const Q=M||"";try{Fy(f,function(me,Ne){let qe=me;h(me)&&(qe=Jt(me)),C.push(Q+Ne+"="+encodeURIComponent(qe))})}catch(me){throw C.push(Q+"type="+encodeURIComponent("_badmap")),me}}function Dd(f){this.l=f.Ub||null,this.j=f.eb||!1}y(Dd,Nt),Dd.prototype.g=function(){return new Ad(this.l,this.j)},Dd.prototype.i=function(f){return function(){return f}}({});function Ad(f,C){de.call(this),this.D=f,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Ad,de),s=Ad.prototype,s.open=function(f,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=C,this.readyState=1,bl(this)},s.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(C.body=f),(this.D||c).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yl(this)),this.readyState=0},s.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,bl(this)),this.g&&(this.readyState=3,bl(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qy(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qy(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}s.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var C=f.value?f.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!f.done}))&&(this.response=this.responseText+=C)}f.done?yl(this):bl(this),this.readyState==3&&Qy(this)}},s.Ra=function(f){this.g&&(this.response=this.responseText=f,yl(this))},s.Qa=function(f){this.g&&(this.response=f,yl(this))},s.ga=function(){this.g&&yl(this)};function yl(f){f.readyState=4,f.l=null,f.j=null,f.v=null,bl(f)}s.setRequestHeader=function(f,C){this.u.append(f,C)},s.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],C=this.h.entries();for(var M=C.next();!M.done;)M=M.value,f.push(M[0]+": "+M[1]),M=C.next();return f.join(`\r
`)};function bl(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ad.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Ky(f){let C="";return G(f,function(M,Q){C+=Q,C+=":",C+=M,C+=`\r
`}),C}function Ym(f,C,M){e:{for(Q in M){var Q=!1;break e}Q=!0}Q||(M=Ky(M),typeof f=="string"?M!=null&&encodeURIComponent(String(M)):es(f,C,M))}function ps(f){de.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(ps,de);var bP=/^https?$/i,vP=["POST","PUT"];s=ps.prototype,s.Ha=function(f){this.J=f},s.ea=function(f,C,M,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);C=C?C.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Os.g(),this.v=this.o?rs(this.o):rs(Os),this.g.onreadystatechange=k(this.Ea,this);try{this.B=!0,this.g.open(C,String(f),!0),this.B=!1}catch(Ne){Yy(this,Ne);return}if(f=M||"",M=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var me in Q)M.set(me,Q[me]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Ne of Q.keys())M.set(Ne,Q.get(Ne));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(M.keys()).find(Ne=>Ne.toLowerCase()=="content-type"),me=c.FormData&&f instanceof c.FormData,!(0<=Array.prototype.indexOf.call(vP,C,void 0))||Q||me||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ne,qe]of M)this.g.setRequestHeader(Ne,qe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zy(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ne){Yy(this,Ne)}};function Yy(f,C){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=C,f.m=5,Xy(f),Rd(f)}function Xy(f){f.A||(f.A=!0,ke(f,"complete"),ke(f,"error"))}s.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,ke(this,"complete"),ke(this,"abort"),Rd(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rd(this,!0)),ps.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Jy(this):this.bb())},s.bb=function(){Jy(this)};function Jy(f){if(f.h&&typeof o<"u"&&(!f.v[1]||Oa(f)!=4||f.Z()!=2)){if(f.u&&Oa(f)==4)oe(f.Ea,0,f);else if(ke(f,"readystatechange"),Oa(f)==4){f.h=!1;try{const qe=f.Z();e:switch(qe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var M;if(!(M=C)){var Q;if(Q=qe===0){var me=String(f.D).match(Uy)[1]||null;!me&&c.self&&c.self.location&&(me=c.self.location.protocol.slice(0,-1)),Q=!bP.test(me?me.toLowerCase():"")}M=Q}if(M)ke(f,"complete"),ke(f,"success");else{f.m=6;try{var Ne=2<Oa(f)?f.g.statusText:""}catch{Ne=""}f.l=Ne+" ["+f.Z()+"]",Xy(f)}}finally{Rd(f)}}}}function Rd(f,C){if(f.g){Zy(f);const M=f.g,Q=f.v[0]?()=>{}:null;f.g=null,f.v=null,C||ke(f,"ready");try{M.onreadystatechange=Q}catch{}}}function Zy(f){f.I&&(c.clearTimeout(f.I),f.I=null)}s.isActive=function(){return!!this.g};function Oa(f){return f.g?f.g.readyState:0}s.Z=function(){try{return 2<Oa(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(f){if(this.g){var C=this.g.responseText;return f&&C.indexOf(f)==0&&(C=C.substring(f.length)),Ls(C)}};function eb(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function jP(f){const C={};f=(f.g&&2<=Oa(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<f.length;Q++){if(z(f[Q]))continue;var M=te(f[Q]);const me=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const Ne=C[me]||[];C[me]=Ne,Ne.push(M)}R(C,function(Q){return Q.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vl(f,C,M){return M&&M.internalChannelParams&&M.internalChannelParams[f]||C}function tb(f){this.Aa=0,this.i=[],this.j=new Ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vl("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vl("baseRetryDelayMs",5e3,f),this.cb=vl("retryDelaySeedMs",1e4,f),this.Wa=vl("forwardChannelMaxRetries",2,f),this.wa=vl("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new ml(f&&f.concurrentRequestLimit),this.Da=new gP,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=tb.prototype,s.la=8,s.G=1,s.connect=function(f,C,M,Q){Zt(0),this.W=f,this.H=C||{},M&&Q!==void 0&&(this.H.OSID=M,this.H.OAID=Q),this.F=this.X,this.I=db(this,null,this.W),Ld(this)};function Xm(f){if(sb(f),f.G==3){var C=f.U++,M=La(f.I);if(es(M,"SID",f.K),es(M,"RID",C),es(M,"TYPE","terminate"),jl(f,M),C=new or(f,f.j,C),C.L=2,C.v=_d(La(M)),M=!1,c.navigator&&c.navigator.sendBeacon)try{M=c.navigator.sendBeacon(C.v.toString(),"")}catch{}!M&&c.Image&&(new Image().src=C.v,M=!0),M||(C.g=ub(C.j,null),C.g.ea(C.v)),C.F=Date.now(),dn(C)}cb(f)}function Md(f){f.g&&(Zm(f),f.g.cancel(),f.g=null)}function sb(f){Md(f),f.u&&(c.clearTimeout(f.u),f.u=null),Od(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&c.clearTimeout(f.s),f.s=null)}function Ld(f){if(!ii(f.h)&&!f.s){f.s=!0;var C=f.Ga;De||fe(),he||(De(),he=!0),be.add(C,f),f.B=0}}function NP(f,C){return hl(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=C.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=re(k(f.Ga,f,C),lb(f,f.B)),f.B++,!0)}s.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const me=new or(this,this.j,f);let Ne=this.o;if(this.S&&(Ne?(Ne=u(Ne),U(Ne,this.S)):Ne=this.S),this.m!==null||this.O||(me.H=Ne,Ne=null),this.P)e:{for(var C=0,M=0;M<this.i.length;M++){t:{var Q=this.i[M];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(C+=Q,4096<C){C=M;break e}if(C===4096||M===this.i.length-1){C=M+1;break e}}C=1e3}else C=1e3;C=ab(this,me,C),M=La(this.I),es(M,"RID",f),es(M,"CVER",22),this.D&&es(M,"X-HTTP-Session-Id",this.D),jl(this,M),Ne&&(this.O?C="headers="+encodeURIComponent(String(Ky(Ne)))+"&"+C:this.m&&Ym(M,this.m,Ne)),Yi(this.h,me),this.Ua&&es(M,"TYPE","init"),this.P?(es(M,"$req",C),es(M,"SID","null"),me.T=!0,Hi(me,M,null)):Hi(me,M,C),this.G=2}}else this.G==3&&(f?rb(this,f):this.i.length==0||ii(this.h)||rb(this))};function rb(f,C){var M;C?M=C.l:M=f.U++;const Q=La(f.I);es(Q,"SID",f.K),es(Q,"RID",M),es(Q,"AID",f.T),jl(f,Q),f.m&&f.o&&Ym(Q,f.m,f.o),M=new or(f,f.j,M,f.B+1),f.m===null&&(M.H=f.o),C&&(f.i=C.D.concat(f.i)),C=ab(f,M,1e3),M.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Yi(f.h,M),Hi(M,Q,C)}function jl(f,C){f.H&&G(f.H,function(M,Q){es(C,Q,M)}),f.l&&Fy({},function(M,Q){es(C,Q,M)})}function ab(f,C,M){M=Math.min(f.i.length,M);var Q=f.l?k(f.l.Na,f.l,f):null;e:{var me=f.i;let Ne=-1;for(;;){const qe=["count="+M];Ne==-1?0<M?(Ne=me[0].g,qe.push("ofs="+Ne)):Ne=0:qe.push("ofs="+Ne);let Gt=!0;for(let Vs=0;Vs<M;Vs++){let Ft=me[Vs].g;const Qs=me[Vs].map;if(Ft-=Ne,0>Ft)Ne=Math.max(0,me[Vs].g-100),Gt=!1;else try{yP(Qs,qe,"req"+Ft+"_")}catch{Q&&Q(Qs)}}if(Gt){Q=qe.join("&");break e}}}return f=f.i.splice(0,M),C.D=f,Q}function nb(f){if(!f.g&&!f.u){f.Y=1;var C=f.Fa;De||fe(),he||(De(),he=!0),be.add(C,f),f.v=0}}function Jm(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=re(k(f.Fa,f),lb(f,f.v)),f.v++,!0)}s.Fa=function(){if(this.u=null,ib(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=re(k(this.ab,this),f)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Zt(10),Md(this),ib(this))};function Zm(f){f.A!=null&&(c.clearTimeout(f.A),f.A=null)}function ib(f){f.g=new or(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var C=La(f.qa);es(C,"RID","rpc"),es(C,"SID",f.K),es(C,"AID",f.T),es(C,"CI",f.F?"0":"1"),!f.F&&f.ja&&es(C,"TO",f.ja),es(C,"TYPE","xmlhttp"),jl(f,C),f.m&&f.o&&Ym(C,f.m,f.o),f.L&&(f.g.I=f.L);var M=f.g;f=f.ia,M.L=1,M.v=_d(La(C)),M.m=null,M.P=!0,Id(M,f)}s.Za=function(){this.C!=null&&(this.C=null,Md(this),Jm(this),Zt(19))};function Od(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function ob(f,C){var M=null;if(f.g==C){Od(f),Zm(f),f.g=null;var Q=2}else if(Ki(f.h,C))M=C.D,Cd(f.h,C),Q=1;else return;if(f.G!=0){if(C.o)if(Q==1){M=C.m?C.m.length:0,C=Date.now()-C.F;var me=f.B;Q=Is(),ke(Q,new Lt(Q,M)),Ld(f)}else nb(f);else if(me=C.s,me==3||me==0&&0<C.X||!(Q==1&&NP(f,C)||Q==2&&Jm(f)))switch(M&&0<M.length&&(C=f.h,C.i=C.i.concat(M)),me){case 1:li(f,5);break;case 4:li(f,10);break;case 3:li(f,6);break;default:li(f,2)}}}function lb(f,C){let M=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(M*=2),M*C}function li(f,C){if(f.j.info("Error code "+C),C==2){var M=k(f.fb,f),Q=f.Xa;const me=!Q;Q=new oi(Q||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ed(Q,"https"),_d(Q),me?pP(Q.toString(),M):fP(Q.toString(),M)}else Zt(2);f.G=0,f.l&&f.l.sa(C),cb(f),sb(f)}s.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))};function cb(f){if(f.G=0,f.ka=[],f.l){const C=By(f.h);(C.length!=0||f.i.length!=0)&&(_(f.ka,C),_(f.ka,f.i),f.h.i.length=0,O(f.i),f.i.length=0),f.l.ra()}}function db(f,C,M){var Q=M instanceof oi?La(M):new oi(M);if(Q.g!="")C&&(Q.g=C+"."+Q.g),Td(Q,Q.s);else{var me=c.location;Q=me.protocol,C=C?C+"."+me.hostname:me.hostname,me=+me.port;var Ne=new oi(null);Q&&Ed(Ne,Q),C&&(Ne.g=C),me&&Td(Ne,me),M&&(Ne.l=M),Q=Ne}return M=f.D,C=f.ya,M&&C&&es(Q,M,C),es(Q,"VER",f.la),jl(f,Q),Q}function ub(f,C,M){if(C&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=f.Ca&&!f.pa?new ps(new Dd({eb:M})):new ps(f.pa),C.Ha(f.J),C}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function xb(){}s=xb.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Vd(){}Vd.prototype.g=function(f,C){return new Ir(f,C)};function Ir(f,C){de.call(this),this.g=new tb(C),this.l=f,this.h=C&&C.messageUrlParams||null,f=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(f?f["X-WebChannel-Content-Type"]=C.messageContentType:f={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(f?f["X-WebChannel-Client-Profile"]=C.va:f={"X-WebChannel-Client-Profile":C.va}),this.g.S=f,(f=C&&C.Sb)&&!z(f)&&(this.g.m=f),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!z(C)&&(this.g.D=C,f=this.h,f!==null&&C in f&&(f=this.h,C in f&&delete f[C])),this.j=new Ji(this)}y(Ir,de),Ir.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ir.prototype.close=function(){Xm(this.g)},Ir.prototype.o=function(f){var C=this.g;if(typeof f=="string"){var M={};M.__data__=f,f=M}else this.u&&(M={},M.__data__=Jt(f),f=M);C.i.push(new Qi(C.Ya++,f)),C.G==3&&Ld(C)},Ir.prototype.N=function(){this.g.l=null,delete this.j,Xm(this.g),delete this.g,Ir.aa.N.call(this)};function mb(f){Ts.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var C=f.__sm__;if(C){e:{for(const M in C){f=M;break e}f=void 0}(this.i=f)&&(f=this.i,C=C!==null&&f in C?C[f]:void 0),this.data=C}else this.data=f}y(mb,Ts);function hb(){nr.call(this),this.status=1}y(hb,nr);function Ji(f){this.g=f}y(Ji,xb),Ji.prototype.ua=function(){ke(this.g,"a")},Ji.prototype.ta=function(f){ke(this.g,new mb(f))},Ji.prototype.sa=function(f){ke(this.g,new hb)},Ji.prototype.ra=function(){ke(this.g,"b")},Vd.prototype.createWebChannel=Vd.prototype.g,Ir.prototype.send=Ir.prototype.o,Ir.prototype.open=Ir.prototype.m,Ir.prototype.close=Ir.prototype.close,B4=function(){return new Vd},z4=function(){return Is()},V4=ys,o0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ot.NO_ERROR=0,Ot.TIMEOUT=8,Ot.HTTP_ERROR=6,Tu=Ot,ma.COMPLETE="complete",O4=ma,as.EventType=Es,Es.OPEN="a",Es.CLOSE="b",Es.ERROR="c",Es.MESSAGE="d",de.prototype.listen=de.prototype.K,zl=as,ps.prototype.listenOnce=ps.prototype.L,ps.prototype.getLastError=ps.prototype.Ka,ps.prototype.getLastErrorCode=ps.prototype.Ba,ps.prototype.getStatus=ps.prototype.Z,ps.prototype.getResponseJson=ps.prototype.Oa,ps.prototype.getResponseText=ps.prototype.oa,ps.prototype.send=ps.prototype.ea,ps.prototype.setWithCredentials=ps.prototype.Ha,L4=ps}).apply(typeof au<"u"?au:typeof self<"u"?self:typeof window<"u"?window:{});const Kv="@firebase/firestore",Yv="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}er.UNAUTHENTICATED=new er(null),er.GOOGLE_CREDENTIALS=new er("google-credentials-uid"),er.FIRST_PARTY=new er("first-party-uid"),er.MOCK_USER=new er("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new ym("@firebase/firestore");function to(){return Ti.logLevel}function Ze(s,...t){if(Ti.logLevel<=_t.DEBUG){const r=t.map(Xf);Ti.debug(`Firestore (${rl}): ${s}`,...r)}}function en(s,...t){if(Ti.logLevel<=_t.ERROR){const r=t.map(Xf);Ti.error(`Firestore (${rl}): ${s}`,...r)}}function Uo(s,...t){if(Ti.logLevel<=_t.WARN){const r=t.map(Xf);Ti.warn(`Firestore (${rl}): ${s}`,...r)}}function Xf(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(s="Unexpected state"){const t=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: `+s;throw en(t),new Error(t)}function Mt(s,t){s||pt()}function vt(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ke extends Xr{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class j8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(er.UNAUTHENTICATED))}shutdown(){}}class N8{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class w8{constructor(t){this.t=t,this.currentUser=er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){Mt(this.o===void 0);let a=this.i;const i=d=>this.i!==a?(a=this.i,r(d)):Promise.resolve();let l=new Na;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Na,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const d=l;t.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},c=d=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Na)}},0),o()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==t?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Mt(typeof a.accessToken=="string"),new F4(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Mt(t===null||typeof t=="string"),new er(t)}}class k8{constructor(t,r,a){this.l=t,this.h=r,this.P=a,this.type="FirstParty",this.user=er.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class I8{constructor(t,r,a){this.l=t,this.h=r,this.P=a}getToken(){return Promise.resolve(new k8(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(er.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class P8{constructor(t,r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Cr(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,r){Mt(this.o===void 0);const a=l=>{l.error!=null&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const o=l.token!==this.R;return this.R=l.token,Ze("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>a(l))};const i=l=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?i(l):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Xv(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(Mt(typeof r.token=="string"),this.R=r.token,new Xv(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let a=0;a<s;a++)r[a]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const i=S8(40);for(let l=0;l<i.length;++l)a.length<20&&i[l]<r&&(a+=t.charAt(i[l]%62))}return a}}function kt(s,t){return s<t?-1:s>t?1:0}function l0(s,t){let r=0;for(;r<s.length&&r<t.length;){const a=s.codePointAt(r),i=t.codePointAt(r);if(a!==i){if(a<128&&i<128)return kt(a,i);{const l=U4(),o=C8(l.encode(Jv(s,r)),l.encode(Jv(t,r)));return o!==0?o:kt(a,i)}}r+=a>65535?2:1}return kt(s.length,t.length)}function Jv(s,t){return s.codePointAt(t)>65535?s.substring(t,t+2):s.substring(t,t+1)}function C8(s,t){for(let r=0;r<s.length&&r<t.length;++r)if(s[r]!==t[r])return kt(s[r],t[r]);return kt(s.length,t.length)}function $o(s,t,r){return s.length===t.length&&s.every((a,i)=>r(a,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=-62135596800,ej=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(t){return Yt.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),a=Math.floor((t-1e3*r)*ej);return new Yt(r,a)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Ke(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ke(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<Zv)throw new Ke(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ke(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ej}_compareTo(t){return this.seconds===t.seconds?kt(this.nanoseconds,t.nanoseconds):kt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Zv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{static fromTimestamp(t){return new ft(t)}static min(){return new ft(new Yt(0,0))}static max(){return new ft(new Yt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj="__name__";class ya{constructor(t,r,a){r===void 0?r=0:r>t.length&&pt(),a===void 0?a=t.length-r:a>t.length-r&&pt(),this.segments=t,this.offset=r,this.len=a}get length(){return this.len}isEqual(t){return ya.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof ya?t.forEach(a=>{r.push(a)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,a=this.limit();r<a;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const a=Math.min(t.length,r.length);for(let i=0;i<a;i++){const l=ya.compareSegments(t.get(i),r.get(i));if(l!==0)return l}return kt(t.length,r.length)}static compareSegments(t,r){const a=ya.isNumericId(t),i=ya.isNumericId(r);return a&&!i?-1:!a&&i?1:a&&i?ya.extractNumericId(t).compare(ya.extractNumericId(r)):l0(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Vn.fromString(t.substring(4,t.length-2))}}class Qt extends ya{construct(t,r,a){return new Qt(t,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const a of t){if(a.indexOf("//")>=0)throw new Ke(Ee.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(i=>i.length>0))}return new Qt(r)}static emptyPath(){return new Qt([])}}const E8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Us extends ya{construct(t,r,a){return new Us(t,r,a)}static isValidIdentifier(t){return E8.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Us.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tj}static keyField(){return new Us([tj])}static fromServerFormat(t){const r=[];let a="",i=0;const l=()=>{if(a.length===0)throw new Ke(Ee.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let o=!1;for(;i<t.length;){const c=t[i];if(c==="\\"){if(i+1===t.length)throw new Ke(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ke(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=d,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(a+=c,i++):(l(),i++)}if(l(),o)throw new Ke(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Us(r)}static emptyPath(){return new Us([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(t){this.path=t}static fromPath(t){return new mt(Qt.fromString(t))}static fromName(t){return new mt(Qt.fromString(t).popFirst(5))}static empty(){return new mt(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Qt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Qt.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new mt(new Qt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=-1;function T8(s,t){const r=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,i=ft.fromTimestamp(a===1e9?new Yt(r+1,0):new Yt(r,a));return new $n(i,mt.empty(),t)}function _8(s){return new $n(s.readTime,s.key,_c)}class $n{constructor(t,r,a){this.readTime=t,this.documentKey=r,this.largestBatchId=a}static min(){return new $n(ft.min(),mt.empty(),_c)}static max(){return new $n(ft.max(),mt.empty(),_c)}}function D8(s,t){let r=s.readTime.compareTo(t.readTime);return r!==0?r:(r=mt.comparator(s.documentKey,t.documentKey),r!==0?r:kt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function al(s){if(s.code!==Ee.FAILED_PRECONDITION||s.message!==A8)throw s;Ze("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Ae((a,i)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(a,i)},this.catchCallback=l=>{this.wrapFailure(r,l).next(a,i)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Ae?r:Ae.resolve(r)}catch(r){return Ae.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Ae.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Ae.reject(r)}static resolve(t){return new Ae((r,a)=>{r(t)})}static reject(t){return new Ae((r,a)=>{a(t)})}static waitFor(t){return new Ae((r,a)=>{let i=0,l=0,o=!1;t.forEach(c=>{++i,c.next(()=>{++l,o&&l===i&&r()},d=>a(d))}),o=!0,l===i&&r()})}static or(t){let r=Ae.resolve(!1);for(const a of t)r=r.next(i=>i?Ae.resolve(i):a());return r}static forEach(t,r){const a=[];return t.forEach((i,l)=>{a.push(r.call(this,i,l))}),this.waitFor(a)}static mapArray(t,r){return new Ae((a,i)=>{const l=t.length,o=new Array(l);let c=0;for(let d=0;d<l;d++){const h=d;r(t[h]).next(g=>{o[h]=g,++c,c===l&&a(o)},g=>i(g))}})}static doWhile(t,r){return new Ae((a,i)=>{const l=()=>{t()===!0?r().next(()=>{l()},i):a()};l()})}}function M8(s){const t=s.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function nl(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=a=>this.oe(a),this._e=a=>r.writeSequenceNumber(a))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}vm.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=-1;function id(s){return s==null}function kx(s){return s===0&&1/s==-1/0}function L8(s){return typeof s=="number"&&Number.isInteger(s)&&!kx(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4="";function O8(s){let t="";for(let r=0;r<s.length;r++)t.length>0&&(t=sj(t)),t=V8(s.get(r),t);return sj(t)}function V8(s,t){let r=t;const a=s.length;for(let i=0;i<a;i++){const l=s.charAt(i);switch(l){case"\0":r+="";break;case W4:r+="";break;default:r+=l}}return r}function sj(s){return s+W4+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(s){let t=0;for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&t++;return t}function ti(s,t){for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&t(r,s[r])}function q4(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(t,r){this.comparator=t,this.root=r||Fs.EMPTY}insert(t,r){return new hs(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Fs.BLACK,null,null))}remove(t){return new hs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Fs.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(t){let r=0,a=this.root;for(;!a.isEmpty();){const i=this.comparator(t,a.key);if(i===0)return r+a.left.size;i<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,a)=>(t(r,a),!1))}toString(){const t=[];return this.inorderTraversal((r,a)=>(t.push(`${r}:${a}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new nu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new nu(this.root,t,this.comparator,!1)}getReverseIterator(){return new nu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new nu(this.root,t,this.comparator,!0)}}class nu{constructor(t,r,a,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=r?a(t.key,r):1,r&&i&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Fs{constructor(t,r,a,i,l){this.key=t,this.value=r,this.color=a??Fs.RED,this.left=i??Fs.EMPTY,this.right=l??Fs.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,a,i,l){return new Fs(t??this.key,r??this.value,a??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,a){let i=this;const l=a(t,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(t,r,a),null):l===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(t,r,a)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Fs.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let a,i=this;if(r(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(t,i.key)===0){if(i.right.isEmpty())return Fs.EMPTY;a=i.right.min(),i=i.copy(a.key,a.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Fs.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Fs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const t=this.left.check();if(t!==this.right.check())throw pt();return t+(this.isRed()?0:1)}}Fs.EMPTY=null,Fs.RED=!0,Fs.BLACK=!1;Fs.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(t,r,a,i,l){return this}insert(t,r,a){return new Fs(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(t){this.comparator=t,this.data=new hs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,a)=>(t(r),!1))}forEachInRange(t,r){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const i=a.getNext();if(this.comparator(i.key,t[1])>=0)return;r(i.key)}}forEachWhile(t,r){let a;for(a=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new aj(this.data.getIterator())}getIteratorFrom(t){return new aj(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(a=>{r=r.add(a)}),r}isEqual(t){if(!(t instanceof Cs)||this.size!==t.size)return!1;const r=this.data.getIterator(),a=t.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,l=a.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Cs(this.comparator);return r.data=t,r}}class aj{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(t){this.fields=t,t.sort(Us.comparator)}static empty(){return new Tr([])}unionWith(t){let r=new Cs(Us.comparator);for(const a of this.fields)r=r.add(a);for(const a of t)r=r.add(a);return new Tr(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return $o(this.fields,t.fields,(r,a)=>r.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(i){try{return atob(i)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new H4("Invalid base64 string: "+l):l}}(t);return new Gs(r)}static fromUint8Array(t){const r=function(i){let l="";for(let o=0;o<i.length;++o)l+=String.fromCharCode(i[o]);return l}(t);return new Gs(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const a=new Uint8Array(r.length);for(let i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return kt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Gs.EMPTY_BYTE_STRING=new Gs("");const z8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wn(s){if(Mt(!!s),typeof s=="string"){let t=0;const r=z8.exec(s);if(Mt(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),t=Number(i)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:vs(s.seconds),nanos:vs(s.nanos)}}function vs(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function qn(s){return typeof s=="string"?Gs.fromBase64String(s):Gs.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4="server_timestamp",Q4="__type__",K4="__previous_value__",Y4="__local_write_time__";function Zf(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[Q4])===null||r===void 0?void 0:r.stringValue)===G4}function jm(s){const t=s.mapValue.fields[K4];return Zf(t)?jm(t):t}function Dc(s){const t=Wn(s.mapValue.fields[Y4].timestampValue);return new Yt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(t,r,a,i,l,o,c,d,h){this.databaseId=t,this.appId=r,this.persistenceKey=a,this.host=i,this.ssl=l,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}const Ix="(default)";class Ac{constructor(t,r){this.projectId=t,this.database=r||Ix}static empty(){return new Ac("","")}get isDefaultDatabase(){return this.database===Ix}isEqual(t){return t instanceof Ac&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4="__type__",J4="__max__",iu={mapValue:{fields:{__type__:{stringValue:J4}}}},Z4="__vector__",Px="value";function Hn(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Zf(s)?4:U8(s)?9007199254740991:F8(s)?10:11:pt()}function Ta(s,t){if(s===t)return!0;const r=Hn(s);if(r!==Hn(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Dc(s).isEqual(Dc(t));case 3:return function(i,l){if(typeof i.timestampValue=="string"&&typeof l.timestampValue=="string"&&i.timestampValue.length===l.timestampValue.length)return i.timestampValue===l.timestampValue;const o=Wn(i.timestampValue),c=Wn(l.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(i,l){return qn(i.bytesValue).isEqual(qn(l.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(i,l){return vs(i.geoPointValue.latitude)===vs(l.geoPointValue.latitude)&&vs(i.geoPointValue.longitude)===vs(l.geoPointValue.longitude)}(s,t);case 2:return function(i,l){if("integerValue"in i&&"integerValue"in l)return vs(i.integerValue)===vs(l.integerValue);if("doubleValue"in i&&"doubleValue"in l){const o=vs(i.doubleValue),c=vs(l.doubleValue);return o===c?kx(o)===kx(c):isNaN(o)&&isNaN(c)}return!1}(s,t);case 9:return $o(s.arrayValue.values||[],t.arrayValue.values||[],Ta);case 10:case 11:return function(i,l){const o=i.mapValue.fields||{},c=l.mapValue.fields||{};if(rj(o)!==rj(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!Ta(o[d],c[d])))return!1;return!0}(s,t);default:return pt()}}function Rc(s,t){return(s.values||[]).find(r=>Ta(r,t))!==void 0}function Wo(s,t){if(s===t)return 0;const r=Hn(s),a=Hn(t);if(r!==a)return kt(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return kt(s.booleanValue,t.booleanValue);case 2:return function(l,o){const c=vs(l.integerValue||l.doubleValue),d=vs(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(s,t);case 3:return nj(s.timestampValue,t.timestampValue);case 4:return nj(Dc(s),Dc(t));case 5:return l0(s.stringValue,t.stringValue);case 6:return function(l,o){const c=qn(l),d=qn(o);return c.compareTo(d)}(s.bytesValue,t.bytesValue);case 7:return function(l,o){const c=l.split("/"),d=o.split("/");for(let h=0;h<c.length&&h<d.length;h++){const g=kt(c[h],d[h]);if(g!==0)return g}return kt(c.length,d.length)}(s.referenceValue,t.referenceValue);case 8:return function(l,o){const c=kt(vs(l.latitude),vs(o.latitude));return c!==0?c:kt(vs(l.longitude),vs(o.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return ij(s.arrayValue,t.arrayValue);case 10:return function(l,o){var c,d,h,g;const N=l.fields||{},k=o.fields||{},E=(c=N[Px])===null||c===void 0?void 0:c.arrayValue,y=(d=k[Px])===null||d===void 0?void 0:d.arrayValue,O=kt(((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0,((g=y==null?void 0:y.values)===null||g===void 0?void 0:g.length)||0);return O!==0?O:ij(E,y)}(s.mapValue,t.mapValue);case 11:return function(l,o){if(l===iu.mapValue&&o===iu.mapValue)return 0;if(l===iu.mapValue)return 1;if(o===iu.mapValue)return-1;const c=l.fields||{},d=Object.keys(c),h=o.fields||{},g=Object.keys(h);d.sort(),g.sort();for(let N=0;N<d.length&&N<g.length;++N){const k=l0(d[N],g[N]);if(k!==0)return k;const E=Wo(c[d[N]],h[g[N]]);if(E!==0)return E}return kt(d.length,g.length)}(s.mapValue,t.mapValue);default:throw pt()}}function nj(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return kt(s,t);const r=Wn(s),a=Wn(t),i=kt(r.seconds,a.seconds);return i!==0?i:kt(r.nanos,a.nanos)}function ij(s,t){const r=s.values||[],a=t.values||[];for(let i=0;i<r.length&&i<a.length;++i){const l=Wo(r[i],a[i]);if(l)return l}return kt(r.length,a.length)}function qo(s){return c0(s)}function c0(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(r){const a=Wn(r);return`time(${a.seconds},${a.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(r){return qn(r).toBase64()}(s.bytesValue):"referenceValue"in s?function(r){return mt.fromName(r).toString()}(s.referenceValue):"geoPointValue"in s?function(r){return`geo(${r.latitude},${r.longitude})`}(s.geoPointValue):"arrayValue"in s?function(r){let a="[",i=!0;for(const l of r.values||[])i?i=!1:a+=",",a+=c0(l);return a+"]"}(s.arrayValue):"mapValue"in s?function(r){const a=Object.keys(r.fields||{}).sort();let i="{",l=!0;for(const o of a)l?l=!1:i+=",",i+=`${o}:${c0(r.fields[o])}`;return i+"}"}(s.mapValue):pt()}function _u(s){switch(Hn(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=jm(s);return t?16+_u(t):16;case 5:return 2*s.stringValue.length;case 6:return qn(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((i,l)=>i+_u(l),0)}(s.arrayValue);case 10:case 11:return function(a){let i=0;return ti(a.fields,(l,o)=>{i+=l.length+_u(o)}),i}(s.mapValue);default:throw pt()}}function oj(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function d0(s){return!!s&&"integerValue"in s}function eg(s){return!!s&&"arrayValue"in s}function lj(s){return!!s&&"nullValue"in s}function cj(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Du(s){return!!s&&"mapValue"in s}function F8(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[X4])===null||r===void 0?void 0:r.stringValue)===Z4}function Zl(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return ti(s.mapValue.fields,(r,a)=>t.mapValue.fields[r]=Zl(a)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(s.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Zl(s.arrayValue.values[r]);return t}return Object.assign({},s)}function U8(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===J4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(t){this.value=t}static empty(){return new cr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let a=0;a<t.length-1;++a)if(r=(r.mapValue.fields||{})[t.get(a)],!Du(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Zl(r)}setAll(t){let r=Us.emptyPath(),a={},i=[];t.forEach((o,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,a,i),a={},i=[],r=c.popLast()}o?a[c.lastSegment()]=Zl(o):i.push(c.lastSegment())});const l=this.getFieldsMap(r);this.applyChanges(l,a,i)}delete(t){const r=this.field(t.popLast());Du(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return Ta(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<t.length;++a){let i=r.mapValue.fields[t.get(a)];Du(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[t.get(a)]=i),r=i}return r.mapValue.fields}applyChanges(t,r,a){ti(r,(i,l)=>t[i]=l);for(const i of a)delete t[i]}clone(){return new cr(Zl(this.value))}}function e1(s){const t=[];return ti(s.fields,(r,a)=>{const i=new Us([r]);if(Du(a)){const l=e1(a.mapValue).fields;if(l.length===0)t.push(i);else for(const o of l)t.push(i.child(o))}else t.push(i)}),new Tr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(t,r,a,i,l,o,c){this.key=t,this.documentType=r,this.version=a,this.readTime=i,this.createTime=l,this.data=o,this.documentState=c}static newInvalidDocument(t){return new Rs(t,0,ft.min(),ft.min(),ft.min(),cr.empty(),0)}static newFoundDocument(t,r,a,i){return new Rs(t,1,r,ft.min(),a,i,0)}static newNoDocument(t,r){return new Rs(t,2,r,ft.min(),ft.min(),cr.empty(),0)}static newUnknownDocument(t,r){return new Rs(t,3,r,ft.min(),ft.min(),cr.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=cr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Rs&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Rs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(t,r){this.position=t,this.inclusive=r}}function dj(s,t,r){let a=0;for(let i=0;i<s.position.length;i++){const l=t[i],o=s.position[i];if(l.field.isKeyField()?a=mt.comparator(mt.fromName(o.referenceValue),r.key):a=Wo(o,r.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function uj(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let r=0;r<s.position.length;r++)if(!Ta(s.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(t,r="asc"){this.field=t,this.dir=r}}function $8(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{}class ks extends t1{constructor(t,r,a){super(),this.field=t,this.op=r,this.value=a}static create(t,r,a){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,a):new q8(t,r,a):r==="array-contains"?new Q8(t,a):r==="in"?new K8(t,a):r==="not-in"?new Y8(t,a):r==="array-contains-any"?new X8(t,a):new ks(t,r,a)}static createKeyFieldInFilter(t,r,a){return r==="in"?new H8(t,a):new G8(t,a)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Wo(r,this.value)):r!==null&&Hn(this.value)===Hn(r)&&this.matchesComparison(Wo(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return pt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ua extends t1{constructor(t,r){super(),this.filters=t,this.op=r,this.ce=null}static create(t,r){return new ua(t,r)}matches(t){return s1(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function s1(s){return s.op==="and"}function r1(s){return W8(s)&&s1(s)}function W8(s){for(const t of s.filters)if(t instanceof ua)return!1;return!0}function u0(s){if(s instanceof ks)return s.field.canonicalString()+s.op.toString()+qo(s.value);if(r1(s))return s.filters.map(t=>u0(t)).join(",");{const t=s.filters.map(r=>u0(r)).join(",");return`${s.op}(${t})`}}function a1(s,t){return s instanceof ks?function(a,i){return i instanceof ks&&a.op===i.op&&a.field.isEqual(i.field)&&Ta(a.value,i.value)}(s,t):s instanceof ua?function(a,i){return i instanceof ua&&a.op===i.op&&a.filters.length===i.filters.length?a.filters.reduce((l,o,c)=>l&&a1(o,i.filters[c]),!0):!1}(s,t):void pt()}function n1(s){return s instanceof ks?function(r){return`${r.field.canonicalString()} ${r.op} ${qo(r.value)}`}(s):s instanceof ua?function(r){return r.op.toString()+" {"+r.getFilters().map(n1).join(" ,")+"}"}(s):"Filter"}class q8 extends ks{constructor(t,r,a){super(t,r,a),this.key=mt.fromName(a.referenceValue)}matches(t){const r=mt.comparator(t.key,this.key);return this.matchesComparison(r)}}class H8 extends ks{constructor(t,r){super(t,"in",r),this.keys=i1("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class G8 extends ks{constructor(t,r){super(t,"not-in",r),this.keys=i1("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function i1(s,t){var r;return(((r=t.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(a=>mt.fromName(a.referenceValue))}class Q8 extends ks{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return eg(r)&&Rc(r.arrayValue,this.value)}}class K8 extends ks{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Rc(this.value.arrayValue,r)}}class Y8 extends ks{constructor(t,r){super(t,"not-in",r)}matches(t){if(Rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&!Rc(this.value.arrayValue,r)}}class X8 extends ks{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!eg(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>Rc(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(t,r=null,a=[],i=[],l=null,o=null,c=null){this.path=t,this.collectionGroup=r,this.orderBy=a,this.filters=i,this.limit=l,this.startAt=o,this.endAt=c,this.le=null}}function xj(s,t=null,r=[],a=[],i=null,l=null,o=null){return new J8(s,t,r,a,i,l,o)}function tg(s){const t=vt(s);if(t.le===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(a=>u0(a)).join(","),r+="|ob:",r+=t.orderBy.map(a=>function(l){return l.field.canonicalString()+l.dir}(a)).join(","),id(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>qo(a)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>qo(a)).join(",")),t.le=r}return t.le}function sg(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<s.orderBy.length;r++)if(!$8(s.orderBy[r],t.orderBy[r]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let r=0;r<s.filters.length;r++)if(!a1(s.filters[r],t.filters[r]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!uj(s.startAt,t.startAt)&&uj(s.endAt,t.endAt)}function x0(s){return mt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(t,r=null,a=[],i=[],l=null,o="F",c=null,d=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=i,this.limit=l,this.limitType=o,this.startAt=c,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Z8(s,t,r,a,i,l,o,c){return new il(s,t,r,a,i,l,o,c)}function Nm(s){return new il(s)}function mj(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function o1(s){return s.collectionGroup!==null}function ec(s){const t=vt(s);if(t.he===null){t.he=[];const r=new Set;for(const l of t.explicitOrderBy)t.he.push(l),r.add(l.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Cs(Us.comparator);return o.filters.forEach(d=>{d.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(t).forEach(l=>{r.has(l.canonicalString())||l.isKeyField()||t.he.push(new Mc(l,a))}),r.has(Us.keyField().canonicalString())||t.he.push(new Mc(Us.keyField(),a))}return t.he}function wa(s){const t=vt(s);return t.Pe||(t.Pe=eD(t,ec(s))),t.Pe}function eD(s,t){if(s.limitType==="F")return xj(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(i=>{const l=i.dir==="desc"?"asc":"desc";return new Mc(i.field,l)});const r=s.endAt?new Sx(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Sx(s.startAt.position,s.startAt.inclusive):null;return xj(s.path,s.collectionGroup,t,s.filters,s.limit,r,a)}}function m0(s,t){const r=s.filters.concat([t]);return new il(s.path,s.collectionGroup,s.explicitOrderBy.slice(),r,s.limit,s.limitType,s.startAt,s.endAt)}function Cx(s,t,r){return new il(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,r,s.startAt,s.endAt)}function wm(s,t){return sg(wa(s),wa(t))&&s.limitType===t.limitType}function l1(s){return`${tg(wa(s))}|lt:${s.limitType}`}function so(s){return`Query(target=${function(r){let a=r.path.canonicalString();return r.collectionGroup!==null&&(a+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(a+=`, filters: [${r.filters.map(i=>n1(i)).join(", ")}]`),id(r.limit)||(a+=", limit: "+r.limit),r.orderBy.length>0&&(a+=`, orderBy: [${r.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),r.startAt&&(a+=", startAt: ",a+=r.startAt.inclusive?"b:":"a:",a+=r.startAt.position.map(i=>qo(i)).join(",")),r.endAt&&(a+=", endAt: ",a+=r.endAt.inclusive?"a:":"b:",a+=r.endAt.position.map(i=>qo(i)).join(",")),`Target(${a})`}(wa(s))}; limitType=${s.limitType})`}function km(s,t){return t.isFoundDocument()&&function(a,i){const l=i.key.path;return a.collectionGroup!==null?i.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):mt.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)}(s,t)&&function(a,i){for(const l of ec(a))if(!l.field.isKeyField()&&i.data.field(l.field)===null)return!1;return!0}(s,t)&&function(a,i){for(const l of a.filters)if(!l.matches(i))return!1;return!0}(s,t)&&function(a,i){return!(a.startAt&&!function(o,c,d){const h=dj(o,c,d);return o.inclusive?h<=0:h<0}(a.startAt,ec(a),i)||a.endAt&&!function(o,c,d){const h=dj(o,c,d);return o.inclusive?h>=0:h>0}(a.endAt,ec(a),i))}(s,t)}function tD(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function c1(s){return(t,r)=>{let a=!1;for(const i of ec(s)){const l=sD(i,t,r);if(l!==0)return l;a=a||i.field.isKeyField()}return 0}}function sD(s,t,r){const a=s.field.isKeyField()?mt.comparator(t.key,r.key):function(l,o,c){const d=o.data.field(l),h=c.data.field(l);return d!==null&&h!==null?Wo(d,h):pt()}(s.field,t,r);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return pt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a!==void 0){for(const[i,l]of a)if(this.equalsFn(i,t))return l}}has(t){return this.get(t)!==void 0}set(t,r){const a=this.mapKeyFn(t),i=this.inner[a];if(i===void 0)return this.inner[a]=[[t,r]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],t))return void(i[l]=[t,r]);i.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return!1;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],t))return a.length===1?delete this.inner[r]:a.splice(i,1),this.innerSize--,!0;return!1}forEach(t){ti(this.inner,(r,a)=>{for(const[i,l]of a)t(i,l)})}isEmpty(){return q4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=new hs(mt.comparator);function tn(){return rD}const d1=new hs(mt.comparator);function Bl(...s){let t=d1;for(const r of s)t=t.insert(r.key,r);return t}function u1(s){let t=d1;return s.forEach((r,a)=>t=t.insert(r,a.overlayedDocument)),t}function gi(){return tc()}function x1(){return tc()}function tc(){return new Ui(s=>s.toString(),(s,t)=>s.isEqual(t))}const aD=new hs(mt.comparator),nD=new Cs(mt.comparator);function Dt(...s){let t=nD;for(const r of s)t=t.add(r);return t}const iD=new Cs(kt);function oD(){return iD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kx(t)?"-0":t}}function m1(s){return{integerValue:""+s}}function h1(s,t){return L8(t)?m1(t):rg(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this._=void 0}}function lD(s,t,r){return s instanceof Lc?function(i,l){const o={fields:{[Q4]:{stringValue:G4},[Y4]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return l&&Zf(l)&&(l=jm(l)),l&&(o.fields[K4]=l),{mapValue:o}}(r,t):s instanceof Oc?f1(s,t):s instanceof Vc?g1(s,t):function(i,l){const o=p1(i,l),c=hj(o)+hj(i.Ie);return d0(o)&&d0(i.Ie)?m1(c):rg(i.serializer,c)}(s,t)}function cD(s,t,r){return s instanceof Oc?f1(s,t):s instanceof Vc?g1(s,t):r}function p1(s,t){return s instanceof zc?function(a){return d0(a)||function(l){return!!l&&"doubleValue"in l}(a)}(t)?t:{integerValue:0}:null}class Lc extends Im{}class Oc extends Im{constructor(t){super(),this.elements=t}}function f1(s,t){const r=y1(t);for(const a of s.elements)r.some(i=>Ta(i,a))||r.push(a);return{arrayValue:{values:r}}}class Vc extends Im{constructor(t){super(),this.elements=t}}function g1(s,t){let r=y1(t);for(const a of s.elements)r=r.filter(i=>!Ta(i,a));return{arrayValue:{values:r}}}class zc extends Im{constructor(t,r){super(),this.serializer=t,this.Ie=r}}function hj(s){return vs(s.integerValue||s.doubleValue)}function y1(s){return eg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(t,r){this.field=t,this.transform=r}}function dD(s,t){return s.field.isEqual(t.field)&&function(a,i){return a instanceof Oc&&i instanceof Oc||a instanceof Vc&&i instanceof Vc?$o(a.elements,i.elements,Ta):a instanceof zc&&i instanceof zc?Ta(a.Ie,i.Ie):a instanceof Lc&&i instanceof Lc}(s.transform,t.transform)}class uD{constructor(t,r){this.version=t,this.transformResults=r}}class $s{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new $s}static exists(t){return new $s(void 0,t)}static updateTime(t){return new $s(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Au(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Pm{}function v1(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new Sm(s.key,$s.none()):new od(s.key,s.data,$s.none());{const r=s.data,a=cr.empty();let i=new Cs(Us.comparator);for(let l of t.fields)if(!i.has(l)){let o=r.field(l);o===null&&l.length>1&&(l=l.popLast(),o=r.field(l)),o===null?a.delete(l):a.set(l,o),i=i.add(l)}return new si(s.key,a,new Tr(i.toArray()),$s.none())}}function xD(s,t,r){s instanceof od?function(i,l,o){const c=i.value.clone(),d=fj(i.fieldTransforms,l,o.transformResults);c.setAll(d),l.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(s,t,r):s instanceof si?function(i,l,o){if(!Au(i.precondition,l))return void l.convertToUnknownDocument(o.version);const c=fj(i.fieldTransforms,l,o.transformResults),d=l.data;d.setAll(j1(i)),d.setAll(c),l.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(s,t,r):function(i,l,o){l.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,r)}function sc(s,t,r,a){return s instanceof od?function(l,o,c,d){if(!Au(l.precondition,o))return c;const h=l.value.clone(),g=gj(l.fieldTransforms,d,o);return h.setAll(g),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(s,t,r,a):s instanceof si?function(l,o,c,d){if(!Au(l.precondition,o))return c;const h=gj(l.fieldTransforms,d,o),g=o.data;return g.setAll(j1(l)),g.setAll(h),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),c===null?null:c.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(N=>N.field))}(s,t,r,a):function(l,o,c){return Au(l.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(s,t,r)}function mD(s,t){let r=null;for(const a of s.fieldTransforms){const i=t.data.field(a.field),l=p1(a.transform,i||null);l!=null&&(r===null&&(r=cr.empty()),r.set(a.field,l))}return r||null}function pj(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(a,i){return a===void 0&&i===void 0||!(!a||!i)&&$o(a,i,(l,o)=>dD(l,o))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class od extends Pm{constructor(t,r,a,i=[]){super(),this.key=t,this.value=r,this.precondition=a,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class si extends Pm{constructor(t,r,a,i,l=[]){super(),this.key=t,this.data=r,this.fieldMask=a,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function j1(s){const t=new Map;return s.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=s.data.field(r);t.set(r,a)}}),t}function fj(s,t,r){const a=new Map;Mt(s.length===r.length);for(let i=0;i<r.length;i++){const l=s[i],o=l.transform,c=t.data.field(l.field);a.set(l.field,cD(o,c,r[i]))}return a}function gj(s,t,r){const a=new Map;for(const i of s){const l=i.transform,o=r.data.field(i.field);a.set(i.field,lD(l,o,t))}return a}class Sm extends Pm{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class N1 extends Pm{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(t,r,a,i){this.batchId=t,this.localWriteTime=r,this.baseMutations=a,this.mutations=i}applyToRemoteDocument(t,r){const a=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(t.key)&&xD(l,t,a[i])}}applyToLocalView(t,r){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(r=sc(a,t,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(r=sc(a,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const a=x1();return this.mutations.forEach(i=>{const l=t.get(i.key),o=l.overlayedDocument;let c=this.applyToLocalView(o,l.mutatedFields);c=r.has(i.key)?null:c;const d=v1(o,c);d!==null&&a.set(i.key,d),o.isValidDocument()||o.convertToNoDocument(ft.min())}),a}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Dt())}isEqual(t){return this.batchId===t.batchId&&$o(this.mutations,t.mutations,(r,a)=>pj(r,a))&&$o(this.baseMutations,t.baseMutations,(r,a)=>pj(r,a))}}class ag{constructor(t,r,a,i){this.batch=t,this.commitVersion=r,this.mutationResults=a,this.docVersions=i}static from(t,r,a){Mt(t.mutations.length===a.length);let i=function(){return aD}();const l=t.mutations;for(let o=0;o<l.length;o++)i=i.insert(l[o].key,a[o].version);return new ag(t,r,a,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ns,Rt;function w1(s){switch(s){case Ee.OK:return pt();case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return pt()}}function k1(s){if(s===void 0)return en("GRPC error has no .code"),Ee.UNKNOWN;switch(s){case Ns.OK:return Ee.OK;case Ns.CANCELLED:return Ee.CANCELLED;case Ns.UNKNOWN:return Ee.UNKNOWN;case Ns.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case Ns.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case Ns.INTERNAL:return Ee.INTERNAL;case Ns.UNAVAILABLE:return Ee.UNAVAILABLE;case Ns.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case Ns.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case Ns.NOT_FOUND:return Ee.NOT_FOUND;case Ns.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case Ns.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case Ns.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case Ns.ABORTED:return Ee.ABORTED;case Ns.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case Ns.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case Ns.DATA_LOSS:return Ee.DATA_LOSS;default:return pt()}}(Rt=Ns||(Ns={}))[Rt.OK=0]="OK",Rt[Rt.CANCELLED=1]="CANCELLED",Rt[Rt.UNKNOWN=2]="UNKNOWN",Rt[Rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rt[Rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rt[Rt.NOT_FOUND=5]="NOT_FOUND",Rt[Rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rt[Rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rt[Rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rt[Rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rt[Rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rt[Rt.ABORTED=10]="ABORTED",Rt[Rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rt[Rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rt[Rt.INTERNAL=13]="INTERNAL",Rt[Rt.UNAVAILABLE=14]="UNAVAILABLE",Rt[Rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=new Vn([4294967295,4294967295],0);function yj(s){const t=U4().encode(s),r=new M4;return r.update(t),new Uint8Array(r.digest())}function bj(s){const t=new DataView(s.buffer),r=t.getUint32(0,!0),a=t.getUint32(4,!0),i=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Vn([r,a],0),new Vn([i,l],0)]}class ng{constructor(t,r,a){if(this.bitmap=t,this.padding=r,this.hashCount=a,r<0||r>=8)throw new Fl(`Invalid padding: ${r}`);if(a<0)throw new Fl(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new Fl(`Invalid hash count: ${a}`);if(t.length===0&&r!==0)throw new Fl(`Invalid padding when bitmap length is 0: ${r}`);this.Ee=8*t.length-r,this.de=Vn.fromNumber(this.Ee)}Ae(t,r,a){let i=t.add(r.multiply(Vn.fromNumber(a)));return i.compare(gD)===1&&(i=new Vn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const r=yj(t),[a,i]=bj(r);for(let l=0;l<this.hashCount;l++){const o=this.Ae(a,i,l);if(!this.Re(o))return!1}return!0}static create(t,r,a){const i=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),o=new ng(l,i,r);return a.forEach(c=>o.insert(c)),o}insert(t){if(this.Ee===0)return;const r=yj(t),[a,i]=bj(r);for(let l=0;l<this.hashCount;l++){const o=this.Ae(a,i,l);this.Ve(o)}}Ve(t){const r=Math.floor(t/8),a=t%8;this.bitmap[r]|=1<<a}}class Fl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(t,r,a,i,l){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,r,a){const i=new Map;return i.set(t,ld.createSynthesizedTargetChangeForCurrentChange(t,r,a)),new Cm(ft.min(),i,new hs(kt),tn(),Dt())}}class ld{constructor(t,r,a,i,l){this.resumeToken=t,this.current=r,this.addedDocuments=a,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,r,a){return new ld(a,r,Dt(),Dt(),Dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(t,r,a,i){this.me=t,this.removedTargetIds=r,this.key=a,this.fe=i}}class I1{constructor(t,r){this.targetId=t,this.ge=r}}class P1{constructor(t,r,a=Gs.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=r,this.resumeToken=a,this.cause=i}}class vj{constructor(){this.pe=0,this.ye=jj(),this.we=Gs.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Dt(),r=Dt(),a=Dt();return this.ye.forEach((i,l)=>{switch(l){case 0:t=t.add(i);break;case 2:r=r.add(i);break;case 1:a=a.add(i);break;default:pt()}}),new ld(this.we,this.Se,t,r,a)}Me(){this.be=!1,this.ye=jj()}xe(t,r){this.be=!0,this.ye=this.ye.insert(t,r)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Mt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class yD{constructor(t){this.ke=t,this.qe=new Map,this.Qe=tn(),this.$e=ou(),this.Ue=ou(),this.Ke=new hs(kt)}We(t){for(const r of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(r,t.fe):this.ze(r,t.key,t.fe);for(const r of t.removedTargetIds)this.ze(r,t.key,t.fe)}je(t){this.forEachTarget(t,r=>{const a=this.He(r);switch(t.state){case 0:this.Je(r)&&a.Ce(t.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(t.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(r);break;case 3:this.Je(r)&&(a.Le(),a.Ce(t.resumeToken));break;case 4:this.Je(r)&&(this.Ye(r),a.Ce(t.resumeToken));break;default:pt()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.qe.forEach((a,i)=>{this.Je(i)&&r(i)})}Ze(t){const r=t.targetId,a=t.ge.count,i=this.Xe(r);if(i){const l=i.target;if(x0(l))if(a===0){const o=new mt(l.path);this.ze(r,o,Rs.newNoDocument(o,ft.min()))}else Mt(a===1);else{const o=this.et(r);if(o!==a){const c=this.tt(t),d=c?this.nt(c,t,o):1;if(d!==0){this.Ye(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(r,h)}}}}}tt(t){const r=t.ge.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:a="",padding:i=0},hashCount:l=0}=r;let o,c;try{o=qn(a).toUint8Array()}catch(d){if(d instanceof H4)return Uo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new ng(o,i,l)}catch(d){return Uo(d instanceof Fl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ee===0?null:c}nt(t,r,a){return r.ge.count===a-this.st(t,r.targetId)?0:2}st(t,r){const a=this.ke.getRemoteKeysForTarget(r);let i=0;return a.forEach(l=>{const o=this.ke.it(),c=`projects/${o.projectId}/databases/${o.database}/documents/${l.path.canonicalString()}`;t.mightContain(c)||(this.ze(r,l,null),i++)}),i}ot(t){const r=new Map;this.qe.forEach((l,o)=>{const c=this.Xe(o);if(c){if(l.current&&x0(c.target)){const d=new mt(c.target.path);this._t(d).has(o)||this.ut(o,d)||this.ze(o,d,Rs.newNoDocument(d,t))}l.ve&&(r.set(o,l.Fe()),l.Me())}});let a=Dt();this.Ue.forEach((l,o)=>{let c=!0;o.forEachWhile(d=>{const h=this.Xe(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(a=a.add(l))}),this.Qe.forEach((l,o)=>o.setReadTime(t));const i=new Cm(t,r,this.Ke,this.Qe,a);return this.Qe=tn(),this.$e=ou(),this.Ue=ou(),this.Ke=new hs(kt),i}Ge(t,r){if(!this.Je(t))return;const a=this.ut(t,r.key)?2:0;this.He(t).xe(r.key,a),this.Qe=this.Qe.insert(r.key,r),this.$e=this.$e.insert(r.key,this._t(r.key).add(t)),this.Ue=this.Ue.insert(r.key,this.ct(r.key).add(t))}ze(t,r,a){if(!this.Je(t))return;const i=this.He(t);this.ut(t,r)?i.xe(r,1):i.Oe(r),this.Ue=this.Ue.insert(r,this.ct(r).delete(t)),this.Ue=this.Ue.insert(r,this.ct(r).add(t)),a&&(this.Qe=this.Qe.insert(r,a))}removeTarget(t){this.qe.delete(t)}et(t){const r=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let r=this.qe.get(t);return r||(r=new vj,this.qe.set(t,r)),r}ct(t){let r=this.Ue.get(t);return r||(r=new Cs(kt),this.Ue=this.Ue.insert(t,r)),r}_t(t){let r=this.$e.get(t);return r||(r=new Cs(kt),this.$e=this.$e.insert(t,r)),r}Je(t){const r=this.Xe(t)!==null;return r||Ze("WatchChangeAggregator","Detected inactive target",t),r}Xe(t){const r=this.qe.get(t);return r&&r.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new vj),this.ke.getRemoteKeysForTarget(t).forEach(r=>{this.ze(t,r,null)})}ut(t,r){return this.ke.getRemoteKeysForTarget(t).has(r)}}function ou(){return new hs(mt.comparator)}function jj(){return new hs(mt.comparator)}const bD=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),vD=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),jD=(()=>({and:"AND",or:"OR"}))();class ND{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function h0(s,t){return s.useProto3Json||id(t)?t:{value:t}}function Ex(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function S1(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function wD(s,t){return Ex(s,t.toTimestamp())}function Dr(s){return Mt(!!s),ft.fromTimestamp(function(r){const a=Wn(r);return new Yt(a.seconds,a.nanos)}(s))}function ig(s,t){return p0(s,t).canonicalString()}function p0(s,t){const r=function(i){return new Qt(["projects",i.projectId,"databases",i.database])}(s).child("documents");return t===void 0?r:r.child(t)}function C1(s){const t=Qt.fromString(s);return Mt(R1(t)),t}function Tx(s,t){return ig(s.databaseId,t.path)}function rc(s,t){const r=C1(t);if(r.get(1)!==s.databaseId.projectId)throw new Ke(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+s.databaseId.projectId);if(r.get(3)!==s.databaseId.database)throw new Ke(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+s.databaseId.database);return new mt(T1(r))}function E1(s,t){return ig(s.databaseId,t)}function kD(s){const t=C1(s);return t.length===4?Qt.emptyPath():T1(t)}function f0(s){return new Qt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function T1(s){return Mt(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function Nj(s,t,r){return{name:Tx(s,t),fields:r.value.mapValue.fields}}function ID(s,t){return"found"in t?function(a,i){Mt(!!i.found),i.found.name,i.found.updateTime;const l=rc(a,i.found.name),o=Dr(i.found.updateTime),c=i.found.createTime?Dr(i.found.createTime):ft.min(),d=new cr({mapValue:{fields:i.found.fields}});return Rs.newFoundDocument(l,o,c,d)}(s,t):"missing"in t?function(a,i){Mt(!!i.missing),Mt(!!i.readTime);const l=rc(a,i.missing),o=Dr(i.readTime);return Rs.newNoDocument(l,o)}(s,t):pt()}function PD(s,t){let r;if("targetChange"in t){t.targetChange;const a=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:pt()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],l=function(h,g){return h.useProto3Json?(Mt(g===void 0||typeof g=="string"),Gs.fromBase64String(g||"")):(Mt(g===void 0||g instanceof Buffer||g instanceof Uint8Array),Gs.fromUint8Array(g||new Uint8Array))}(s,t.targetChange.resumeToken),o=t.targetChange.cause,c=o&&function(h){const g=h.code===void 0?Ee.UNKNOWN:k1(h.code);return new Ke(g,h.message||"")}(o);r=new P1(a,i,l,c||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const i=rc(s,a.document.name),l=Dr(a.document.updateTime),o=a.document.createTime?Dr(a.document.createTime):ft.min(),c=new cr({mapValue:{fields:a.document.fields}}),d=Rs.newFoundDocument(i,l,o,c),h=a.targetIds||[],g=a.removedTargetIds||[];r=new Ru(h,g,d.key,d)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const i=rc(s,a.document),l=a.readTime?Dr(a.readTime):ft.min(),o=Rs.newNoDocument(i,l),c=a.removedTargetIds||[];r=new Ru([],c,o.key,o)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const i=rc(s,a.document),l=a.removedTargetIds||[];r=new Ru([],l,i,null)}else{if(!("filter"in t))return pt();{t.filter;const a=t.filter;a.targetId;const{count:i=0,unchangedNames:l}=a,o=new fD(i,l),c=a.targetId;r=new I1(c,o)}}return r}function _1(s,t){let r;if(t instanceof od)r={update:Nj(s,t.key,t.value)};else if(t instanceof Sm)r={delete:Tx(s,t.key)};else if(t instanceof si)r={update:Nj(s,t.key,t.data),updateMask:MD(t.fieldMask)};else{if(!(t instanceof N1))return pt();r={verify:Tx(s,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(a=>function(l,o){const c=o.transform;if(c instanceof Lc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Oc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Vc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof zc)return{fieldPath:o.field.canonicalString(),increment:c.Ie};throw pt()}(0,a))),t.precondition.isNone||(r.currentDocument=function(i,l){return l.updateTime!==void 0?{updateTime:wD(i,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:pt()}(s,t.precondition)),r}function SD(s,t){return s&&s.length>0?(Mt(t!==void 0),s.map(r=>function(i,l){let o=i.updateTime?Dr(i.updateTime):Dr(l);return o.isEqual(ft.min())&&(o=Dr(l)),new uD(o,i.transformResults||[])}(r,t))):[]}function CD(s,t){return{documents:[E1(s,t.path)]}}function ED(s,t){const r={structuredQuery:{}},a=t.path;let i;t.collectionGroup!==null?(i=a,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=a.popLast(),r.structuredQuery.from=[{collectionId:a.lastSegment()}]),r.parent=E1(s,i);const l=function(h){if(h.length!==0)return A1(ua.create(h,"and"))}(t.filters);l&&(r.structuredQuery.where=l);const o=function(h){if(h.length!==0)return h.map(g=>function(k){return{field:ro(k.field),direction:DD(k.dir)}}(g))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);const c=h0(s,t.limit);return c!==null&&(r.structuredQuery.limit=c),t.startAt&&(r.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ht:r,parent:i}}function TD(s){let t=kD(s.parent);const r=s.structuredQuery,a=r.from?r.from.length:0;let i=null;if(a>0){Mt(a===1);const g=r.from[0];g.allDescendants?i=g.collectionId:t=t.child(g.collectionId)}let l=[];r.where&&(l=function(N){const k=D1(N);return k instanceof ua&&r1(k)?k.getFilters():[k]}(r.where));let o=[];r.orderBy&&(o=function(N){return N.map(k=>function(y){return new Mc(ao(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(k))}(r.orderBy));let c=null;r.limit&&(c=function(N){let k;return k=typeof N=="object"?N.value:N,id(k)?null:k}(r.limit));let d=null;r.startAt&&(d=function(N){const k=!!N.before,E=N.values||[];return new Sx(E,k)}(r.startAt));let h=null;return r.endAt&&(h=function(N){const k=!N.before,E=N.values||[];return new Sx(E,k)}(r.endAt)),Z8(t,i,o,l,c,"F",d,h)}function _D(s,t){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pt()}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function D1(s){return s.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const a=ao(r.unaryFilter.field);return ks.create(a,"==",{doubleValue:NaN});case"IS_NULL":const i=ao(r.unaryFilter.field);return ks.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ao(r.unaryFilter.field);return ks.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ao(r.unaryFilter.field);return ks.create(o,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}(s):s.fieldFilter!==void 0?function(r){return ks.create(ao(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(r.fieldFilter.op),r.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(r){return ua.create(r.compositeFilter.filters.map(a=>D1(a)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pt()}}(r.compositeFilter.op))}(s):pt()}function DD(s){return bD[s]}function AD(s){return vD[s]}function RD(s){return jD[s]}function ro(s){return{fieldPath:s.canonicalString()}}function ao(s){return Us.fromServerFormat(s.fieldPath)}function A1(s){return s instanceof ks?function(r){if(r.op==="=="){if(cj(r.value))return{unaryFilter:{field:ro(r.field),op:"IS_NAN"}};if(lj(r.value))return{unaryFilter:{field:ro(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(cj(r.value))return{unaryFilter:{field:ro(r.field),op:"IS_NOT_NAN"}};if(lj(r.value))return{unaryFilter:{field:ro(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(r.field),op:AD(r.op),value:r.value}}}(s):s instanceof ua?function(r){const a=r.getFilters().map(i=>A1(i));return a.length===1?a[0]:{compositeFilter:{op:RD(r.op),filters:a}}}(s):pt()}function MD(s){const t=[];return s.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function R1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t,r,a,i,l=ft.min(),o=ft.min(),c=Gs.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=r,this.purpose=a,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(t){return new Pn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new Pn(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(t){this.Tt=t}}function OD(s){const t=TD({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Cx(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.Tn=new zD}addToCollectionParentIndex(t,r){return this.Tn.add(r),Ae.resolve()}getCollectionParents(t,r){return Ae.resolve(this.Tn.getEntries(r))}addFieldIndex(t,r){return Ae.resolve()}deleteFieldIndex(t,r){return Ae.resolve()}deleteAllFieldIndexes(t){return Ae.resolve()}createTargetIndexes(t,r){return Ae.resolve()}getDocumentsMatchingTarget(t,r){return Ae.resolve(null)}getIndexType(t,r){return Ae.resolve(0)}getFieldIndexes(t,r){return Ae.resolve([])}getNextCollectionGroupToUpdate(t){return Ae.resolve(null)}getMinOffset(t,r){return Ae.resolve($n.min())}getMinOffsetFromCollectionGroup(t,r){return Ae.resolve($n.min())}updateCollectionGroup(t,r,a){return Ae.resolve()}updateIndexEntries(t,r){return Ae.resolve()}}class zD{constructor(){this.index={}}add(t){const r=t.lastSegment(),a=t.popLast(),i=this.index[r]||new Cs(Qt.comparator),l=!i.has(a);return this.index[r]=i.add(a),l}has(t){const r=t.lastSegment(),a=t.popLast(),i=this.index[r];return i&&i.has(a)}getEntries(t){return(this.index[t]||new Cs(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},M1=41943040;class fr{static withCacheSize(t){return new fr(t,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr.DEFAULT_COLLECTION_PERCENTILE=10,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fr.DEFAULT=new fr(M1,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fr.DISABLED=new fr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new Ho(0)}static Kn(){return new Ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj="LruGarbageCollector",BD=1048576;function Ij([s,t],[r,a]){const i=kt(s,r);return i===0?kt(t,a):i}class FD{constructor(t){this.Hn=t,this.buffer=new Cs(Ij),this.Jn=0}Yn(){return++this.Jn}Zn(t){const r=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();Ij(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class UD{constructor(t,r,a){this.garbageCollector=t,this.asyncQueue=r,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Ze(kj,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){nl(r)?Ze(kj,"Ignoring IndexedDB error during garbage collection: ",r):await al(r)}await this.er(3e5)})}}class $D{constructor(t,r){this.tr=t,this.params=r}calculateTargetCount(t,r){return this.tr.nr(t).next(a=>Math.floor(r/100*a))}nthSequenceNumber(t,r){if(r===0)return Ae.resolve(vm.ae);const a=new FD(r);return this.tr.forEachTarget(t,i=>a.Zn(i.sequenceNumber)).next(()=>this.tr.rr(t,i=>a.Zn(i))).next(()=>a.maxValue)}removeTargets(t,r,a){return this.tr.removeTargets(t,r,a)}removeOrphanedDocuments(t,r){return this.tr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),Ae.resolve(wj)):this.getCacheSize(t).next(a=>a<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wj):this.ir(t,r))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,r){let a,i,l,o,c,d,h;const g=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),i=this.params.maximumSequenceNumbersToCollect):i=N,o=Date.now(),this.nthSequenceNumber(t,i))).next(N=>(a=N,c=Date.now(),this.removeTargets(t,a,r))).next(N=>(l=N,d=Date.now(),this.removeOrphanedDocuments(t,a))).next(N=>(h=Date.now(),to()<=_t.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-g}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${l} targets in `+(d-c)+`ms
	Removed ${N} documents in `+(h-d)+`ms
Total Duration: ${h-g}ms`),Ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:N})))}}function WD(s,t){return new $D(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.changes=new Ui(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,Rs.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const a=this.changes.get(r);return a!==void 0?Ae.resolve(a):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(t,r,a,i){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=i}getDocument(t,r){let a=null;return this.documentOverlayCache.getOverlay(t,r).next(i=>(a=i,this.remoteDocumentCache.getEntry(t,r))).next(i=>(a!==null&&sc(a.mutation,i,Tr.empty(),Yt.now()),i))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.getLocalViewOfDocuments(t,a,Dt()).next(()=>a))}getLocalViewOfDocuments(t,r,a=Dt()){const i=gi();return this.populateOverlays(t,i,r).next(()=>this.computeViews(t,r,i,a).next(l=>{let o=Bl();return l.forEach((c,d)=>{o=o.insert(c,d.overlayedDocument)}),o}))}getOverlayedDocuments(t,r){const a=gi();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,Dt()))}populateOverlays(t,r,a){const i=[];return a.forEach(l=>{r.has(l)||i.push(l)}),this.documentOverlayCache.getOverlays(t,i).next(l=>{l.forEach((o,c)=>{r.set(o,c)})})}computeViews(t,r,a,i){let l=tn();const o=tc(),c=function(){return tc()}();return r.forEach((d,h)=>{const g=a.get(h.key);i.has(h.key)&&(g===void 0||g.mutation instanceof si)?l=l.insert(h.key,h):g!==void 0?(o.set(h.key,g.mutation.getFieldMask()),sc(g.mutation,h,g.mutation.getFieldMask(),Yt.now())):o.set(h.key,Tr.empty())}),this.recalculateAndSaveOverlays(t,l).next(d=>(d.forEach((h,g)=>o.set(h,g)),r.forEach((h,g)=>{var N;return c.set(h,new HD(g,(N=o.get(h))!==null&&N!==void 0?N:null))}),c))}recalculateAndSaveOverlays(t,r){const a=tc();let i=new hs((o,c)=>o-c),l=Dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(o=>{for(const c of o)c.keys().forEach(d=>{const h=r.get(d);if(h===null)return;let g=a.get(d)||Tr.empty();g=c.applyToLocalView(h,g),a.set(d,g);const N=(i.get(c.batchId)||Dt()).add(d);i=i.insert(c.batchId,N)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,g=d.value,N=x1();g.forEach(k=>{if(!l.has(k)){const E=v1(r.get(k),a.get(k));E!==null&&N.set(k,E),l=l.add(k)}}),o.push(this.documentOverlayCache.saveOverlays(t,h,N))}return Ae.waitFor(o)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.recalculateAndSaveOverlays(t,a))}getDocumentsMatchingQuery(t,r,a,i){return function(o){return mt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):o1(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,a,i):this.getDocumentsMatchingCollectionQuery(t,r,a,i)}getNextDocuments(t,r,a,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,a,i).next(l=>{const o=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,a.largestBatchId,i-l.size):Ae.resolve(gi());let c=_c,d=l;return o.next(h=>Ae.forEach(h,(g,N)=>(c<N.largestBatchId&&(c=N.largestBatchId),l.get(g)?Ae.resolve():this.remoteDocumentCache.getEntry(t,g).next(k=>{d=d.insert(g,k)}))).next(()=>this.populateOverlays(t,h,l)).next(()=>this.computeViews(t,d,h,Dt())).next(g=>({batchId:c,changes:u1(g)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new mt(r)).next(a=>{let i=Bl();return a.isFoundDocument()&&(i=i.insert(a.key,a)),i})}getDocumentsMatchingCollectionGroupQuery(t,r,a,i){const l=r.collectionGroup;let o=Bl();return this.indexManager.getCollectionParents(t,l).next(c=>Ae.forEach(c,d=>{const h=function(N,k){return new il(k,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt)}(r,d.child(l));return this.getDocumentsMatchingCollectionQuery(t,h,a,i).next(g=>{g.forEach((N,k)=>{o=o.insert(N,k)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,r,a,i){let l;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,a.largestBatchId).next(o=>(l=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,a,l,i))).next(o=>{l.forEach((d,h)=>{const g=h.getKey();o.get(g)===null&&(o=o.insert(g,Rs.newInvalidDocument(g)))});let c=Bl();return o.forEach((d,h)=>{const g=l.get(d);g!==void 0&&sc(g.mutation,h,Tr.empty(),Yt.now()),km(r,h)&&(c=c.insert(d,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,r){return Ae.resolve(this.dr.get(r))}saveBundleMetadata(t,r){return this.dr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Dr(i.createTime)}}(r)),Ae.resolve()}getNamedQuery(t,r){return Ae.resolve(this.Ar.get(r))}saveNamedQuery(t,r){return this.Ar.set(r.name,function(i){return{name:i.name,query:OD(i.bundledQuery),readTime:Dr(i.readTime)}}(r)),Ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this.overlays=new hs(mt.comparator),this.Rr=new Map}getOverlay(t,r){return Ae.resolve(this.overlays.get(r))}getOverlays(t,r){const a=gi();return Ae.forEach(r,i=>this.getOverlay(t,i).next(l=>{l!==null&&a.set(i,l)})).next(()=>a)}saveOverlays(t,r,a){return a.forEach((i,l)=>{this.Et(t,r,l)}),Ae.resolve()}removeOverlaysForBatchId(t,r,a){const i=this.Rr.get(a);return i!==void 0&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(a)),Ae.resolve()}getOverlaysForCollection(t,r,a){const i=gi(),l=r.length+1,o=new mt(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===l&&d.largestBatchId>a&&i.set(d.getKey(),d)}return Ae.resolve(i)}getOverlaysForCollectionGroup(t,r,a,i){let l=new hs((h,g)=>h-g);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>a){let g=l.get(h.largestBatchId);g===null&&(g=gi(),l=l.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const c=gi(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((h,g)=>c.set(h,g)),!(c.size()>=i)););return Ae.resolve(c)}Et(t,r,a){const i=this.overlays.get(a.key);if(i!==null){const o=this.Rr.get(i.largestBatchId).delete(a.key);this.Rr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(a.key,new pD(r,a));let l=this.Rr.get(r);l===void 0&&(l=Dt(),this.Rr.set(r,l)),this.Rr.set(r,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(){this.sessionToken=Gs.EMPTY_BYTE_STRING}getSessionToken(t){return Ae.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.Vr=new Cs(_s.mr),this.gr=new Cs(_s.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,r){const a=new _s(t,r);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(t,r){t.forEach(a=>this.addReference(a,r))}removeReference(t,r){this.wr(new _s(t,r))}Sr(t,r){t.forEach(a=>this.removeReference(a,r))}br(t){const r=new mt(new Qt([])),a=new _s(r,t),i=new _s(r,t+1),l=[];return this.gr.forEachInRange([a,i],o=>{this.wr(o),l.push(o.key)}),l}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const r=new mt(new Qt([])),a=new _s(r,t),i=new _s(r,t+1);let l=Dt();return this.gr.forEachInRange([a,i],o=>{l=l.add(o.key)}),l}containsKey(t){const r=new _s(t,0),a=this.Vr.firstAfterOrEqual(r);return a!==null&&t.isEqual(a.key)}}class _s{constructor(t,r){this.key=t,this.Cr=r}static mr(t,r){return mt.comparator(t.key,r.key)||kt(t.Cr,r.Cr)}static pr(t,r){return kt(t.Cr,r.Cr)||mt.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Fr=1,this.Mr=new Cs(_s.mr)}checkEmpty(t){return Ae.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,a,i){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new hD(l,r,a,i);this.mutationQueue.push(o);for(const c of i)this.Mr=this.Mr.add(new _s(c.key,l)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return Ae.resolve(o)}lookupMutationBatch(t,r){return Ae.resolve(this.Or(r))}getNextMutationBatchAfterBatchId(t,r){const a=r+1,i=this.Nr(a),l=i<0?0:i;return Ae.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Ae.resolve(this.mutationQueue.length===0?Jf:this.Fr-1)}getAllMutationBatches(t){return Ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const a=new _s(r,0),i=new _s(r,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([a,i],o=>{const c=this.Or(o.Cr);l.push(c)}),Ae.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,r){let a=new Cs(kt);return r.forEach(i=>{const l=new _s(i,0),o=new _s(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,o],c=>{a=a.add(c.Cr)})}),Ae.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(t,r){const a=r.path,i=a.length+1;let l=a;mt.isDocumentKey(l)||(l=l.child(""));const o=new _s(new mt(l),0);let c=new Cs(kt);return this.Mr.forEachWhile(d=>{const h=d.key.path;return!!a.isPrefixOf(h)&&(h.length===i&&(c=c.add(d.Cr)),!0)},o),Ae.resolve(this.Br(c))}Br(t){const r=[];return t.forEach(a=>{const i=this.Or(a);i!==null&&r.push(i)}),r}removeMutationBatch(t,r){Mt(this.Lr(r.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return Ae.forEach(r.mutations,i=>{const l=new _s(i.key,r.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Mr=a})}qn(t){}containsKey(t,r){const a=new _s(r,0),i=this.Mr.firstAfterOrEqual(a);return Ae.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ae.resolve()}Lr(t,r){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const r=this.Nr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(t){this.kr=t,this.docs=function(){return new hs(mt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const a=r.key,i=this.docs.get(a),l=i?i.size:0,o=this.kr(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:o}),this.size+=o-l,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const a=this.docs.get(r);return Ae.resolve(a?a.document.mutableCopy():Rs.newInvalidDocument(r))}getEntries(t,r){let a=tn();return r.forEach(i=>{const l=this.docs.get(i);a=a.insert(i,l?l.document.mutableCopy():Rs.newInvalidDocument(i))}),Ae.resolve(a)}getDocumentsMatchingQuery(t,r,a,i){let l=tn();const o=r.path,c=new mt(o.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:g}}=d.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||D8(_8(g),a)<=0||(i.has(g.key)||km(r,g))&&(l=l.insert(g.key,g.mutableCopy()))}return Ae.resolve(l)}getAllFromCollectionGroup(t,r,a,i){pt()}qr(t,r){return Ae.forEach(this.docs,a=>r(a))}newChangeBuffer(t){return new ZD(this)}getSize(t){return Ae.resolve(this.size)}}class ZD extends qD{constructor(t){super(),this.Ir=t}applyChanges(t){const r=[];return this.changes.forEach((a,i)=>{i.isValidDocument()?r.push(this.Ir.addEntry(t,i)):this.Ir.removeEntry(a)}),Ae.waitFor(r)}getFromCache(t,r){return this.Ir.getEntry(t,r)}getAllFromCache(t,r){return this.Ir.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(t){this.persistence=t,this.Qr=new Ui(r=>tg(r),sg),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.$r=0,this.Ur=new og,this.targetCount=0,this.Kr=Ho.Un()}forEachTarget(t,r){return this.Qr.forEach((a,i)=>r(i)),Ae.resolve()}getLastRemoteSnapshotVersion(t){return Ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ae.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),Ae.resolve(this.highestTargetId)}setTargetsMetadata(t,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.$r&&(this.$r=r),Ae.resolve()}zn(t){this.Qr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.Kr=new Ho(r),this.highestTargetId=r),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,r){return this.zn(r),this.targetCount+=1,Ae.resolve()}updateTargetData(t,r){return this.zn(r),Ae.resolve()}removeTargetData(t,r){return this.Qr.delete(r.target),this.Ur.br(r.targetId),this.targetCount-=1,Ae.resolve()}removeTargets(t,r,a){let i=0;const l=[];return this.Qr.forEach((o,c)=>{c.sequenceNumber<=r&&a.get(c.targetId)===null&&(this.Qr.delete(o),l.push(this.removeMatchingKeysForTargetId(t,c.targetId)),i++)}),Ae.waitFor(l).next(()=>i)}getTargetCount(t){return Ae.resolve(this.targetCount)}getTargetData(t,r){const a=this.Qr.get(r)||null;return Ae.resolve(a)}addMatchingKeys(t,r,a){return this.Ur.yr(r,a),Ae.resolve()}removeMatchingKeys(t,r,a){this.Ur.Sr(r,a);const i=this.persistence.referenceDelegate,l=[];return i&&r.forEach(o=>{l.push(i.markPotentiallyOrphaned(t,o))}),Ae.waitFor(l)}removeMatchingKeysForTargetId(t,r){return this.Ur.br(r),Ae.resolve()}getMatchingKeysForTargetId(t,r){const a=this.Ur.vr(r);return Ae.resolve(a)}containsKey(t,r){return Ae.resolve(this.Ur.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(t,r){this.Wr={},this.overlays={},this.Gr=new vm(0),this.zr=!1,this.zr=!0,this.jr=new YD,this.referenceDelegate=t(this),this.Hr=new eA(this),this.indexManager=new VD,this.remoteDocumentCache=function(i){return new JD(i)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new LD(r),this.Yr=new QD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new KD,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let a=this.Wr[t.toKey()];return a||(a=new XD(r,this.referenceDelegate),this.Wr[t.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,r,a){Ze("MemoryPersistence","Starting transaction:",t);const i=new tA(this.Gr.next());return this.referenceDelegate.Zr(),a(i).next(l=>this.referenceDelegate.Xr(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}ei(t,r){return Ae.or(Object.values(this.Wr).map(a=>()=>a.containsKey(t,r)))}}class tA extends R8{constructor(t){super(),this.currentSequenceNumber=t}}class lg{constructor(t){this.persistence=t,this.ti=new og,this.ni=null}static ri(t){return new lg(t)}get ii(){if(this.ni)return this.ni;throw pt()}addReference(t,r,a){return this.ti.addReference(a,r),this.ii.delete(a.toString()),Ae.resolve()}removeReference(t,r,a){return this.ti.removeReference(a,r),this.ii.add(a.toString()),Ae.resolve()}markPotentiallyOrphaned(t,r){return this.ii.add(r.toString()),Ae.resolve()}removeTarget(t,r){this.ti.br(r.targetId).forEach(i=>this.ii.add(i.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,r.targetId).next(i=>{i.forEach(l=>this.ii.add(l.toString()))}).next(()=>a.removeTargetData(t,r))}Zr(){this.ni=new Set}Xr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ae.forEach(this.ii,a=>{const i=mt.fromPath(a);return this.si(t,i).next(l=>{l||r.removeEntry(i,ft.min())})}).next(()=>(this.ni=null,r.apply(t)))}updateLimboDocument(t,r){return this.si(t,r).next(a=>{a?this.ii.delete(r.toString()):this.ii.add(r.toString())})}Jr(t){return 0}si(t,r){return Ae.or([()=>Ae.resolve(this.ti.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.ei(t,r)])}}class _x{constructor(t,r){this.persistence=t,this.oi=new Ui(a=>O8(a.path),(a,i)=>a.isEqual(i)),this.garbageCollector=WD(this,r)}static ri(t,r){return new _x(t,r)}Zr(){}Xr(t){return Ae.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}nr(t){const r=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(a=>r.next(i=>a+i))}sr(t){let r=0;return this.rr(t,a=>{r++}).next(()=>r)}rr(t,r){return Ae.forEach(this.oi,(a,i)=>this.ar(t,a,i).next(l=>l?Ae.resolve():r(i)))}removeTargets(t,r,a){return this.persistence.getTargetCache().removeTargets(t,r,a)}removeOrphanedDocuments(t,r){let a=0;const i=this.persistence.getRemoteDocumentCache(),l=i.newChangeBuffer();return i.qr(t,o=>this.ar(t,o,r).next(c=>{c||(a++,l.removeEntry(o,ft.min()))})).next(()=>l.apply(t)).next(()=>a)}markPotentiallyOrphaned(t,r){return this.oi.set(r,t.currentSequenceNumber),Ae.resolve()}removeTarget(t,r){const a=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,r,a){return this.oi.set(a,t.currentSequenceNumber),Ae.resolve()}removeReference(t,r,a){return this.oi.set(a,t.currentSequenceNumber),Ae.resolve()}updateLimboDocument(t,r){return this.oi.set(r,t.currentSequenceNumber),Ae.resolve()}Jr(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=_u(t.data.value)),r}ar(t,r,a){return Ae.or([()=>this.persistence.ei(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const i=this.oi.get(r);return Ae.resolve(i!==void 0&&i>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(t,r,a,i){this.targetId=t,this.fromCache=r,this.Hi=a,this.Ji=i}static Yi(t,r){let a=Dt(),i=Dt();for(const l of r.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new cg(t,r.fromCache,a,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return t_()?8:M8(ar())>0?6:4}()}initialize(t,r){this.ns=t,this.indexManager=r,this.Zi=!0}getDocumentsMatchingQuery(t,r,a,i){const l={result:null};return this.rs(t,r).next(o=>{l.result=o}).next(()=>{if(!l.result)return this.ss(t,r,i,a).next(o=>{l.result=o})}).next(()=>{if(l.result)return;const o=new sA;return this._s(t,r,o).next(c=>{if(l.result=c,this.Xi)return this.us(t,r,o,c.size)})}).next(()=>l.result)}us(t,r,a,i){return a.documentReadCount<this.es?(to()<=_t.DEBUG&&Ze("QueryEngine","SDK will not create cache indexes for query:",so(r),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Ae.resolve()):(to()<=_t.DEBUG&&Ze("QueryEngine","Query:",so(r),"scans",a.documentReadCount,"local documents and returns",i,"documents as results."),a.documentReadCount>this.ts*i?(to()<=_t.DEBUG&&Ze("QueryEngine","The SDK decides to create cache indexes for query:",so(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,wa(r))):Ae.resolve())}rs(t,r){if(mj(r))return Ae.resolve(null);let a=wa(r);return this.indexManager.getIndexType(t,a).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=Cx(r,null,"F"),a=wa(r)),this.indexManager.getDocumentsMatchingTarget(t,a).next(l=>{const o=Dt(...l);return this.ns.getDocuments(t,o).next(c=>this.indexManager.getMinOffset(t,a).next(d=>{const h=this.cs(r,c);return this.ls(r,h,o,d.readTime)?this.rs(t,Cx(r,null,"F")):this.hs(t,h,r,d)}))})))}ss(t,r,a,i){return mj(r)||i.isEqual(ft.min())?Ae.resolve(null):this.ns.getDocuments(t,a).next(l=>{const o=this.cs(r,l);return this.ls(r,o,a,i)?Ae.resolve(null):(to()<=_t.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),so(r)),this.hs(t,o,r,T8(i,_c)).next(c=>c))})}cs(t,r){let a=new Cs(c1(t));return r.forEach((i,l)=>{km(t,l)&&(a=a.add(l))}),a}ls(t,r,a,i){if(t.limit===null)return!1;if(a.size!==r.size)return!0;const l=t.limitType==="F"?r.last():r.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}_s(t,r,a){return to()<=_t.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",so(r)),this.ns.getDocumentsMatchingQuery(t,r,$n.min(),a)}hs(t,r,a,i){return this.ns.getDocumentsMatchingQuery(t,a,i).next(l=>(r.forEach(o=>{l=l.insert(o.key,o)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="LocalStore",aA=3e8;class nA{constructor(t,r,a,i){this.persistence=t,this.Ps=r,this.serializer=i,this.Ts=new hs(kt),this.Is=new Ui(l=>tg(l),sg),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(a)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new GD(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ts))}}function iA(s,t,r,a){return new nA(s,t,r,a)}async function O1(s,t){const r=vt(s);return await r.persistence.runTransaction("Handle user change","readonly",a=>{let i;return r.mutationQueue.getAllMutationBatches(a).next(l=>(i=l,r.As(t),r.mutationQueue.getAllMutationBatches(a))).next(l=>{const o=[],c=[];let d=Dt();for(const h of i){o.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}for(const h of l){c.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}return r.localDocuments.getDocuments(a,d).next(h=>({Rs:h,removedBatchIds:o,addedBatchIds:c}))})})}function oA(s,t){const r=vt(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const i=t.batch.keys(),l=r.ds.newChangeBuffer({trackRemovals:!0});return function(c,d,h,g){const N=h.batch,k=N.keys();let E=Ae.resolve();return k.forEach(y=>{E=E.next(()=>g.getEntry(d,y)).next(O=>{const _=h.docVersions.get(y);Mt(_!==null),O.version.compareTo(_)<0&&(N.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),g.addEntry(O)))})}),E.next(()=>c.mutationQueue.removeMutationBatch(d,N))}(r,a,t,l).next(()=>l.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,i,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(c){let d=Dt();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d}(t))).next(()=>r.localDocuments.getDocuments(a,i))})}function V1(s){const t=vt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Hr.getLastRemoteSnapshotVersion(r))}function lA(s,t){const r=vt(s),a=t.snapshotVersion;let i=r.Ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const o=r.ds.newChangeBuffer({trackRemovals:!0});i=r.Ts;const c=[];t.targetChanges.forEach((g,N)=>{const k=i.get(N);if(!k)return;c.push(r.Hr.removeMatchingKeys(l,g.removedDocuments,N).next(()=>r.Hr.addMatchingKeys(l,g.addedDocuments,N)));let E=k.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(N)!==null?E=E.withResumeToken(Gs.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):g.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(g.resumeToken,a)),i=i.insert(N,E),function(O,_,A){return O.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=aA?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(k,E,g)&&c.push(r.Hr.updateTargetData(l,E))});let d=tn(),h=Dt();if(t.documentUpdates.forEach(g=>{t.resolvedLimboDocuments.has(g)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(l,g))}),c.push(cA(l,o,t.documentUpdates).next(g=>{d=g.Vs,h=g.fs})),!a.isEqual(ft.min())){const g=r.Hr.getLastRemoteSnapshotVersion(l).next(N=>r.Hr.setTargetsMetadata(l,l.currentSequenceNumber,a));c.push(g)}return Ae.waitFor(c).next(()=>o.apply(l)).next(()=>r.localDocuments.getLocalViewOfDocuments(l,d,h)).next(()=>d)}).then(l=>(r.Ts=i,l))}function cA(s,t,r){let a=Dt(),i=Dt();return r.forEach(l=>a=a.add(l)),t.getEntries(s,a).next(l=>{let o=tn();return r.forEach((c,d)=>{const h=l.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(ft.min())?(t.removeEntry(c,d.readTime),o=o.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(d),o=o.insert(c,d)):Ze(dg,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)}),{Vs:o,fs:i}})}function dA(s,t){const r=vt(s);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(t===void 0&&(t=Jf),r.mutationQueue.getNextMutationBatchAfterBatchId(a,t)))}function uA(s,t){const r=vt(s);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let i;return r.Hr.getTargetData(a,t).next(l=>l?(i=l,Ae.resolve(i)):r.Hr.allocateTargetId(a).next(o=>(i=new Pn(t,o,"TargetPurposeListen",a.currentSequenceNumber),r.Hr.addTargetData(a,i).next(()=>i))))}).then(a=>{const i=r.Ts.get(a.targetId);return(i===null||a.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ts=r.Ts.insert(a.targetId,a),r.Is.set(t,a.targetId)),a})}async function g0(s,t,r){const a=vt(s),i=a.Ts.get(t),l=r?"readwrite":"readwrite-primary";try{r||await a.persistence.runTransaction("Release target",l,o=>a.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!nl(o))throw o;Ze(dg,`Failed to update sequence numbers for target ${t}: ${o}`)}a.Ts=a.Ts.remove(t),a.Is.delete(i.target)}function Pj(s,t,r){const a=vt(s);let i=ft.min(),l=Dt();return a.persistence.runTransaction("Execute query","readwrite",o=>function(d,h,g){const N=vt(d),k=N.Is.get(g);return k!==void 0?Ae.resolve(N.Ts.get(k)):N.Hr.getTargetData(h,g)}(a,o,wa(t)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(o,c.targetId).next(d=>{l=d})}).next(()=>a.Ps.getDocumentsMatchingQuery(o,t,r?i:ft.min(),r?l:Dt())).next(c=>(xA(a,tD(t),c),{documents:c,gs:l})))}function xA(s,t,r){let a=s.Es.get(t)||ft.min();r.forEach((i,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)}),s.Es.set(t,a)}class Sj{constructor(){this.activeTargetIds=oD()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class mA{constructor(){this.ho=new Sj,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,a){}addLocalQueryTarget(t,r=!0){return r&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,r,a){this.Po[t]=r}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Sj,Promise.resolve()}handleUserChange(t,r,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="ConnectivityMonitor";class Ej{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Ze(Cj,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Ze(Cj,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lu=null;function y0(){return lu===null?lu=function(){return 268435456+Math.round(2147483648*Math.random())}():lu++,"0x"+lu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh="RestConnection",pA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fA{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=r+"://"+t.host,this.yo=`projects/${a}/databases/${i}`,this.wo=this.databaseId.database===Ix?`project_id=${a}`:`project_id=${a}&database_id=${i}`}So(t,r,a,i,l){const o=y0(),c=this.bo(t,r.toUriEncodedString());Ze(Rh,`Sending RPC '${t}' ${o}:`,c,a);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,i,l),this.vo(t,c,d,a).then(h=>(Ze(Rh,`Received RPC '${t}' ${o}: `,h),h),h=>{throw Uo(Rh,`RPC '${t}' ${o} failed with error: `,h,"url: ",c,"request:",a),h})}Co(t,r,a,i,l,o){return this.So(t,r,a,i,l)}Do(t,r,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,l)=>t[l]=i),a&&a.headers.forEach((i,l)=>t[l]=i)}bo(t,r){const a=pA[t];return`${this.po}/v1/${r}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="WebChannelConnection";class yA extends fA{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,r,a,i){const l=y0();return new Promise((o,c)=>{const d=new L4;d.setWithCredentials(!0),d.listenOnce(O4.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Tu.NO_ERROR:const g=d.getResponseJson();Ze(Js,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(g)),o(g);break;case Tu.TIMEOUT:Ze(Js,`RPC '${t}' ${l} timed out`),c(new Ke(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case Tu.HTTP_ERROR:const N=d.getStatus();if(Ze(Js,`RPC '${t}' ${l} failed with status:`,N,"response text:",d.getResponseText()),N>0){let k=d.getResponseJson();Array.isArray(k)&&(k=k[0]);const E=k==null?void 0:k.error;if(E&&E.status&&E.message){const y=function(_){const A=_.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(A)>=0?A:Ee.UNKNOWN}(E.status);c(new Ke(y,E.message))}else c(new Ke(Ee.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Ke(Ee.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{Ze(Js,`RPC '${t}' ${l} completed.`)}});const h=JSON.stringify(i);Ze(Js,`RPC '${t}' ${l} sending request:`,i),d.send(r,"POST",h,a,15)})}Wo(t,r,a){const i=y0(),l=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=B4(),c=z4(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,r,a),d.encodeInitMessageHeaders=!0;const g=l.join("");Ze(Js,`Creating RPC '${t}' stream ${i}: ${g}`,d);const N=o.createWebChannel(g,d);let k=!1,E=!1;const y=new gA({Fo:_=>{E?Ze(Js,`Not sending because RPC '${t}' stream ${i} is closed:`,_):(k||(Ze(Js,`Opening RPC '${t}' stream ${i} transport.`),N.open(),k=!0),Ze(Js,`RPC '${t}' stream ${i} sending:`,_),N.send(_))},Mo:()=>N.close()}),O=(_,A,z)=>{_.listen(A,L=>{try{z(L)}catch(K){setTimeout(()=>{throw K},0)}})};return O(N,zl.EventType.OPEN,()=>{E||(Ze(Js,`RPC '${t}' stream ${i} transport opened.`),y.Qo())}),O(N,zl.EventType.CLOSE,()=>{E||(E=!0,Ze(Js,`RPC '${t}' stream ${i} transport closed`),y.Uo())}),O(N,zl.EventType.ERROR,_=>{E||(E=!0,Uo(Js,`RPC '${t}' stream ${i} transport errored:`,_),y.Uo(new Ke(Ee.UNAVAILABLE,"The operation could not be completed")))}),O(N,zl.EventType.MESSAGE,_=>{var A;if(!E){const z=_.data[0];Mt(!!z);const L=z,K=(L==null?void 0:L.error)||((A=L[0])===null||A===void 0?void 0:A.error);if(K){Ze(Js,`RPC '${t}' stream ${i} received error:`,K);const H=K.status;let G=function(q){const U=Ns[q];if(U!==void 0)return k1(U)}(H),R=K.message;G===void 0&&(G=Ee.INTERNAL,R="Unknown error status: "+H+" with message "+K.message),E=!0,y.Uo(new Ke(G,R)),N.close()}else Ze(Js,`RPC '${t}' stream ${i} received:`,z),y.Ko(z)}}),O(c,V4.STAT_EVENT,_=>{_.stat===o0.PROXY?Ze(Js,`RPC '${t}' stream ${i} detected buffering proxy`):_.stat===o0.NOPROXY&&Ze(Js,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.$o()},0),y}}function Mh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(s){return new ND(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(t,r,a=1e3,i=1.5,l=6e4){this.Ti=t,this.timerId=r,this.Go=a,this.zo=i,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const r=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),i=Math.max(0,r-a);i>0&&Ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj="PersistentStream";class z1{constructor(t,r,a,i,l,o,c,d){this.Ti=t,this.n_=a,this.r_=i,this.connection=l,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new ug(t,r)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,r){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():r&&r.code===Ee.RESOURCE_EXHAUSTED?(en(r.toString()),en("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):r&&r.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(r)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),r=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,i])=>{this.i_===r&&this.V_(a,i)},a=>{t(()=>{const i=new Ke(Ee.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(i)})})}V_(t,r){const a=this.R_(this.i_);this.stream=this.f_(t,r),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{a(()=>this.m_(i))}),this.stream.onMessage(i=>{a(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Ze(Tj,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return r=>{this.Ti.enqueueAndForget(()=>this.i_===t?r():(Ze(Tj,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bA extends z1{constructor(t,r,a,i,l,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,i,o),this.serializer=l}f_(t,r){return this.connection.Wo("Listen",t,r)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const r=PD(this.serializer,t),a=function(l){if(!("targetChange"in l))return ft.min();const o=l.targetChange;return o.targetIds&&o.targetIds.length?ft.min():o.readTime?Dr(o.readTime):ft.min()}(t);return this.listener.p_(r,a)}y_(t){const r={};r.database=f0(this.serializer),r.addTarget=function(l,o){let c;const d=o.target;if(c=x0(d)?{documents:CD(l,d)}:{query:ED(l,d).ht},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=S1(l,o.resumeToken);const h=h0(l,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(ft.min())>0){c.readTime=Ex(l,o.snapshotVersion.toTimestamp());const h=h0(l,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,t);const a=_D(this.serializer,t);a&&(r.labels=a),this.I_(r)}w_(t){const r={};r.database=f0(this.serializer),r.removeTarget=t,this.I_(r)}}class vA extends z1{constructor(t,r,a,i,l,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,i,o),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,r){return this.connection.Wo("Write",t,r)}g_(t){return Mt(!!t.streamToken),this.lastStreamToken=t.streamToken,Mt(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Mt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const r=SD(t.writeResults,t.commitTime),a=Dr(t.commitTime);return this.listener.v_(a,r)}C_(){const t={};t.database=f0(this.serializer),this.I_(t)}b_(t){const r={streamToken:this.lastStreamToken,writes:t.map(a=>_1(this.serializer,a))};this.I_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{}class NA extends jA{constructor(t,r,a,i){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=a,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Ke(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,r,a,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,o])=>this.connection.So(t,p0(r,a),i,l,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ke(Ee.UNKNOWN,l.toString())})}Co(t,r,a,i,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Co(t,p0(r,a),i,o,c,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ke(Ee.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class wA{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(en(r),this.N_=!1):Ze("OnlineStateTracker",r)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="RemoteStore";class kA{constructor(t,r,a,i,l){this.localStore=t,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(o=>{a.enqueueAndForget(async()=>{$i(this)&&(Ze(_i,"Restarting streams for network reachability change."),await async function(d){const h=vt(d);h.W_.add(4),await cd(h),h.j_.set("Unknown"),h.W_.delete(4),await Tm(h)}(this))})}),this.j_=new wA(a,i)}}async function Tm(s){if($i(s))for(const t of s.G_)await t(!0)}async function cd(s){for(const t of s.G_)await t(!1)}function B1(s,t){const r=vt(s);r.K_.has(t.targetId)||(r.K_.set(t.targetId,t),pg(r)?hg(r):ol(r).c_()&&mg(r,t))}function xg(s,t){const r=vt(s),a=ol(r);r.K_.delete(t),a.c_()&&F1(r,t),r.K_.size===0&&(a.c_()?a.P_():$i(r)&&r.j_.set("Unknown"))}function mg(s,t){if(s.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ft.min())>0){const r=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}ol(s).y_(t)}function F1(s,t){s.H_.Ne(t),ol(s).w_(t)}function hg(s){s.H_=new yD({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>s.K_.get(t)||null,it:()=>s.datastore.serializer.databaseId}),ol(s).start(),s.j_.B_()}function pg(s){return $i(s)&&!ol(s).u_()&&s.K_.size>0}function $i(s){return vt(s).W_.size===0}function U1(s){s.H_=void 0}async function IA(s){s.j_.set("Online")}async function PA(s){s.K_.forEach((t,r)=>{mg(s,t)})}async function SA(s,t){U1(s),pg(s)?(s.j_.q_(t),hg(s)):s.j_.set("Unknown")}async function CA(s,t,r){if(s.j_.set("Online"),t instanceof P1&&t.state===2&&t.cause)try{await async function(i,l){const o=l.cause;for(const c of l.targetIds)i.K_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.K_.delete(c),i.H_.removeTarget(c))}(s,t)}catch(a){Ze(_i,"Failed to remove targets %s: %s ",t.targetIds.join(","),a),await Dx(s,a)}else if(t instanceof Ru?s.H_.We(t):t instanceof I1?s.H_.Ze(t):s.H_.je(t),!r.isEqual(ft.min()))try{const a=await V1(s.localStore);r.compareTo(a)>=0&&await function(l,o){const c=l.H_.ot(o);return c.targetChanges.forEach((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const g=l.K_.get(h);g&&l.K_.set(h,g.withResumeToken(d.resumeToken,o))}}),c.targetMismatches.forEach((d,h)=>{const g=l.K_.get(d);if(!g)return;l.K_.set(d,g.withResumeToken(Gs.EMPTY_BYTE_STRING,g.snapshotVersion)),F1(l,d);const N=new Pn(g.target,d,h,g.sequenceNumber);mg(l,N)}),l.remoteSyncer.applyRemoteEvent(c)}(s,r)}catch(a){Ze(_i,"Failed to raise snapshot:",a),await Dx(s,a)}}async function Dx(s,t,r){if(!nl(t))throw t;s.W_.add(1),await cd(s),s.j_.set("Offline"),r||(r=()=>V1(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{Ze(_i,"Retrying IndexedDB access"),await r(),s.W_.delete(1),await Tm(s)})}function $1(s,t){return t().catch(r=>Dx(s,r,t))}async function _m(s){const t=vt(s),r=Gn(t);let a=t.U_.length>0?t.U_[t.U_.length-1].batchId:Jf;for(;EA(t);)try{const i=await dA(t.localStore,a);if(i===null){t.U_.length===0&&r.P_();break}a=i.batchId,TA(t,i)}catch(i){await Dx(t,i)}W1(t)&&q1(t)}function EA(s){return $i(s)&&s.U_.length<10}function TA(s,t){s.U_.push(t);const r=Gn(s);r.c_()&&r.S_&&r.b_(t.mutations)}function W1(s){return $i(s)&&!Gn(s).u_()&&s.U_.length>0}function q1(s){Gn(s).start()}async function _A(s){Gn(s).C_()}async function DA(s){const t=Gn(s);for(const r of s.U_)t.b_(r.mutations)}async function AA(s,t,r){const a=s.U_.shift(),i=ag.from(a,t,r);await $1(s,()=>s.remoteSyncer.applySuccessfulWrite(i)),await _m(s)}async function RA(s,t){t&&Gn(s).S_&&await async function(a,i){if(function(o){return w1(o)&&o!==Ee.ABORTED}(i.code)){const l=a.U_.shift();Gn(a).h_(),await $1(a,()=>a.remoteSyncer.rejectFailedWrite(l.batchId,i)),await _m(a)}}(s,t),W1(s)&&q1(s)}async function _j(s,t){const r=vt(s);r.asyncQueue.verifyOperationInProgress(),Ze(_i,"RemoteStore received new credentials");const a=$i(r);r.W_.add(3),await cd(r),a&&r.j_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.W_.delete(3),await Tm(r)}async function MA(s,t){const r=vt(s);t?(r.W_.delete(2),await Tm(r)):t||(r.W_.add(2),await cd(r),r.j_.set("Unknown"))}function ol(s){return s.J_||(s.J_=function(r,a,i){const l=vt(r);return l.M_(),new bA(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)}(s.datastore,s.asyncQueue,{xo:IA.bind(null,s),No:PA.bind(null,s),Lo:SA.bind(null,s),p_:CA.bind(null,s)}),s.G_.push(async t=>{t?(s.J_.h_(),pg(s)?hg(s):s.j_.set("Unknown")):(await s.J_.stop(),U1(s))})),s.J_}function Gn(s){return s.Y_||(s.Y_=function(r,a,i){const l=vt(r);return l.M_(),new vA(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:_A.bind(null,s),Lo:RA.bind(null,s),D_:DA.bind(null,s),v_:AA.bind(null,s)}),s.G_.push(async t=>{t?(s.Y_.h_(),await _m(s)):(await s.Y_.stop(),s.U_.length>0&&(Ze(_i,`Stopping write stream with ${s.U_.length} pending writes`),s.U_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(t,r,a,i,l){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=a,this.op=i,this.removalCallback=l,this.deferred=new Na,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,a,i,l){const o=Date.now()+a,c=new fg(t,r,o,i,l);return c.start(a),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ke(Ee.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gg(s,t){if(en("AsyncQueue",`${t}: ${s}`),nl(s))return new Ke(Ee.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{static emptySet(t){return new _o(t.comparator)}constructor(t){this.comparator=t?(r,a)=>t(r,a)||mt.comparator(r.key,a.key):(r,a)=>mt.comparator(r.key,a.key),this.keyedMap=Bl(),this.sortedSet=new hs(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,a)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof _o)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,l=a.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const a=new _o;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=r,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(){this.Z_=new hs(mt.comparator)}track(t){const r=t.doc.key,a=this.Z_.get(r);a?t.type!==0&&a.type===3?this.Z_=this.Z_.insert(r,t):t.type===3&&a.type!==1?this.Z_=this.Z_.insert(r,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.Z_=this.Z_.insert(r,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.Z_=this.Z_.insert(r,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.Z_=this.Z_.remove(r):t.type===1&&a.type===2?this.Z_=this.Z_.insert(r,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.Z_=this.Z_.insert(r,{type:2,doc:t.doc}):pt():this.Z_=this.Z_.insert(r,t)}X_(){const t=[];return this.Z_.inorderTraversal((r,a)=>{t.push(a)}),t}}class Go{constructor(t,r,a,i,l,o,c,d,h){this.query=t,this.docs=r,this.oldDocs=a,this.docChanges=i,this.mutatedKeys=l,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(t,r,a,i,l){const o=[];return r.forEach(c=>{o.push({type:0,doc:c})}),new Go(t,r,_o.emptySet(r),o,a,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&wm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,a=t.docChanges;if(r.length!==a.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==a[i].type||!r[i].doc.isEqual(a[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class OA{constructor(){this.queries=Aj(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(r,a){const i=vt(r),l=i.queries;i.queries=Aj(),l.forEach((o,c)=>{for(const d of c.ta)d.onError(a)})})(this,new Ke(Ee.ABORTED,"Firestore shutting down"))}}function Aj(){return new Ui(s=>l1(s),wm)}async function yg(s,t){const r=vt(s);let a=3;const i=t.query;let l=r.queries.get(i);l?!l.na()&&t.ra()&&(a=2):(l=new LA,a=t.ra()?0:1);try{switch(a){case 0:l.ea=await r.onListen(i,!0);break;case 1:l.ea=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const c=gg(o,`Initialization of query '${so(t.query)}' failed`);return void t.onError(c)}r.queries.set(i,l),l.ta.push(t),t.sa(r.onlineState),l.ea&&t.oa(l.ea)&&vg(r)}async function bg(s,t){const r=vt(s),a=t.query;let i=3;const l=r.queries.get(a);if(l){const o=l.ta.indexOf(t);o>=0&&(l.ta.splice(o,1),l.ta.length===0?i=t.ra()?0:1:!l.na()&&t.ra()&&(i=2))}switch(i){case 0:return r.queries.delete(a),r.onUnlisten(a,!0);case 1:return r.queries.delete(a),r.onUnlisten(a,!1);case 2:return r.onLastRemoteStoreUnlisten(a);default:return}}function VA(s,t){const r=vt(s);let a=!1;for(const i of t){const l=i.query,o=r.queries.get(l);if(o){for(const c of o.ta)c.oa(i)&&(a=!0);o.ea=i}}a&&vg(r)}function zA(s,t,r){const a=vt(s),i=a.queries.get(t);if(i)for(const l of i.ta)l.onError(r);a.queries.delete(t)}function vg(s){s.ia.forEach(t=>{t.next()})}var b0,Rj;(Rj=b0||(b0={}))._a="default",Rj.Cache="cache";class jg{constructor(t,r,a){this.query=t,this.aa=r,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(t){if(!this.options.includeMetadataChanges){const a=[];for(const i of t.docChanges)i.type!==3&&a.push(i);t=new Go(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.ua?this.la(t)&&(this.aa.next(t),r=!0):this.ha(t,this.onlineState)&&(this.Pa(t),r=!0),this.ca=t,r}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let r=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),r=!0),r}ha(t,r){if(!t.fromCache||!this.ra())return!0;const a=r!=="Offline";return(!this.options.Ta||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}la(t){if(t.docChanges.length>0)return!0;const r=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Pa(t){t=Go.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==b0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(t){this.key=t}}class G1{constructor(t){this.key=t}}class BA{constructor(t,r){this.query=t,this.fa=r,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Dt(),this.mutatedKeys=Dt(),this.ya=c1(t),this.wa=new _o(this.ya)}get Sa(){return this.fa}ba(t,r){const a=r?r.Da:new Dj,i=r?r.wa:this.wa;let l=r?r.mutatedKeys:this.mutatedKeys,o=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((g,N)=>{const k=i.get(g),E=km(this.query,N)?N:null,y=!!k&&this.mutatedKeys.has(k.key),O=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let _=!1;k&&E?k.data.isEqual(E.data)?y!==O&&(a.track({type:3,doc:E}),_=!0):this.va(k,E)||(a.track({type:2,doc:E}),_=!0,(d&&this.ya(E,d)>0||h&&this.ya(E,h)<0)&&(c=!0)):!k&&E?(a.track({type:0,doc:E}),_=!0):k&&!E&&(a.track({type:1,doc:k}),_=!0,(d||h)&&(c=!0)),_&&(E?(o=o.add(E),l=O?l.add(g):l.delete(g)):(o=o.delete(g),l=l.delete(g)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const g=this.query.limitType==="F"?o.last():o.first();o=o.delete(g.key),l=l.delete(g.key),a.track({type:1,doc:g})}return{wa:o,Da:a,ls:c,mutatedKeys:l}}va(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,a,i){const l=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const o=t.Da.X_();o.sort((g,N)=>function(E,y){const O=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return O(E)-O(y)}(g.type,N.type)||this.ya(g.doc,N.doc)),this.Ca(a),i=i!=null&&i;const c=r&&!i?this.Fa():[],d=this.pa.size===0&&this.current&&!i?1:0,h=d!==this.ga;return this.ga=d,o.length!==0||h?{snapshot:new Go(this.query,t.wa,l,o,t.mutatedKeys,d===0,h,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Dj,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(r=>this.fa=this.fa.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.fa=this.fa.delete(r)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Dt(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const r=[];return t.forEach(a=>{this.pa.has(a)||r.push(new G1(a))}),this.pa.forEach(a=>{t.has(a)||r.push(new H1(a))}),r}Oa(t){this.fa=t.gs,this.pa=Dt();const r=this.ba(t.documents);return this.applyChanges(r,!0)}Na(){return Go.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Ng="SyncEngine";class FA{constructor(t,r,a){this.query=t,this.targetId=r,this.view=a}}class UA{constructor(t){this.key=t,this.Ba=!1}}class $A{constructor(t,r,a,i,l,o){this.localStore=t,this.remoteStore=r,this.eventManager=a,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Ui(c=>l1(c),wm),this.qa=new Map,this.Qa=new Set,this.$a=new hs(mt.comparator),this.Ua=new Map,this.Ka=new og,this.Wa={},this.Ga=new Map,this.za=Ho.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function WA(s,t,r=!0){const a=Z1(s);let i;const l=a.ka.get(t);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),i=l.view.Na()):i=await Q1(a,t,r,!0),i}async function qA(s,t){const r=Z1(s);await Q1(r,t,!0,!1)}async function Q1(s,t,r,a){const i=await uA(s.localStore,wa(t)),l=i.targetId,o=s.sharedClientState.addLocalQueryTarget(l,r);let c;return a&&(c=await HA(s,t,l,o==="current",i.resumeToken)),s.isPrimaryClient&&r&&B1(s.remoteStore,i),c}async function HA(s,t,r,a,i){s.Ha=(N,k,E)=>async function(O,_,A,z){let L=_.view.ba(A);L.ls&&(L=await Pj(O.localStore,_.query,!1).then(({documents:R})=>_.view.ba(R,L)));const K=z&&z.targetChanges.get(_.targetId),H=z&&z.targetMismatches.get(_.targetId)!=null,G=_.view.applyChanges(L,O.isPrimaryClient,K,H);return Lj(O,_.targetId,G.Ma),G.snapshot}(s,N,k,E);const l=await Pj(s.localStore,t,!0),o=new BA(t,l.gs),c=o.ba(l.documents),d=ld.createSynthesizedTargetChangeForCurrentChange(r,a&&s.onlineState!=="Offline",i),h=o.applyChanges(c,s.isPrimaryClient,d);Lj(s,r,h.Ma);const g=new FA(t,r,o);return s.ka.set(t,g),s.qa.has(r)?s.qa.get(r).push(t):s.qa.set(r,[t]),h.snapshot}async function GA(s,t,r){const a=vt(s),i=a.ka.get(t),l=a.qa.get(i.targetId);if(l.length>1)return a.qa.set(i.targetId,l.filter(o=>!wm(o,t))),void a.ka.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(i.targetId),a.sharedClientState.isActiveQueryTarget(i.targetId)||await g0(a.localStore,i.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(i.targetId),r&&xg(a.remoteStore,i.targetId),v0(a,i.targetId)}).catch(al)):(v0(a,i.targetId),await g0(a.localStore,i.targetId,!0))}async function QA(s,t){const r=vt(s),a=r.ka.get(t),i=r.qa.get(a.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(a.targetId),xg(r.remoteStore,a.targetId))}async function KA(s,t,r){const a=s6(s);try{const i=await function(o,c){const d=vt(o),h=Yt.now(),g=c.reduce((E,y)=>E.add(y.key),Dt());let N,k;return d.persistence.runTransaction("Locally write mutations","readwrite",E=>{let y=tn(),O=Dt();return d.ds.getEntries(E,g).next(_=>{y=_,y.forEach((A,z)=>{z.isValidDocument()||(O=O.add(A))})}).next(()=>d.localDocuments.getOverlayedDocuments(E,y)).next(_=>{N=_;const A=[];for(const z of c){const L=mD(z,N.get(z.key).overlayedDocument);L!=null&&A.push(new si(z.key,L,e1(L.value.mapValue),$s.exists(!0)))}return d.mutationQueue.addMutationBatch(E,h,A,c)}).next(_=>{k=_;const A=_.applyToLocalDocumentSet(N,O);return d.documentOverlayCache.saveOverlays(E,_.batchId,A)})}).then(()=>({batchId:k.batchId,changes:u1(N)}))}(a.localStore,t);a.sharedClientState.addPendingMutation(i.batchId),function(o,c,d){let h=o.Wa[o.currentUser.toKey()];h||(h=new hs(kt)),h=h.insert(c,d),o.Wa[o.currentUser.toKey()]=h}(a,i.batchId,r),await dd(a,i.changes),await _m(a.remoteStore)}catch(i){const l=gg(i,"Failed to persist write");r.reject(l)}}async function K1(s,t){const r=vt(s);try{const a=await lA(r.localStore,t);t.targetChanges.forEach((i,l)=>{const o=r.Ua.get(l);o&&(Mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ba=!0:i.modifiedDocuments.size>0?Mt(o.Ba):i.removedDocuments.size>0&&(Mt(o.Ba),o.Ba=!1))}),await dd(r,a,t)}catch(a){await al(a)}}function Mj(s,t,r){const a=vt(s);if(a.isPrimaryClient&&r===0||!a.isPrimaryClient&&r===1){const i=[];a.ka.forEach((l,o)=>{const c=o.view.sa(t);c.snapshot&&i.push(c.snapshot)}),function(o,c){const d=vt(o);d.onlineState=c;let h=!1;d.queries.forEach((g,N)=>{for(const k of N.ta)k.sa(c)&&(h=!0)}),h&&vg(d)}(a.eventManager,t),i.length&&a.La.p_(i),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function YA(s,t,r){const a=vt(s);a.sharedClientState.updateQueryState(t,"rejected",r);const i=a.Ua.get(t),l=i&&i.key;if(l){let o=new hs(mt.comparator);o=o.insert(l,Rs.newNoDocument(l,ft.min()));const c=Dt().add(l),d=new Cm(ft.min(),new Map,new hs(kt),o,c);await K1(a,d),a.$a=a.$a.remove(l),a.Ua.delete(t),wg(a)}else await g0(a.localStore,t,!1).then(()=>v0(a,t,r)).catch(al)}async function XA(s,t){const r=vt(s),a=t.batch.batchId;try{const i=await oA(r.localStore,t);X1(r,a,null),Y1(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),await dd(r,i)}catch(i){await al(i)}}async function JA(s,t,r){const a=vt(s);try{const i=await function(o,c){const d=vt(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let g;return d.mutationQueue.lookupMutationBatch(h,c).next(N=>(Mt(N!==null),g=N.keys(),d.mutationQueue.removeMutationBatch(h,N))).next(()=>d.mutationQueue.performConsistencyCheck(h)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(h,g,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g)).next(()=>d.localDocuments.getDocuments(h,g))})}(a.localStore,t);X1(a,t,r),Y1(a,t),a.sharedClientState.updateMutationState(t,"rejected",r),await dd(a,i)}catch(i){await al(i)}}function Y1(s,t){(s.Ga.get(t)||[]).forEach(r=>{r.resolve()}),s.Ga.delete(t)}function X1(s,t,r){const a=vt(s);let i=a.Wa[a.currentUser.toKey()];if(i){const l=i.get(t);l&&(r?l.reject(r):l.resolve(),i=i.remove(t)),a.Wa[a.currentUser.toKey()]=i}}function v0(s,t,r=null){s.sharedClientState.removeLocalQueryTarget(t);for(const a of s.qa.get(t))s.ka.delete(a),r&&s.La.Ja(a,r);s.qa.delete(t),s.isPrimaryClient&&s.Ka.br(t).forEach(a=>{s.Ka.containsKey(a)||J1(s,a)})}function J1(s,t){s.Qa.delete(t.path.canonicalString());const r=s.$a.get(t);r!==null&&(xg(s.remoteStore,r),s.$a=s.$a.remove(t),s.Ua.delete(r),wg(s))}function Lj(s,t,r){for(const a of r)a instanceof H1?(s.Ka.addReference(a.key,t),ZA(s,a)):a instanceof G1?(Ze(Ng,"Document no longer in limbo: "+a.key),s.Ka.removeReference(a.key,t),s.Ka.containsKey(a.key)||J1(s,a.key)):pt()}function ZA(s,t){const r=t.key,a=r.path.canonicalString();s.$a.get(r)||s.Qa.has(a)||(Ze(Ng,"New document in limbo: "+r),s.Qa.add(a),wg(s))}function wg(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const t=s.Qa.values().next().value;s.Qa.delete(t);const r=new mt(Qt.fromString(t)),a=s.za.next();s.Ua.set(a,new UA(r)),s.$a=s.$a.insert(r,a),B1(s.remoteStore,new Pn(wa(Nm(r.path)),a,"TargetPurposeLimboResolution",vm.ae))}}async function dd(s,t,r){const a=vt(s),i=[],l=[],o=[];a.ka.isEmpty()||(a.ka.forEach((c,d)=>{o.push(a.Ha(d,t,r).then(h=>{var g;if((h||r)&&a.isPrimaryClient){const N=h?!h.fromCache:(g=r==null?void 0:r.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;a.sharedClientState.updateQueryState(d.targetId,N?"current":"not-current")}if(h){i.push(h);const N=cg.Yi(d.targetId,h);l.push(N)}}))}),await Promise.all(o),a.La.p_(i),await async function(d,h){const g=vt(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>Ae.forEach(h,k=>Ae.forEach(k.Hi,E=>g.persistence.referenceDelegate.addReference(N,k.targetId,E)).next(()=>Ae.forEach(k.Ji,E=>g.persistence.referenceDelegate.removeReference(N,k.targetId,E)))))}catch(N){if(!nl(N))throw N;Ze(dg,"Failed to update sequence numbers: "+N)}for(const N of h){const k=N.targetId;if(!N.fromCache){const E=g.Ts.get(k),y=E.snapshotVersion,O=E.withLastLimboFreeSnapshotVersion(y);g.Ts=g.Ts.insert(k,O)}}}(a.localStore,l))}async function e6(s,t){const r=vt(s);if(!r.currentUser.isEqual(t)){Ze(Ng,"User change. New user:",t.toKey());const a=await O1(r.localStore,t);r.currentUser=t,function(l,o){l.Ga.forEach(c=>{c.forEach(d=>{d.reject(new Ke(Ee.CANCELLED,o))})}),l.Ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await dd(r,a.Rs)}}function t6(s,t){const r=vt(s),a=r.Ua.get(t);if(a&&a.Ba)return Dt().add(a.key);{let i=Dt();const l=r.qa.get(t);if(!l)return i;for(const o of l){const c=r.ka.get(o);i=i.unionWith(c.view.Sa)}return i}}function Z1(s){const t=vt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=K1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=t6.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=YA.bind(null,t),t.La.p_=VA.bind(null,t.eventManager),t.La.Ja=zA.bind(null,t.eventManager),t}function s6(s){const t=vt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=XA.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=JA.bind(null,t),t}class Ax{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Em(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,r){return null}nu(t,r){return null}eu(t){return iA(this.persistence,new rA,t.initialUser,this.serializer)}Xa(t){return new L1(lg.ri,this.serializer)}Za(t){return new mA}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ax.provider={build:()=>new Ax};class r6 extends Ax{constructor(t){super(),this.cacheSizeBytes=t}tu(t,r){Mt(this.persistence.referenceDelegate instanceof _x);const a=this.persistence.referenceDelegate.garbageCollector;return new UD(a,t.asyncQueue,r)}Xa(t){const r=this.cacheSizeBytes!==void 0?fr.withCacheSize(this.cacheSizeBytes):fr.DEFAULT;return new L1(a=>_x.ri(a,r),this.serializer)}}class j0{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Mj(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=e6.bind(null,this.syncEngine),await MA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new OA}()}createDatastore(t){const r=Em(t.databaseInfo.databaseId),a=function(l){return new yA(l)}(t.databaseInfo);return function(l,o,c,d){return new NA(l,o,c,d)}(t.authCredentials,t.appCheckCredentials,a,r)}createRemoteStore(t){return function(a,i,l,o,c){return new kA(a,i,l,o,c)}(this.localStore,this.datastore,t.asyncQueue,r=>Mj(this.syncEngine,r,0),function(){return Ej.D()?new Ej:new hA}())}createSyncEngine(t,r){return function(i,l,o,c,d,h,g){const N=new $A(i,l,o,c,d,h);return g&&(N.ja=!0),N}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(i){const l=vt(i);Ze(_i,"RemoteStore shutting down."),l.W_.add(5),await cd(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}j0.provider={build:()=>new j0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):en("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ke(Ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(i,l){const o=vt(i),c={documents:l.map(N=>Tx(o.serializer,N))},d=await o.Co("BatchGetDocuments",o.serializer.databaseId,Qt.emptyPath(),c,l.length),h=new Map;d.forEach(N=>{const k=ID(o.serializer,N);h.set(k.key.toString(),k)});const g=[];return l.forEach(N=>{const k=h.get(N.toString());Mt(!!k),g.push(k)}),g}(this.datastore,t);return r.forEach(a=>this.recordVersion(a)),r}set(t,r){this.write(r.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,r){try{this.write(r.toMutation(t,this.preconditionForUpdate(t)))}catch(a){this.lastTransactionError=a}this.writtenDocs.add(t.toString())}delete(t){this.write(new Sm(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const i=mt.fromPath(a);this.mutations.push(new N1(i,this.precondition(i)))}),await async function(a,i){const l=vt(a),o={writes:i.map(c=>_1(l.serializer,c))};await l.So("Commit",l.serializer.databaseId,Qt.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let r;if(t.isFoundDocument())r=t.version;else{if(!t.isNoDocument())throw pt();r=ft.min()}const a=this.readVersions.get(t.key.toString());if(a){if(!r.isEqual(a))throw new Ke(Ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),r)}precondition(t){const r=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&r?r.isEqual(ft.min())?$s.exists(!1):$s.updateTime(r):$s.none()}preconditionForUpdate(t){const r=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&r){if(r.isEqual(ft.min()))throw new Ke(Ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $s.updateTime(r)}return $s.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(t,r,a,i,l){this.asyncQueue=t,this.datastore=r,this.options=a,this.updateFunction=i,this.deferred=l,this.Tu=a.maxAttempts,this.a_=new ug(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new a6(this.datastore),r=this.du(t);r&&r.then(a=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(a)}).catch(i=>{this.Au(i)}))}).catch(a=>{this.Au(a)})})}du(t){try{const r=this.updateFunction(t);return!id(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const r=t.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!w1(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="FirestoreClient";class i6{constructor(t,r,a,i,l){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=i,this.user=er.UNAUTHENTICATED,this.clientId=$4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,async o=>{Ze(Qn,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(a,o=>(Ze(Qn,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Na;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=gg(r,"Failed to shutdown persistence");t.reject(a)}}),t.promise}}async function Lh(s,t){s.asyncQueue.verifyOperationInProgress(),Ze(Qn,"Initializing OfflineComponentProvider");const r=s.configuration;await t.initialize(r);let a=r.initialUser;s.setCredentialChangeListener(async i=>{a.isEqual(i)||(await O1(t.localStore,i),a=i)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function Oj(s,t){s.asyncQueue.verifyOperationInProgress();const r=await o6(s);Ze(Qn,"Initializing OnlineComponentProvider"),await t.initialize(r,s.configuration),s.setCredentialChangeListener(a=>_j(t.remoteStore,a)),s.setAppCheckTokenChangeListener((a,i)=>_j(t.remoteStore,i)),s._onlineComponents=t}async function o6(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Ze(Qn,"Using user provided OfflineComponentProvider");try{await Lh(s,s._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(i){return i.name==="FirebaseError"?i.code===Ee.FAILED_PRECONDITION||i.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;Uo("Error using user provided cache. Falling back to memory cache: "+r),await Lh(s,new Ax)}}else Ze(Qn,"Using default OfflineComponentProvider"),await Lh(s,new r6(void 0));return s._offlineComponents}async function Ig(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Ze(Qn,"Using user provided OnlineComponentProvider"),await Oj(s,s._uninitializedComponentsProvider._online)):(Ze(Qn,"Using default OnlineComponentProvider"),await Oj(s,new j0))),s._onlineComponents}function l6(s){return Ig(s).then(t=>t.syncEngine)}function c6(s){return Ig(s).then(t=>t.datastore)}async function Rx(s){const t=await Ig(s),r=t.eventManager;return r.onListen=WA.bind(null,t.syncEngine),r.onUnlisten=GA.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=qA.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=QA.bind(null,t.syncEngine),r}function d6(s,t,r={}){const a=new Na;return s.asyncQueue.enqueueAndForget(async()=>function(l,o,c,d,h){const g=new kg({next:k=>{g.su(),o.enqueueAndForget(()=>bg(l,N));const E=k.docs.has(c);!E&&k.fromCache?h.reject(new Ke(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&k.fromCache&&d&&d.source==="server"?h.reject(new Ke(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(k)},error:k=>h.reject(k)}),N=new jg(Nm(c.path),g,{includeMetadataChanges:!0,Ta:!0});return yg(l,N)}(await Rx(s),s.asyncQueue,t,r,a)),a.promise}function u6(s,t,r={}){const a=new Na;return s.asyncQueue.enqueueAndForget(async()=>function(l,o,c,d,h){const g=new kg({next:k=>{g.su(),o.enqueueAndForget(()=>bg(l,N)),k.fromCache&&d.source==="server"?h.reject(new Ke(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(k)},error:k=>h.reject(k)}),N=new jg(c,g,{includeMetadataChanges:!0,Ta:!0});return yg(l,N)}(await Rx(s),s.asyncQueue,t,r,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(s,t,r){if(!r)throw new Ke(Ee.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function x6(s,t,r,a){if(t===!0&&a===!0)throw new Ke(Ee.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function zj(s){if(!mt.isDocumentKey(s))throw new Ke(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Bj(s){if(mt.isDocumentKey(s))throw new Ke(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Dm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(a){return a.constructor?a.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":pt()}function xr(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new Ke(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Dm(s);throw new Ke(Ee.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return s}function m6(s,t){if(t<=0)throw new Ke(Ee.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="firestore.googleapis.com",Fj=!0;class Uj{constructor(t){var r,a;if(t.host===void 0){if(t.ssl!==void 0)throw new Ke(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sk,this.ssl=Fj}else this.host=t.host,this.ssl=(r=t.ssl)!==null&&r!==void 0?r:Fj;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=M1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<BD)throw new Ke(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}x6("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ek((a=t.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Ke(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ke(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ke(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(a,i){return a.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Am{constructor(t,r,a,i){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=a,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uj({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ke(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ke(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uj(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new j8;switch(a.type){case"firstParty":return new I8(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Ke(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const a=Vj.get(r);a&&(Ze("ComponentProvider","Removing Datastore"),Vj.delete(r),a.terminate())}(this),Promise.resolve()}}function h6(s,t,r,a={}){var i;const l=(s=xr(s,Am))._getSettings(),o=Object.assign(Object.assign({},l),{emulatorOptions:s._getEmulatorOptions()}),c=`${t}:${r}`;l.host!==sk&&l.host!==c&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},l),{host:c,ssl:!1,emulatorOptions:a});if(!Un(d,o)&&(s._setSettings(d),a.mockUserToken)){let h,g;if(typeof a.mockUserToken=="string")h=a.mockUserToken,g=er.MOCK_USER;else{h=I4(a.mockUserToken,(i=s._app)===null||i===void 0?void 0:i.options.projectId);const N=a.mockUserToken.sub||a.mockUserToken.user_id;if(!N)throw new Ke(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new er(N)}s._authCredentials=new N8(new F4(h,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new ln(this.firestore,t,this._query)}}class qs{constructor(t,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new qs(this.firestore,t,this._key)}}class zn extends ln{constructor(t,r,a){super(t,r,Nm(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new qs(this.firestore,null,new mt(t))}withConverter(t){return new zn(this.firestore,t,this._path)}}function Y(s,t,...r){if(s=Xt(s),tk("collection","path",t),s instanceof Am){const a=Qt.fromString(t,...r);return Bj(a),new zn(s,null,a)}{if(!(s instanceof qs||s instanceof zn))throw new Ke(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Qt.fromString(t,...r));return Bj(a),new zn(s.firestore,null,a)}}function B(s,t,...r){if(s=Xt(s),arguments.length===1&&(t=$4.newId()),tk("doc","path",t),s instanceof Am){const a=Qt.fromString(t,...r);return zj(a),new qs(s,null,new mt(a))}{if(!(s instanceof qs||s instanceof zn))throw new Ke(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Qt.fromString(t,...r));return zj(a),new qs(s.firestore,s instanceof zn?s.converter:null,new mt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j="AsyncQueue";class Wj{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new ug(this,"async_queue_retry"),this.Su=()=>{const a=Mh();a&&Ze($j,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.bu=t;const r=Mh();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const r=Mh();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const r=new Na;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!nl(t))throw t;Ze($j,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const r=this.bu.then(()=>(this.pu=!0,t().catch(a=>{this.gu=a,this.pu=!1;const i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(a);throw en("INTERNAL UNHANDLED ERROR: ",i),a}).then(a=>(this.pu=!1,a))));return this.bu=r,r}enqueueAfterDelay(t,r,a){this.Du(),this.wu.indexOf(t)>-1&&(r=0);const i=fg.createAndSchedule(this,t,r,a,l=>this.Fu(l));return this.fu.push(i),i}Du(){this.gu&&pt()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const r of this.fu)if(r.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.fu)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const r=this.fu.indexOf(t);this.fu.splice(r,1)}}function qj(s){return function(r,a){if(typeof r!="object"||r===null)return!1;const i=r;for(const l of a)if(l in i&&typeof i[l]=="function")return!0;return!1}(s,["next","error","complete"])}class _a extends Am{constructor(t,r,a,i){super(t,r,a,i),this.type="firestore",this._queue=new Wj,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Wj(t),this._firestoreClient=void 0,await t}}}function p6(s,t){const r=typeof s=="object"?s:bm(),a=typeof s=="string"?s:t||Ix,i=ei(r,"firestore").getImmediate({identifier:a});if(!i._initialized){const l=N4("firestore");l&&h6(i,...l)}return i}function ud(s){if(s._terminated)throw new Ke(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||f6(s),s._firestoreClient}function f6(s){var t,r,a;const i=s._freezeSettings(),l=function(c,d,h,g){return new B8(c,d,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,ek(g.experimentalLongPollingOptions),g.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,i);s._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((a=i.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(s._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),s._firestoreClient=new i6(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Di(Gs.fromBase64String(t))}catch(r){throw new Ke(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Di(Gs.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Ke(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Us(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Ke(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Ke(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return kt(this._lat,t._lat)||kt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(a,i){if(a.length!==i.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==i[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6=/^__.*__$/;class y6{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return this.fieldMask!==null?new si(t,this.data,this.fieldMask,r,this.fieldTransforms):new od(t,this.data,r,this.fieldTransforms)}}class rk{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return new si(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function ak(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class Cg{constructor(t,r,a,i,l,o){this.settings=t,this.databaseId=r,this.serializer=a,this.ignoreUndefinedProperties=i,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new Cg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var r;const a=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.ku({path:a,Qu:!1});return i.$u(t),i}Uu(t){var r;const a=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.ku({path:a,Qu:!1});return i.Bu(),i}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return Mx(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(ak(this.Lu)&&g6.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class b6{constructor(t,r,a){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=a||Em(t)}ju(t,r,a,i=!1){return new Cg({Lu:t,methodName:r,zu:a,path:Us.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hd(s){const t=s._freezeSettings(),r=Em(s._databaseId);return new b6(s._databaseId,!!t.ignoreUndefinedProperties,r)}function Eg(s,t,r,a,i,l={}){const o=s.ju(l.merge||l.mergeFields?2:0,t,r,i);Dg("Data must be an object, but it was:",o,a);const c=ok(a,o);let d,h;if(l.merge)d=new Tr(o.fieldMask),h=o.fieldTransforms;else if(l.mergeFields){const g=[];for(const N of l.mergeFields){const k=N0(t,N,r);if(!o.contains(k))throw new Ke(Ee.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);ck(g,k)||g.push(k)}d=new Tr(g),h=o.fieldTransforms.filter(N=>d.covers(N.field))}else d=null,h=o.fieldTransforms;return new y6(new cr(c),d,h)}class Rm extends md{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Rm}}class Tg extends md{_toFieldTransform(t){return new b1(t.path,new Lc)}isEqual(t){return t instanceof Tg}}class _g extends md{constructor(t,r){super(t),this.Ju=r}_toFieldTransform(t){const r=new zc(t.serializer,h1(t.serializer,this.Ju));return new b1(t.path,r)}isEqual(t){return t instanceof _g&&this.Ju===t.Ju}}function nk(s,t,r,a){const i=s.ju(1,t,r);Dg("Data must be an object, but it was:",i,a);const l=[],o=cr.empty();ti(a,(d,h)=>{const g=Ag(t,d,r);h=Xt(h);const N=i.Uu(g);if(h instanceof Rm)l.push(g);else{const k=pd(h,N);k!=null&&(l.push(g),o.set(g,k))}});const c=new Tr(l);return new rk(o,c,i.fieldTransforms)}function ik(s,t,r,a,i,l){const o=s.ju(1,t,r),c=[N0(t,a,r)],d=[i];if(l.length%2!=0)throw new Ke(Ee.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<l.length;k+=2)c.push(N0(t,l[k])),d.push(l[k+1]);const h=[],g=cr.empty();for(let k=c.length-1;k>=0;--k)if(!ck(h,c[k])){const E=c[k];let y=d[k];y=Xt(y);const O=o.Uu(E);if(y instanceof Rm)h.push(E);else{const _=pd(y,O);_!=null&&(h.push(E),g.set(E,_))}}const N=new Tr(h);return new rk(g,N,o.fieldTransforms)}function v6(s,t,r,a=!1){return pd(r,s.ju(a?4:3,t))}function pd(s,t){if(lk(s=Xt(s)))return Dg("Unsupported field value:",t,s),ok(s,t);if(s instanceof md)return function(a,i){if(!ak(i.Lu))throw i.Wu(`${a._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(i);l&&i.fieldTransforms.push(l)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(a,i){const l=[];let o=0;for(const c of a){let d=pd(c,i.Ku(o));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),o++}return{arrayValue:{values:l}}}(s,t)}return function(a,i){if((a=Xt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return h1(i.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=Yt.fromDate(a);return{timestampValue:Ex(i.serializer,l)}}if(a instanceof Yt){const l=new Yt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Ex(i.serializer,l)}}if(a instanceof Pg)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Di)return{bytesValue:S1(i.serializer,a._byteString)};if(a instanceof qs){const l=i.databaseId,o=a.firestore._databaseId;if(!o.isEqual(l))throw i.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ig(a.firestore._databaseId||i.databaseId,a._key.path)}}if(a instanceof Sg)return function(o,c){return{mapValue:{fields:{[X4]:{stringValue:Z4},[Px]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw c.Wu("VectorValues must only contain numeric values.");return rg(c.serializer,h)})}}}}}}(a,i);throw i.Wu(`Unsupported field value: ${Dm(a)}`)}(s,t)}function ok(s,t){const r={};return q4(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ti(s,(a,i)=>{const l=pd(i,t.qu(a));l!=null&&(r[a]=l)}),{mapValue:{fields:r}}}function lk(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Yt||s instanceof Pg||s instanceof Di||s instanceof qs||s instanceof md||s instanceof Sg)}function Dg(s,t,r){if(!lk(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const a=Dm(r);throw a==="an object"?t.Wu(s+" a custom object"):t.Wu(s+" "+a)}}function N0(s,t,r){if((t=Xt(t))instanceof xd)return t._internalPath;if(typeof t=="string")return Ag(s,t);throw Mx("Field path arguments must be of type string or ",s,!1,void 0,r)}const j6=new RegExp("[~\\*/\\[\\]]");function Ag(s,t,r){if(t.search(j6)>=0)throw Mx(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,r);try{return new xd(...t.split("."))._internalPath}catch{throw Mx(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,r)}}function Mx(s,t,r,a,i){const l=a&&!a.isEmpty(),o=i!==void 0;let c=`Function ${t}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(l||o)&&(d+=" (found",l&&(d+=` in field ${a}`),o&&(d+=` in document ${i}`),d+=")"),new Ke(Ee.INVALID_ARGUMENT,c+s+d)}function ck(s,t){return s.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(t,r,a,i,l){this._firestore=t,this._userDataWriter=r,this._key=a,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new qs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new N6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(Mm("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class N6 extends Lx{data(){return super.data()}}function Mm(s,t){return typeof t=="string"?Ag(s,t):t instanceof xd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ke(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rg{}class Mg extends Rg{}function xe(s,t,...r){let a=[];t instanceof Rg&&a.push(t),a=a.concat(r),function(l){const o=l.filter(d=>d instanceof Lg).length,c=l.filter(d=>d instanceof Lm).length;if(o>1||o>0&&c>0)throw new Ke(Ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const i of a)s=i._apply(s);return s}class Lm extends Mg{constructor(t,r,a){super(),this._field=t,this._op=r,this._value=a,this.type="where"}static _create(t,r,a){return new Lm(t,r,a)}_apply(t){const r=this._parse(t);return uk(t._query,r),new ln(t.firestore,t.converter,m0(t._query,r))}_parse(t){const r=hd(t.firestore);return function(l,o,c,d,h,g,N){let k;if(h.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Ke(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Gj(N,g);const y=[];for(const O of N)y.push(Hj(d,l,O));k={arrayValue:{values:y}}}else k=Hj(d,l,N)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Gj(N,g),k=v6(c,o,N,g==="in"||g==="not-in");return ks.create(h,g,k)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function je(s,t,r){const a=t,i=Mm("where",s);return Lm._create(i,a,r)}class Lg extends Rg{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new Lg(t,r)}_parse(t){const r=this._queryConstraints.map(a=>a._parse(t)).filter(a=>a.getFilters().length>0);return r.length===1?r[0]:ua.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(i,l){let o=i;const c=l.getFlattenedFilters();for(const d of c)uk(o,d),o=m0(o,d)}(t._query,r),new ln(t.firestore,t.converter,m0(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Og extends Mg{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new Og(t,r)}_apply(t){const r=function(i,l,o){if(i.startAt!==null)throw new Ke(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ke(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mc(l,o)}(t._query,this._field,this._direction);return new ln(t.firestore,t.converter,function(i,l){const o=i.explicitOrderBy.concat([l]);return new il(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,r))}}function w0(s,t="asc"){const r=t,a=Mm("orderBy",s);return Og._create(a,r)}class Vg extends Mg{constructor(t,r,a){super(),this.type=t,this._limit=r,this._limitType=a}static _create(t,r,a){return new Vg(t,r,a)}_apply(t){return new ln(t.firestore,t.converter,Cx(t._query,this._limit,this._limitType))}}function Ut(s){return m6("limit",s),Vg._create("limit",s,"F")}function Hj(s,t,r){if(typeof(r=Xt(r))=="string"){if(r==="")throw new Ke(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!o1(t)&&r.indexOf("/")!==-1)throw new Ke(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=t.path.child(Qt.fromString(r));if(!mt.isDocumentKey(a))throw new Ke(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return oj(s,new mt(a))}if(r instanceof qs)return oj(s,r._key);throw new Ke(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dm(r)}.`)}function Gj(s,t){if(!Array.isArray(s)||s.length===0)throw new Ke(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function uk(s,t){const r=function(i,l){for(const o of i)for(const c of o.getFlattenedFilters())if(l.indexOf(c.op)>=0)return c.op;return null}(s.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Ke(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ke(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class xk{convertValue(t,r="none"){switch(Hn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return vs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(qn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw pt()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const a={};return ti(t,(i,l)=>{a[i]=this.convertValue(l,r)}),a}convertVectorValue(t){var r,a,i;const l=(i=(a=(r=t.fields)===null||r===void 0?void 0:r[Px].arrayValue)===null||a===void 0?void 0:a.values)===null||i===void 0?void 0:i.map(o=>vs(o.doubleValue));return new Sg(l)}convertGeoPoint(t){return new Pg(vs(t.latitude),vs(t.longitude))}convertArray(t,r){return(t.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(t,r){switch(r){case"previous":const a=jm(t);return a==null?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(Dc(t));default:return null}}convertTimestamp(t){const r=Wn(t);return new Yt(r.seconds,r.nanos)}convertDocumentKey(t,r){const a=Qt.fromString(t);Mt(R1(a));const i=new Ac(a.get(1),a.get(3)),l=new mt(a.popFirst(5));return i.isEqual(r)||en(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(s,t,r){let a;return a=s?r&&(r.merge||r.mergeFields)?s.toFirestore(t,r):s.toFirestore(t):t,a}class w6 extends xk{constructor(t){super(),this.firestore=t}convertBytes(t){return new Di(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new qs(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Bg extends Lx{constructor(t,r,a,i,l,o){super(t,r,a,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new Mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const a=this._document.data.field(Mm("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class Mu extends Bg{data(t={}){return super.data(t)}}class mk{constructor(t,r,a,i){this._firestore=t,this._userDataWriter=r,this._snapshot=i,this.metadata=new yo(i.hasPendingWrites,i.fromCache),this.query=a}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(a=>{t.call(r,new Mu(this._firestore,this._userDataWriter,a.key,a,new yo(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ke(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,l){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const d=new Mu(i._firestore,i._userDataWriter,c.doc.key,c.doc,new yo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>l||c.type!==3).map(c=>{const d=new Mu(i._firestore,i._userDataWriter,c.doc.key,c.doc,new yo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,g=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),g=o.indexOf(c.doc.key)),{type:k6(c.type),doc:d,oldIndex:h,newIndex:g}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function k6(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(s){s=xr(s,qs);const t=xr(s.firestore,_a);return d6(ud(t),s._key).then(r=>hk(t,s,r))}class Om extends xk{constructor(t){super(),this.firestore=t}convertBytes(t){return new Di(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new qs(this.firestore,null,r)}}function jt(s){s=xr(s,ln);const t=xr(s.firestore,_a),r=ud(t),a=new Om(t);return dk(s._query),u6(r,s._query).then(i=>new mk(t,a,s,i))}function Wr(s,t,r){s=xr(s,qs);const a=xr(s.firestore,_a),i=zg(s.converter,t,r);return Vm(a,[Eg(hd(a),"setDoc",s._key,i,s.converter!==null,r).toMutation(s._key,$s.none())])}function os(s,t,r,...a){s=xr(s,qs);const i=xr(s.firestore,_a),l=hd(i);let o;return o=typeof(t=Xt(t))=="string"||t instanceof xd?ik(l,"updateDoc",s._key,t,r,a):nk(l,"updateDoc",s._key,t),Vm(i,[o.toMutation(s._key,$s.exists(!0))])}function Lu(s){return Vm(xr(s.firestore,_a),[new Sm(s._key,$s.none())])}function Ua(s,t){const r=xr(s.firestore,_a),a=B(s),i=zg(s.converter,t);return Vm(r,[Eg(hd(s.firestore),"addDoc",a._key,i,s.converter!==null,{}).toMutation(a._key,$s.exists(!1))]).then(()=>a)}function we(s,...t){var r,a,i;s=Xt(s);let l={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||qj(t[o])||(l=t[o],o++);const c={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(qj(t[o])){const N=t[o];t[o]=(r=N.next)===null||r===void 0?void 0:r.bind(N),t[o+1]=(a=N.error)===null||a===void 0?void 0:a.bind(N),t[o+2]=(i=N.complete)===null||i===void 0?void 0:i.bind(N)}let d,h,g;if(s instanceof qs)h=xr(s.firestore,_a),g=Nm(s._key.path),d={next:N=>{t[o]&&t[o](hk(h,s,N))},error:t[o+1],complete:t[o+2]};else{const N=xr(s,ln);h=xr(N.firestore,_a),g=N._query;const k=new Om(h);d={next:E=>{t[o]&&t[o](new mk(h,k,N,E))},error:t[o+1],complete:t[o+2]},dk(s._query)}return function(k,E,y,O){const _=new kg(O),A=new jg(E,_,y);return k.asyncQueue.enqueueAndForget(async()=>yg(await Rx(k),A)),()=>{_.su(),k.asyncQueue.enqueueAndForget(async()=>bg(await Rx(k),A))}}(ud(h),g,c,d)}function Vm(s,t){return function(a,i){const l=new Na;return a.asyncQueue.enqueueAndForget(async()=>KA(await l6(a),i,l)),l.promise}(ud(s),t)}function hk(s,t,r){const a=r.docs.get(t._key),i=new Om(s);return new Bg(s,i,t._key,a,new yo(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6={maxAttempts:5};function Ul(s,t){if((s=Xt(s)).firestore!==t)throw new Ke(Ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=hd(t)}get(t){const r=Ul(t,this._firestore),a=new w6(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return pt();const l=i[0];if(l.isFoundDocument())return new Lx(this._firestore,a,l.key,l,r.converter);if(l.isNoDocument())return new Lx(this._firestore,a,r._key,null,r.converter);throw pt()})}set(t,r,a){const i=Ul(t,this._firestore),l=zg(i.converter,r,a),o=Eg(this._dataReader,"Transaction.set",i._key,l,i.converter!==null,a);return this._transaction.set(i._key,o),this}update(t,r,a,...i){const l=Ul(t,this._firestore);let o;return o=typeof(r=Xt(r))=="string"||r instanceof xd?ik(this._dataReader,"Transaction.update",l._key,r,a,i):nk(this._dataReader,"Transaction.update",l._key,r),this._transaction.update(l._key,o),this}delete(t){const r=Ul(t,this._firestore);return this._transaction.delete(r._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6 extends P6{constructor(t,r){super(t,r),this._firestore=t}get(t){const r=Ul(t,this._firestore),a=new Om(this._firestore);return super.get(t).then(i=>new Bg(this._firestore,a,r._key,i._document,new yo(!1,!1),r.converter))}}function ot(s,t,r){s=xr(s,_a);const a=Object.assign(Object.assign({},I6),r);return function(l){if(l.maxAttempts<1)throw new Ke(Ee.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(l,o,c){const d=new Na;return l.asyncQueue.enqueueAndForget(async()=>{const h=await c6(l);new n6(l.asyncQueue,h,c,o,d).Iu()}),d.promise}(ud(s),i=>t(new S6(s,i)),a)}function ye(){return new Tg("serverTimestamp")}function it(s){return new _g("increment",s)}(function(t,r=!0){(function(i){rl=i})(Fi),da(new Yr("firestore",(a,{instanceIdentifier:i,options:l})=>{const o=a.getProvider("app").getImmediate(),c=new _a(new w8(a.getProvider("auth-internal")),new P8(o,a.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ke(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ac(h.options.projectId,g)}(o,i),o);return l=Object.assign({useFetchStreams:r},l),c._setSettings(l),c},"PUBLIC").setMultipleInstances(!0)),wr(Kv,Yv,t),wr(Kv,Yv,"esm2017")})();var C6="firebase",E6="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr(C6,E6,"app");const pk="@firebase/installations",Fg="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=1e4,gk=`w:${Fg}`,yk="FIS_v2",T6="https://firebaseinstallations.googleapis.com/v1",_6=60*60*1e3,D6="installations",A6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ai=new Bi(D6,A6,R6);function bk(s){return s instanceof Xr&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk({projectId:s}){return`${T6}/projects/${s}/installations`}function jk(s){return{token:s.token,requestStatus:2,expiresIn:L6(s.expiresIn),creationTime:Date.now()}}async function Nk(s,t){const a=(await t.json()).error;return Ai.create("request-failed",{requestName:s,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function wk({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function M6(s,{refreshToken:t}){const r=wk(s);return r.append("Authorization",O6(t)),r}async function kk(s){const t=await s();return t.status>=500&&t.status<600?s():t}function L6(s){return Number(s.replace("s","000"))}function O6(s){return`${yk} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V6({appConfig:s,heartbeatServiceProvider:t},{fid:r}){const a=vk(s),i=wk(s),l=t.getImmediate({optional:!0});if(l){const h=await l.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={fid:r,authVersion:yk,appId:s.appId,sdkVersion:gk},c={method:"POST",headers:i,body:JSON.stringify(o)},d=await kk(()=>fetch(a,c));if(d.ok){const h=await d.json();return{fid:h.fid||r,registrationStatus:2,refreshToken:h.refreshToken,authToken:jk(h.authToken)}}else throw await Nk("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(s){return new Promise(t=>{setTimeout(t,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=/^[cdef][\w-]{21}$/,k0="";function F6(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const r=U6(s);return B6.test(r)?r:k0}catch{return k0}}function U6(s){return z6(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=new Map;function Sk(s,t){const r=zm(s);Ck(r,t),$6(r,t)}function Ck(s,t){const r=Pk.get(s);if(r)for(const a of r)a(t)}function $6(s,t){const r=W6();r&&r.postMessage({key:s,fid:t}),q6()}let yi=null;function W6(){return!yi&&"BroadcastChannel"in self&&(yi=new BroadcastChannel("[Firebase] FID Change"),yi.onmessage=s=>{Ck(s.data.key,s.data.fid)}),yi}function q6(){Pk.size===0&&yi&&(yi.close(),yi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6="firebase-installations-database",G6=1,Ri="firebase-installations-store";let Oh=null;function Ug(){return Oh||(Oh=_4(H6,G6,{upgrade:(s,t)=>{switch(t){case 0:s.createObjectStore(Ri)}}})),Oh}async function Ox(s,t){const r=zm(s),i=(await Ug()).transaction(Ri,"readwrite"),l=i.objectStore(Ri),o=await l.get(r);return await l.put(t,r),await i.done,(!o||o.fid!==t.fid)&&Sk(s,t.fid),t}async function Ek(s){const t=zm(s),a=(await Ug()).transaction(Ri,"readwrite");await a.objectStore(Ri).delete(t),await a.done}async function Bm(s,t){const r=zm(s),i=(await Ug()).transaction(Ri,"readwrite"),l=i.objectStore(Ri),o=await l.get(r),c=t(o);return c===void 0?await l.delete(r):await l.put(c,r),await i.done,c&&(!o||o.fid!==c.fid)&&Sk(s,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $g(s){let t;const r=await Bm(s.appConfig,a=>{const i=Q6(a),l=K6(s,i);return t=l.registrationPromise,l.installationEntry});return r.fid===k0?{installationEntry:await t}:{installationEntry:r,registrationPromise:t}}function Q6(s){const t=s||{fid:F6(),registrationStatus:0};return Tk(t)}function K6(s,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ai.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},a=Y6(s,r);return{installationEntry:r,registrationPromise:a}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:X6(s)}:{installationEntry:t}}async function Y6(s,t){try{const r=await V6(s,t);return Ox(s.appConfig,r)}catch(r){throw bk(r)&&r.customData.serverCode===409?await Ek(s.appConfig):await Ox(s.appConfig,{fid:t.fid,registrationStatus:0}),r}}async function X6(s){let t=await Qj(s.appConfig);for(;t.registrationStatus===1;)await Ik(100),t=await Qj(s.appConfig);if(t.registrationStatus===0){const{installationEntry:r,registrationPromise:a}=await $g(s);return a||r}return t}function Qj(s){return Bm(s,t=>{if(!t)throw Ai.create("installation-not-found");return Tk(t)})}function Tk(s){return J6(s)?{fid:s.fid,registrationStatus:0}:s}function J6(s){return s.registrationStatus===1&&s.registrationTime+fk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z6({appConfig:s,heartbeatServiceProvider:t},r){const a=eR(s,r),i=M6(s,r),l=t.getImmediate({optional:!0});if(l){const h=await l.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={installation:{sdkVersion:gk,appId:s.appId}},c={method:"POST",headers:i,body:JSON.stringify(o)},d=await kk(()=>fetch(a,c));if(d.ok){const h=await d.json();return jk(h)}else throw await Nk("Generate Auth Token",d)}function eR(s,{fid:t}){return`${vk(s)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wg(s,t=!1){let r;const a=await Bm(s.appConfig,l=>{if(!_k(l))throw Ai.create("not-registered");const o=l.authToken;if(!t&&rR(o))return l;if(o.requestStatus===1)return r=tR(s,t),l;{if(!navigator.onLine)throw Ai.create("app-offline");const c=nR(l);return r=sR(s,c),c}});return r?await r:a.authToken}async function tR(s,t){let r=await Kj(s.appConfig);for(;r.authToken.requestStatus===1;)await Ik(100),r=await Kj(s.appConfig);const a=r.authToken;return a.requestStatus===0?Wg(s,t):a}function Kj(s){return Bm(s,t=>{if(!_k(t))throw Ai.create("not-registered");const r=t.authToken;return iR(r)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function sR(s,t){try{const r=await Z6(s,t),a=Object.assign(Object.assign({},t),{authToken:r});return await Ox(s.appConfig,a),r}catch(r){if(bk(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await Ek(s.appConfig);else{const a=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Ox(s.appConfig,a)}throw r}}function _k(s){return s!==void 0&&s.registrationStatus===2}function rR(s){return s.requestStatus===2&&!aR(s)}function aR(s){const t=Date.now();return t<s.creationTime||s.creationTime+s.expiresIn<t+_6}function nR(s){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:t})}function iR(s){return s.requestStatus===1&&s.requestTime+fk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(s){const t=s,{installationEntry:r,registrationPromise:a}=await $g(t);return a?a.catch(console.error):Wg(t).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(s,t=!1){const r=s;return await cR(r),(await Wg(r,t)).token}async function cR(s){const{registrationPromise:t}=await $g(s);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(s){if(!s||!s.options)throw Vh("App Configuration");if(!s.name)throw Vh("App Name");const t=["projectId","apiKey","appId"];for(const r of t)if(!s.options[r])throw Vh(r);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function Vh(s){return Ai.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="installations",uR="installations-internal",xR=s=>{const t=s.getProvider("app").getImmediate(),r=dR(t),a=ei(t,"heartbeat");return{app:t,appConfig:r,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},mR=s=>{const t=s.getProvider("app").getImmediate(),r=ei(t,Dk).getImmediate();return{getId:()=>oR(r),getToken:i=>lR(r,i)}};function hR(){da(new Yr(Dk,xR,"PUBLIC")),da(new Yr(uR,mR,"PRIVATE"))}hR();wr(pk,Fg);wr(pk,Fg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="analytics",pR="firebase_id",fR="origin",gR=60*1e3,yR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new ym("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ar=new Bi("analytics","Analytics",bR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(s){if(!s.startsWith(qg)){const t=Ar.create("invalid-gtag-resource",{gtagURL:s});return kr.warn(t.message),""}return s}function Ak(s){return Promise.all(s.map(t=>t.catch(r=>r)))}function jR(s,t){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(s,t)),r}function NR(s,t){const r=jR("firebase-js-sdk-policy",{createScriptURL:vR}),a=document.createElement("script"),i=`${qg}?l=${s}&id=${t}`;a.src=r?r==null?void 0:r.createScriptURL(i):i,a.async=!0,document.head.appendChild(a)}function wR(s){let t=[];return Array.isArray(window[s])?t=window[s]:window[s]=t,t}async function kR(s,t,r,a,i,l){const o=a[i];try{if(o)await t[o];else{const d=(await Ak(r)).find(h=>h.measurementId===i);d&&await t[d.appId]}}catch(c){kr.error(c)}s("config",i,l)}async function IR(s,t,r,a,i){try{let l=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const c=await Ak(r);for(const d of o){const h=c.find(N=>N.measurementId===d),g=h&&t[h.appId];if(g)l.push(g);else{l=[];break}}}l.length===0&&(l=Object.values(t)),await Promise.all(l),s("event",a,i||{})}catch(l){kr.error(l)}}function PR(s,t,r,a){async function i(l,...o){try{if(l==="event"){const[c,d]=o;await IR(s,t,r,c,d)}else if(l==="config"){const[c,d]=o;await kR(s,t,r,a,c,d)}else if(l==="consent"){const[c,d]=o;s("consent",c,d)}else if(l==="get"){const[c,d,h]=o;s("get",c,d,h)}else if(l==="set"){const[c]=o;s("set",c)}else s(l,...o)}catch(c){kr.error(c)}}return i}function SR(s,t,r,a,i){let l=function(...o){window[a].push(arguments)};return window[i]&&typeof window[i]=="function"&&(l=window[i]),window[i]=PR(l,s,t,r),{gtagCore:l,wrappedGtag:window[i]}}function CR(s){const t=window.document.getElementsByTagName("script");for(const r of Object.values(t))if(r.src&&r.src.includes(qg)&&r.src.includes(s))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=30,TR=1e3;class _R{constructor(t={},r=TR){this.throttleMetadata=t,this.intervalMillis=r}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,r){this.throttleMetadata[t]=r}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const Rk=new _R;function DR(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function AR(s){var t;const{appId:r,apiKey:a}=s,i={method:"GET",headers:DR(a)},l=yR.replace("{app-id}",r),o=await fetch(l,i);if(o.status!==200&&o.status!==304){let c="";try{const d=await o.json();!((t=d.error)===null||t===void 0)&&t.message&&(c=d.error.message)}catch{}throw Ar.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()}async function RR(s,t=Rk,r){const{appId:a,apiKey:i,measurementId:l}=s.options;if(!a)throw Ar.create("no-app-id");if(!i){if(l)return{measurementId:l,appId:a};throw Ar.create("no-api-key")}const o=t.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new OR;return setTimeout(async()=>{c.abort()},r!==void 0?r:gR),Mk({appId:a,apiKey:i,measurementId:l},o,c,t)}async function Mk(s,{throttleEndTimeMillis:t,backoffCount:r},a,i=Rk){var l;const{appId:o,measurementId:c}=s;try{await MR(a,t)}catch(d){if(c)return kr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:c};throw d}try{const d=await AR(s);return i.deleteThrottleMetadata(o),d}catch(d){const h=d;if(!LR(h)){if(i.deleteThrottleMetadata(o),c)return kr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:c};throw d}const g=Number((l=h==null?void 0:h.customData)===null||l===void 0?void 0:l.httpStatus)===503?zv(r,i.intervalMillis,ER):zv(r,i.intervalMillis),N={throttleEndTimeMillis:Date.now()+g,backoffCount:r+1};return i.setThrottleMetadata(o,N),kr.debug(`Calling attemptFetch again in ${g} millis`),Mk(s,N,a,i)}}function MR(s,t){return new Promise((r,a)=>{const i=Math.max(t-Date.now(),0),l=setTimeout(r,i);s.addEventListener(()=>{clearTimeout(l),a(Ar.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function LR(s){if(!(s instanceof Xr)||!s.customData)return!1;const t=Number(s.customData.httpStatus);return t===429||t===500||t===503||t===504}class OR{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function VR(s,t,r,a,i){if(i&&i.global){s("event",r,a);return}else{const l=await t,o=Object.assign(Object.assign({},a),{send_to:l});s("event",r,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(){if(S4())try{await C4()}catch(s){return kr.warn(Ar.create("indexeddb-unavailable",{errorInfo:s==null?void 0:s.toString()}).message),!1}else return kr.warn(Ar.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function BR(s,t,r,a,i,l,o){var c;const d=RR(s);d.then(E=>{r[E.measurementId]=E.appId,s.options.measurementId&&E.measurementId!==s.options.measurementId&&kr.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>kr.error(E)),t.push(d);const h=zR().then(E=>{if(E)return a.getId()}),[g,N]=await Promise.all([d,h]);CR(l)||NR(l,g.measurementId),i("js",new Date);const k=(c=o==null?void 0:o.config)!==null&&c!==void 0?c:{};return k[fR]="firebase",k.update=!0,N!=null&&(k[pR]=N),i("config",g.measurementId,k),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(t){this.app=t}_delete(){return delete ac[this.app.options.appId],Promise.resolve()}}let ac={},Yj=[];const Xj={};let zh="dataLayer",UR="gtag",Jj,Lk,Zj=!1;function $R(){const s=[];if(P4()&&s.push("This is a browser extension environment."),s_()||s.push("Cookies are not available."),s.length>0){const t=s.map((a,i)=>`(${i+1}) ${a}`).join(" "),r=Ar.create("invalid-analytics-context",{errorInfo:t});kr.warn(r.message)}}function WR(s,t,r){$R();const a=s.options.appId;if(!a)throw Ar.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)kr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ar.create("no-api-key");if(ac[a]!=null)throw Ar.create("already-exists",{id:a});if(!Zj){wR(zh);const{wrappedGtag:l,gtagCore:o}=SR(ac,Yj,Xj,zh,UR);Lk=l,Jj=o,Zj=!0}return ac[a]=BR(s,Yj,Xj,t,Jj,zh,r),new FR(s)}function qR(s=bm()){s=Xt(s);const t=ei(s,Vx);return t.isInitialized()?t.getImmediate():HR(s)}function HR(s,t={}){const r=ei(s,Vx);if(r.isInitialized()){const i=r.getImmediate();if(Un(t,r.getOptions()))return i;throw Ar.create("already-initialized")}return r.initialize({options:t})}function GR(s,t,r,a){s=Xt(s),VR(Lk,ac[s.app.options.appId],t,r,a).catch(i=>kr.error(i))}const eN="@firebase/analytics",tN="0.10.12";function QR(){da(new Yr(Vx,(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return WR(a,i,r)},"PUBLIC")),da(new Yr("analytics-internal",s,"PRIVATE")),wr(eN,tN),wr(eN,tN,"esm2017");function s(t){try{const r=t.getProvider(Vx).getImmediate();return{logEvent:(a,i,l)=>GR(r,a,i,l)}}catch(r){throw Ar.create("interop-component-reg-failed",{reason:r})}}}QR();function Hg(s,t){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(s);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(s,a[i])&&(r[a[i]]=s[a[i]]);return r}function Ok(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KR=Ok,Vk=new Bi("auth","Firebase",Ok());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=new ym("@firebase/auth");function YR(s,...t){zx.logLevel<=_t.WARN&&zx.warn(`Auth (${Fi}): ${s}`,...t)}function Ou(s,...t){zx.logLevel<=_t.ERROR&&zx.error(`Auth (${Fi}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(s,...t){throw Gg(s,...t)}function ka(s,...t){return Gg(s,...t)}function zk(s,t,r){const a=Object.assign(Object.assign({},KR()),{[t]:r});return new Bi("auth","Firebase",a).create(t,{appName:s.name})}function Ga(s){return zk(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gg(s,...t){if(typeof s!="string"){const r=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(r,...a)}return Vk.create(s,...t)}function gt(s,t,...r){if(!s)throw Gg(t,...r)}function $a(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Ou(t),new Error(t)}function sn(s,t){s||$a(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function Bk(){return sN()==="http:"||sN()==="https:"}function sN(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Bk()||P4()||"connection"in navigator)?navigator.onLine:!0}function JR(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(t,r){this.shortDelay=t,this.longDelay=r,sn(r>t,"Short delay should be less than long delay!"),this.isMobile=YT()||ZT()}get(){return XR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(s,t){sn(s.emulator,"Emulator should always be set here");const{url:r}=s.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{static initialize(t,r,a){this.fetchImpl=t,r&&(this.headersImpl=r),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$a("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$a("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$a("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tM=new fd(3e4,6e4);function cn(s,t){return s.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:s.tenantId}):t}async function Ra(s,t,r,a,i={}){return Uk(s,i,async()=>{let l={},o={};a&&(t==="GET"?o=a:l={body:JSON.stringify(a)});const c=nd(Object.assign({key:s.config.apiKey},o)).slice(1),d=await s._getAdditionalHeaders();d["Content-Type"]="application/json",s.languageCode&&(d["X-Firebase-Locale"]=s.languageCode);const h=Object.assign({method:t,headers:d},l);return JT()||(h.referrerPolicy="no-referrer"),Fk.fetch()(await $k(s,s.config.apiHost,r,c),h)})}async function Uk(s,t,r){s._canInitEmulator=!1;const a=Object.assign(Object.assign({},ZR),t);try{const i=new rM(s),l=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await l.json();if("needConfirmation"in o)throw cu(s,"account-exists-with-different-credential",o);if(l.ok&&!("errorMessage"in o))return o;{const c=l.ok?o.errorMessage:o.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw cu(s,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw cu(s,"email-already-in-use",o);if(d==="USER_DISABLED")throw cu(s,"user-disabled",o);const g=a[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw zk(s,g,h);xa(s,g)}}catch(i){if(i instanceof Xr)throw i;xa(s,"network-request-failed",{message:String(i)})}}async function gd(s,t,r,a,i={}){const l=await Ra(s,t,r,a,i);return"mfaPendingCredential"in l&&xa(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function $k(s,t,r,a){const i=`${t}${r}?${a}`,l=s,o=l.config.emulator?Qg(s.config,i):`${s.config.apiScheme}://${i}`;return eM.includes(r)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(o).toString():o}function sM(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,a)=>{this.timer=setTimeout(()=>a(ka(this.auth,"network-request-failed")),tM.get())})}}function cu(s,t,r){const a={appName:s.name};r.email&&(a.email=r.email),r.phoneNumber&&(a.phoneNumber=r.phoneNumber);const i=ka(s,t,a);return i.customData._tokenResponse=r,i}function rN(s){return s!==void 0&&s.enterprise!==void 0}class aM{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return sM(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nM(s,t){return Ra(s,"GET","/v2/recaptchaConfig",cn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(s,t){return Ra(s,"POST","/v1/accounts:delete",t)}async function Fx(s,t){return Ra(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function oM(s,t=!1){const r=Xt(s),a=await r.getIdToken(t),i=Kg(a);gt(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const l=typeof i.firebase=="object"?i.firebase:void 0,o=l==null?void 0:l.sign_in_provider;return{claims:i,token:a,authTime:nc(Bh(i.auth_time)),issuedAtTime:nc(Bh(i.iat)),expirationTime:nc(Bh(i.exp)),signInProvider:o||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Bh(s){return Number(s)*1e3}function Kg(s){const[t,r,a]=s.split(".");if(t===void 0||r===void 0||a===void 0)return Ou("JWT malformed, contained fewer than 3 sections"),null;try{const i=v4(r);return i?JSON.parse(i):(Ou("Failed to decode base64 JWT payload"),null)}catch(i){return Ou("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function aN(s){const t=Kg(s);return gt(t,"internal-error"),gt(typeof t.exp<"u","internal-error"),gt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(s,t,r=!1){if(r)return t;try{return await t}catch(a){throw a instanceof Xr&&lM(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function lM({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var r;if(t){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=nc(this.lastLoginAt),this.creationTime=nc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ux(s){var t;const r=s.auth,a=await s.getIdToken(),i=await Qo(s,Fx(r,{idToken:a}));gt(i==null?void 0:i.users.length,r,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const o=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?Wk(l.providerUserInfo):[],c=uM(s.providerData,o),d=s.isAnonymous,h=!(s.email&&l.passwordHash)&&!(c!=null&&c.length),g=d?h:!1,N={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new I0(l.createdAt,l.lastLoginAt),isAnonymous:g};Object.assign(s,N)}async function dM(s){const t=Xt(s);await Ux(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function uM(s,t){return[...s.filter(a=>!t.some(i=>i.providerId===a.providerId)),...t]}function Wk(s){return s.map(t=>{var{providerId:r}=t,a=Hg(t,["providerId"]);return{providerId:r,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xM(s,t){const r=await Uk(s,{},async()=>{const a=nd({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:l}=s.config,o=await $k(s,i,"/v1/token",`key=${l}`),c=await s._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Fk.fetch()(o,{method:"POST",headers:c,body:a})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function mM(s,t){return Ra(s,"POST","/v2/accounts:revokeToken",cn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){gt(t.idToken,"internal-error"),gt(typeof t.idToken<"u","internal-error"),gt(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):aN(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){gt(t.length!==0,"internal-error");const r=aN(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(gt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:a,refreshToken:i,expiresIn:l}=await xM(t,r);this.updateTokensAndExpiration(a,i,Number(l))}updateTokensAndExpiration(t,r,a){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,r){const{refreshToken:a,accessToken:i,expirationTime:l}=r,o=new Do;return a&&(gt(typeof a=="string","internal-error",{appName:t}),o.refreshToken=a),i&&(gt(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),l&&(gt(typeof l=="number","internal-error",{appName:t}),o.expirationTime=l),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Do,this.toJSON())}_performRefresh(){return $a("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(s,t){gt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class na{constructor(t){var{uid:r,auth:a,stsTokenManager:i}=t,l=Hg(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=a,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new I0(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const r=await Qo(this,this.stsTokenManager.getToken(this.auth,t));return gt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return oM(this,t)}reload(){return dM(this)}_assign(t){this!==t&&(gt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>Object.assign({},r)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new na(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(t){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),r&&await Ux(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cr(this.auth.app))return Promise.reject(Ga(this.auth));const t=await this.getIdToken();return await Qo(this,iM(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){var a,i,l,o,c,d,h,g;const N=(a=r.displayName)!==null&&a!==void 0?a:void 0,k=(i=r.email)!==null&&i!==void 0?i:void 0,E=(l=r.phoneNumber)!==null&&l!==void 0?l:void 0,y=(o=r.photoURL)!==null&&o!==void 0?o:void 0,O=(c=r.tenantId)!==null&&c!==void 0?c:void 0,_=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,A=(h=r.createdAt)!==null&&h!==void 0?h:void 0,z=(g=r.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:L,emailVerified:K,isAnonymous:H,providerData:G,stsTokenManager:R}=r;gt(L&&R,t,"internal-error");const u=Do.fromJSON(this.name,R);gt(typeof L=="string",t,"internal-error"),hn(N,t.name),hn(k,t.name),gt(typeof K=="boolean",t,"internal-error"),gt(typeof H=="boolean",t,"internal-error"),hn(E,t.name),hn(y,t.name),hn(O,t.name),hn(_,t.name),hn(A,t.name),hn(z,t.name);const q=new na({uid:L,auth:t,email:k,emailVerified:K,displayName:N,isAnonymous:H,photoURL:y,phoneNumber:E,tenantId:O,stsTokenManager:u,createdAt:A,lastLoginAt:z});return G&&Array.isArray(G)&&(q.providerData=G.map(U=>Object.assign({},U))),_&&(q._redirectEventId=_),q}static async _fromIdTokenResponse(t,r,a=!1){const i=new Do;i.updateFromServerResponse(r);const l=new na({uid:r.localId,auth:t,stsTokenManager:i,isAnonymous:a});return await Ux(l),l}static async _fromGetAccountInfoResponse(t,r,a){const i=r.users[0];gt(i.localId!==void 0,"internal-error");const l=i.providerUserInfo!==void 0?Wk(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(l!=null&&l.length),c=new Do;c.updateFromIdToken(a);const d=new na({uid:i.localId,auth:t,stsTokenManager:c,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new I0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(l!=null&&l.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=new Map;function Wa(s){sn(s instanceof Function,"Expected a class definition");let t=nN.get(s);return t?(sn(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,nN.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}qk.type="NONE";const iN=qk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(s,t,r){return`firebase:${s}:${t}:${r}`}class Ao{constructor(t,r,a){this.persistence=t,this.auth=r,this.userKey=a;const{config:i,name:l}=this.auth;this.fullUserKey=Vu(this.userKey,i.apiKey,l),this.fullPersistenceKey=Vu("persistence",i.apiKey,l),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await Fx(this.auth,{idToken:t}).catch(()=>{});return r?na._fromGetAccountInfoResponse(this.auth,r,t):null}return na._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,a="authUser"){if(!r.length)return new Ao(Wa(iN),t,a);const i=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let l=i[0]||Wa(iN);const o=Vu(a,t.config.apiKey,t.name);let c=null;for(const h of r)try{const g=await h._get(o);if(g){let N;if(typeof g=="string"){const k=await Fx(t,{idToken:g}).catch(()=>{});if(!k)break;N=await na._fromGetAccountInfoResponse(t,k,g)}else N=na._fromJSON(t,g);h!==l&&(c=N),l=h;break}}catch{}const d=i.filter(h=>h._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new Ao(l,t,a):(l=d[0],c&&await l._set(o,c.toJSON()),await Promise.all(r.map(async h=>{if(h!==l)try{await h._remove(o)}catch{}})),new Ao(l,t,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Kk(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Hk(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Xk(t))return"Blackberry";if(Jk(t))return"Webos";if(Gk(t))return"Safari";if((t.includes("chrome/")||Qk(t))&&!t.includes("edge/"))return"Chrome";if(Yk(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(r);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function Hk(s=ar()){return/firefox\//i.test(s)}function Gk(s=ar()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Qk(s=ar()){return/crios\//i.test(s)}function Kk(s=ar()){return/iemobile/i.test(s)}function Yk(s=ar()){return/android/i.test(s)}function Xk(s=ar()){return/blackberry/i.test(s)}function Jk(s=ar()){return/webos/i.test(s)}function Yg(s=ar()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function hM(s=ar()){var t;return Yg(s)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function pM(){return e_()&&document.documentMode===10}function Zk(s=ar()){return Yg(s)||Yk(s)||Jk(s)||Xk(s)||/windows phone/i.test(s)||Kk(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(s,t=[]){let r;switch(s){case"Browser":r=oN(ar());break;case"Worker":r=`${oN(ar())}-${s}`;break;default:r=s}const a=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Fi}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const a=l=>new Promise((o,c)=>{try{const d=t(l);o(d)}catch(d){c(d)}});a.onAbort=r,this.queue.push(a);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const a of this.queue)await a(t),a.onAbort&&r.push(a.onAbort)}catch(a){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM(s,t={}){return Ra(s,"GET","/v2/passwordPolicy",cn(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=6;class bM{constructor(t){var r,a,i,l;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:yM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(a=t.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var r,a,i,l,o,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,d),this.validatePasswordCharacterOptions(t,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(a=d.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(l=d.containsUppercaseLetter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(o=d.containsNumericCharacter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(t,r){const a=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;a&&(r.meetsMinPasswordLength=t.length>=a),i&&(r.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let a;for(let i=0;i<t.length;i++)a=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,r,a,i,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(t,r,a,i){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=a,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lN(this),this.idTokenSubscription=new lN(this),this.beforeStateQueue=new fM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Wa(r)),this._initializationPromise=this.queue(async()=>{var a,i,l;if(!this._deleted&&(this.persistenceManager=await Ao.create(this,t),(a=this._resolvePersistenceManagerAvailable)===null||a===void 0||a.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await Fx(this,{idToken:t}),a=await na._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(a)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(Cr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let i=a,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(t);(!o||o===c)&&(d!=null&&d.user)&&(i=d.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await Ux(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=JR()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Cr(this.app))return Promise.reject(Ga(this));const r=t?Xt(t):null;return r&&gt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&gt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Cr(this.app)?Promise.reject(Ga(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Cr(this.app)?Promise.reject(Ga(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wa(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await gM(this),r=new bM(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Bi("auth","Firebase",t())}onAuthStateChanged(t,r,a){return this.registerStateListener(this.authStateSubscription,t,r,a)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,a){return this.registerStateListener(this.idTokenSubscription,t,r,a)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(a.tenantId=this.tenantId),await mM(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,r){const a=await this.getOrInitRedirectPersistenceManager(r);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Wa(t)||this._popupRedirectResolver;gt(r,this,"argument-error"),this.redirectPersistenceManager=await Ao.create(this,[Wa(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,a;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===t?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(r=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,a,i){if(this._deleted)return()=>{};const l=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(c,this,"internal-error"),c.then(()=>{o||l(this.currentUser)}),typeof r=="function"){const d=t.addObserver(r,a,i);return()=>{o=!0,d()}}else{const d=t.addObserver(r);return()=>{o=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=e3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const a=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());a&&(r["X-Firebase-Client"]=a);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var t;if(Cr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return r!=null&&r.error&&YR(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Wi(s){return Xt(s)}class lN{constructor(t){this.auth=t,this.observer=null,this.addObserver=o_(r=>this.observer=r)}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jM(s){Fm=s}function t3(s){return Fm.loadJS(s)}function NM(){return Fm.recaptchaEnterpriseScript}function wM(){return Fm.gapiScript}function kM(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class IM{constructor(){this.enterprise=new PM}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class PM{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const SM="recaptcha-enterprise",s3="NO_RECAPTCHA";class CM{constructor(t){this.type=SM,this.auth=Wi(t)}async verify(t="verify",r=!1){async function a(l){if(!r){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(o,c)=>{nM(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new aM(d);return l.tenantId==null?l._agentRecaptchaConfig=h:l._tenantRecaptchaConfigs[l.tenantId]=h,o(h.siteKey)}}).catch(d=>{c(d)})})}function i(l,o,c){const d=window.grecaptcha;rN(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:t}).then(h=>{o(h)}).catch(()=>{o(s3)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new IM().execute("siteKey",{action:"verify"}):new Promise((l,o)=>{a(this.auth).then(c=>{if(!r&&rN(window.grecaptcha))i(c,l,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let d=NM();d.length!==0&&(d+=c),t3(d).then(()=>{i(c,l,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function _l(s,t,r,a=!1,i=!1){const l=new CM(s);let o;if(i)o=s3;else try{o=await l.verify(r)}catch{o=await l.verify(r,!0)}const c=Object.assign({},t);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return a?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function P0(s,t,r,a,i){var l,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((l=s._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await _l(s,t,r,r==="getOobCode");return a(s,c)}else return a(s,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await _l(s,t,r,r==="getOobCode");return a(s,d)}else return Promise.reject(c)});else if(i==="PHONE_PROVIDER")if(!((o=s._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const c=await _l(s,t,r);return a(s,c).catch(async d=>{var h;if(((h=s._getRecaptchaConfig())===null||h===void 0?void 0:h.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(d.code==="auth/missing-recaptcha-token"||d.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${r} flow.`);const g=await _l(s,t,r,!1,!0);return a(s,g)}return Promise.reject(d)})}else{const c=await _l(s,t,r,!1,!0);return a(s,c)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(s,t){const r=ei(s,"auth");if(r.isInitialized()){const i=r.getImmediate(),l=r.getOptions();if(Un(l,t??{}))return i;xa(i,"already-initialized")}return r.initialize({options:t})}function TM(s,t){const r=(t==null?void 0:t.persistence)||[],a=(Array.isArray(r)?r:[r]).map(Wa);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(a,t==null?void 0:t.popupRedirectResolver)}function _M(s,t,r){const a=Wi(s);gt(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const i=!!(r!=null&&r.disableWarnings),l=r3(t),{host:o,port:c}=DM(t),d=c===null?"":`:${c}`,h={url:`${l}//${o}${d}/`},g=Object.freeze({host:o,port:c,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!a._canInitEmulator){gt(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),gt(Un(h,a.config.emulator)&&Un(g,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=h,a.emulatorConfig=g,a.settings.appVerificationDisabledForTesting=!0,i||AM()}function r3(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function DM(s){const t=r3(s),r=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!r)return{host:"",port:null};const a=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(a);if(i){const l=i[1];return{host:l,port:cN(a.substr(l.length+1))}}else{const[l,o]=a.split(":");return{host:l,port:cN(o)}}}function cN(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function AM(){function s(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return $a("not implemented")}_getIdTokenResponse(t){return $a("not implemented")}_linkToIdToken(t,r){return $a("not implemented")}_getReauthenticationResolver(t){return $a("not implemented")}}async function RM(s,t){return Ra(s,"POST","/v1/accounts:update",t)}async function MM(s,t){return Ra(s,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM(s,t){return gd(s,"POST","/v1/accounts:signInWithPassword",cn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(s,t){return gd(s,"POST","/v1/accounts:signInWithEmailLink",cn(s,t))}async function VM(s,t){return gd(s,"POST","/v1/accounts:signInWithEmailLink",cn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends Xg{constructor(t,r,a,i=null){super("password",a),this._email=t,this._password=r,this._tenantId=i}static _fromEmailAndPassword(t,r){return new Bc(t,r,"password")}static _fromEmailAndCode(t,r,a=null){return new Bc(t,r,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return P0(t,r,"signInWithPassword",LM,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return OM(t,{email:this._email,oobCode:this._password});default:xa(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const a={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return P0(t,a,"signUpPassword",MM,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return VM(t,{idToken:r,email:this._email,oobCode:this._password});default:xa(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ro(s,t){return gd(s,"POST","/v1/accounts:signInWithIdp",cn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="http://localhost";class Mi extends Xg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Mi(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):xa("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:i}=r,l=Hg(r,["providerId","signInMethod"]);if(!a||!i)return null;const o=new Mi(a,i);return o.idToken=l.idToken||void 0,o.accessToken=l.accessToken||void 0,o.secret=l.secret,o.nonce=l.nonce,o.pendingToken=l.pendingToken||null,o}_getIdTokenResponse(t){const r=this.buildRequest();return Ro(t,r)}_linkToIdToken(t,r){const a=this.buildRequest();return a.idToken=r,Ro(t,a)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Ro(t,r)}buildRequest(){const t={requestUri:zM,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=nd(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FM(s){const t=Ol(Vl(s)).link,r=t?Ol(Vl(t)).deep_link_id:null,a=Ol(Vl(s)).deep_link_id;return(a?Ol(Vl(a)).link:null)||a||r||t||s}class Jg{constructor(t){var r,a,i,l,o,c;const d=Ol(Vl(t)),h=(r=d.apiKey)!==null&&r!==void 0?r:null,g=(a=d.oobCode)!==null&&a!==void 0?a:null,N=BM((i=d.mode)!==null&&i!==void 0?i:null);gt(h&&g&&N,"argument-error"),this.apiKey=h,this.operation=N,this.code=g,this.continueUrl=(l=d.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(o=d.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(t){const r=FM(t);try{return new Jg(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.providerId=ll.PROVIDER_ID}static credential(t,r){return Bc._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const a=Jg.parseLink(r);return gt(a,"argument-error"),Bc._fromEmailAndCode(t,a.code,a.tenantId)}}ll.PROVIDER_ID="password";ll.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ll.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd extends a3{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn extends yd{constructor(){super("facebook.com")}static credential(t){return Mi._fromParams({providerId:vn.PROVIDER_ID,signInMethod:vn.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return vn.credentialFromTaggedObject(t)}static credentialFromError(t){return vn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return vn.credential(t.oauthAccessToken)}catch{return null}}}vn.FACEBOOK_SIGN_IN_METHOD="facebook.com";vn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends yd{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Mi._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return jn.credentialFromTaggedObject(t)}static credentialFromError(t){return jn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:a}=t;if(!r&&!a)return null;try{return jn.credential(r,a)}catch{return null}}}jn.GOOGLE_SIGN_IN_METHOD="google.com";jn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn extends yd{constructor(){super("github.com")}static credential(t){return Mi._fromParams({providerId:Nn.PROVIDER_ID,signInMethod:Nn.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Nn.credentialFromTaggedObject(t)}static credentialFromError(t){return Nn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Nn.credential(t.oauthAccessToken)}catch{return null}}}Nn.GITHUB_SIGN_IN_METHOD="github.com";Nn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn extends yd{constructor(){super("twitter.com")}static credential(t,r){return Mi._fromParams({providerId:wn.PROVIDER_ID,signInMethod:wn.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return wn.credentialFromTaggedObject(t)}static credentialFromError(t){return wn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:a}=t;if(!r||!a)return null;try{return wn.credential(r,a)}catch{return null}}}wn.TWITTER_SIGN_IN_METHOD="twitter.com";wn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UM(s,t){return gd(s,"POST","/v1/accounts:signUp",cn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,a,i=!1){const l=await na._fromIdTokenResponse(t,a,i),o=dN(a);return new Li({user:l,providerId:o,_tokenResponse:a,operationType:r})}static async _forOperation(t,r,a){await t._updateTokensIfNecessary(a,!0);const i=dN(a);return new Li({user:t,providerId:i,_tokenResponse:a,operationType:r})}}function dN(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x extends Xr{constructor(t,r,a,i){var l;super(r.code,r.message),this.operationType=a,this.user=i,Object.setPrototypeOf(this,$x.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:r.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,r,a,i){return new $x(t,r,a,i)}}function n3(s,t,r,a){return(t==="reauthenticate"?r._getReauthenticationResolver(s):r._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?$x._fromErrorAndOperation(s,l,t,a):l})}async function $M(s,t,r=!1){const a=await Qo(s,t._linkToIdToken(s.auth,await s.getIdToken()),r);return Li._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WM(s,t,r=!1){const{auth:a}=s;if(Cr(a.app))return Promise.reject(Ga(a));const i="reauthenticate";try{const l=await Qo(s,n3(a,i,t,s),r);gt(l.idToken,a,"internal-error");const o=Kg(l.idToken);gt(o,a,"internal-error");const{sub:c}=o;return gt(s.uid===c,a,"user-mismatch"),Li._forOperation(s,i,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&xa(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i3(s,t,r=!1){if(Cr(s.app))return Promise.reject(Ga(s));const a="signIn",i=await n3(s,a,t),l=await Li._fromIdTokenResponse(s,a,i);return r||await s._updateCurrentUser(l.user),l}async function qM(s,t){return i3(Wi(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o3(s){const t=Wi(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function HM(s,t,r){if(Cr(s.app))return Promise.reject(Ga(s));const a=Wi(s),o=await P0(a,{returnSecureToken:!0,email:t,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",UM,"EMAIL_PASSWORD_PROVIDER").catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&o3(s),d}),c=await Li._fromIdTokenResponse(a,"signIn",o);return await a._updateCurrentUser(c.user),c}function GM(s,t,r){return Cr(s.app)?Promise.reject(Ga(s)):qM(Xt(s),ll.credential(t,r)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&o3(s),a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QM(s,t){return Ra(s,"POST","/v1/accounts:createAuthUri",cn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(s,t){const r=Bk()?Bx():"http://localhost",a={identifier:t,continueUri:r},{signinMethods:i}=await QM(Xt(s),a);return i||[]}function Zg(s,t){return YM(Xt(s),null,t)}async function YM(s,t,r){const{auth:a}=s,l={idToken:await s.getIdToken(),returnSecureToken:!0};t&&(l.email=t),r&&(l.password=r);const o=await Qo(s,RM(a,l));await s._updateTokensIfNecessary(o,!0)}function XM(s,t,r,a){return Xt(s).onIdTokenChanged(t,r,a)}function JM(s,t,r){return Xt(s).beforeAuthStateChanged(t,r)}function At(s,t,r,a){return Xt(s).onAuthStateChanged(t,r,a)}function Fc(s){return Xt(s).signOut()}const Wx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Wx,"1"),this.storage.removeItem(Wx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=1e3,e7=10;class c3 extends l3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Zk(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const a=this.storage.getItem(r),i=this.localCache[r];a!==i&&t(r,i,a)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((o,c,d)=>{this.notifyListeners(o,d)});return}const a=t.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(a);!r&&this.localCache[a]===o||this.notifyListeners(a,o)},l=this.storage.getItem(a);pM()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,e7):i()}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const i of Array.from(a))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:a}),!0)})},ZM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}c3.type="LOCAL";const t7=c3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3 extends l3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}d3.type="SESSION";const u3=d3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s7(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(i=>i.isListeningto(t));if(r)return r;const a=new Um(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:a,eventType:i,data:l}=r.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:a,eventType:i});const c=Array.from(o).map(async h=>h(r.origin,l)),d=await s7(c);r.ports[0].postMessage({status:"done",eventId:a,eventType:i,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Um.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(s="",t=10){let r="";for(let a=0;a<t;a++)r+=Math.floor(Math.random()*10);return s+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,a=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let l,o;return new Promise((c,d)=>{const h=ey("",20);i.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},a);o={messageChannel:i,onMessage(N){const k=N;if(k.data.eventId===h)switch(k.data.status){case"ack":clearTimeout(g),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),c(k.data.response);break;default:clearTimeout(g),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:h,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(){return window}function a7(s){Ia().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(){return typeof Ia().WorkerGlobalScope<"u"&&typeof Ia().importScripts=="function"}async function n7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function i7(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function o7(){return x3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3="firebaseLocalStorageDb",l7=1,qx="firebaseLocalStorage",h3="fbase_key";class bd{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function $m(s,t){return s.transaction([qx],t?"readwrite":"readonly").objectStore(qx)}function c7(){const s=indexedDB.deleteDatabase(m3);return new bd(s).toPromise()}function S0(){const s=indexedDB.open(m3,l7);return new Promise((t,r)=>{s.addEventListener("error",()=>{r(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(qx,{keyPath:h3})}catch(i){r(i)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(qx)?t(a):(a.close(),await c7(),t(await S0()))})})}async function uN(s,t,r){const a=$m(s,!0).put({[h3]:t,value:r});return new bd(a).toPromise()}async function d7(s,t){const r=$m(s,!1).get(t),a=await new bd(r).toPromise();return a===void 0?null:a.value}function xN(s,t){const r=$m(s,!0).delete(t);return new bd(r).toPromise()}const u7=800,x7=3;class p3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await S0(),this.db)}async _withRetries(t){let r=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(r++>x7)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Um._getInstance(o7()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await n7(),!this.activeServiceWorker)return;this.sender=new r7(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((t=a[0])===null||t===void 0)&&t.fulfilled&&!((r=a[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||i7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await S0();return await uN(t,Wx,"1"),await xN(t,Wx),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(a=>uN(a,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(a=>d7(a,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>xN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const l=$m(i,!1).getAll();return new bd(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],a=new Set;if(t.length!==0)for(const{fbase_key:i,value:l}of t)a.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(l)&&(this.notifyListeners(i,l),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!a.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const i of Array.from(a))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),u7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}p3.type="LOCAL";const m7=p3;new fd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h7(s,t){return t?Wa(t):(gt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty extends Xg{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ro(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Ro(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Ro(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function p7(s){return i3(s.auth,new ty(s),s.bypassAuthState)}function f7(s){const{auth:t,user:r}=s;return gt(r,t,"internal-error"),WM(r,new ty(s),s.bypassAuthState)}async function g7(s){const{auth:t,user:r}=s;return gt(r,t,"internal-error"),$M(r,new ty(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(t,r,a,i,l=!1){this.auth=t,this.resolver=a,this.user=i,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:a,postBody:i,tenantId:l,error:o,type:c}=t;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:r,sessionId:a,tenantId:l||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return p7;case"linkViaPopup":case"linkViaRedirect":return g7;case"reauthViaPopup":case"reauthViaRedirect":return f7;default:xa(this.auth,"internal-error")}}resolve(t){sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7=new fd(2e3,1e4);class bo extends f3{constructor(t,r,a,i,l){super(t,r,i,l),this.provider=a,this.authWindow=null,this.pollId=null,bo.currentPopupAction&&bo.currentPopupAction.cancel(),bo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return gt(t,this.auth,"internal-error"),t}async onExecution(){sn(this.filter.length===1,"Popup operations only handle one event");const t=ey();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ka(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ka(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,a;if(!((a=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ka(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,y7.get())};t()}}bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7="pendingRedirect",zu=new Map;class v7 extends f3{constructor(t,r,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a),this.eventId=null}async execute(){let t=zu.get(this.auth._key());if(!t){try{const a=await j7(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(r){t=()=>Promise.reject(r)}zu.set(this.auth._key(),t)}return this.bypassAuthState||zu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function j7(s,t){const r=k7(t),a=w7(s);if(!await a._isAvailable())return!1;const i=await a._get(r)==="true";return await a._remove(r),i}function N7(s,t){zu.set(s._key(),t)}function w7(s){return Wa(s._redirectPersistence)}function k7(s){return Vu(b7,s.config.apiKey,s.name)}async function I7(s,t,r=!1){if(Cr(s.app))return Promise.reject(Ga(s));const a=Wi(s),i=h7(a,t),o=await new v7(a,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await a._persistUserIfCurrent(o.user),await a._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P7=10*60*1e3;class S7{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(r=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!C7(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var a;if(t.error&&!g3(t)){const i=((a=t.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";r.onError(ka(this.auth,i))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const a=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=P7&&this.cachedEventUids.clear(),this.cachedEventUids.has(mN(t))}saveEventToCache(t){this.cachedEventUids.add(mN(t)),this.lastProcessedEventTime=Date.now()}}function mN(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function g3({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function C7(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return g3(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E7(s,t={}){return Ra(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_7=/^https?/;async function D7(s){if(s.config.emulator)return;const{authorizedDomains:t}=await E7(s);for(const r of t)try{if(A7(r))return}catch{}xa(s,"unauthorized-domain")}function A7(s){const t=Bx(),{protocol:r,hostname:a}=new URL(t);if(s.startsWith("chrome-extension://")){const o=new URL(s);return o.hostname===""&&a===""?r==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===a}if(!_7.test(r))return!1;if(T7.test(s))return a===s;const i=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R7=new fd(3e4,6e4);function hN(){const s=Ia().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let r=0;r<s.CP.length;r++)s.CP[r]=null}}function M7(s){return new Promise((t,r)=>{var a,i,l;function o(){hN(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{hN(),r(ka(s,"network-request-failed"))},timeout:R7.get()})}if(!((i=(a=Ia().gapi)===null||a===void 0?void 0:a.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((l=Ia().gapi)===null||l===void 0)&&l.load)o();else{const c=kM("iframefcb");return Ia()[c]=()=>{gapi.load?o():r(ka(s,"network-request-failed"))},t3(`${wM()}?onload=${c}`).catch(d=>r(d))}}).catch(t=>{throw Bu=null,t})}let Bu=null;function L7(s){return Bu=Bu||M7(s),Bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O7=new fd(5e3,15e3),V7="__/auth/iframe",z7="emulator/auth/iframe",B7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},F7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U7(s){const t=s.config;gt(t.authDomain,s,"auth-domain-config-required");const r=t.emulator?Qg(t,z7):`https://${s.config.authDomain}/${V7}`,a={apiKey:t.apiKey,appName:s.name,v:Fi},i=F7.get(s.config.apiHost);i&&(a.eid=i);const l=s._getFrameworks();return l.length&&(a.fw=l.join(",")),`${r}?${nd(a).slice(1)}`}async function $7(s){const t=await L7(s),r=Ia().gapi;return gt(r,s,"internal-error"),t.open({where:document.body,url:U7(s),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B7,dontclear:!0},a=>new Promise(async(i,l)=>{await a.restyle({setHideOnLeave:!1});const o=ka(s,"network-request-failed"),c=Ia().setTimeout(()=>{l(o)},O7.get());function d(){Ia().clearTimeout(c),i(a)}a.ping(d).then(d,()=>{l(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},q7=500,H7=600,G7="_blank",Q7="http://localhost";class pN{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function K7(s,t,r,a=q7,i=H7){const l=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-a)/2,0).toString();let c="";const d=Object.assign(Object.assign({},W7),{width:a.toString(),height:i.toString(),top:l,left:o}),h=ar().toLowerCase();r&&(c=Qk(h)?G7:r),Hk(h)&&(t=t||Q7,d.scrollbars="yes");const g=Object.entries(d).reduce((k,[E,y])=>`${k}${E}=${y},`,"");if(hM(h)&&c!=="_self")return Y7(t||"",c),new pN(null);const N=window.open(t||"",c,g);gt(N,s,"popup-blocked");try{N.focus()}catch{}return new pN(N)}function Y7(s,t){const r=document.createElement("a");r.href=s,r.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7="__/auth/handler",J7="emulator/auth/handler",Z7=encodeURIComponent("fac");async function fN(s,t,r,a,i,l){gt(s.config.authDomain,s,"auth-domain-config-required"),gt(s.config.apiKey,s,"invalid-api-key");const o={apiKey:s.config.apiKey,appName:s.name,authType:r,redirectUrl:a,v:Fi,eventId:i};if(t instanceof a3){t.setDefaultLanguage(s.languageCode),o.providerId=t.providerId||"",i_(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[g,N]of Object.entries(l||{}))o[g]=N}if(t instanceof yd){const g=t.getScopes().filter(N=>N!=="");g.length>0&&(o.scopes=g.join(","))}s.tenantId&&(o.tid=s.tenantId);const c=o;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const d=await s._getAppCheckToken(),h=d?`#${Z7}=${encodeURIComponent(d)}`:"";return`${e9(s)}?${nd(c).slice(1)}${h}`}function e9({config:s}){return s.emulator?Qg(s,J7):`https://${s.authDomain}/${X7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="webStorageSupport";class t9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=u3,this._completeRedirectFn=I7,this._overrideRedirectResult=N7}async _openPopup(t,r,a,i){var l;sn((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await fN(t,r,a,Bx(),i);return K7(t,o,ey())}async _openRedirect(t,r,a,i){await this._originValidation(t);const l=await fN(t,r,a,Bx(),i);return a7(l),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:i,promise:l}=this.eventManagers[r];return i?Promise.resolve(i):(sn(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(t);return this.eventManagers[r]={promise:a},a.catch(()=>{delete this.eventManagers[r]}),a}async initAndGetManager(t){const r=await $7(t),a=new S7(t);return r.register("authEvent",i=>(gt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:a.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=r,a}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(Fh,{type:Fh},i=>{var l;const o=(l=i==null?void 0:i[0])===null||l===void 0?void 0:l[Fh];o!==void 0&&r(!!o),xa(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=D7(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return Zk()||Gk()||Yg()}}const s9=t9;var gN="@firebase/auth",yN="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(a=>{t((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a9(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function n9(s){da(new Yr("auth",(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=a.options;gt(o&&!o.includes(":"),"invalid-api-key",{appName:a.name});const d={apiKey:o,authDomain:c,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:e3(s)},h=new vM(a,i,l,d);return TM(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,a)=>{t.getProvider("auth-internal").initialize()})),da(new Yr("auth-internal",t=>{const r=Wi(t.getProvider("auth").getImmediate());return(a=>new r9(a))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),wr(gN,yN,a9(s)),wr(gN,yN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9=5*60,o9=k4("authIdTokenMaxAge")||i9;let bN=null;const l9=s=>async t=>{const r=t&&await t.getIdTokenResult(),a=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(a&&a>o9)return;const i=r==null?void 0:r.token;bN!==i&&(bN=i,await fetch(s,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function sy(s=bm()){const t=ei(s,"auth");if(t.isInitialized())return t.getImmediate();const r=EM(s,{popupRedirectResolver:s9,persistence:[m7,t7,u3]}),a=k4("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const o=l9(l.toString());JM(r,o,()=>o(r.currentUser)),XM(r,c=>o(c))}}const i=j4("auth");return i&&_M(r,`http://${i}`),r}function c9(){var s,t;return(t=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&t!==void 0?t:document}jM({loadJS(s){return new Promise((t,r)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=t,a.onerror=i=>{const l=ka("internal-error");l.customData=i,r(l)},a.type="text/javascript",a.charset="UTF-8",c9().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});n9("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3="firebasestorage.googleapis.com",d9="storageBucket",u9=2*60*1e3,x9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma extends Xr{constructor(t,r,a=0){super(Uh(t),`Firebase Storage: ${r} (${Uh(t)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ma.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Uh(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Da;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Da||(Da={}));function Uh(s){return"storage/"+s}function m9(){const s="An unknown error occurred, please check the error payload for server response.";return new Ma(Da.UNKNOWN,s)}function h9(){return new Ma(Da.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function p9(){return new Ma(Da.CANCELED,"User canceled the upload/download.")}function f9(s){return new Ma(Da.INVALID_URL,"Invalid URL '"+s+"'.")}function g9(s){return new Ma(Da.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function vN(s){return new Ma(Da.INVALID_ARGUMENT,s)}function b3(){return new Ma(Da.APP_DELETED,"The Firebase app was deleted.")}function y9(s){return new Ma(Da.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let a;try{a=ia.makeFromUrl(t,r)}catch{return new ia(t,"")}if(a.path==="")return a;throw g9(t)}static makeFromUrl(t,r){let a=null;const i="([A-Za-z0-9.\\-_]+)";function l(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),d={bucket:1,path:3};function h(K){K.path_=decodeURIComponent(K.path)}const g="v[A-Za-z0-9_]+",N=r.replace(/[.]/g,"\\."),k="(/([^?#]*).*)?$",E=new RegExp(`^https?://${N}/${g}/b/${i}/o${k}`,"i"),y={bucket:1,path:3},O=r===y3?"(?:storage.googleapis.com|storage.cloud.google.com)":r,_="([^?#]*)",A=new RegExp(`^https?://${O}/${i}/${_}`,"i"),L=[{regex:c,indices:d,postModify:l},{regex:E,indices:y,postModify:h},{regex:A,indices:{bucket:1,path:2},postModify:h}];for(let K=0;K<L.length;K++){const H=L[K],G=H.regex.exec(t);if(G){const R=G[H.indices.bucket];let u=G[H.indices.path];u||(u=""),a=new ia(R,u),H.postModify(a);break}}if(a==null)throw f9(t);return a}}class b9{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(s,t,r){let a=1,i=null,l=null,o=!1,c=0;function d(){return c===2}let h=!1;function g(..._){h||(h=!0,t.apply(null,_))}function N(_){i=setTimeout(()=>{i=null,s(E,d())},_)}function k(){l&&clearTimeout(l)}function E(_,...A){if(h){k();return}if(_){k(),g.call(null,_,...A);return}if(d()||o){k(),g.call(null,_,...A);return}a<64&&(a*=2);let L;c===1?(c=2,L=0):L=(a+Math.random())*1e3,N(L)}let y=!1;function O(_){y||(y=!0,k(),!h&&(i!==null?(_||(c=2),clearTimeout(i),N(0)):_||(c=1)))}return N(0),l=setTimeout(()=>{o=!0,O(!0)},r),O}function j9(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N9(s){return s!==void 0}function jN(s,t,r,a){if(a<t)throw vN(`Invalid value for '${s}'. Expected ${t} or greater.`);if(a>r)throw vN(`Invalid value for '${s}'. Expected ${r} or less.`)}function w9(s){const t=encodeURIComponent;let r="?";for(const a in s)if(s.hasOwnProperty(a)){const i=t(a)+"="+t(s[a]);r=r+i+"&"}return r=r.slice(0,-1),r}var Hx;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Hx||(Hx={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9(s,t){const r=s>=500&&s<600,i=[408,429].indexOf(s)!==-1,l=t.indexOf(s)!==-1;return r||i||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(t,r,a,i,l,o,c,d,h,g,N,k=!0){this.url_=t,this.method_=r,this.headers_=a,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=g,this.connectionFactory_=N,this.retry=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,y)=>{this.resolve_=E,this.reject_=y,this.start_()})}start_(){const t=(a,i)=>{if(i){a(!1,new du(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const o=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&l.addUploadProgressListener(o),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(o),this.pendingConnection_=null;const c=l.getErrorCode()===Hx.NO_ERROR,d=l.getStatus();if(!c||k9(d,this.additionalRetryCodes_)&&this.retry){const g=l.getErrorCode()===Hx.ABORT;a(!1,new du(!1,null,g));return}const h=this.successCodes_.indexOf(d)!==-1;a(!0,new du(h,l))})},r=(a,i)=>{const l=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());N9(d)?l(d):l()}catch(d){o(d)}else if(c!==null){const d=m9();d.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,d)):o(d)}else if(i.canceled){const d=this.appDelete_?b3():p9();o(d)}else{const d=h9();o(d)}};this.canceled_?r(!1,new du(!1,null,!0)):this.backoffId_=v9(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&j9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class du{constructor(t,r,a){this.wasSuccessCode=t,this.connection=r,this.canceled=!!a}}function P9(s,t){t!==null&&t.length>0&&(s.Authorization="Firebase "+t)}function S9(s,t){s["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function C9(s,t){t&&(s["X-Firebase-GMPID"]=t)}function E9(s,t){t!==null&&(s["X-Firebase-AppCheck"]=t)}function T9(s,t,r,a,i,l,o=!0){const c=w9(s.urlParams),d=s.url+c,h=Object.assign({},s.headers);return C9(h,t),P9(h,r),S9(h,l),E9(h,a),new I9(d,s.method,h,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _9(s){if(s.length===0)return null;const t=s.lastIndexOf("/");return t===-1?"":s.slice(0,t)}function D9(s){const t=s.lastIndexOf("/",s.length-2);return t===-1?s:s.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(t,r){this._service=t,r instanceof ia?this._location=r:this._location=ia.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new Gx(t,r)}get root(){const t=new ia(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return D9(this._location.path)}get storage(){return this._service}get parent(){const t=_9(this._location.path);if(t===null)return null;const r=new ia(this._location.bucket,t);return new Gx(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw y9(t)}}function NN(s,t){const r=t==null?void 0:t[d9];return r==null?null:ia.makeFromBucketSpec(r,s)}function A9(s,t,r,a={}){s.host=`${t}:${r}`,s._protocol="http";const{mockUserToken:i}=a;i&&(s._overrideAuthToken=typeof i=="string"?i:I4(i,s.app.options.projectId))}class R9{constructor(t,r,a,i,l){this.app=t,this._authProvider=r,this._appCheckProvider=a,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=y3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=u9,this._maxUploadRetryTime=x9,this._requests=new Set,i!=null?this._bucket=ia.makeFromBucketSpec(i,this._host):this._bucket=NN(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=ia.makeFromBucketSpec(this._url,t):this._bucket=NN(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){jN("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){jN("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Cr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Gx(this,t)}_makeRequest(t,r,a,i,l=!0){if(this._deleted)return new b9(b3());{const o=T9(t,this._appId,a,i,r,this._firebaseVersion,l);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,r){const[a,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,a,i).getPromise()}}const wN="@firebase/storage",kN="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3="storage";function M9(s=bm(),t){s=Xt(s);const a=ei(s,v3).getImmediate({identifier:t}),i=N4("storage");return i&&L9(a,...i),a}function L9(s,t,r,a={}){A9(s,t,r,a)}function O9(s,{instanceIdentifier:t}){const r=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),i=s.getProvider("app-check-internal");return new R9(r,a,i,t,Fi)}function V9(){da(new Yr(v3,O9,"PUBLIC").setMultipleInstances(!0)),wr(wN,kN,""),wr(wN,kN,"esm2017")}V9();const z9={apiKey:"AIzaSyDYacL_WIzZUSP-Tjl3794P_jHocMDqN9g",authDomain:"blackkstreaming-55f0e.firebaseapp.com",projectId:"blackkstreaming-55f0e",storageBucket:"blackkstreaming-55f0e.firebasestorage.app",messagingSenderId:"998157647233",appId:"1:998157647233:web:3e5b8128a0275ae4553c80",measurementId:"G-GFM50WNMSP"},vd=D4(z9);qR(vd);const I=p6(vd);M9(vd);const Qe=sy(vd),ry=v.createContext({});function ay(s){const t=v.useRef(null);return t.current===null&&(t.current=s()),t.current}const ny=typeof window<"u",j3=ny?v.useLayoutEffect:v.useEffect,Wm=v.createContext(null);function iy(s,t){s.indexOf(t)===-1&&s.push(t)}function oy(s,t){const r=s.indexOf(t);r>-1&&s.splice(r,1)}const rn=(s,t,r)=>r>t?t:r<s?s:r;let ly=()=>{};const an={},N3=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function w3(s){return typeof s=="object"&&s!==null}const k3=s=>/^0[^.\s]+$/u.test(s);function cy(s){let t;return()=>(t===void 0&&(t=s()),t)}const Gr=s=>s,B9=(s,t)=>r=>t(s(r)),jd=(...s)=>s.reduce(B9),Uc=(s,t,r)=>{const a=t-s;return a===0?1:(r-s)/a};class dy{constructor(){this.subscriptions=[]}add(t){return iy(this.subscriptions,t),()=>oy(this.subscriptions,t)}notify(t,r,a){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,r,a);else for(let l=0;l<i;l++){const o=this.subscriptions[l];o&&o(t,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Pa=s=>s*1e3,Sa=s=>s/1e3;function I3(s,t){return t?s*(1e3/t):0}const P3=(s,t,r)=>(((1-3*r+3*t)*s+(3*r-6*t))*s+3*t)*s,F9=1e-7,U9=12;function $9(s,t,r,a,i){let l,o,c=0;do o=t+(r-t)/2,l=P3(o,a,i)-s,l>0?r=o:t=o;while(Math.abs(l)>F9&&++c<U9);return o}function Nd(s,t,r,a){if(s===t&&r===a)return Gr;const i=l=>$9(l,0,1,s,r);return l=>l===0||l===1?l:P3(i(l),t,a)}const S3=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,C3=s=>t=>1-s(1-t),E3=Nd(.33,1.53,.69,.99),uy=C3(E3),T3=S3(uy),_3=s=>(s*=2)<1?.5*uy(s):.5*(2-Math.pow(2,-10*(s-1))),xy=s=>1-Math.sin(Math.acos(s)),D3=C3(xy),A3=S3(xy),W9=Nd(.42,0,1,1),q9=Nd(0,0,.58,1),R3=Nd(.42,0,.58,1),H9=s=>Array.isArray(s)&&typeof s[0]!="number",M3=s=>Array.isArray(s)&&typeof s[0]=="number",G9={linear:Gr,easeIn:W9,easeInOut:R3,easeOut:q9,circIn:xy,circInOut:A3,circOut:D3,backIn:uy,backInOut:T3,backOut:E3,anticipate:_3},Q9=s=>typeof s=="string",IN=s=>{if(M3(s)){ly(s.length===4);const[t,r,a,i]=s;return Nd(t,r,a,i)}else if(Q9(s))return G9[s];return s},uu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],PN={value:null,addProjectionMetrics:null};function K9(s,t){let r=new Set,a=new Set,i=!1,l=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},d=0;function h(N){o.has(N)&&(g.schedule(N),s()),d++,N(c)}const g={schedule:(N,k=!1,E=!1)=>{const O=E&&i?r:a;return k&&o.add(N),O.has(N)||O.add(N),N},cancel:N=>{a.delete(N),o.delete(N)},process:N=>{if(c=N,i){l=!0;return}i=!0,[r,a]=[a,r],r.forEach(h),t&&PN.value&&PN.value.frameloop[t].push(d),d=0,r.clear(),i=!1,l&&(l=!1,g.process(N))}};return g}const Y9=40;function L3(s,t){let r=!1,a=!0;const i={delta:0,timestamp:0,isProcessing:!1},l=()=>r=!0,o=uu.reduce((L,K)=>(L[K]=K9(l,t?K:void 0),L),{}),{setup:c,read:d,resolveKeyframes:h,preUpdate:g,update:N,preRender:k,render:E,postRender:y}=o,O=()=>{const L=an.useManualTiming?i.timestamp:performance.now();r=!1,an.useManualTiming||(i.delta=a?1e3/60:Math.max(Math.min(L-i.timestamp,Y9),1)),i.timestamp=L,i.isProcessing=!0,c.process(i),d.process(i),h.process(i),g.process(i),N.process(i),k.process(i),E.process(i),y.process(i),i.isProcessing=!1,r&&t&&(a=!1,s(O))},_=()=>{r=!0,a=!0,i.isProcessing||s(O)};return{schedule:uu.reduce((L,K)=>{const H=o[K];return L[K]=(G,R=!1,u=!1)=>(r||_(),H.schedule(G,R,u)),L},{}),cancel:L=>{for(let K=0;K<uu.length;K++)o[uu[K]].cancel(L)},state:i,steps:o}}const{schedule:xs,cancel:Kn,state:Bs,steps:$h}=L3(typeof requestAnimationFrame<"u"?requestAnimationFrame:Gr,!0);let Fu;function X9(){Fu=void 0}const br={now:()=>(Fu===void 0&&br.set(Bs.isProcessing||an.useManualTiming?Bs.timestamp:performance.now()),Fu),set:s=>{Fu=s,queueMicrotask(X9)}},O3=s=>t=>typeof t=="string"&&t.startsWith(s),my=O3("--"),J9=O3("var(--"),hy=s=>J9(s)?Z9.test(s.split("/*")[0].trim()):!1,Z9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,cl={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},$c={...cl,transform:s=>rn(0,1,s)},xu={...cl,default:1},ic=s=>Math.round(s*1e5)/1e5,py=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function eL(s){return s==null}const tL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fy=(s,t)=>r=>!!(typeof r=="string"&&tL.test(r)&&r.startsWith(s)||t&&!eL(r)&&Object.prototype.hasOwnProperty.call(r,t)),V3=(s,t,r)=>a=>{if(typeof a!="string")return a;const[i,l,o,c]=a.match(py);return{[s]:parseFloat(i),[t]:parseFloat(l),[r]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},sL=s=>rn(0,255,s),Wh={...cl,transform:s=>Math.round(sL(s))},bi={test:fy("rgb","red"),parse:V3("red","green","blue"),transform:({red:s,green:t,blue:r,alpha:a=1})=>"rgba("+Wh.transform(s)+", "+Wh.transform(t)+", "+Wh.transform(r)+", "+ic($c.transform(a))+")"};function rL(s){let t="",r="",a="",i="";return s.length>5?(t=s.substring(1,3),r=s.substring(3,5),a=s.substring(5,7),i=s.substring(7,9)):(t=s.substring(1,2),r=s.substring(2,3),a=s.substring(3,4),i=s.substring(4,5),t+=t,r+=r,a+=a,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:i?parseInt(i,16)/255:1}}const C0={test:fy("#"),parse:rL,transform:bi.transform},wd=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),pn=wd("deg"),Ca=wd("%"),bt=wd("px"),aL=wd("vh"),nL=wd("vw"),SN=(()=>({...Ca,parse:s=>Ca.parse(s)/100,transform:s=>Ca.transform(s*100)}))(),vo={test:fy("hsl","hue"),parse:V3("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:r,alpha:a=1})=>"hsla("+Math.round(s)+", "+Ca.transform(ic(t))+", "+Ca.transform(ic(r))+", "+ic($c.transform(a))+")"},Zs={test:s=>bi.test(s)||C0.test(s)||vo.test(s),parse:s=>bi.test(s)?bi.parse(s):vo.test(s)?vo.parse(s):C0.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?bi.transform(s):vo.transform(s)},iL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function oL(s){var t,r;return isNaN(s)&&typeof s=="string"&&(((t=s.match(py))==null?void 0:t.length)||0)+(((r=s.match(iL))==null?void 0:r.length)||0)>0}const z3="number",B3="color",lL="var",cL="var(",CN="${}",dL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wc(s){const t=s.toString(),r=[],a={color:[],number:[],var:[]},i=[];let l=0;const c=t.replace(dL,d=>(Zs.test(d)?(a.color.push(l),i.push(B3),r.push(Zs.parse(d))):d.startsWith(cL)?(a.var.push(l),i.push(lL),r.push(d)):(a.number.push(l),i.push(z3),r.push(parseFloat(d))),++l,CN)).split(CN);return{values:r,split:c,indexes:a,types:i}}function F3(s){return Wc(s).values}function U3(s){const{split:t,types:r}=Wc(s),a=t.length;return i=>{let l="";for(let o=0;o<a;o++)if(l+=t[o],i[o]!==void 0){const c=r[o];c===z3?l+=ic(i[o]):c===B3?l+=Zs.transform(i[o]):l+=i[o]}return l}}const uL=s=>typeof s=="number"?0:s;function xL(s){const t=F3(s);return U3(s)(t.map(uL))}const Yn={test:oL,parse:F3,createTransformer:U3,getAnimatableNone:xL};function qh(s,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?s+(t-s)*6*r:r<1/2?t:r<2/3?s+(t-s)*(2/3-r)*6:s}function mL({hue:s,saturation:t,lightness:r,alpha:a}){s/=360,t/=100,r/=100;let i=0,l=0,o=0;if(!t)i=l=o=r;else{const c=r<.5?r*(1+t):r+t-r*t,d=2*r-c;i=qh(d,c,s+1/3),l=qh(d,c,s),o=qh(d,c,s-1/3)}return{red:Math.round(i*255),green:Math.round(l*255),blue:Math.round(o*255),alpha:a}}function Qx(s,t){return r=>r>0?t:s}const cs=(s,t,r)=>s+(t-s)*r,Hh=(s,t,r)=>{const a=s*s,i=r*(t*t-a)+a;return i<0?0:Math.sqrt(i)},hL=[C0,bi,vo],pL=s=>hL.find(t=>t.test(s));function EN(s){const t=pL(s);if(!t)return!1;let r=t.parse(s);return t===vo&&(r=mL(r)),r}const TN=(s,t)=>{const r=EN(s),a=EN(t);if(!r||!a)return Qx(s,t);const i={...r};return l=>(i.red=Hh(r.red,a.red,l),i.green=Hh(r.green,a.green,l),i.blue=Hh(r.blue,a.blue,l),i.alpha=cs(r.alpha,a.alpha,l),bi.transform(i))},E0=new Set(["none","hidden"]);function fL(s,t){return E0.has(s)?r=>r<=0?s:t:r=>r>=1?t:s}function gL(s,t){return r=>cs(s,t,r)}function gy(s){return typeof s=="number"?gL:typeof s=="string"?hy(s)?Qx:Zs.test(s)?TN:vL:Array.isArray(s)?$3:typeof s=="object"?Zs.test(s)?TN:yL:Qx}function $3(s,t){const r=[...s],a=r.length,i=s.map((l,o)=>gy(l)(l,t[o]));return l=>{for(let o=0;o<a;o++)r[o]=i[o](l);return r}}function yL(s,t){const r={...s,...t},a={};for(const i in r)s[i]!==void 0&&t[i]!==void 0&&(a[i]=gy(s[i])(s[i],t[i]));return i=>{for(const l in a)r[l]=a[l](i);return r}}function bL(s,t){const r=[],a={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const l=t.types[i],o=s.indexes[l][a[l]],c=s.values[o]??0;r[i]=c,a[l]++}return r}const vL=(s,t)=>{const r=Yn.createTransformer(t),a=Wc(s),i=Wc(t);return a.indexes.var.length===i.indexes.var.length&&a.indexes.color.length===i.indexes.color.length&&a.indexes.number.length>=i.indexes.number.length?E0.has(s)&&!i.values.length||E0.has(t)&&!a.values.length?fL(s,t):jd($3(bL(a,i),i.values),r):Qx(s,t)};function W3(s,t,r){return typeof s=="number"&&typeof t=="number"&&typeof r=="number"?cs(s,t,r):gy(s)(s,t)}const jL=s=>{const t=({timestamp:r})=>s(r);return{start:(r=!0)=>xs.update(t,r),stop:()=>Kn(t),now:()=>Bs.isProcessing?Bs.timestamp:br.now()}},q3=(s,t,r=10)=>{let a="";const i=Math.max(Math.round(t/r),2);for(let l=0;l<i;l++)a+=s(l/(i-1))+", ";return`linear(${a.substring(0,a.length-2)})`},Kx=2e4;function yy(s){let t=0;const r=50;let a=s.next(t);for(;!a.done&&t<Kx;)t+=r,a=s.next(t);return t>=Kx?1/0:t}function NL(s,t=100,r){const a=r({...s,keyframes:[0,t]}),i=Math.min(yy(a),Kx);return{type:"keyframes",ease:l=>a.next(i*l).value/t,duration:Sa(i)}}const wL=5;function H3(s,t,r){const a=Math.max(t-wL,0);return I3(r-s(a),t-a)}const fs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Gh=.001;function kL({duration:s=fs.duration,bounce:t=fs.bounce,velocity:r=fs.velocity,mass:a=fs.mass}){let i,l,o=1-t;o=rn(fs.minDamping,fs.maxDamping,o),s=rn(fs.minDuration,fs.maxDuration,Sa(s)),o<1?(i=h=>{const g=h*o,N=g*s,k=g-r,E=T0(h,o),y=Math.exp(-N);return Gh-k/E*y},l=h=>{const N=h*o*s,k=N*r+r,E=Math.pow(o,2)*Math.pow(h,2)*s,y=Math.exp(-N),O=T0(Math.pow(h,2),o);return(-i(h)+Gh>0?-1:1)*((k-E)*y)/O}):(i=h=>{const g=Math.exp(-h*s),N=(h-r)*s+1;return-Gh+g*N},l=h=>{const g=Math.exp(-h*s),N=(r-h)*(s*s);return g*N});const c=5/s,d=PL(i,l,c);if(s=Pa(s),isNaN(d))return{stiffness:fs.stiffness,damping:fs.damping,duration:s};{const h=Math.pow(d,2)*a;return{stiffness:h,damping:o*2*Math.sqrt(a*h),duration:s}}}const IL=12;function PL(s,t,r){let a=r;for(let i=1;i<IL;i++)a=a-s(a)/t(a);return a}function T0(s,t){return s*Math.sqrt(1-t*t)}const SL=["duration","bounce"],CL=["stiffness","damping","mass"];function _N(s,t){return t.some(r=>s[r]!==void 0)}function EL(s){let t={velocity:fs.velocity,stiffness:fs.stiffness,damping:fs.damping,mass:fs.mass,isResolvedFromDuration:!1,...s};if(!_N(s,CL)&&_N(s,SL))if(s.visualDuration){const r=s.visualDuration,a=2*Math.PI/(r*1.2),i=a*a,l=2*rn(.05,1,1-(s.bounce||0))*Math.sqrt(i);t={...t,mass:fs.mass,stiffness:i,damping:l}}else{const r=kL(s);t={...t,...r,mass:fs.mass},t.isResolvedFromDuration=!0}return t}function Yx(s=fs.visualDuration,t=fs.bounce){const r=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:a,restDelta:i}=r;const l=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],c={done:!1,value:l},{stiffness:d,damping:h,mass:g,duration:N,velocity:k,isResolvedFromDuration:E}=EL({...r,velocity:-Sa(r.velocity||0)}),y=k||0,O=h/(2*Math.sqrt(d*g)),_=o-l,A=Sa(Math.sqrt(d/g)),z=Math.abs(_)<5;a||(a=z?fs.restSpeed.granular:fs.restSpeed.default),i||(i=z?fs.restDelta.granular:fs.restDelta.default);let L;if(O<1){const H=T0(A,O);L=G=>{const R=Math.exp(-O*A*G);return o-R*((y+O*A*_)/H*Math.sin(H*G)+_*Math.cos(H*G))}}else if(O===1)L=H=>o-Math.exp(-A*H)*(_+(y+A*_)*H);else{const H=A*Math.sqrt(O*O-1);L=G=>{const R=Math.exp(-O*A*G),u=Math.min(H*G,300);return o-R*((y+O*A*_)*Math.sinh(u)+H*_*Math.cosh(u))/H}}const K={calculatedDuration:E&&N||null,next:H=>{const G=L(H);if(E)c.done=H>=N;else{let R=H===0?y:0;O<1&&(R=H===0?Pa(y):H3(L,H,G));const u=Math.abs(R)<=a,q=Math.abs(o-G)<=i;c.done=u&&q}return c.value=c.done?o:G,c},toString:()=>{const H=Math.min(yy(K),Kx),G=q3(R=>K.next(H*R).value,H,30);return H+"ms "+G},toTransition:()=>{}};return K}Yx.applyToOptions=s=>{const t=NL(s,100,Yx);return s.ease=t.ease,s.duration=Pa(t.duration),s.type="keyframes",s};function _0({keyframes:s,velocity:t=0,power:r=.8,timeConstant:a=325,bounceDamping:i=10,bounceStiffness:l=500,modifyTarget:o,min:c,max:d,restDelta:h=.5,restSpeed:g}){const N=s[0],k={done:!1,value:N},E=u=>c!==void 0&&u<c||d!==void 0&&u>d,y=u=>c===void 0?d:d===void 0||Math.abs(c-u)<Math.abs(d-u)?c:d;let O=r*t;const _=N+O,A=o===void 0?_:o(_);A!==_&&(O=A-N);const z=u=>-O*Math.exp(-u/a),L=u=>A+z(u),K=u=>{const q=z(u),U=L(u);k.done=Math.abs(q)<=h,k.value=k.done?A:U};let H,G;const R=u=>{E(k.value)&&(H=u,G=Yx({keyframes:[k.value,y(k.value)],velocity:H3(L,u,k.value),damping:i,stiffness:l,restDelta:h,restSpeed:g}))};return R(0),{calculatedDuration:null,next:u=>{let q=!1;return!G&&H===void 0&&(q=!0,K(u),R(u)),H!==void 0&&u>=H?G.next(u-H):(!q&&K(u),k)}}}function TL(s,t,r){const a=[],i=r||an.mix||W3,l=s.length-1;for(let o=0;o<l;o++){let c=i(s[o],s[o+1]);if(t){const d=Array.isArray(t)?t[o]||Gr:t;c=jd(d,c)}a.push(c)}return a}function _L(s,t,{clamp:r=!0,ease:a,mixer:i}={}){const l=s.length;if(ly(l===t.length),l===1)return()=>t[0];if(l===2&&t[0]===t[1])return()=>t[1];const o=s[0]===s[1];s[0]>s[l-1]&&(s=[...s].reverse(),t=[...t].reverse());const c=TL(t,a,i),d=c.length,h=g=>{if(o&&g<s[0])return t[0];let N=0;if(d>1)for(;N<s.length-2&&!(g<s[N+1]);N++);const k=Uc(s[N],s[N+1],g);return c[N](k)};return r?g=>h(rn(s[0],s[l-1],g)):h}function DL(s,t){const r=s[s.length-1];for(let a=1;a<=t;a++){const i=Uc(0,t,a);s.push(cs(r,1,i))}}function AL(s){const t=[0];return DL(t,s.length-1),t}function RL(s,t){return s.map(r=>r*t)}function ML(s,t){return s.map(()=>t||R3).splice(0,s.length-1)}function oc({duration:s=300,keyframes:t,times:r,ease:a="easeInOut"}){const i=H9(a)?a.map(IN):IN(a),l={done:!1,value:t[0]},o=RL(r&&r.length===t.length?r:AL(t),s),c=_L(o,t,{ease:Array.isArray(i)?i:ML(t,i)});return{calculatedDuration:s,next:d=>(l.value=c(d),l.done=d>=s,l)}}const LL=s=>s!==null;function by(s,{repeat:t,repeatType:r="loop"},a,i=1){const l=s.filter(LL),c=i<0||t&&r!=="loop"&&t%2===1?0:l.length-1;return!c||a===void 0?l[c]:a}const OL={decay:_0,inertia:_0,tween:oc,keyframes:oc,spring:Yx};function G3(s){typeof s.type=="string"&&(s.type=OL[s.type])}class vy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const VL=s=>s/100;class jy extends vy{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(r=!0)=>{var a,i;if(r){const{motionValue:l}=this.options;l&&l.updatedAt!==br.now()&&this.tick(br.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(a=this.options).onStop)==null||i.call(a))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;G3(t);const{type:r=oc,repeat:a=0,repeatDelay:i=0,repeatType:l,velocity:o=0}=t;let{keyframes:c}=t;const d=r||oc;d!==oc&&typeof c[0]!="number"&&(this.mixKeyframes=jd(VL,W3(c[0],c[1])),c=[0,100]);const h=d({...t,keyframes:c});l==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...c].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=yy(h));const{calculatedDuration:g}=h;this.calculatedDuration=g,this.resolvedDuration=g+i,this.totalDuration=this.resolvedDuration*(a+1)-i,this.generator=h}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:a,totalDuration:i,mixKeyframes:l,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return a.next(0);const{delay:h=0,keyframes:g,repeat:N,repeatType:k,repeatDelay:E,type:y,onUpdate:O,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const A=this.currentTime-h*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?A<0:A>i;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let L=this.currentTime,K=a;if(N){const u=Math.min(this.currentTime,i)/c;let q=Math.floor(u),U=u%1;!U&&u>=1&&(U=1),U===1&&q--,q=Math.min(q,N+1),!!(q%2)&&(k==="reverse"?(U=1-U,E&&(U-=E/c)):k==="mirror"&&(K=o)),L=rn(0,1,U)*c}const H=z?{done:!1,value:g[0]}:K.next(L);l&&(H.value=l(H.value));let{done:G}=H;!z&&d!==null&&(G=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&G);return R&&y!==_0&&(H.value=by(g,this.options,_,this.speed)),O&&O(H.value),R&&this.finish(),H}then(t,r){return this.finished.then(t,r)}get duration(){return Sa(this.calculatedDuration)}get time(){return Sa(this.currentTime)}set time(t){var r;t=Pa(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(br.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Sa(this.currentTime))}play(){var i,l;if(this.isStopped)return;const{driver:t=jL,startTime:r}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(l=(i=this.options).onPlay)==null||l.call(i);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(br.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function zL(s){for(let t=1;t<s.length;t++)s[t]??(s[t]=s[t-1])}const vi=s=>s*180/Math.PI,D0=s=>{const t=vi(Math.atan2(s[1],s[0]));return A0(t)},BL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:D0,rotateZ:D0,skewX:s=>vi(Math.atan(s[1])),skewY:s=>vi(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},A0=s=>(s=s%360,s<0&&(s+=360),s),DN=D0,AN=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),RN=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),FL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:AN,scaleY:RN,scale:s=>(AN(s)+RN(s))/2,rotateX:s=>A0(vi(Math.atan2(s[6],s[5]))),rotateY:s=>A0(vi(Math.atan2(-s[2],s[0]))),rotateZ:DN,rotate:DN,skewX:s=>vi(Math.atan(s[4])),skewY:s=>vi(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function R0(s){return s.includes("scale")?1:0}function M0(s,t){if(!s||s==="none")return R0(t);const r=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,i;if(r)a=FL,i=r;else{const c=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=BL,i=c}if(!i)return R0(t);const l=a[t],o=i[1].split(",").map($L);return typeof l=="function"?l(o):o[l]}const UL=(s,t)=>{const{transform:r="none"}=getComputedStyle(s);return M0(r,t)};function $L(s){return parseFloat(s.trim())}const dl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ul=(()=>new Set(dl))(),MN=s=>s===cl||s===bt,WL=new Set(["x","y","z"]),qL=dl.filter(s=>!WL.has(s));function HL(s){const t=[];return qL.forEach(r=>{const a=s.getValue(r);a!==void 0&&(t.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),t}const wi={width:({x:s},{paddingLeft:t="0",paddingRight:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),height:({y:s},{paddingTop:t="0",paddingBottom:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:(s,{transform:t})=>M0(t,"x"),y:(s,{transform:t})=>M0(t,"y")};wi.translateX=wi.x;wi.translateY=wi.y;const ki=new Set;let L0=!1,O0=!1,V0=!1;function Q3(){if(O0){const s=Array.from(ki).filter(a=>a.needsMeasurement),t=new Set(s.map(a=>a.element)),r=new Map;t.forEach(a=>{const i=HL(a);i.length&&(r.set(a,i),a.render())}),s.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const i=r.get(a);i&&i.forEach(([l,o])=>{var c;(c=a.getValue(l))==null||c.set(o)})}),s.forEach(a=>a.measureEndState()),s.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}O0=!1,L0=!1,ki.forEach(s=>s.complete(V0)),ki.clear()}function K3(){ki.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(O0=!0)})}function GL(){V0=!0,K3(),Q3(),V0=!1}class Ny{constructor(t,r,a,i,l,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=a,this.motionValue=i,this.element=l,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ki.add(this),L0||(L0=!0,xs.read(K3),xs.resolveKeyframes(Q3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:a,motionValue:i}=this;if(t[0]===null){const l=i==null?void 0:i.get(),o=t[t.length-1];if(l!==void 0)t[0]=l;else if(a&&r){const c=a.readValue(r,o);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=o),i&&l===void 0&&i.set(t[0])}zL(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ki.delete(this)}cancel(){this.state==="scheduled"&&(ki.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const QL=s=>s.startsWith("--");function KL(s,t,r){QL(t)?s.style.setProperty(t,r):s.style[t]=r}const YL=cy(()=>window.ScrollTimeline!==void 0),XL={};function JL(s,t){const r=cy(s);return()=>XL[t]??r()}const Y3=JL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$l=([s,t,r,a])=>`cubic-bezier(${s}, ${t}, ${r}, ${a})`,LN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$l([0,.65,.55,1]),circOut:$l([.55,0,1,.45]),backIn:$l([.31,.01,.66,-.59]),backOut:$l([.33,1.53,.69,.99])};function X3(s,t){if(s)return typeof s=="function"?Y3()?q3(s,t):"ease-out":M3(s)?$l(s):Array.isArray(s)?s.map(r=>X3(r,t)||LN.easeOut):LN[s]}function ZL(s,t,r,{delay:a=0,duration:i=300,repeat:l=0,repeatType:o="loop",ease:c="easeOut",times:d}={},h=void 0){const g={[t]:r};d&&(g.offset=d);const N=X3(c,i);Array.isArray(N)&&(g.easing=N);const k={delay:a,duration:i,easing:Array.isArray(N)?"linear":N,fill:"both",iterations:l+1,direction:o==="reverse"?"alternate":"normal"};return h&&(k.pseudoElement=h),s.animate(g,k)}function J3(s){return typeof s=="function"&&"applyToOptions"in s}function eO({type:s,...t}){return J3(s)&&Y3()?s.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class tO extends vy{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:a,keyframes:i,pseudoElement:l,allowFlatten:o=!1,finalKeyframe:c,onComplete:d}=t;this.isPseudoElement=!!l,this.allowFlatten=o,this.options=t,ly(typeof t.type!="string");const h=eO(t);this.animation=ZL(r,a,i,h,l),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const g=by(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(g):KL(r,a,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var r,a;const t=((a=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:a.call(r).duration)||0;return Sa(Number(t))}get time(){return Sa(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Pa(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&YL()?(this.animation.timeline=t,Gr):r(this)}}const Z3={anticipate:_3,backInOut:T3,circInOut:A3};function sO(s){return s in Z3}function rO(s){typeof s.ease=="string"&&sO(s.ease)&&(s.ease=Z3[s.ease])}const ON=10;class aO extends tO{constructor(t){rO(t),G3(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:a,onComplete:i,element:l,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const c=new jy({...o,autoplay:!1}),d=Pa(this.finishedTime??this.time);r.setWithVelocity(c.sample(d-ON).value,c.sample(d).value,ON),c.stop()}}const VN=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Yn.test(s)||s==="0")&&!s.startsWith("url("));function nO(s){const t=s[0];if(s.length===1)return!0;for(let r=0;r<s.length;r++)if(s[r]!==t)return!0}function iO(s,t,r,a){const i=s[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const l=s[s.length-1],o=VN(i,t),c=VN(l,t);return!o||!c?!1:nO(s)||(r==="spring"||J3(r))&&a}function wy(s){return w3(s)&&"offsetHeight"in s}const oO=new Set(["opacity","clipPath","filter","transform"]),lO=cy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function cO(s){var h;const{motionValue:t,name:r,repeatDelay:a,repeatType:i,damping:l,type:o}=s;if(!wy((h=t==null?void 0:t.owner)==null?void 0:h.current))return!1;const{onUpdate:c,transformTemplate:d}=t.owner.getProps();return lO()&&r&&oO.has(r)&&(r!=="transform"||!d)&&!c&&!a&&i!=="mirror"&&l!==0&&o!=="inertia"}const dO=40;class uO extends vy{constructor({autoplay:t=!0,delay:r=0,type:a="keyframes",repeat:i=0,repeatDelay:l=0,repeatType:o="loop",keyframes:c,name:d,motionValue:h,element:g,...N}){var y;super(),this.stop=()=>{var O,_;this._animation&&(this._animation.stop(),(O=this.stopTimeline)==null||O.call(this)),(_=this.keyframeResolver)==null||_.cancel()},this.createdAt=br.now();const k={autoplay:t,delay:r,type:a,repeat:i,repeatDelay:l,repeatType:o,name:d,motionValue:h,element:g,...N},E=(g==null?void 0:g.KeyframeResolver)||Ny;this.keyframeResolver=new E(c,(O,_,A)=>this.onKeyframesResolved(O,_,k,!A),d,h,g),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(t,r,a,i){this.keyframeResolver=void 0;const{name:l,type:o,velocity:c,delay:d,isHandoff:h,onUpdate:g}=a;this.resolvedAt=br.now(),iO(t,l,o,c)||((an.instantAnimations||!d)&&(g==null||g(by(t,a,r))),t[0]=t[t.length-1],a.duration=0,a.repeat=0);const k={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>dO?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...a,keyframes:t},E=!h&&cO(k)?new aO({...k,element:k.motionValue.owner.current}):new jy(k);E.finished.then(()=>this.notifyFinished()).catch(Gr),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),GL()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const xO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function mO(s){const t=xO.exec(s);if(!t)return[,];const[,r,a,i]=t;return[`--${r??a}`,i]}function eI(s,t,r=1){const[a,i]=mO(s);if(!a)return;const l=window.getComputedStyle(t).getPropertyValue(a);if(l){const o=l.trim();return N3(o)?parseFloat(o):o}return hy(i)?eI(i,t,r+1):i}function ky(s,t){return(s==null?void 0:s[t])??(s==null?void 0:s.default)??s}const tI=new Set(["width","height","top","left","right","bottom",...dl]),hO={test:s=>s==="auto",parse:s=>s},sI=s=>t=>t.test(s),rI=[cl,bt,Ca,pn,nL,aL,hO],zN=s=>rI.find(sI(s));function pO(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||k3(s):!0}const fO=new Set(["brightness","contrast","saturate","opacity"]);function gO(s){const[t,r]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[a]=r.match(py)||[];if(!a)return s;const i=r.replace(a,"");let l=fO.has(t)?1:0;return a!==r&&(l*=100),t+"("+l+i+")"}const yO=/\b([a-z-]*)\(.*?\)/gu,z0={...Yn,getAnimatableNone:s=>{const t=s.match(yO);return t?t.map(gO).join(" "):s}},BN={...cl,transform:Math.round},bO={rotate:pn,rotateX:pn,rotateY:pn,rotateZ:pn,scale:xu,scaleX:xu,scaleY:xu,scaleZ:xu,skew:pn,skewX:pn,skewY:pn,distance:bt,translateX:bt,translateY:bt,translateZ:bt,x:bt,y:bt,z:bt,perspective:bt,transformPerspective:bt,opacity:$c,originX:SN,originY:SN,originZ:bt},Iy={borderWidth:bt,borderTopWidth:bt,borderRightWidth:bt,borderBottomWidth:bt,borderLeftWidth:bt,borderRadius:bt,radius:bt,borderTopLeftRadius:bt,borderTopRightRadius:bt,borderBottomRightRadius:bt,borderBottomLeftRadius:bt,width:bt,maxWidth:bt,height:bt,maxHeight:bt,top:bt,right:bt,bottom:bt,left:bt,padding:bt,paddingTop:bt,paddingRight:bt,paddingBottom:bt,paddingLeft:bt,margin:bt,marginTop:bt,marginRight:bt,marginBottom:bt,marginLeft:bt,backgroundPositionX:bt,backgroundPositionY:bt,...bO,zIndex:BN,fillOpacity:$c,strokeOpacity:$c,numOctaves:BN},vO={...Iy,color:Zs,backgroundColor:Zs,outlineColor:Zs,fill:Zs,stroke:Zs,borderColor:Zs,borderTopColor:Zs,borderRightColor:Zs,borderBottomColor:Zs,borderLeftColor:Zs,filter:z0,WebkitFilter:z0},aI=s=>vO[s];function nI(s,t){let r=aI(s);return r!==z0&&(r=Yn),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const jO=new Set(["auto","none","0"]);function NO(s,t,r){let a=0,i;for(;a<s.length&&!i;){const l=s[a];typeof l=="string"&&!jO.has(l)&&Wc(l).values.length&&(i=s[a]),a++}if(i&&r)for(const l of t)s[l]=nI(r,i)}class wO extends Ny{constructor(t,r,a,i,l){super(t,r,a,i,l,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:a}=this;if(!r||!r.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let h=t[d];if(typeof h=="string"&&(h=h.trim(),hy(h))){const g=eI(h,r.current);g!==void 0&&(t[d]=g),d===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!tI.has(a)||t.length!==2)return;const[i,l]=t,o=zN(i),c=zN(l);if(o!==c)if(MN(o)&&MN(c))for(let d=0;d<t.length;d++){const h=t[d];typeof h=="string"&&(t[d]=parseFloat(h))}else wi[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,a=[];for(let i=0;i<t.length;i++)(t[i]===null||pO(t[i]))&&a.push(i);a.length&&NO(t,a,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wi[a](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&t.getValue(a,i).jump(i,!1)}measureEndState(){var c;const{element:t,name:r,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const i=t.getValue(r);i&&i.jump(this.measuredOrigin,!1);const l=a.length-1,o=a[l];a[l]=wi[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([d,h])=>{t.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function kO(s,t,r){if(s instanceof EventTarget)return[s];if(typeof s=="string"){let a=document;t&&(a=t.current);const i=(r==null?void 0:r[s])??a.querySelectorAll(s);return i?Array.from(i):[]}return Array.from(s)}const FN=30,IO=s=>!isNaN(parseFloat(s));class PO{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(a,i=!0)=>{var o,c;const l=br.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty();i&&((c=this.events.renderRequest)==null||c.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=br.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=IO(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new dy);const a=this.events[t].add(r);return t==="change"?()=>{a(),xs.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,a){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=br.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>FN)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,FN);return I3(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ko(s,t){return new PO(s,t)}const iI=(s,t)=>t&&typeof s=="number"?t.transform(s):s,{schedule:Py,cancel:uU}=L3(queueMicrotask,!1),ea={x:!1,y:!1};function oI(){return ea.x||ea.y}function SO(s){return s==="x"||s==="y"?ea[s]?null:(ea[s]=!0,()=>{ea[s]=!1}):ea.x||ea.y?null:(ea.x=ea.y=!0,()=>{ea.x=ea.y=!1})}function lI(s,t){const r=kO(s),a=new AbortController,i={passive:!0,...t,signal:a.signal};return[r,i,()=>a.abort()]}function UN(s){return!(s.pointerType==="touch"||oI())}function CO(s,t,r={}){const[a,i,l]=lI(s,r),o=c=>{if(!UN(c))return;const{target:d}=c,h=t(d,c);if(typeof h!="function"||!d)return;const g=N=>{UN(N)&&(h(N),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,i)};return a.forEach(c=>{c.addEventListener("pointerenter",o,i)}),l}const cI=(s,t)=>t?s===t?!0:cI(s,t.parentElement):!1,Sy=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,EO=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function TO(s){return EO.has(s.tagName)||s.tabIndex!==-1}const Uu=new WeakSet;function $N(s){return t=>{t.key==="Enter"&&s(t)}}function Qh(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const _O=(s,t)=>{const r=s.currentTarget;if(!r)return;const a=$N(()=>{if(Uu.has(r))return;Qh(r,"down");const i=$N(()=>{Qh(r,"up")}),l=()=>Qh(r,"cancel");r.addEventListener("keyup",i,t),r.addEventListener("blur",l,t)});r.addEventListener("keydown",a,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",a),t)};function WN(s){return Sy(s)&&!oI()}function DO(s,t,r={}){const[a,i,l]=lI(s,r),o=c=>{const d=c.currentTarget;if(!WN(c))return;Uu.add(d);const h=t(d,c),g=(E,y)=>{window.removeEventListener("pointerup",N),window.removeEventListener("pointercancel",k),Uu.has(d)&&Uu.delete(d),WN(E)&&typeof h=="function"&&h(E,{success:y})},N=E=>{g(E,d===window||d===document||r.useGlobalTarget||cI(d,E.target))},k=E=>{g(E,!1)};window.addEventListener("pointerup",N,i),window.addEventListener("pointercancel",k,i)};return a.forEach(c=>{(r.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),wy(c)&&(c.addEventListener("focus",h=>_O(h,i)),!TO(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),l}function dI(s){return w3(s)&&"ownerSVGElement"in s}function AO(s){return dI(s)&&s.tagName==="svg"}const sr=s=>!!(s&&s.getVelocity),RO=[...rI,Zs,Yn],MO=s=>RO.find(sI(s)),Cy=v.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});class LO extends v.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const a=r.offsetParent,i=wy(a)&&a.offsetWidth||0,l=this.props.sizeRef.current;l.height=r.offsetHeight||0,l.width=r.offsetWidth||0,l.top=r.offsetTop,l.left=r.offsetLeft,l.right=i-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function OO({children:s,isPresent:t,anchorX:r}){const a=v.useId(),i=v.useRef(null),l=v.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=v.useContext(Cy);return v.useInsertionEffect(()=>{const{width:c,height:d,top:h,left:g,right:N}=l.current;if(t||!i.current||!c||!d)return;const k=r==="left"?`left: ${g}`:`right: ${N}`;i.current.dataset.motionPopId=a;const E=document.createElement("style");return o&&(E.nonce=o),document.head.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${d}px !important;
            ${k}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.contains(E)&&document.head.removeChild(E)}},[t]),e.jsx(LO,{isPresent:t,childRef:i,sizeRef:l,children:v.cloneElement(s,{ref:i})})}const VO=({children:s,initial:t,isPresent:r,onExitComplete:a,custom:i,presenceAffectsLayout:l,mode:o,anchorX:c})=>{const d=ay(zO),h=v.useId();let g=!0,N=v.useMemo(()=>(g=!1,{id:h,initial:t,isPresent:r,custom:i,onExitComplete:k=>{d.set(k,!0);for(const E of d.values())if(!E)return;a&&a()},register:k=>(d.set(k,!1),()=>d.delete(k))}),[r,d,a]);return l&&g&&(N={...N}),v.useMemo(()=>{d.forEach((k,E)=>d.set(E,!1))},[r]),v.useEffect(()=>{!r&&!d.size&&a&&a()},[r]),o==="popLayout"&&(s=e.jsx(OO,{isPresent:r,anchorX:c,children:s})),e.jsx(Wm.Provider,{value:N,children:s})};function zO(){return new Map}function uI(s=!0){const t=v.useContext(Wm);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:a,register:i}=t,l=v.useId();v.useEffect(()=>{if(s)return i(l)},[s]);const o=v.useCallback(()=>s&&a&&a(l),[l,a,s]);return!r&&a?[!1,o]:[!0]}const mu=s=>s.key||"";function qN(s){const t=[];return v.Children.forEach(s,r=>{v.isValidElement(r)&&t.push(r)}),t}const Ey=({children:s,custom:t,initial:r=!0,onExitComplete:a,presenceAffectsLayout:i=!0,mode:l="sync",propagate:o=!1,anchorX:c="left"})=>{const[d,h]=uI(o),g=v.useMemo(()=>qN(s),[s]),N=o&&!d?[]:g.map(mu),k=v.useRef(!0),E=v.useRef(g),y=ay(()=>new Map),[O,_]=v.useState(g),[A,z]=v.useState(g);j3(()=>{k.current=!1,E.current=g;for(let H=0;H<A.length;H++){const G=mu(A[H]);N.includes(G)?y.delete(G):y.get(G)!==!0&&y.set(G,!1)}},[A,N.length,N.join("-")]);const L=[];if(g!==O){let H=[...g];for(let G=0;G<A.length;G++){const R=A[G],u=mu(R);N.includes(u)||(H.splice(G,0,R),L.push(R))}return l==="wait"&&L.length&&(H=L),z(qN(H)),_(g),null}const{forceRender:K}=v.useContext(ry);return e.jsx(e.Fragment,{children:A.map(H=>{const G=mu(H),R=o&&!d?!1:g===A||N.includes(G),u=()=>{if(y.has(G))y.set(G,!0);else return;let q=!0;y.forEach(U=>{U||(q=!1)}),q&&(K==null||K(),z(E.current),o&&(h==null||h()),a&&a())};return e.jsx(VO,{isPresent:R,initial:!k.current||r?void 0:!1,custom:t,presenceAffectsLayout:i,mode:l,onExitComplete:R?void 0:u,anchorX:c,children:H},G)})})},xI=v.createContext({strict:!1}),HN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yo={};for(const s in HN)Yo[s]={isEnabled:t=>HN[s].some(r=>!!t[r])};function BO(s){for(const t in s)Yo[t]={...Yo[t],...s[t]}}const FO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xx(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||FO.has(s)}let mI=s=>!Xx(s);function UO(s){s&&(mI=t=>t.startsWith("on")?!Xx(t):s(t))}try{UO(require("@emotion/is-prop-valid").default)}catch{}function $O(s,t,r){const a={};for(const i in s)i==="values"&&typeof s.values=="object"||(mI(i)||r===!0&&Xx(i)||!t&&!Xx(i)||s.draggable&&i.startsWith("onDrag"))&&(a[i]=s[i]);return a}function WO(s){if(typeof Proxy>"u")return s;const t=new Map,r=(...a)=>s(...a);return new Proxy(r,{get:(a,i)=>i==="create"?s:(t.has(i)||t.set(i,s(i)),t.get(i))})}const qm=v.createContext({});function Hm(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function qc(s){return typeof s=="string"||Array.isArray(s)}const Ty=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_y=["initial",...Ty];function Gm(s){return Hm(s.animate)||_y.some(t=>qc(s[t]))}function hI(s){return!!(Gm(s)||s.variants)}function qO(s,t){if(Gm(s)){const{initial:r,animate:a}=s;return{initial:r===!1||qc(r)?r:void 0,animate:qc(a)?a:void 0}}return s.inherit!==!1?t:{}}function HO(s){const{initial:t,animate:r}=qO(s,v.useContext(qm));return v.useMemo(()=>({initial:t,animate:r}),[GN(t),GN(r)])}function GN(s){return Array.isArray(s)?s.join(" "):s}const GO=Symbol.for("motionComponentSymbol");function jo(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function QO(s,t,r){return v.useCallback(a=>{a&&s.onMount&&s.onMount(a),t&&(a?t.mount(a):t.unmount()),r&&(typeof r=="function"?r(a):jo(r)&&(r.current=a))},[t])}const Dy=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),KO="framerAppearId",pI="data-"+Dy(KO),fI=v.createContext({});function YO(s,t,r,a,i){var O,_;const{visualElement:l}=v.useContext(qm),o=v.useContext(xI),c=v.useContext(Wm),d=v.useContext(Cy).reducedMotion,h=v.useRef(null);a=a||o.renderer,!h.current&&a&&(h.current=a(s,{visualState:t,parent:l,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const g=h.current,N=v.useContext(fI);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&XO(h.current,r,i,N);const k=v.useRef(!1);v.useInsertionEffect(()=>{g&&k.current&&g.update(r,c)});const E=r[pI],y=v.useRef(!!E&&!((O=window.MotionHandoffIsComplete)!=null&&O.call(window,E))&&((_=window.MotionHasOptimisedAnimation)==null?void 0:_.call(window,E)));return j3(()=>{g&&(k.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),Py.render(g.render),y.current&&g.animationState&&g.animationState.animateChanges())}),v.useEffect(()=>{g&&(!y.current&&g.animationState&&g.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var A;(A=window.MotionHandoffMarkAsComplete)==null||A.call(window,E)}),y.current=!1))}),g}function XO(s,t,r,a){const{layoutId:i,layout:l,drag:o,dragConstraints:c,layoutScroll:d,layoutRoot:h,layoutCrossfade:g}=t;s.projection=new r(s.latestValues,t["data-framer-portal-id"]?void 0:gI(s.parent)),s.projection.setOptions({layoutId:i,layout:l,alwaysMeasureLayout:!!o||c&&jo(c),visualElement:s,animationType:typeof l=="string"?l:"both",initialPromotionConfig:a,crossfade:g,layoutScroll:d,layoutRoot:h})}function gI(s){if(s)return s.options.allowProjection!==!1?s.projection:gI(s.parent)}function JO({preloadedFeatures:s,createVisualElement:t,useRender:r,useVisualState:a,Component:i}){s&&BO(s);function l(c,d){let h;const g={...v.useContext(Cy),...c,layoutId:ZO(c)},{isStatic:N}=g,k=HO(c),E=a(c,N);if(!N&&ny){eV();const y=tV(g);h=y.MeasureLayout,k.visualElement=YO(i,E,g,t,y.ProjectionNode)}return e.jsxs(qm.Provider,{value:k,children:[h&&k.visualElement?e.jsx(h,{visualElement:k.visualElement,...g}):null,r(i,c,QO(E,k.visualElement,d),E,N,k.visualElement)]})}l.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const o=v.forwardRef(l);return o[GO]=i,o}function ZO({layoutId:s}){const t=v.useContext(ry).id;return t&&s!==void 0?t+"-"+s:s}function eV(s,t){v.useContext(xI).strict}function tV(s){const{drag:t,layout:r}=Yo;if(!t&&!r)return{};const a={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(s)||r!=null&&r.isEnabled(s)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}const Hc={};function sV(s){for(const t in s)Hc[t]=s[t],my(t)&&(Hc[t].isCSSVariable=!0)}function yI(s,{layout:t,layoutId:r}){return ul.has(s)||s.startsWith("origin")||(t||r!==void 0)&&(!!Hc[s]||s==="opacity")}const rV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},aV=dl.length;function nV(s,t,r){let a="",i=!0;for(let l=0;l<aV;l++){const o=dl[l],c=s[o];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(o.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||r){const h=iI(c,Iy[o]);if(!d){i=!1;const g=rV[o]||o;a+=`${g}(${h}) `}r&&(t[o]=h)}}return a=a.trim(),r?a=r(t,i?"":a):i&&(a="none"),a}function Ay(s,t,r){const{style:a,vars:i,transformOrigin:l}=s;let o=!1,c=!1;for(const d in t){const h=t[d];if(ul.has(d)){o=!0;continue}else if(my(d)){i[d]=h;continue}else{const g=iI(h,Iy[d]);d.startsWith("origin")?(c=!0,l[d]=g):a[d]=g}}if(t.transform||(o||r?a.transform=nV(t,s.transform,r):a.transform&&(a.transform="none")),c){const{originX:d="50%",originY:h="50%",originZ:g=0}=l;a.transformOrigin=`${d} ${h} ${g}`}}const Ry=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function bI(s,t,r){for(const a in t)!sr(t[a])&&!yI(a,r)&&(s[a]=t[a])}function iV({transformTemplate:s},t){return v.useMemo(()=>{const r=Ry();return Ay(r,t,s),Object.assign({},r.vars,r.style)},[t])}function oV(s,t){const r=s.style||{},a={};return bI(a,r,s),Object.assign(a,iV(s,t)),a}function lV(s,t){const r={},a=oV(s,t);return s.drag&&s.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(r.tabIndex=0),r.style=a,r}const cV={offset:"stroke-dashoffset",array:"stroke-dasharray"},dV={offset:"strokeDashoffset",array:"strokeDasharray"};function uV(s,t,r=1,a=0,i=!0){s.pathLength=1;const l=i?cV:dV;s[l.offset]=bt.transform(-a);const o=bt.transform(t),c=bt.transform(r);s[l.array]=`${o} ${c}`}function vI(s,{attrX:t,attrY:r,attrScale:a,pathLength:i,pathSpacing:l=1,pathOffset:o=0,...c},d,h,g){if(Ay(s,c,h),d){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:N,style:k}=s;N.transform&&(k.transform=N.transform,delete N.transform),(k.transform||N.transformOrigin)&&(k.transformOrigin=N.transformOrigin??"50% 50%",delete N.transformOrigin),k.transform&&(k.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete N.transformBox),t!==void 0&&(N.x=t),r!==void 0&&(N.y=r),a!==void 0&&(N.scale=a),i!==void 0&&uV(N,i,l,o,!1)}const jI=()=>({...Ry(),attrs:{}}),NI=s=>typeof s=="string"&&s.toLowerCase()==="svg";function xV(s,t,r,a){const i=v.useMemo(()=>{const l=jI();return vI(l,t,NI(a),s.transformTemplate,s.style),{...l.attrs,style:{...l.style}}},[t]);if(s.style){const l={};bI(l,s.style,s),i.style={...l,...i.style}}return i}const mV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function My(s){return typeof s!="string"||s.includes("-")?!1:!!(mV.indexOf(s)>-1||/[A-Z]/u.test(s))}function hV(s=!1){return(r,a,i,{latestValues:l},o)=>{const d=(My(r)?xV:lV)(a,l,o,r),h=$O(a,typeof r=="string",s),g=r!==v.Fragment?{...h,...d,ref:i}:{},{children:N}=a,k=v.useMemo(()=>sr(N)?N.get():N,[N]);return v.createElement(r,{...g,children:k})}}function QN(s){const t=[{},{}];return s==null||s.values.forEach((r,a)=>{t[0][a]=r.get(),t[1][a]=r.getVelocity()}),t}function Ly(s,t,r,a){if(typeof t=="function"){const[i,l]=QN(a);t=t(r!==void 0?r:s.custom,i,l)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[i,l]=QN(a);t=t(r!==void 0?r:s.custom,i,l)}return t}function $u(s){return sr(s)?s.get():s}function pV({scrapeMotionValuesFromProps:s,createRenderState:t},r,a,i){return{latestValues:fV(r,a,i,s),renderState:t()}}const wI=s=>(t,r)=>{const a=v.useContext(qm),i=v.useContext(Wm),l=()=>pV(s,t,a,i);return r?l():ay(l)};function fV(s,t,r,a){const i={},l=a(s,{});for(const k in l)i[k]=$u(l[k]);let{initial:o,animate:c}=s;const d=Gm(s),h=hI(s);t&&h&&!d&&s.inherit!==!1&&(o===void 0&&(o=t.initial),c===void 0&&(c=t.animate));let g=r?r.initial===!1:!1;g=g||o===!1;const N=g?c:o;if(N&&typeof N!="boolean"&&!Hm(N)){const k=Array.isArray(N)?N:[N];for(let E=0;E<k.length;E++){const y=Ly(s,k[E]);if(y){const{transitionEnd:O,transition:_,...A}=y;for(const z in A){let L=A[z];if(Array.isArray(L)){const K=g?L.length-1:0;L=L[K]}L!==null&&(i[z]=L)}for(const z in O)i[z]=O[z]}}}return i}function Oy(s,t,r){var l;const{style:a}=s,i={};for(const o in a)(sr(a[o])||t.style&&sr(t.style[o])||yI(o,s)||((l=r==null?void 0:r.getValue(o))==null?void 0:l.liveStyle)!==void 0)&&(i[o]=a[o]);return i}const gV={useVisualState:wI({scrapeMotionValuesFromProps:Oy,createRenderState:Ry})};function kI(s,t,r){const a=Oy(s,t,r);for(const i in s)if(sr(s[i])||sr(t[i])){const l=dl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;a[l]=s[i]}return a}const yV={useVisualState:wI({scrapeMotionValuesFromProps:kI,createRenderState:jI})};function bV(s,t){return function(a,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...My(a)?yV:gV,preloadedFeatures:s,useRender:hV(i),createVisualElement:t,Component:a};return JO(o)}}function Gc(s,t,r){const a=s.getProps();return Ly(a,t,r!==void 0?r:a.custom,s)}const B0=s=>Array.isArray(s);function vV(s,t,r){s.hasValue(t)?s.getValue(t).set(r):s.addValue(t,Ko(r))}function jV(s){return B0(s)?s[s.length-1]||0:s}function NV(s,t){const r=Gc(s,t);let{transitionEnd:a={},transition:i={},...l}=r||{};l={...l,...a};for(const o in l){const c=jV(l[o]);vV(s,o,c)}}function wV(s){return!!(sr(s)&&s.add)}function F0(s,t){const r=s.getValue("willChange");if(wV(r))return r.add(t);if(!r&&an.WillChange){const a=new an.WillChange("auto");s.addValue("willChange",a),a.add(t)}}function II(s){return s.props[pI]}const kV=s=>s!==null;function IV(s,{repeat:t,repeatType:r="loop"},a){const i=s.filter(kV),l=t&&r!=="loop"&&t%2===1?0:i.length-1;return!l||a===void 0?i[l]:a}const PV={type:"spring",stiffness:500,damping:25,restSpeed:10},SV=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),CV={type:"keyframes",duration:.8},EV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},TV=(s,{keyframes:t})=>t.length>2?CV:ul.has(s)?s.startsWith("scale")?SV(t[1]):PV:EV;function _V({when:s,delay:t,delayChildren:r,staggerChildren:a,staggerDirection:i,repeat:l,repeatType:o,repeatDelay:c,from:d,elapsed:h,...g}){return!!Object.keys(g).length}const Vy=(s,t,r,a={},i,l)=>o=>{const c=ky(a,s)||{},d=c.delay||a.delay||0;let{elapsed:h=0}=a;h=h-Pa(d);const g={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-h,onUpdate:k=>{t.set(k),c.onUpdate&&c.onUpdate(k)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:s,motionValue:t,element:l?void 0:i};_V(c)||Object.assign(g,TV(s,g)),g.duration&&(g.duration=Pa(g.duration)),g.repeatDelay&&(g.repeatDelay=Pa(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let N=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(N=!0)),(an.instantAnimations||an.skipAnimations)&&(N=!0,g.duration=0,g.delay=0),g.allowFlatten=!c.type&&!c.ease,N&&!l&&t.get()!==void 0){const k=IV(g.keyframes,c);if(k!==void 0){xs.update(()=>{g.onUpdate(k),g.onComplete()});return}}return c.isSync?new jy(g):new uO(g)};function DV({protectedKeys:s,needsAnimating:t},r){const a=s.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,a}function PI(s,t,{delay:r=0,transitionOverride:a,type:i}={}){let{transition:l=s.getDefaultTransition(),transitionEnd:o,...c}=t;a&&(l=a);const d=[],h=i&&s.animationState&&s.animationState.getState()[i];for(const g in c){const N=s.getValue(g,s.latestValues[g]??null),k=c[g];if(k===void 0||h&&DV(h,g))continue;const E={delay:r,...ky(l||{},g)},y=N.get();if(y!==void 0&&!N.isAnimating&&!Array.isArray(k)&&k===y&&!E.velocity)continue;let O=!1;if(window.MotionHandoffAnimation){const A=II(s);if(A){const z=window.MotionHandoffAnimation(A,g,xs);z!==null&&(E.startTime=z,O=!0)}}F0(s,g),N.start(Vy(g,N,k,s.shouldReduceMotion&&tI.has(g)?{type:!1}:E,s,O));const _=N.animation;_&&d.push(_)}return o&&Promise.all(d).then(()=>{xs.update(()=>{o&&NV(s,o)})}),d}function U0(s,t,r={}){var d;const a=Gc(s,t,r.type==="exit"?(d=s.presenceContext)==null?void 0:d.custom:void 0);let{transition:i=s.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(i=r.transitionOverride);const l=a?()=>Promise.all(PI(s,a,r)):()=>Promise.resolve(),o=s.variantChildren&&s.variantChildren.size?(h=0)=>{const{delayChildren:g=0,staggerChildren:N,staggerDirection:k}=i;return AV(s,t,g+h,N,k,r)}:()=>Promise.resolve(),{when:c}=i;if(c){const[h,g]=c==="beforeChildren"?[l,o]:[o,l];return h().then(()=>g())}else return Promise.all([l(),o(r.delay)])}function AV(s,t,r=0,a=0,i=1,l){const o=[],c=(s.variantChildren.size-1)*a,d=i===1?(h=0)=>h*a:(h=0)=>c-h*a;return Array.from(s.variantChildren).sort(RV).forEach((h,g)=>{h.notify("AnimationStart",t),o.push(U0(h,t,{...l,delay:r+d(g)}).then(()=>h.notify("AnimationComplete",t)))}),Promise.all(o)}function RV(s,t){return s.sortNodePosition(t)}function MV(s,t,r={}){s.notify("AnimationStart",t);let a;if(Array.isArray(t)){const i=t.map(l=>U0(s,l,r));a=Promise.all(i)}else if(typeof t=="string")a=U0(s,t,r);else{const i=typeof t=="function"?Gc(s,t,r.custom):t;a=Promise.all(PI(s,i,r))}return a.then(()=>{s.notify("AnimationComplete",t)})}function SI(s,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==s.length)return!1;for(let a=0;a<r;a++)if(t[a]!==s[a])return!1;return!0}const LV=_y.length;function CI(s){if(!s)return;if(!s.isControllingVariants){const r=s.parent?CI(s.parent)||{}:{};return s.props.initial!==void 0&&(r.initial=s.props.initial),r}const t={};for(let r=0;r<LV;r++){const a=_y[r],i=s.props[a];(qc(i)||i===!1)&&(t[a]=i)}return t}const OV=[...Ty].reverse(),VV=Ty.length;function zV(s){return t=>Promise.all(t.map(({animation:r,options:a})=>MV(s,r,a)))}function BV(s){let t=zV(s),r=KN(),a=!0;const i=d=>(h,g)=>{var k;const N=Gc(s,g,d==="exit"?(k=s.presenceContext)==null?void 0:k.custom:void 0);if(N){const{transition:E,transitionEnd:y,...O}=N;h={...h,...O,...y}}return h};function l(d){t=d(s)}function o(d){const{props:h}=s,g=CI(s.parent)||{},N=[],k=new Set;let E={},y=1/0;for(let _=0;_<VV;_++){const A=OV[_],z=r[A],L=h[A]!==void 0?h[A]:g[A],K=qc(L),H=A===d?z.isActive:null;H===!1&&(y=_);let G=L===g[A]&&L!==h[A]&&K;if(G&&a&&s.manuallyAnimateOnMount&&(G=!1),z.protectedKeys={...E},!z.isActive&&H===null||!L&&!z.prevProp||Hm(L)||typeof L=="boolean")continue;const R=FV(z.prevProp,L);let u=R||A===d&&z.isActive&&!G&&K||_>y&&K,q=!1;const U=Array.isArray(L)?L:[L];let te=U.reduce(i(A),{});H===!1&&(te={});const{prevResolvedValues:se={}}=z,X={...se,...te},$=De=>{u=!0,k.has(De)&&(q=!0,k.delete(De)),z.needsAnimating[De]=!0;const he=s.getValue(De);he&&(he.liveStyle=!1)};for(const De in X){const he=te[De],be=se[De];if(E.hasOwnProperty(De))continue;let fe=!1;B0(he)&&B0(be)?fe=!SI(he,be):fe=he!==be,fe?he!=null?$(De):k.add(De):he!==void 0&&k.has(De)?$(De):z.protectedKeys[De]=!0}z.prevProp=L,z.prevResolvedValues=te,z.isActive&&(E={...E,...te}),a&&s.blockInitialAnimation&&(u=!1),u&&(!(G&&R)||q)&&N.push(...U.map(De=>({animation:De,options:{type:A}})))}if(k.size){const _={};if(typeof h.initial!="boolean"){const A=Gc(s,Array.isArray(h.initial)?h.initial[0]:h.initial);A&&A.transition&&(_.transition=A.transition)}k.forEach(A=>{const z=s.getBaseTarget(A),L=s.getValue(A);L&&(L.liveStyle=!0),_[A]=z??null}),N.push({animation:_})}let O=!!N.length;return a&&(h.initial===!1||h.initial===h.animate)&&!s.manuallyAnimateOnMount&&(O=!1),a=!1,O?t(N):Promise.resolve()}function c(d,h){var N;if(r[d].isActive===h)return Promise.resolve();(N=s.variantChildren)==null||N.forEach(k=>{var E;return(E=k.animationState)==null?void 0:E.setActive(d,h)}),r[d].isActive=h;const g=o(d);for(const k in r)r[k].protectedKeys={};return g}return{animateChanges:o,setActive:c,setAnimateFunction:l,getState:()=>r,reset:()=>{r=KN(),a=!0}}}function FV(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!SI(t,s):!1}function ci(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function KN(){return{animate:ci(!0),whileInView:ci(),whileHover:ci(),whileTap:ci(),whileDrag:ci(),whileFocus:ci(),exit:ci()}}class ri{constructor(t){this.isMounted=!1,this.node=t}update(){}}class UV extends ri{constructor(t){super(t),t.animationState||(t.animationState=BV(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Hm(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let $V=0;class WV extends ri{constructor(){super(...arguments),this.id=$V++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const i=this.node.animationState.setActive("exit",!t);r&&!t&&i.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const qV={animation:{Feature:UV},exit:{Feature:WV}};function Qc(s,t,r,a={passive:!0}){return s.addEventListener(t,r,a),()=>s.removeEventListener(t,r)}function kd(s){return{point:{x:s.pageX,y:s.pageY}}}const HV=s=>t=>Sy(t)&&s(t,kd(t));function lc(s,t,r,a){return Qc(s,t,HV(r),a)}function EI({top:s,left:t,right:r,bottom:a}){return{x:{min:t,max:r},y:{min:s,max:a}}}function GV({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function QV(s,t){if(!t)return s;const r=t({x:s.left,y:s.top}),a=t({x:s.right,y:s.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}const TI=1e-4,KV=1-TI,YV=1+TI,_I=.01,XV=0-_I,JV=0+_I;function dr(s){return s.max-s.min}function ZV(s,t,r){return Math.abs(s-t)<=r}function YN(s,t,r,a=.5){s.origin=a,s.originPoint=cs(t.min,t.max,s.origin),s.scale=dr(r)/dr(t),s.translate=cs(r.min,r.max,s.origin)-s.originPoint,(s.scale>=KV&&s.scale<=YV||isNaN(s.scale))&&(s.scale=1),(s.translate>=XV&&s.translate<=JV||isNaN(s.translate))&&(s.translate=0)}function cc(s,t,r,a){YN(s.x,t.x,r.x,a?a.originX:void 0),YN(s.y,t.y,r.y,a?a.originY:void 0)}function XN(s,t,r){s.min=r.min+t.min,s.max=s.min+dr(t)}function ez(s,t,r){XN(s.x,t.x,r.x),XN(s.y,t.y,r.y)}function JN(s,t,r){s.min=t.min-r.min,s.max=s.min+dr(t)}function dc(s,t,r){JN(s.x,t.x,r.x),JN(s.y,t.y,r.y)}const ZN=()=>({translate:0,scale:1,origin:0,originPoint:0}),No=()=>({x:ZN(),y:ZN()}),ew=()=>({min:0,max:0}),bs=()=>({x:ew(),y:ew()});function Fr(s){return[s("x"),s("y")]}function Kh(s){return s===void 0||s===1}function $0({scale:s,scaleX:t,scaleY:r}){return!Kh(s)||!Kh(t)||!Kh(r)}function mi(s){return $0(s)||DI(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function DI(s){return tw(s.x)||tw(s.y)}function tw(s){return s&&s!=="0%"}function Jx(s,t,r){const a=s-r,i=t*a;return r+i}function sw(s,t,r,a,i){return i!==void 0&&(s=Jx(s,i,a)),Jx(s,r,a)+t}function W0(s,t=0,r=1,a,i){s.min=sw(s.min,t,r,a,i),s.max=sw(s.max,t,r,a,i)}function AI(s,{x:t,y:r}){W0(s.x,t.translate,t.scale,t.originPoint),W0(s.y,r.translate,r.scale,r.originPoint)}const rw=.999999999999,aw=1.0000000000001;function tz(s,t,r,a=!1){const i=r.length;if(!i)return;t.x=t.y=1;let l,o;for(let c=0;c<i;c++){l=r[c],o=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(a&&l.options.layoutScroll&&l.scroll&&l!==l.root&&ko(s,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,AI(s,o)),a&&mi(l.latestValues)&&ko(s,l.latestValues))}t.x<aw&&t.x>rw&&(t.x=1),t.y<aw&&t.y>rw&&(t.y=1)}function wo(s,t){s.min=s.min+t,s.max=s.max+t}function nw(s,t,r,a,i=.5){const l=cs(s.min,s.max,i);W0(s,t,r,l,a)}function ko(s,t){nw(s.x,t.x,t.scaleX,t.scale,t.originX),nw(s.y,t.y,t.scaleY,t.scale,t.originY)}function RI(s,t){return EI(QV(s.getBoundingClientRect(),t))}function sz(s,t,r){const a=RI(s,r),{scroll:i}=t;return i&&(wo(a.x,i.offset.x),wo(a.y,i.offset.y)),a}const MI=({current:s})=>s?s.ownerDocument.defaultView:null,iw=(s,t)=>Math.abs(s-t);function rz(s,t){const r=iw(s.x,t.x),a=iw(s.y,t.y);return Math.sqrt(r**2+a**2)}class LI{constructor(t,r,{transformPagePoint:a,contextWindow:i,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=Xh(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,E=rz(N.offset,{x:0,y:0})>=3;if(!k&&!E)return;const{point:y}=N,{timestamp:O}=Bs;this.history.push({...y,timestamp:O});const{onStart:_,onMove:A}=this.handlers;k||(_&&_(this.lastMoveEvent,N),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,N)},this.handlePointerMove=(N,k)=>{this.lastMoveEvent=N,this.lastMoveEventInfo=Yh(k,this.transformPagePoint),xs.update(this.updatePoint,!0)},this.handlePointerUp=(N,k)=>{this.end();const{onEnd:E,onSessionEnd:y,resumeAnimation:O}=this.handlers;if(this.dragSnapToOrigin&&O&&O(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Xh(N.type==="pointercancel"?this.lastMoveEventInfo:Yh(k,this.transformPagePoint),this.history);this.startEvent&&E&&E(N,_),y&&y(N,_)},!Sy(t))return;this.dragSnapToOrigin=l,this.handlers=r,this.transformPagePoint=a,this.contextWindow=i||window;const o=kd(t),c=Yh(o,this.transformPagePoint),{point:d}=c,{timestamp:h}=Bs;this.history=[{...d,timestamp:h}];const{onSessionStart:g}=r;g&&g(t,Xh(c,this.history)),this.removeListeners=jd(lc(this.contextWindow,"pointermove",this.handlePointerMove),lc(this.contextWindow,"pointerup",this.handlePointerUp),lc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Kn(this.updatePoint)}}function Yh(s,t){return t?{point:t(s.point)}:s}function ow(s,t){return{x:s.x-t.x,y:s.y-t.y}}function Xh({point:s},t){return{point:s,delta:ow(s,OI(t)),offset:ow(s,az(t)),velocity:nz(t,.1)}}function az(s){return s[0]}function OI(s){return s[s.length-1]}function nz(s,t){if(s.length<2)return{x:0,y:0};let r=s.length-1,a=null;const i=OI(s);for(;r>=0&&(a=s[r],!(i.timestamp-a.timestamp>Pa(t)));)r--;if(!a)return{x:0,y:0};const l=Sa(i.timestamp-a.timestamp);if(l===0)return{x:0,y:0};const o={x:(i.x-a.x)/l,y:(i.y-a.y)/l};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function iz(s,{min:t,max:r},a){return t!==void 0&&s<t?s=a?cs(t,s,a.min):Math.max(s,t):r!==void 0&&s>r&&(s=a?cs(r,s,a.max):Math.min(s,r)),s}function lw(s,t,r){return{min:t!==void 0?s.min+t:void 0,max:r!==void 0?s.max+r-(s.max-s.min):void 0}}function oz(s,{top:t,left:r,bottom:a,right:i}){return{x:lw(s.x,r,i),y:lw(s.y,t,a)}}function cw(s,t){let r=t.min-s.min,a=t.max-s.max;return t.max-t.min<s.max-s.min&&([r,a]=[a,r]),{min:r,max:a}}function lz(s,t){return{x:cw(s.x,t.x),y:cw(s.y,t.y)}}function cz(s,t){let r=.5;const a=dr(s),i=dr(t);return i>a?r=Uc(t.min,t.max-a,s.min):a>i&&(r=Uc(s.min,s.max-i,t.min)),rn(0,1,r)}function dz(s,t){const r={};return t.min!==void 0&&(r.min=t.min-s.min),t.max!==void 0&&(r.max=t.max-s.min),r}const q0=.35;function uz(s=q0){return s===!1?s=0:s===!0&&(s=q0),{x:dw(s,"left","right"),y:dw(s,"top","bottom")}}function dw(s,t,r){return{min:uw(s,t),max:uw(s,r)}}function uw(s,t){return typeof s=="number"?s:s[t]||0}const xz=new WeakMap;class mz{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bs(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=g=>{const{dragSnapToOrigin:N}=this.getProps();N?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(kd(g).point)},l=(g,N)=>{const{drag:k,dragPropagation:E,onDragStart:y}=this.getProps();if(k&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=SO(k),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Fr(_=>{let A=this.getAxisMotionValue(_).get()||0;if(Ca.test(A)){const{projection:z}=this.visualElement;if(z&&z.layout){const L=z.layout.layoutBox[_];L&&(A=dr(L)*(parseFloat(A)/100))}}this.originPoint[_]=A}),y&&xs.postRender(()=>y(g,N)),F0(this.visualElement,"transform");const{animationState:O}=this.visualElement;O&&O.setActive("whileDrag",!0)},o=(g,N)=>{const{dragPropagation:k,dragDirectionLock:E,onDirectionLock:y,onDrag:O}=this.getProps();if(!k&&!this.openDragLock)return;const{offset:_}=N;if(E&&this.currentDirection===null){this.currentDirection=hz(_),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",N.point,_),this.updateAxis("y",N.point,_),this.visualElement.render(),O&&O(g,N)},c=(g,N)=>this.stop(g,N),d=()=>Fr(g=>{var N;return this.getAnimationState(g)==="paused"&&((N=this.getAxisMotionValue(g).animation)==null?void 0:N.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new LI(t,{onSessionStart:i,onStart:l,onMove:o,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:MI(this.visualElement)})}stop(t,r){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:l}=this.getProps();l&&xs.postRender(()=>l(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,a){const{drag:i}=this.getProps();if(!a||!hu(t,i,this.currentDirection))return;const l=this.getAxisMotionValue(t);let o=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(o=iz(o,this.constraints[t],this.elastic[t])),l.set(o)}resolveConstraints(){var l;const{dragConstraints:t,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,i=this.constraints;t&&jo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=oz(a.layoutBox,t):this.constraints=!1,this.elastic=uz(r),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Fr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=dz(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!jo(t))return!1;const a=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const l=sz(a,i.root,this.visualElement.getTransformPagePoint());let o=lz(i.layout.layoutBox,l);if(r){const c=r(GV(o));this.hasMutatedConstraints=!!c,c&&(o=EI(c))}return o}startAnimation(t){const{drag:r,dragMomentum:a,dragElastic:i,dragTransition:l,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},h=Fr(g=>{if(!hu(g,r,this.currentDirection))return;let N=d&&d[g]||{};o&&(N={min:0,max:0});const k=i?200:1e6,E=i?40:1e7,y={type:"inertia",velocity:a?t[g]:0,bounceStiffness:k,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...l,...N};return this.startAxisValueAnimation(g,y)});return Promise.all(h).then(c)}startAxisValueAnimation(t,r){const a=this.getAxisMotionValue(t);return F0(this.visualElement,t),a.start(Vy(t,a,0,r,this.visualElement,!1))}stopAnimation(){Fr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Fr(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),i=a[r];return i||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){Fr(r=>{const{drag:a}=this.getProps();if(!hu(r,a,this.currentDirection))return;const{projection:i}=this.visualElement,l=this.getAxisMotionValue(r);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[r];l.set(t[r]-cs(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!jo(r)||!a||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Fr(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const d=c.get();i[o]=cz({min:d,max:d},this.constraints[o])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),Fr(o=>{if(!hu(o,t,null))return;const c=this.getAxisMotionValue(o),{min:d,max:h}=this.constraints[o];c.set(cs(d,h,i[o]))})}addListeners(){if(!this.visualElement.current)return;xz.set(this.visualElement,this);const t=this.visualElement.current,r=lc(t,"pointerdown",d=>{const{drag:h,dragListener:g=!0}=this.getProps();h&&g&&this.start(d)}),a=()=>{const{dragConstraints:d}=this.getProps();jo(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,l=i.addEventListener("measure",a);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),xs.read(a);const o=Qc(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(Fr(g=>{const N=this.getAxisMotionValue(g);N&&(this.originPoint[g]+=d[g].translate,N.set(N.get()+d[g].translate))}),this.visualElement.render())});return()=>{o(),r(),l(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:i=!1,dragConstraints:l=!1,dragElastic:o=q0,dragMomentum:c=!0}=t;return{...t,drag:r,dragDirectionLock:a,dragPropagation:i,dragConstraints:l,dragElastic:o,dragMomentum:c}}}function hu(s,t,r){return(t===!0||t===s)&&(r===null||r===s)}function hz(s,t=10){let r=null;return Math.abs(s.y)>t?r="y":Math.abs(s.x)>t&&(r="x"),r}class pz extends ri{constructor(t){super(t),this.removeGroupControls=Gr,this.removeListeners=Gr,this.controls=new mz(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Gr}unmount(){this.removeGroupControls(),this.removeListeners()}}const xw=s=>(t,r)=>{s&&xs.postRender(()=>s(t,r))};class fz extends ri{constructor(){super(...arguments),this.removePointerDownListener=Gr}onPointerDown(t){this.session=new LI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:MI(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:a,onPanEnd:i}=this.node.getProps();return{onSessionStart:xw(t),onStart:xw(r),onMove:a,onEnd:(l,o)=>{delete this.session,i&&xs.postRender(()=>i(l,o))}}}mount(){this.removePointerDownListener=lc(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Wu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function mw(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const Dl={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(bt.test(s))s=parseFloat(s);else return s;const r=mw(s,t.target.x),a=mw(s,t.target.y);return`${r}% ${a}%`}},gz={correct:(s,{treeScale:t,projectionDelta:r})=>{const a=s,i=Yn.parse(s);if(i.length>5)return a;const l=Yn.createTransformer(s),o=typeof i[0]!="number"?1:0,c=r.x.scale*t.x,d=r.y.scale*t.y;i[0+o]/=c,i[1+o]/=d;const h=cs(c,d,.5);return typeof i[2+o]=="number"&&(i[2+o]/=h),typeof i[3+o]=="number"&&(i[3+o]/=h),l(i)}};class yz extends v.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a,layoutId:i}=this.props,{projection:l}=t;sV(bz),l&&(r.group&&r.group.add(l),a&&a.register&&i&&a.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Wu.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:a,drag:i,isPresent:l}=this.props,{projection:o}=a;return o&&(o.isPresent=l,i||t.layoutDependency!==r||r===void 0||t.isPresent!==l?o.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?o.promote():o.relegate()||xs.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Py.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),a&&a.deregister&&a.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function VI(s){const[t,r]=uI(),a=v.useContext(ry);return e.jsx(yz,{...s,layoutGroup:a,switchLayoutGroup:v.useContext(fI),isPresent:t,safeToRemove:r})}const bz={borderRadius:{...Dl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dl,borderTopRightRadius:Dl,borderBottomLeftRadius:Dl,borderBottomRightRadius:Dl,boxShadow:gz};function vz(s,t,r){const a=sr(s)?s:Ko(s);return a.start(Vy("",a,t,r)),a.animation}const jz=(s,t)=>s.depth-t.depth;class Nz{constructor(){this.children=[],this.isDirty=!1}add(t){iy(this.children,t),this.isDirty=!0}remove(t){oy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(jz),this.isDirty=!1,this.children.forEach(t)}}function wz(s,t){const r=br.now(),a=({timestamp:i})=>{const l=i-r;l>=t&&(Kn(a),s(l-t))};return xs.setup(a,!0),()=>Kn(a)}const zI=["TopLeft","TopRight","BottomLeft","BottomRight"],kz=zI.length,hw=s=>typeof s=="string"?parseFloat(s):s,pw=s=>typeof s=="number"||bt.test(s);function Iz(s,t,r,a,i,l){i?(s.opacity=cs(0,r.opacity??1,Pz(a)),s.opacityExit=cs(t.opacity??1,0,Sz(a))):l&&(s.opacity=cs(t.opacity??1,r.opacity??1,a));for(let o=0;o<kz;o++){const c=`border${zI[o]}Radius`;let d=fw(t,c),h=fw(r,c);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||pw(d)===pw(h)?(s[c]=Math.max(cs(hw(d),hw(h),a),0),(Ca.test(h)||Ca.test(d))&&(s[c]+="%")):s[c]=h}(t.rotate||r.rotate)&&(s.rotate=cs(t.rotate||0,r.rotate||0,a))}function fw(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const Pz=BI(0,.5,D3),Sz=BI(.5,.95,Gr);function BI(s,t,r){return a=>a<s?0:a>t?1:r(Uc(s,t,a))}function gw(s,t){s.min=t.min,s.max=t.max}function Br(s,t){gw(s.x,t.x),gw(s.y,t.y)}function yw(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}function bw(s,t,r,a,i){return s-=t,s=Jx(s,1/r,a),i!==void 0&&(s=Jx(s,1/i,a)),s}function Cz(s,t=0,r=1,a=.5,i,l=s,o=s){if(Ca.test(t)&&(t=parseFloat(t),t=cs(o.min,o.max,t/100)-o.min),typeof t!="number")return;let c=cs(l.min,l.max,a);s===l&&(c-=t),s.min=bw(s.min,t,r,c,i),s.max=bw(s.max,t,r,c,i)}function vw(s,t,[r,a,i],l,o){Cz(s,t[r],t[a],t[i],t.scale,l,o)}const Ez=["x","scaleX","originX"],Tz=["y","scaleY","originY"];function jw(s,t,r,a){vw(s.x,t,Ez,r?r.x:void 0,a?a.x:void 0),vw(s.y,t,Tz,r?r.y:void 0,a?a.y:void 0)}function Nw(s){return s.translate===0&&s.scale===1}function FI(s){return Nw(s.x)&&Nw(s.y)}function ww(s,t){return s.min===t.min&&s.max===t.max}function _z(s,t){return ww(s.x,t.x)&&ww(s.y,t.y)}function kw(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function UI(s,t){return kw(s.x,t.x)&&kw(s.y,t.y)}function Iw(s){return dr(s.x)/dr(s.y)}function Pw(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}class Dz{constructor(){this.members=[]}add(t){iy(this.members,t),t.scheduleRender()}remove(t){if(oy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(i=>t===i);if(r===0)return!1;let a;for(let i=r;i>=0;i--){const l=this.members[i];if(l.isPresent!==!1){a=l;break}}return a?(this.promote(a),!0):!1}promote(t,r){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,r&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:a}=t;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Az(s,t,r){let a="";const i=s.x.translate/t.x,l=s.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((i||l||o)&&(a=`translate3d(${i}px, ${l}px, ${o}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:h,rotate:g,rotateX:N,rotateY:k,skewX:E,skewY:y}=r;h&&(a=`perspective(${h}px) ${a}`),g&&(a+=`rotate(${g}deg) `),N&&(a+=`rotateX(${N}deg) `),k&&(a+=`rotateY(${k}deg) `),E&&(a+=`skewX(${E}deg) `),y&&(a+=`skewY(${y}deg) `)}const c=s.x.scale*t.x,d=s.y.scale*t.y;return(c!==1||d!==1)&&(a+=`scale(${c}, ${d})`),a||"none"}const Jh=["","X","Y","Z"],Rz={visibility:"hidden"},Mz=1e3;let Lz=0;function Zh(s,t,r,a){const{latestValues:i}=t;i[s]&&(r[s]=i[s],t.setStaticValue(s,0),a&&(a[s]=0))}function $I(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const r=II(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:l}=s.options;window.MotionCancelOptimisedAnimation(r,"transform",xs,!(i||l))}const{parent:a}=s;a&&!a.hasCheckedOptimisedAppear&&$I(a)}function WI({attachResizeListener:s,defaultParent:t,measureScroll:r,checkIsScrollRoot:a,resetTransform:i}){return class{constructor(o={},c=t==null?void 0:t()){this.id=Lz++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(zz),this.nodes.forEach(Wz),this.nodes.forEach(qz),this.nodes.forEach(Bz)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new Nz)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new dy),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const d=this.eventHandlers.get(o);d&&d.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=dI(o)&&!AO(o),this.instance=o;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),s){let g;const N=()=>this.root.updateBlockedByResize=!1;s(o,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=wz(N,250),Wu.hasAnimatedSinceResize&&(Wu.hasAnimatedSinceResize=!1,this.nodes.forEach(Cw))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:N,hasRelativeLayoutChanged:k,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||h.getDefaultTransition()||Yz,{onLayoutAnimationStart:O,onLayoutAnimationComplete:_}=h.getProps(),A=!this.targetLayout||!UI(this.targetLayout,E),z=!N&&k;if(this.options.layoutRoot||this.resumeFrom||z||N&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,z);const L={...ky(y,"layout"),onPlay:O,onComplete:_};(h.shouldReduceMotion||this.options.layoutRoot)&&(L.delay=0,L.type=!1),this.startAnimation(L)}else N||Cw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Kn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Hz),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$I(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const N=this.path[g];N.shouldResetTransform=!0,N.updateScroll("snapshot"),N.options.layoutRoot&&N.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Sw);return}this.isUpdating||this.nodes.forEach(Uz),this.isUpdating=!1,this.nodes.forEach($z),this.nodes.forEach(Oz),this.nodes.forEach(Vz),this.clearAllSnapshots();const c=br.now();Bs.delta=rn(0,1e3/60,c-Bs.timestamp),Bs.timestamp=c,Bs.isProcessing=!0,$h.update.process(Bs),$h.preRender.process(Bs),$h.render.process(Bs),Bs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Py.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Fz),this.sharedNodes.forEach(Gz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xs.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xs.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!dr(this.snapshot.measuredBox.x)&&!dr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=bs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const d=a(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:d,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!FI(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,g=h!==this.prevTransformTemplateValue;o&&this.instance&&(c||mi(this.latestValues)||g)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return o&&(d=this.removeTransform(d)),Xz(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:o}=this.options;if(!o)return bs();const c=o.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(Jz))){const{scroll:g}=this.root;g&&(wo(c.x,g.offset.x),wo(c.y,g.offset.y))}return c}removeElementScroll(o){var d;const c=bs();if(Br(c,o),(d=this.scroll)!=null&&d.wasRoot)return c;for(let h=0;h<this.path.length;h++){const g=this.path[h],{scroll:N,options:k}=g;g!==this.root&&N&&k.layoutScroll&&(N.wasRoot&&Br(c,o),wo(c.x,N.offset.x),wo(c.y,N.offset.y))}return c}applyTransform(o,c=!1){const d=bs();Br(d,o);for(let h=0;h<this.path.length;h++){const g=this.path[h];!c&&g.options.layoutScroll&&g.scroll&&g!==g.root&&ko(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),mi(g.latestValues)&&ko(d,g.latestValues)}return mi(this.latestValues)&&ko(d,this.latestValues),d}removeTransform(o){const c=bs();Br(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!mi(h.latestValues))continue;$0(h.latestValues)&&h.updateSnapshot();const g=bs(),N=h.measurePageBox();Br(g,N),jw(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,g)}return mi(this.latestValues)&&jw(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Bs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var k;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:N}=this.options;if(!(!this.layout||!(g||N))){if(this.resolvedRelativeTargetAt=Bs.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bs(),this.relativeTargetOrigin=bs(),dc(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),Br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=bs(),this.targetWithTransforms=bs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ez(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Br(this.target,this.layout.layoutBox),AI(this.target,this.targetDelta)):Br(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bs(),this.relativeTargetOrigin=bs(),dc(this.relativeTargetOrigin,this.target,E.target),Br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||$0(this.parent.latestValues)||DI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Bs.timestamp&&(d=!1),d)return;const{layout:h,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||g))return;Br(this.layoutCorrected,this.layout.layoutBox);const N=this.treeScale.x,k=this.treeScale.y;tz(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=bs());const{target:E}=o;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(yw(this.prevProjectionDelta.x,this.projectionDelta.x),yw(this.prevProjectionDelta.y,this.projectionDelta.y)),cc(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==N||this.treeScale.y!==k||!Pw(this.projectionDelta.x,this.prevProjectionDelta.x)||!Pw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),o){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=No(),this.projectionDelta=No(),this.projectionDeltaWithTransform=No()}setAnimationOrigin(o,c=!1){const d=this.snapshot,h=d?d.latestValues:{},g={...this.latestValues},N=No();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const k=bs(),E=d?d.source:void 0,y=this.layout?this.layout.source:void 0,O=E!==y,_=this.getStack(),A=!_||_.members.length<=1,z=!!(O&&!A&&this.options.crossfade===!0&&!this.path.some(Kz));this.animationProgress=0;let L;this.mixTargetDelta=K=>{const H=K/1e3;Ew(N.x,o.x,H),Ew(N.y,o.y,H),this.setTargetDelta(N),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(dc(k,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Qz(this.relativeTarget,this.relativeTargetOrigin,k,H),L&&_z(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=bs()),Br(L,this.relativeTarget)),O&&(this.animationValues=g,Iz(g,h,this.latestValues,H,z,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var c,d,h;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(!1),(h=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||h.stop(!1),this.pendingAnimation&&(Kn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xs.update(()=>{Wu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ko(0)),this.currentAnimation=vz(this.motionValue,[0,1e3],{...o,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),o.onUpdate&&o.onUpdate(g)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Mz),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:d,layout:h,latestValues:g}=o;if(!(!c||!d||!h)){if(this!==o&&this.layout&&h&&qI(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||bs();const N=dr(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+N;const k=dr(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+k}Br(c,d),ko(c,g),cc(this.projectionDeltaWithTransform,this.layoutCorrected,c,g)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Dz),this.sharedNodes.get(o).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var c;const{layoutId:o}=this.options;return o?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:o}=this.options;return o?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:d}=o;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const h={};d.z&&Zh("z",o,h,this.animationValues);for(let g=0;g<Jh.length;g++)Zh(`rotate${Jh[g]}`,o,h,this.animationValues),Zh(`skew${Jh[g]}`,o,h,this.animationValues);o.render();for(const g in h)o.setStaticValue(g,h[g]),this.animationValues&&(this.animationValues[g]=h[g]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Rz;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=$u(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const E={};return this.options.layoutId&&(E.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,E.pointerEvents=$u(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!mi(this.latestValues)&&(E.transform=d?d({},""):"none",this.hasProjected=!1),E}const g=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=Az(this.projectionDeltaWithTransform,this.treeScale,g),d&&(c.transform=d(g,c.transform));const{x:N,y:k}=this.projectionDelta;c.transformOrigin=`${N.origin*100}% ${k.origin*100}% 0`,h.animationValues?c.opacity=h===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=h===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const E in Hc){if(g[E]===void 0)continue;const{correct:y,applyTo:O,isCSSVariable:_}=Hc[E],A=c.transform==="none"?g[E]:y(g[E],h);if(O){const z=O.length;for(let L=0;L<z;L++)c[O[L]]=A}else _?this.options.visualElement.renderState.vars[E]=A:c[E]=A}return this.options.layoutId&&(c.pointerEvents=h===this?$u(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var c;return(c=o.currentAnimation)==null?void 0:c.stop(!1)}),this.root.nodes.forEach(Sw),this.root.sharedNodes.clear()}}}function Oz(s){s.updateLayout()}function Vz(s){var r;const t=((r=s.resumeFrom)==null?void 0:r.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&t&&s.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:i}=s.layout,{animationType:l}=s.options,o=t.source!==s.layout.source;l==="size"?Fr(N=>{const k=o?t.measuredBox[N]:t.layoutBox[N],E=dr(k);k.min=a[N].min,k.max=k.min+E}):qI(l,t.layoutBox,a)&&Fr(N=>{const k=o?t.measuredBox[N]:t.layoutBox[N],E=dr(a[N]);k.max=k.min+E,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[N].max=s.relativeTarget[N].min+E)});const c=No();cc(c,a,t.layoutBox);const d=No();o?cc(d,s.applyTransform(i,!0),t.measuredBox):cc(d,a,t.layoutBox);const h=!FI(c);let g=!1;if(!s.resumeFrom){const N=s.getClosestProjectingParent();if(N&&!N.resumeFrom){const{snapshot:k,layout:E}=N;if(k&&E){const y=bs();dc(y,t.layoutBox,k.layoutBox);const O=bs();dc(O,a,E.layoutBox),UI(y,O)||(g=!0),N.options.layoutRoot&&(s.relativeTarget=O,s.relativeTargetOrigin=y,s.relativeParent=N)}}}s.notifyListeners("didUpdate",{layout:a,snapshot:t,delta:d,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:g})}else if(s.isLead()){const{onExitComplete:a}=s.options;a&&a()}s.options.transition=void 0}function zz(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function Bz(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function Fz(s){s.clearSnapshot()}function Sw(s){s.clearMeasurements()}function Uz(s){s.isLayoutDirty=!1}function $z(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function Cw(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function Wz(s){s.resolveTargetDelta()}function qz(s){s.calcProjection()}function Hz(s){s.resetSkewAndRotation()}function Gz(s){s.removeLeadSnapshot()}function Ew(s,t,r){s.translate=cs(t.translate,0,r),s.scale=cs(t.scale,1,r),s.origin=t.origin,s.originPoint=t.originPoint}function Tw(s,t,r,a){s.min=cs(t.min,r.min,a),s.max=cs(t.max,r.max,a)}function Qz(s,t,r,a){Tw(s.x,t.x,r.x,a),Tw(s.y,t.y,r.y,a)}function Kz(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const Yz={duration:.45,ease:[.4,0,.1,1]},_w=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),Dw=_w("applewebkit/")&&!_w("chrome/")?Math.round:Gr;function Aw(s){s.min=Dw(s.min),s.max=Dw(s.max)}function Xz(s){Aw(s.x),Aw(s.y)}function qI(s,t,r){return s==="position"||s==="preserve-aspect"&&!ZV(Iw(t),Iw(r),.2)}function Jz(s){var t;return s!==s.root&&((t=s.scroll)==null?void 0:t.wasRoot)}const Zz=WI({attachResizeListener:(s,t)=>Qc(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ep={current:void 0},HI=WI({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!ep.current){const s=new Zz({});s.mount(window),s.setOptions({layoutScroll:!0}),ep.current=s}return ep.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),eB={pan:{Feature:fz},drag:{Feature:pz,ProjectionNode:HI,MeasureLayout:VI}};function Rw(s,t,r){const{props:a}=s;s.animationState&&a.whileHover&&s.animationState.setActive("whileHover",r==="Start");const i="onHover"+r,l=a[i];l&&xs.postRender(()=>l(t,kd(t)))}class tB extends ri{mount(){const{current:t}=this.node;t&&(this.unmount=CO(t,(r,a)=>(Rw(this.node,a,"Start"),i=>Rw(this.node,i,"End"))))}unmount(){}}class sB extends ri{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=jd(Qc(this.node.current,"focus",()=>this.onFocus()),Qc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Mw(s,t,r){const{props:a}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&a.whileTap&&s.animationState.setActive("whileTap",r==="Start");const i="onTap"+(r==="End"?"":r),l=a[i];l&&xs.postRender(()=>l(t,kd(t)))}class rB extends ri{mount(){const{current:t}=this.node;t&&(this.unmount=DO(t,(r,a)=>(Mw(this.node,a,"Start"),(i,{success:l})=>Mw(this.node,i,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const H0=new WeakMap,tp=new WeakMap,aB=s=>{const t=H0.get(s.target);t&&t(s)},nB=s=>{s.forEach(aB)};function iB({root:s,...t}){const r=s||document;tp.has(r)||tp.set(r,{});const a=tp.get(r),i=JSON.stringify(t);return a[i]||(a[i]=new IntersectionObserver(nB,{root:s,...t})),a[i]}function oB(s,t,r){const a=iB(t);return H0.set(s,r),a.observe(s),()=>{H0.delete(s),a.unobserve(s)}}const lB={some:0,all:1};class cB extends ri{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:a,amount:i="some",once:l}=t,o={root:r?r.current:void 0,rootMargin:a,threshold:typeof i=="number"?i:lB[i]},c=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,l&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:g,onViewportLeave:N}=this.node.getProps(),k=h?g:N;k&&k(d)};return oB(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(dB(t,r))&&this.startObserver()}unmount(){}}function dB({viewport:s={}},{viewport:t={}}={}){return r=>s[r]!==t[r]}const uB={inView:{Feature:cB},tap:{Feature:rB},focus:{Feature:sB},hover:{Feature:tB}},xB={layout:{ProjectionNode:HI,MeasureLayout:VI}},G0={current:null},GI={current:!1};function mB(){if(GI.current=!0,!!ny)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>G0.current=s.matches;s.addListener(t),t()}else G0.current=!1}const hB=new WeakMap;function pB(s,t,r){for(const a in t){const i=t[a],l=r[a];if(sr(i))s.addValue(a,i);else if(sr(l))s.addValue(a,Ko(i,{owner:s}));else if(l!==i)if(s.hasValue(a)){const o=s.getValue(a);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=s.getStaticValue(a);s.addValue(a,Ko(o!==void 0?o:i,{owner:s}))}}for(const a in r)t[a]===void 0&&s.removeValue(a);return t}const Lw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class fB{scrapeMotionValuesFromProps(t,r,a){return{}}constructor({parent:t,props:r,presenceContext:a,reducedMotionConfig:i,blockInitialAnimation:l,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ny,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const k=br.now();this.renderScheduledAt<k&&(this.renderScheduledAt=k,xs.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=r.initial?{...d}:{},this.renderState=h,this.parent=t,this.props=r,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!l,this.isControllingVariants=Gm(r),this.isVariantNode=hI(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:g,...N}=this.scrapeMotionValuesFromProps(r,{},this);for(const k in N){const E=N[k];d[k]!==void 0&&sr(E)&&E.set(d[k],!1)}}mount(t){this.current=t,hB.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),GI.current||mB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:G0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Kn(this.notifyUpdate),Kn(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=ul.has(t);a&&this.onBindTransform&&this.onBindTransform();const i=r.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&xs.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0)}),l=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{i(),l(),o&&o(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Yo){const r=Yo[t];if(!r)continue;const{isEnabled:a,Feature:i}=r;if(!this.features[t]&&i&&a(this.props)&&(this.features[t]=new i(this)),this.features[t]){const l=this.features[t];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bs()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<Lw.length;a++){const i=Lw[a];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const l="on"+i,o=t[l];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=pB(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const a=this.values.get(t);r!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&r!==void 0&&(a=Ko(r===null?void 0:r,{owner:this}),this.addValue(t,a)),a}readValue(t,r){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(N3(a)||k3(a))?a=parseFloat(a):!MO(a)&&Yn.test(r)&&(a=nI(t,r)),this.setBaseTarget(t,sr(a)?a.get():a)),sr(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var l;const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const o=Ly(this.props,r,(l=this.presenceContext)==null?void 0:l.custom);o&&(a=o[t])}if(r&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!sr(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new dy),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class QI extends fB{constructor(){super(...arguments),this.KeyframeResolver=wO}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:a}){delete r[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;sr(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function KI(s,{style:t,vars:r},a,i){Object.assign(s.style,t,i&&i.getProjectionStyles(a));for(const l in r)s.style.setProperty(l,r[l])}function gB(s){return window.getComputedStyle(s)}class yB extends QI{constructor(){super(...arguments),this.type="html",this.renderInstance=KI}readValueFromInstance(t,r){var a;if(ul.has(r))return(a=this.projection)!=null&&a.isProjecting?R0(r):UL(t,r);{const i=gB(t),l=(my(r)?i.getPropertyValue(r):i[r])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:r}){return RI(t,r)}build(t,r,a){Ay(t,r,a.transformTemplate)}scrapeMotionValuesFromProps(t,r,a){return Oy(t,r,a)}}const YI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bB(s,t,r,a){KI(s,t,void 0,a);for(const i in t.attrs)s.setAttribute(YI.has(i)?i:Dy(i),t.attrs[i])}class vB extends QI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=bs}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(ul.has(r)){const a=aI(r);return a&&a.default||0}return r=YI.has(r)?r:Dy(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,a){return kI(t,r,a)}build(t,r,a){vI(t,r,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,r,a,i){bB(t,r,a,i)}mount(t){this.isSVGTag=NI(t.tagName),super.mount(t)}}const jB=(s,t)=>My(s)?new vB(t):new yB(t,{allowProjection:s!==v.Fragment}),NB=bV({...qV,...uB,...eB,...xB},jB),rt=WO(NB),It="/assets/logo-e43e9960.png",wB="/assets/brooklyn99-7c1a6c47.png",kB="/assets/stranger-things-31a579dc.png",IB="/assets/breaking-bad-482f4098.png",PB="/assets/naruto-54b60bd0.png",SB="/assets/alice-5ff5523e.png",CB="/assets/netflix-e3c8e0d2.png",EB="/assets/spotify-d09996b4.png",TB="/assets/disney-0c4f0934.png",_B="/assets/max-c00a4c65.png",DB="/assets/prime-video-72b85c51.png",AB="/assets/vix-ee8ed6dc.png",RB="/assets/Canva-e7a7d520.png",MB="/assets/ChatGPT-b8d712b1.png",LB="/assets/crunchyroll-562435fc.png",OB="/assets/redessociales-65298696.png",VB="/assets/dgo-7ac16535.png",zB="/assets/ligamax-7ac6606f.png",BB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAB4CAYAAADblO/uAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACnFJREFUeNrsnd912zYbh+Gc3FedoPQEVSYINUHUm+bS0gS2JlA8ga0JrF7qyvYElieIMkHYCapvAn+EQEb2sUgR1AsSIJ/nHKU9jkOKIH54/+AFcPby8qIAoNucIXQAhA4ACB0AEDoAIHQAQOgAgNABAKEDAEIHQOgAgNABAKEDAEIHAIQOAAgdABA6ACB0AIQOAAgdABA6AHRX6GdnZ7RiVVZJlP45Tj+D9PM5++k2/fxIPxv1NXqgkeA1UoYYoTcj8En652X6GR75TS36Rfq5TUW/peEAoYchcG29b9JPZPkvk/QzTcW+phEROkL3V+DaNb/L3PRT0GJf0qAIHaH7KfKnCm46YgeEjsjf8CkV+4YGRugIvbsiz2P2TyToEHpdPtCUYtw4ErkmSj9XNDGEadHNvLL+xK9+qq3WJqiMs8mu3zdwp/O0XRK6LRbdf6EbF1dbpwt1fNpJF5AsvBa9eZ6fyhTBuGaZtsWU7o/Q/Rb6KvmmTOGIrSi04KdexqjmmeYN3vF3YnWE7qfQZRJV2mX9y6vsc7PWPGeWtsEtEkDofgl9lQwzkUuIQVuykTdiXyU6BLlp+K5J+vznne7dxks6FLYkCN1HobuxeP6IfZX8VPblrRJ0e159lRzqlKM+lgRLCf2j4+/5pOTdWhMGrJJ2xW4WqkQt3V0nMjeOnitWb2dB6rDeDcgU+XjDR4dCcDmvrMV+n96jzSKSixbf23gXq7tBi/zU5OI86wPbTPSPlPG2ywdHItedxXWBR6SambsuyjvELb63KKtB8J1BNijdpd/3v8wLgs4IvbnpprggceOaSw/e3TiwvjbIBH+f5W4gaKHLxHh2g4qxsE1Z84EnIvscaJ9rqooQHMfo8xaeQ6/9/tTQvSaq2Xnzsli6Scqz3vty5igbhMYl7WQ8sa/RNyQYokVvL3YdZsm/vrjtxhX2KU7Xc9x6INBJN1Omq+f6b0vbERc+WNe9zUz0VRY2uHTbY9XelNrhAc5X9GzI10jPDExLYnZW5AUq9EnLz+Paql949v6G3vcwM61WtLvtFyQYmtCNtRu03vFdZeGNmznx7P2FkpC7LnlfuO+BWXRfRmdXWfiJh+8vDJGYCrkkWK+kA0hm3WOPnku78CPha156+P5CEokWetToYPU2ZzPI2stsbJJ/p54slPko1KADzzpdvKvCkiq79C8J9/q7RYF01ucCYzAsieFt39GX7HrDygNI3TLdw/UiSe0+V3Q9vWrPI4vuo2W5SRvvQagWXjoJpzvWIvtvXoAzr2ndohK3uE9okdTJ4uftP077i34Hs4pHY8Xqfc3I+gRhSl/PSYwee/ji80MUTreYsvG57kijXWcyU1BJtpHEuXK1Ig1sBs37lsqqnSIldF+zv2OBhRSSIp8W7g5jPI86K9LiQPpaUR/xcXCbZxt+EqMfGAl9Rbvwm1pro401nwuKvNwN05Vlq2QdkHhtPaxDSC4zXqv96bTbkkEkP812XNJ373bvoiP78/VB6KdsVCG1+GJpkaR57JzQy5O1Mhbdvm7+YedBFW8Hlsfuyy68gg8CLzGETpmLfVy5Y66SOyWTZEwsXfIuxulXhW3TtsU0oVTR++lM5V6fTmrJd6W5K63GMgPXk2Bsfm3ZmW07vt/VcaatL0usavsYsScH/qYzxTwSrntojTHZffTUm5nbzS1orPbzsHIxo+28qg4vVkmXXPayfQP/8ejbPhzwPCKE/tZShshYud9A4lr1kf3mHDcl/WPt2eaR/3b5lXxU4IpNx7YnvqiQj/kt84iO/Z4OT6bevS+EDjVYdOx5JoLXmnJYZH+Ens9z+lYnL/NsbG9cbMmrlZhKhxPHvIwhQpdHi2D2KxttXsJ9wPH+oeer2yG72uHevnO3otb5gc8VwwgsuiOSd0f/moowvaz0qSNiP8Vtt31+n2PLtTIFQA+NuOqm3FlXMkZIu32hHxaBmVbShQt3gbfppuH4838N3WdmMag0u87bZPlvlJ+bg/RW6MWdRce1q0TPZYe8oODUJJyvHo3Pswh3Fn1mXdLuQ4Qux7EYbZbFVaG68KcmmobC7dltjLs+LjEqi2yQ2hy5TpyFjghdKEYs75ja5VslC9XOQRCni7z52u2+r2GfFxqMoiXBPUSi1t22Y0dHf8OsREoCbM9HgWv8SbesbM2HBf1picjlhe5KkLMA21NiftguZOlW9Z0tRS77NdKWFrp9djWueF0tmnVQIpdx222EvqULi/RJKaLuCt1gI0gb1zQkq/4odB2bZBx7zPlF54WeOOnIJlO67JHb7kvYBPXzBlGXhf7DatSza4xZAC7qpqWdUn70XFbbArGNG3nnh5l0Wei2LmRc+TeNgHxfCdbWBgp9d92LQsY6U7ORUNtfWq9XMAPTF/+Fbp/5/WJ5/W+eu6ltuO3bnmfcy85004c33h/1HM3egHq3oe/KtvTaJPwOiT3fn/Bb4ZZl5r7jbFuzn8os6HJalSdZGbe2sNRxjevPlNyurNJueyIq4GqZ9wcFmusCkeanrzxkIc7m1yBgNsiIBcS1KLj3IPMq5rutxt+GGNWPi/LQdbd1IwfWu8f6O90m/Z0eKg4GzBWbfrE88g7y467us4/+/ysRC3r83rmw41efVkq7JYX+7NR931v1rsfni0rtwA4tr/lLIF+xqeklSdx7qxznW+SEbr9ryLjGPXybbkvENzg01yvbT23K7jXv2kznKz5lXs62hsCn2b9/rnVvc0T3bc3BRb9rfe7eo8smkl69ZhOnR7vspL1QZtkg4cPqtoWjjquX62qLfaH22WCzEsu9JS9yR5vM8I9q3V8nbVeJFtxEmR1mDrnKufV8VO93ol3Wes783DyzGOv1vd8bBnP953f3drzF99nLy8tpFzg7U6++bNHxNmUuqP1IaH8fF2x3I3FHzuaCljEnuL47Nvnl7z9GvsXoqkaMU+/ccTM4tD2HvEDkEAqyQi+eWyxiWHo8Ujlt7gu+rRmTARTxRzhCN9hmoeuVK5r4pq0pphnWHISJQhO6rfte/5BAUzHXdOHIkqw3NCT0xF+h27vv8Yl3nDYYr29UmBtigM+YUt1DQv/XX6EbbKadTnNZ9vOY6wZEPsJlBwdMCn4u1qdlp9f2I5ROsOli/aqJtpHIAo1Voqfcrhy8iNv0+2HJwYU11yWy3w/8jS4C+v1Ufbq16MbqNR/HGjGOBGObdTYIIXKQFvggmzt/EvCKW7Lo+7jje0Wrfi5e8WX2+76okQPQg5RO8P3T+2WgUNerzBfMHCqprXK09K9iLCmL7k7o5qGrVLDpevFzx4kO3ah/quIVS89Z467Fa9ehj0I/JXzcZl7krh+GIXTz4E9HRi822ocuCV2743MJkUsK/UMDj66X8RUJ+RaRQ8eoG4IuM3fdiUfp3qK/d6GjX3Ewa6qhexZd9+/LLEyMVPH08UbtV7IVngngjesOAP6D0AEQOgAgdABA6ACA0AEAoQMAQgcAhA4ACB0AoQMAQgcAhA4ACB0AEDoAIHQAQOgAgNABEDoAIHQAQOgAgNABAKEDAEIHAIQOAAgdAKEjdIDu838BBgAP9Pzi++BqOAAAAABJRU5ErkJggg==",FB="/assets/youtube-49ca55e1.png",UB="/assets/deezer-17be4fc1.png",$B="/assets/tidal-d3f361cb.png",WB="/assets/vpn-62bcb4e7.png",qB="/assets/wintv-4112ccf1.png",HB="/assets/applemusic-67f0cc24.png",GB="/assets/appletv-e2fd6c55.png",QB="/assets/iptv-a55016d0.png",KB="/assets/flujotv-4d1c58b0.png",YB="/assets/vikirakuten-116faf85.png",XB="/assets/pornhub-46f32d0d.png",JB="/assets/paramount-5ab87b8f.png",ZB="/assets/licencias-80ba80ab.png",eF="/assets/capcut-bc65a6c0.png",tF="/assets/duolingo-4d803f89.png",sF="/assets/buscapersonas-88e00efa.png",XI=v.createContext({theme:"dark",toggleTheme:()=>{}}),rF=({children:s})=>{const[t,r]=v.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{r(i=>{const l=i==="dark"?"light":"dark";return localStorage.setItem("theme",l),l})};return v.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(XI.Provider,{value:{theme:t,toggleTheme:a},children:e.jsx("div",{className:`min-h-screen font-inter transition-colors duration-300 ${t==="dark"?"bg-gradient-to-br from-gray-900 via-blue-950 to-gray-900 text-gray-100":"bg-gradient-to-br from-gray-100 via-blue-50 to-gray-100 text-gray-900"}`,children:s})})},Pr=[{src:wB,title:"Brooklyn Nine-Nine",description:"Comedia policial hilarante"},{src:kB,title:"Stranger Things",description:"Misterio y nostalgia ochentera"},{src:IB,title:"Breaking Bad",description:"A chemistry teacher's descent into the world of crime"},{src:PB,title:"Naruto",description:"Aventuras ninja épicas"},{src:SB,title:"Alice in Borderland",description:"Juego de supervivencia intenso"}],aF=[{name:"Netflix",logo:CB,route:"/netflix",color:"#E50914"},{name:"Spotify",logo:EB,route:"/spotify",color:"#1DB954"},{name:"Disney+",logo:TB,route:"/disney",color:"#1C4ED8"},{name:"Max",logo:_B,route:"/max",color:"#B5179E"},{name:"Prime Video",logo:DB,route:"/primevideo",color:"#00A8E1"},{name:"Vix",logo:AB,route:"/vix",color:"#FF5733"},{name:"Canva",logo:RB,route:"/canva",color:"#00C4B4"},{name:"ChatGPT",logo:MB,route:"/chatgpt",color:"#10A37F"},{name:"Crunchyroll",logo:LB,route:"/crunchyroll",color:"#F47521"},{name:"Redes Sociales",logo:OB,route:"/redessociales",color:"#3B5998"},{name:"Dgo",logo:VB,route:"/dgo",color:"#4CAF50"},{name:"Liga Max",logo:zB,route:"/ligamax",color:"#FFD700"},{name:"Movistar Play",logo:BB,route:"/movistarplay",color:"#00ADEF"},{name:"Youtube",logo:FB,route:"/youtube",color:"#FF0000"},{name:"Deezer",logo:UB,route:"/deezer",color:"#FEAA2D"},{name:"Tidal",logo:$B,route:"/tidal",color:"#00C7B7"},{name:"Vpn",logo:WB,route:"/vpn",color:"#4B0082"},{name:"Win Tv",logo:qB,route:"/wintv",color:"#4682B4"},{name:"Apple Music",logo:HB,route:"/applemusic",color:"#FA2C43"},{name:"Apple Tv",logo:GB,route:"/appletv",color:"#A3AAAE"},{name:"Iptv",logo:QB,route:"/iptv",color:"#8B008B"},{name:"Flujo Tv",logo:KB,route:"/flujotv",color:"#20B2AA"},{name:"Viki Rakuten",logo:YB,route:"/vikirakuten",color:"#D81B60"},{name:"Pornhub",logo:XB,route:"/pornhub",color:"#FFA500"},{name:"Paramount",logo:JB,route:"/paramount",color:"#0064D2"},{name:"Licencias",logo:ZB,route:"/licencias",color:"#708090"},{name:"Cap cut",logo:eF,route:"/capcut",color:"#00CED1"},{name:"Duolingo",logo:tF,route:"/duolingo",color:"#58CC02"},{name:"Busca Personas",logo:sF,route:"/buscapersonas",color:"#6A5ACD"}],nF=({isOpen:s,onClose:t,message:r})=>e.jsx(Ey,{children:s&&e.jsx(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs(rt.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl border dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Zp,{className:"text-blue-500 dark:text-cyan-400 text-2xl"}),e.jsx("h3",{className:"text-xl font-bold dark:text-white text-gray-900",children:"Notificación"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:r}),e.jsx("button",{onClick:t,className:"w-full py-2 rounded-lg bg-blue-600 dark:bg-cyan-600 text-white hover:bg-blue-700 dark:hover:bg-cyan-700 transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-500",children:"Cerrar"})]})})}),iF=({isOpen:s,onClose:t,onSubmit:r,user:a})=>{const[i,l]=v.useState(0),[o,c]=v.useState(0),[d,h]=v.useState(""),[g,N]=v.useState(""),[k,E]=v.useState(""),y=async O=>{if(O.preventDefault(),!a){t();return}try{const _=Y(I,"surveys"),A=xe(_,je("userEmail","==",a.email));if(!(await jt(A)).empty){t();return}await r({websiteSatisfaction:i,providerSatisfaction:o,recommendedProvider:d,notRecommendedProvider:g,improvementSuggestions:k,timestamp:new Date,userEmail:a.email,username:a.name}),l(0),c(0),h(""),N(""),E(""),t()}catch(_){console.error("Error submitting survey:",_)}};return e.jsx(Ey,{children:s&&e.jsx(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs(rt.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl border dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(e0,{className:"text-blue-500 dark:text-cyan-400 text-2xl"}),e.jsx("h3",{className:"text-xl font-bold dark:text-white text-gray-900",children:"Encuesta de Satisfacción"})]}),a?e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200 text-gray-700 mb-2",children:"¿Estás satisfecho con la página? (1-5)"}),e.jsx("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(O=>e.jsx("button",{type:"button",onClick:()=>l(O),className:`w-10 h-10 rounded-full border-2 ${i===O?"bg-blue-600 dark:bg-cyan-600 text-white":"bg-gray-100 dark:bg-gray-800 dark:border-gray-700 border-gray-200"} flex items-center justify-center`,children:O},O))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200 text-gray-700 mb-2",children:"¿Estás satisfecho con los proveedores? (1-5)"}),e.jsx("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(O=>e.jsx("button",{type:"button",onClick:()=>c(O),className:`w-10 h-10 rounded-full border-2 ${o===O?"bg-blue-600 dark:bg-cyan-600 text-white":"bg-gray-100 dark:bg-gray-800 dark:border-gray-700 border-gray-200"} flex items-center justify-center`,children:O},O))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200 text-gray-700 mb-2",children:"¿Qué proveedor recomiendas?"}),e.jsx("input",{type:"text",value:d,onChange:O=>h(O.target.value),className:"w-full py-2 px-3 rounded-lg bg-gray-100 dark:bg-gray-800 dark:text-gray-100 text-gray-900 focus:ring-2 focus:ring-blue-500 dark:focus:ring-cyan-500 focus:outline-none",placeholder:"Escribe el nombre del proveedor"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200 text-gray-700 mb-2",children:"¿Qué proveedor no recomiendas?"}),e.jsx("input",{type:"text",value:g,onChange:O=>N(O.target.value),className:"w-full py-2 px-3 rounded-lg bg-gray-100 dark:bg-gray-800 dark:text-gray-100 text-gray-900 focus:ring-2 focus:ring-blue-500 dark:focus:ring-cyan-500 focus:outline-none",placeholder:"Escribe el nombre del proveedor"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200 text-gray-700 mb-2",children:"¿Qué mejorarías de la página?"}),e.jsx("textarea",{value:k,onChange:O=>E(O.target.value),className:"w-full py-2 px-3 rounded-lg bg-gray-100 dark:bg-gray-800 dark:text-gray-100 text-gray-900 focus:ring-2 focus:ring-blue-500 dark:focus:ring-cyan-500 focus:outline-none",placeholder:"Escribe tus sugerencias",rows:"4"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:t,className:"w-full py-2 rounded-lg bg-gray-300 dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-400 dark:hover:bg-gray-600 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"w-full py-2 rounded-lg bg-blue-600 dark:bg-cyan-600 text-white hover:bg-blue-700 dark:hover:bg-cyan-700 transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-500",disabled:i===0||o===0,children:"Enviar"})]})]}):e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Por favor, inicia sesión para completar la encuesta."})]})})})},oF=()=>{const[s,t]=v.useState(0),[r,a]=v.useState(null),[i,l]=v.useState(0),[o,c]=v.useState("user"),[d,h]=v.useState(""),[g,N]=v.useState([]),[k,E]=v.useState({isOpen:!1,message:""}),[y,O]=v.useState(!1),[_,A]=v.useState(!1),[z,L]=v.useState(!1),K=St(),{theme:H,toggleTheme:G}=v.useContext(XI);v.useEffect(()=>{const $=setInterval(()=>{t(pe=>(pe+1)%Pr.length)},5e3);return()=>clearInterval($)},[]),v.useEffect(()=>(document.body.style.overflow=z?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[z]),v.useEffect(()=>{(async()=>{if(Qe.currentUser)try{const pe=Y(I,"users"),Le=xe(pe,je("email","==",Qe.currentUser.email)),De=await jt(Le);if(!De.empty){const be=De.docs[0].data();a({name:be.username||"Usuario",email:Qe.currentUser.email}),l(be.balance||0),c(be.role||"user")}const he=await et(B(I,"notifications","adminMessage"));if(he.exists()){const be=he.data();E({isOpen:!0,message:be.message||"Mensaje del administrador no disponible."})}}catch(pe){console.error("Error al cargar datos:",pe),E({isOpen:!0,message:"Hubo un error al cargar los datos. Por favor, intenta de nuevo."})}})()},[]);const R=async()=>{try{const $=await et(B(I,"notifications","adminMessage"));if($.exists()){const pe=$.data();E({isOpen:!0,message:pe.message||"Mensaje del administrador no disponible."})}else E({isOpen:!0,message:"No hay notificaciones del administrador en este momento."})}catch($){console.error("Error al cargar notificación:",$),E({isOpen:!0,message:"Error al cargar la notificación. Por favor, intenta de nuevo."})}},u=async $=>{try{await Ua(Y(I,"surveys"),$),E({isOpen:!0,message:"¡Gracias por tu opinión! La encuesta se ha enviado correctamente."})}catch(pe){console.error("Error al enviar la encuesta:",pe),E({isOpen:!0,message:"Error al enviar la encuesta. Por favor, intenta de nuevo."})}},q=async()=>{try{await Qe.signOut(),a(null),K("/login")}catch($){console.error("Error al cerrar sesión:",$),E({isOpen:!0,message:"Error al cerrar sesión. Por favor, intenta de nuevo."})}},U=()=>{K({user:"/dashboard/user",affiliate:"/dashboard/affiliate",provider:"/dashboard/provider",admin:"/dashboard/admin"}[o]||"/dashboard/user")},te=async $=>{if($.preventDefault(),!d.trim()){N([]);return}try{const pe=Y(I,"products"),Le=xe(pe,je("name",">=",d.toLowerCase()),je("name","<=",d.toLowerCase()+"")),he=(await jt(Le)).docs.map(be=>({id:be.id,...be.data()}));N(he)}catch(pe){console.error("Error al buscar productos:",pe),E({isOpen:!0,message:"Error al realizar la búsqueda. Por favor, intenta de nuevo."}),N([])}},se=()=>{A($=>!$)},X=()=>{L($=>!$)};return e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(nF,{isOpen:k.isOpen,onClose:()=>E({...k,isOpen:!1}),message:k.message}),e.jsx(iF,{isOpen:y,onClose:()=>O(!1),onSubmit:u,user:r}),e.jsxs(rt.header,{initial:{y:-100},animate:{y:0},transition:{type:"spring",stiffness:120},className:`fixed top-0 left-0 right-0 z-50 border-b dark:border-gray-800 border-gray-200 shadow-lg ${H==="dark"?"bg-gray-900":"bg-white"}`,children:[e.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(rt.img,{whileHover:{scale:1.1},src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:`text-xl font-bold ${H==="dark"?"text-cyan-300":"text-blue-600"}`,children:"BlackStreaming"})]}),e.jsx("div",{className:"hidden lg:flex justify-center flex-1",children:e.jsxs(rt.div,{className:"relative max-w-lg w-full",initial:{scale:.9},animate:{scale:1},children:[e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full py-3 px-5 pr-12 rounded-full bg-gray-100 dark:bg-gray-800 dark:text-gray-100 text-gray-900 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 dark:focus:ring-cyan-500 focus:outline-none shadow-sm transition-all",value:d,onChange:$=>h($.target.value)}),e.jsx(rt.button,{whileHover:{scale:1.1},onClick:te,className:"absolute right-3 top-1/2 -translate-y-1/2 dark:text-cyan-400 text-blue-600","aria-label":"Buscar",children:e.jsx(t0,{size:20})})]})}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:X,className:"lg:hidden p-2 rounded-full dark:text-cyan-300 text-blue-600 dark:hover:bg-gray-800 hover:bg-gray-100","aria-label":"Toggle menu",children:z?e.jsx(Ov,{size:22}):e.jsx(VT,{size:22})}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-3",children:[e.jsx(rt.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:G,className:"p-2 rounded-full dark:text-cyan-300 text-blue-600 dark:hover:bg-gray-800 hover:bg-gray-100","aria-label":"Cambiar tema",children:H==="dark"?e.jsx(jx,{size:22}):e.jsx(bx,{size:22})}),r?e.jsxs(e.Fragment,{children:[e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:R,className:"p-2 rounded-full dark:bg-gray-800 bg-gray-100 dark:hover:bg-gray-700 hover:bg-gray-200","aria-label":"Ver notificaciones",children:e.jsx(Zp,{className:"dark:text-cyan-400 text-blue-600",size:22})}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>O(!0),className:"p-2 rounded-full dark:bg-gray-800 bg-gray-100 dark:hover:bg-gray-700 hover:bg-gray-200","aria-label":"Abrir encuesta",children:e.jsx(e0,{className:"dark:text-cyan-400 text-blue-600",size:22})}),e.jsx(rt.span,{className:"text-base font-medium dark:text-cyan-300 text-blue-700",initial:{opacity:0},animate:{opacity:1},children:r.name}),e.jsxs(rt.span,{className:"text-base font-medium dark:bg-gray-800 bg-gray-100 dark:text-cyan-200 text-blue-800 px-4 py-1.5 rounded-full",whileHover:{scale:1.05},children:["S/ ",i.toFixed(2)]}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:U,className:"p-2 rounded-full dark:bg-gray-800 bg-gray-100 dark:hover:bg-gray-700 hover:bg-gray-200","aria-label":"Panel de control",children:e.jsx(Mv,{className:"dark:text-cyan-400 text-blue-600",size:22})}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:se,className:`p-2 rounded-full ${_?"bg-red-600 dark:bg-red-500 hover:bg-red-700 dark:hover:bg-red-600":"dark:bg-gray-800 bg-gray-100 dark:hover:bg-gray-700 hover:bg-gray-200"}`,"aria-label":_?"Desactivar modo live":"Activar modo live",children:e.jsx(Rv,{className:_?"text-white":"dark:text-cyan-400 text-blue-600",size:22})}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:q,className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white bg-gradient-to-r from-red-600 to-red-700 shadow-md hover:from-red-700 hover:to-red-800 transition-all duration-300",children:[e.jsx(Lv,{size:18}),e.jsx("span",{children:"Salir"})]})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:()=>K("/login"),className:`inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 ${H==="dark"?"bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`,"aria-label":"Ingresar",children:[e.jsx(vx,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsx(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:()=>K("/register"),className:`inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 ${H==="dark"?"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600":"bg-gradient-to-r from-blue-400 to-indigo-400 hover:from-blue-500 hover:to-indigo-500"}`,"aria-label":"Registrarse",children:e.jsx("span",{children:"Registrarse"})})]})]})]}),e.jsx(Ey,{children:z&&e.jsx(rt.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:300,damping:30},className:"lg:hidden fixed top-0 left-0 h-full w-64 bg-white dark:bg-gray-900 z-50 shadow-2xl border-r dark:border-gray-700 border-gray-200",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 border-gray-200",children:[e.jsx("span",{className:"text-xl font-bold dark:text-cyan-300 text-blue-600",children:"Menú"}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:X,className:"p-2 rounded-full dark:text-cyan-300 text-blue-600 dark:hover:bg-gray-800 hover:bg-gray-100","aria-label":"Cerrar menú",children:e.jsx(Ov,{size:22})})]}),e.jsxs("div",{className:"flex flex-col p-4 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full py-3 px-5 pr-12 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-cyan-500 focus:outline-none",value:d,onChange:$=>h($.target.value)}),e.jsx(rt.button,{whileHover:{scale:1.1},onClick:te,className:"absolute right-3 top-1/2 -translate-y-1/2 dark:text-cyan-400 text-blue-600","aria-label":"Buscar",children:e.jsx(t0,{size:20})})]}),r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-base font-medium dark:text-cyan-300 text-blue-600",children:r.name}),e.jsxs("span",{className:"text-base font-medium bg-gray-100 dark:bg-gray-800 dark:text-cyan-200 text-blue-800 px-4 py-1.5 rounded-full",children:["S/ ",i.toFixed(2)]})]}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{R(),X()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[e.jsx(Zp,{size:18}),e.jsx("span",{children:"Notificaciones"})]}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{O(!0),X()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[e.jsx(e0,{size:18}),e.jsx("span",{children:"Encuesta"})]}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{U(),X()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[e.jsx(Mv,{size:18}),e.jsx("span",{children:"Panel de control"})]}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{se(),X()},className:`flex items-center space-x-2 text-base text-left ${_?"text-red-500 dark:text-red-400":"dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600"}`,children:[e.jsx(Rv,{size:18}),e.jsx("span",{children:_?"Desactivar modo live":"Activar modo live"})]}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{q(),X()},className:"flex items-center space-x-2 text-base text-left text-red-500 dark:text-red-400 hover:text-red-600 dark:hover:text-red-300",children:[e.jsx(Lv,{size:18}),e.jsx("span",{children:"Salir"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{K("/login"),X()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[e.jsx(vx,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsx(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{K("/register"),X()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:e.jsx("span",{children:"Registrarse"})})]}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{G(),X()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[H==="dark"?e.jsx(jx,{size:18}):e.jsx(bx,{size:18}),e.jsx("span",{children:"Cambiar tema"})]})]})]})})})]}),e.jsxs("main",{className:"flex-grow pt-24",children:[g.length>0&&e.jsxs(rt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"py-12 px-6 container mx-auto",children:[e.jsx("h2",{className:`text-3xl font-bold mb-6 ${H==="dark"?"text-white":"text-gray-900"}`,children:"Resultados de búsqueda"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map($=>{var pe;return e.jsxs(rt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.05,boxShadow:"0 10px 20px rgba(0,0,0,0.1)"},className:`p-6 rounded-lg shadow-md border-2 ${H==="dark"?"bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700":"bg-gradient-to-br from-white to-gray-100 border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-2 ${H==="dark"?"text-cyan-300":"text-blue-600"}`,children:$.name}),e.jsx("p",{className:`text-base line-clamp-2 mb-2 ${H==="dark"?"text-gray-300":"text-gray-600"}`,children:$.description}),e.jsxs("p",{className:`text-base font-medium mb-1 ${H==="dark"?"text-gray-200":"text-gray-700"}`,children:["Plataforma: ",$.platform]}),e.jsxs("p",{className:`text-base font-bold ${H==="dark"?"text-cyan-400":"text-blue-700"}`,children:["Precio: S/ ",(pe=$.price)==null?void 0:pe.toFixed(2)]})]},$.id)})})]}),d.trim()&&g.length===0&&e.jsx(rt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"py-12 px-6 container mx-auto text-center",children:e.jsxs("p",{className:`text-lg ${H==="dark"?"text-gray-300":"text-gray-600"}`,children:['No se encontraron productos para "',d,'".']})}),e.jsxs(rt.section,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"py-8 px-6 text-center",children:[e.jsx("h1",{className:`text-4xl sm:text-5xl md:text-6xl font-extrabold tracking-tight ${H==="dark"?"text-white":"text-gray-900"} bg-clip-text bg-gradient-to-r dark:from-cyan-400 dark:to-blue-500 from-blue-600 to-indigo-600`,children:"Tus plataformas favoritas al instante"}),e.jsx("p",{className:`mt-4 text-lg sm:text-xl ${H==="dark"?"text-gray-300":"text-gray-600"} max-w-3xl mx-auto`,children:"Accede a todo tu entretenimiento y herramientas con BlackStreaming."})]}),e.jsxs("section",{className:"relative py-6 px-6 sm:px-8",children:[e.jsxs(rt.div,{className:"flex justify-center items-center space-x-4 perspective-1000",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx(rt.div,{className:"hidden lg:block w-48 h-64 rounded-2xl overflow-hidden shadow-xl transform -rotate-y-15",initial:{x:-100,opacity:0},animate:{x:0,opacity:.8},transition:{duration:.5},children:e.jsx("img",{src:Pr[(s-1+Pr.length)%Pr.length].src,alt:"Programa anterior",className:"w-full h-full object-cover scale-110"})}),e.jsxs(rt.div,{className:"relative rounded-2xl overflow-hidden shadow-2xl dark:border-cyan-500/20 border-blue-200/20 border",initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:100},children:[e.jsx("img",{src:Pr[s].src,alt:"Programa destacado",className:"w-72 h-96 sm:w-96 sm:h-[28rem] object-cover"}),e.jsx("div",{className:`absolute inset-0 ${H==="dark"?"bg-gradient-to-t from-gray-900/80 to-transparent":"bg-gradient-to-t from-gray-900/50 to-transparent"}`}),e.jsxs(rt.div,{className:"absolute bottom-0 w-full p-6",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${H==="dark"?"text-white":"text-gray-100"} drop-shadow-lg`,children:Pr[s].title}),e.jsx("p",{className:`text-sm ${H==="dark"?"text-gray-300":"text-gray-200"}`,children:Pr[s].description})]})]}),e.jsx(rt.div,{className:"hidden lg:block w-48 h-64 rounded-2xl overflow-hidden shadow-xl transform rotate-y-15",initial:{x:100,opacity:0},animate:{x:0,opacity:.8},transition:{duration:.5},children:e.jsx("img",{src:Pr[(s+1)%Pr.length].src,alt:"Próximo programa",className:"w-full h-full object-cover scale-110"})}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t($=>($-1+Pr.length)%Pr.length),className:"absolute left-4 top-1/2 -translate-y-1/2 dark:bg-gray-900/60 bg-white/60 dark:hover:bg-cyan-500/60 hover:bg-blue-200/60 dark:border-cyan-500/20 border-blue-200/20 backdrop-blur-md p-3 rounded-full border","aria-label":"Programa anterior",children:e.jsx(zT,{className:"dark:text-cyan-300 text-blue-600 text-xl"})}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t($=>($+1)%Pr.length),className:"absolute right-4 top-1/2 -translate-y-1/2 dark:bg-gray-900/60 bg-white/60 dark:hover:bg-cyan-500/60 hover:bg-blue-200/60 dark:border-cyan-500/20 border-blue-200/20 backdrop-blur-md p-3 rounded-full border","aria-label":"Próximo programa",children:e.jsx(BT,{className:"dark:text-cyan-300 text-blue-600 text-xl"})})]}),e.jsx("div",{className:"flex justify-center space-x-2 mt-6",children:Pr.map(($,pe)=>e.jsx(rt.div,{whileHover:{scale:1.2},className:`w-2 h-2 rounded-full transition-colors ${pe===s?"dark:bg-cyan-400 bg-blue-600":"dark:bg-gray-600 bg-gray-300"}`,"aria-label":`Ir a ${pe+1}`},pe))})]}),e.jsxs(rt.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},className:"py-16 container mx-auto px-6",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx(rt.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:`text-3xl md:text-4xl font-bold ${H==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Plataformas de Streaming"}),e.jsx(rt.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:`${H==="dark"?"text-gray-300":"text-gray-600"} max-w-2xl mx-auto`,children:"Acceso a todas tus plataformas favoritas en un solo lugar."})]}),e.jsx(rt.div,{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},children:aF.map($=>e.jsx(rt.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.05,boxShadow:"0 10px 20px rgba(0,0,0,0.2)"},className:"w-full h-32",children:e.jsxs(b,{to:$.route,className:`group relative flex items-center justify-center h-full rounded-lg shadow-lg transition-all duration-300 ${H==="dark"?"bg-gradient-to-br from-gray-800 to-gray-900":"bg-gradient-to-br from-white to-gray-100"} border-2`,style:{borderImage:`linear-gradient(to right, ${$.color}, transparent) 1`},"aria-label":`Ir a ${$.name}`,children:[e.jsxs("div",{className:"flex items-center space-x-4 p-4",children:[e.jsx(rt.img,{whileHover:{scale:1.1},src:$.logo,alt:$.name,className:"w-20 h-20 object-contain",style:{transform:_?"scaleX(-1)":"scaleX(1)"}}),e.jsx("span",{className:`font-semibold text-center text-base ${H==="dark"?"text-gray-100":"text-gray-800"}`,children:$.name})]}),e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-10 transition-opacity duration-300",style:{backgroundColor:$.color}})]})},$.name))})]}),!r&&e.jsx(rt.section,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"py-16 dark:bg-gradient-to-r dark:from-gray-900 dark:to-blue-950 bg-gradient-to-r from-blue-50 to-gray-100",children:e.jsxs("div",{className:"container mx-auto px-6 text-center",children:[e.jsx(rt.h2,{initial:{scale:.9},animate:{scale:1},className:`text-2xl md:text-3xl font-bold ${H==="dark"?"text-white":"text-gray-900"} mb-4`,children:"¿Listo para adquirir?"}),e.jsx("p",{className:`${H==="dark"?"text-gray-300":"text-gray-600"} max-w-2xl mx-auto mb-6`,children:"Únete a miles de usuarios satisfechos accediendo a todas tus plataformas favoritas en un solo lugar."}),e.jsx(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K("/register"),className:`inline-flex items-center space-x-2 px-6 py-3 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 ${H==="dark"?"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600":"bg-gradient-to-r from-blue-400 to-indigo-400 hover:from-blue-500 hover:to-indigo-500"}`,children:e.jsx("span",{children:"Regístrate"})})]})})]}),e.jsx("footer",{className:"bg-gray-900 dark:bg-gray-900 bg-white dark:bg-gray-900 border-t dark:border-gray-800 border-gray-200 py-12",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-6 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:`text-base font-semibold ${H==="dark"?"text-cyan-300":"text-blue-600"}`,children:"BlackStreaming"})]}),e.jsxs("div",{className:`text-base ${H==="dark"?"text-gray-400":"text-gray-600"} text-center`,children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-base ${H==="dark"?"text-gray-400":"text-gray-600"} text-center`,children:"Desarrollado por Saiph"})]})})})]})},lF=()=>e.jsx(rF,{children:e.jsx(oF,{})});function Wt(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(s)}function Xe(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(s)}function JI(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(s)}function Xo(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(s)}function lt(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(s)}function pu(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(s)}function Kc(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(s)}function qu(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(s)}function zt(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(s)}function cF(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(s)}function Ow(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"},child:[]}]})(s)}function sp(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"},child:[]},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"},child:[]},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"},child:[]}]})(s)}function As(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(s)}function Vw(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(s)}function zy(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(s)}function ZI(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(s)}function eP(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(s)}function Te(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(s)}function Ue(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"},child:[]},{tag:"line",attr:{x1:"7",y1:"2",x2:"7",y2:"22"},child:[]},{tag:"line",attr:{x1:"17",y1:"2",x2:"17",y2:"22"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"2",y1:"7",x2:"7",y2:"7"},child:[]},{tag:"line",attr:{x1:"2",y1:"17",x2:"7",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"17",x2:"22",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"7",x2:"22",y2:"7"},child:[]}]})(s)}function ct(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(s)}function Qm(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(s)}function $e(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(s)}function dt(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(s)}function tP(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(s)}function Et(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(s)}function dF(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(s)}function Bt(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(s)}function aa(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(s)}function qt(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(s)}function _e(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 18V5l12-2v13"},child:[]},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"16",r:"3"},child:[]}]})(s)}function ut(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 19l7-7 3 3-7 7-3-3z"},child:[]},{tag:"path",attr:{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"},child:[]},{tag:"path",attr:{d:"M2 2l7.586 7.586"},child:[]},{tag:"circle",attr:{cx:"11",cy:"11",r:"2"},child:[]}]})(s)}function sP(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(s)}function xt(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polygon",attr:{points:"10 8 16 12 10 16 10 8"},child:[]}]})(s)}function zw(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(s)}function rP(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(s)}function at(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(s)}function Yc(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(s)}function tt(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(s)}function Fe(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(s)}function rp(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(s)}function Bw(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(s)}function Q0(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(s)}function le(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"15",rx:"2",ry:"2"},child:[]},{tag:"polyline",attr:{points:"17 2 12 7 7 2"},child:[]}]})(s)}function uF(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(s)}function Ht(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(s)}function Ye(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(s)}function uc(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(s)}function We(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(s)}function yt(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(s)}const aP=v.createContext({theme:"dark",toggleTheme:()=>{}}),xF=({children:s})=>{const[t,r]=v.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{console.log("Toggling theme from",t);const i=t==="dark"?"light":"dark";r(i),localStorage.setItem("theme",i),console.log("Theme set to",i)};return v.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(aP.Provider,{value:{theme:t,toggleTheme:a},children:s})},mF=()=>{const[s,t]=v.useState(""),[r,a]=v.useState(""),[i,l]=v.useState(null),[o,c]=v.useState(!1),d=St(),{theme:h,toggleTheme:g}=v.useContext(aP),N=async E=>{E.preventDefault(),l(null);try{const y=Y(I,"users"),O=xe(y,je("username","==",s)),_=await jt(O);if(_.empty){l("Nombre de usuario no encontrado.");return}const L=_.docs[0].data().email,H=(await GM(Qe,L,r)).user;d("/")}catch{l("Usuario o contraseña incorrectos.")}},k=()=>{l(null)};return e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${h==="dark"?"bg-gradient-to-b from-gray-900 via-blue-950 to-gray-900 text-gray-200":"bg-gradient-to-b from-gray-100 via-blue-50 to-gray-100 text-gray-900"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${h==="dark"?"border-gray-800/50 bg-gray-900/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-6 py-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex items-center justify-center lg:justify-start",children:e.jsxs(b,{to:"/",className:"flex items-center space-x-3",children:[e.jsx(rt.img,{whileHover:{scale:1.1},src:It,alt:"BlackStreaming",className:"h-12 w-auto transition-transform"}),e.jsx("span",{className:`text-2xl font-bold bg-gradient-to-r ${h==="dark"?"from-cyan-400/50 to-blue-600/50 text-cyan-400":"from-blue-500/50 to-indigo-500/50 text-blue-600"} bg-clip-text`,children:"BlackStreaming"})]})}),e.jsx(rt.div,{animate:{scale:[1,1.02,1]},transition:{duration:2,repeat:1/0,repeatType:"loop"},className:"text-xs font-semibold text-white bg-cyan-500/20 rounded-full px-3 py-1",children:"V 2.0"}),e.jsxs("div",{className:"flex items-center justify-center lg:justify-end space-x-3",children:[e.jsx(rt.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:g,className:`p-2 rounded-full ${h==="dark"?"text-cyan-400 hover:bg-gray-700/50":"text-blue-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:h==="dark"?e.jsx(jx,{size:22}):e.jsx(bx,{size:22})}),e.jsxs(b,{to:"/login",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700",children:[e.jsx(vx,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsxs(b,{to:"/register",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600",children:[e.jsx(g4,{size:18}),e.jsx("span",{children:"Registrarse"})]})]})]})}),e.jsx("main",{className:"flex-grow flex items-center justify-center p-6",children:e.jsxs("div",{className:`backdrop-blur-md rounded-2xl shadow-2xl p-12 w-full max-w-lg border-2 ${h==="dark"?"bg-gradient-to-br from-gray-800/60 to-gray-900/60 border-cyan-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-blue-500/20"}`,children:[e.jsx(rt.div,{className:"flex justify-center mb-6",children:e.jsx(rt.img,{whileHover:{scale:1.05},src:It,alt:"BlackStreaming",className:"h-24 sm:h-32 w-auto transition-transform"})}),e.jsxs("h1",{className:`text-3xl font-bold mb-10 text-center ${h==="dark"?"text-white":"text-gray-900"}`,children:["Black",e.jsx("span",{className:h==="dark"?"text-cyan-400":"text-blue-600",children:"Streaming"})]}),e.jsx("p",{className:`text-sm text-center mb-10 ${h==="dark"?"text-gray-400":"text-gray-600"}`,children:"Bienvenido de nuevo. Inicia sesión para continuar."}),i&&e.jsxs("div",{className:"mb-6 p-3 bg-gradient-to-r from-red-900/80 to-red-800/80 border-l-4 border-red-500 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-red-400"}),e.jsx("span",{className:"text-red-300",children:i})]}),e.jsx("button",{onClick:k,className:"text-red-400 hover:text-red-300",children:e.jsx(yt,{size:18})})]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${h==="dark"?"text-gray-100":"text-gray-900"}`,children:"Nombre de Usuario"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:`absolute top-3 left-3 ${h==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",placeholder:"Tu nombre de usuario",value:s,onChange:E=>t(E.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${h==="dark"?"text-white":"text-gray-900"} border ${h==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${h==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${h==="dark"?"text-gray-100":"text-gray-900"}`,children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(tP,{className:`absolute top-3 left-3 ${h==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:o?"text":"password",placeholder:"••••••••",value:r,onChange:E=>a(E.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${h==="dark"?"text-white":"text-gray-900"} border ${h==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${h==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,required:!0}),e.jsx("button",{type:"button",onClick:()=>c(!o),className:`absolute top-3 right-3 ${h==="dark"?"text-gray-400 hover:text-cyan-400":"text-gray-600 hover:text-blue-600"} transition-colors`,"aria-label":o?"Ocultar contraseña":"Mostrar contraseña",children:o?e.jsx(ZI,{size:18}):e.jsx(eP,{size:18})})]})]}),e.jsx(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"w-full py-3 bg-gradient-to-r from-cyan-400 to-blue-600 hover:from-cyan-500 hover:to-blue-700 text-white font-medium rounded-xl shadow-lg transition-all duration-300",children:"Iniciar Sesión"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs(b,{to:"/register",className:`flex items-center justify-center transition-all text-lg ${h==="dark"?"text-gray-400 hover:text-cyan-400":"text-gray-600 hover:text-blue-600"}`,children:[e.jsx(JI,{className:"mr-1"})," ¿No tienes una cuenta? Regístrate"]})})]})}),e.jsx("footer",{className:`backdrop-blur-md border-t py-6 ${h==="dark"?"border-gray-800/50":"border-gray-300/50"}`,children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:`text-sm font-semibold ${h==="dark"?"text-cyan-400":"text-blue-600"}`,children:"BlackStreaming"})]}),e.jsxs("div",{className:`text-sm text-center ${h==="dark"?"text-gray-400":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-sm text-center ${h==="dark"?"text-gray-400":"text-gray-600"}`,children:"Desarrollado por Saiph"})]})})})]})},hF=()=>e.jsx(xF,{children:e.jsx(mF,{})}),pF=[{code:"+93",name:"Afghanistan",flag:"🇦🇫"},{code:"+355",name:"Albania",flag:"🇦🇱"},{code:"+213",name:"Algeria",flag:"🇩🇿"},{code:"+376",name:"Andorra",flag:"🇦🇩"},{code:"+244",name:"Angola",flag:"🇦🇴"},{code:"+1",name:"Antigua and Barbuda",flag:"🇦🇬"},{code:"+54",name:"Argentina",flag:"🇦🇷"},{code:"+374",name:"Armenia",flag:"🇦🇲"},{code:"+61",name:"Australia",flag:"🇦🇺"},{code:"+43",name:"Austria",flag:"🇦🇹"},{code:"+994",name:"Azerbaijan",flag:"🇦🇿"},{code:"+1",name:"Bahamas",flag:"🇧🇸"},{code:"+973",name:"Bahrain",flag:"🇧🇭"},{code:"+880",name:"Bangladesh",flag:"🇧🇩"},{code:"+1",name:"Barbados",flag:"🇧🇧"},{code:"+375",name:"Belarus",flag:"🇧🇾"},{code:"+32",name:"Belgium",flag:"🇧🇪"},{code:"+501",name:"Belize",flag:"🇧🇿"},{code:"+229",name:"Benin",flag:"🇧🇯"},{code:"+975",name:"Bhutan",flag:"🇧🇹"},{code:"+591",name:"Bolivia",flag:"🇧🇴"},{code:"+387",name:"Bosnia and Herzegovina",flag:"🇧🇦"},{code:"+267",name:"Botswana",flag:"🇧🇼"},{code:"+55",name:"Brazil",flag:"🇧🇷"},{code:"+673",name:"Brunei",flag:"🇧🇳"},{code:"+359",name:"Bulgaria",flag:"🇧🇬"},{code:"+226",name:"Burkina Faso",flag:"🇧🇫"},{code:"+257",name:"Burundi",flag:"🇧🇮"},{code:"+855",name:"Cambodia",flag:"🇰🇭"},{code:"+237",name:"Cameroon",flag:"🇨🇲"},{code:"+1",name:"Canada",flag:"🇨🇦"},{code:"+238",name:"Cape Verde",flag:"🇨🇻"},{code:"+236",name:"Central African Republic",flag:"🇨🇫"},{code:"+235",name:"Chad",flag:"🇹🇩"},{code:"+56",name:"Chile",flag:"🇨🇱"},{code:"+86",name:"China",flag:"🇨🇳"},{code:"+57",name:"Colombia",flag:"🇨🇴"},{code:"+269",name:"Comoros",flag:"🇰🇲"},{code:"+243",name:"Congo, Democratic Republic",flag:"🇨🇩"},{code:"+242",name:"Congo, Republic",flag:"🇨🇬"},{code:"+506",name:"Costa Rica",flag:"🇨🇷"},{code:"+385",name:"Croatia",flag:"🇭🇷"},{code:"+53",name:"Cuba",flag:"🇨🇺"},{code:"+357",name:"Cyprus",flag:"🇨🇾"},{code:"+420",name:"Czech Republic",flag:"🇨🇿"},{code:"+45",name:"Denmark",flag:"🇩🇰"},{code:"+253",name:"Djibouti",flag:"🇩🇯"},{code:"+1",name:"Dominica",flag:"🇩🇲"},{code:"+1",name:"Dominican Republic",flag:"🇩🇴"},{code:"+670",name:"East Timor",flag:"🇹🇱"},{code:"+593",name:"Ecuador",flag:"🇪🇨"},{code:"+20",name:"Egypt",flag:"🇪🇬"},{code:"+503",name:"El Salvador",flag:"🇸🇻"},{code:"+240",name:"Equatorial Guinea",flag:"🇬🇶"},{code:"+291",name:"Eritrea",flag:"🇪🇷"},{code:"+372",name:"Estonia",flag:"🇪🇪"},{code:"+251",name:"Ethiopia",flag:"🇪🇹"},{code:"+679",name:"Fiji",flag:"🇫🇯"},{code:"+358",name:"Finland",flag:"🇫🇮"},{code:"+33",name:"France",flag:"🇫🇷"},{code:"+241",name:"Gabon",flag:"🇬🇦"},{code:"+220",name:"Gambia",flag:"🇬🇲"},{code:"+995",name:"Georgia",flag:"🇬🇪"},{code:"+49",name:"Germany",flag:"🇩🇪"},{code:"+233",name:"Ghana",flag:"🇬🇭"},{code:"+30",name:"Greece",flag:"🇬🇷"},{code:"+1",name:"Grenada",flag:"🇬🇩"},{code:"+502",name:"Guatemala",flag:"🇬🇹"},{code:"+224",name:"Guinea",flag:"🇬🇳"},{code:"+245",name:"Guinea-Bissau",flag:"🇬🇼"},{code:"+592",name:"Guyana",flag:"🇬🇾"},{code:"+509",name:"Haiti",flag:"🇭🇹"},{code:"+504",name:"Honduras",flag:"🇭🇳"},{code:"+852",name:"Hong Kong",flag:"🇭🇰"},{code:"+36",name:"Hungary",flag:"🇭🇺"},{code:"+354",name:"Iceland",flag:"🇮🇸"},{code:"+91",name:"India",flag:"🇮🇳"},{code:"+62",name:"Indonesia",flag:"🇮🇩"},{code:"+98",name:"Iran",flag:"🇮🇷"},{code:"+964",name:"Iraq",flag:"🇮🇶"},{code:"+353",name:"Ireland",flag:"🇮🇪"},{code:"+972",name:"Israel",flag:"🇮🇱"},{code:"+39",name:"Italy",flag:"🇮🇹"},{code:"+1",name:"Jamaica",flag:"🇯🇲"},{code:"+81",name:"Japan",flag:"🇯🇵"},{code:"+962",name:"Jordan",flag:"🇯🇴"},{code:"+7",name:"Kazakhstan",flag:"🇰🇿"},{code:"+254",name:"Kenya",flag:"🇰🇪"},{code:"+686",name:"Kiribati",flag:"🇰🇮"},{code:"+965",name:"Kuwait",flag:"🇰🇼"},{code:"+996",name:"Kyrgyzstan",flag:"🇰🇬"},{code:"+856",name:"Laos",flag:"🇱🇦"},{code:"+371",name:"Latvia",flag:"🇱🇻"},{code:"+961",name:"Lebanon",flag:"🇱🇧"},{code:"+266",name:"Lesotho",flag:"🇱🇸"},{code:"+231",name:"Liberia",flag:"🇱🇷"},{code:"+218",name:"Libya",flag:"🇱🇾"},{code:"+423",name:"Liechtenstein",flag:"🇱🇮"},{code:"+370",name:"Lithuania",flag:"🇱🇹"},{code:"+352",name:"Luxembourg",flag:"🇱🇺"},{code:"+853",name:"Macau",flag:"🇲🇴"},{code:"+389",name:"Macedonia",flag:"🇲🇰"},{code:"+261",name:"Madagascar",flag:"🇲🇬"},{code:"+265",name:"Malawi",flag:"🇲🇼"},{code:"+60",name:"Malaysia",flag:"🇲🇾"},{code:"+960",name:"Maldives",flag:"🇲🇻"},{code:"+223",name:"Mali",flag:"🇲🇱"},{code:"+356",name:"Malta",flag:"🇲🇹"},{code:"+692",name:"Marshall Islands",flag:"🇲🇭"},{code:"+222",name:"Mauritania",flag:"🇲🇷"},{code:"+230",name:"Mauritius",flag:"🇲🇺"},{code:"+52",name:"Mexico",flag:"🇲🇽"},{code:"+691",name:"Micronesia",flag:"🇫🇲"},{code:"+373",name:"Moldova",flag:"🇲🇩"},{code:"+377",name:"Monaco",flag:"🇲🇨"},{code:"+976",name:"Mongolia",flag:"🇲🇳"},{code:"+382",name:"Montenegro",flag:"🇲🇪"},{code:"+212",name:"Morocco",flag:"🇲🇦"},{code:"+258",name:"Mozambique",flag:"🇲🇿"},{code:"+95",name:"Myanmar",flag:"🇲🇲"},{code:"+264",name:"Namibia",flag:"🇳🇦"},{code:"+674",name:"Nauru",flag:"🇳🇷"},{code:"+977",name:"Nepal",flag:"🇳🇵"},{code:"+31",name:"Netherlands",flag:"🇳🇱"},{code:"+64",name:"New Zealand",flag:"🇳🇿"},{code:"+505",name:"Nicaragua",flag:"🇳🇮"},{code:"+227",name:"Niger",flag:"🇳🇪"},{code:"+234",name:"Nigeria",flag:"🇳🇬"},{code:"+47",name:"Norway",flag:"🇳🇴"},{code:"+968",name:"Oman",flag:"🇴🇲"},{code:"+92",name:"Pakistan",flag:"🇵🇰"},{code:"+680",name:"Palau",flag:"🇵🇼"},{code:"+507",name:"Panama",flag:"🇵🇦"},{code:"+675",name:"Papua New Guinea",flag:"🇵🇬"},{code:"+595",name:"Paraguay",flag:"🇵🇾"},{code:"+51",name:"Peru",flag:"🇵🇪"},{code:"+63",name:"Philippines",flag:"🇵🇭"},{code:"+48",name:"Poland",flag:"🇵🇱"},{code:"+351",name:"Portugal",flag:"🇵🇹"},{code:"+974",name:"Qatar",flag:"🇶🇦"},{code:"+40",name:"Romania",flag:"🇷🇴"},{code:"+7",name:"Russia",flag:"🇷🇺"},{code:"+250",name:"Rwanda",flag:"🇷🇼"},{code:"+1",name:"Saint Kitts and Nevis",flag:"🇰🇳"},{code:"+1",name:"Saint Lucia",flag:"🇱🇨"},{code:"+1",name:"Saint Vincent and the Grenadines",flag:"🇻🇨"},{code:"+685",name:"Samoa",flag:"🇼🇸"},{code:"+378",name:"San Marino",flag:"🇸🇲"},{code:"+966",name:"Saudi Arabia",flag:"🇸🇦"},{code:"+221",name:"Senegal",flag:"🇸🇳"},{code:"+381",name:"Serbia",flag:"🇷🇸"},{code:"+248",name:"Seychelles",flag:"🇸🇨"},{code:"+232",name:"Sierra Leone",flag:"🇸🇱"},{code:"+65",name:"Singapore",flag:"🇸🇬"},{code:"+421",name:"Slovakia",flag:"🇸🇰"},{code:"+386",name:"Slovenia",flag:"🇸🇮"},{code:"+677",name:"Solomon Islands",flag:"🇸🇧"},{code:"+252",name:"Somalia",flag:"🇸🇴"},{code:"+27",name:"South Africa",flag:"🇿🇦"},{code:"+82",name:"South Korea",flag:"🇰🇷"},{code:"+211",name:"South Sudan",flag:"🇸🇸"},{code:"+34",name:"Spain",flag:"🇪🇸"},{code:"+94",name:"Sri Lanka",flag:"🇱🇰"},{code:"+249",name:"Sudan",flag:"🇸🇩"},{code:"+597",name:"Suriname",flag:"🇸🇷"},{code:"+268",name:"Swaziland",flag:"🇸🇿"},{code:"+46",name:"Sweden",flag:"🇸🇪"},{code:"+41",name:"Switzerland",flag:"🇨🇭"},{code:"+963",name:"Syria",flag:"🇸🇾"},{code:"+886",name:"Taiwan",flag:"🇹🇼"},{code:"+992",name:"Tajikistan",flag:"🇹🇯"},{code:"+255",name:"Tanzania",flag:"🇹🇿"},{code:"+66",name:"Thailand",flag:"🇹🇭"},{code:"+228",name:"Togo",flag:"🇹🇬"},{code:"+676",name:"Tonga",flag:"🇹🇴"},{code:"+1",name:"Trinidad and Tobago",flag:"🇹🇹"},{code:"+216",name:"Tunisia",flag:"🇹🇳"},{code:"+90",name:"Turkey",flag:"🇹🇷"},{code:"+993",name:"Turkmenistan",flag:"🇹🇲"},{code:"+688",name:"Tuvalu",flag:"🇹🇻"},{code:"+256",name:"Uganda",flag:"🇺🇬"},{code:"+380",name:"Ukraine",flag:"🇺🇦"},{code:"+971",name:"United Arab Emirates",flag:"🇦🇪"},{code:"+44",name:"United Kingdom",flag:"🇬🇧"},{code:"+1",name:"United States",flag:"🇺🇸"},{code:"+598",name:"Uruguay",flag:"🇺🇾"},{code:"+998",name:"Uzbekistan",flag:"🇺🇿"},{code:"+678",name:"Vanuatu",flag:"🇻🇺"},{code:"+58",name:"Venezuela",flag:"🇻🇪"},{code:"+84",name:"Vietnam",flag:"🇻🇳"},{code:"+967",name:"Yemen",flag:"🇾🇪"},{code:"+260",name:"Zambia",flag:"🇿🇲"},{code:"+263",name:"Zimbabwe",flag:"🇿🇼"}],nP=v.createContext({theme:"dark",toggleTheme:()=>{}}),fF=({children:s})=>{const[t,r]=v.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";r(i),localStorage.setItem("theme",i)};return v.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(nP.Provider,{value:{theme:t,toggleTheme:a},children:s})},gF=({isOpen:s,message:t,type:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:`bg-gray-800/90 backdrop-blur-md p-6 rounded-2xl shadow-2xl max-w-sm w-full border transform transition-all duration-300 ${r==="success"?"border-green-500 scale-100":"border-red-500 scale-100"}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[r==="success"?e.jsx(Kc,{className:"text-green-400 text-2xl mr-2"}):e.jsx(Xe,{className:"text-red-400 text-2xl mr-2"}),e.jsx("h3",{className:`text-lg font-bold ${r==="success"?"text-green-400":"text-red-400"}`,children:r==="success"?"Éxito":"Error"})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("button",{onClick:a,className:`w-full py-2 rounded-xl font-medium transition-all duration-300 ${r==="success"?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"}`,children:"Cerrar"})]})}):null,yF=()=>{const[s,t]=v.useState(""),[r,a]=v.useState(""),[i,l]=v.useState(""),[o,c]=v.useState(""),[d,h]=v.useState("+51"),[g,N]=v.useState("user"),[k,E]=v.useState(""),[y,O]=v.useState(!1),[_,A]=v.useState({isOpen:!1,message:"",type:"success"}),[z,L]=v.useState(!1),K=St(),{theme:H,toggleTheme:G}=v.useContext(nP),R=async u=>{u.preventDefault(),A({isOpen:!1,message:"",type:"success"}),O(!0);try{if(!s||s.length<3)throw new Error("El nombre de usuario debe tener al menos 3 caracteres.");if(!r||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))throw new Error("Por favor, ingresa un correo electrónico válido.");if(!i||i.length<6)throw new Error("La contraseña debe tener al menos 6 caracteres.");if(!o||!/^\d{7,15}$/.test(o))throw new Error("Por favor, ingresa un número de teléfono válido (7-15 dígitos).");if(!["user","affiliate","provider"].includes(g))throw new Error("Rol no válido.");await Wr(B(I,"pendingRegistrations",r),{username:s,email:r,password:i,phone:`${d}${o}`,role:g,status:"pending",referrerCode:k||null,createdAt:new Date().toISOString()}),A({isOpen:!0,message:"Tu solicitud de registro ha sido enviada y está pendiente de aprobación. Comunicate con +51 931 757 531",type:"success"}),setTimeout(()=>{K("/login")},2e3)}catch(q){console.error("Error al registrar la solicitud:",q.message),A({isOpen:!0,message:q.message||"Error al enviar la solicitud de registro. Por favor, inténtalo de nuevo.",type:"error"})}finally{O(!1)}};return e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${H==="dark"?"bg-gradient-to-b from-gray-900 via-blue-950 to-gray-900 text-gray-200":"bg-gradient-to-b from-gray-100 via-blue-50 to-gray-100 text-gray-900"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${H==="dark"?"border-gray-800/50 bg-gray-900/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-6 py-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex items-center justify-center lg:justify-start",children:e.jsxs(b,{to:"/",className:"flex items-center space-x-3",children:[e.jsx(rt.img,{whileHover:{scale:1.1},src:It,alt:"BlackStreaming",className:"h-12 w-auto transition-transform"}),e.jsx("span",{className:`text-2xl font-bold bg-gradient-to-r ${H==="dark"?"from-cyan-400/50 to-blue-600/50 text-cyan-400":"from-blue-500/50 to-indigo-500/50 text-blue-600"} bg-clip-text`,children:"BlackStreaming"})]})}),e.jsx(rt.div,{animate:{scale:[1,1.02,1]},transition:{duration:2,repeat:1/0,repeatType:"loop"},className:"text-xs font-semibold text-white bg-cyan-500/20 rounded-full px-3 py-1",children:"V 2.0"}),e.jsxs("div",{className:"flex items-center justify-center lg:justify-end space-x-3",children:[e.jsx(rt.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:G,className:`p-2 rounded-full ${H==="dark"?"text-cyan-400 hover:bg-gray-700/50":"text-blue-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:H==="dark"?e.jsx(jx,{size:22}):e.jsx(bx,{size:22})}),e.jsxs(b,{to:"/login",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700",children:[e.jsx(vx,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsxs(b,{to:"/register",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600",children:[e.jsx(g4,{size:18}),e.jsx("span",{children:"Registrarse"})]})]})]})}),e.jsx("main",{className:"flex-grow flex items-center justify-center p-6",children:e.jsxs("div",{className:`backdrop-blur-md rounded-2xl shadow-2xl p-12 w-full max-w-lg border-2 ${H==="dark"?"bg-gradient-to-br from-gray-800/60 to-gray-900/60 border-cyan-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-blue-500/20"}`,children:[e.jsx(rt.div,{className:"flex justify-center mb-6",children:e.jsx(rt.img,{whileHover:{scale:1.05},src:It,alt:"BlackStreaming",className:"h-24 sm:h-32 w-auto transition-transform"})}),e.jsxs("h1",{className:`text-3xl font-bold mb-10 text-center ${H==="dark"?"text-white":"text-gray-900"}`,children:["Black",e.jsx("span",{className:H==="dark"?"text-cyan-400":"text-blue-600",children:"Streaming"})]}),e.jsx("p",{className:`text-sm text-center mb-10 ${H==="dark"?"text-gray-400":"text-gray-600"}`,children:"Regístrate para acceder al sistema."}),e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${H==="dark"?"text-gray-100":"text-gray-900"}`,children:"Nombre de Usuario"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:`absolute top-3 left-3 ${H==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:s,onChange:u=>t(u.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${H==="dark"?"text-white":"text-gray-900"} border ${H==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${H==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Elige un nombre de usuario",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${H==="dark"?"text-gray-100":"text-gray-900"}`,children:"Correo Electrónico"}),e.jsxs("div",{className:"relative",children:[e.jsx(dF,{className:`absolute top-3 left-3 ${H==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"email",value:r,onChange:u=>a(u.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${H==="dark"?"text-white":"text-gray-900"} border ${H==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${H==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu correo electrónico",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${H==="dark"?"text-gray-100":"text-gray-900"}`,children:"Número de Teléfono"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"relative flex-shrink-0 w-48",children:[e.jsx("select",{value:d,onChange:u=>h(u.target.value),className:`w-full px-4 py-2.5 rounded-xl ${H==="dark"?"bg-gray-700/50 text-white":"bg-gray-200/50 text-gray-900"} border ${H==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 transition-all appearance-none`,children:pF.map(u=>e.jsxs("option",{value:u.code,children:[u.flag," ",u.name," (",u.code,")"]},u.code+u.name))}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:`w-4 h-4 ${H==="dark"?"text-gray-400":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(sP,{className:`absolute top-3 left-3 ${H==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"tel",value:o,onChange:u=>c(u.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${H==="dark"?"text-white":"text-gray-900"} border ${H==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${H==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu número de teléfono",required:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${H==="dark"?"text-gray-100":"text-gray-900"}`,children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(tP,{className:`absolute top-3 left-3 ${H==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:z?"text":"password",value:i,onChange:u=>l(u.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${H==="dark"?"text-white":"text-gray-900"} border ${H==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${H==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Elige una contraseña",required:!0}),e.jsx("button",{type:"button",onClick:()=>L(!z),className:`absolute top-3 right-3 ${H==="dark"?"text-gray-400 hover:text-cyan-400":"text-gray-600 hover:text-blue-600"} transition-colors`,"aria-label":z?"Ocultar contraseña":"Mostrar contraseña",children:z?e.jsx(ZI,{size:18}):e.jsx(eP,{size:18})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${H==="dark"?"text-gray-100":"text-gray-900"}`,children:"Rol"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:g,onChange:u=>N(u.target.value),className:`w-full px-4 py-2.5 rounded-xl ${H==="dark"?"bg-gray-700/50":"bg-gray-200/50"} ${H==="dark"?"text-white":"text-gray-900"} border ${H==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 transition-all appearance-none`,children:e.jsx("option",{value:"user",children:"Usuario"})}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:`w-4 h-4 ${H==="dark"?"text-gray-400":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${H==="dark"?"text-gray-100":"text-gray-900"}`,children:"Código de Referido (opcional)"}),e.jsx("input",{type:"text",value:k,onChange:u=>E(u.target.value),className:`w-full pl-4 pr-4 py-2.5 rounded-xl bg-transparent ${H==="dark"?"text-white":"text-gray-900"} border ${H==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${H==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Ingresa un código de referido (si tienes)"})]}),e.jsx(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:y,className:`w-full py-3 rounded-xl font-medium transition-all duration-300 ${y?"bg-gray-600 text-gray-400 cursor-not-allowed":H==="dark"?"bg-gradient-to-r from-cyan-400 to-blue-600 hover:from-cyan-500 hover:to-blue-700 text-white":"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white"}`,children:y?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white mr-2",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})]}),"Registrando..."]}):"Registrarse"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs(b,{to:"/login",className:`flex items-center justify-center transition-all text-lg ${H==="dark"?"text-gray-400 hover:text-cyan-400":"text-gray-600 hover:text-blue-600"}`,children:[e.jsx(JI,{className:"mr-1"})," ¿Ya tienes una cuenta? Inicia sesión"]})})]})}),e.jsx("footer",{className:`backdrop-blur-md border-t py-6 ${H==="dark"?"border-gray-800/50":"border-gray-300/50"}`,children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:`text-sm font-semibold ${H==="dark"?"text-cyan-400":"text-blue-600"}`,children:"BlackStreaming"})]}),e.jsxs("div",{className:`text-sm text-center ${H==="dark"?"text-gray-400":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-sm text-center ${H==="dark"?"text-gray-400":"text-gray-600"}`,children:"Desarrollado por Saiph"})]})})}),e.jsx(gF,{isOpen:_.isOpen,message:_.message,type:_.type,onClose:()=>A({isOpen:!1,message:"",type:"success"})})]})},bF=()=>e.jsx(fF,{children:e.jsx(yF,{})}),vF=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,jF=({isOpen:s,user:t,onClose:r,onSave:a})=>{const[i,l]=v.useState((t==null?void 0:t.username)||""),[o,c]=v.useState(""),d=h=>{if(h.preventDefault(),c(""),!i.trim()){c("El nombre de usuario no puede estar vacío.");return}a(t.id,i.trim())};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Perfil"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:h=>l(h.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},NF=({isOpen:s,provider:t,onClose:r,onRate:a})=>{const[i,l]=v.useState(0),[o,c]=v.useState(""),d=h=>{if(h.preventDefault(),c(""),i<1||i>5){c("Por favor, selecciona una calificación entre 1 y 5 estrellas.");return}a(t.id,i),l(0)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Calificar Proveedor"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Proveedor: ",t.name]}),e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(h=>e.jsx(Fe,{size:24,className:`cursor-pointer ${h<=i?"text-yellow-400 fill-current":"text-gray-400"}`,onClick:()=>l(h)},h))}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Enviar Calificación"})]})]})]})})}):null},wF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState(""),[i,l]=v.useState([]),[o,c]=v.useState({username:"",phone:""}),[d,h]=v.useState(""),[g,N]=v.useState(0),[k,E]=v.useState(null),[y,O]=v.useState("inicio"),[_,A]=v.useState([]),[z,L]=v.useState({}),[K,H]=v.useState([]),[G,R]=v.useState(!0),[u,q]=v.useState({}),[U,te]=v.useState(null),[se,X]=v.useState({isOpen:!1,message:"",title:""}),[$,pe]=v.useState({isOpen:!1,user:null}),[Le,De]=v.useState({isOpen:!1,provider:null}),[he,be]=v.useState(""),[fe,ze]=v.useState([]),Me=St(),Pe=(x,m)=>{X({isOpen:!0,title:x,message:m})},He=()=>{X({isOpen:!1,message:"",title:""})},Ge=x=>{pe({isOpen:!0,user:x})},n=()=>{pe({isOpen:!1,user:null})},j=x=>{De({isOpen:!0,provider:x})},p=()=>{De({isOpen:!1,provider:null})},T=async(x,m)=>{try{q(Z=>({...Z,profile:!0}));const S=B(I,"users",x);await os(S,{username:m,updatedAt:ye()}),c(Z=>({...Z,username:m})),Pe("Éxito","Perfil actualizado exitosamente"),n()}catch(S){console.error("Error al actualizar perfil:",S),Pe("Error",S.message||"Error al actualizar el perfil")}finally{q(S=>({...S,profile:!1}))}},F=async(x,m)=>{try{q(S=>({...S,[`rate_${x}`]:!0})),await Ua(Y(I,"ratings"),{userId:k,providerId:x,rating:m,ratedAt:ye()}),Pe("Éxito","Calificación enviada exitosamente"),p()}catch(S){console.error("Error al calificar proveedor:",S),Pe("Error",S.message||"Error al enviar la calificación")}finally{q(S=>({...S,[`rate_${x}`]:!1}))}};v.useEffect(()=>{(async()=>{try{console.log("Fetching products...");const m=xe(Y(I,"products")),S=await jt(m);console.log("Products fetched:",S.docs.length);const Z={};S.forEach(V=>{Z[V.id]=V.data()}),L(Z)}catch(m){console.error("Error fetching products:",m),te("Error al cargar productos: "+m.message)}})()},[]),v.useEffect(()=>{const x=we(B(I,"notifications","adminMessage"),m=>{if(m.exists()){const S=m.data(),Z="user";S.roles&&S.roles.includes(Z)?H([{id:m.id,...S}]):H([])}else H([])},m=>{console.error("Error in notifications listener:",m),te("Error al cargar notificaciones: "+m.message)});return()=>x()},[]),v.useEffect(()=>{if(!k)return;(async()=>{try{const m=xe(Y(I,"sales"),je("customerId","==",k)),S=await jt(m),Z=new Set,V=[];S.forEach(ee=>{const ce=ee.data();ce.providerId&&!Z.has(ce.providerId)&&(Z.add(ce.providerId),V.push({id:ce.providerId,name:ce.provider||"Proveedor desconocido",phone:ce.providerPhone||"No especificado"}))}),ze(V)}catch(m){console.error("Error fetching providers:",m),te("Error al cargar proveedores: "+m.message)}})()},[k]);const W=async x=>{try{q(de=>({...de,[`renew_${x.id}`]:!0}));const m=parseFloat(x.renewalPrice)||parseFloat(x.price)||0;if(g<m){Pe("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const S=parseInt(x.durationDays)||30,Z=Yt.now(),V=Z.toDate(),ee=V,ce=new Date(ee.getTime()+S*24*60*60*1e3),ne=Yt.fromDate(ce),J=B(I,"sales",x.id);await os(J,{startDate:Z,endDate:ne,renewedAt:Z,status:"completed",updatedAt:ye()});const ge=B(I,"users",k);await os(ge,{balance:g-m}),N(de=>de-m),A(de=>de.map(ke=>ke.id===x.id?{...ke,startDate:ee,endDate:ce,renewedAt:V,status:"completed",daysRemaining:S,totalDays:S,timeElapsedPercentage:0}:ke)),Pe("Éxito",`¡Pedido renovado exitosamente! Nueva fecha de vencimiento: ${D(ce)}`)}catch(m){console.error("Error al renovar el pedido:",m),Pe("Error","Error al renovar el pedido: "+m.message)}finally{q(m=>({...m,[`renew_${x.id}`]:!1}))}},ae=async()=>{try{await Fc(Qe),Me("/")}catch(x){console.error("Error al cerrar sesión:",x),Pe("Error",x.message||"Error al cerrar sesión")}};v.useEffect(()=>{const x=At(Qe,m=>{m?(E(m.uid),h(m.email||"No especificado"),R(!1)):Me("/login")});return()=>x()},[Me]),v.useEffect(()=>{if(!k)return;const x=B(I,"users",k),m=we(x,S=>{if(S.exists()){const Z=S.data();c({username:Z.username||"Usuario",phone:Z.phone||""}),h(Z.email||"No especificado"),N(Number(Z.balance)||0)}else te("Usuario no encontrado")},S=>{console.error("Error in user data listener:",S),te("Error al cargar datos del usuario: "+S.message)});return()=>m()},[k]),v.useEffect(()=>{if(!k)return;const x=xe(Y(I,"sales"),je("customerId","==",k)),m=we(x,async Z=>{var ne,J;if(Z.empty){A([]),R(!1);return}const V=new Date,ee=5*24*60*60*1e3;for(const ge of Z.docs){const ke=((J=(ne=ge.data().endDate)==null?void 0:ne.toDate)==null?void 0:J.call(ne))||new Date;if(ke<V&&V.getTime()-ke.getTime()>ee)try{await Lu(B(I,"sales",ge.id)),console.log(`Deleted expired order: ${ge.id}`)}catch(Se){console.error(`Error deleting order ${ge.id}:`,Se)}}const ce=Z.docs.map(ge=>{var Ts,nr,ys,Or,Is,Vr,ir,pr,Zt,Lt,re;const de=ge.data(),Se=((nr=(Ts=de.saleDate)==null?void 0:Ts.toDate)==null?void 0:nr.call(Ts))||((Or=(ys=de.createdAt)==null?void 0:ys.toDate)==null?void 0:Or.call(ys))||new Date;let oe=(Vr=(Is=de.startDate)==null?void 0:Is.toDate)==null?void 0:Vr.call(Is),ue=oe||Se,Ie=!1;oe||(Ie=!0);const ve=de.durationDays||30;let Re;de.endDate?Re=de.endDate.toDate?de.endDate.toDate():new Date(de.endDate):(Re=new Date(ue.getTime()+ve*24*60*60*1e3),Ie=!0),Ie&&os(B(I,"sales",ge.id),{startDate:oe||Yt.fromDate(Se),endDate:Yt.fromDate(Re),durationDays:ve}).catch(Ce=>{console.error("Error al actualizar startDate/endDate en Firestore:",Ce)});const Oe=Re.getTime()-ue.getTime(),Jt=V.getTime()-ue.getTime(),Ls=Re.getTime()-V.getTime(),wt=Math.ceil(Oe/(1e3*60*60*24)),Nt=Math.max(0,Math.ceil(Ls/(1e3*60*60*24))),rs=Math.ceil(Jt/(1e3*60*60*24)),as=wt>0?rs/wt*100:100,Es=((ir=z[de.providerId])==null?void 0:ir.terms)||"No se especificaron términos y condiciones.";return{id:ge.id,productName:de.productName||"Producto sin nombre",category:de.type||"netflix",price:parseFloat(de.price)||0,renewalPrice:parseFloat(de.renewalPrice)||0,provider:de.provider||"No especificado",providerId:de.providerId||"",providerPhone:de.providerPhone||de.providerWhatsapp||"51999999999",status:de.status||"completed",saleDate:Se,startDate:ue,endDate:Re,durationDays:ve,daysRemaining:Nt,totalDays:wt,timeElapsedPercentage:as,account:{email:((pr=de.accountDetails)==null?void 0:pr.email)||"No especificado",password:((Zt=de.accountDetails)==null?void 0:Zt.password)||"No especificado",profile:((Lt=de.accountDetails)==null?void 0:Lt.profile)||"No especificado",pin:((re=de.accountDetails)==null?void 0:re.pin)||"No especificado"},client:{customerName:de.customerName||"Cliente desconocido",email:de.customerEmail||"No especificado",phone:de.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BS-${ge.id.slice(0,8).toUpperCase()}`,termsAndConditions:Es,renewable:de.renewable!==void 0?de.renewable:!0}}).filter(ge=>{const de=new Date(ge.endDate);return!(de<V&&V.getTime()-de.getTime()>ee)});A(ce),R(!1)},Z=>{console.error("Error al obtener pedidos:",Z),te("Error al cargar pedidos: "+Z.message),R(!1)}),S=setInterval(()=>{const Z=new Date,V=5*24*60*60*1e3;A(ee=>ee.map(ce=>{const ne=new Date(ce.endDate).getTime()-new Date(ce.startDate).getTime(),J=Z.getTime()-new Date(ce.startDate).getTime(),ge=new Date(ce.endDate).getTime()-Z.getTime(),de=Math.ceil(ne/(1e3*60*60*24)),ke=Math.max(0,Math.ceil(ge/(1e3*60*60*24))),Se=Math.ceil(J/(1e3*60*60*24)),oe=de>0?Se/de*100:100;return{...ce,daysRemaining:ke,totalDays:de,timeElapsedPercentage:oe}}).filter(ce=>{const ne=new Date(ce.endDate);return!(ne<Z&&Z.getTime()-ne.getTime()>V)}))},6e4);return()=>{m(),clearInterval(S)}},[k,z]),v.useEffect(()=>{if(!k)return;const x=xe(Y(I,"pendingTopUps"),je("userId","==",k)),m=we(x,S=>{const Z=S.docs.map(V=>{var ee,ce;return{id:V.id,...V.data(),date:((ce=(ee=V.data().requestedAt)==null?void 0:ee.toDate)==null?void 0:ce.call(ee))||new Date,amount:parseFloat(V.data().amount)||0}});l(Z)},S=>{console.error("Error al obtener recargas:",S),te("Error al cargar recargas: "+S.message)});return()=>m()},[k]);const ie=async()=>{try{if(q(m=>({...m,topUp:!0})),!r||isNaN(r)){Pe("Error","Ingrese un monto válido");return}const x=parseFloat(r);if(x<10){Pe("Error","El monto mínimo de recarga es S/ 10.00");return}await Ua(Y(I,"pendingTopUps"),{userId:k,username:o.username,amount:x,status:"pendiente",requestedAt:ye()}),a(""),Pe("Éxito","Solicitud de recarga enviada correctamente")}catch(x){console.error("Error al solicitar recarga:",x),Pe("Error",x.message||"Error al enviar solicitud de recarga")}finally{q(x=>({...x,topUp:!1}))}},w=async x=>{x.preventDefault();try{q(ce=>({...ce,password:!0}));const m=x.target.password.value,S=x.target.phone.value,Z=Qe.currentUser,V=B(I,"users",k),ee={};if(m){if(m.length<6){Pe("Error","La contraseña debe tener al menos 6 caracteres");return}await Zg(Z,m),ee.updatedAt=ye()}S&&(ee.phone=S,ee.updatedAt=ye()),Object.keys(ee).length>0&&await os(V,ee),c(ce=>({...ce,phone:S||ce.phone})),Pe("Éxito","Cambios guardados correctamente"),x.target.reset()}catch(m){console.error("Error al actualizar los datos:",m),Pe("Error",m.message||"Error al guardar los cambios")}finally{q(m=>({...m,password:!1}))}},D=x=>{if(!x)return"No especificada";try{const m=x instanceof Date?x:new Date(x);return isNaN(m.getTime())?"Fecha inválida":m.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},P=()=>{if(G)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(U)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Xe,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:U}),e.jsx("button",{onClick:()=>te(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(y){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:o.username})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o.username})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(aa,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:d})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(sP,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o.phone||"No especificado"})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Saldo disponible"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",g.toFixed(2)]}),e.jsx("button",{onClick:()=>O("recargar"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Recargar"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Pedidos activos"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:_.filter(x=>new Date(x.endDate)>new Date&&x.status==="completed").length}),e.jsx("button",{onClick:()=>O("pedidos"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Ver pedidos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pedidos recientes"}),_.length>0?_.slice(0,3).map(x=>{const m=new Date(x.endDate)>new Date&&x.status==="completed",S=x.status==="pending";return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium text-white",children:x.productName}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${x.status==="pending"?"bg-yellow-900/80 text-yellow-400":m?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:S?"A pedido":m?"Activo":"Expirado"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",D(x.endDate)]})]},x.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),_.length>3&&e.jsx("button",{onClick:()=>O("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Notificaciones"}),K.length>0?K.map(x=>{var m,S;return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsx("p",{className:"text-gray-300",children:x.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:D(((S=(m=x.updatedAt)==null?void 0:m.toDate)==null?void 0:S.call(m))||new Date)})]},x.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay notificaciones"})]})]})]});case"notificaciones":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Notificaciones"}),K.length>0?e.jsx("div",{className:"space-y-4",children:K.map(x=>{var m,S;return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("p",{className:"text-gray-300",children:x.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:D(((S=(m=x.updatedAt)==null?void 0:m.toDate)==null?void 0:S.call(m))||new Date)})]},x.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xo,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-400",children:"No tienes mensajes nuevos"})]})]});case"recargar":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),e.jsx("input",{type:"number",value:r,onChange:x=>a(x.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all duration-300 placeholder-gray-500",placeholder:"Mínimo S/ 10.00",min:"10",step:"0.01"})]}),e.jsx("button",{onClick:ie,disabled:u.topUp||!r||parseFloat(r)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${r&&parseFloat(r)>=10&&!u.topUp?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:u.topUp?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"})]}),e.jsxs("div",{className:"mt-6 bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50 max-w-md mx-auto",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(As,{className:"mr-2"})," ¿Cómo realizar tu recarga?"]}),e.jsxs("p",{className:"text-gray-300 mb-2",children:["Realiza tu pago mediante ",e.jsx("span",{className:"font-semibold text-white",children:"Yape"})," al número:"]}),e.jsx("p",{className:"text-xl font-bold text-white mb-2",children:"📱 931757531"}),e.jsx("p",{className:"text-gray-300 mb-3",children:"Una vez realizado el pago, por favor contáctanos vía WhatsApp al mismo número para confirmar tu recarga."}),e.jsxs("a",{href:`https://wa.me/51931757531?text=${encodeURIComponent("Hola 😊, he realizado una recarga a través de Yape. Por favor, confirma mi pago.")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300",children:[e.jsx(aa,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Historial de recargas"}),i.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:i.map(x=>e.jsxs("tr",{className:"hover:bg-gray-600/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",x.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${x.status==="aprobado"?"bg-green-900/80 text-green-400":x.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:x.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:D(x.date)})]},x.id))})]})}):e.jsx("p",{className:"text-gray-400 py-8",children:"No hay recargas registradas"})]})]});case"proveedores":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Proveedores"}),fe.length>0?e.jsx("div",{className:"space-y-4",children:fe.map(x=>e.jsx("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300 font-medium",children:x.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Teléfono: ",x.phone]})]}),e.jsxs("button",{onClick:()=>j(x),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300 flex items-center gap-2",children:[e.jsx(Fe,{size:16}),"Calificar"]})]})},x.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ye,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay proveedores"}),e.jsx("p",{className:"text-gray-400",children:"No has realizado compras con proveedores aún."})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-3 sm:p-4 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative w-48 sm:w-64",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"w-full px-3 py-1.5 rounded-lg bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all duration-300 text-sm placeholder-gray-500",value:he,onChange:x=>be(x.target.value)}),e.jsx(at,{className:"absolute right-2 top-2 text-gray-400",size:16})]})]}),_.length>0?_.filter(x=>(x.productName||"").toLowerCase().includes(he.toLowerCase())||(x.orderId||"").toLowerCase().includes(he.toLowerCase())).map(x=>{var Se,oe,ue,Ie,ve,Re,Oe,Jt,Ls,wt,Nt,rs,as;const m=parseFloat(x.price)||0,S=parseFloat(x.renewalPrice)||0,Z=new Date(x.endDate)>new Date&&x.status==="completed",V=x.status==="pending",ee=x.daysRemaining||0,ce=x.timeElapsedPercentage||0;let ne="bg-green-400";ce>70&&ce<=90?ne="bg-yellow-400":ce>90&&(ne="bg-red-400");const J=V?e.jsx(zt,{className:"text-yellow-400",size:16}):Z?e.jsx(Kc,{className:"text-green-400",size:16}):e.jsx(Xe,{className:"text-red-400",size:16}),ge=encodeURIComponent(`*Consulta sobre Pedido - ${x.productName||"Sin nombre"}*

*N° Pedido:* ${x.orderId||"No especificado"}
*Producto:* ${x.productName||"No especificado"}
*Precio:* S/ ${m.toFixed(2)}
`+(x.renewalPrice?`*Precio de Renovación:* S/ ${S.toFixed(2)}
`:"")+`*Estado:* ${V?"A pedido":Z?"Activo":"Expirado"}
*Fecha de Inicio:* ${D(x.startDate)}
*Fecha de Vencimiento:* ${D(x.endDate)}
`+(V?`Hola 😊, he comprado un producto a pedido (${x.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),de=encodeURIComponent(`😊 Estimado/a ${((Se=x.client)==null?void 0:Se.customerName)||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${x.productName||"Sin nombre"}.
🔢 Código: ${x.orderId||"No especificado"}
`+(V?"":`📧 Correo: ${((oe=x.account)==null?void 0:oe.email)||"No especificado"}
🔐 Contraseña: ${((ue=x.account)==null?void 0:ue.password)||"No especificado"}
👤 Perfil: ${((Ie=x.account)==null?void 0:Ie.profile)||"No especificado"}
📌 PIN: ${((ve=x.account)==null?void 0:ve.pin)||"No especificado"}
`)+`🌐 URL: Sin URL
📅 Fecha de creación: ${D(x.startDate)}
📅 Fecha de vencimiento: ${D(x.endDate)}
🏁 Días contratados: ${x.durationDays||30} días.

`+(V?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:"")+`*Términos y Condiciones:*
${x.termsAndConditions||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),ke=x.providerPhone?x.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999";return e.jsxs("div",{className:"border border-gray-600/50 rounded-xl overflow-hidden hover:shadow-lg transition-all duration-300 mb-4",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-3 py-2 border-b border-gray-600/20 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[J,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white text-sm",children:x.productName||"Producto sin nombre"}),x.orderId&&e.jsxs("p",{className:"text-xs text-gray-400",children:["N°: ",x.orderId]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",m.toFixed(1)]}),e.jsx("p",{className:"text-xs text-gray-500",children:x.renewalPrice&&`Ren: S/ ${S.toFixed(1)}`}),e.jsx("p",{className:`text-xs ${V?"text-yellow-400":ne.replace("bg-","text-")}`,children:V?"Pendiente":`${ee} día${ee===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-3 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"w-full bg-gray-600/40 rounded-full h-1",children:e.jsx("div",{className:`h-1 rounded-full ${ne}`,style:{width:`${Math.min(ce,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5 text-right",children:[ce.toFixed(0),"%"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[e.jsxs("div",{className:"border border-gray-700/50 bg-gray-800/50 backdrop-blur-sm p-2.5 rounded-xl",children:[e.jsxs("h5",{className:"text-xs font-medium text-gray-400 flex items-center mb-0.5",children:[e.jsx(Ye,{className:"mr-0.5",size:12})," Cuenta"]}),e.jsx("div",{className:"space-y-0.5 text-xs text-gray-300",children:V?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Usuario: ",e.jsx("span",{className:"text-gray-200",children:"Por completar"})]}),e.jsxs("p",{children:["Clave: ",e.jsx("span",{className:"text-gray-200",children:"Por completar"})]}),e.jsxs("p",{children:["Perfil: ",e.jsx("span",{className:"text-gray-200",children:"Por completar"})]}),e.jsxs("p",{children:["PIN: ",e.jsx("span",{className:"text-gray-200",children:"No"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Email: ",e.jsx("span",{className:"text-gray-100 break-all",children:((Re=x.account)==null?void 0:Re.email)||"-"})]}),e.jsxs("p",{children:["Clave: ",e.jsx("span",{className:"text-gray-100 break-all",children:((Oe=x.account)==null?void 0:Oe.password)||"-"})]}),e.jsxs("p",{children:["Perfil: ",e.jsx("span",{className:"text-gray-100",children:((Jt=x.account)==null?void 0:Jt.profile)||"-"})]}),e.jsxs("p",{children:["PIN: ",e.jsx("span",{className:"text-gray-100",children:((Ls=x.account)==null?void 0:Ls.pin)||"-"})]})]})})]}),e.jsxs("div",{className:"border border-gray-700/50 bg-gray-800/50 backdrop-blur-sm p-2.5 rounded-xl",children:[e.jsxs("h5",{className:"text-xs font-medium text-gray-400 flex items-center mb-0.5",children:[e.jsx(Te,{className:"mr-0.5",size:12})," Pedido"]}),e.jsxs("div",{className:"space-y-0.5 text-xs text-gray-300",children:[e.jsxs("p",{children:["Proveedor: ",e.jsx("span",{className:"text-gray-100",children:x.provider||"-"})]}),e.jsxs("p",{children:["Teléfono: ",e.jsx("span",{className:"text-gray-100",children:x.providerPhone||"-"})]}),e.jsxs("p",{children:["Estado: ",e.jsx("span",{className:`inline-block px-1 py-0.5 text-[10px] rounded-full ${V?"bg-yellow-900/60 text-yellow-300":Z?"bg-green-900/60 text-green-300":"bg-red-900/60 text-red-300"}`,children:V?"A pedido":Z?"Activo":"Expirado"})]}),e.jsxs("p",{children:["Inicio: ",e.jsx("span",{className:"text-gray-100",children:D(x.startDate)})]}),e.jsxs("p",{children:["Vence: ",e.jsx("span",{className:"text-gray-100",children:D(x.endDate)})]}),e.jsxs("p",{children:["Días: ",e.jsx("span",{className:`text-gray-100 ${ne.replace("bg-","text-")}`,children:ee})]})]})]}),e.jsxs("div",{className:"border border-gray-700/50 bg-gray-800/50 backdrop-blur-sm p-2.5 rounded-xl",children:[e.jsxs("h5",{className:"text-xs font-medium text-gray-400 flex items-center mb-0.5",children:[e.jsx(Ye,{className:"mr-0.5",size:12})," Cliente"]}),e.jsxs("div",{className:"space-y-0.5 text-xs text-gray-300",children:[e.jsxs("p",{children:["Nombre: ",e.jsx("span",{className:"text-gray-100",children:((wt=x.client)==null?void 0:wt.customerName)||"-"})]}),e.jsxs("p",{children:["Email: ",e.jsx("span",{className:"text-gray-100 break-all",children:((Nt=x.client)==null?void 0:Nt.email)||"-"})]}),e.jsxs("p",{children:["Teléfono: ",e.jsx("span",{className:"text-gray-100",children:((rs=x.client)==null?void 0:rs.phone)||"-"})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.jsxs("a",{href:`https://wa.me/51${ke}?text=${ge}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-1.5 px-2.5 rounded-lg flex items-center justify-center gap-1 text-xs transition-all duration-300",children:[e.jsx(aa,{size:12})," Proveedor"]}),x.renewalPrice&&x.renewable&&e.jsx("button",{onClick:()=>W(x),disabled:u[`renew_${x.id}`],className:`flex-1 py-1.5 px-2.5 rounded-lg flex items-center justify-center gap-1 text-xs transition-all duration-300 ${u[`renew_${x.id}`]?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 text-white"}`,children:u[`renew_${x.id}`]?e.jsx("div",{className:"animate-spin h-3 w-3 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(rP,{size:12})," Renovar (S/ ",S.toFixed(1),")"]})}),((as=x.client)==null?void 0:as.phone)&&e.jsxs("a",{href:`https://wa.me/${x.client.phone.replace(/^\+/,"")}?text=${de}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-1.5 px-2.5 rounded-lg flex items-center justify-center gap-1 text-xs transition-all duration-300",children:[e.jsx(aa,{size:12})," Cliente"]})]})]})]},x.id)}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(tt,{className:"mx-auto text-3xl text-gray-400 mb-2"}),e.jsx("h4",{className:"text-base font-medium text-gray-300",children:"No tienes pedidos"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Realiza tu primer pedido en nuestra tienda"})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:w,className:"space-y-4",onChange:()=>te(""),children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:o.username,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:()=>Ge({id:k,username:o.username}),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300",title:"Editar Nombre",children:e.jsx(zy,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:d,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Teléfono"}),e.jsx("input",{type:"tel",name:"phone",defaultValue:o.phone||"",placeholder:"Ingresa tu número de teléfono",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsx("button",{type:"submit",disabled:u.password,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed",children:u.password?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:ae,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(Et,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Xe,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>O("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Bt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("button",{onClick:()=>{Me("/"),t(!1)},className:"text-xl font-bold text-cyan-400 hover:text-cyan-300 transition-all duration-300",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(yt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:o.username.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:o.username}),e.jsx("p",{className:"text-xs text-gray-400",children:"Usuario"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Qm},{id:"notificaciones",label:"Notificaciones",icon:Xo},{id:"recargar",label:"Recargar saldo",icon:As},{id:"pedidos",label:"Mis pedidos",icon:tt},{id:"proveedores",label:"Proveedores",icon:Ye},{id:"configuracion",label:"Configuración",icon:Yc}].map(x=>e.jsxs("button",{onClick:()=>{O(x.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${y===x.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx(x.icon,{className:"text-lg"}),e.jsx("span",{children:x.label})]},x.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:ae,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(Et,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:P()}),e.jsx(vF,{isOpen:se.isOpen,title:se.title,message:se.message,onClose:He}),e.jsx(jF,{isOpen:$.isOpen,user:$.user,onClose:n,onSave:T}),e.jsx(NF,{isOpen:Le.isOpen,provider:Le.provider,onClose:p,onRate:F}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},kF=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,IF=({isOpen:s,user:t,onClose:r,onSave:a})=>{const[i,l]=v.useState((t==null?void 0:t.username)||""),[o,c]=v.useState(""),d=h=>{if(h.preventDefault(),c(""),!i.trim()){c("El nombre de usuario no puede estar vacío.");return}a(t.id,i.trim())};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Perfil"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:h=>l(h.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},PF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState("inicio"),[i,l]=v.useState(""),[o,c]=v.useState(""),[d,h]=v.useState(""),[g,N]=v.useState([]),[k,E]=v.useState(0),[y,O]=v.useState(0),[_,A]=v.useState(null),[z,L]=v.useState(!0),[K,H]=v.useState({}),[G,R]=v.useState(null),[u,q]=v.useState([]),[U,te]=v.useState(!1),[se,X]=v.useState(""),[$,pe]=v.useState(""),[Le,De]=v.useState([]),[he,be]=v.useState([]),[fe,ze]=v.useState({}),[Me,Pe]=v.useState([]),[He,Ge]=v.useState({isOpen:!1,message:"",title:""}),[n,j]=v.useState({isOpen:!1,user:null}),p=St(),T=(V,ee)=>{Ge({isOpen:!0,title:V,message:ee})},F=()=>{Ge({isOpen:!1,message:"",title:""})},W=V=>{j({isOpen:!0,user:V})},ae=()=>{j({isOpen:!1,user:null})},ie=async(V,ee)=>{try{H(J=>({...J,profile:!0}));const ce=B(I,"users",V),ne=B(I,"affiliates",V);await os(ce,{username:ee,updatedAt:ye()}),await os(ne,{username:ee,updatedAt:ye()}),l(ee),T("Éxito","Perfil actualizado exitosamente"),ae()}catch(ce){console.error("Error al actualizar perfil:",ce),T("Error",ce.message||"Error al actualizar el perfil")}finally{H(ce=>({...ce,profile:!1}))}};v.useEffect(()=>{const V=At(Qe,ee=>{ee?(A(ee.uid),c(ee.email||"No especificado"),L(!1)):p("/login")});return()=>V()},[p]),v.useEffect(()=>{(async()=>{try{const ee=xe(Y(I,"products")),ce=await jt(ee),ne={};ce.forEach(J=>{ne[J.id]=J.data()}),ze(ne)}catch(ee){console.error("Error fetching products:",ee),R("Error al cargar productos")}})()},[]),v.useEffect(()=>{(()=>we(B(I,"notifications","adminMessage"),ce=>{if(ce.exists()){const ne=ce.data(),J="affiliate";ne.roles&&ne.roles.includes(J)?Pe([{id:ce.id,...ne}]):Pe([])}else Pe([])}))()},[]),v.useEffect(()=>{(async()=>{if(_)try{const ee=B(I,"users",_),ce=await et(ee);if(ce.exists()){const ge=ce.data();l(ge.username||"Usuario"),O(Number(ge.balance)||0)}const ne=B(I,"affiliates",_),J=await et(ne);if(J.exists()){const ge=J.data();h(ge.affiliateCode||""),E(Number(ge.earnings)||0)}else{const ge=`AFF-${Math.random().toString(36).substring(2,8).toUpperCase()}`;await Wr(ne,{username:i||"Nuevo Afiliado",email:o,affiliateCode:ge,earnings:0,createdAt:ye(),updatedAt:ye()}),h(ge)}}catch(ee){console.error("Error al manejar datos:",ee),R("Error al cargar datos")}finally{L(!1)}})()},[_,o,i]),v.useEffect(()=>{if(!_)return;(()=>{const ee=xe(Y(I,"pendingTopUps"),je("userId","==",_));return we(ee,ne=>{const J=ne.docs.map(ge=>{var de,ke;return{id:ge.id,...ge.data(),date:((ke=(de=ge.data().requestedAt)==null?void 0:de.toDate)==null?void 0:ke.call(de))||new Date,amount:parseFloat(ge.data().amount)||0}});De(J)},ne=>{console.error("Error al obtener recargas:",ne),R("Error al cargar recargas")})})()},[_]),v.useEffect(()=>{if(!d)return;const V=xe(Y(I,"users"),je("referrerCode","==",d),w0("createdAt","desc"),Ut(5)),ee=we(V,ce=>{const ne=ce.docs.map(J=>{var ge;return{id:J.id,...J.data(),joinDate:((ge=J.data().createdAt)==null?void 0:ge.toDate())||new Date}});q(ne)});return()=>ee()},[d]),v.useEffect(()=>{if(!d)return;const V=xe(Y(I,"users"),je("referrerCode","==",d)),ee=we(V,ce=>{const ne=ce.docs.map(J=>{var ge;return{id:J.id,...J.data(),joinDate:((ge=J.data().createdAt)==null?void 0:ge.toDate())||new Date}});N(ne)});return()=>ee()},[d]),v.useEffect(()=>{if(!_)return;(()=>{const ee=xe(Y(I,"sales"),je("customerId","==",_)),ce=we(ee,J=>{if(J.empty){be([]),L(!1);return}const ge=J.docs.map(de=>{var ys,Or,Is,Vr,ir,pr,Zt,Lt,re,Ce,Be;const ke=de.data(),oe=((Or=(ys=ke.saleDate)==null?void 0:ys.toDate)==null?void 0:Or.call(ys))||((Vr=(Is=ke.createdAt)==null?void 0:Is.toDate)==null?void 0:Vr.call(Is))||new Date;let ue=(pr=(ir=ke.startDate)==null?void 0:ir.toDate)==null?void 0:pr.call(ir),Ie=ue||oe,ve=!1;ue||(ve=!0);const Re=ke.durationDays||30;let Oe;ke.endDate?Oe=new Date(ke.endDate):(Oe=new Date(Ie.getTime()+Re*24*60*60*1e3),ve=!0),ve&&os(B(I,"sales",de.id),{startDate:ue||Yt.fromDate(oe),endDate:Oe.toISOString(),durationDays:Re}).catch(Je=>{console.error("Error al actualizar startDate/endDate en Firestore:",Je)});const Jt=new Date,Ls=Oe.getTime()-Ie.getTime(),wt=Jt.getTime()-Ie.getTime(),Nt=Oe.getTime()-Jt.getTime(),rs=Math.ceil(Ls/(1e3*60*60*24)),as=Math.max(0,Math.ceil(Nt/(1e3*60*60*24))),Es=Math.ceil(wt/(1e3*60*60*24)),Ts=rs>0?Es/rs*100:100,nr=((Zt=fe[ke.providerId])==null?void 0:Zt.terms)||"No se especificaron términos y condiciones.";return{id:de.id,productName:ke.productName||"Producto sin nombre",category:ke.type||"netflix",price:parseFloat(ke.price)||0,provider:ke.provider||"No especificado",providerId:ke.providerId||"",providerPhone:ke.providerPhone||ke.providerWhatsapp||"51999999999",status:ke.status||"completed",saleDate:oe,startDate:Ie,endDate:Oe,durationDays:Re,daysRemaining:as,totalDays:rs,timeElapsedPercentage:Ts,account:{email:((Lt=ke.accountDetails)==null?void 0:Lt.email)||"No especificado",password:((re=ke.accountDetails)==null?void 0:re.password)||"No especificado",profile:((Ce=ke.accountDetails)==null?void 0:Ce.profile)||"No especificado",pin:((Be=ke.accountDetails)==null?void 0:Be.pin)||"No especificado"},client:{name:ke.customerName||"Cliente desconocido",email:ke.customerEmail||"No especificado",phone:ke.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BS-${de.id.slice(0,8).toUpperCase()}`,termsAndConditions:nr,renewable:ke.renewable!==void 0?ke.renewable:!0}});be(ge),L(!1)},J=>{console.error("Error al obtener pedidos:",J),R("Error al cargar pedidos: "+J.message),L(!1)}),ne=setInterval(()=>{be(J=>J.map(ge=>{const de=new Date,ke=new Date(ge.endDate).getTime()-new Date(ge.startDate).getTime(),Se=de.getTime()-new Date(ge.startDate).getTime(),oe=new Date(ge.endDate).getTime()-de.getTime(),ue=Math.ceil(ke/(1e3*60*60*24)),Ie=Math.max(0,Math.ceil(oe/(1e3*60*60*24))),ve=Math.ceil(Se/(1e3*60*60*24)),Re=ue>0?ve/ue*100:100;return{...ge,daysRemaining:Ie,totalDays:ue,timeElapsedPercentage:Re}}))},6e4);return()=>{ce(),clearInterval(ne)}})()},[_,fe]);const w=async()=>{try{if(H(ee=>({...ee,topUp:!0})),!$||isNaN($)){T("Error","Ingrese un monto válido");return}const V=parseFloat($);if(V<10){T("Error","El monto mínimo de recarga es S/ 10.00");return}await Ua(Y(I,"pendingTopUps"),{userId:_,username:i,amount:V,status:"pendiente",requestedAt:ye(),processed:!1}),pe(""),T("Éxito","Solicitud de recarga enviada correctamente")}catch(V){console.error("Error al solicitar recarga:",V),T("Error",V.message||"Error al enviar solicitud de recarga")}finally{H(V=>({...V,topUp:!1}))}},D=async V=>{var ee,ce,ne,J,ge,de,ke;try{H(wt=>({...wt,[`renew_${V.id}`]:!0}));const Se=parseFloat(V.price)||0;if(y<Se){T("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const oe=parseInt(V.durationDays)||30,ue=Yt.now(),Ie=ue.toDate(),ve=new Date(Ie.getTime()+oe*24*60*60*1e3),Re=ve.toISOString(),Oe={customerId:_,customerName:((ee=V.client)==null?void 0:ee.name)||"Cliente desconocido",customerEmail:((ce=V.client)==null?void 0:ce.email)||o,phoneNumber:((ne=V.client)==null?void 0:ne.phone)||"No especificado",productName:V.productName||"Producto sin nombre",type:V.category||"netflix",price:Se,accountDetails:{email:((J=V.account)==null?void 0:J.email)||"No especificado",password:((ge=V.account)==null?void 0:ge.password)||"No especificado",profile:((de=V.account)==null?void 0:de.profile)||"No especificado",pin:((ke=V.account)==null?void 0:ke.pin)||"No especificado"},provider:V.provider||"Proveedor desconocido",providerId:V.providerId||"",providerPhone:V.providerPhone||V.providerWhatsapp||"51999999999",status:"completed",createdAt:ue,saleDate:ue,startDate:ue,endDate:Re,durationDays:oe,renewedAt:ue,renewable:V.renewable!==void 0?V.renewable:!0},Jt=await Ua(Y(I,"sales"),Oe),Ls=B(I,"users",_);await os(Ls,{balance:y-Se}),O(wt=>wt-Se),be(wt=>{var Nt;return[...wt,{...Oe,id:Jt.id,saleDate:Ie,startDate:Ie,endDate:ve,account:Oe.accountDetails,client:{name:Oe.customerName,email:Oe.customerEmail,phone:Oe.phoneNumber},orderId:`BS-${Jt.id.slice(0,8).toUpperCase()}`,renewable:Oe.renewable,daysRemaining:oe,totalDays:oe,timeElapsedPercentage:0,termsAndConditions:((Nt=fe[Oe.providerId])==null?void 0:Nt.terms)||"No se especificaron términos y condiciones."}]}),T("Éxito","¡Pedido renovado exitosamente!")}catch(Se){console.error("Error al renovar el pedido:",Se),T("Error","Error al renovar el pedido: "+Se.message)}finally{H(Se=>({...Se,[`renew_${V.id}`]:!1}))}},P=()=>{d&&(navigator.clipboard.writeText(d),te(!0),setTimeout(()=>te(!1),2e3))},x=V=>{if(!V)return"No especificada";try{const ee=V instanceof Date?V:new Date(V);return isNaN(ee.getTime())?"Fecha inválida":ee.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},m=async()=>{try{await Fc(Qe),p("/")}catch(V){console.error("Error al cerrar sesión:",V),T("Error",V.message||"Error al cerrar sesión")}},S=async V=>{V.preventDefault();try{H(ne=>({...ne,password:!0}));const ee=V.target.password.value;if(!ee){T("Error","Por favor, ingrese una nueva contraseña");return}if(ee.length<6){T("Error","La contraseña debe tener al menos 6 caracteres");return}const ce=Qe.currentUser;ce&&(await Zg(ce,ee),T("Éxito","Contraseña actualizada correctamente"),V.target.reset())}catch(ee){console.error("Error al actualizar la contraseña:",ee),T("Error",ee.message||"Error al actualizar la contraseña")}finally{H(ee=>({...ee,password:!1}))}},Z=()=>{if(z)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(G)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Xe,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:G}),e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(r){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:i})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(aa,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Saldo disponible"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",y.toFixed(2)]}),e.jsx("button",{onClick:()=>a("recargas"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Recargar"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",k.toFixed(2)]}),e.jsx("button",{onClick:()=>a("ganancias"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Ver ganancias"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Tu código de afiliado"}),e.jsxs("button",{onClick:P,disabled:!d,className:`flex items-center gap-2 px-3 py-1 rounded-xl transition-all duration-300 ${d?"bg-cyan-900/80 text-cyan-400 hover:bg-cyan-800/80":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(cF,{size:16}),U?"¡Copiado!":"Copiar"]})]}),e.jsx("div",{className:"bg-gray-800/50 p-4 rounded-xl mb-6 border border-gray-600/50",children:e.jsx("p",{className:"text-2xl font-bold text-center tracking-wider text-white",children:d||"Generando código..."})}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Comparte este código con tus amigos para que se registren y ganes comisiones por sus compras."}),e.jsxs("div",{className:"bg-cyan-900/30 p-4 rounded-xl border border-cyan-800/50",children:[e.jsx("h4",{className:"font-medium text-cyan-400 mb-2",children:"Enlace de afiliado:"}),e.jsx("p",{className:"text-sm bg-gray-800/50 p-2 rounded-xl border border-gray-600/50 overflow-x-auto text-gray-300",children:d?`https://blackkstreaming.com/register?ref=${d}`:"Generando enlace..."})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Referidos recientes"}),u.length>0?u.map(V=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:V.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-green-900/80 text-green-400",children:"Activo"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Unido: ",x(V.joinDate)]})]},V.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes referidos recientes"}),u.length>0&&e.jsx("button",{onClick:()=>a("referidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los referidos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pedidos recientes"}),he.length>0?he.slice(0,3).map(V=>{const ee=new Date(V.endDate)>new Date&&V.status==="completed",ce=V.status==="pending";return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:V.productName}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ce?"bg-yellow-900/80 text-yellow-400":ee?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:ce?"A pedido":ee?"Activo":"Expirado"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",x(V.endDate)]})]},V.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),he.length>3&&e.jsx("button",{onClick:()=>a("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Notificaciones"}),Me.length>0?Me.map(V=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsx("p",{className:"text-gray-300",children:V.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:x(V.updatedAt)})]},V.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay notificaciones"})]})]})]});case"notificaciones":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Notificaciones"}),Me.length>0?e.jsx("div",{className:"space-y-4",children:Me.map(V=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("p",{className:"text-gray-300",children:V.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:x(V.updatedAt)})]},V.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xo,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-400",children:"No tienes mensajes nuevos"})]})]});case"recargas":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),e.jsx("input",{type:"number",value:$,onChange:V=>pe(V.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Mínimo S/ 10.00",min:"10",step:"0.01"})]}),e.jsx("button",{onClick:w,disabled:K.topUp||!$||parseFloat($)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${$&&parseFloat($)>=10&&!K.topUp?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:K.topUp?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"}),e.jsxs("div",{className:"mt-6 bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(As,{className:"mr-2"})," ¿Cómo realizar tu recarga?"]}),e.jsxs("p",{className:"text-gray-300 mb-2",children:["Realiza tu pago mediante ",e.jsx("span",{className:"font-semibold text-white",children:"Yape"})," al número:"]}),e.jsx("p",{className:"text-xl font-bold text-white mb-2",children:"📱 931757531"}),e.jsx("p",{className:"text-gray-300 mb-3",children:"Una vez realizado el pago, por favor contáctanos vía WhatsApp al mismo número para confirmar tu recarga."}),e.jsxs("a",{href:`https://wa.me/51931757531?text=${encodeURIComponent("Hola 😊, he realizado una recarga a través de Yape. Por favor, confirma mi pago.")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300",children:[e.jsx(aa,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de recargas"}),Le.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acción"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:Le.map(V=>{var ce,ne;const ee=encodeURIComponent(`Hola, he pedido una recarga de S/ ${((ce=V.amount)==null?void 0:ce.toFixed(2))||"0.00"} con el nombre ${i}. Adjunto la captura de mi pago, por favor.`);return e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",((ne=V.amount)==null?void 0:ne.toFixed(2))||"0.00"]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${V.status==="aprobado"?"bg-green-900/80 text-green-400":V.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:V.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:x(V.date)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:V.status==="pendiente"?e.jsxs("a",{href:`https://wa.me/51940505969?text=${ee}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 text-sm",children:[e.jsx(aa,{className:"mr-2"})," Enviar captura"]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"—"})})]},V.id)})})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(As,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay recargas registradas"})]})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:se,onChange:V=>X(V.target.value)}),e.jsx(at,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),he.length>0?e.jsx("div",{className:"space-y-6",children:he.filter(V=>(V.productName||"").toLowerCase().includes(se.toLowerCase())||(V.orderId||"").toLowerCase().includes(se.toLowerCase())).map(V=>{var Ie,ve,Re,Oe,Jt,Ls,wt,Nt,rs,as,Es,Ts,nr;const ee=parseFloat(V.price)||0,ce=new Date(V.endDate)>new Date&&V.status==="completed",ne=V.status==="pending",J=V.daysRemaining||0,ge=V.timeElapsedPercentage||0;let de="bg-green-400";ge>70&&ge<=90?de="bg-yellow-400":ge>90&&(de="bg-red-400");const ke=ne?e.jsx(zt,{className:"text-yellow-400"}):ce?e.jsx(Kc,{className:"text-green-400"}):e.jsx(Xe,{className:"text-red-400"}),Se=encodeURIComponent(`*Consulta sobre Pedido - ${V.productName||"Sin nombre"}*

*N° Pedido:* ${V.orderId||"No especificado"}
*Producto:* ${V.productName||"No especificado"}
*Precio:* S/ ${ee.toFixed(2)}
*Estado:* ${ne?"A pedido":ce?"Activo":"Expirado"}
*Fecha de Inicio:* ${x(V.startDate)}
*Fecha de Vencimiento:* ${x(V.endDate)}

`+(ne?`Hola 😊, he comprado un producto a pedido (${V.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),oe=encodeURIComponent(`😊 Estimado/a ${((Ie=V.client)==null?void 0:Ie.name)||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${V.productName||"Sin nombre"}.
🔢 Código: ${V.orderId||"No especificado"}
`+(ne?"":`📧 Correo: ${((ve=V.account)==null?void 0:ve.email)||"No especificado"}
🔐 Contraseña: ${((Re=V.account)==null?void 0:Re.password)||"No especificado"}
👤 Perfil: ${((Oe=V.account)==null?void 0:Oe.profile)||"No especificado"}
📌 PIN: ${((Jt=V.account)==null?void 0:Jt.pin)||"No especificado"}
`)+`🌐 URL: Sin URL
📅 Fecha de creación: ${x(V.startDate)}
📅 Fecha de vencimiento: ${x(V.endDate)}
🏁 Días contratados: ${V.durationDays||30} días.

`+(ne?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:"")+`*Términos y Condiciones:*
${V.termsAndConditions||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),ue=V.providerPhone?V.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999";return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[ke,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:V.productName||"Producto sin nombre"}),V.orderId&&e.jsxs("p",{className:"text-xs text-gray-400",children:["N° Pedido: ",V.orderId]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",ee.toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${ne?"text-yellow-400":de.replace("bg-","text-")}`,children:ne?"Pendiente de activación":`${J} día${J===1?"":"s"} restante${J===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${de}`,style:{width:`${Math.min(ge,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[ge.toFixed(0),"% completado"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," Detalles de la Cuenta"]}),e.jsx("div",{className:"space-y-2 text-gray-300",children:ne?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Usuario:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white break-all",children:((Ls=V.account)==null?void 0:Ls.email)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white break-all",children:((wt=V.account)==null?void 0:wt.password)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:((Nt=V.account)==null?void 0:Nt.profile)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:((rs=V.account)==null?void 0:rs.pin)||"No especificado"})]})]})})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Te,{className:"mr-2"})," Información del Pedido"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"block text-white",children:V.provider||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono del Proveedor:"}),e.jsx("span",{className:"block text-white",children:V.providerPhone||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Estado:"}),e.jsx("span",{className:`block px-2 py-1 text-xs rounded-full ${ne?"bg-yellow-900/80 text-yellow-400":ce?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:ne?"A pedido":ce?"Activo":"Expirado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Método de Pago:"}),e.jsx("span",{className:"block text-white",children:"BlackStreaming"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de inicio:"}),e.jsx("span",{className:"block text-white",children:x(V.startDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de vencimiento:"}),e.jsx("span",{className:"block text-white",children:x(V.endDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Días restantes:"}),e.jsx("span",{className:`block ${de.replace("bg-","text-")}`,children:J})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," Información del Cliente"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Nombre:"}),e.jsx("span",{className:"block text-white",children:((as=V.client)==null?void 0:as.name)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono:"}),e.jsx("span",{className:"block text-white",children:((Es=V.client)==null?void 0:Es.phone)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white",children:((Ts=V.client)==null?void 0:Ts.email)||"No especificado"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("a",{href:`https://wa.me/51${ue}?text=${Se}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(aa,{size:18})," Contactar Proveedor"]}),V.renewable&&e.jsx("button",{onClick:()=>D(V),disabled:K[`renew_${V.id}`],className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${K[`renew_${V.id}`]?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 text-white"}`,children:K[`renew_${V.id}`]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(rP,{size:18})," Renovar Pedido"]})}),((nr=V.client)==null?void 0:nr.phone)&&e.jsxs("a",{href:`https://wa.me/${V.client.phone.replace(/^\+/,"")}?text=${oe}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(aa,{size:18})," Contactar Cliente"]})]})]})]},V.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tt,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Realiza tu primer pedido en nuestra tienda"})]})]});case"referidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Todos tus referidos (",g.length,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar referidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:se,onChange:V=>X(V.target.value)}),e.jsx(at,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),g.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha de registro"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:g.filter(V=>{const ee=V.username||"",ce=V.email||"";return ee.toLowerCase().includes(se.toLowerCase())||ce.toLowerCase().includes(se.toLowerCase())}).map(V=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:V.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:V.email||"Sin email"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:V.joinDate?x(V.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/80 text-green-400",children:V.status||"Activo"})})]},V.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(uc,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes referidos aún"}),e.jsx("p",{className:"text-gray-400",children:"Comparte tu código de afiliado para empezar a ganar comisiones"})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Reporte de ganancias"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias hoy"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde ayer"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias esta semana"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde la semana pasada"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",k.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[g.length," referidos"]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx(Q0,{className:"mr-2 text-cyan-400"})," Historial de comisiones"]}),g.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-800/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Referido"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Origen"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-700/50 divide-y divide-gray-600/50",children:g.map(V=>e.jsxs("tr",{className:"hover:bg-gray-600/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:V.username||"Usuario sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:V.joinDate?x(V.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:"S/ 0.00"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:"Registro"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-900/80 text-yellow-400",children:"Pendiente"})})]},V.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(As,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay comisiones registradas"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gana comisiones cuando tus referidos realicen compras"})]})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:i,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:()=>W({id:_,username:i}),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300",title:"Editar Nombre",children:e.jsx(zy,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:o,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsx("button",{type:"submit",disabled:K.password,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-cyan-800",children:K.password?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:m,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(Et,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Xe,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Bt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(yt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:i}),e.jsx("p",{className:"text-xs text-gray-400",children:"Afiliador"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Qm},{id:"notificaciones",label:"Notificaciones",icon:Xo},{id:"recargas",label:"Recargas",icon:As},{id:"pedidos",label:"Pedidos",icon:tt},{id:"referidos",label:"Referidos",icon:uc},{id:"ganancias",label:"Ganancias",icon:Q0},{id:"configuracion",label:"Configuración",icon:Yc}].map(V=>e.jsxs("button",{onClick:()=>{a(V.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r===V.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx(V.icon,{className:"text-lg"}),e.jsx("span",{children:V.label})]},V.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:m,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(Et,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:Z()}),e.jsx(kF,{isOpen:He.isOpen,title:He.title,message:He.message,onClose:F}),e.jsx(IF,{isOpen:n.isOpen,user:n.user,onClose:ae,onSave:ie}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},SF=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,CF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState("inicio"),[i,l]=v.useState("Usuario"),[o,c]=v.useState(""),[d,h]=v.useState(""),[g,N]=v.useState([]),[k,E]=v.useState([]),[y,O]=v.useState([]),[_,A]=v.useState(!0),[z,L]=v.useState(""),[K,H]=v.useState({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:Array(1).fill({email:"",password:"",profile:"",pin:""})}),[G,R]=v.useState(null),[u,q]=v.useState(!1),[U,te]=v.useState(""),[se,X]=v.useState(""),[$,pe]=v.useState({isOpen:!1,message:"",title:""}),[Le,De]=v.useState({email:"",password:"",preferences:""}),[he,be]=v.useState([]),[fe,ze]=v.useState(""),[Me,Pe]=v.useState("Yape"),[He,Ge]=v.useState(""),[n,j]=v.useState(!1),[p,T]=v.useState([]),[F,W]=v.useState(!0),[ae,ie]=v.useState(0),[w,D]=v.useState(!1),[P,x]=v.useState(null),[m,S]=v.useState(""),Z=St(),V=sy(),ee=(re,Ce)=>{pe({isOpen:!0,title:re,message:Ce})},ce=()=>{pe({isOpen:!1,message:"",title:""})},ne=re=>{var Ce;if(!re)return"No especificada";try{const Be=re instanceof Date?re:((Ce=re==null?void 0:re.toDate)==null?void 0:Ce.call(re))||new Date(re);return isNaN(Be.getTime())?"Fecha inválida":Be.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(Be){return console.error("Error formatting date:",Be),"Fecha inválida"}},J=re=>({netflix:"Netflix",spotify:"Spotify",disney:"Disney",max:"Max",primevideo:"Prime Video",vix:"Vix",crunchyroll:"Crunchyroll",canva:"Canva",chatgpt:"ChatGPT",redessociales:"Redes Sociales",dgo:"Dgo",ligamax:"Liga Max",movistarplay:"Movistar Play",youtube:"Youtube",deezer:"Deezer",tidal:"Tidal",vpn:"Vpn",wintv:"WinTv",applemusic:"Apple Music",appletv:"Apple TV",iptv:"Iptv",flujotv:"Flujo Tv",vikirakuten:"Viki Rakuten",pornhub:"Pornhub",paramount:"Paramount",licencias:"Licencias",capcut:"Capcut",duolingo:"Duolingo",buscapersonas:"BuscaPersonas"})[re==null?void 0:re.toLowerCase()]||"Otro";v.useEffect(()=>{const re=At(V,Ce=>{Ce?(c(Ce.email||""),h(Ce.uid),ge(Ce.uid)):Z("/login")});return()=>re()},[V,Z]);const ge=async re=>{try{const Ce=B(I,"users",re),Be=await et(Ce);if(Be.exists()){const Je=Be.data();l(Je.username||"Usuario"),De({email:Je.email||"",password:"",preferences:Je.preferences||""})}A(!1)}catch(Ce){L("Error al cargar datos del usuario"),console.error("Error fetching user data:",Ce),A(!1)}};v.useEffect(()=>{o&&(async Ce=>{try{const Be=await et(B(I,"admins",Ce));j(Be.exists())}catch(Be){console.error("Error checking admin status:",Be)}})(o)},[o]),v.useEffect(()=>{if(!i)return;const re=xe(Y(I,"products"),je("provider","==",i)),Ce=we(re,Be=>{const Je=Be.docs.map(ht=>({id:ht.id,...ht.data()}));E(Je)},Be=>{console.error("Error fetching products:",Be),L("Error al cargar productos")});return()=>Ce()},[i]),v.useEffect(()=>{if(!d)return;const re=xe(Y(I,"sales"),je("providerId","==",d)),Ce=we(re,Je=>{if(Je.empty){N([]),W(!1);return}const ht=Je.docs.map(is=>{var zr,Gi,Qi,ml,ii,hl,Ki,Yi;const Ot=is.data(),Os=((Gi=(zr=Ot.saleDate)==null?void 0:zr.toDate)==null?void 0:Gi.call(zr))||((ml=(Qi=Ot.createdAt)==null?void 0:Qi.toDate)==null?void 0:ml.call(Qi))||new Date;let ha=(hl=(ii=Ot.startDate)==null?void 0:ii.toDate)==null?void 0:hl.call(ii),or=ha||Os,ai=!ha;const qi=Ot.durationDays||30;let pa;Ot.endDate?pa=typeof Ot.endDate=="string"?new Date(Ot.endDate):((Yi=(Ki=Ot.endDate).toDate)==null?void 0:Yi.call(Ki))||new Date(Ot.endDate):(pa=new Date(or.getTime()+qi*24*60*60*1e3),ai=!0),ai&&os(B(I,"sales",is.id),{startDate:ha||Yt.fromDate(Os),endDate:pa.toISOString(),durationDays:qi}).catch(Cd=>{console.error("Error al actualizar startDate/endDate en Firestore:",Cd)});const Hi=new Date,Id=pa.getTime()-or.getTime(),Pd=Hi.getTime()-or.getTime(),Km=pa.getTime()-Hi.getTime(),dn=Math.max(1,Math.ceil(Id/(1e3*60*60*24))),Sd=Math.max(0,Math.ceil(Km/(1e3*60*60*24))),xl=Math.ceil(Pd/(1e3*60*60*24)),ni=dn>0?Math.min(100,xl/dn*100):100;return{id:is.id,productName:Ot.productName||"Producto sin nombre",category:Ot.type||"netflix",amount:parseFloat(Ot.price)||0,buyer:Ot.buyerName||Ot.customerName||"Comprador desconocido",buyerPhone:Ot.buyerPhone||"No especificado",buyerEmail:Ot.customerEmail||"No especificado",status:Ot.status||"completed",saleDate:Os,startDate:or,endDate:pa,durationDays:qi,daysRemaining:Sd,totalDays:dn,timeElapsedPercentage:ni,accountDetails:Ot.accountDetails||{email:"No disponible",password:"No disponible",profile:"N/A",pin:""},balance:parseFloat(Ot.price)||0}});N(ht);const Pt=ht.filter(is=>is.status==="completed"&&is.accountDetails).map(is=>({...is.accountDetails,productName:is.productName,saleDate:is.saleDate,orderId:is.id}));O(Pt),W(!1)},Je=>{console.error("Error fetching sales:",Je),L("Error al cargar ventas"),W(!1)}),Be=setInterval(()=>{N(Je=>Je.map(ht=>{const Pt=new Date,is=new Date(ht.endDate).getTime()-new Date(ht.startDate).getTime(),Ot=Pt.getTime()-new Date(ht.startDate).getTime(),ma=new Date(ht.endDate).getTime()-Pt.getTime(),Os=Math.max(1,Math.ceil(is/(1e3*60*60*24))),ha=Math.max(0,Math.ceil(ma/(1e3*60*60*24))),or=Math.ceil(Ot/(1e3*60*60*24)),ai=Os>0?Math.min(100,or/Os*100):100;return{...ht,daysRemaining:ha,totalDays:Os,timeElapsedPercentage:ai}}))},6e4);return()=>{Ce(),clearInterval(Be)}},[d]),v.useEffect(()=>{if(!i)return;const re=xe(Y(I,"withdrawals"),je("provider","==",i),w0("createdAt","desc")),Ce=we(re,Be=>{const Je=Be.docs.map(ht=>{const Pt=ht.data();return{id:ht.id,...Pt,amount:parseFloat(Pt.amount)||0,createdAt:Pt.createdAt||new Date,processedAt:Pt.processedAt||null}});be(Je),W(!1)},Be=>{console.error("Error fetching withdrawals:",Be)});return()=>Ce()},[i]),v.useEffect(()=>{if(!n)return;const re=xe(Y(I,"withdrawals"),je("status","==","pending"),w0("createdAt","desc")),Ce=we(re,Be=>{const Je=Be.docs.map(ht=>{const Pt=ht.data();return{id:ht.id,...Pt,amount:parseFloat(Pt.amount)||0,createdAt:Pt.createdAt||new Date}});T(Je)},Be=>{console.error("Error fetching pending withdrawals:",Be),L("Error al cargar solicitudes de retiro pendientes")});return()=>Ce()},[n]),v.useEffect(()=>{if(!i)return;const re=B(I,"providerBalances",i),Ce=we(re,Be=>{Be.exists()?ie(Be.data().balance||0):(Wr(re,{balance:0,provider:i,updatedAt:ye()}),ie(0)),W(!1)},Be=>{console.error("Error fetching provider balance:",Be),L("Error al cargar el saldo del proveedor"),W(!1)});return()=>Ce()},[i]);const de=async()=>{try{await Fc(V),Z("/login")}catch(re){console.error("Error al cerrar sesión:",re),ee("Error","Error al cerrar sesión")}},ke=re=>{const{name:Ce,value:Be,type:Je,checked:ht}=re.target;H(Pt=>({...Pt,[Ce]:Je==="checkbox"?ht:Be}))},Se=re=>{const{name:Ce,value:Be}=re.target;De(Je=>({...Je,[Ce]:Be}))},oe=(re,Ce=!1)=>{const Be=re.target.files[0];if(Be){if(Be.size>10485760){Ce?te("La imagen no debe exceder los 10MB"):L("La imagen no debe exceder los 10MB");return}const ht=new FileReader;ht.onloadend=()=>{Ce?R(Pt=>({...Pt,image:ht.result})):H(Pt=>({...Pt,image:ht.result}))},ht.readAsDataURL(Be)}},ue=re=>{const Ce=parseInt(re.target.value)||1,Be=K.accounts||[];if(Ce>Be.length){const Je=[...Be];for(;Je.length<Ce;)Je.push({email:"",password:"",profile:"",pin:""});H({...K,stock:Ce,accounts:Je})}else if(Ce<Be.length){const Je=Be.slice(0,Math.max(Ce,1));H({...K,stock:Ce,accounts:Je})}else H({...K,stock:Ce})},Ie=re=>{const Ce=parseInt(re.target.value)||1;let Je=[...G.accounts||[]];if(Ce>Je.length)for(;Je.length<Ce;)Je.push({email:"",password:"",profile:"",pin:""});else Ce<Je.length&&(Je=Je.slice(0,Math.max(Ce,1)));R({...G,stock:Ce,accounts:Je})},ve=(re,Ce,Be)=>{const Je=[...K.accounts];Je[re]={...Je[re],[Ce]:Be},H({...K,accounts:Je})},Re=(re,Ce,Be)=>{R(Je=>({...Je,accounts:Je.accounts.map((ht,Pt)=>Pt===re?{...ht,[Ce]:Be}:ht)}))},Oe=re=>{const{name:Ce,value:Be}=re.target;x(Je=>({...Je,accountDetails:{...Je.accountDetails,[Ce]:Be}}))},Jt=async()=>{if(L(""),!K.name||!K.price){ee("Error","Por favor complete todos los campos obligatorios");return}if(K.renewal&&!K.renewalPrice){ee("Error","Por favor ingrese el precio de renovación");return}if(K.status==="En stock"&&K.accounts.some(Ce=>!Ce.email||!Ce.password)){ee("Error","Por favor complete todos los campos de las cuentas");return}try{const re={...K,provider:i,providerId:d,providerPhone:K.status==="En stock"?K.providerPhone||"":K.providerPhone||"No especificado",createdAt:ye(),availableAccounts:K.status==="En stock"?K.accounts.length:0},Ce=await Ua(Y(I,"products"),re);if(K.status==="En stock"){const Be=Y(I,`products/${Ce.id}/accounts`);for(const Je of K.accounts)await Ua(Be,{email:Je.email,password:Je.password,profile:Je.profile||"",pin:Je.pin||"",status:"available"})}H({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:[{email:"",password:"",profile:"",pin:""}]}),a("inventario"),ee("Éxito","Producto subido exitosamente!")}catch(re){console.error("Error al subir el producto:",re),ee("Error",`Error al subir el producto: ${re.message}`)}},Ls=async re=>{te("");const Ce=xe(Y(I,"sales"),je("providerId","==",d),je("productName","==",re.name)),Je=(await getDocs(Ce)).docs.filter(Pt=>{var is;return Pt.data().status==="completed"&&((is=Pt.data().accountDetails)==null?void 0:is.email)}).map(Pt=>Pt.data().accountDetails.email),ht=(re.accounts||[]).filter(Pt=>!Je.includes(Pt.email));R({id:re.id,name:re.name||"",image:re.image||"",category:re.category||"Netflix",accountType:re.accountType||"Premium",status:re.status||"En stock",stock:ht.length||1,price:re.price||"",renewal:re.renewal||!1,renewalPrice:re.renewalPrice||"",duration:re.duration||"",providerPhone:re.providerPhone||"",details:re.details||"",terms:re.terms||"",providerId:re.providerId||d,accounts:re.status==="En stock"?ht.length>0?ht:Array(Math.max(re.stock||1,1)).fill({email:"",password:"",profile:"",pin:""}):[]}),q(!0)},wt=async()=>{var re;if(te(""),!G.name||!G.price){te("Por favor complete todos los campos obligatorios");return}if(G.renewal&&!G.renewalPrice){te("Por favor ingrese el precio de renovación");return}if(G.status==="En stock"&&G.accounts.some(Be=>!Be.email||!Be.password)){te("Por favor complete todos los campos de las.accounts");return}try{const Ce=B(I,"products",G.id);if(await Wr(Ce,{...G,providerId:G.providerId||d,availableAccounts:G.status==="En stock"&&((re=G.accounts)==null?void 0:re.length)||0},{merge:!0}),G.status==="En stock"){const Be=Y(I,`products/${G.id}/accounts`),Je=await getDocs(Be);for(const ht of Je.docs)await Lu(ht.ref);for(const ht of G.accounts)await Ua(Be,{email:ht.email,password:ht.password,profile:ht.profile||"",pin:ht.pin||"",status:"available"})}q(!1),ee("Éxito","Producto actualizado exitosamente!")}catch(Ce){console.error("Error al actualizar el producto:",Ce),te("Error al actualizar el producto")}},Nt=async re=>{try{await Lu(B(I,"products",re)),ee("Éxito","Producto eliminado exitosamente!")}catch(Ce){console.error("Error al eliminar el producto:",Ce),ee("Error","Error al eliminar el producto")}},rs=async re=>{try{await Lu(B(I,"sales",re)),ee("Éxito","Pedido eliminado exitosamente!")}catch(Ce){console.error("Error al eliminar el pedido:",Ce),ee("Error","Error al eliminar el pedido")}},as=async()=>{try{const re=V.currentUser;if(re){const Ce=B(I,"users",re.uid);await Wr(Ce,{preferences:Le.preferences,...Le.password&&{password:Le.password}},{merge:!0}),ee("Éxito","Configuración actualizada correctamente!")}}catch(re){console.error("Error al actualizar la configuración:",re),ee("Error","Error al actualizar la configuración")}},Es=async()=>{if(!fe||parseFloat(fe)<=0){ee("Error","Ingrese un monto válido");return}if(parseFloat(fe)>ae){ee("Error","No tienes suficientes fondos disponibles");return}if(!He){ee("Error","Ingrese los datos de su cuenta");return}try{await Ua(Y(I,"withdrawals"),{provider:i,providerEmail:o,amount:parseFloat(fe),method:Me,account:He,status:"pending",createdAt:ye()}),ze(""),Ge(""),ee("Éxito","Solicitud de retiro enviada correctamente")}catch(re){console.error("Error al solicitar retiro:",re),ee("Error","Error al solicitar retiro")}},Ts=async(re,Ce)=>{try{const Be=B(I,"withdrawals",re),Je=await et(Be);if(!Je.exists())throw new Error("Solicitud de retiro no encontrada");const ht=Je.data(),Pt=ht.provider,is=parseFloat(ht.amount);if(Ce==="approved"){const Ot=B(I,"providerBalances",Pt),ma=await et(Ot);let Os=0;if(ma.exists()&&(Os=ma.data().balance||0),is>Os){ee("Error","El proveedor no tiene suficientes fondos para aprobar este retiro");return}await Wr(Ot,{balance:Os-is,provider:Pt,updatedAt:ye()},{merge:!0})}await os(Be,{status:Ce,processedAt:ye(),processedBy:o}),ee("Éxito",Ce==="approved"?"Retiro aprobado y saldo actualizado correctamente":"Retiro rechazado")}catch(Be){console.error("Error al procesar retiro:",Be),ee("Error","Error al procesar retiro: "+Be.message)}},nr=re=>{S(""),x({...re,accountDetails:{email:re.accountDetails.email||"",password:re.accountDetails.password||"",profile:re.accountDetails.profile||"",pin:re.accountDetails.pin||""}}),D(!0)},ys=async()=>{if(S(""),!P.accountDetails.email||!P.accountDetails.password){S("Por favor complete todos los campos obligatorios de la cuenta");return}try{const re=B(I,"sales",P.id);await os(re,{accountDetails:P.accountDetails,updatedAt:ye()}),D(!1),ee("Éxito","Detalles de la cuenta actualizados exitosamente!")}catch(re){console.error("Error al actualizar los detalles de la cuenta:",re),S("Error al actualizar los detalles de la cuenta")}},Or=async re=>{try{const Ce=B(I,"sales",re);await os(Ce,{status:"completed",updatedAt:ye()}),ee("Éxito","Pedido activado exitosamente!")}catch(Ce){console.error("Error al activar el pedido:",Ce),ee("Error","Error al activar el pedido")}},Is=F?0:g.reduce((re,Ce)=>re+(Ce.amount||0),0),Vr=F?0:he.reduce((re,Ce)=>re+(Ce.status==="approved"?Ce.amount:0),0),pr=(()=>F?0:ae)(),Zt=k.reduce((re,Ce)=>re+(parseInt(Ce.stock)||0),0),Lt=()=>{if(_)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(z)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Xe,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:z}),e.jsx("button",{onClick:()=>L(""),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(r){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(pu,{className:"mr-2"})," Inventario"]}),e.jsx("p",{className:"text-3xl font-bold text-white",children:k.length}),e.jsx("p",{className:"text-gray-400",children:"Productos registrados"}),e.jsxs("p",{className:"text-gray-400",children:["Stock total: ",Zt]}),e.jsx("button",{onClick:()=>a("inventario"),className:"text-cyan-400 hover:underline text-sm mt-2",children:"Ver inventario"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(As,{className:"mr-2"})," Ganancias"]}),F?e.jsx("div",{className:"animate-pulse text-gray-400",children:"Cargando..."}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",Is.toFixed(2)]}),e.jsxs("p",{className:"text-gray-400",children:[g.length," ventas realizadas"]}),e.jsxs("p",{className:"text-gray-400",children:["Disponible: S/ ",pr.toFixed(2)]}),e.jsx("button",{onClick:()=>a("retiros"),className:"text-cyan-400 hover:underline text-sm mt-2",children:"Retirar fondos"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," Mi Cuenta"]}),e.jsx("p",{className:"text-lg font-medium text-white",children:i}),e.jsx("p",{className:"text-sm text-gray-400 truncate",children:o}),e.jsx("p",{className:"text-xs mt-2 bg-cyan-900 text-cyan-400 py-1 px-2 rounded-full inline-block",children:n?"Administrador":"Proveedor"}),e.jsx("button",{onClick:()=>a("configuracion"),className:"text-cyan-400 hover:underline text-sm mt-2",children:"Editar perfil"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(tt,{className:"mr-2"})," Pedidos recientes"]}),g.length===0?e.jsx("p",{className:"text-gray-400 py-2 text-center",children:"No hay pedidos recientes."}):g.slice(0,3).map((re,Ce)=>e.jsx("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"w-2/3",children:[e.jsx("p",{className:"font-medium text-white truncate",children:re.productName}),e.jsxs("p",{className:"text-sm text-gray-400 truncate",children:["Comprador: ",re.buyer]})]}),e.jsxs("div",{className:"text-right w-1/3",children:[e.jsxs("p",{className:"font-medium text-white",children:["S/ ",(re.amount||0).toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-400",children:ne(re.saleDate)})]})]})},Ce)),g.length>3&&e.jsx("button",{onClick:()=>a("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]})]});case"inventario":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white flex items-center",children:[e.jsx(pu,{className:"mr-2"})," Inventario"]}),e.jsxs("button",{onClick:()=>a("subirProducto"),className:"px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl flex items-center w-full md:w-auto justify-center transition-all duration-300",children:[e.jsx(zw,{className:"mr-2"})," Nuevo Producto"]})]}),k.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Precio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:k.map(re=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[re.image&&e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:re.image,alt:re.name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate max-w-xs",children:re.name}),e.jsx("div",{className:"text-xs text-gray-400",children:J(re.category)})]})]})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:["S/ ",(parseFloat(re.price)||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:re.stock||0}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${re.status==="En stock"?"bg-green-900/80 text-green-400":re.status==="A pedido"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:re.status})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>Ls(re),className:"text-cyan-400 hover:text-cyan-500 mr-3",title:"Editar",children:e.jsx(Vw,{})}),e.jsx("button",{onClick:()=>Nt(re.id),className:"text-red-400 hover:text-red-500",title:"Eliminar",children:e.jsx(Bw,{})})]})]},re.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(pu,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes productos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Agrega tu primer producto para comenzar"}),e.jsxs("button",{onClick:()=>a("subirProducto"),className:"mt-4 px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl flex items-center mx-auto transition-all duration-300",children:[e.jsx(zw,{className:"mr-2"})," Agregar Producto"]})]})]});case"cuentas":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(sp,{className:"mr-2"})," Cuentas Vendidas"]}),y.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Perfil"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha de Venta"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:y.map((re,Ce)=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:re.productName}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:re.email}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:re.profile||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:ne(re.saleDate)})]},Ce))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(sp,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay cuentas vendidas"}),e.jsx("p",{className:"text-gray-400",children:"Las cuentas vendidas aparecerán aquí"})]})]});case"subirProducto":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-4xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Subir Nuevo Producto"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Imagen del producto"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600/50 border-dashed rounded-xl bg-gray-700/50 backdrop-blur-sm",children:K.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:K.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>H({...K,image:""}),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(yt,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-gray-800/50 rounded-xl font-medium text-cyan-400 hover:text-cyan-500 focus-within:outline-none",children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:re=>oe(re),accept:"image/*"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs("div",{className:"col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:K.name,onChange:ke,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Categoría*"}),e.jsxs("select",{name:"category",value:K.category,onChange:ke,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Tipo de cuenta*"}),e.jsxs("select",{name:"accountType",value:K.accountType,onChange:ke,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Estado*"}),e.jsxs("select",{name:"status",value:K.status,onChange:ke,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"}),e.jsx("option",{value:"Agotado",children:"Agotado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:K.status==="Agotado"?0:K.stock,onChange:ue,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"0",required:!0,disabled:K.status==="Agotado"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:K.price,onChange:ke,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"renewal",checked:K.renewal,onChange:ke,className:"h-4 w-4 text-cyan-400 focus:ring-cyan-400 border-gray-600/50 rounded"}),e.jsx("label",{className:"ml-2 text-gray-300",children:"¿Tiene renovación?"})]})]}),K.renewal&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio de renovación (S/)*"}),e.jsx("input",{type:"number",name:"renewalPrice",value:K.renewalPrice,onChange:ke,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:K.duration,onChange:ke,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Teléfono de contacto ",K.status==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:K.providerPhone,onChange:ke,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: +51 987654321",required:K.status==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:K.details,onChange:ke,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:K.terms,onChange:ke,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Especifica los términos y condiciones de uso"})]}),K.status==="En stock"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Cuentas asociadas*"}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:K.accounts.map((re,Ce)=>e.jsxs("div",{className:"border border-gray-600/50 rounded-xl p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("h4",{className:"text-sm font-medium text-white mb-3",children:["Cuenta ",Ce+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:re.email,onChange:Be=>ve(Ce,"email",Be.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Contraseña*"}),e.jsx("input",{type:"text",value:re.password,onChange:Be=>ve(Ce,"password",Be.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:re.profile,onChange:Be=>ve(Ce,"profile",Be.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"PIN (opcional)"}),e.jsx("input",{type:"text",value:re.pin,onChange:Be=>ve(Ce,"pin",Be.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: 1234"})]})]})]},Ce))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>a("inventario"),className:"px-4 py-2 bg-gray-700/50 text-gray-300 rounded-xl hover:bg-gray-600/50 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:Jt,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Subir Producto"})]})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(As,{className:"mr-2"})," Ganancias"]}),e.jsx("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 mb-6 border border-gray-600/50 shadow-lg",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-1",children:"Ganancias totales"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[g.length," ventas realizadas"]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Retirado: S/ ",Vr.toFixed(2)]}),F?e.jsx("p",{className:"text-sm text-gray-400",children:"Disponible: Cargando..."}):e.jsxs("p",{className:"text-sm text-gray-400",children:["Disponible: S/ ",(ae||0).toFixed(2)]})]}),e.jsxs("div",{className:"text-3xl font-bold text-white mt-2 md:mt-0",children:["S/ ",Is.toFixed(2)]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Categoría"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Comprador"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contacto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:g.map((re,Ce)=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:re.productName}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:J(re.category)}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-white",children:re.buyer}),e.jsx("div",{className:"text-xs text-gray-400",children:re.buyerEmail})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:re.buyerPhone}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:ne(re.saleDate)}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:["S/ ",(re.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/80 text-green-400",children:"Completado"})})]},Ce))})]})}),g.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(As,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay ventas registradas"}),e.jsx("p",{className:"text-gray-400",children:"Tus ventas aparecerán aquí."})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:se,onChange:re=>X(re.target.value)}),e.jsx(at,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),g.length>0?e.jsx("div",{className:"space-y-6",children:g.filter(re=>(re.productName||"").toLowerCase().includes(se.toLowerCase())||(re.category||"").toLowerCase().includes(se.toLowerCase())).map(re=>{const Ce=re.status==="pending",Be=re.status==="refunded",Je=re.daysRemaining||0,ht=re.timeElapsedPercentage||0;let Pt="bg-green-400";ht>70&&ht<=90?Pt="bg-yellow-400":ht>90&&(Pt="bg-red-400");const is=Be?e.jsx(Xe,{className:"text-red-400"}):Ce?e.jsx(zt,{className:"text-yellow-400"}):e.jsx(Kc,{className:"text-green-400"}),Ot=re.buyerPhone?re.buyerPhone.replace(/^\+/,"").replace(/\D/g,""):null,ma=encodeURIComponent(`Hola ${re.buyer||"Cliente"}, 😊

Soy el proveedor de tu suscripción ${re.productName||"Sin nombre"} (N° Pedido: ${re.id||"No especificado"}). ¿En qué puedo ayudarte hoy? Por favor, indícame tu consulta o problema.

Atentamente, BlackStreaming`),Os=encodeURIComponent(`Hola ${re.buyer||"Cliente"}, 😊

Te informamos que tu suscripción ${re.productName||"Sin nombre"} (N° Pedido: ${re.id||"No especificado"}) vencerá en ${Je} día${Je===1?"":"s"}. Te recomendamos renovarla a tiempo.

Detalles:
- Fecha de vencimiento: ${ne(re.endDate)}
- Precio: S/ ${(re.amount||0).toFixed(2)}

Si necesitas ayuda, contáctanos. ¡Gracias por tu preferencia!
Atentamente, BlackStreaming`);return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[is,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:re.productName}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Categoría: ",J(re.category)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",(re.amount||0).toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${Pt.replace("bg-","text-")}`,children:Ce?"Pendiente de activación":`${Je} día${Je===1?"":"s"} restante${Je===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${Pt}`,style:{width:`${Math.min(ht,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[ht.toFixed(0),"% completado"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsx("h5",{className:"text-sm font-medium text-cyan-400 mb-3",children:"Información del Comprador"}),e.jsxs("p",{className:"text-gray-300 text-sm",children:["Comprador: ",re.buyer]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Teléfono: ",re.buyerPhone]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsx("h5",{className:"text-sm font-medium text-cyan-400 mb-3",children:"Detalles de la Cuenta"}),re.accountDetails?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-gray-300",children:["Email: ",re.accountDetails.email]}),e.jsxs("p",{className:"text-gray-400",children:["Contraseña: ",re.accountDetails.password]}),e.jsxs("p",{className:"text-gray-400",children:["Perfil: ",re.accountDetails.profile||"N/A"]}),e.jsxs("p",{className:"text-gray-400",children:["PIN: ",re.accountDetails.pin||"N/A"]})]}):e.jsx("p",{className:"text-gray-400",children:"No disponible"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4",children:[e.jsxs("button",{onClick:()=>nr(re),className:"flex-1 py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Editar cuenta",children:[e.jsx(Vw,{size:18})," Editar Cuenta"]}),re.status==="pending"&&e.jsxs("button",{onClick:()=>Or(re.id),className:"flex-1 py-3 px-4 bg-green-600 hover:bg-green-700 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Activar pedido",children:[e.jsx(Kc,{size:18})," Activar Pedido"]}),Ot&&e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:`https://wa.me/${Ot}?text=${ma}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-3 px-4 bg-green-600 hover:bg-green-700 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Contactar cliente",children:[e.jsx(aa,{size:18})," Contactar"]}),!Be&&Je<=7&&e.jsxs("a",{href:`https://wa.me/${Ot}?text=${Os}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-3 px-4 bg-yellow-600 hover:bg-yellow-700 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Notificar vencimiento",children:[e.jsx(Xo,{size:18})," Notificar"]})]}),e.jsxs("button",{onClick:()=>rs(re.id),className:"flex-1 py-3 px-4 bg-red-600 hover:bg-red-700 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Eliminar pedido",children:[e.jsx(Bw,{size:18})," Eliminar"]})]})]})]},re.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tt,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Tus pedidos aparecerán aquí"})]})]});case"retiros":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-600/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(Ow,{className:"mr-2"})," Retiros"]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 mb-6 border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-4",children:"Solicitar Retiro"}),F?e.jsx("p",{className:"text-gray-400",children:"Cargando saldo..."}):e.jsxs("p",{className:"text-gray-300 mb-4",children:["Saldo disponible: S/ ",pr.toFixed(2)]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a retirar (S/)*"}),e.jsx("input",{type:"number",value:fe,onChange:re=>ze(re.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 50.00",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Método de pago*"}),e.jsxs("select",{value:Me,onChange:re=>Pe(re.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Yape",children:"Yape"}),e.jsx("option",{value:"BCP",children:"BCP"}),e.jsx("option",{value:"Interbank",children:"Interbank"}),e.jsx("option",{value:"BBVA",children:"BBVA"}),e.jsx("option",{value:"Paypal",children:"Paypal"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Cuenta o número*"}),e.jsx("input",{type:"text",value:He,onChange:re=>Ge(re.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: Número de cuenta o teléfono",required:!0})]}),e.jsx("button",{onClick:Es,className:"w-full px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Solicitar Retiro"})]})]}),n&&e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 mb-6 border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-4",children:"Solicitudes Pendientes"}),p.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Proveedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Método"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Cuenta"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:p.map(re=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:re.provider}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:["S/ ",re.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:re.method}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:re.account}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:ne(re.createdAt)}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>Ts(re.id,"approved"),className:"text-green-400 hover:text-green-500 mr-3",title:"Aprobar",children:e.jsx(qu,{})}),e.jsx("button",{onClick:()=>Ts(re.id,"rejected"),className:"text-red-400 hover:text-red-500",title:"Rechazar",children:e.jsx(yt,{})})]})]},re.id))})]})}):e.jsx("p",{className:"text-gray-400",children:"No hay solicitudes de retiro pendientes."})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-4",children:"Historial de Retiros"}),he.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Método"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Cuenta"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:he.map(re=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:["S/ ",re.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:re.method}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:re.account}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:ne(re.createdAt)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${re.status==="approved"?"bg-green-900/80 text-green-400":re.status==="rejected"?"bg-red-900/80 text-red-400":"bg-yellow-900/80 text-yellow-400"}`,children:re.status==="approved"?"Aprobado":re.status==="rejected"?"Rechazado":"Pendiente"})})]},re.id))})]})}):e.jsx("p",{className:"text-gray-400",children:"No hay historial de retiros."})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-4xl mx-auto border border-gray-600/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(Yc,{className:"mr-2"})," Configuración"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:Le.email,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",value:Le.password,onChange:Se,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Dejar en blanco para no cambiar"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Preferencias"}),e.jsx("textarea",{name:"preferences",value:Le.preferences,onChange:Se,rows:"4",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Especifica tus preferencias o notas"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:as,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Guardar Cambios"})})]})]});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-gray-800/80 backdrop-blur-sm transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out border-r border-gray-700/50 md:border-none`,children:[e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:i})]}),e.jsxs("nav",{className:"mt-4",children:[e.jsxs("button",{onClick:()=>{a("inicio"),t(!1)},className:`w-full flex items-center px-6 py-3 text-left ${r==="inicio"?"bg-gray-700/50 text-cyan-400":"text-gray-300 hover:bg-gray-700/50"} transition-all duration-300`,children:[e.jsx(Qm,{className:"mr-3"})," Inicio"]}),e.jsxs("button",{onClick:()=>{a("inventario"),t(!1)},className:`w-full flex items-center px-6 py-3 text-left ${r==="inventario"?"bg-gray-700/50 text-cyan-400":"text-gray-300 hover:bg-gray-700/50"} transition-all duration-300`,children:[e.jsx(pu,{className:"mr-3"})," Inventario"]}),e.jsxs("button",{onClick:()=>{a("cuentas"),t(!1)},className:`w-full flex items-center px-6 py-3 text-left ${r==="cuentas"?"bg-gray-700/50 text-cyan-400":"text-gray-300 hover:bg-gray-700/50"} transition-all duration-300`,children:[e.jsx(sp,{className:"mr-3"})," Cuentas Vendidas"]}),e.jsxs("button",{onClick:()=>{a("subirProducto"),t(!1)},className:`w-full flex items-center px-6 py-3 text-left ${r==="subirProducto"?"bg-gray-700/50 text-cyan-400":"text-gray-300 hover:bg-gray-700/50"} transition-all duration-300`,children:[e.jsx(uF,{className:"mr-3"})," Subir Producto"]}),e.jsxs("button",{onClick:()=>{a("ganancias"),t(!1)},className:`w-full flex items-center px-6 py-3 text-left ${r==="ganancias"?"bg-gray-700/50 text-cyan-400":"text-gray-300 hover:bg-gray-700/50"} transition-all duration-300`,children:[e.jsx(As,{className:"mr-3"})," Ganancias"]}),e.jsxs("button",{onClick:()=>{a("pedidos"),t(!1)},className:`w-full flex items-center px-6 py-3 text-left ${r==="pedidos"?"bg-gray-700/50 text-cyan-400":"text-gray-300 hover:bg-gray-700/50"} transition-all duration-300`,children:[e.jsx(tt,{className:"mr-3"})," Pedidos"]}),e.jsxs("button",{onClick:()=>{a("retiros"),t(!1)},className:`w-full flex items-center px-6 py-3 text-left ${r==="retiros"?"bg-gray-700/50 text-cyan-400":"text-gray-300 hover:bg-gray-700/50"} transition-all duration-300`,children:[e.jsx(Ow,{className:"mr-3"})," Retiros"]}),e.jsxs("button",{onClick:()=>{a("configuracion"),t(!1)},className:`w-full flex items-center px-6 py-3 text-left ${r==="configuracion"?"bg-gray-700/50 text-cyan-400":"text-gray-300 hover:bg-gray-700/50"} transition-all duration-300`,children:[e.jsx(Yc,{className:"mr-3"})," Configuración"]}),e.jsxs("button",{onClick:de,className:"w-full flex items-center px-6 py-3 text-left text-gray-300 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx(Et,{className:"mr-3"})," Cerrar Sesión"]})]})]}),e.jsxs("div",{className:"flex-1 p-4 md:p-8 md:ml-64",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 md:hidden",children:[e.jsx("h1",{className:"text-2xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!s),className:"text-gray-300 hover:text-cyan-400 focus:outline-none",children:e.jsx(Bt,{size:24})})]}),Lt()]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-4xl border border-gray-800/50 overflow-y-auto max-h-[90vh]",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Producto"}),e.jsx("button",{onClick:()=>q(!1),className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),U&&e.jsx("div",{className:"bg-red-900/50 text-red-400 p-3 rounded-xl mb-4",children:U}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Imagen del producto"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600/50 border-dashed rounded-xl bg-gray-700/50 backdrop-blur-sm",children:G.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:G.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>R({...G,image:""}),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(yt,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"file-upload-edit",className:"relative cursor-pointer bg-gray-800/50 rounded-xl font-medium text-cyan-400 hover:text-cyan-500 focus-within:outline-none",children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"file-upload-edit",name:"file-upload-edit",type:"file",className:"sr-only",onChange:re=>oe(re,!0),accept:"image/*"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs("div",{className:"col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:G.name,onChange:re=>R({...G,name:re.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Categoría*"}),e.jsxs("select",{name:"category",value:G.category,onChange:re=>R({...G,category:re.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Tipo de cuenta*"}),e.jsxs("select",{name:"accountType",value:G.accountType,onChange:re=>R({...G,accountType:re.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Estado*"}),e.jsxs("select",{name:"status",value:G.status,onChange:re=>R({...G,status:re.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"}),e.jsx("option",{value:"Agotado",children:"Agotado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:G.status==="Agotado"?0:G.stock,onChange:Ie,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"0",required:!0,disabled:G.status==="Agotado"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:G.price,onChange:re=>R({...G,price:re.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"renewal",checked:G.renewal,onChange:re=>R({...G,renewal:re.target.checked}),className:"h-4 w-4 text-cyan-400 focus:ring-cyan-400 border-gray-600/50 rounded"}),e.jsx("label",{className:"ml-2 text-gray-300",children:"¿Tiene renovación?"})]})]}),G.renewal&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio de renovación (S/)*"}),e.jsx("input",{type:"number",name:"renewalPrice",value:G.renewalPrice,onChange:re=>R({...G,renewalPrice:re.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:G.duration,onChange:re=>R({...G,duration:re.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Teléfono de contacto ",G.status==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:G.providerPhone,onChange:re=>R({...G,providerPhone:re.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: +51 987654321",required:G.status==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:G.details,onChange:re=>R({...G,details:re.target.value}),rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:G.terms,onChange:re=>R({...G,terms:re.target.value}),rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Especifica los términos y condiciones de uso"})]}),G.status==="En stock"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Cuentas asociadas*"}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:G.accounts.map((re,Ce)=>e.jsxs("div",{className:"border border-gray-600/50 rounded-xl p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("h4",{className:"text-sm font-medium text-white mb-3",children:["Cuenta ",Ce+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:re.email,onChange:Be=>Re(Ce,"email",Be.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Contraseña*"}),e.jsx("input",{type:"text",value:re.password,onChange:Be=>Re(Ce,"password",Be.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:re.profile,onChange:Be=>Re(Ce,"profile",Be.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"PIN (opcional)"}),e.jsx("input",{type:"text",value:re.pin,onChange:Be=>Re(Ce,"pin",Be.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: 1234"})]})]})]},Ce))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-gray-300 rounded-xl hover:bg-gray-600/50 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:wt,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Actualizar Producto"})]})]})]})})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Detalles de la Cuenta"}),e.jsx("button",{onClick:()=>D(!1),className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),m&&e.jsx("div",{className:"bg-red-900/50 text-red-400 p-3 rounded-xl mb-4",children:m}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico*"}),e.jsx("input",{type:"email",name:"email",value:P.accountDetails.email,onChange:Oe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Contraseña*"}),e.jsx("input",{type:"text",name:"password",value:P.accountDetails.password,onChange:Oe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",name:"profile",value:P.accountDetails.profile,onChange:Oe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"PIN (opcional)"}),e.jsx("input",{type:"text",name:"pin",value:P.accountDetails.pin,onChange:Oe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",placeholder:"Ej: 1234"})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 bg-gray-700/50 text-gray-300 rounded-xl hover:bg-gray-600/50 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:ys,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Actualizar"})]})]})]})})}),e.jsx(SF,{isOpen:$.isOpen,title:$.title,message:$.message,onClose:ce})]})},EF=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,TF=({isOpen:s,user:t,onClose:r,onSave:a})=>{const[i,l]=v.useState((t==null?void 0:t.balance)||0),[o,c]=v.useState(""),d=h=>{if(h.preventDefault(),c(""),isNaN(i)||i<0){c("Por favor, ingrese un saldo válido (número no negativo).");return}a(t.id,parseFloat(i))};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:["Editar Saldo de ",t.username]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nuevo Saldo (S/)"}),e.jsx("input",{type:"number",value:i,onChange:h=>l(h.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"0",step:"0.01",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},_F=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState("inicio"),[i,l]=v.useState(""),[o,c]=v.useState(""),[d,h]=v.useState(0),[g,N]=v.useState([]),[k,E]=v.useState([]),[y,O]=v.useState([]),[_,A]=v.useState([]),[z,L]=v.useState([]),[K,H]=v.useState([]),[G,R]=v.useState([]),[u,q]=v.useState([]),[U,te]=v.useState(0),[se,X]=v.useState({day:0,week:0,month:0,total:0}),[$,pe]=v.useState(!0),[Le,De]=v.useState({}),[he,be]=v.useState(null),[fe,ze]=v.useState(""),[Me,Pe]=v.useState({isOpen:!1,message:"",title:""}),[He,Ge]=v.useState({isOpen:!1,user:null}),[n,j]=v.useState(!1),[p,T]=v.useState({message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}}),F=St(),W=(oe,ue)=>{Pe({isOpen:!0,title:oe,message:ue})},ae=()=>{Pe({isOpen:!1,message:"",title:""})},ie=oe=>{Ge({isOpen:!0,user:oe})},w=()=>{Ge({isOpen:!1,user:null})},D=async(oe,ue)=>{try{De(ve=>({...ve,[`balance_${oe}`]:!0}));const Ie=B(I,"users",oe);await os(Ie,{balance:ue,updatedAt:ye()}),W("Éxito","Saldo actualizado exitosamente"),w()}catch(Ie){console.error("Error al actualizar saldo:",Ie),W("Error",Ie.message||"Error al actualizar el saldo")}finally{De(Ie=>({...Ie,[`balance_${oe}`]:!1}))}},P=async oe=>{oe.preventDefault();try{De(Oe=>({...Oe,notification:!0}));const{message:ue,roles:Ie}=p;if(!ue.trim())throw new Error("El mensaje no puede estar vacío");const ve=Object.keys(Ie).filter(Oe=>Ie[Oe]);if(ve.length===0)throw new Error("Debe seleccionar al menos un rol");const Re=B(I,"notifications","adminMessage");await Wr(Re,{message:ue.trim(),roles:ve,updatedAt:ye()}),T({message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}}),W("Éxito","Notificación enviada exitosamente")}catch(ue){console.error("Error al enviar notificación:",ue),W("Error",ue.message||"Error al enviar la notificación")}finally{De(ue=>({...ue,notification:!1}))}};v.useEffect(()=>{const oe=At(Qe,ue=>{!ue&&!n?F("/login"):ue&&(c(ue.email),x(ue.uid),pe(!1))});return()=>oe()},[F,n]);const x=async oe=>{try{const ue=B(I,"users",oe),Ie=await et(ue);if(Ie.exists()){const ve=Ie.data();l(ve.username||ve.email.split("@")[0])}else be("Usuario no encontrado en la base de datos")}catch(ue){console.error("Error al obtener el nombre de usuario:",ue),be("Error al cargar datos del usuario")}},m=oe=>{const Ie=oe*5,ve=Ie*.25,Re=Ie*.05;X({day:Re,week:ve,month:Ie,total:Ie})};v.useEffect(()=>{(async()=>{try{const wt=await jt(Y(I,"users")),Nt=wt.size,rs=wt.docs.map(Lt=>({id:Lt.id,...Lt.data()}));h(Nt),N(rs.slice(-5)),E(rs),m(Nt);const as=xe(Y(I,"pendingRegistrations"),je("status","==","pending")),Es=await jt(as);O(Es.docs.map(Lt=>({id:Lt.id,...Lt.data()})));const Ts=xe(Y(I,"pendingTopUps"),je("status","==","pendiente")),nr=await jt(Ts);A(nr.docs.map(Lt=>({id:Lt.id,...Lt.data()})));const ys=xe(Y(I,"withdrawals"),je("status","==","pending")),Or=await jt(ys);L(Or.docs.map(Lt=>({id:Lt.id,...Lt.data()})));const Is=await jt(Y(I,"topUpsHistory"));H(Is.docs.map(Lt=>({id:Lt.id,...Lt.data()})));const Vr=await jt(Y(I,"withdrawalsHistory"));R(Vr.docs.map(Lt=>({id:Lt.id,...Lt.data()})));const pr=(await jt(Y(I,"sales"))).docs.map(Lt=>({id:Lt.id,...Lt.data()}));q(pr);const Zt=pr.reduce((Lt,re)=>Lt+(re.price||0),0);te(Zt)}catch(wt){console.error("Error al obtener datos:",wt),be("Error al cargar datos")}})();const ue=we(Y(I,"users"),wt=>{const Nt=wt.size,rs=wt.docs.map(as=>({id:as.id,...as.data()}));h(Nt),N(rs.slice(-5)),E(rs),m(Nt)}),Ie=we(xe(Y(I,"pendingRegistrations"),je("status","==","pending")),wt=>{O(wt.docs.map(Nt=>({id:Nt.id,...Nt.data()})))}),ve=we(xe(Y(I,"pendingTopUps"),je("status","==","pendiente")),wt=>{A(wt.docs.map(Nt=>({id:Nt.id,...Nt.data()})))}),Re=we(xe(Y(I,"withdrawals"),je("status","==","pending")),wt=>{L(wt.docs.map(Nt=>({id:Nt.id,...Nt.data()})))}),Oe=we(Y(I,"topUpsHistory"),wt=>{H(wt.docs.map(Nt=>({id:Nt.id,...Nt.data()})))}),Jt=we(Y(I,"withdrawalsHistory"),wt=>{R(wt.docs.map(Nt=>({id:Nt.id,...Nt.data()})))}),Ls=we(Y(I,"sales"),wt=>{const Nt=wt.docs.map(as=>({id:as.id,...as.data()}));q(Nt);const rs=Nt.reduce((as,Es)=>as+(Es.price||0),0);te(rs)});return()=>{ue(),Ie(),ve(),Re(),Oe(),Jt(),Ls()}},[]);const S=async oe=>{try{De(Re=>({...Re,[oe]:!0}));const ue=B(I,"withdrawals",oe),Ie=z.find(Re=>Re.id===oe);if(!(Ie!=null&&Ie.providerId))throw new Error("Proveedor no encontrado para el retiro");await os(ue,{status:"approved",updatedAt:ye()});const ve=B(I,"users",Ie.providerId);await os(ve,{balance:it(-Ie.amount||0)}),await Wr(B(I,"withdrawalsHistory",oe),{...Ie,status:"approved",updatedAt:ye()}),be(null),W("Éxito","Retiro aprobado exitosamente")}catch(ue){console.error("Error al aprobar retiro:",ue),be(ue.message||"Error al aprobar el retiro"),W("Error",ue.message||"Error al aprobar el retiro")}finally{De(ue=>({...ue,[oe]:!1}))}},Z=async oe=>{try{De(ve=>({...ve,[oe]:!0}));const ue=B(I,"withdrawals",oe);await os(ue,{status:"denied",updatedAt:ye()});const Ie=z.find(ve=>ve.id===oe);await Wr(B(I,"withdrawalsHistory",oe),{...Ie,status:"denied",updatedAt:ye()}),be(null),W("Éxito","Retiro rechazado exitosamente")}catch(ue){console.error("Error al rechazar retiro:",ue),be(ue.message||"Error al rechazar el retiro"),W("Error",ue.message||"Error al rechazar el retiro")}finally{De(ue=>({...ue,[oe]:!1}))}},V=async oe=>{try{De(Re=>({...Re,[oe]:!0}));const ue=B(I,"pendingTopUps",oe),Ie=_.find(Re=>Re.id===oe);if(!(Ie!=null&&Ie.userId))throw new Error("Usuario no encontrado para la recarga");await os(ue,{status:"aprobado",updatedAt:ye()});const ve=B(I,"users",Ie.userId);await os(ve,{balance:it(Ie.amount||0)}),await Wr(B(I,"topUpsHistory",oe),{...Ie,status:"aprobado",updatedAt:ye()}),be(null),W("Éxito","Recarga aprobada exitosamente")}catch(ue){console.error("Error al aprobar recarga:",ue),be(ue.message||"Error al aprobar la recarga"),W("Error",ue.message||"Error al aprobar la recarga")}finally{De(ue=>({...ue,[oe]:!1}))}},ee=async oe=>{try{De(ve=>({...ve,[oe]:!0}));const ue=B(I,"pendingTopUps",oe);await os(ue,{status:"rechazado",updatedAt:ye()});const Ie=_.find(ve=>ve.id===oe);await Wr(B(I,"topUpsHistory",oe),{...Ie,status:"rechazado",updatedAt:ye()}),be(null),W("Éxito","Recarga rechazada exitosamente")}catch(ue){console.error("Error al rechazar recarga:",ue),be(ue.message||"Error al rechazar la recarga"),W("Error",ue.message||"Error al rechazar la recarga")}finally{De(ue=>({...ue,[oe]:!1}))}},ce=async oe=>{try{De(Jt=>({...Jt,[oe]:!0})),j(!0);const ue=B(I,"pendingRegistrations",oe),Ie=y.find(Jt=>Jt.id===oe);if(!Ie)throw new Error("Solicitud no encontrada");if((await KM(Qe,Ie.email)).length>0)throw new Error("El correo ya está registrado");const Oe=(await HM(Qe,Ie.email,Ie.password)).user;await Wr(B(I,"users",Oe.uid),{username:Ie.username,email:Ie.email,phone:Ie.phone||null,role:Ie.role||"usuario",balance:0,referrerCode:Ie.referrerCode||null,createdAt:ye()}),await os(ue,{status:"approved",updatedAt:ye()}),await Fc(Qe),be(null),W("Éxito","Solicitud de registro aprobada exitosamente")}catch(ue){console.error("Error al aceptar solicitud:",ue),be(ue.message||"Error al aceptar la solicitud de registro"),W("Error",ue.message||"Error al aceptar la solicitud de registro")}finally{De(ue=>({...ue,[oe]:!1})),j(!1)}},ne=async oe=>{try{De(Ie=>({...Ie,[oe]:!0}));const ue=B(I,"pendingRegistrations",oe);await os(ue,{status:"denied",updatedAt:ye()}),be(null),W("Éxito","Solicitud de registro rechazada exitosamente")}catch(ue){console.error("Error al rechazar solicitud:",ue),be(ue.message||"Error al rechazar la solicitud de registro"),W("Error",ue.message||"Error al rechazar la solicitud de registro")}finally{De(ue=>({...ue,[oe]:!1}))}},J=async()=>{try{await Fc(Qe),F("/")}catch(oe){console.error("Error al cerrar sesión:",oe),be(oe.message||"Error al cerrar sesión"),W("Error",oe.message||"Error al cerrar sesión")}},ge=async oe=>{oe.preventDefault();try{De(Re=>({...Re,config:!0}));const ue=Qe.currentUser;if(!ue)throw new Error("Usuario no autenticado");const Ie=B(I,"users",ue.uid);await os(Ie,{username:i,updatedAt:ye()});const ve=oe.target.password.value;if(ve){if(ve.length<6)throw new Error("La contraseña debe tener al menos 6 caracteres");await Zg(ue,ve)}be(null),W("Éxito","Cambios guardados exitosamente")}catch(ue){console.error("Error al guardar cambios:",ue),be(ue.message||"Error al guardar cambios"),W("Error",ue.message||"Error al guardar cambios")}finally{De(ue=>({...ue,config:!1}))}},de=oe=>{if(!oe)return"No especificada";try{const ue=oe.toDate?oe.toDate():new Date(oe);return isNaN(ue.getTime())?"Fecha inválida":ue.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},ke=oe=>{if(oe.status==="pending")return"Pendiente";if(!oe.expirationDate)return"Activo";const ue=new Date,Ie=oe.expirationDate.toDate?oe.expirationDate.toDate():new Date(oe.expirationDate);return ue>Ie?"Expirado":"Activo"},Se=()=>{if($)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(he)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Xe,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:he}),e.jsx("button",{onClick:()=>be(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(r){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:i})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(aa,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Ganancias del mes"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",se.month.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"(5 soles por cada usuario)"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Usuarios registrados"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:d}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Total Gananacias: S/ ",se.total.toFixed(2)]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Últimos usuarios"}),g.length>0?g.map(oe=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:oe.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-cyan-900/80 text-cyan-400",children:oe.role||"usuario"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:oe.email})]},oe.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay usuarios registrados"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Solicitudes pendientes"}),y.length>0?y.slice(0,3).map(oe=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:oe.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-900/80 text-purple-400",children:oe.role||"usuario"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:oe.email})]},oe.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay solicitudes pendientes"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Retiros pendientes"}),z.length>0?z.slice(0,3).map(oe=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:oe.provider||"Sin proveedor"}),e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-yellow-900/80 text-yellow-400",children:["S/ ",(oe.amount||0).toFixed(2)]})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Método: ",oe.method||"No especificado"]})]},oe.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay retiros pendientes"})]})]})]});case"notificaciones":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Enviar Notificación"}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Mensaje de la Notificación"}),e.jsx("textarea",{value:p.message,onChange:oe=>T({...p,message:oe.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all resize-y",rows:"5",placeholder:"Escribe el mensaje para los usuarios...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Enviar a los siguientes roles"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["user","affiliate","provider","admin"].map(oe=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:p.roles[oe],onChange:ue=>T({...p,roles:{...p.roles,[oe]:ue.target.checked}}),className:"h-4 w-4 text-cyan-400 focus:ring-cyan-400 border-gray-600 rounded"}),e.jsx("span",{className:"text-gray-300 capitalize",children:oe})]},oe))})]}),e.jsx("button",{type:"submit",disabled:Le.notification,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium transition-all duration-300 disabled:bg-cyan-800",children:Le.notification?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Enviar Notificación"})]})]});case"usuarios":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Solicitudes de registro"}),y.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Rol"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:y.map(oe=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:oe.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:oe.email}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-cyan-900/80 text-cyan-400",children:oe.role||"usuario"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ce(oe.id),disabled:Le[oe.id],className:"p-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 disabled:bg-green-800",title:"Aceptar",children:Le[oe.id]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(qu,{size:16})}),e.jsx("button",{onClick:()=>ne(oe.id),disabled:Le[oe.id],className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-all duration-300 disabled:bg-red-800",title:"Rechazar",children:Le[oe.id]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(yt,{size:16})})]})})]},oe.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(uc,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay solicitudes de registro pendientes"})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Todos los usuarios (",d,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar usuarios...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:fe,onChange:oe=>ze(oe.target.value)}),e.jsx(t0,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),k.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Rol"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Saldo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:k.filter(oe=>(oe.username||"").toLowerCase().includes(fe.toLowerCase())||(oe.email||"").toLowerCase().includes(fe.toLowerCase())).map(oe=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:oe.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:oe.email}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-cyan-900/80 text-cyan-400",children:oe.role||"usuario"})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(oe.balance||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>ie(oe),disabled:Le[`balance_${oe.id}`],className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300 disabled:bg-blue-800",title:"Editar Saldo",children:Le[`balance_${oe.id}`]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(zy,{size:16})})})]},oe.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(uc,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay usuarios registrados"})]})]})]});case"recargas":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargas pendientes"}),_.length>0?e.jsx("div",{className:"space-y-4",children:_.map(oe=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-cyan-900/80 rounded-full flex items-center justify-center text-cyan-400",children:e.jsx(As,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:oe.username||"Sin nombre"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Solicitado: ",de(oe.requestedAt)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-medium text-white",children:["S/ ",(oe.amount||0).toFixed(2)]})})]}),e.jsx("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>V(oe.id),disabled:Le[oe.id],className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-green-800 transition-all duration-300",children:Le[oe.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(qu,{size:18})," Aprobar Recarga"]})}),e.jsx("button",{onClick:()=>ee(oe.id),disabled:Le[oe.id],className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-red-800 transition-all duration-300",children:Le[oe.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(yt,{size:18})," Rechazar Recarga"]})})]})})]},oe.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(As,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay recargas pendientes"}),e.jsx("p",{className:"text-gray-400",children:"Todas las solicitudes han sido procesadas"})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de recargas"}),K.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:K.map(oe=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:oe.username||"Sin nombre"}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(oe.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${oe.status==="aprobado"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:oe.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:de(oe.updatedAt)})]},oe.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(As,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay historial de recargas"})]})]})]});case"retiros":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Solicitudes de retiro"}),z.length>0?e.jsx("div",{className:"space-y-4",children:z.map(oe=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-900/80 rounded-full flex items-center justify-center text-yellow-400",children:e.jsx(As,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:oe.provider||"Sin proveedor"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Email: ",oe.providerEmail||"No disponible"]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Solicitado: ",de(oe.createdAt)]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Método: ",oe.method||"No especificado"]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Cuenta: ",oe.account||"No especificada"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-medium text-white",children:["S/ ",(oe.amount||0).toFixed(2)]})})]}),e.jsx("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>S(oe.id),disabled:Le[oe.id],className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-green-800 transition-all duration-300",children:Le[oe.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(qu,{size:18})," Aprobar Retiro"]})}),e.jsx("button",{onClick:()=>Z(oe.id),disabled:Le[oe.id],className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-red-800 transition-all duration-300",children:Le[oe.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(yt,{size:18})," Rechazar Retiro"]})})]})})]},oe.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(As,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay retiros pendientes"}),e.jsx("p",{className:"text-gray-400",children:"Todas las solicitudes han sido procesadas"})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de retiros"}),G.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Proveedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Método"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:G.map(oe=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:oe.provider||"Sin proveedor"}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(oe.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${oe.status==="approved"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:oe.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:de(oe.updatedAt)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:oe.method||"No especificado"})]},oe.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(As,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay historial de retiros"})]})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Ventas General"}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center mb-6 border border-gray-600/50",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Total Ventas"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",U.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"Suma de todos los pedidos realizados"})]}),e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de Pedidos"}),u.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Nombre del Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Precio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Proveedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario Comprador"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha y Hora de Compra"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Detalles de la Cuenta"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:u.map(oe=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:oe.productName||"Sin nombre"}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(oe.price||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:oe.provider||"Sin proveedor"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:oe.customerName||"Sin usuario"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:de(oe.purchaseDate)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ke(oe)==="Pendiente"?"bg-yellow-900/80 text-yellow-400":ke(oe)==="Activo"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:ke(oe)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:oe.accountDetails?`Email: ${oe.accountDetails.email||"N/A"}, Contraseña: ${oe.accountDetails.password||"N/A"}, Perfil: ${oe.accountDetails.profile||"N/A"}, PIN: ${oe.accountDetails.pin||"No especificado"}`:"N/A"})]},oe.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(tt,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay pedidos registrados"})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Reporte de ganancias"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias hoy"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",se.day.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"(5 soles por usuario)"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias esta semana"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",se.week.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"(25% del total de usuarios)"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias este mes"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",se.month.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"(5 soles por cada usuario)"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Resumen de ganancias"}),e.jsxs("span",{className:"px-3 py-1 bg-cyan-900/80 text-cyan-400 rounded-full text-sm",children:["Total: S/ ",se.total.toFixed(2)]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-600/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Concepto"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Cálculo"})]})}),e.jsxs("tbody",{className:"bg-gray-700/50 divide-y divide-gray-600/50",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-300",children:"Ganancias por usuario"}),e.jsx("td",{className:"px-4 py-3 text-white",children:"S/ 5.00"}),e.jsx("td",{className:"px-4 py-3 text-gray-400",children:"Fijo por cada usuario registrado"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-300",children:"Total usuarios"}),e.jsx("td",{className:"px-4 py-3 text-white",children:d}),e.jsx("td",{className:"px-4 py-3 text-gray-400",children:"Usuarios activos en el sistema"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-300",children:"Ganancias totales"}),e.jsxs("td",{className:"px-4 py-3 text-white",children:["S/ ",se.total.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-gray-400",children:[d," usuarios × S/ 5.00"]})]})]})]})})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:oe=>l(oe.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:o,readOnly:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsx("button",{type:"submit",disabled:Le.config,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-cyan-800",children:Le.config?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:J,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(Et,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Xe,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Bt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(yt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text white",children:i}),e.jsx("p",{className:"text-xs text-gray-400",children:"Administrador"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Qm},{id:"notificaciones",label:"Notificaciones",icon:Xo},{id:"usuarios",label:"Usuarios",icon:uc},{id:"recargas",label:"Recargas",icon:As},{id:"retiros",label:"Retiros",icon:As},{id:"pedidos",label:"Pedidos",icon:tt},{id:"ganancias",label:"Ganancias",icon:Q0},{id:"configuracion",label:"Configuración",icon:Yc}].map(oe=>e.jsxs("button",{onClick:()=>{a(oe.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r===oe.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx(oe.icon,{className:"text-lg"}),e.jsx("span",{children:oe.label})]},oe.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:J,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(Et,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:Se()})}),e.jsx(EF,{isOpen:Me.isOpen,title:Me.title,message:Me.message,onClose:ae}),e.jsx(TF,{isOpen:He.isOpen,user:He.user,onClose:w,onSave:D})]})},DF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Netflix")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,netflix:P.length}))},w=>{E("Error al cargar productos de Netflix"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"netflix_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"netflix"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"netflix"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Netflix`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Netflix...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-red-400 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-red-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-red-400",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-600/30 text-white border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center endangered justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522869635100-9f4c5e86aa37?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Netflix"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus series y películas favoritas con nuestras cuentas premium de Netflix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-red-400 hover:text-red-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,0,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-red-400 bg-red-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-red-400",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-red-400",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-red-400",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-red-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-red-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-red-500 via-red-600 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-red-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-400 bg-gray-700 border-gray-600 rounded focus:ring-red-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-red-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-red-400 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Aceptar"})})]})})]})},AF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-blue-400",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-blue-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Disney")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,disney:P.length}))},w=>{E("Error al cargar productos de Disney"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"disney_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"disney"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"disney"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Disney`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-blue-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Disney+...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-blue-400 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-blue-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-blue-400",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616469829935-3e3dd2f5a4a4?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Disney+"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus películas y series favoritas de Disney, Pixar, Marvel, Star Wars y más con nuestras cuentas premium de Disney+"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-blue-400 hover:text-blue-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-blue-400 bg-blue-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-blue-400",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-blue-400",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-blue-400",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-blue-400 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-blue-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-400 bg-gray-700 border-gray-600 rounded focus:ring-blue-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-blue-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-400 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},RF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-purple-400",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-purple-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Max")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,max:P.length}))},w=>{E("Error al cargar productos de Max"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"max_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"max"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"max"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Max`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-purple-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-purple-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-purple-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-purple-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Max...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-purple-400 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-purple-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-purple-400",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-purple-600/80 hover:bg-purple-700 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-purple-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-purple-500 text-white hover:bg-purple-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-purple-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-purple-600/30 text-white border border-purple-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1598899134739-5b0b7a14ef9d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Max"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de series y películas exclusivas, desde dramas épicos hasta blockbusters, con nuestras cuentas premium de Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-purple-400 hover:text-purple-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(128,0,128,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-purple-400 bg-purple-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-purple-400",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-purple-400",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-purple-400",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-purple-400 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-purple-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-purple-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-purple-500 via-purple-600 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-purple-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-purple-400 bg-gray-700 border-gray-600 rounded focus:ring-purple-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-purple-400 hover:text-purple-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-purple-400 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-purple-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-purple-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-purple-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-purple-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all",children:"Aceptar"})})]})})]})},MF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-green-400",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-green-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Spotify")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,spotify:P.length}))},w=>{E("Error al cargar productos de Spotify"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"spotify_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"spotify"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"spotify"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Spotify`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Spotify...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-green-400 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-green-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-green-400",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1513828583688-c52646db42da?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Spotify"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tu música y podcasts favoritos sin interrupciones con nuestras cuentas premium de Spotify"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-green-400 hover:text-green-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,255,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-400 bg-green-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-green-400",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-green-400",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-green-400",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-green-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-green-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-green-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-400 bg-gray-700 border-gray-600 rounded focus:ring-green-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-green-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-green-400 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},LF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Prime Video")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,primevideo:P.length}))},w=>{E("Error al cargar productos de Prime Video"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"primevideo_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"primevideo"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"primevideo"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Prime Video`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Prime Video...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616531770192-6eaea74c2456?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Prime Video"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de películas, series originales y contenido exclusivo con nuestras cuentas premium de Prime Video"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-blue-500 hover:text-blue-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-blue-500 bg-blue-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-blue-500",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-blue-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-blue-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-blue-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-blue-500 hover:text-blue-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},OF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-red-500",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-red-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Vix")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,vix:P.length}))},w=>{E("Error al cargar productos de Vix"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"vix_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"vix"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"vix"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Vix`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Vix...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-red-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-red-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-600/30 text-white border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-0f1a4a73a3a9?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Vix"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de telenovelas, películas y series en español con nuestras cuentas premium de Vix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-red-500 hover:text-red-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,0,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-red-500 bg-red-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-red-500",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-red-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-red-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-red-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-red-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-red-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-red-500 via-red-600 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-gray-700 border-gray-600 rounded focus:ring-red-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-red-500 hover:text-red-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Aceptar"})})]})})]})},VF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-teal-500",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-teal-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Canva")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,canva:P.length}))},w=>{E("Error al cargar productos de Canva"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"canva_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"canva"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"canva"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Canva`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-teal-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-teal-500 text-white rounded-full hover:bg-teal-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-teal-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Canva...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-teal-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-teal-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-teal-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-teal-600/80 hover:bg-teal-700 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-teal-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-teal-500 text-white hover:bg-teal-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-teal-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-teal-600/30 text-white border border-teal-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-teal-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-4b5f9f2972d9?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Canva"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Crea diseños profesionales con acceso a todas las herramientas y plantillas de Canva Pro"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-teal-500 hover:text-teal-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(13,148,136,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-teal-500 bg-teal-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-teal-500",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-teal-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-teal-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-teal-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-teal-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-teal-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-teal-500 via-teal-600 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-teal-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-teal-500 bg-gray-700 border-gray-600 rounded focus:ring-teal-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-teal-500 hover:text-teal-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-teal-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-teal-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-teal-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-teal-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-teal-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Aceptar"})})]})})]})},zF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-green-500",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-green-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","ChatGPT")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,chatgpt:P.length}))},w=>{E("Error al cargar productos de ChatGPT"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"chatgpt_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"chatgpt"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"chatgpt"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=ChatGPT`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en ChatGPT...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-green-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-green-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-green-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1677442136019-2d7430f771bb?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de ChatGPT"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a las funciones avanzadas de ChatGPT Plus para conversaciones más inteligentes y productivas"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-green-500 hover:text-green-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(13,148,136,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-500 bg-green-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-green-500",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-green-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-green-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-green-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-green-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-lime-500 hover:from-green-600 hover:to-lime-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-green-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-500 bg-gray-700 border-gray-600 rounded focus:ring-green-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-green-500 hover:text-green-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-green-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},BF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-orange-500",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-orange-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Crunchyroll")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,crunchyroll:P.length}))},w=>{E("Error al cargar productos de Crunchyroll"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"crunchyroll_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"crunchyroll"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"crunchyroll"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Crunchyroll`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-orange-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-orange-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-orange-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-orange-500 text-white rounded-full hover:bg-orange-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-orange-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Crunchyroll...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-orange-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-orange-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-orange-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-orange-600/80 hover:bg-orange-700 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-orange-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-orange-500 text-white hover:bg-orange-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-orange-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-orange-600/30 text-white border border-orange-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1618336753974-8d9f3044f8b6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Crunchyroll"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de anime, manga y series asiáticas sin anuncios con nuestras cuentas premium de Crunchyroll"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-orange-500 hover:text-orange-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,165,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-orange-500 bg-orange-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-orange-500",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-orange-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-orange-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-orange-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-orange-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-orange-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-orange-500 via-orange-600 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-orange-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-orange-500 bg-gray-700 border-gray-600 rounded focus:ring-orange-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-orange-500 hover:text-orange-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-orange-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-orange-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-orange-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-orange-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-orange-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all",children:"Aceptar"})})]})})]})},FF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-pink-500",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-pink-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Redes Sociales")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,redessociales:P.length}))},w=>{E("Error al cargar productos de Redes Sociales"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"redessociales_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"redessociales"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"redessociales"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Redes Sociales`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-pink-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-pink-500 text-white rounded-full hover:bg-pink-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-pink-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Redes Sociales...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-pink-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-pink-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-pink-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-pink-600/80 hover:bg-pink-700 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-pink-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-pink-500 text-white hover:bg-pink-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-pink-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-pink-600/30 text-white border border-pink-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-pink-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-7d873e6e8b58?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Redes Sociales"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de funciones exclusivas en tus plataformas favoritas de redes sociales"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-pink-500 hover:text-pink-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(244,114,182,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-pink-500 bg-pink-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-pink-500",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-pink-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-pink-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-pink-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-pink-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-pink-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-pink-500 via-pink-600 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-pink-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-pink-500 bg-gray-700 border-gray-600 rounded focus:ring-pink-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-pink-500 hover:text-pink-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-pink-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-pink-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-pink-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-pink-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-pink-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Aceptar"})})]})})]})},UF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-green-400",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-green-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Apple Music")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,applemusic:P.length}))},w=>{E("Error al cargar productos de Apple Music"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[productId].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"applemusic_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"applemusic"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"applemusic"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Apple Music`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple Music...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-green-400 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-green-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-green-400",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514327605112-b887c0e61c0a?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Apple Music Premium"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de música sin límites con nuestras suscripciones a Apple Music"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-green-400 hover:text-green-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,255,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-400 bg-green-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-green-400",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-green-400",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-green-400",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-green-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-green-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-green-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-400 bg-gray-700 border-gray-600 rounded focus:ring-green-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-green-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-green-400 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},$F=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-gray-200",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-gray-200",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-600",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Apple Tv")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,appletv:P.length}))},w=>{E("Error al cargar productos de AppleTV"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"appletv_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"appletv"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"appletv"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=AppleTV`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-200 text-gray-900 flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-gray-200 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-gray-200 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gray-200 text-gray-900 rounded-full hover:bg-gray-300 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-200 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple TV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-gray-200 focus:border-gray-200 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-gray-200 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-gray-200"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-gray-200",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-gray-200/80 text-gray-900 hover:bg-gray-300 transition-all text-sm",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-gray-300 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-gray-200 text-gray-900 hover:bg-gray-300 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-200",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-gray-200/30 text-white border border-gray-200/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-200"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-0f1a91f70d79?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Apple TV+: Streaming Exclusivo"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de series y películas originales de Apple TV+ en cualquier dispositivo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-gray-200 hover:text-gray-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,255,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-gray-200 bg-gray-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-gray-200",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-gray-200",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-gray-200",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-gray-200 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-gray-200",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-gray-200",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-gray-200 via-gray-300 to-white/80 text-gray-900 hover:from-gray-300 hover:to-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-gray-200"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-gray-200 focus:border-gray-200 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-gray-200 focus:border-gray-200 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-gray-200 bg-gray-700 border-gray-600 rounded focus:ring-gray-200"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-gray-200 hover:text-gray-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-gray-200 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-gray-200 text-gray-900 rounded-md hover:bg-gray-300 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-gray-200"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-gray-200"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-gray-200 text-gray-900 rounded-md hover:bg-gray-300 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-gray-200"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-gray-200"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-gray-200 text-gray-900 rounded-md hover:bg-gray-300 transition-all",children:"Aceptar"})})]})})]})},WF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-blue-700",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-blue-700",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Iptv")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,iptv:P.length}))},w=>{E("Error al cargar productos de IPTV"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"iptv_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"iptv"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"iptv"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Iptv`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-700 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-blue-700 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-700 text-white rounded-full hover:bg-blue-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-700 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en IPTV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-700 focus:border-blue-700 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-blue-700 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-blue-700"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-blue-700",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-700/80 hover:bg-blue-800 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-700 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-700 text-white hover:bg-blue-800 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-700",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-700/30 text-white border border-blue-700/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-700/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522869635100-9f4c5e86aa37?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"IPTV Premium"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de una amplia variedad de canales con nuestras suscripciones a IPTV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-blue-700 hover:text-blue-600 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-blue-700 bg-blue-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-blue-700",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-blue-700",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-blue-700",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-blue-700 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-700",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-700",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-700 via-blue-800 to-cyan-700 hover:from-blue-800 hover:to-cyan-800 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-blue-700"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-700 focus:border-blue-700 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-700 focus:border-blue-700 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-700 bg-gray-700 border-gray-600 rounded focus:ring-blue-700"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-blue-700 hover:text-blue-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-700 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-800 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-700"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-700"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-800 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-700"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-700"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-800 transition-all",children:"Aceptar"})})]})})]})},qF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-red-500",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-red-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-600",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Flujo Tv")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,flujotv:P.length}))},w=>{E("Error al cargar productos de FlujoTV"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"flujotv_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"flujotv"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"flujotv"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=FlujoTV`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-200 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en FlujoTV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-red-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-red-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-200",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-200"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-500/30 text-white border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-red-500/20 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1554050855-c84a7f9e3b7b?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"FlujoTV: Entretenimiento Sin Límites"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Canales en vivo, películas, series y deportes en alta definición para toda la familia"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-gray-200 hover:text-red-500 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,255,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-gray-200 bg-gray-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-red-500",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-red-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-red-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-gray-200 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-red-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-red-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-red-500 via-red-600 to-red-700 text-white hover:from-red-600 hover:to-red-800":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-gray-700 border-gray-600 rounded focus:ring-red-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-red-500 hover:text-red-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Aceptar"})})]})})]})},HF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-pink-500",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-pink-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Viki Rakuten")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,vikirakuten:P.length}))},w=>{E("Error al cargar productos de Viki Rakuten"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"vikirakuten_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"vikirakuten"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"vikirakuten"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Viki Rakuten`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-pink-500 text-white rounded-full hover:bg-pink-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-pink-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Viki Rakuten...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-pink-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-pink-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-pink-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-pink-500/80 hover:bg-pink-600 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-pink-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-pink-500 text-white hover:bg-pink-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-pink-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-pink-500/30 text-white border border-pink-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-pink-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-0f1a1181fb95?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Viki Rakuten"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de los mejores dramas asiáticos con nuestras suscripciones a Viki Rakuten"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-pink-500 hover:text-pink-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-pink-500 bg-pink-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-pink-500",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-pink-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-pink-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-pink-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-pink-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-pink-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-pink-500 via-pink-600 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-pink-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-pink-500 bg-gray-700 border-gray-600 rounded focus:ring-pink-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-pink-500 hover:text-pink-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-pink-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-pink-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-pink-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-pink-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-pink-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Aceptar"})})]})})]})},GF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-red-700",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-red-700",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Pornhub")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,pornhub:P.length}))},w=>{E("Error al cargar productos de Pornhub"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"pornhub_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"pornhub"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"pornhub"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Pornhub`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-red-700 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-red-700 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-700 text-white rounded-full hover:bg-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-700 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Pornhub...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-700 focus:border-red-700 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-red-700 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-red-700"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-red-700",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-700/80 hover:bg-red-800 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-700 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-red-700 text-white hover:bg-red-800 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-700",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-700/30 text-white border border-red-700/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-700/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310766-78a391814432?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Pornhub"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a contenido premium con nuestras suscripciones a Pornhub"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-red-700 hover:text-red-600 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-red-700 bg-red-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-red-700",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-red-700",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-red-700",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-red-700 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-red-700",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-red-700",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-red-700 via-red-800 to-rose-700 hover:from-red-800 hover:to-rose-800 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-red-700"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-700 focus:border-red-700 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-700 focus:border-red-700 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-700 bg-gray-700 border-gray-600 rounded focus:ring-red-700"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-red-700 hover:text-red-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-red-700 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-700"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-700"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-700"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-700"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-all",children:"Aceptar"})})]})})]})},QF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-600",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Paramount")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,paramount:P.length}))},w=>{E("Error al cargar productos de Paramount"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"paramount_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"paramount"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"paramount"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Paramount`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-200 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Paramount+...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-200",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-200"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-500/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-500/20 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1485846234645-a62644f84728?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Paramount+: Cine y Series"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de películas, series y contenido exclusivo de Paramount, CBS, MTV y más"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-gray-200 hover:text-blue-500 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,255,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-gray-200 bg-gray-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-blue-500",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-blue-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-blue-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-gray-200 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 text-white hover:from-blue-600 hover:to-blue-800":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-blue-500 hover:text-blue-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Nota: Paramount+ ofrece contenido de marcas como CBS, MTV, Nickelodeon y más. Asegúrate de cumplir con las políticas de uso del servicio."})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."}),e.jsx("li",{children:"Paramount+ incluye contenido de diversas marcas como CBS, MTV, y Nickelodeon. Asegúrate de cumplir con las políticas de uso del servicio."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},KF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-600",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Licencias")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,licencias:P.length}))},w=>{E("Error al cargar productos de Licencias"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"licencias_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"licencias"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"licencias"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Licencias`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-200 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Licencias...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-200",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-200"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-500/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-500/20 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Licencias de Software"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a licencias de software confiables y originales para tus necesidades"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Licencias Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-gray-200 hover:text-blue-500 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,255,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-gray-200 bg-gray-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-blue-500",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-blue-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-blue-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-gray-200 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 text-white hover:from-blue-600 hover:to-blue-800":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-blue-500 hover:text-blue-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Nota: Asegúrate de cumplir con las políticas de uso de las licencias adquiridas."})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."}),e.jsx("li",{children:"Las licencias adquiridas deben usarse conforme a las políticas del proveedor del software."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},YF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-green-500",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-green-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Capcut")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,capcut:P.length}))},w=>{E("Error al cargar productos de Capcut"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"capcut_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"capcut"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"capcut"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Capcut`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Capcut...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-green-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-green-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-green-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-500/80 hover:bg-green-600 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-500/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68c34?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Capcut"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Edita videos como profesional con nuestras suscripciones a Capcut"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-green-500 hover:text-green-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-500 bg-green-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-green-500",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-green-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-green-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-green-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-green-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-green-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-500 bg-gray-700 border-gray-600 rounded focus:ring-green-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-green-500 hover:text-green-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},XF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-green-400",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-green-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Duolingo")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,duolingo:P.length}))},w=>{E("Error al cargar productos de Duolingo"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"duolingo_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"duolingo"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"duolingo"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Duolingo`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-400 text-white rounded-full hover:bg-green-500 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Duolingo...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-green-400 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-green-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-green-400",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-400/80 hover:bg-green-500 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-green-400 text-white hover:bg-green-500 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-400/30 text-white border border-green-400/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-400/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-479437144403?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Duolingo"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Aprende idiomas de forma divertida con nuestras suscripciones a Duolingo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-green-400 hover:text-green-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-400 bg-green-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-green-400",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-green-400",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-green-400",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-green-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-green-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-green-400 via-green-500 to-emerald-500 hover:from-green-500 hover:to-emerald-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-green-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-400 bg-gray-700 border-gray-600 rounded focus:ring-green-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-green-400 hover:text-green-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-green-400 text-white rounded-md hover:bg-green-500 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-green-400 text-white rounded-md hover:bg-green-500 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-green-400 text-white rounded-md hover:bg-green-500 transition-all",children:"Aceptar"})})]})})]})},JF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Dgo")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,dgo:P.length}))},w=>{E("Error al cargar productos de Dgo"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"dgo_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"dgo"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"dgo"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Dgo`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Dgo...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522202176988-66273c2b6e3c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Dgo"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de streaming de alta calidad con Dgo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-blue-500 hover:text-blue-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(59,130,246,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-blue-500 bg-blue-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-blue-500",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-blue-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-blue-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-blue-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-blue-500 hover:text-blue-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},ZF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligaMax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-green-500",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-green-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Liga Max")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,ligaMax:P.length}))},w=>{E("Error al cargar productos de Liga Max"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"ligaMax_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"ligaMax"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"ligaMax"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Liga Max`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Liga Max...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-green-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-green-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-green-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligaMax",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligaMax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1557672172-298e090bd0f1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Liga Max"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de deportes en vivo con Liga Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-green-500 hover:text-green-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(34,197,94,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-500 bg-green-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-green-500",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-green-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-green-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-green-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-green-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-green-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-500 bg-gray-700 border-gray-600 rounded focus:ring-green-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-green-500 hover:text-green-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-green-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},eU=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarPlay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Movistar Play")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,movistarPlay:P.length}))},w=>{E("Error al cargar productos de Movistar Play"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"movistarPlay_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"movistarPlay"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"movistarPlay"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Movistar Play`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Movistar Play...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarPlay",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarPlay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522778119026-d4747c2b3b72?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Movistar Play"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de películas, series y TV en vivo con Movistar Play"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-blue-500 hover:text-blue-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(59,130,246,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-blue-500 bg-blue-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-blue-500",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-blue-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-blue-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-blue-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-blue-500 hover:text-blue-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},tU=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-red-600",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-red-600",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Youtube")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,youtube:P.length}))},w=>{E("Error al cargar productos de YouTube"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"youtube_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"youtube"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"youtube"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Youtube`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-red-600 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-red-600 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-600 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en YouTube...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-600 focus:border-red-600 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-red-600 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-red-600"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-red-600",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-600 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-red-600 text-white hover:bg-red-700 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-600",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-600/30 text-white border border-red-600/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-600/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1611162617210-7d673bf0f crawl&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de YouTube"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de videos sin anuncios y contenido exclusivo con YouTube Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-red-600 hover:text-red-500 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(239,68,68,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-red-600 bg-red-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-red-600",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-red-600",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-red-600",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-red-600 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-red-600",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-red-600",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-red-600 via-red-700 to-pink-600 hover:from-red-700 hover:to-pink-700 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-red-600"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-600 focus:border-red-600 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-600 focus:border-red-600 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-600 bg-gray-700 border-gray-600 rounded focus:ring-red-600"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-red-600 hover:text-red-500 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-red-600 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-600"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-600"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-600"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-600"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-all",children:"Aceptar"})})]})})]})},sU=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-purple-500",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-purple-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Deezer")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,deezer:P.length}))},w=>{E("Error al cargar productos de Deezer"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"deezer_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"deezer"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"deezer"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Deezer`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-purple-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-purple-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-purple-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-purple-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Deezer...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-purple-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-purple-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-purple-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-purple-500/80 hover:bg-purple-600 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-purple-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-purple-500 text-white hover:bg-purple-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-purple-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-purple-500/30 text-white border border-purple-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Deezer"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Escucha música sin anuncios y disfruta de alta calidad con Deezer Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-purple-500 hover:text-purple-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(139,92,246,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-purple-500 bg-purple-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-purple-500",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-purple-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-purple-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-purple-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-purple-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-purple-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-purple-500 via-purple-600 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-purple-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-purple-500 bg-gray-700 border-gray-600 rounded focus:ring-purple-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-purple-500 hover:text-purple-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-purple-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-purple-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-purple-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-purple-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-purple-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all",children:"Aceptar"})})]})})]})},rU=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-green-400",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-green-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Tidal")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,tidal:P.length}))},w=>{E("Error al cargar productos de Tidal"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"tidal_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:selected.NodesRenewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"tidal"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"tidal"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Tidal`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md attorno-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Tidal...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-green-400 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-green-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-green-400",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Tidal"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de música en alta fidelidad y contenido exclusivo con nuestras cuentas premium de Tidal"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-green-400 hover:text-green-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,255,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-400 bg-green-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-green-400",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-green-400",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-green-400",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-green-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-green-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-green-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-400 bg-gray-700 border-gray-600 rounded focus:ring-green-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-green-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-green-400 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},aU=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-green-400",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-green-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","Vpn")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,vpn:P.length}))},w=>{E("Error al cargar productos de VPN"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"vpn_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"vpn"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"vpn"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Vpn`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en VPN...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-green-400 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-green-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-green-400",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-4794370e6a50?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Servicios VPN Premium"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Navega de forma segura y privada con nuestros servicios VPN de alta calidad"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-green-400 hover:text-green-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,255,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-400 bg-green-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-green-400",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-green-400",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-green-400",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-green-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-green-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-green-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-400 bg-gray-700 border-gray-600 rounded focus:ring-green-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-green-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-green-400 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},nU=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","WinTv")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,wintv:P.length}))},w=>{E("Error al cargar productos de WinTV"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"wintv_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"wintv"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"wintv"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=WinTv`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en WinTV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-500/80 hover:bg-blue-600 transition-all text-sm text-white",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-500/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"WinTV: Televisión Digital Premium"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de más de 40 canales en vivo, grabaciones y contenido exclusivo con WinTV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-blue-500 hover:text-blue-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(59,130,246,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-blue-500 bg-blue-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-blue-500",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-blue-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-blue-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-blue-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-blue-500 hover:text-blue-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},iU=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,O]=v.useState(null),[_,A]=v.useState(null),[z,L]=v.useState(!1),[K,H]=v.useState(!1),[G,R]=v.useState(null),[u,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,te]=v.useState(""),[se,X]=v.useState({}),$=St(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Le=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,W)=>e.jsx(Fe,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${W}`)),p&&e.jsx(Fe,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,W)=>e.jsx(Fe,{className:"text-gray-600",size:16},`empty-${W}`))]})};v.useEffect(()=>{const n=At(Qe,async j=>{if(j)try{const p=await et(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=xe(Y(I,"products"),je("category","==","BuscaPersonas")),j=we(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await et(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),q(x=>({...x,buscapersonas:P.length}))},w=>{E("Error al cargar productos de Busca Personas"),console.error(w)}),p=xe(Y(I,"ratings")),T=we(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),X(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=xe(Y(I,"buscapersonas_accounts"),je("status","==","available")),W=we(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=xe(Y(I,"products"),je("category","==",w));return we(P,x=>{q(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),W(),ie.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}O({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const W=F.data();if(W.availableAccounts<=0&&W.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=Y(I,`products/${n.id}/accounts`),ie=xe(ae,je("status","==","available"),Ut(1)),w=await jt(ie);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const ee=B(I,"providerBalances",n.providerId),ce=await p.get(ee);let ne=0;ce.exists()?ne=parseFloat(ce.data().balance)||0:p.set(ee,{balance:0,provider:n.providerId,updatedAt:ye()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const ke=S.data().orders||[],Se={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"buscapersonas"};p.update(m,{balance:de,orders:[...ke,Se]});const ue=(Number(V.data().balance)||0)+n.price,Ie=V.data().sales||[],ve={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...Ie,ve]});const Re=ne+n.price;p.set(ee,{balance:Re,provider:n.providerId,updatedAt:ye()},{merge:!0});const Oe=B(Y(I,"sales"));return p.set(Oe,{...Se,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const W=B(I,"users",n.providerId),ae=await p.get(W);if(!ae.exists())throw new Error("Proveedor no encontrado");const ie=B(I,"providerBalances",n.providerId),w=await p.get(ie);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ye()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"buscapersonas"};p.update(T,{balance:m,orders:[...S,Z]});const ee=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],ne={saleId:B(Y(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(W,{balance:ee,sales:[...ce,ne]});const J=D+n.price;p.set(ie,{balance:J,provider:n.providerId,updatedAt:ye()},{merge:!0});const ge=B(Y(I,"sales"));p.set(ge,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ne.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),O(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},be=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},fe=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ze=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Me=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Busca Personas`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),He=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),Ge=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Xe,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Bt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-200 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Busca Personas...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:U,onChange:n=>te(n.target.value)}),e.jsx("button",{onClick:Me,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ze,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ye,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-200",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-200"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-500/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-500/20 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321497487-e288fb19713f?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Busca Personas"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Encuentra información confiable sobre personas de manera rápida y segura"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Servicios de Búsqueda Disponibles"}),e.jsx("button",{onClick:()=>H(!0),className:"text-sm sm:text-base text-gray-200 hover:text-blue-500 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,255,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),He(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-gray-200 bg-gray-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(zt,{className:"text-blue-500",size:13}),Ge(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Le(se[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Ht,{className:"text-blue-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Wt,{className:"text-blue-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-gray-200 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>be(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>fe(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 text-white hover:from-blue-600 hover:to-blue-800":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(tt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(tt,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>O({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>O({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>fe(y.product),className:"text-blue-500 hover:text-blue-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Nota: El uso de los servicios de búsqueda de personas debe cumplir con las leyes de privacidad y regulaciones locales."})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."}),e.jsx("li",{children:"Los servicios de búsqueda de personas deben usarse de manera ética y cumplir con las leyes de privacidad aplicables."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:G.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{G.onClose&&G.onClose(),R(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})};v.memo(()=>{const[s,t]=v.useState(null),[r,a]=v.useState(0),[i,l]=v.useState(!0),[o,c]=v.useState(null),[d,h]=v.useState(!1),[g,N]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0}),[k,E]=v.useState(""),y=St();v.useEffect(()=>{const A=At(Qe,async z=>{if(z)try{const L=await et(B(I,"users",z.uid));if(L.exists()){const K=L.data();t({id:z.uid,name:K.username||"Usuario",email:z.email,orders:K.orders||[],role:K.role||"user"}),a(Number(K.balance)||0)}else c("Usuario no encontrado"),console.error("Usuario no encontrado en la base de datos")}catch(L){c("Error al cargar datos"),console.error(L)}else t(null),a(0);l(!1)});return()=>A()},[]),v.useEffect(()=>{const z=[{name:"Netflix",key:"netflix"},{name:"Spotify",key:"spotify"},{name:"Disney",key:"disney"},{name:"Max",key:"max"},{name:"Prime Video",key:"primevideo"},{name:"Vix",key:"vix"},{name:"Crunchyroll",key:"crunchyroll"},{name:"Canva",key:"canva"},{name:"ChatGPT",key:"chatgpt"},{name:"Redes Sociales",key:"redessociales"}].map(({name:L,key:K})=>{const H=xe(Y(I,"products"),je("category","==",L));return we(H,G=>{N(R=>({...R,[K]:G.docs.length}))},G=>console.error(`Error loading ${L}:`,G))});return()=>z.forEach(L=>L())},[]);const O=()=>{if(!s)return y("/login");y({user:"/dashboard/user",affiliate:"/dashboard/affiliate",provider:"/dashboard/provider",admin:"/dashboard/admin"}[s.role]||"/dashboard/user")},_=A=>{A.preventDefault(),k.trim()&&y(`/search?q=${encodeURIComponent(k)}`)};return i?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:[e.jsx(rp,{className:"animate-spin text-4xl text-cyan-500"}),e.jsx("span",{className:"ml-2 text-white",children:"Cargando..."})]}):o?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 p-4",children:[e.jsx(rp,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-400 mb-6",children:o}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600",children:"Reintentar"})]}):e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-800/80 backdrop-blur-sm",children:e.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(b,{to:"/",className:"flex items-center gap-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-8"}),e.jsx("span",{className:"text-lg font-bold text-cyan-500 hidden sm:block",children:"BlackStreaming"})]})}),e.jsx("form",{onSubmit:_,className:"flex-1 max-w-md mx-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full py-2 px-4 rounded-lg bg-gray-700 text-white border border-gray-600 focus:ring-2 focus:ring-cyan-500 focus:border-transparent",value:k,onChange:A=>E(A.target.value)}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-cyan-500",children:e.jsx(at,{size:20})})]})}),e.jsx("div",{className:"flex items-center gap-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:block text-sm text-gray-300",children:s.name}),e.jsxs("span",{className:"px-3 py-1 bg-gray-700 rounded-lg text-sm",children:["S/ ",r.toFixed(2)]}),e.jsx("button",{onClick:O,className:"p-2 hover:bg-gray-700 rounded-lg",title:"Dashboard",children:e.jsx(Ye,{className:"text-cyan-500",size:20})}),e.jsxs("button",{onClick:()=>{Qe.signOut(),y("/")},className:"flex items-center gap-1 px-3 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:[e.jsx(Et,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>y("/login"),className:"px-3 py-2 text-sm hover:text-cyan-500",children:"Ingresar"}),e.jsx("button",{onClick:()=>y("/register"),className:"px-3 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 text-sm",children:"Registrarse"})]})})]})}),e.jsx("main",{className:"flex-1 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-lg text-center",children:[e.jsx("div",{className:"p-4 bg-gray-800 rounded-full inline-flex mb-6",children:e.jsx(rp,{className:"text-4xl text-cyan-500"})}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"En Mantenimiento"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Estamos mejorando nuestra plataforma para ti."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-300 mb-6",children:[e.jsx(zt,{className:"text-yellow-500"}),e.jsx("span",{children:"Volveremos pronto."})]}),e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"¿Qué estamos haciendo?"}),e.jsxs("ul",{className:"text-left space-y-2 text-gray-300",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Corrección de errores en el sistema de pedidos"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Solución de fallos en el retiro de dinero"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Arreglo de errores al pasar del sistema al pedido"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Actualización del dashboard del proveedor"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Actualización del dashboard del usuario"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Refuerzo de la seguridad general del sitio"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Mejora en la visualización y diseño"]})]}),e.jsx("button",{onClick:()=>h(!0),className:"mt-4 text-cyan-500 hover:text-cyan-400 underline",children:"Términos Generales"})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-800 rounded-lg max-w-lg w-full max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Términos y Condiciones"}),e.jsx("button",{onClick:()=>h(!1),className:"hover:text-gray-300",children:e.jsx(FiX,{size:24})})]}),e.jsx("div",{className:"space-y-4 text-gray-300",children:[{title:"Proceso de Compra",text:"El proveedor te contactará en 24 horas hábiles para los accesos."},{title:"Garantía",text:"7 días de garantía. El proveedor resolverá problemas o reembolsará."},{title:"Uso Responsable",text:"No nos responsabilizamos por suspensiones por mal uso."},{title:"Soporte",text:"Contacta al proveedor vía WhatsApp."},{title:"Renovaciones",text:"Solicita renovaciones manuales antes del fin del período."}].map(({title:A,text:z},L)=>e.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:A}),e.jsx("p",{children:z})]},L))}),e.jsx("button",{onClick:()=>h(!1),className:"w-full mt-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-800 py-6",children:e.jsxs("div",{className:"container mx-auto px-4 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:It,alt:"BlackStreaming",className:"h-6"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-500",children:"BlackStreaming"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Desarrollado por Saiph"})]})})]})});const oU=v.createContext(),lU=({children:s})=>{const t=sy(vd),[r,a]=v.useState(null),[i,l]=v.useState(!0);return v.useEffect(()=>{const o=At(t,c=>{a(c),l(!1)});return()=>o()},[]),e.jsx(oU.Provider,{value:{user:r,loading:i},children:!i&&s})},cU=()=>e.jsx(XE,{children:e.jsxs(e.Fragment,{children:[e.jsx(Ct,{path:"/",element:e.jsx(lF,{})}),e.jsx(Ct,{path:"/login",element:e.jsx(hF,{})}),e.jsx(Ct,{path:"/register",element:e.jsx(bF,{})}),e.jsx(Ct,{path:"/dashboard/user",element:e.jsx(wF,{})}),e.jsx(Ct,{path:"/dashboard/affiliate",element:e.jsx(PF,{})}),e.jsx(Ct,{path:"/dashboard/provider",element:e.jsx(CF,{})}),e.jsx(Ct,{path:"/dashboard/admin",element:e.jsx(_F,{})}),e.jsx(Ct,{path:"/netflix",element:e.jsx(DF,{})}),e.jsx(Ct,{path:"/disney",element:e.jsx(AF,{})}),e.jsx(Ct,{path:"/max",element:e.jsx(RF,{})}),e.jsx(Ct,{path:"/spotify",element:e.jsx(MF,{})}),e.jsx(Ct,{path:"/primevideo",element:e.jsx(LF,{})}),e.jsx(Ct,{path:"/vix",element:e.jsx(OF,{})}),e.jsx(Ct,{path:"/canva",element:e.jsx(VF,{})}),e.jsx(Ct,{path:"/chatgpt",element:e.jsx(zF,{})}),e.jsx(Ct,{path:"/crunchyroll",element:e.jsx(BF,{})}),e.jsx(Ct,{path:"/redessociales",element:e.jsx(FF,{})}),e.jsx(Ct,{path:"/applemusic",element:e.jsx(UF,{})}),e.jsx(Ct,{path:"/appletv",element:e.jsx($F,{})}),e.jsx(Ct,{path:"/iptv",element:e.jsx(WF,{})}),e.jsx(Ct,{path:"/flujotv",element:e.jsx(qF,{})}),e.jsx(Ct,{path:"/vikirakuten",element:e.jsx(HF,{})}),e.jsx(Ct,{path:"/pornhub",element:e.jsx(GF,{})}),e.jsx(Ct,{path:"/paramount",element:e.jsx(QF,{})}),e.jsx(Ct,{path:"/licencias",element:e.jsx(KF,{})}),e.jsx(Ct,{path:"/capcut",element:e.jsx(YF,{})}),e.jsx(Ct,{path:"/duolingo",element:e.jsx(XF,{})}),e.jsx(Ct,{path:"/dgo",element:e.jsx(JF,{})}),e.jsx(Ct,{path:"/ligamax",element:e.jsx(ZF,{})}),e.jsx(Ct,{path:"/movistarplay",element:e.jsx(eU,{})}),e.jsx(Ct,{path:"/youtube",element:e.jsx(tU,{})}),e.jsx(Ct,{path:"/deezer",element:e.jsx(sU,{})}),e.jsx(Ct,{path:"/tidal",element:e.jsx(rU,{})}),e.jsx(Ct,{path:"/vpn",element:e.jsx(aU,{})}),e.jsx(Ct,{path:"/wintv",element:e.jsx(nU,{})}),e.jsx(Ct,{path:"/buscapersonas",element:e.jsx(iU,{})})]})});ap.createRoot(document.getElementById("root")).render(e.jsx(Sn.StrictMode,{children:e.jsx(jT,{children:e.jsx(lU,{children:e.jsx(cU,{})})})}));
